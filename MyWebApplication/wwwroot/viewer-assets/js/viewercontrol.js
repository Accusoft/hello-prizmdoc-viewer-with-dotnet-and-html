// See license at https://www.npmjs.com/package/@prizmdoc/viewer-core
// @prizmdoc/viewer-core@13.20.3
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.viewerCore=f()}})(function(){var define,module,exports;return(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){'use strict';var styleElementsInsertedAtTop=[];var insertStyleElement=function(styleElement,options){var head=document.head||document.getElementsByTagName('head')[0];var lastStyleElementInsertedAtTop=styleElementsInsertedAtTop[styleElementsInsertedAtTop.length-1];options=options||{};options.insertAt=options.insertAt||'bottom';if(options.insertAt==='top'){if(!lastStyleElementInsertedAtTop){head.insertBefore(styleElement,head.firstChild);}else if(lastStyleElementInsertedAtTop.nextSibling){head.insertBefore(styleElement,lastStyleElementInsertedAtTop.nextSibling);}else{head.appendChild(styleElement);}styleElementsInsertedAtTop.push(styleElement);}else if(options.insertAt==='bottom'){head.appendChild(styleElement);}else{throw new Error('Invalid value for parameter \'insertAt\'. Must be \'top\' or \'bottom\'.');}};module.exports={createLink:function(href,attributes){var head=document.head||document.getElementsByTagName('head')[0];var link=document.createElement('link');link.href=href;link.rel='stylesheet';for(var key in attributes){if(!attributes.hasOwnProperty(key)){continue;}var value=attributes[key];link.setAttribute('data-'+key,value);}head.appendChild(link);},createStyle:function(cssText,attributes,extraOptions){extraOptions=extraOptions||{};var style=document.createElement('style');style.type='text/css';for(var key in attributes){if(!attributes.hasOwnProperty(key)){continue;}var value=attributes[key];style.setAttribute('data-'+key,value);}if(style.sheet){style.innerHTML=cssText;style.sheet.cssText=cssText;insertStyleElement(style,{insertAt:extraOptions.insertAt});}else if(style.styleSheet){insertStyleElement(style,{insertAt:extraOptions.insertAt});style.styleSheet.cssText=cssText;}else{style.appendChild(document.createTextNode(cssText));insertStyleElement(style,{insertAt:extraOptions.insertAt});}}};},{}],2:[function(require,module,exports){var cursor=require('./util/cursor.js');var mask=require('./util/mask.js');function InputMask(elem,options){var originalPlaceholder=elem.placeholder;var regexMask=mask.getRegex(options.value,options.translations);function onInput(){var cursorPos=cursor.get(elem);var oldVal=elem.value;var newVal=mask.getValue(oldVal,options.value,options.translations,cursorPos);elem.value=newVal.val;setTimeout(function(){cursor.set(elem,cursorPos+newVal.cursorAdjustment);},1);};function clearInvalidValue(){elem.value=mask.fill(elem.value,options.value,options.translations);if(!regexMask.test(elem.value)){elem.value='';}}(function init(){clearInvalidValue();elem.placeholder=mask.getPlaceholder(options.value,options.translations);elem.addEventListener('input',onInput);elem.addEventListener('focusout',clearInvalidValue);elem.addEventListener('blur',clearInvalidValue);}());this.destroy=function(){clearInvalidValue();elem.placeholder=originalPlaceholder;elem.removeEventListener('input',onInput);elem.removeEventListener('focusout',clearInvalidValue);elem.removeEventListener('blur',clearInvalidValue);};};module.exports=InputMask;},{"./util/cursor.js":3,"./util/mask.js":4}],3:[function(require,module,exports){function getCursor(elem){var position=0;if(elem.selectionEnd){position=elem.selectionEnd;}return Number(position);};function setCursor(elem,position){elem.setSelectionRange(position,position);};module.exports={get:getCursor,set:setCursor};},{}],4:[function(require,module,exports){var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reHasRegExpChar=new RegExp(reRegExpChar.source);function getMaskRegex(mask,translations){var maskRegex='';var char,translation,i;for(i=0;i<mask.length;i++){char=mask.charAt(i);translation=translations[char];if(translation){maskRegex+=translation.toString().replace(/.{1}$|^.{1}/g,'');}else if(reHasRegExpChar.test(char)){maskRegex+=char.replace(reRegExpChar,'\\$&');}else{maskRegex+=char;}}return new RegExp(maskRegex);};function getMaskPlaceholder(mask,translations){var placeholder=mask;var key;for(key in translations){if(translations.hasOwnProperty(key)){if(reHasRegExpChar.test(key)){key=key.replace(reRegExpChar,'\\$&');}placeholder=placeholder.replace(new RegExp(key,'g'),'_');}}return placeholder;};function getMaskValue(value,mask,translations,cursorPos){var result={val:'',cursorAdjustment:0};var m=0;var v=0;var lastUntranslatedMaskChar,maskChar,valChar,translation;while(m<mask.length&&v<value.length){maskChar=mask.charAt(m);valChar=value.charAt(v);translation=translations[maskChar];if(translation){if(valChar.match(translation)){result.val+=valChar;m+=1;}else if(v<cursorPos){result.cursorAdjustment-=1;}else if(valChar===lastUntranslatedMaskChar){lastUntranslatedMaskChar=null;}v+=1;}else{result.val+=maskChar;if(valChar===maskChar){v+=1;}else{if(v<cursorPos){result.cursorAdjustment+=1;}lastUntranslatedMaskChar=maskChar;}m+=1;}}return result;};function fillMask(value,mask,translations){var newVal=value;var index=value.length;var maskChar;while(index<mask.length){maskChar=mask[index];if(translations[maskChar]){break;}newVal+=maskChar;index+=1;}return newVal;};module.exports={getRegex:getMaskRegex,getPlaceholder:getMaskPlaceholder,getValue:getMaskValue,fill:fillMask};},{}],5:[function(require,module,exports){var util=require('./util.js');var regexSearch=require('./regex-search.js');var proximitySearch=require('./proximity-search.js');function isSimpleSearchInput(input){return(typeof input.pattern==='string'&&(typeof input.caseSensitive==='boolean'||typeof input.caseSensitive==='undefined'));};function isProximitySearchInput(input){if(!util.isPositiveInteger(input.distance)|| !(input.subTerms instanceof Array)){return false;}return util.every(input.subTerms,isSimpleSearchInput);};function isSearchInput(input){if(util.isPlainObject(input)&&typeof input.type==='string'){if(input.type==='simple'){return isSimpleSearchInput(input);}if(input.type==='proximity'){return isProximitySearchInput(input);}}return false;};function isArrayOfSearchInputs(input){if(!(input instanceof Array)){return false;}return util.every(input,isSearchInput);};function getRegExp(searchInput){return(new RegExp(searchInput.pattern,searchInput.caseSensitive?'g':'gi'));};function cleanSearchResult(searchInput){return function(val){return{input:searchInput,text:val.text,startIndex:val.startIndex};};};function getRegexResults(text,searchInput){var regex=getRegExp(searchInput);var results=regexSearch.getResultsForTerm(text,regex);return results.map(cleanSearchResult(searchInput));};function getProximityResults(text,searchInput){var regexes=searchInput.subTerms.map(getRegExp);var results=proximitySearch.getResults(text,regexes,searchInput.distance);return results.map(cleanSearchResult(searchInput));};function getResults(text,searchInputs){if(typeof text!=='string'){throw util.inputError('text','string');}if(!isArrayOfSearchInputs(searchInputs)){throw util.inputError('searchInputs','array of search inputs');}var combinedResults=[];searchInputs.forEach(function(term,i){if(term.type==='simple'){combinedResults=combinedResults.concat(getRegexResults(text,term));}else if(term.type==='proximity'){combinedResults=combinedResults.concat(getProximityResults(text,term));}else{throw util.inputError('searchInputs['+i+'].type','string equal to "simple" or "proximity"');}});util.sortResults(combinedResults);return combinedResults;};module.exports={getResults:getResults};},{"./proximity-search.js":8,"./regex-search.js":9,"./util.js":10}],6:[function(require,module,exports){var util=require('./util.js');function validateGetContextOptions(options){var rules=[{property:'options',validator:function(){return util.isPlainObject(options);},error:'object'},{property:'options.text',validator:function(){return(typeof options.text==='string');},error:'string'},{property:'options.startIndex',validator:function(){return util.isMinInteger(options.startIndex,0);},error:'integer that is at least 0'},{property:'options.endIndex',validator:function(){return util.isMinInteger(options.endIndex,0);},error:'integer that is at least 0'},{property:'options.padding',validator:function(){return util.isMinInteger(options.padding,0);},error:'integer that is at least 0'},{property:'options.startIndex',validator:function(){return(options.startIndex<options.text.length);},error:'integer that is less than "options.text.length"'},{property:'options.endIndex',validator:function(){return(options.endIndex<options.text.length);},error:'integer that is less than "options.text.length"'},{property:'options.startIndex',validator:function(){return(options.startIndex<=options.endIndex);},error:'integer that is at most "options.endIndex"'}];util.validateInput(rules);};function validateRectangleOptions(options){var rules=[{property:'options',validator:function(){return util.isPlainObject(options);},error:'object'},{property:'options.rectangles',validator:function(){return(options.rectangles instanceof Array);},error:'array'},{property:'options.startIndex',validator:function(){return util.isMinInteger(options.startIndex,0);},error:'integer that is at least 0'},{property:'options.endIndex',validator:function(){return util.isMinInteger(options.endIndex,0);},error:'integer that is at least 0'},{property:'options.startIndex',validator:function(){return util.isMaxInteger(options.startIndex,options.endIndex);},error:'integer that is at most "options.endIndex"'}];util.validateInput(rules);};function getContext(options){validateGetContextOptions(options);var startIndex=Math.max(options.startIndex-options.padding,0);var endIndex=Math.min(options.endIndex+options.padding,options.text.length-1);return{startIndex:(startIndex===0)?options.startIndex:options.padding,context:options.text.substring(startIndex,endIndex+1)};};function getBoundingRectangle(options){validateRectangleOptions(options);var boundingRectangle={left:Number.MAX_VALUE,right:0,top:Number.MAX_VALUE,bottom:0};var rectangle;for(var i=options.startIndex;i<=options.endIndex;i++){rectangle=options.rectangles[i];boundingRectangle.left=Math.min(rectangle[0],boundingRectangle.left);boundingRectangle.right=Math.max(rectangle[0]+rectangle[2],boundingRectangle.right);boundingRectangle.top=Math.min(rectangle[1],boundingRectangle.top);boundingRectangle.bottom=Math.max(rectangle[1]+rectangle[3],boundingRectangle.bottom);}return{x:boundingRectangle.left,y:boundingRectangle.top,width:boundingRectangle.right-boundingRectangle.left,height:boundingRectangle.bottom-boundingRectangle.top};};function getLineRectangles(options){validateRectangleOptions(options);var lineRectangles=[];function processCharacter(rectangle){var character=util.getRectangleObject(rectangle);var line=lineRectangles[lineRectangles.length-1];if(util.isCharacterAtEndOfLine(character,line)){lineRectangles.splice(-1,1,util.joinRectangles(line,character));return;}lineRectangles.push(character);};for(var i=options.startIndex;i<=options.endIndex;i++){processCharacter(options.rectangles[i]);}return lineRectangles;};module.exports={getContext:getContext,getBoundingRectangle:getBoundingRectangle,getLineRectangles:getLineRectangles};},{"./util.js":10}],7:[function(require,module,exports){var formatter=require('./formatter.js');var regexSearch=require('./regex-search.js');var proximitySearch=require('./proximity-search.js');var combinedSearch=require('./combined-search.js');module.exports={formatter:formatter,regex:regexSearch,proximity:proximitySearch,combined:combinedSearch};},{"./combined-search.js":5,"./formatter.js":6,"./proximity-search.js":8,"./regex-search.js":9}],8:[function(require,module,exports){var regexSearch=require('./regex-search.js');var util=require('./util.js');function isAProximityResult(matching,searchTerms){return(Object.keys(matching).length===searchTerms.length);};function getStartIndex(wordIndex,searchResult){var startIndex= -1;for(var i=1;i<wordIndex.length;i++){if(wordIndex[i]>searchResult.startIndex){startIndex=i-1;break;}}if(startIndex=== -1&&searchResult.startIndex>wordIndex[wordIndex.length-1]){startIndex=wordIndex.length-1;}return startIndex;};function getEndIndex(wordIndex,searchResult,termsLength,distance){var startIndex=getStartIndex(wordIndex,searchResult);var endIndex=null;if(distance===0){endIndex=startIndex+termsLength-1;}else{endIndex=startIndex+((termsLength-1)*distance+termsLength)-1;}return wordIndex[endIndex<wordIndex.length?endIndex:wordIndex.length-1];};function getWordIndex(text){if(typeof text!=='string'){throw util.inputError('text','string');}var wordIndex=[];var regex=(/[^\s]+/gm);var regexResult;while((regexResult=regex.exec(text))!==null){wordIndex.push(regexResult.index);}return wordIndex;};function getResults(text,searchTerms,distance){if(!util.isPositiveInteger(distance)){throw util.inputError('distance','integer that is greater than 0');}var wordIndex=getWordIndex(text);var searchResults=regexSearch.getResults(text,searchTerms);var proximityResults=[];searchResults.forEach(function(searchResult,i){var opts={nextIndex: -1,currentIndex:i,matches:{},nextResult:null};opts.endIndex=getEndIndex(wordIndex,searchResult,searchTerms.length,distance);opts.matches[searchResult.term]=true;while(opts.nextIndex<opts.endIndex&& !isAProximityResult(opts.matches,searchTerms)&&opts.currentIndex+1<searchResults.length){opts.nextResult=searchResults[++opts.currentIndex];opts.nextIndex=opts.nextResult.startIndex;if(opts.nextIndex<=opts.endIndex){opts.matches[opts.nextResult.term]=true;}}if(isAProximityResult(opts.matches,searchTerms)){proximityResults.push({text:text.substring(searchResult.startIndex,opts.nextResult.startIndex+opts.nextResult.text.length),startIndex:searchResult.startIndex});}});return proximityResults;};module.exports={getWordIndex:getWordIndex,getResults:getResults};},{"./regex-search.js":9,"./util.js":10}],9:[function(require,module,exports){var util=require('./util.js');function isRegExp(input){return(input instanceof RegExp);};function isArrayOfRegExp(input){if(!(input instanceof Array)){return false;}return util.every(input,isRegExp);};function validateGetResultsForTerm(text,searchTerm){if(typeof text!=='string'){throw util.inputError('text','string');}if(!isRegExp(searchTerm)){throw util.inputError('searchTerm','regular expression');}};function getResultsForTerm(text,searchTerm){validateGetResultsForTerm(text,searchTerm);var searchResults=[];var regexResult;while((regexResult=searchTerm.exec(text))!==null){if(regexResult[0]){searchResults.push({term:searchTerm.toString(),text:regexResult[0],startIndex:regexResult.index});}else{searchTerm.lastIndex+=1;}}return searchResults;};function getResults(text,searchTerms){if(typeof text!=='string'){throw util.inputError('text','string');}if(!isArrayOfRegExp(searchTerms)){throw util.inputError('searchTerms','array of regular expressions');}var combinedResults=[];for(var i=0;i<searchTerms.length;i++){combinedResults=combinedResults.concat(getResultsForTerm(text,searchTerms[i]));}util.sortResults(combinedResults);return combinedResults;};module.exports={getResultsForTerm:getResultsForTerm,getResults:getResults};},{"./util.js":10}],10:[function(require,module,exports){function inputError(property,expected){var a=(['a','e','i','o','u'].indexOf(expected.charAt(0))> -1)?'an':'a';return new Error('Invalid argument. Argument "'+property+'" must be '+a+' '+expected+'.');};function isInteger(input){return(typeof input==='number'&&Math.round(input)===input);};function isMinInteger(input,min){if(typeof min!=='number'){throw inputError('min','number');}return(isInteger(input)&&input>=min);};function isMaxInteger(input,max){if(typeof max!=='number'){throw inputError('max','number');}return(isInteger(input)&&input<=max);};function isPositiveInteger(input){return isMinInteger(input,0);};function isPlainObject(input){return(typeof input==='object'&&input!==null&& !(input instanceof Array)&&input.constructor===Object);};function validateInput(rules){rules.forEach(function(rule){if(!rule.validator()){throw inputError(rule.property,rule.error);}});return true;};function every(obj,fn){for(var key in obj){if(obj.hasOwnProperty(key)){if(!fn(obj[key],key)){return false;}}}return true;};function sortResults(results){results.sort(function(a,b){return a.startIndex-b.startIndex;});};function joinRectangles(rectA,rectB){var left=Math.min(rectA.x,rectB.x);var top=Math.min(rectA.y,rectB.y);var right=Math.max(rectA.x+rectA.width,rectB.x+rectB.width);var bottom=Math.max(rectA.y+rectA.height,rectB.y+rectB.height);return{x:left,y:top,width:right-left,height:bottom-top};};function isCharacterAtEndOfLine(character,line){if(line&&Math.abs(character.y-line.y)<1&&Math.abs(character.height-line.height)<1&&(character.x+character.width)>=(line.x+line.width)){return true;}return false;};function getRectangleObject(rect){return{x:rect[0],y:rect[1],width:rect[2],height:rect[3]};};module.exports={inputError:inputError,isInteger:isInteger,isMinInteger:isMinInteger,isMaxInteger:isMaxInteger,isPositiveInteger:isPositiveInteger,isPlainObject:isPlainObject,validateInput:validateInput,every:every,sortResults:sortResults,joinRectangles:joinRectangles,isCharacterAtEndOfLine:isCharacterAtEndOfLine,getRectangleObject:getRectangleObject};},{}],11:[function(require,module,exports){var css="/* page list specific */\n.pccViewerControl {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  /* promote to a new layer */\n  -webkit-transform: translateZ(0);\n  transform: translateZ(0);\n  /* iOS momentum scrolling */\n  -webkit-overflow-scrolling: touch;\n  /* helps touch zoom not overlap any other element */\n  overflow: hidden;\n}\n/* normalize override */\nsvg:not(:root) {\n  overflow: visible!important;\n}\n.pccPageListContainer {\n  box-sizing: border-box;\n}\n.pccPageListContainerWrapper {\n  -ms-transform: scale(1,1) translate(0px,0px);\n  -moz-transform: scale(1,1) translate(0px,0px);\n  -webkit-transform: scale3d(1,1,1) translate3d(0px,0px,0px);\n  transform: scale3d(1,1,1) translate3d(0px,0px,0px);\n  -ms-transform-origin: 0% 0%;\n  -moz-transform-origin: 0% 0%;\n  -webkit-transform-origin: 0% 0%;\n  transform-origin: 0% 0%;\n  will-change: transform, -webkit-transform;\n}\n.pccPageListLoading {\n  height: 30px;\n  margin: -15px;\n  left: 50%;\n  position: absolute;\n  top: 50%;\n  width: 30px;\n}\n.pccPageListComments {\n  position: relative;\n  min-width: 300px;\n  height: auto;\n  vertical-align: top;\n  display: table-cell;\n  box-sizing: border-box;\n  z-index: 2;\n}\n.pccPageListComments > div {\n  position: absolute;\n}\n.pccHidden {\n  display: none;\n}\n.pccPageListItem {\n  background: #fff;\n  overflow: hidden;\n  margin: 13px;\n  vertical-align: middle;\n  border-bottom: 1px solid #d4d6db;\n}\n/* Single Page view mode */\n.pccSinglePageView .pccPageListItem {\n  -webkit-transform: translateZ(0);\n  transform: translateZ(0);\n  -webkit-animation-duration: 1s;\n  animation-duration: 1s;\n  -webkit-animation-timing-function: ease-out;\n  animation-timing-function: ease-out;\n}\n/* Next and previous page list items for single page view mode */\n.pccSinglePageView .pccNextPage {\n  opacity: 0;\n  z-index: 0;\n}\n.pccSinglePageView .pccPreviousPage {\n  opacity: 0;\n  z-index: 0;\n}\n.pccSinglePageView .pccCurrentPage {\n  opacity: 1;\n  z-index: 1;\n}\n/* Default animations for single page view mode */\n.pccSinglePageView .pccNextPageIn {\n  animation-name: moveInFromRight;\n  -webkit-animation-name: moveInFromRight;\n}\n.pccSinglePageView .pccPreviousPageIn {\n  animation-name: moveInFromLeft;\n  -webkit-animation-name: moveInFromLeft;\n}\n.pccSinglePageView .pccPageForward {\n  animation-name: moveLeft;\n  -webkit-animation-name: moveLeft;\n}\n.pccSinglePageView .pccPageBack {\n  animation-name: moveRight;\n  -webkit-animation-name: moveRight;\n}\n@keyframes moveRight {\n  0% {\n    transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n\n  100% {\n    transform: translate3d(110%, 0, 0);\n    opacity: 0;\n  }\n}\n@-webkit-keyframes moveRight {\n  0% {\n    -webkit-transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n\n  100% {\n    -webkit-transform: translate3d(110%, 0, 0);\n    opacity: 0;\n  }\n}\n@keyframes moveLeft {\n  0% {\n    transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n\n  100% {\n    transform: translate3d(-110%, 0, 0);\n    opacity: 0;\n  }\n}\n@-webkit-keyframes moveLeft {\n  0% {\n    -webkit-transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n\n  100% {\n    -webkit-transform: translate3d(-110%, 0, 0);\n    opacity: 0;\n  }\n}\n@keyframes moveInFromLeft {\n  0% {\n    transform: translate3d(-110%, 0, 0);\n    opacity: 0;\n  }\n\n  100% {\n    transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n}\n@-webkit-keyframes moveInFromLeft {\n  0% {\n    -webkit-transform: translate3d(-110%, 0, 0);\n    opacity: 0;\n  }\n\n  100% {\n    -webkit-transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n}\n@keyframes moveInFromRight {\n  0% {\n    transform: translate3d(110%, 0, 0);\n    opacity: 0;\n  }\n\n  100% {\n    transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n}\n@-webkit-keyframes moveInFromRight {\n  0% {\n    -webkit-transform: translate3d(110%, 0, 0);\n    opacity: 0;\n  }\n\n  100% {\n    -webkit-transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n}\n/*\n.pccPageListItem * {\n    -ms-touch-action: pinch-zoom pan-x pan-y;\n    touch-action: pinch-zoom pan-x pan-y;\n} */\n.pccPageListItem .pccPageListItemLoading {\n  margin: 30% auto;\n  display: block;\n  filter: Alpha(Opacity=50);\n  background-color: #fff;\n}\n.pccPageListItem .pccPageLoadFail {\n  margin: 35% auto;\n  text-align: center;\n  line-height: 2;\n  color: #777;\n}\n/* PageList container fix */\n.pccPageListItem .igAnchor,\n.pccPageListItem .igViewerScroller,\n.pccPageListItem .igViewerGraphics,\n.pccThumbnailView .igAnchor {\n  /* never recalculate these values */\n  width: 100% !important;\n  height: 100% !important;\n}\n.igAnchor > svg {\n  width: 100%;\n  height: 100%;\n}\n.igMagnifierFrame .igAnchor > svg {\n  width: auto;\n  height: auto;\n}\n.igViewerScroller,\n.igViewerGraphics,\n.igAnchor,\n.igAnchor > svg,\n.igAnchor svg svg {\n  -webkit-user-select: none !important;\n  -webkit-touch-callout: none !important;\n  -webkit-tap-highlight-color: rgba(0,0,0,0) !important;\n}\n.igAnchor svg svg use {\n  pointer-events: none;\n}\n/* do not show textarea outline on text marks */\n.pccViewerControl textarea {\n  outline: none;\n}\n/* copy text */\n.pccCopyText {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 0;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  opacity: 0;\n  filter: alpha(opacity=0);\n  color: #000;\n}\n/* about modal */\n.pccPageListAboutModal {\n  background: #383a3f;\n  position: absolute;\n  top: -300px;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n  width: 280px;\n  padding: 10px;\n  visibility: hidden;\n  opacity: 0;\n  z-index: 5;\n  border-radius: 3px;\n  text-align: center;\n  -webkit-box-shadow: 0 2px 4px -1px rgba(0, 0, 0, .4);\n  box-shadow: 0 2px 4px -1px rgba(0, 0, 0, .4);\n  -webkit-transition: all 400ms;\n  transition: all 400ms;\n}\n.pccPageListAboutModal * {\n  text-align: left;\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  -webkit-text-size-adjust: 100%;\n  -ms-text-size-adjust: 100%;\n  text-size-adjust: 100%;\n}\n.pccPageListAboutModal h3 {\n  margin: 10px 0;\n  font-size: 18px;\n  color: #fff;\n  font-weight: bold;\n}\n.pccPageListAboutModal p {\n  font-size: 12px;\n  color: #c2c5ce;\n}\n.pccPageListAboutModal p:last-child {\n  color: #c2c5ce;\n}\n.pccPageListAboutModal a {\n  color: #afc3eb;\n}\nhtml .pccPageListAboutModal button {\n  position: absolute;\n  top: 0;\n  right: 0;\n  font-size: 20px;\n  color: #fff;\n  background: none;\n  border: none;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  height: auto;\n}\n.pccPageListAboutModal.open {\n  visibility: visible;\n  opacity: 1;\n  top: 122px;\n}\n/* nag modal */\n.pccPageListNagModal {\n  background: #e7e9ef;\n  position: absolute;\n  top: -300px;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n  width: 480px;\n  padding: 10px;\n  visibility: hidden;\n  opacity: 0;\n  z-index: 5;\n  border-radius: 3px;\n  text-align: center;\n  -webkit-box-shadow: 0 6px 6px -1px rgba(0, 0, 0, .5);\n  box-shadow: 0 6px 6px -1px rgba(0, 0, 0, .5);\n  -webkit-transition: all 400ms;\n  transition: all 400ms;\n}\n.pccPageListNagModal * {\n  text-align: left;\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  -webkit-text-size-adjust: 100%;\n  -ms-text-size-adjust: 100%;\n  text-size-adjust: 100%;\n}\n.pccPageListNagModal h3 {\n  margin: 10px 0;\n  font-size: 18px;\n  color: #000000;\n  font-weight: bold;\n}\n.pccPageListNagModal p {\n  font-size: 12px;\n  color: #000000;\n}\n.pccPageListNagModal p:last-child {\n  color: #000000;\n}\n.pccPageListNagModal a {\n  color: #263fea;\n}\nhtml .pccPageListNagModal button {\n  position: absolute;\n  top: 0;\n  right: 0;\n  font-size: 20px;\n  color: #000000;\n  background: none;\n  border: none;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  height: auto;\n}\n.pccPageListNagModal.open {\n  visibility: visible;\n  opacity: 1;\n  top: 20px;\n}\n.pccEditMarkButton {\n  display: inline-block;\n  background: no-repeat url(../../../../src/img/EditTextMark.png);\n  border: none;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  height: 26px;\n  width: 26px;\n  -webkit-background-size: 26px 26px;\n  background-size: 26px;\n  cursor: pointer !important;\n}\n/* svg elements can have body tags inside them, so we protect styling of them */\n/* viewer marks that do not look correct can likely be affected by conflicting styles */\n.pccViewerControl body {\n  background-color: initial;\n  min-height: initial;\n  position: static;\n  height: 100%;\n}\n/* style for thumbnail views */\n.pccThumbnailWrapper {\n  position: relative;\n  display: block;\n  width: 100px;\n  height: 100px;\n  margin: 5px 0 2em 0;\n}\n.pccThumbnail {\n  width: 100%;\n  height: 100%;\n}\n.pccThumbnailView {\n  /* it's important not to edit these width and height\n     * they are depended upon in the actual size calculation */\n  height: 100%;\n  width: 100%;\n  margin: auto !important;\n}\n.pccThumbnailLabel {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  width: 100%;\n  text-align: center;\n}\n/* mark selection handles */\n.pccMarkHandleTopLeft,\n.pccMarkHandleTopCenter,\n.pccMarkHandleTopRight,\n.pccMarkHandleMidLeft,\n.pccMarkHandleMidRight,\n.pccMarkHandleBottomLeft,\n.pccMarkHandleBottomCenter,\n.pccMarkHandleBottomRight,\n.pccMarkHandlePoint,\n.pccMarkHandleTextSelectionStart,\n.pccMarkHandleTextSelectionEnd {\n  position: absolute;\n  width: 40px;\n  height: 40px;\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkMmJhOTYxOS02NDJjLTQzOTUtYTI2Mi1iZTQ5NzM5MDEzYjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDQ3M0M1RkFDMUM2MTFFNDlBMzZFODY3RUQwOTI4QjgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDQ3M0M1RjlDMUM2MTFFNDlBMzZFODY3RUQwOTI4QjgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowYzJmZjg5Ny1iMWRmLTQ4MGItOGRlNy01N2VkNGE0ZjJmZDgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ZDJiYTk2MTktNjQyYy00Mzk1LWEyNjItYmU0OTczOTAxM2IxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+SvzVDQAAAn9JREFUeNrsWMFr01AcTvvSNsnG1jQqOIeTTQ/z4EA9WFQQPYpn0epFL/4DiiBMFATRf0AvXtSJdwU9bHhY3UlBQQdThxVRUNN2wzVd26R+v/ILVA9r0iVQWR58zXuP9/3yNXnv9/tIrNlsSr3c4lKPt0hgJDASGAn8jwTKgAEMSAEHXU/TgRPAQWC0LV4dWADywDOg1O0NYn5K3ZEbc63riytZevKngTNAqgNtFXgATIHvMD+8J4jgGi7XgP3uXKVmi/xCMf3ll6XKIt4czihWdpe+pCWFzX/gPDAB7lWIrIT2BHnP3gb20qC0Uk/cnSmMTL8zh+q289d+Toi4c3S38e3CsZGC3peo8/Rr4CLghCXwLHCOOp9+VNRLj+YnzN81ZS2C0Z+s3jo1/mZsi2bx1D3gfhinOAPk+MnJlx/P7+kkjhqtobXE4akcxwpc4HH3QNyZLuz4uVxTvRJpLXF4mOJYgQs8RD/LVkOeeW8O+T1c4GxdWbUFDw8HLVDmPCfNfSyl/z0QXho44uWHYpqHo14ziNcbDboBv5qWInXZKA1xV3DMjVOLl4AGdYYNtdrtzbZvUt1UY3PMwASSuEXqHBjTy5SE/YoDx87u1Ms8XHT/cJCvON/ajJrcoArhVyA43/sV2ebhbBhp5gkXfonK1+aBpOWVSGvB+dxmHp6GIbAIPGx5LNTWmyfH31IZ60SiNbQWHPeVUgxzY5oF8oNst64D+9x5qhCzsFvIkRrslrMto1TpQPSlhN1GfwVMkt3y4we7NayCDWvOo2GdolcLvu3XsMbW+fHI4MK/luV/zvs3fMvvoV4PchIuBxU0Fn1+iwRGAiOBkcDebn8EGACEVf6TPnvOjAAAAABJRU5ErkJggg==);\n}\n@media screen and (-webkit-min-device-pixel-ratio: 2), \n       screen and (min-resolution: 2dppx),\n       screen and (min-resolution: 192dpi) {\n  .pccMarkHandleTopLeft,\n  .pccMarkHandleTopCenter,\n  .pccMarkHandleTopRight,\n  .pccMarkHandleMidLeft,\n  .pccMarkHandleMidRight,\n  .pccMarkHandleBottomLeft,\n  .pccMarkHandleBottomCenter,\n  .pccMarkHandleBottomRight,\n  .pccMarkHandlePoint,\n  .pccMarkHandleTextSelectionStart,\n  .pccMarkHandleTextSelectionEnd {\n    -webkit-background-size: 40px 40px;\n    background-size: 40px;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGsAAABrCAYAAABwv3wMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkMmJhOTYxOS02NDJjLTQzOTUtYTI2Mi1iZTQ5NzM5MDEzYjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0QwNDg4NENDNDAzMTFFNDgxM0JDREZDMUY0RTFFODIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0QwNDg4NEJDNDAzMTFFNDgxM0JDREZDMUY0RTFFODIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MjI3ZGMxZS0xNjg1LTQ2YTktOTI5Mi0wYzNkMTM4YjU3MWMiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2YWNjOTM4MC0wYzZkLTExNzgtYmZjOS1jNTk5OGE2MjYzNGUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4Xpv3rAAAGnklEQVR42uycXUxbZRjHT1u++gHjoxTWjTLYxpTBytxUEE3IdiHzxo8tzvmRyIwXRC+cNyaiJk42k11si0a9ME4v/LyYmTeCF1tIJo6YMCgwVMJnmQzKR7cWWr7a+jxyMLjsnNMWes7b0+ef/APJe9r3Of31fc97Tp/n1YRCIY4UH9LSR0CwSASLYJEIFolgESwSwSIRLIJFIlgkgkWwSASLRLAIFolgkQgWwSIRLBLBIlgkgkUiWASLxJ6SVHAOFvA28GZwFjgVbALPghfAbvAt8DDYRbDklRH8CHg/+AGwOYLXToGvg9vBreC5eDpxTRzluu8GPw1+lB896xWOuqvgS+AbBGtjZAfX8X9jJQf4S/4vwYpCOeB68EEZ+8SR9hE/XdJqMEwdAH8lMyjUY/wIO0ALjHuo5tS1//5vaajCL89r4GcUDAlXku/y18hPIL7gmvhoNch/ECnw5x3+2x2R3HNLyf0Tc/rhSb/BtxjQzS8FdGnJuoAhRRfYlqv37cgz+rOMyUsRvi1+YXIhrkYAtkgj6/+gToP3hfua7lGvqcnhynM4PVlj7nmT2JVXA7Zmpc3abRnuQ3bLRHlB+mwE0+JpiK8BgC3QAmPluvkBf+8kKoy02eEyf982Vjgy5U+PtsNCs977XKV1pNZumdKE95Lf+KkxmOiw8Bp1JJyRdLZpsGRo0pexUR0X5Ro8b9QW9cGIC2ek/Qj+OJFh4TTzPj9TCY6mCy3Ord9eG9seCIY0Gx2ATqsJPV9lHTheY7sZxps3gi8nIqwcfnluEjpgcTmofe9i3662fnderIN5aHumq/HIrj9TkrRiUx2OwJfB04l2n1UvBerNb3rL5ACF+n3gtuXE171l2K/Esr4+0W6K7WI3vDjWcUT13PRmyxnUjb+92divxFxzkIvtoy/mYNWJNcI1qkCuEXW3sN8voH+Jw44nCqxysW8mrvpgMVGk5KrnO+gfRrVJ5JA9/HmoHtZTYtPf+ebBnbDqU/SZJfZ/rmlwZyjK81ALLAO4Wqjx505X7oDLt4mFpyoYB8Yjckg1fz6qhSX6w+EPbWM2jiFJxJPKRfEcM55g7RdqcDg9Jud09I+QYiGMB+MSOWSfmmHtFWpo7prM4xhUk8OVH835xDssMyeS3NIxfCebRVidI54siXOyqBGW4L0L/h41cWfByCKscYgL4xM5pCihYPWNzxlYTtvB+ESaN6sRluA0Nzrt1zPMSiq+TDXCEpzmZueXdSzDkojPoEZYgvP+/FKQaVgS8aWoEZZgwkpasjbAMiyJ+BbVCEswr9yQmsQ0LFOaaHw+NcKaEWooNOv9LMMqyBGN77YaYY0KNZTkG30sw5KI71ZCwcIEzPxNqUyW30BcPokE0SE1wpriRBL+Kwoz3CzCgrhmJM7JpUZYqA6hhkN2yziLsCTi6pAzFrlhtQs1YKKlLUfvZQkUxiORANquZlhY/ySYM3600upkCZZEPKuVk6qFhauqVqHGJyosk8UWg4cFUBgHxiNySKuc91hKwEJdEmrA9OUTtcV9Oq1G0QIA7B/j0ER5HmqC1Q3uEmrEcpxjVdYhJWFh/xJlQV38eageFuqCWOMrNbbRyh1ZE0oEhv1i/+uJX22wsCr+sth0ePJwyV9lW9Nn5Axq95b0GexXYvq7wilU1a9kMuVn3EpVxj2F1RxnXyjtkWuEPVic6Tr3YmlPGFUknyr1gSkJC8tmznAribiCwD48et8fL1Vv6cc6qhgtJkL4/meO3d8rAQp1nlOo3OffGYeBysfXwYclVyWjXhOmVm9kxi4uz3HVF2aNccJXPq6O7rBrijGlGTNl15MQijXFzz5sdeJ9FNUURyDcB6OloQpTkU9xEWS4do540n/pnrR0OT3ZY+55YxjV+nN7bBkzj5fnuioKMyJ5rIUbc72N1fpK74PBBCzUevfBwHQx55RfP7ewrFtYDupSk7QBY2pSwGbW+/H3qCj2wVh9SnFydR8MgsXeDjNrr1FM7TDD6kZbWG3yFidScxxDzfKr1KusfSisbrT1K7dSFX9F5n4RUB2LoFgeWWtVAX4VXBrDPnrBn+O6heUPIp528sTymie5lYrDjdhzaplfQPzEyfyLb7SKpz1yO3in88D28kv9nAifmlznjaC8cXT+cTWyhHT37tNp3EpePWZLzXO0+zRTcsU7hHhfDZIIFsEiESwSwSJYJIJFIlgEi0SwSASLYJEIFolgESwSwSIRLIJFIlgkgkWwSASLYJEIFolgJbT+EWAAqiM7sRyeWSQAAAAASUVORK5CYII=);\n  }\n}\n.pccv input.no-ms-clear::-ms-clear {\n  display: none;\n}\n.pcc-image-stamp-img {\n  height: auto;\n  max-height: available;\n  width: 100%;\n  max-width: 100%;\n  position: relative;\n}\n.pcc-load,\n.pccPageListLoading,\n.pccPageListItemLoading {\n  -webkit-animation-duration: 1s;\n  animation-duration: 1s;\n  -webkit-animation-iteration-count: infinite;\n  animation-iteration-count: infinite;\n  -webkit-animation-timing-function: linear;\n  animation-timing-function: linear;\n  -webkit-animation-name: pcc-anim-load;\n  animation-name: pcc-anim-load;\n}\n@-webkit-keyframes pcc-anim-load {\n  0% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n\n  100% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n@keyframes pcc-anim-load {\n  0% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n\n  100% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.pccPageListLoading svg,\n.pccPageListItemLoading svg {\n  fill: #7d7f85;\n  height: 26px;\n  width: 26px;\n}\n.pccPageListLoading,\n.pccPageListItemLoading {\n  display: block;\n}\n@media print {\n  .no-clip-on-print {\n    clip-path: none !important;\n  }\n\n  .expand-on-print {\n    transform: scale(9999, 9999);\n  }\n}\n";(require("browserify-css").createStyle(css,{"href":"src\\css\\viewercontrol.css"},{"insertAt":"bottom"}));module.exports=css;},{"browserify-css":1}],12:[function(require,module,exports){var mR=function(){this.ac=false;this.h=false;this.bD=IPCC.bF.AddFreehandMark;};mR.prototype.mF=function(h){this.h=h;};mR.prototype.eg=function(){this.h=false;};mR.prototype.ak=function(){if(this.ac){this.K=null;this.od=null;this.h.oh(null);this.ac=false;this.h.dC();}};mR.prototype.sS=function(){this.ak();};mR.prototype.kF=function(J){this.ak();if(J.domEvent.button===0){this.ac=true;this.K=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Polyline);this.K.get_points().addPoint(J.imagePoint);this.od=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Freehand);this.h.oh(this.K,this.od);this.K.set_lineWidth(this.od.es);this.K.set_lineColor(this.od.iI);this.K.set_opacity(this.od.dv);this.pY=J.imagePoint;this.os=J.windowPoint;this.h.dC();}};mR.prototype.kL=function(J){if(J.domEvent.button!==0){this.ak();}if(this.ac){this.K.get_points().addPoint(J.imagePoint);this.h.dC();}};mR.prototype.zF=function(J){if(this.ac){this.ak();}};mR.prototype.jN=function(J){if(this.ac&&J.domEvent.button===0){this.K.get_points().addPoint(J.imagePoint);var amV=this.K.get_points();var aW=[];var hq=Number.MAX_VALUE,iJ=0,_top=Number.MAX_VALUE,ib=0;var H=0;for(H=0;H<amV.get_length();H++){var sA=amV.getPoint(H);if(sA.x<hq){hq=sA.x;}if(sA.x>iJ){iJ=sA.x;}if(sA.y<_top){_top=sA.y;}if(sA.y>ib){ib=sA.y;}aW.push({x:sA.x,y:sA.y});}var Ac=3;var rV;var rM=(aW.length<Ac)?aW:IPCC.T.filter(aW,function(ab){if(rV){var ba=ab.x-rV.x,de=ab.y-rV.y,fq=ba*ba+de*de;if(Math.sqrt(fq)<4){return false;}}ab.x=ab.x-hq;ab.y=ab.y-_top;rV=ab;return true;});if(rM.length<Ac){rM=[aW[0],aW[aW.length-1]];}var dM='';rV=undefined;if(rM.length<Ac){dM+=this.OZ(rM);}else{dM='M'+IPCC.T.bspline(rM);dM=dM.replace(/\d*\.?\d*/g,function(bG){var IZ=bG.indexOf('.');if(bG.length&&IZ>0){return bG.substr(0,IZ+3);}else if(bG!==""){return bG;}else{return bG;}});}var aF=iJ-hq;var bj=ib-_top;if(bj===0&&aF===0){this.ak();return;}var oK={clientX:J.domEvent.clientX,clientY:J.domEvent.clientY};this.od.set_rectangle({x:hq,y:_top,width:aF,height:bj});this.od.set_pathString(dM);this.od.set_pathWidth(aF);this.od.set_pathHeight(bj);this.h.oh(null);this.h.ee().addMark(this.od,oK);this.h.dC();}this.ak();};mR.prototype.OZ=function(zW,EV){var RC=(EV&&IPCC.T.DW)?'m':'M';var Wh=(EV&&IPCC.T.DW)?'l':'L';return IPCC.T.map(zW,function(ab,H){if(H===0){return RC+ab.x+','+ab.y;}else{return Wh+ab.x+','+ab.y;}}).join('');};mR.prototype.ox=function(J){var bu=this.h.fa();if(J.windowPoint.x<=0||J.windowPoint.x>=bu.width-2){this.ak();}if(J.windowPoint.y<=0||J.windowPoint.y>=bu.height-2){this.ak();}};mR.prototype.lO=function(){this.ak();};module.exports=mR;},{}],13:[function(require,module,exports){var lC=function(){this.ac=false;this.h=false;this.bD=IPCC.bF.AddLineMark;};lC.prototype.mF=function(h){this.h=h;};lC.prototype.eg=function(){this.h=false;};lC.prototype.ak=function(){if(this.ac){this.K=null;this.h.oh(null);this.ac=false;this.h.dC();}};lC.prototype.sS=function(){this.ak();};lC.prototype.kF=function(J){this.ak();if(J.domEvent.button===0){this.ac=true;this.K=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Line);this.K.get_points().setPoint(0,J.imagePoint);this.K.get_points().setPoint(1,J.imagePoint);this.h.oh(this.K);this.pY=J.imagePoint;this.os=J.windowPoint;}};lC.prototype.kL=function(J){if(J.domEvent.button!==0){this.ak();}if(this.ac){this.K.get_points().setPoint(1,J.imagePoint);this.h.dC();}};lC.prototype.jN=function(J){if(this.ac&&J.domEvent.button===0){var fN=J.windowPoint.x-this.os.x;var gj=fN*fN;fN=J.windowPoint.y-this.os.y;gj+=fN*fN;if(gj>25){var h=this.h;var oK={clientX:J.domEvent.clientX,clientY:J.domEvent.clientY};this.K.get_points().setPoint(1,J.imagePoint);this.h.oh(null);this.h.ee().addMark(this.K,oK);h.dC();}}this.ak();};lC.prototype.ox=function(J){var bu=this.h.fa();if(J.windowPoint.x<=0||J.windowPoint.x>=bu.width-2){this.ak();}if(J.windowPoint.y<=0||J.windowPoint.y>=bu.height-2){this.ak();}};lC.prototype.lO=function(){this.ak();};module.exports=lC;},{}],14:[function(require,module,exports){var jT=function(bv){this.ac=false;this.h=false;this.bv=bv;switch(this.bv){case IPCC.Web.UI.MarkType.Polygon:this.bD=IPCC.bF.AddPolygonMark;break;case IPCC.Web.UI.MarkType.Polyline:this.bD=IPCC.bF.AddPolylineMark;this.Yq=false;break;}};jT.prototype.mF=function(h){this.h=h;};jT.prototype.eg=function(){this.h=false;};jT.prototype.ak=function(){if(this.ac){if(arguments[0]){if(arguments[0]===true){if(this.K&&this.Yq===false){this.h.ee().addMark(this.K);this.Yq=true;this.h.dC();}}}this.K=null;this.h.oh(null);this.ac=false;this.h.dC();}};jT.prototype.sS=function(){this.ak();};jT.prototype.kF=function(J){if(J.domEvent.button===0){if(!this.ac){this.ac=true;this.K=new IPCC.Web.UI.Mark(this.bv);this.K.get_points().addPoint(J.imagePoint);this.h.oh(this.K);}var aW=this.K.get_points();if(aW.get_length()>0){aW.setPoint(aW.get_length()-1,J.imagePoint);}aW.addPoint(J.imagePoint);this.pY=J.imagePoint;this.os=J.windowPoint;this.h.dC();}else{this.ak();}};jT.prototype.zF=function(J){if(this.ac&&J.domEvent.button===0){var aW=this.K.get_points(),cl=aW.get_length(),Tn,Uh;if(cl>2){var adQ=true;while(adQ){cl=aW.get_length();Tn=aW.getPoint(cl-1);Uh=aW.getPoint(cl-2);if(Tn.x===Uh.x&&Tn.y===Uh.y){aW.removePoint(cl-1);}else{adQ=false;}}}if(aW.get_length()>0){aW.setPoint(aW.get_length()-1,J.imagePoint);}this.h.oh(null);var oK={clientX:J.domEvent.clientX,clientY:J.domEvent.clientY};this.h.ee().addMark(this.K,oK);this.Yq=true;this.h.dC();}this.ak();};jT.prototype.kL=function(J){if(J.domEvent.button!==0){this.ak();}if(this.ac){var aW=this.K.get_points();if(aW.get_length()>0){aW.setPoint(aW.get_length()-1,J.imagePoint);}this.h.dC();}};jT.prototype.ox=function(J){var bu=this.h.fa();if(J.windowPoint.x<=0||J.windowPoint.x>=bu.width-2){this.ak();}if(J.windowPoint.y<=0||J.windowPoint.y>=bu.height-2){this.ak();}};jT.prototype.lO=function(){this.ak();};module.exports=jT;},{}],15:[function(require,module,exports){var fj=function(bv){this.ac=false;this.h=false;this.bv=bv;switch(this.bv){case IPCC.Web.UI.MarkType.Rectangle:this.bD=IPCC.bF.AddRectangleMark;break;case IPCC.Web.UI.MarkType.Ellipse:this.bD=IPCC.bF.AddEllipseMark;break;case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:this.bD=IPCC.bF.AddTextMark;break;case IPCC.Web.UI.MarkType.Stamp:this.bD=IPCC.bF.AddStampMark;break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:this.bD=IPCC.bF.AddImageStampMark;break;case IPCC.Web.UI.MarkType.RectangleRedaction:this.bD=IPCC.bF.AddRectangleRedactionMark;break;case IPCC.Web.UI.MarkType.Highlight:case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.Strikethrough:this.bD=IPCC.bF.AddRectangleMark;break;}};fj.prototype.mF=function(h){this.h=h;};fj.prototype.eg=function(){this.h=false;};fj.prototype.ak=function(){if(this.ac){this.K=null;this.h.oh(null);this.ac=false;this.h.dC();}};fj.prototype.sS=function(){this.ak();};fj.prototype.kF=function(J){this.ak();if(J.domEvent.button===0){this.ac=true;this.K=new IPCC.Web.UI.Mark(this.bv);this.K.set_rectangle({x:J.imagePoint.x,y:J.imagePoint.y,width:0,height:0});this.h.oh(this.K);this.pY=J.imagePoint;this.os=J.windowPoint;}};fj.prototype.kL=function(J){if(J.domEvent.button!==0){this.ak();}if(this.ac){var kx={x:Math.min(J.imagePoint.x,this.pY.x),y:Math.min(J.imagePoint.y,this.pY.y)};kx.width=Math.max(J.imagePoint.x,this.pY.x)-kx.x;kx.height=Math.max(J.imagePoint.y,this.pY.y)-kx.y;this.K.set_rectangle(kx);this.h.dC();}};fj.prototype.jN=function(J){if(this.ac&&J.domEvent.button===0){var fN=J.windowPoint.x-this.os.x;var gj=fN*fN;fN=J.windowPoint.y-this.os.y;gj+=fN*fN;if(gj>25){var kx={x:Math.min(J.imagePoint.x,this.pY.x),y:Math.min(J.imagePoint.y,this.pY.y)};kx.width=Math.max(J.imagePoint.x,this.pY.x)-kx.x;kx.height=Math.max(J.imagePoint.y,this.pY.y)-kx.y;this.h.oh(null);this.K.set_rectangle(kx);var ao=this.K;var h=this.h;var oK={clientX:J.domEvent.clientX,clientY:J.domEvent.clientY};this.h.ee().addMark(this.K,oK);if(ao.jd()===IPCC.Web.UI.MarkType.Text||ao.jd()===IPCC.Web.UI.MarkType.TextLine||ao.jd()===IPCC.Web.UI.MarkType.TextAreaSignature){h.wi(ao);}h.dC();}}this.ak();};fj.prototype.ox=function(J){var bu=this.h.fa();if(J.windowPoint.x<=0||J.windowPoint.x>=bu.width-2){this.ak();}if(J.windowPoint.y<=0||J.windowPoint.y>=bu.height-2){this.ak();}};fj.prototype.lO=function(){this.ak();};module.exports=fj;},{}],16:[function(require,module,exports){var cJ={};var auf=require('./ArtUIDirector');var PU=require('./ArtSVGUIDirector');cJ.uq={Jq:function(){var uF=IPCC.cJ.uq;if(uF.tG===null){
/*@cc_on@if(@_jscript)uF.tG=document.documentMode>8;@else@*/ uF.tG=true;/*@end@*/}return uF.tG;},tG:null};cJ.Bk=1;cJ.co=auf;cJ.PU=PU;module.exports=cJ;},{"./ArtSVGUIDirector":17,"./ArtUIDirector":18}],17:[function(require,module,exports){var ama=function(){};ama.prototype={arV:function(h,bK,bM){this.h=h;this.aq=h.aw();this.bK=bK;this.fb=bM.width;this.fB=bM.height;this.FS=bM.gV;this.aHR=bM.gx;bK.BM=this.du('g');this.bX(bK.BM,{'fill-opacity':1});bK.AS.appendChild(bK.BM);},auD:function(G){var ii='',C,V=this;switch(G.K.get_type()){case IPCC.Web.UI.MarkType.Rectangle:G.bb=this.du('rect');if(G.K.iM()&&G.K.get_opacity()===255){G.bb.addEventListener("mouseover",function(J){if(G.K.get_selected()===false&&G.bb&&(J.which===0||J.buttons===0)){G.bb.style.opacity=127/255;}},false);G.bb.addEventListener("mouseout",function(J){if(G.bb&&(J.which===0||J.buttons===0)){G.bb.style.opacity=G.K.get_opacity()/255;}},false);}break;case IPCC.Web.UI.MarkType.HighlightText:ii="highlighttextannotation-"+G.K.ly();G.bb=this.du('g');G.io=this.du('g');G.bb.appendChild(G.io);G.ke=this.du('g');G.ke.setAttribute('data-pcc-mark',ii);G.bb.appendChild(G.ke);break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:ii="texthyperlinkannotation-"+G.K.ly();G.bb=this.du('g');G.bb.style.cursor=IPCC.bF.eD(IPCC.bF.Link);G.io=this.du('g');G.bb.appendChild(G.io);G.ke=this.du('g');G.ke.style.opacity=IPCC.cJ.co.aiM();G.ke.style.fill="blue";G.ke.setAttribute('data-pcc-mark',ii);G.bb.appendChild(G.ke);G.kq=this.du('g');G.kq.style.stroke="blue";G.kq.style.opacity=IPCC.cJ.co.HT(false);G.kq.setAttribute('data-pcc-mark',ii);G.bb.appendChild(G.kq);G.bb.addEventListener("mouseover",function(J){if(G.kq){G.kq.style.opacity=IPCC.cJ.co.HT(true,G.K.get_selected());}},false);G.bb.addEventListener("mouseout",function(J){if(G.kq){G.kq.style.opacity=IPCC.cJ.co.HT(false,G.K.get_selected());}},false);break;case IPCC.Web.UI.MarkType.DocumentHyperlink:ii="documenthyperlink-"+G.K.ly();G.bb=this.du('g');G.bb.style.cursor=IPCC.bF.eD(IPCC.bF.Link);G.C=this.du('rect');G.C.style['fill-opacity']=IPCC.cJ.co.aiM();if(G.K.Ml!=='Underline'){G.C.style.stroke=G.K.iI;G.C.style['stroke-width']=G.K.es+'px';G.C.style['stroke-opacity']=(G.K.es===0)?0:G.K.pS/255;if(G.K.Ml==='Dashed'){G.C.style['stroke-dasharray']=G.K.BL.join(', ');}G.C.setAttribute('rx',G.K.Kd);G.C.setAttribute('ry',G.K.Kw);}else{G.uY=this.du('line');G.uY.style.stroke=G.K.iI;G.uY.style['stroke-opacity']=G.K.pS/255;G.uY.style['stroke-width']=G.K.es+'px';G.bb.appendChild(G.uY);}G.C.style.fill='transparent';G.C.setAttribute('data-pcc-mark',ii);G.bb.appendChild(G.C);break;case IPCC.Web.UI.MarkType.RectangleRedaction:ii="textmark-"+G.K.ly();G.bb=this.du('g');G.fE=this.du('rect');G.gw=this.du('g');G.gw.setAttribute('data-pcc-mark',ii);if(IPCC.T.uG.azK){G.gw.style.cursor='pointer';}G.Ap=document.createTextNode('');if(document.documentMode>8||IPCC.T.uG.Ar){G.dc=this.du('text');G.dc.setAttribute('data-pcc-mark',ii);G.dc.appendChild(G.Ap);G.yN=this.du('clipPath');G.BP=this.du('rect');G.gw.appendChild(G.yN);G.yN.appendChild(G.BP);G.gw.appendChild(G.dc);G.JU="PCC"+IPCC.cJ.Bk;IPCC.cJ.Bk++;this.bX(G.yN,{id:G.JU,clipPathUnits:"userSpaceOnUse"});C=G.K.get_rectangle();this.bX(G.BP,{x:0,y:0,width:C.width,height:C.height,"data-pcc-mark":ii});var alR=function(J){if(G.K.get_selected()===false&&G.fE&&(J.which===0||J.buttons===0)){if(V.h.mH()===false){G.bb.style.opacity=0.2;G.dc.style.opacity=0;}}};G.bb.addEventListener("mouseover",function(J){alR(J);},false);G.gw.addEventListener("mouseover",function(J){alR(J);},false);G.gw.addEventListener("mouseout",function(J){if(G.fE&&(J.which===0||J.buttons===0)){if(V.h.mH()===false){G.bb.style.opacity=1;G.dc.style.opacity=1;}}},false);G.bb.addEventListener("mouseout",function(J){if(G.fE&&(J.which===0||J.buttons===0)){if(V.h.mH()===false){G.bb.style.opacity=1;G.dc.style.opacity=1;}}},false);}else{G.mB=document.createElement('div');this.bX(G.mB,{"data-pcc-mark":ii});G.mB.appendChild(G.Ap);G.MZ=document.createElement('div');this.bX(G.MZ,{"data-pcc-mark":ii});G.MZ.appendChild(G.mB);G.wO=document.createElement('body');this.bX(G.wO,{xmlns:'http://www.w3.org/1999/xhtml',style:'margin:0;overflow:hidden;background-color:transparent;white-space:pre-wrap;all:initial',"data-pcc-mark":ii});G.wO.appendChild(G.MZ);G.Bi=this.du('foreignObject');G.Bi.appendChild(G.wO);G.gw.appendChild(G.Bi);G.wO.addEventListener("mouseover",function(J){if(G.K.get_selected()===false&&G.fE&&(J.which===0||J.buttons===0)){G.fE.style.opacity=0.2;G.mB.style.opacity=0;}},false);G.wO.addEventListener("mouseout",function(J){if(G.fE&&(J.which===0||J.buttons===0)){if(V.h.mH()===false){G.fE.style.opacity=1;G.mB.style.opacity=1;}}},false);}G.bb.appendChild(G.fE);break;case IPCC.Web.UI.MarkType.Ellipse:G.bb=this.du('ellipse');break;case IPCC.Web.UI.MarkType.Highlight:G.bb=this.du('rect');break;case IPCC.Web.UI.MarkType.TextSelectionRedaction:G.bb=this.du('g');G.io=G.bb;break;case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:G.bb=this.du('g');G.rw=this.du('polyline');G.XR=this.du('path');G.SZ=this.du('path');G.bb.appendChild(G.rw);G.bb.appendChild(G.XR);G.bb.appendChild(G.SZ);G.rw.setAttribute('stroke-linejoin','miter');G.rw.setAttribute('stroke-linecap','butt');G.rw.setAttribute('stroke-miterlimit','4');break;case IPCC.Web.UI.MarkType.Polygon:G.bb=this.du('polygon');break;case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.TextAreaSignature:ii="textmark-"+G.K.ly();G.bb=this.du('g');G.IS=this.du('polygon');G.rw=this.du('path');G.Tp=this.du('path');G.gw=this.du('g');G.bb.appendChild(G.IS);G.bb.appendChild(G.rw);G.bb.appendChild(G.Tp);this.bX(G.IS,{style:'stroke:none;'});G.gw.setAttribute('data-pcc-mark',ii);G.Ap=document.createTextNode('');if(document.documentMode>8||IPCC.T.uG.Ar){G.dc=this.du('text');G.dc.setAttribute('data-pcc-mark',ii);G.dc.appendChild(G.Ap);G.yN=this.du('clipPath');G.BP=this.du('rect');G.gw.appendChild(G.yN);G.yN.appendChild(G.BP);G.aiw=this.du('g');G.gw.appendChild(G.aiw);G.gw.appendChild(G.dc);G.JU="PCC"+IPCC.cJ.Bk;IPCC.cJ.Bk++;this.bX(G.yN,{id:G.JU,clipPathUnits:"userSpaceOnUse"});C=G.K.get_rectangle();this.bX(G.BP,{x:0,y:0,width:C.width,height:C.height,"data-pcc-mark":ii});}else{G.mB=document.createElement('div');G.mB.appendChild(G.Ap);G.wO=document.createElement('body');this.bX(G.wO,{xmlns:'http://www.w3.org/1999/xhtml',style:'margin:0;overflow:hidden;background-color:transparent;white-space:pre-wrap;all:initial',"data-pcc-mark":ii});G.wO.appendChild(G.mB);G.Bi=this.du('foreignObject');G.Bi.appendChild(G.wO);G.gw.appendChild(G.Bi);}G.IS.setAttribute('data-pcc-mark',ii);break;case IPCC.Web.UI.MarkType.Stamp:G.bb=this.du('g');G.vb=this.du('rect');G.vb.style='fill:rgba(255, 255, 255, 0);stroke:none;';G.fE=this.du('rect');G.GU=this.TX(G);G.bb.appendChild(G.vb);G.bb.appendChild(G.fE);G.bb.appendChild(G.GU);break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:G.bb=this.du('g');G.vb=this.du('rect');G.vb.style='fill:rgba(255, 255, 255, 0);stroke:none;';G.fE=this.du('rect');G.ajs=this.atN(G);G.ajs.setAttribute('data-pcc-mark',"mark-"+G.K.ly());G.bb.appendChild(G.vb);G.bb.appendChild(G.fE);G.bb.appendChild(G.ajs);break;case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.Freehand:var K=G.K;var aaN=K.eH();var aF=aaN.width;var bj=aaN.height;var GP=K.get_pathWidth();var Ha=K.get_pathHeight();var uD=K.get_pathString();var hb=IPCC.T.AF.Path(uD,{width:aF,height:bj,multiplier:100,thickness:K.get_lineWidth(),color:K.get_lineColor()});var fH=IPCC.T.AF.SVG('0 0 '+GP+' '+Ha,100);var aQ=IPCC.T.AF.Rect(GP,Ha,'fill:rgba(255, 255, 255, 0);stroke:none;');fH.appendChild(aQ);fH.appendChild(hb);G.bb=fH;G.aDy=hb;G.acJ=aQ;this.aeC(G.bb,K.ik);break;case IPCC.Web.UI.MarkType.SignatureText:G.bb=this.du('g');G.fE=this.du('rect');G.fE.style='fill:rgba(255, 255, 255, 0);stroke:none;';G.GU=this.TX(G);G.bb.appendChild(G.fE);G.bb.appendChild(G.GU);G.K.jD=false;break;case IPCC.Web.UI.MarkType.TextLine:G.bb=this.du('g');G.fE=this.du('rect');G.fE.style='fill:rgba(255, 255, 255, 0);stroke:none;';G.GU=this.TX(G);G.bb.appendChild(G.fE);G.bb.appendChild(G.GU);break;case IPCC.Web.UI.MarkType.Strikethrough:ii="strikethroughannotation-"+G.K.ly();G.bb=this.du('g');G.io=this.du('g');G.bb.appendChild(G.io);G.ke=this.du('g');G.ke.setAttribute('data-pcc-mark',ii);G.bb.appendChild(G.ke);G.xM=this.du('g');G.xM.setAttribute('data-pcc-mark',ii);G.bb.appendChild(G.xM);break;}G.bb.ImGearMarkRelation=G;G.bb.setAttribute('data-pcc-mark',"mark-"+G.K.ly());this.bK.BM.appendChild(G.bb);if(G.gw){G.gw.ImGearMarkRelation=G;this.bK.BM.appendChild(G.gw);}this.agn(G);},TX:function(G){var K=G.K;var GG=K.aO;if(!GG){GG=K.cB[0];if(!GG){if(K.get_type()===IPCC.Web.UI.MarkType.Stamp){GG="APPROVED";}else{GG="";}}}var C=K.eH();G.dc=this.du('text');G.JU="PCC"+IPCC.cJ.Bk;IPCC.cJ.Bk++;var mT=document.createTextNode(GG);G.dc.setAttribute("font-size","22px");if(K.get_type()===IPCC.Web.UI.MarkType.TextLine){G.dc.setAttribute("style",'white-space:pre;');}switch(G.K.ik){case IPCC.Web.UI.HorizontalAlignment.Left:G.dc.setAttribute('text-anchor','start');G.dc.setAttribute('x',C.x);break;case IPCC.Web.UI.HorizontalAlignment.Right:G.dc.setAttribute('text-anchor','end');G.dc.setAttribute("x",C.x+C.width);break;default:G.dc.setAttribute('text-anchor','middle');G.dc.setAttribute("x",C.x+(C.width/2));break;}G.dc.setAttribute('y',C.y+(C.height/2));G.dc.appendChild(mT);return G.dc;},atN:function(G){var K=G.K;G.aiq=document.createElementNS('http://www.w3.org/2000/svg','svg');G.vS=document.createElementNS('http://www.w3.org/2000/svg','image');G.vS.setAttribute('id','childimg');G.vS.setAttributeNS('http://www.w3.org/1999/xlink','href',K.get_image());G.aiq.appendChild(G.vS);return G.aiq;},arz:function(G,ik){var K=G.K;var C=K.eH();var aO=K.aO;var JR=aO.split('\n');var dc=G.dc;var Wu=0;var Xt=0;var Wx=0;var yR=0;var ajf=0;var acv=this.FS/72;var agr=K.cs*acv;var yA=[];var aAs=/(.*\s)(.*)/;var mT,iL,Mx,Db,_parent,amS,Ho,HV,aln,Al,ahA,Cl;amS=dc.childNodes.length;if(amS>=1){_parent=dc.parentNode;Ho=this.du('text');Ho.setAttribute('data-pcc-mark',G.gw.getAttribute('data-pcc-mark'));Ho.setAttribute('width',G.gw.getAttribute('width')-G.K.es);_parent.replaceChild(Ho,dc);G.dc=Ho;G.dc.appendChild(G.Ap);G.gw.appendChild(G.dc);dc={};dc=G.dc;}dc.style.fontSize=K.cs*this.FS/72+'px';dc.style.fontFamily=K.gM;dc.width-=4;HV=(K.es/2);if(ik){switch(ik){case IPCC.Web.UI.HorizontalAlignment.Center:HV=(C.width/2)-(K.es/2);break;case IPCC.Web.UI.HorizontalAlignment.Right:HV=C.width-K.es;break;}}for(var H=0;H<JR.length;H++){Al='';ahA=1;if(JR[H].length>0){Mx=JR[H].split('');iL=this.du('tspan');iL.setAttributeNS(null,"x",HV);if(H>0){iL.setAttributeNS(null,"dy",agr*(Wx+1));}mT=window.document.createTextNode(Mx[0]);iL.appendChild(mT);dc.appendChild(iL);for(var ag=1;ag<Mx.length;ag++){ajf=iL.firstChild.data.length;Db=Mx[ag];iL.firstChild.data+=Mx[ag];Al+=Db;aln=Al.length*(K.cs*acv);Wu=iL.getComputedTextLength();if(Wu===0){Xt=aln;}else{Xt=Wu;}if(Xt>=(C.width-K.es-2)){ahA++;Al='';Cl=iL.firstChild.data.match(aAs);if(Cl){Db=Cl[2];}if(Cl&&Cl[1].length>0){iL.firstChild.data=Cl[1];Al+=Db;}else{iL.firstChild.data=iL.firstChild.data.slice(0,ajf);Al+=Db;}if(Al.length>=1){yA.push({aP:yR,amE:iL});iL=this.du('tspan');iL.setAttributeNS(null,"x",HV);iL.setAttributeNS(null,"dy",agr);mT=window.document.createTextNode(Db);iL.appendChild(mT);dc.appendChild(iL);}}}if(iL.firstChild.data.length>0){yA.push({aP:yR,amE:iL});}yR+=iL.firstChild.data.length+1;Wx=0;}else{Wx++;}}return yA;},ayV:function(kN,amK,io,yR){if(kN.length>0){var ajJ=amK.getNumberOfChars();if(kN[0].aP>yR+ajJ){return;}for(var H=Math.max(kN[0].aP-yR,0);H<ajJ;H++){var C=amK.getExtentOfChar(H);var aQ=this.du('rect');this.bX(aQ,{x:C.x,y:C.y,width:C.width,height:C.height,fill:kN[0].Bl});io.appendChild(aQ);if(kN[0].cc===H+yR){kN.shift();if(kN.length===0){return;}H=kN[0].aP-yR-1;}}}},Ea:function(cU,tp,uN){var hb='M',H;for(H=0;H<tp.length;H++){if(H>0){hb+=' L';}hb+=tp[H].x+','+tp[H].y;}if(uN){hb+='Z';}this.bX(cU,{d:hb});},Va:function(cU,tp,uN){var PZ='',H;for(H=0;H<tp.length;H++){if(H>0){PZ+=' ';}PZ+=tp[H].x+','+tp[H].y;}if(uN&&tp.length>2){PZ+=' '+tp[0].x+','+tp[0].y;}this.bX(cU,{points:PZ});},aho:function(hj,ll,Aq,rq,AM,Zl,Gv){var cA=this.aqJ(hj,ll,Aq,rq,AM);var fD='';fD+='stroke:'+Zl+';';switch(AM){case IPCC.Web.UI.LineHeadType.None:fD='display:none;';break;case IPCC.Web.UI.LineHeadType.Pointer:this.Ea(Gv,[cA.DZ,hj,cA.Dm],false);break;case IPCC.Web.UI.LineHeadType.Solid:this.Ea(Gv,[cA.DZ,hj,cA.Dm],true);fD+='fill:'+Zl+';';break;case IPCC.Web.UI.LineHeadType.Open:this.Ea(Gv,[cA.DZ,hj,cA.Dm],true);break;case IPCC.Web.UI.LineHeadType.PointerSolid:this.Ea(Gv,[cA.DZ,hj,cA.Dm,cA.IR],true);fD+='fill:'+Zl+';';break;}this.bX(Gv,{style:fD});return cA;},apc:function(G){var K=G.K;var aW,hC,H,adh,afq,ig='',Bq;aW=K.get_points();hC=[];for(H=0;H<aW.get_length();H++){hC.push(aW.getPoint(H));}if(hC.length<2||K.uN){this.bX(G.XR,{style:'display:none;'});this.bX(G.SZ,{style:'display:none;'});}else{K.AW=K.iI;Bq=this.afy(hC,true);adh=this.aho(Bq.hj,Bq.ll,K.GO,K.HL,K.GM,K.AW,G.XR);Bq=this.afy(hC,false);afq=this.aho(Bq.hj,Bq.ll,K.JK,K.IU,K.mx,K.AW,G.SZ);hC[0]=adh.IR;hC[hC.length-1]=afq.IR;}this.Va(G.rw,hC,K.uN);var wm=this.WF(K.ig);if(wm!==''){ig+='stroke-dasharray:'+wm+';';}this.bX(G.rw,{style:ig});},afO:function(G){var FV=this.apz(G);this.Va(G.IS,FV.ajX,false);var akv='',ig='fill:none;',rI='fill:none;';if(FV.abz){akv='stroke:none;';}if(FV.abx){this.Ea(G.rw,FV.abx,false);}else{ig+='display:none;';}if(FV.Oe){this.Ea(G.Tp,FV.Oe,false);}else{rI+='display:none;';}var K=G.K;if(K.zE){rI+='stroke:'+K.Dy+';stroke-width:'+K.CZ+';';var wm=this.WF(K.rI);if(wm!==''){rI+='stroke-dasharray:'+wm+';';}}this.bX(G.rw,{style:ig});this.bX(G.Tp,{style:rI});this.bX(G.IS,{style:akv});},abC:function(G){var K=G.K,DH;if(!K){return;}var C=K.eH();var Bo=K.cs*this.FS/72;K.Bo=Bo;var pz=C.width,nX=C.height,Hg=false,fN;var gu,fL=0,eN=0;var uS=1;if(K.jD){uS+=K.es/2;}switch(K.yk){case IPCC.Web.UI.Orientation.TopLeft:gu='1,0,0,1';break;case IPCC.Web.UI.Orientation.TopRight:gu='-1,0,0,1';fL=pz-uS;break;case IPCC.Web.UI.Orientation.BottomRight:gu='-1,0,0,-1';fL=pz-uS;eN=nX-uS;break;case IPCC.Web.UI.Orientation.BottomLeft:gu='1,0,0,-1';eN=nX-uS;break;case IPCC.Web.UI.Orientation.LeftTop:gu='0,1,1,0';Hg=true;break;case IPCC.Web.UI.Orientation.RightTop:gu='0,1,-1,0';fL=pz-uS;Hg=true;break;case IPCC.Web.UI.Orientation.RightBottom:gu='0,-1,-1,0';fL=pz-uS;eN=nX-uS;Hg=true;break;case IPCC.Web.UI.Orientation.LeftBottom:gu='0,-1,1,0';eN=nX-uS;Hg=true;break;}if(K.cP==="#c0c0c0"){K.cP='#ffffff';}if(K.get_type()===IPCC.Web.UI.MarkType.Text){if(K.iM()===true){K.cP='#ffffff';}else{K.set_opacity(K.dv);}}if(Hg){fN=pz;pz=nX;nX=fN;}if(pz<0){pz=0;}if(nX<0){nX=0;}var VA='normal';var cG='normal';var oB='';var sn;oB+='word-wrap:break-word;background-color:transparent;line-height:1;';var zm=0;if(K.qn.length===7&&K.qn.charAt(0)==='#'){zm=parseInt(K.qn.slice(1),16);}var dv=Math.min(1,Math.max(0,K.yw/255));if(document.documentMode>8||IPCC.T.uG.Ar){cG='normal';if(K.cG&IPCC.Web.UI.FontStyle.Italic){cG='italic';}VA='normal';if(K.cG&IPCC.Web.UI.FontStyle.Bold){VA='bold';}sn='none';if((K.cG&IPCC.Web.UI.FontStyle.Underline)&&(K.cG&IPCC.Web.UI.FontStyle.Strikeout)){sn='underline line-through';}else if(K.cG&IPCC.Web.UI.FontStyle.Underline){sn='underline';}else if(K.cG&IPCC.Web.UI.FontStyle.Strikeout){sn='line-through';}}else{oB+='color:rgba('+(zm>>16)+','+((zm>>8)&255)+','+(zm&255)+','+dv+');';oB+='font-family:'+K.gM+';';oB+='font-size:'+Bo+'px;';if(K.cG&IPCC.Web.UI.FontStyle.Italic){oB+='font-style:italic;';}if(K.cG&IPCC.Web.UI.FontStyle.Bold){oB+='font-weight:bold;';}if((K.cG&IPCC.Web.UI.FontStyle.Underline)&&(K.cG&IPCC.Web.UI.FontStyle.Strikeout)){oB+='text-decoration:underline line-through;';}else if(K.cG&IPCC.Web.UI.FontStyle.Underline){oB+='text-decoration:underline;';}else if(K.cG&IPCC.Web.UI.FontStyle.Strikeout){oB+='text-decoration:line-through;';}}var BD={x:2,anchor:'start'};switch(K.ik){case IPCC.Web.UI.HorizontalAlignment.Left:oB+='text-align:left;';break;case IPCC.Web.UI.HorizontalAlignment.Center:oB+='text-align:center;';BD.x=(C.width/2)-3;BD.anchor='middle';break;case IPCC.Web.UI.HorizontalAlignment.Right:oB+='text-align:right;';BD.x=C.width-8;BD.anchor='end';break;default:break;}if(typeof document.documentMode==='undefined'&& !IPCC.T.uG.Ar){switch(K.xE){case IPCC.Web.UI.VerticalAlignment.Center:if(K.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction){this.bX(G.MZ,{style:'display:table; width: 100%;'});oB+='display: table-cell; white-space: normal; vertical-align: middle; height:'+nX+'px;';}break;case IPCC.Web.UI.VerticalAlignment.Bottom:break;default:break;}this.bX(G.mB,{style:oB+'padding:2px;'});this.bX(G.gw,{transform:'matrix('+gu+','+(fL+C.x+(K.es/2))+','+(eN+C.y+(K.es/2))+')',});this.bX(G.Bi,{x:0,y:0,width:pz>K.es?pz-K.es:pz,height:nX>K.es?nX-K.es:nX,});this.aoi(G);}else{var yA=this.arz(G,K.ik);var ajI=yA.length;switch(K.xE){case IPCC.Web.UI.VerticalAlignment.Center:if(K.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction){DH=(C.height/2)+(K.cs/4);if(ajI>1){DH-=(ajI-1)*(K.cs/2);}if(DH<0){DH=K.cs;}}break;case IPCC.Web.UI.VerticalAlignment.Bottom:break;default:break;}this.bX(G.BP,{x:0,y:0,width:C.width-K.es,height:C.height-K.es});var aqe="url(#"+G.JU+")";var TO={x:BD.x,y:(this.FS/72)*K.cs,width:C.width-K.es,height:C.height-K.es,'font-family':K.gM,'font-size':Bo,fill:'rgba('+(zm>>16)+', '+((zm>>8)&255)+', '+(zm&255)+', '+dv+')','font-weight':VA,'font-style':cG,'text-decoration':sn,'text-anchor':BD.anchor};if(typeof DH!=='undefined'){delete TO.y;TO.dy=DH;}this.bX(G.dc,TO);G.dc.style.opacity=dv;this.bX(G.gw,{transform:'matrix('+gu+','+(fL+C.x+(K.es/2))+','+(eN+C.y+(K.es/2))+')','clip-path':aqe});var io=G.aiw;while(io&&io.firstChild){io.removeChild(io.firstChild);}if(K.fM){var kN=this.abY(K.fM);for(var H=0;H<yA.length;H++){this.ayV(kN,yA[H].amE,io,yA[H].aP);}}}},aam:function(G){var K=G.K;if(K.by===null||K.by===undefined){return;}if(K.by.length===0&&K.cq>0&&this.h.cd().oY()){K.by=IPCC.T.XY(this.h.cd().gY(),K.aP,K.aP+K.cq-1);}if(!G.aP|| !G.cq||G.aP!==K.aP||G.cq!==K.cq||K.ce===false||K.ce===true){while(G.ke.firstChild){G.ke.removeChild(G.ke.firstChild);}if(G.kq){while(G.kq.firstChild){G.kq.removeChild(G.kq.firstChild);}}if(G.xM){while(G.xM.firstChild){G.xM.removeChild(G.xM.firstChild);}}if(K.ce===false){return;}IPCC.T.forEach(G.K.by,function(gR){var Vw=this.du('rect');G.ke.appendChild(Vw);this.bX(Vw,{x:gR.x,y:gR.y,width:gR.width,height:gR.height});if(G.kq){var uY=this.du('line');this.bX(uY,{x1:gR.x,y1:gR.y+gR.height-1,x2:gR.x+gR.width,y2:gR.y+gR.height-1,"stroke-width":2});G.kq.appendChild(uY);}if(G.xM){Vw.setAttribute('fill','transparent');var afw=this.du('line');var strikethroughY=gR.y+(gR.height/2);this.bX(afw,{x1:gR.x,y1:strikethroughY,x2:gR.x+gR.width,y2:strikethroughY,stroke:G.K.iI,"stroke-width":G.K.es});G.xM.appendChild(afw);}},this);G.aP=K.aP;G.cq=K.cq;}},agn:function(G){var K=G.K;if(!K){return;}var bb=G.bb;var C,fD='',aW,jD=true,nR,vZ,wX,UR,qp,Fs;var jV=false;switch(K.get_type()){case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:jV=true;this.apc(G);break;case IPCC.Web.UI.MarkType.Rectangle:C=K.get_rectangle();this.bX(bb,{x:C.x,y:C.y,width:C.width,height:C.height});break;case IPCC.Web.UI.MarkType.HighlightText:this.aam(G);G.ke.style.fill=K.cP;G.ke.style.opacity=(K.dv/255);this.NJ(G);break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:this.aam(G);G.ke.style.fill=K.cP;G.kq.style.stroke=K.cP;if(G.K.get_selected()){G.kq.style.opacity=IPCC.cJ.co.HT(false,G.K.get_selected());}else{G.kq.style.opacity=IPCC.cJ.co.HT(false,G.K.get_selected());}this.NJ(G);break;case IPCC.Web.UI.MarkType.DocumentHyperlink:C=K.get_rectangle();this.bX(G.C,{x:C.x,y:C.y,width:C.width,height:C.height});if(G.uY){this.bX(G.uY,{x1:C.x,y1:C.y+C.height,x2:C.x+C.width,y2:C.y+C.height});}break;case IPCC.Web.UI.MarkType.RectangleRedaction:if(typeof G.fE!=='undefined'){if(this.h.mH()===true){G.fE.style.opacity=0.2;if(typeof G.mB!=='undefined'){G.mB.style.opacity=0;}else{G.dc.style.opacity=0;}}else{G.fE.style.opacity=1;if(typeof G.mB!=='undefined'){G.mB.style.opacity=1;}}}C=K.get_rectangle();this.bX(bb,{x:C.x,y:C.y,width:C.width,height:C.height});this.bX(G.fE,{x:C.x,y:C.y,width:C.width,height:C.height});if(this.h.mH()===false){this.abC(G);}break;case IPCC.Web.UI.MarkType.Ellipse:C=K.get_rectangle();this.bX(bb,{cx:C.x+C.width/2,cy:C.y+C.height/2,rx:C.width/2,ry:C.height/2});break;case IPCC.Web.UI.MarkType.Polygon:aW=this.Te(K);this.Va(bb,aW,false);fD+='fill-rule:evenodd;';break;case IPCC.Web.UI.MarkType.Text:this.afO(G);this.abC(G);break;case IPCC.Web.UI.MarkType.TextAreaSignature:var dN=IPCC.T.agB();var qX=IPCC.T.aiU();qX.nodeValue=K.get_text();var eV=K.eV;var as=this.h.nM().hX();C=K.get_rectangle();dN.style.width=(C.width-K.es/2)+'px';dN.style.height=(C.height-K.es/2)+'px';dN.style.fontFamily=K.gM;dN.style.padding='2px';dN.style.fontStyle=K.cG;K.cs=IPCC.T.US(dN,eV,as)*72/this.FS;this.afO(G);this.abC(G);break;case IPCC.Web.UI.MarkType.Stamp:C=K.get_rectangle();this.bX(bb,{x:C.x,y:C.y,width:C.width,height:C.height});this.bX(G.vb,{x:C.x,y:C.y,width:C.width,height:C.height,'stroke':'none','fill':'rgba(255, 255, 255, 0)'});G.vb.style.opacity=1;this.bX(G.fE,{x:C.x,y:C.y,width:C.width,height:C.height,'stroke':K.cP,'stroke-width':'5','fill':'none','rx':10,'ry':10});var textFontSize=(C.width/6);if(textFontSize>C.height){textFontSize=(C.height-(C.height/6));}nR=G.K.get_text();if(!nR){nR='APPROVED';}G.dc.childNodes[0].data=nR;var tc=nR.length*textFontSize;if(tc>C.width){textFontSize=((C.width/nR.length));}Fs=Math.round(textFontSize);K.stampSize=Fs.toString();this.bX(G.dc,{x:C.x+(C.width/2),y:C.y+(C.height/2+(textFontSize/3)),'font-size':textFontSize,'stroke':K.cP,'font-family':"Arial"});break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:C=K.get_rectangle();this.bX(bb,{x:C.x,y:C.y,width:C.width,height:C.height});this.bX(G.vb,{x:C.x,y:C.y,width:C.width,height:C.height,'stroke':'none','fill':'rgba(255, 255, 255, 0)'});G.vb.style.opacity=1;this.bX(G.fE,{x:C.x,y:C.y,width:C.width,height:C.height,'stroke':K.cP,'stroke-width':'0','fill':'none'});G.vS.setAttribute('height',C.height);G.vS.setAttribute('width',C.width);G.vS.setAttribute('x',C.x);G.vS.setAttribute('y',C.y);G.vS.setAttributeNS('http://www.w3.org/1999/xlink','href',K.get_image());break;case IPCC.Web.UI.MarkType.TextSelectionRedaction:this.NJ(G);break;case IPCC.Web.UI.MarkType.Highlight:C=K.get_rectangle();if(C.x===0&&C.y===0){var gm=this.h.cd().gY();if(gm.ef()>0){var eU=gm.kn(K.aP);C=eU.bC;}K.iq='y';}this.bX(bb,{x:C.x,y:C.y,width:C.width,height:C.height});break;case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.Freehand:C=K.get_rectangle();this.bX(bb,{x:C.x,y:C.y,width:C.width,height:C.height});var PR=G.aDy;if(K.anb===true){K.anb=false;PR.setAttribute("d",K.get_pathString());var GP=K.get_pathWidth();var Ha=K.get_pathHeight();bb.setAttribute('viewBox','0 0 '+GP+' '+Ha);G.acJ.setAttribute('width',GP);G.acJ.setAttribute('height',Ha);}if(K.get_visible()){G.bb.style.display='block';}else{G.bb.style.display='none';}this.aeC(G.bb,K.ik);PR.style.stroke=K.get_lineColor();PR.style.strokeWidth=K.get_lineWidth()+'px';PR.style.opacity=K.get_opacity()/255;break;case IPCC.Web.UI.MarkType.SignatureText:C=K.get_rectangle();this.bX(bb,{x:C.x,y:C.y,width:C.width,height:C.height});this.bX(G.fE,{x:C.x,y:C.y,width:C.width,height:C.height,'stroke':'none','fill':'rgba(255, 255, 255, 0)'});G.fE.style.opacity=1;var auI=G.K.get_text()||"";G.dc.childNodes[0].data=auI;vZ=12*C.width/(K.zv||1);wX=12*C.height/(K.zD||1);qp=Math.min(vZ,wX);var arE=Math.floor(qp);K.stampSize=arE.toString();switch(K.ik){case IPCC.Web.UI.HorizontalAlignment.Left:G.dc.setAttribute('text-anchor','start');G.dc.setAttribute('x',C.x);break;case IPCC.Web.UI.HorizontalAlignment.Right:G.dc.setAttribute('text-anchor','end');G.dc.setAttribute("x",C.x+C.width);break;default:G.dc.setAttribute('text-anchor','middle');G.dc.setAttribute("x",C.x+(C.width/2));break;}this.bX(G.dc,{y:C.y+(C.height/2+(qp/3)),'font-size':qp,'stroke':"none",'fill':K.get_fillColor(),'font-family':K.get_fontName()});if(K.get_visible()){G.bb.style.display='block';}else{G.bb.style.display='none';}break;case IPCC.Web.UI.MarkType.TextLine:this.bX(bb,{style:'fill:none;opacity:1;'+K.ce?'display:block;':'display:none;'});C=K.get_rectangle();this.bX(bb,{x:C.x,y:C.y,width:C.width,height:C.height});fD='stroke:'+(K.jD?'black':'none')+';stroke-width:1;';this.bX(G.fE,{x:C.x,y:C.y,width:C.width,height:C.height,'stroke':K.jD?'black':'none','fill':'rgba(255, 255, 255, 0)','style':fD});G.dc.style.opacity=1;nR=G.K.get_text()||"";G.dc.childNodes[0].data=nR;UR=IPCC.T.aij(nR,K.get_fontName(),C.width,C.height,{uw:"pre",fH:G.bb});qp=UR.fontSize;if(K.eV){qp=Math.min(qp,K.eV);}K.Bo=qp;K.stampSize=qp;K.IC=true;K.nF=UR;switch(K.ik){case IPCC.Web.UI.HorizontalAlignment.Center:G.dc.setAttribute('text-anchor','middle');G.dc.setAttribute("x",C.x+(C.width/2));break;case IPCC.Web.UI.HorizontalAlignment.Right:G.dc.setAttribute('text-anchor','end');G.dc.setAttribute("x",C.x+C.width);break;default:G.dc.setAttribute('text-anchor','start');G.dc.setAttribute('x',C.x);break;}this.bX(G.dc,{y:C.y+(C.height/2+(qp/3)),'font-size':qp,'stroke':"none",'fill':K.get_textColor(),'font-family':K.get_fontName(),'white-space':'pre'});if(K.cP!=='transparent'){G.fE.style.fill=K.cP;}if(K.dv<255){G.fE.style.opacity=K.dv/255;}if(K.iI!=='transparent'){G.fE.style.stroke=K.iI;G.fE.style.strokeWidth=K.es;}break;case IPCC.Web.UI.MarkType.Strikethrough:this.aam(G);this.NJ(G);break;default:throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('type',K.get_type());}if(K.get_type()!==IPCC.Web.UI.MarkType.SignaturePath&&K.get_type()!==IPCC.Web.UI.MarkType.Freehand&&K.get_type()!==IPCC.Web.UI.MarkType.SignatureText&&K.get_type()!==IPCC.Web.UI.MarkType.HighlightText&&K.get_type()!==IPCC.Web.UI.MarkType.TextHyperlinkAnnotation&&K.get_type()!==IPCC.Web.UI.MarkType.DocumentHyperlink&&K.get_type()!==IPCC.Web.UI.MarkType.Strikethrough&&K.get_type()!==IPCC.Web.UI.MarkType.TextSelectionRedaction){if(jV){fD+='fill:none;';}else{if(K.IK){fD+='fill:'+K.cP+';';}else{fD+='fill:none;';}jD=K.jD;var wm=this.WF(K.ig);if(wm!==''){fD+='stroke-dasharray:'+wm+';';}}if(jD){fD+='stroke:'+K.get_lineColor()+';';fD+='stroke-width:'+K.es+';';}else{fD+='stroke:none;';}if(K.get_type()===IPCC.Web.UI.MarkType.SignatureText||K.get_type()===IPCC.Web.UI.MarkType.TextLine){fD+='opacity:'+1+';';}else{fD+='opacity:'+(K.dv/255)+';';}if(!K.ce){fD+='display:none;';if(G.gw){G.gw.style.display='none';}}else{if(G.gw){G.gw.style.display='block';}}this.bX(bb,{style:fD});}if(K.get_type()===IPCC.Web.UI.MarkType.Freehand){if(!K.ce){fD+='display:none;';}else{fD+='display:block;';}this.bX(bb,{style:fD});}var bD;if(!this.h.get_areMarksEditable()){bD=this.h.get_cursor();}else if(K.lj===IPCC.Web.UI.MarkInteractionMode.SelectionDisabled&&K.get_type()!==IPCC.Web.UI.MarkType.TextHyperlinkAnnotation&&K.get_type()!==IPCC.Web.UI.MarkType.DocumentHyperlink){bD='default';}else if(K.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||K.get_type()===IPCC.Web.UI.MarkType.DocumentHyperlink){bD=IPCC.bF.Link;}else if(K.get_type()!==IPCC.Web.UI.MarkType.Highlight&&K.get_type()!==IPCC.Web.UI.MarkType.HighlightText&&K.get_type()!==IPCC.Web.UI.MarkType.Strikethrough&&K.get_type()!==IPCC.Web.UI.MarkType.TextSelectionRedaction&& !(K.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&K.aD)){bD=IPCC.bF.Move;}else{bD=IPCC.bF.Arrow;}bb.style.cursor=IPCC.bF.eD(bD);if(G.gw){G.gw.style.cursor=IPCC.bF.eD(bD);}},aeC:function(bb,Fx){switch(Fx){case IPCC.Web.UI.HorizontalAlignment.Left:bb.setAttribute('preserveAspectRatio','xMinYMid');break;case IPCC.Web.UI.HorizontalAlignment.Center:bb.setAttribute('preserveAspectRatio','xMidYMid');break;case IPCC.Web.UI.HorizontalAlignment.Right:bb.setAttribute('preserveAspectRatio','xMaxYMid');break;}},NJ:function(G){var K=G.K,aAg=K.get_visible();var C=K.get_rectangle();if(C.x===0&&C.y===0){return;}var io=G.io;while(io.firstChild){io.removeChild(io.firstChild);}var iO;for(var H=0;H<K.fM.length;H++){for(var ag=0;ag<K.fM[H].length;ag++){var ank=this.h.cd().gY();if(ank.ef()>0){var apH=ank.kn(K.fM[H].startIndex+ag);iO=apH.bC;}var aQ=this.du('rect');this.bX(aQ,{x:iO.x,y:iO.y,width:iO.width,height:iO.height,fill:K.fM[H].color,display:(aAg)?'block':'none'});aQ.style.opacity=(K.fM[H].opacity)?(K.fM[H].opacity)/255.0:0.5;io.appendChild(aQ);}}},WF:function(ig){switch(ig){case IPCC.Web.UI.LineStyle.Dash:return '7,7';case IPCC.Web.UI.LineStyle.Dot:return '1,7';case IPCC.Web.UI.LineStyle.DashDot:return '7,7,1,7';case IPCC.Web.UI.LineStyle.DashDotDot:return '7,7,1,7,1,7';default:break;}return '';},MH:function(G){if(G.bb){this.bK.BM.removeChild(G.bb);}if(G.gw){this.bK.BM.removeChild(G.gw);}delete G.bb;},aIb:function(){},aBn:function(){this.bK=undefined;},du:function(bO){return document.createElementNS('http://www.w3.org/2000/svg',bO);},bX:function(bb,aZ){var H;for(H in aZ){if(aZ.hasOwnProperty(H)){var attr=aZ[H];bb.setAttribute(H,attr!==undefined&&attr!==null?attr.toString():'');}}}};module.exports=ama;},{}],18:[function(require,module,exports){var PU=require('./ArtSVGUIDirector');var co=PU;co.HT=function(isMouseOver,isSelected){return(isSelected?127:(isMouseOver?127:63))/255;};co.aiM=function(){return 39/255;};co.aGj=function(isSelected){return isSelected?"purple":"blue";};co.prototype.aqJ=function(hj,ll,Aq,rq,AM){var cA={hj:hj,ll:ll,Aq:Aq,rq:rq,AM:AM};if(hj.x===ll.x&&hj.y===ll.y){cA.AM=IPCC.Web.UI.LineHeadType.None;}var MF=Math.atan2(hj.x-ll.x,-(hj.y-ll.y))+Math.PI/2;Aq*=Math.PI/180;var ji=MF+Aq;cA.DZ={x:hj.x+Math.cos(ji)*rq,y:hj.y+Math.sin(ji)*rq};ji=MF-Aq;cA.Dm={x:hj.x+Math.cos(ji)*rq,y:hj.y+Math.sin(ji)*rq};switch(cA.AM){case IPCC.Web.UI.LineHeadType.Solid:case IPCC.Web.UI.LineHeadType.Open:cA.IR={x:(cA.DZ.x+cA.Dm.x)/2,y:(cA.DZ.y+cA.Dm.y)/2};break;case IPCC.Web.UI.LineHeadType.PointerSolid:cA.IR={x:hj.x+Math.cos(MF)*rq/2,y:hj.y+Math.sin(MF)*rq/2};break;default:cA.IR=hj;break;}return cA;};co.prototype.apz=function(G){var K=G.K;var C=K.get_rectangle();var Is={x:K.me.x+C.x+0.00001,y:K.me.y+C.y+0.00001};var am={};var gi=[{x:C.x,y:C.y},{x:C.x+C.width,y:C.y},{x:C.x+C.width,y:C.y+C.height},{x:C.x,y:C.y+C.height}];if(!K.yC){am.ajX=gi;am.abz= !K.jD;return am;}var H,agM=[];for(H=0;H<4;H++){agM.push({x:(gi[H].x+gi[(H+3)%4].x)/2,y:(gi[H].y+gi[(H+3)%4].y)/2,azd:true});}for(H=3;H>=0;H--){gi.splice(H,0,agM[H]);}function akD(KI){var ye,aaO;ye=(Is.x-(gi[KI].x+gi[(KI+1)%8].x)/2)*C.height;aaO=ye*ye;ye=(Is.y-(gi[KI].y+gi[(KI+1)%8].y)/2)*C.width;return aaO+ye*ye;};var UC=0,ami=akD(0),gj;for(H=1;H<8;H++){gj=akD(H);if(gj<ami){ami=gj;UC=H;}}gi=gi.slice(UC+1).concat(gi.slice(0,UC+1));var Dc=gi[0],Eh=gi[7];for(H=gi.length-1;H>=0;H--){if(gi[H].azd){gi.splice(H,1);}}switch(K.Be){case IPCC.Web.UI.CalloutType.Triangle:gi.splice(0,0,{x:(Dc.x*3+Eh.x)/4,y:(Dc.y*3+Eh.y)/4});gi.push({x:(Dc.x+Eh.x*3)/4,y:(Dc.y+Eh.y*3)/4});if(K.zE){am.abz=true;am.abx=[].concat(gi);am.Oe=[gi[0],Is,gi[gi.length-1]];}gi.push(Is);break;default:case IPCC.Web.UI.CalloutType.Line:am.Oe=[{x:(Dc.x+Eh.x)/2,y:(Dc.y+Eh.y)/2},Is];break;}am.ajX=gi;if(!K.jD){am.abz=true;delete am.abx;delete am.Oe;}return am;};co.prototype.Te=function(K){var aW=K.get_points();var hC=[],H;for(H=0;H<aW.get_length();H++){hC.push(aW.getPoint(H));}return hC;};co.prototype.afy=function(hC,ayI){var aJ=0,QL=1,aeL=hC.length-2,hj,ll;if(!ayI){aJ=hC.length-1;QL= -1;}hj=hC[aJ];aJ+=QL;ll=hC[aJ];aJ+=QL;while(hj.x===ll.x&&hj.y===ll.y&&aeL>0){ll=hC[aJ];aJ+=QL;aeL--;}return{hj:hj,ll:ll};};co.prototype.agw=function(h,bK,ad,kY){if(IPCC.T.Yl){return;}if(!bK.nh){bK.nh=[];}var nh=bK.nh;if(ad.length<1&&nh.length<1){if(bK.zC.firstChild){bK.zC.innerHTML='';}return;}var bJ=h.ee();var dX=bJ.BZ();if(this.hH===undefined){this.hH=40;var zU=document.createElement("div");zU.className='pccMarkHandleTopLeft';zU.visibility='hidden';document.body.appendChild(zU);if(zU.currentStyle){this.hH=parseInt(zU.currentStyle.width,10)||0;}else if(document.defaultView&&document.defaultView.getComputedStyle){var aya=document.defaultView.getComputedStyle(zU);this.hH=parseInt(aya.width,10)||0;}document.body.removeChild(zU);}var H,Fw=[];for(H=0;H<ad.length;H++){if(ad[H].get_visible()===true){if(dX.Gr(ad[H])>=0||(ad[H].get_selected()===true&&(ad[H].ka===true||ad[H].kg===true))||ad[H].vG===true){Fw.push(ad[H]);}}}for(H=0;H<nh.length;H++){while(H<nh.length&&(H>=Fw.length||nh[H].K!==Fw[H])){bK.zC.removeChild(nh[H].hG);nh.splice(H,1);}if(H<nh.length){this.afQ(nh[H],kY);}}for(H=nh.length;H<Fw.length;H++){nh[H]={K:Fw[H]};this.asG(bK.zC,nh[H]);this.afQ(nh[H],kY);}};co.prototype.we=function(hG,arB,BW,uu,awc,bD,dE){var dh=[],H,dA;if(dE===undefined){dE='handle';}for(H=0;H<arB;H++){dA={bb:document.createElement('div')};dA.bb.ImGearMarkHandle=dA;dA.bD=bD;dA.bO=uu;dA.aJ=awc+H;hG.appendChild(dA.bb);dA.bb.setAttribute('data-pcc-mark',dE+'-'+hG.ImGearMarkRelation.K.ly());dh.push(dA);}return dh;};co.prototype.anG=function(dG){if(dG.dh===undefined||this.h.get_areMarksEditable()===false){return;}var H;for(H=0;H<dG.dh.length;H++){var dA=dG.dh[H];dA.bb.style.cursor=IPCC.bF.eD(dA.bD);}};co.prototype.asG=function(zC,dG){dG.hG=document.createElement('div');dG.hG.style.width='0px';dG.hG.style.height='0px';dG.hG.style.left='0px';dG.hG.style.top='0px';dG.hG.style.zIndex='1';var H,K=dG.K,dA;dG.hG.ImGearMarkRelation=dG;switch(K.get_type()){case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:dG.dh=this.we(dG.hG,2,this.hH,this.IL,0,IPCC.bF.Move);dG.dh=dG.dh.concat(this.we(dG.hG,2,this.hH,this.Fz,0,IPCC.bF.Move));break;case IPCC.Web.UI.MarkType.Polygon:dG.dh=[];break;case IPCC.Web.UI.MarkType.Freehand:dG.dh=[];dG.jv=document.createElement('div');dG.jv.style.border='1px solid gray';dG.jv.style.position='absolute';dG.hG.appendChild(dG.jv);break;case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.SignatureText:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Ellipse:case IPCC.Web.UI.MarkType.Highlight:case IPCC.Web.UI.MarkType.Stamp:case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:if(K.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&K.aD!==undefined){break;}dG.jv=document.createElement('div');dG.jv.style.border='1px solid gray';dG.jv.style.position='absolute';dG.hG.appendChild(dG.jv);dG.dh=this.we(dG.hG,4,this.hH,this.Zd,0,-1);dG.dh=dG.dh.concat(this.we(dG.hG,4,this.hH,this.Yr,0,-1));for(H=4;H<8;H++){dA=dG.dh[H];dA.auR=dG.dh[H-4];dA.auu=dG.dh[(H+1)%4];}if(K.get_type()===IPCC.Web.UI.MarkType.Text){dG.dh=dG.dh.concat(this.we(dG.hG,1,this.hH,this.Tk,0,IPCC.bF.Move));}break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.Strikethrough:dG.dh=this.we(dG.hG,1,this.hH,this.IL,0,IPCC.bF.Move,'texthandlestart');dG.dh=dG.dh.concat(this.we(dG.hG,1,this.hH,this.IL,1,IPCC.bF.Move,'texthandleend'));break;}if(K.get_interactionMode()!==IPCC.Web.UI.MarkInteractionMode.TextEditingDisabled&&(K.jd()===IPCC.Web.UI.MarkType.Text||K.jd()===IPCC.Web.UI.MarkType.TextLine||K.jd()===IPCC.Web.UI.MarkType.TextAreaSignature)){var og=document.createElement('div');og.className='pccEditMarkButton';og.setAttribute('data-pcc-mark','edit-'+K.ly());og.onclick=function(av){av=av||{};av.stopPropagation?av.stopPropagation():av.cancelBubble=true;av.preventDefault?av.preventDefault():av.returnValue=false;var pg;var xa=dG.hG;while(xa&&(xa.parentNode||xa.ownerSVGElement)){if(xa.parentNode.id&&xa.parentNode.id.indexOf("__pViewId")!== -1){pg=xa.parentNode;}xa=xa.ownerSVGElement||xa.parentNode;}pg&&pg.aC.aGC(av,K);};dG.hG.appendChild(og);var aDc={bb:og};dG.dh.push(aDc);}zC.appendChild(dG.hG);};co.jR={TopLeft:0,TopRight:1,BottomLeft:2,BottomRight:3,TopCenter:4,MidRight:5,BottomCenter:6,MidLeft:7,Point:8,TextSelectionStart:9,TextSelectionEnd:10,Callout:11};co.prototype.Zd=0;co.prototype.Yr=1;co.prototype.Fz=2;co.prototype.IL=3;co.prototype.Tk=4;co.prototype.ajU=function(dA,ayC){switch(ayC){case IPCC.cJ.co.jR.TopLeft:dA.bb.className='pccMarkHandleTopLeft';break;case IPCC.cJ.co.jR.TopCenter:dA.bb.className='pccMarkHandleTopCenter';break;case IPCC.cJ.co.jR.TopRight:dA.bb.className='pccMarkHandleTopRight';break;case IPCC.cJ.co.jR.MidLeft:dA.bb.className='pccMarkHandleMidLeft';break;case IPCC.cJ.co.jR.MidRight:dA.bb.className='pccMarkHandleMidRight';break;case IPCC.cJ.co.jR.BottomLeft:dA.bb.className='pccMarkHandleBottomLeft';break;case IPCC.cJ.co.jR.BottomCenter:dA.bb.className='pccMarkHandleBottomCenter';break;case IPCC.cJ.co.jR.BottomRight:dA.bb.className='pccMarkHandleBottomRight';break;case IPCC.cJ.co.jR.Point:dA.bb.className='pccMarkHandlePoint';break;case IPCC.cJ.co.jR.TextSelectionStart:dA.bb.className='pccMarkHandleTextSelectionStart';break;case IPCC.cJ.co.jR.TextSelectionEnd:dA.bb.className='pccMarkHandleTextSelectionEnd';break;default:dA.bb.className='pccMarkHandlePoint';break;}};co.prototype.zt=function(dA,aDw,kY,BW,mE){dA.bH=kY.transform(aDw);dA.bb.style.left=(dA.bH.x-BW/2)+'px';dA.bb.style.top=(dA.bH.y-BW/2)+'px';dA.bb.style.display='block';dA.bb.style.zIndex='1';this.ajU(dA,mE);};co.prototype.abd=function(dA,BW,mE){dA.bb.style.left=(dA.bH.x-BW/2)+'px';dA.bb.style.top=(dA.bH.y-BW/2)+'px';dA.bb.style.display='block';dA.bb.style.zIndex='1';this.ajU(dA,mE);};co.prototype.rY=function(dA){dA.bb.style.display='none';};co.prototype.afQ=function(dG,kY){if(this.h.get_areMarksEditable()===true){dG.hG.style.cursor='move';}var H,K=dG.K,dh=dG.dh,dA;var hC,C,qz,lp,uu,dV;var gj,DG,fL,eN,KF;switch(K.get_type()){case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:hC=this.Te(K);DG=hC.length+2-dh.length;if(DG>0){dG.dh=dG.dh.concat(this.we(dG.hG,DG,this.hH,this.Fz,dh.length-2,IPCC.bF.Move));dh=dG.dh;}for(H=0;H<hC.length;H++){this.zt(dh[H+2],hC[H],kY,this.hH,IPCC.cJ.co.jR.Point);}for(H=hC.length+2;H<dh.length;H++){this.rY(dh[H+2]);}break;case IPCC.Web.UI.MarkType.Polygon:hC=this.Te(K);DG=hC.length-dh.length;if(DG>0){dG.dh=dG.dh.concat(this.we(dG.hG,DG,this.hH,this.Fz,dh.length,IPCC.bF.Move));dh=dG.dh;}for(H=0;H<hC.length;H++){this.zt(dh[H],hC[H],kY,this.hH,IPCC.cJ.co.jR.Point);}for(H=hC.length;H<dh.length;H++){this.rY(dh[H]);}break;case IPCC.Web.UI.MarkType.Freehand:C=K.eH();qz=kY.transform({x:C.x,y:C.y});lp=kY.transform({x:C.x+C.width,y:C.y+C.height});dV={x:Math.min(qz.x,lp.x),y:Math.min(qz.y,lp.y)};dV.width=Math.max(qz.x,lp.x)-dV.x;dV.height=Math.max(qz.y,lp.y)-dV.y;dG.jv.style.left=dV.x+'px';dG.jv.style.top=dV.y+'px';dG.jv.style.width=dV.width+'px';dG.jv.style.height=dV.height+'px';dG.jv.setAttribute('data-pcc-mark','outline-'+K.ly());break;case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Ellipse:case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.Stamp:case IPCC.Web.UI.MarkType.SignatureText:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:if(K.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&K.aD!==undefined){break;}C=K.eH();dh[0].bH=kY.transform({x:C.x,y:C.y});dh[1].bH=kY.transform({x:C.x+C.width,y:C.y});dh[2].bH=kY.transform({x:C.x+C.width,y:C.y+C.height});dh[3].bH=kY.transform({x:C.x,y:C.y+C.height});dV={x:Math.min(dh[0].bH.x,dh[2].bH.x),y:Math.min(dh[0].bH.y,dh[2].bH.y)};dV.width=Math.max(dh[0].bH.x,dh[2].bH.x)-dV.x;dV.height=Math.max(dh[0].bH.y,dh[2].bH.y)-dV.y;KF={x:dV.x+dV.width/2,y:dV.y+dV.height/2};for(H=0;H<4;H++){dA=dh[H];uu=(dA.bH.x<KF.x)?((dA.bH.y<KF.y)?0:2):((dA.bH.y<KF.y)?1:3);this.abd(dA,this.hH,uu);switch(uu){case 0:dA.bD=IPCC.bF.ResizeNW;break;case 1:dA.bD=IPCC.bF.ResizeNE;break;case 2:dA.bD=IPCC.bF.ResizeSW;break;case 3:dA.bD=IPCC.bF.ResizeSE;break;}}dG.jv.style.left=dV.x+'px';dG.jv.style.top=dV.y+'px';dG.jv.style.width=dV.width+'px';dG.jv.style.height=dV.height+'px';dG.jv.setAttribute('data-pcc-mark','outline-'+K.ly());var avJ=dV.x+dV.width/4;var apP=dV.x+dV.width*3/4;var avF=dV.y+dV.height/4;var apD=dV.y+dV.height*3/4;if(this.aq.AQ()===IPCC.Web.UI.MarkHandleMode.HideCornerHandlesWhenClose){qz=dh[0].bH;lp=dh[1].bH;var aEt=dh[2].bH;fL=qz.x-lp.x;eN=lp.y-aEt.y;var arM=fL*fL;var asK=eN*eN;if(Math.min(arM,asK)<this.hH*this.hH*5){this.rY(dh[0]);this.rY(dh[1]);this.rY(dh[2]);this.rY(dh[3]);}}for(H=4;H<8;H++){dA=dh[H];qz=dA.auR.bH;lp=dA.auu.bH;fL=qz.x-lp.x;eN=qz.y-lp.y;gj=fL*fL+eN*eN;if(this.aq.AQ()===IPCC.Web.UI.MarkHandleMode.HideSideHandlesWhenClose&&gj<this.hH*this.hH*5){this.rY(dA);}else{dA.bH={x:(qz.x+lp.x)/2,y:(qz.y+lp.y)/2};this.abd(dA,this.hH,H);if(dA.bH.x<avJ){dA.bD=IPCC.bF.ResizeW;}else if(dA.bH.x>apP){dA.bD=IPCC.bF.ResizeE;}else if(dA.bH.y<avF){dA.bD=IPCC.bF.ResizeN;}else if(dA.bH.y>apD){dA.bD=IPCC.bF.ResizeS;}}}if(K.get_type()===IPCC.Web.UI.MarkType.Text){if(K.yC){this.zt(dh[8],{x:C.x+K.me.x,y:C.y+K.me.y},kY,this.hH,IPCC.cJ.co.jR.Callout);}else{this.rY(dh[8]);}}break;case IPCC.Web.UI.MarkType.DocumentHyperlink:return;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.Strikethrough:dG.hG.style.cursor='move';var eU,iO,wh;var Bf=this.h.cd();var gm=Bf.gY();if(K.ka===true){wh=K.aP;if(wh>=gm.ef()){eU=gm.kn(gm.ef()-1);iO=eU.sa();this.zt(dh[0],new IPCC.Web.UI.Point(iO.x+iO.width,iO.y),kY,this.hH,IPCC.cJ.co.jR.TextSelectionStart);break;}eU=gm.kn(K.aP);iO=eU.sa();this.zt(dh[0],new IPCC.Web.UI.Point(iO.x,iO.y),kY,this.hH,IPCC.cJ.co.jR.TextSelectionStart);}else{this.rY(dh[0]);}if(K.kg===true){wh=K.aP+K.cq-1;if(wh<0){eU=gm.kn(0);iO=eU.sa();this.zt(dh[1],new IPCC.Web.UI.Point(iO.x,iO.y+iO.height),kY,this.hH,IPCC.cJ.co.jR.TextSelectionEnd);break;}eU=gm.kn(wh);iO=eU.sa();this.zt(dh[1],new IPCC.Web.UI.Point(iO.x+iO.width,iO.y+iO.height),kY,this.hH,IPCC.cJ.co.jR.TextSelectionEnd);}else{this.rY(dh[1]);}break;}if(K.get_interactionMode()!==IPCC.Web.UI.MarkInteractionMode.TextEditingDisabled&&(K.get_type()===IPCC.Web.UI.MarkType.Text||K.get_type()===IPCC.Web.UI.MarkType.TextLine||K.get_type()===IPCC.Web.UI.MarkType.TextAreaSignature)){var ud=dh[dh.length-1];if(ud.bb.className.match(/pcc/)){var TF=dG.jv.clientHeight;var ZZ=dG.jv.clientWidth;var alO=dG.jv.offsetTop;var alV=dG.jv.offsetLeft;var ajS=ud.bb.clientHeight;var Tg=ud.bb.clientWidth;ud.bb.style.position='absolute';ud.bb.style.zIndex='2';if(TF>ajS+10&&ZZ>Tg+10){ud.bb.style.top=(TF-ajS)/2+alO+'px';ud.bb.style.left=(ZZ-Tg)/2+alV+'px';}else{ud.bb.style.top=TF+alO+10+'px';ud.bb.style.left=(ZZ-Tg)/2+alV+'px';}}}this.anG(dG);};co.prototype.abY=function(hy,tC){var aCl=IPCC.T.adH(hy,tC||'#ffffff'),aBG=IPCC.T.map(aCl,function(ab){return{aP:ab.startIndex,cc:ab.endIndex,Bl:ab.color};});return aBG;};co.prototype.aoi=function(G){var K=G.K;if(K.fM){var kN=this.abY(K.fM);var Dx=K.aO;var By='';for(var H=kN.length-1;H>=0;H--){var Wp=kN[H];var aP=Wp.aP;var cc=Wp.cc;var dI=Wp.Bl;var bZ=IPCC.T.Iq(Dx.substr(aP,cc-aP+1));var asS=IPCC.T.Iq(Dx.substr(cc+1,Dx.length-cc+1));Dx=Dx.substr(0,aP);By="<span style='background-color:"+dI+";'>"+bZ+'</span>'+asS+By;}By=IPCC.T.Iq(Dx)+By;By=By.replace(/\n/g,'<br/>');G.mB.innerHTML=By;}else{G.Ap.data=K.aO;}};module.exports=co;},{"./ArtSVGUIDirector":17}],19:[function(require,module,exports){var uq={Jq:function(){var uF=IPCC.uq;if(uF.tG===null){
/*@cc_on@if(@_jscript)uF.tG=document.documentMode>8;@else@*/ uF.tG=true;/*@end@*/}return uF.tG;},tG:null};module.exports=uq;},{}],20:[function(require,module,exports){var fo=function(VM,awA){this.h=false;this.VM=VM;var kJ=IPCC.Web.UI;var an=awA;if(!an||an===null){an=IPCC.aeW;}this.an=an;var aqG={aO:an.zoomInMenuItem,gX:IPCC.dW.aix,R:1.25};var aqh={aO:an.zoomOutMenuItem,gX:IPCC.dW.ahX,R:1.25};var auo={aO:an.fullImageMenuItem,R:kJ.FitType.FullImage};var auQ={aO:an.fullWidthMenuItem,R:kJ.FitType.FullWidth};var avg={aO:an.fullHeightMenuItem,R:kJ.FitType.FullHeight};var avC={aO:an.oneToOneRatioMenuItem,R:kJ.FitType.OneToOne};var atz={aO:an.actualSizeMenuItem,R:kJ.FitType.ActualSize};var aEJ={aO:an.rotateRightMenuItem,gX:IPCC.dW.Yz,R:90};var aEp={aO:an.rotateLeftMenuItem,gX:IPCC.dW.Yz,R: -90};var auV={aO:an.mirrorHorizontalMenuItem,gX:IPCC.dW.akl};var atu={aO:an.mirrorVerticalMenuItem,gX:IPCC.dW.amZ};var VD={aO:an.panToolMenuItem,R:kJ.MouseTool.HandPan};var SI={aO:an.areaSelectionToolMenuItem,R:kJ.MouseTool.Select};var Un={aO:an.zoomRectangleToolMenuItem,R:kJ.MouseTool.RectangleZoom};var Vz={aO:an.flyingMagnifierToolMenuItem,R:kJ.MouseTool.Magnifier};var apy={aO:an.createTextMarkToolMenuItem,R:kJ.MouseTool.CreateTextMark};var auw={aO:an.createLineMarkToolMenuItem,R:kJ.MouseTool.CreateLineMark};var asC={aO:an.createRectangleMarkToolMenuItem,R:kJ.MouseTool.CreateRectangleMark};var arL={aO:an.createEllipseMarkToolMenuItem,R:kJ.MouseTool.CreateEllipseMark};var aBD={aO:an.editMarksToolMenuItem,R:kJ.MouseTool.EditMarks};var asa={aO:an.createStampMarkToolMenuItem,R:kJ.MouseTool.CreateStampMark};var auc={aO:an.createHighlightMarkToolMenuItem,R:kJ.MouseTool.CreateHighlightTextMark};var ajQ={aF:55,cj:[{aO:an.thicknessMenu.item1,R:1},{aO:an.thicknessMenu.item2,R:2},{aO:an.thicknessMenu.item3,R:3},{aO:an.thicknessMenu.item4,R:4},{aO:an.thicknessMenu.item5,R:5},{aO:an.thicknessMenu.item6,R:6},{aO:an.thicknessMenu.item7,R:7},{aO:an.thicknessMenu.item8,R:8}]};var axa={aF:145,cj:[{aO:an.opacityMenu.translucent,R:127},{aO:an.opacityMenu.opaque,R:255}]};var MN={aO:an.borderThicknessMenuItem,gX:IPCC.dW.Iy,aS:'lineWidth',lE:ajQ};var Lk={aO:an.borderColorMenuItem,gX:IPCC.dW.KR,aS:'lineColor'};var Jw={aO:an.fillColorMenuItem,gX:IPCC.dW.KR,aS:'fillColor'};var ahc={aO:an.lineThicknessMenuItem,gX:IPCC.dW.Iy,aS:'lineWidth',lE:ajQ};var agN={aO:an.lineColorMenuItem,gX:IPCC.dW.KR,aS:'lineColor'};var awW={aO:an.fontMenuItem,gX:IPCC.dW.amY};var Oo={aO:an.opacityMenuItem,gX:IPCC.dW.Iy,aS:'opacity',lE:axa};var atR={aO:an.moveToBackMenuItem,gX:IPCC.dW.amB};var atZ={aO:an.moveBackwardMenuItem,gX:IPCC.dW.anw};var atO={aO:an.moveForwardMenuItem,gX:IPCC.dW.anp};var atA={aO:an.moveToFrontMenuItem,gX:IPCC.dW.alC};var tx={aO:an.deleteMarkMenuItem,gX:IPCC.dW.anx};var apC={aF:180,cj:[auo,auQ,avg,avC,atz]};var aqx={aO:an.zoomToFitMenuItem,gX:IPCC.dW.ahM,lE:apC};var avS={aF:200,cj:[aEJ,aEp,auV,atu]};var awi={aO:an.orientationMenuItem,lE:avS};var OU;if(IPCC.cJ){if(IPCC.gH===false){OU={aF:180,cj:[VD,Un,Vz,SI,null]};}else{OU={aF:180,cj:[VD,Un,Vz,SI,null,aBD,apy,auw,asC,arL,asa,auc]};}}else{OU={aF:180,cj:[VD,Un,Vz,SI]};}var auB={aO:an.mouseToolsMenuItem,gX:IPCC.dW.abK,lE:OU};var aBW={aF:150,cj:[Jw,MN,Lk,null,Oo]};var aEW={aF:150,cj:[Jw,MN,Lk,null,null]};var aBv={aF:150,aO:an.rectangleMarkPropertiesMenuItem,lE:aBW};var aFg={aF:150,aO:an.rectangleMarkPropertiesMenuItem,lE:aEW};var asO={aF:150,cj:[awW,Jw,MN,Lk,null,null,null,Oo]};var asd={aO:an.textMarkPropertiesMenuItem,lE:asO};var aDo={aF:150,cj:[Jw,MN,Lk,null,Oo]};var aEs={aO:an.polygonMarkPropertiesMenuItem,lE:aDo};var aDT={aF:140,cj:[ahc,agN,null,Oo]};var aDS={aO:an.polylineMarkPropertiesMenuItem,lE:aDT};var azr={aF:140,cj:[ahc,agN,null,null]};var aAy={aO:an.lineMarkPropertiesMenuItem,lE:azr};var ava={aF:140,cj:[atA,atO,atZ,atR]};var vi={aO:an.markOrderingMenuItem,lE:ava};var asR={aF:150,cj:[Jw]};var acH={aO:an.stampMarkPropertiesMenuItem,lE:asR};this.aqR={aF:180,cj:[aqG,aqh,aqx,awi,auB]};this.arH={aF:140,cj:[asd,vi,tx]};this.aBp={aF:140,cj:[aBv,vi,tx]};this.asy={aF:140,cj:[acH,vi,tx]};this.asJ={aF:140,cj:[null,vi,tx]};this.aFT={aF:140,cj:[aFg,vi,tx]};this.aEz={aF:140,cj:[aEs,vi,tx]};this.aEl={aF:140,cj:[aDS,vi,tx]};this.azo={aF:140,cj:[aAy,vi,tx]};this.axh={aF:140,cj:[acH,null,tx]};};fo.prototype.mF=function(h){this.h=h;};fo.prototype.eg=function(){this.h=false;};fo.prototype.ak=function(){};fo.prototype.VX=function(J){var hl;if(J.mark&&this.VM){var Lq=J.mark.iM();switch(J.mark.get_type()){case IPCC.Web.UI.MarkType.Line:hl=this.azo;break;case IPCC.Web.UI.MarkType.Polyline:hl=this.aEl;break;case IPCC.Web.UI.MarkType.Rectangle:hl=this.aBp;break;case IPCC.Web.UI.MarkType.Ellipse:hl=this.aFT;break;case IPCC.Web.UI.MarkType.Polygon:hl=this.aEz;break;case IPCC.Web.UI.MarkType.Text:hl=this.arH;break;case IPCC.Web.UI.MarkType.Stamp:if(Lq===true){hl=this.asJ;}else{hl=this.asy;}break;case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.Highlight:if(J.mark.iq==='y'){hl=this.axh;}break;}}if(!hl){hl=this.aqR;}var uR=document.documentElement.scrollLeft-document.documentElement.clientLeft+document.body.scrollLeft-document.body.clientLeft;var uZ=document.documentElement.scrollTop-document.documentElement.clientTop+document.body.scrollTop-document.body.clientTop;var ajy=new IPCC.Web.UI.Point(J.domEvent.clientX+uR,J.domEvent.clientY+uZ);var V=this;function wA(aY){if(uH){var bh=aY.target;if(bh&&bh===null){return;}var CI,amg;while(bh&&bh!==document.body&&bh.parentNode!==null){if(bh&&bh!==null){if(bh===uH){amg=true;}if(!CI&&bh.ImGearCommand){CI=bh.ImGearCommand;}bh=bh.parentNode;}}if(!amg||CI){IPCC.Web.UI.ah.removeHandler(document.body,'mousedown',wA);IPCC.Web.UI.ah.removeHandler(document.body,'mousemove',abZ);document.body.removeChild(uH);uH=null;if(CI){CI.RG=J;V.aDj(CI);}}}};function Yj(JJ,AP,At,FF){var ce=false,H,bh;for(H=0;H<AP.length;H++){if(JJ===AP[H]){ce=true;}}if(!ce&&JJ.ImGearType==='menu'){JJ.style.display='none';}else{JJ.style.display='block';}bh=JJ.firstChild;while(bh){if(bh.ImGearType==='menuItemHighlight'){if(bh===FF){bh.style.display='block';}else{bh.style.display='none';}}if(bh.firstChild){Yj(bh,AP,At,FF);}bh=bh.nextSibling;}};function abZ(aY){if(uH){var bh=aY.target;if(bh&&bh===null){return;}var AP=[uH],At,FF;while(bh&&bh!==document.body&&bh.parentNode!==null){if(!At&&bh.ImGearType==='menuItem'){At=bh;}if(bh.ImGearType==='menu'){AP.push(bh);}bh=bh.parentNode;}if(At){bh=At.firstChild;while(bh){if(bh.ImGearType==='menuItemHighlight'){FF=bh;}else if(bh.ImGearType==='menu'){AP.push(bh);}bh=bh.nextSibling;}}Yj(uH,AP,At,FF);}};var bC;if(window.innerWidth){bC={x:window.pageXOffset,y:window.pageYOffset,width:window.innerWidth,height:window.innerHeight};}else if(document.documentElement.clientWidth){bC={x:uR,y:uZ,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};}else{bC={x:uR,y:uZ,width:document.body.clientWidth,height:document.body.clientHeight};}var uH=this.agO(hl,false,false,ajy,ajy,true,bC,document.body,J.mark);Yj(uH,[uH],null,null);document.body.appendChild(uH);IPCC.Web.UI.ah.addHandler(document.body,'mousedown',wA);IPCC.Web.UI.ah.addHandler(document.body,'mousemove',abZ);};fo.prototype.agO=function(hl,gX,aS,WK,WG,Fr,bC,aEP,K){var ani=24,ahD=1;var H,Tm=0;for(H=0;H<hl.cj.length;H++){var auk=hl.cj[H];if(auk){Tm+=ani;}else{Tm+=ahD;}}var MR;if(Fr){MR=WG.x+hl.aF;if(MR>bC.x+bC.width){Fr=false;}}if(!Fr){MR=WK.x-hl.aF;if(MR<bC.x){Fr=true;}}var rU={x:WG.x,y:WG.y};if(!Fr){rU={x:WK.x-hl.aF-2,y:WK.y-2};}var afD=bC.y+bC.height-Tm-8;if(rU.y>afD){rU.y=afD;}if(rU.y<bC.y+2){rU.y=bC.y+2;}function hm(qJ){var vR=document.createElement('div');var H;for(H in qJ){if(qJ.hasOwnProperty(H)){vR.style[H]=qJ[H];}}return vR;};var NC=hm({zIndex:2,width:hl.aF+'px',left:rU.x+'px',top:rU.y+'px',margin:'0px',padding:'0px',border:'1px solid #C0C0C0',position:'absolute',backgroundColor:'#F0F0F0',color:'Black',fontSize:'11px',fontFamily:'Arial, Helvetica, sans-serif',fontWeight:'bold',boxShadow:'0 2px 3px rgba(0,0,0,.2)'});NC.ImGearType='menu';for(H=0;H<hl.cj.length;H++){var vj=hl.cj[H];var wK;if(vj){wK=hm({position:'relative',height:'24px'});wK.ImGearType='menuItem';var Ah=hm({position:'absolute',width:'24px',overflow:'hidden',borderRight:'1px solid #E0E0E0',height:'24px',textAlign:'center'});wK.appendChild(Ah);var amR=hm({textOverflow:'ellipsis',whiteSpace:'nowrap',width:hl.aF-44+'px',position:'absolute',left:'25px',padding:'0 0 0 4px',overflow:'hidden',borderLeft:'1px solid #FFFFFF',height:'24px',lineHeight:'24px'});wK.appendChild(amR);var amA=hm({display:'none',position:'absolute',height:'24px',width:hl.aF+'px',backgroundColor:'#00C0E0',filter:'progid:DXImageTransform.Microsoft.Alpha(opacity=30)',opacity:'.3'});amA.ImGearType='menuItemHighlight';wK.appendChild(amA);amR.appendChild(document.createTextNode(vj.aO));var NQ=vj.gX||gX;var HK=vj.aS||aS;if(HK){if(NQ===IPCC.dW.Iy){var awt=K['get_'+HK]();if(awt===vj.R){if(this.h.wH()){Ah.style.backgroundImage='url(\''+this.h.wH()+'/MenuIcons.png'+'\')';}else{Ah.style.backgroundImage='url(\''+'<%=WebResource("IPCC.Web.UI.MenuIcons.png")%>'+'\')';}Ah.style.backgroundPosition='0px';}}else if(NQ===IPCC.dW.ana){var awB=K['get_'+HK]();if(awB){if(this.h.wH()){Ah.style.backgroundImage='url(\''+this.h.wH()+'/MenuIcons.png'+'\')';}else{Ah.style.backgroundImage='url(\''+'<%=WebResource("IPCC.Web.UI.MenuIcons.png")%>'+'\')';}Ah.style.backgroundPosition='24px 0px';}}}if(!vj.lE){wK.ImGearCommand={gX:NQ,aS:HK,R:vj.R};}else{var avi={x:bC.x-rU.x,y:bC.y-rU.y,width:bC.width,height:bC.height};this.agO(vj.lE,NQ,HK,{x:0,y: -1},{x:hl.aF,y: -1},Fr,avi,wK,K);}rU.y+=ani;}else{wK=hm({height:'1px',overflow:'hidden',backgroundColor:'#E0E0E0'});rU.y+=ahD;}NC.appendChild(wK);}aEP.appendChild(NC);return NC;};fo.prototype.aBN=function(K,ci,h){var uR=document.documentElement.scrollLeft-document.documentElement.clientLeft+document.body.scrollLeft-document.body.clientLeft;var uZ=document.documentElement.scrollTop-document.documentElement.clientTop+document.body.scrollTop-document.body.clientTop;var bC;if(window.innerWidth){bC={x:window.pageXOffset,y:window.pageYOffset,width:window.innerWidth,height:window.innerHeight};}else if(document.documentElement.clientWidth){bC={x:uR,y:uZ,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};}else{bC={x:uR,y:uZ,width:document.body.clientWidth,height:document.body.clientHeight};}var np=bC.x+bC.width/2;var mr=bC.y+bC.height/2;var ja=document.createElement('div');ja.innerHTML='	<div style="z-index:2;border:1px solid #000000;font-size:12px;font-family:Arial, Helvetica, sans-serif;font-weight:normal;font-variant:normal;'+'background-color:#F0F0F0;position:absolute;top:'+(mr-85)+'px;left:'+(np-80)+'px;width:160px;height:170px;">'+'<div style="padding:4px;background-color:#666666;color:#FFFFFF;font-size:14px;">'+this.an.selectColor+'</div>'+'<div style="position:relative;">'+'<div style="position:absolute;left:8px;top:10px;width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7">'+this.an.red+':</div>'+'<input id="ImGearColorRed" type="text" style="position:absolute;left:80px;top:8px;width:52px;" />'+'<div style="position:absolute;left:8px;top:40px;width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7">'+this.an.green+':</div>'+'<input id="ImGearColorGreen" style="position:absolute;left:80px;top:38px;width:52px" type="text" />'+'<div style="position:absolute;left:8px;top:70px;width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7">'+this.an.blue+':</div>'+'<input id="ImGearColorBlue" style="position:absolute;left:80px;top:68px;width:52px" type="text" />'+'<button id="ImGearColorOKButton" style="font-size:12px;position:absolute;left:9px;top:108px;width:65px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.an.ok+'</button>'+'<button id="ImGearColorCancelButton" style="font-size:12px;position:absolute;left:81px;top:108px;width:71px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.an.cancel+'</button>'+'</div>'+'</div>';document.body.appendChild(ja);var abj=document.getElementById('ImGearColorRed');var aiS=document.getElementById('ImGearColorGreen');var afd=document.getElementById('ImGearColorBlue');var GR=document.getElementById('ImGearColorOKButton');var Km=document.getElementById('ImGearColorCancelButton');var TY=K['get_'+ci]();var ME;if(TY.length===7&&TY.charAt(0)==='#'){ME=parseInt(TY.slice(1),16);}abj.value=(ME>>16);aiS.value=((ME>>8)&255);afd.value=(ME&255);function Yp(XO){var R=Math.floor(+(XO.value));if(!isFinite(R)){R=0;}if(R<0){R=0;}if(R>255){R=255;}return R;};function Ad(){IPCC.Web.UI.ah.removeHandler(GR,'click',FX);IPCC.Web.UI.ah.removeHandler(Km,'click',HE);IPCC.Web.UI.ah.removeHandler(document.body,'mousedown',wA);};function FX(){var dI=Yp(abj)*65536+Yp(aiS)*256+Yp(afd);K['set_'+ci]('#'+(0x1000000+dI).toString(16).slice(1));Ad();document.body.removeChild(ja);ja=null;h.dC();};function HE(){Ad();document.body.removeChild(ja);ja=null;};function wA(aY){if(ja){var bh=aY.target;var Ig;while(bh!==document.body){if(bh===ja){Ig=true;}bh=bh.parentNode;}if(!Ig){Ad();document.body.removeChild(ja);ja=null;}}};IPCC.Web.UI.ah.addHandler(GR,'click',FX);IPCC.Web.UI.ah.addHandler(Km,'click',HE);IPCC.Web.UI.ah.addHandler(document.body,'mousedown',wA);abj.focus();};fo.prototype.aBj=function(K,h){var uR=document.documentElement.scrollLeft-document.documentElement.clientLeft+document.body.scrollLeft-document.body.clientLeft;var uZ=document.documentElement.scrollTop-document.documentElement.clientTop+document.body.scrollTop-document.body.clientTop;var bC;if(window.innerWidth){bC={x:window.pageXOffset,y:window.pageYOffset,width:window.innerWidth,height:window.innerHeight};}else if(document.documentElement.clientWidth){bC={x:uR,y:uZ,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};}else{bC={x:uR,y:uZ,width:document.body.clientWidth,height:document.body.clientHeight};}var np=bC.x+bC.width/2;var mr=bC.y+bC.height/2;var ja=document.createElement('div');ja.innerHTML='<div style="z-index:2;border:1px solid #000000;font-size:12px;font-family:Arial, Helvetica, sans-serif;font-weight:normal;font-variant:normal;'+'background-color:#F0F0F0;position:absolute;top:'+(mr-85)+'px;left:'+(np-200)+'px;width:400px;height:170px;z-index:2">'+'<div style="padding:4px;background-color:#666666;color:#FFFFFF;font-size:14px;">'+this.an.selectFont+'</div>'+'<div style="position:relative;">'+'<div style="position:absolute;left:8px;top:10px;width:90px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.an.font+':</div>'+'<input id="ImGearFontFamily" style="position:absolute;left:100px;top:8px;width:280px" type="text" />'+'<div style="position:absolute;left:8px;top:40px;width:90px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.an.size+':</div>'+'<input id="ImGearFontSize" style="position:absolute;left:100px;top:38px;width:54px" type="text" />'+'<div style="position:absolute;left:8px;top:70px;"><input id="ImGearFontItalic" type="checkbox" style="float:left"><div style="width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7;">'+this.an.italic+'</div></div>'+'<div style="position:absolute;left:100px;top:70px;"><input id="ImGearFontBold" type="checkbox" style="float:left"><div style="width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7;">'+this.an.bold+'</div></div>'+'<div style="position:absolute;left:200px;top:70px;"><input id="ImGearFontUnderline" type="checkbox" style="float:left"><div style="width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7;">'+this.an.underline+'</div></div>'+'<div style="position:absolute;left:300px;top:70px;"><input id="ImGearFontStrikeout" type="checkbox" style="float:left"><div style="width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7;">'+this.an.strikeout+'</div></div>'+'<button id="ImGearFontOKButton" style="font-size:12px;position:absolute;left:240px;top:108px;width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.an.ok+'</button>'+'<button id="ImGearFontCancelButton" style="font-size:12px;position:absolute;left:315px;top:108px;width:71px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.an.cancel+'</button>'+'</div>'+'</div>';document.body.appendChild(ja);var WL=document.getElementById('ImGearFontFamily');var anW=document.getElementById('ImGearFontSize');var akY=document.getElementById('ImGearFontItalic');var alA=document.getElementById('ImGearFontBold');var amq=document.getElementById('ImGearFontUnderline');var anJ=document.getElementById('ImGearFontStrikeout');var GR=document.getElementById('ImGearFontOKButton');var Km=document.getElementById('ImGearFontCancelButton');var avw=K.get_fontName();var avn=K.get_fontSize();var rz=K.get_fontStyle();WL.value=avw;anW.value=avn;akY.checked=rz&IPCC.Web.UI.FontStyle.Italic;alA.checked=rz&IPCC.Web.UI.FontStyle.Bold;amq.checked=rz&IPCC.Web.UI.FontStyle.Underline;anJ.checked=rz&IPCC.Web.UI.FontStyle.Strikeout;function aFF(XO){var R=Math.floor(+(XO.value));if(!isFinite(R)){R=12;}if(R<0.1){R=0.1;}if(R>288){R=288;}return R;};function Ad(){IPCC.Web.UI.ah.removeHandler(GR,'click',FX);IPCC.Web.UI.ah.removeHandler(Km,'click',HE);IPCC.Web.UI.ah.removeHandler(document.body,'mousedown',wA);};function FX(){K.set_fontName(WL.value);var cs=aFF(anW);K.set_fontSize(cs);var fD=0;if(akY.checked){fD|=IPCC.Web.UI.FontStyle.Italic;}if(alA.checked){fD|=IPCC.Web.UI.FontStyle.Bold;}if(amq.checked){fD|=IPCC.Web.UI.FontStyle.Underline;}if(anJ.checked){fD|=IPCC.Web.UI.FontStyle.Strikeout;}K.set_fontStyle(fD);Ad();document.body.removeChild(ja);ja=null;h.dC();};function HE(){Ad();document.body.removeChild(ja);ja=null;};function wA(aY){if(ja){var bh=aY.target;var Ig;while(bh!==document.body){if(bh===ja){Ig=true;}bh=bh.parentNode;}if(!Ig){Ad();document.body.removeChild(ja);ja=null;}}};IPCC.Web.UI.ah.addHandler(GR,'click',FX);IPCC.Web.UI.ah.addHandler(Km,'click',HE);IPCC.Web.UI.ah.addHandler(document.body,'mousedown',wA);WL.focus();};fo.prototype.aDj=function(J){var K=J.RG.mark;switch(J.gX){case IPCC.dW.Iy:K['set_'+J.aS](J.R);this.h.dC();break;case IPCC.dW.KR:this.aBN(K,J.aS,this.h);break;case IPCC.dW.amY:this.aBj(K,this.h);break;case IPCC.dW.ana:K['set_'+J.aS](!K['get_'+J.aS]());this.h.dC();break;case IPCC.dW.amB:K.moveToBack();this.h.dC();break;case IPCC.dW.anw:K.moveBackward();this.h.dC();break;case IPCC.dW.anp:K.moveForward();this.h.dC();break;case IPCC.dW.alC:K.moveToFront();this.h.dC();break;case IPCC.dW.anx:K.removeFromPage();this.h.dC();break;default:this.h.aBA(J);break;}};module.exports=fo;},{}],21:[function(require,module,exports){var bF={Default:0,Arrow:1,Crosshair:2,Link:3,HandOpen:4,HandClosed:5,Magnifier:6,None:7,RectangleZoom:8,AddRectangleMark:9,AddEllipseMark:10,AddLineMark:11,AddFreehandLineMark:12,AddPolygonMark:13,AddPolylineMark:14,AddTextMark:15,Move:16,ResizeN:17,ResizeE:18,ResizeS:19,ResizeW:20,ResizeNW:21,ResizeNE:22,ResizeSE:23,ResizeSW:24,EditMarks:25,RunMarks:26,Text:27,AddStampMark:28,AddRectangleRedactionMark:29,AddImageStampMark:30,eD:function(bD){if(typeof bD==='string'){return bD;}switch(bD){case IPCC.bF.Default:case IPCC.bF.Magnifier:case IPCC.bF.None:case IPCC.bF.RunMarks:return 'auto';case IPCC.bF.Arrow:case IPCC.bF.EditMarks:return 'default';case IPCC.bF.Crosshair:case IPCC.bF.RectangleZoom:case IPCC.bF.AddRectangleMark:case IPCC.bF.AddEllipseMark:case IPCC.bF.AddLineMark:case IPCC.bF.AddFreehandLineMark:case IPCC.bF.AddPolygonMark:case IPCC.bF.AddPolylineMark:case IPCC.bF.AddTextMark:case IPCC.bF.AddRectangleRedactionMark:case IPCC.bF.AddImageStampMark:case IPCC.bF.AddStampMark:return 'crosshair';case IPCC.bF.Link:return 'pointer';case IPCC.bF.HandOpen:case IPCC.bF.HandClosed:case IPCC.bF.Move:return 'move';case IPCC.bF.ResizeN:return 'n-resize';case IPCC.bF.ResizeE:return 'e-resize';case IPCC.bF.ResizeS:return 's-resize';case IPCC.bF.ResizeW:return 'w-resize';case IPCC.bF.ResizeNW:return 'nw-resize';case IPCC.bF.ResizeNE:return 'ne-resize';case IPCC.bF.ResizeSE:return 'se-resize';case IPCC.bF.ResizeSW:return 'sw-resize';case IPCC.bF.Text:return 'text';}return 'auto';}};module.exports=bF;},{}],22:[function(require,module,exports){var iA={st:function(jF,Ld){var bO,dM,fr;if(jF===null){return 'null';}if(!Ld){Ld=0;}bO=typeof(jF);if(bO==='undefined'){return 'undefined';}else if(bO==='number'||bO==='boolean'){return jF.toString();}else if(bO==='string'){return '\''+jF+'\'';}else if(bO==='function'){return 'function';}else{if(Ld<0){return 'jF';}dM='{';for(fr in jF){if(jF.hasOwnProperty(fr)){if(dM.length>2){dM+=', ';}dM+=fr;dM+=': ';dM+=IPCC.iA.st(jF[fr],Ld-1);}}dM+='}';return dM;}},Qo:function(aO){var traceElement=document.getElementById('TraceConsole');if(traceElement&&(traceElement.tagName.toUpperCase()==='TEXTAREA')){traceElement.value+=aO+'\n';}},aHr:function(){var traceElement=document.getElementById('TraceConsole');if(traceElement&&(traceElement.tagName.toUpperCase()==='TEXTAREA')){traceElement.value='';}},lY:function(jH,JG,bL,BE,zq){var aO="PCC Controls - ";aO+=(BE)?BE:" ";aO+=" parent Div id = ";aO+=(zq)?zq:" ";if(JG){switch(JG){case 0:aO+=" FunctionCall ";break;case 1:aO+=" Exception ";break;case 2:aO+=" Custom ";break;case 3:aO+=" UserAction ";break;case 4:aO+=" Warning ";break;default:aO+=" unknown ";}}aO+=" - "+jH;if((typeof(Debug)!=='undefined')&&Debug.writeln){Debug.writeln(aO);}if(window.console&&window.console.log){window.console.log(aO);}if(window.opera){window.opera.postError(aO);}if(window.debugService){window.debugService.trace(aO);}var traceElement=document.getElementById('TraceConsole');if(traceElement&&(traceElement.tagName.toUpperCase()==='TEXTAREA')){traceElement.value+=aO+'\n';}var Ng;try{Ng=onPCCItemLogged;}catch(ex){}if(Ng&&(typeof(Ng)).toLowerCase()==='function'){var cI=new IPCC.Web.UI.LogItemEventArgs();cI.message=jH;cI.cause=JG;cI.level=bL;cI.id=zq;Ng(cI);}}};module.exports=iA;},{}],23:[function(require,module,exports){var jY=function(){this.ac=false;this.h=false;};jY.prototype.mF=function(h){this.h=h;this.h.aja(true);this.aq=h.aw();};jY.prototype.eg=function(){if(arguments[0]){if(arguments[0]===true){this.h=false;return;}}this.h.aja(false);this.h=false;};jY.prototype.ak=function(){if(this.ac){this.h.CV(true);this.aq.pq();this.ac=false;this.h.dC();}};jY.prototype.zF=function(J){this.ak();var K=J.mark;if(K&&K.jd()===IPCC.Web.UI.MarkType.Text){this.h.wi(K);this.h.dC();}};jY.prototype.kF=function(J){this.ak();var iU=J.domEvent;if(iU.button===0){var cO=iU.target;this.dA=cO.ImGearMarkHandle;if(this.dA){this.uu=this.dA.bO;this.mE=this.dA.aJ;}else{this.uu=null;this.mE=null;}while(!(cO.ImGearMarkRelation)&&cO.parentNode&&cO!==document.body){cO=cO.parentNode;}this.G=cO.ImGearMarkRelation;if(this.G){this.K=this.G.K;}else{this.K=null;}this.ac=true;this.Qu=J.imagePoint;this.Fm=J.imagePoint;var K=this.K;if(!K||K.get_interactionMode()===IPCC.Web.UI.MarkInteractionMode.SelectionDisabled){if(!iU.shiftKey){this.h.ee().BZ().removeAllMarks();}this.aq.Dn(J.imagePoint);}else{var gh,C;switch(this.uu){case IPCC.cJ.co.prototype.Zd:this.ix=K.eH();this.aat=Math.abs(this.ix.width);this.GC=Math.abs(this.ix.height);gh={x:this.ix.x,y:this.ix.y};this.QX={x:this.ix.x+this.ix.width,y:this.ix.y+this.ix.height};if(this.mE>0&&this.mE<3){gh.x+=this.ix.width;this.QX.x-=this.ix.width;}if(this.mE>1){gh.y+=this.ix.height;this.QX.y-=this.ix.height;}this.aGt=gh;break;case IPCC.cJ.co.prototype.Yr:C=K.eH();this.ix=C;gh={x:C.x+C.width/2,y:C.y+C.height/2};switch(this.mE){case 0:this.Ae=C.y+C.height;gh.y=C.y;break;case 1:this.Ae=C.x;gh.x=C.x+C.width;break;case 2:this.Ae=C.y;gh.y=C.y+C.height;break;case 3:this.Ae=C.x+C.width;gh.x=C.x;break;}break;case IPCC.cJ.co.prototype.Fz:this.aW=K.re();if(this.mE<0||this.mE>this.aW.ef()){this.ak();}gh=this.aW.getPoint(this.mE);break;case IPCC.cJ.co.prototype.IL:break;case IPCC.cJ.co.prototype.Tk:C=K.eH();gh={x:C.x+K.me.x,y:C.y+K.me.y};break;default:var vP=K.get_selected();if(iU.ctrlKey||iU.shiftKey){vP= !vP;K.set_selected(vP);}else{if(!vP){vP=true;this.h.ee().BZ().removeAllMarks();if(K.get_type()===IPCC.Web.UI.MarkType.Highlight){for(var H=0;H<this.h.ee().get_markCount();H++){var Rq=this.h.ee().getMark(H);if(Rq.jd()===608&&Rq.aD===K.aD){Rq.set_selected(vP);}}}else{K.set_selected(vP);}}}if(!vP){this.ak();}break;}if(this.ac&&gh){this.aBF=gh.x-this.Qu.x;this.aCe=gh.y-this.Qu.y;if(this.dA){this.aq.aot(this.dA.bD);}}}if(this.ac){this.h.CV(false);}}this.h.dC();};jY.prototype.kL=function(J){var iU=J.domEvent;var Fm;function aCR(aAW){aAW.Ii(J.imagePoint.x-Fm.x,J.imagePoint.y-Fm.y);};if(iU.button!==0){this.ak();}if(this.ac){var K=this.K;if(!K||K.get_interactionMode()===IPCC.Web.UI.MarkInteractionMode.SelectionDisabled){this.aq.zX(J.imagePoint);}else{var gh={x:J.imagePoint.x+this.aBF,y:J.imagePoint.y+this.aCe};var C;switch(this.uu){case IPCC.cJ.co.prototype.Zd:var qq={x:gh.x,y:gh.y};var kd={x:this.QX.x,y:this.QX.y};if(iU.ctrlKey){kd.x=this.ix.x+this.ix.width/2;kd.y=this.ix.y+this.ix.height/2;}if(iU.shiftKey){var sd=Math.abs(qq.x-kd.x);var rC=Math.abs(qq.y-kd.y);if(sd*this.GC<rC*this.aat){if(this.GC>0.001){sd=rC*this.aat/this.GC;}}else{if(this.GC>0.001){rC=sd*this.GC/this.aat;}}if(qq.x<kd.x){sd= -sd;}if(qq.y<kd.y){rC= -rC;}qq.x=kd.x+sd;qq.y=kd.y+rC;}if(iU.ctrlKey){kd={x:kd.x-(qq.x-kd.x),y:kd.y-(qq.y-kd.y)};}C={};C.x=Math.min(kd.x,qq.x);C.width=Math.max(kd.x,qq.x)-C.x;C.y=Math.min(kd.y,qq.y);C.height=Math.max(kd.y,qq.y)-C.y;K.set_rectangle(C);break;case IPCC.cJ.co.prototype.Yr:C=K.eH();var Ck;if(this.mE&1){if(iU.ctrlKey){Ck=this.ix.x+this.ix.width/2;C.width=Math.abs(gh.x-Ck)*2;C.x=Ck-C.width/2;}else{C.x=Math.min(gh.x,this.Ae);C.width=Math.max(gh.x,this.Ae)-C.x;}}else{if(iU.ctrlKey){Ck=this.ix.y+this.ix.height/2;C.height=Math.abs(gh.y-Ck)*2;C.y=Ck-C.height/2;}else{C.y=Math.min(gh.y,this.Ae);C.height=Math.max(gh.y,this.Ae)-C.y;}}K.set_rectangle(C);break;case IPCC.cJ.co.prototype.Fz:this.aW=K.re();gh=this.aW.setPoint(this.mE,gh);break;case IPCC.cJ.co.prototype.IL:break;case IPCC.cJ.co.prototype.Tk:C=K.eH();K.set_calloutPoint({x:gh.x-C.x,y:gh.y-C.y});break;default:Fm=this.Fm;this.Fm=J.imagePoint;this.h.ee().BZ().lx(aCR);break;}}this.h.dC();}};jY.prototype.jN=function(){function aFL(K){var Hl=K.amu();if(ahr.contains(Hl)&&ahr.contains({x:Hl.x+Hl.width,y:Hl.y+Hl.height})){K.set_selected(true);}};if(this.ac){if(!this.K){var ahr=this.aq.wb();this.h.ee().CN(aFL);this.aq.pq();}this.ak();}};jY.prototype.ox=function(J){var bu=this.h.fa();if(J.windowPoint.x<=0||J.windowPoint.x>=bu.width-2){this.ak();}if(J.windowPoint.y<=0||J.windowPoint.y>=bu.height-2){this.ak();}};jY.prototype.lO=function(){this.ak();};module.exports=jY;},{}],24:[function(require,module,exports){var da=require('./IPCC.Util').regClass;var MA=function(){return this;};MA.registerClass=da;MA.prototype={};MA.registerClass('IPCC.ExceptionEventArgs');module.exports=MA;},{"./IPCC.Util":28}],25:[function(require,module,exports){var et=require('./IPCC.Util').regEnum;var pk=function(){};pk.registerEnum=et;pk.prototype={FitToWidth:0,ShrinkToWidth:1,ActualSize:2,FitToHeight:3,BestFit:4};pk.registerEnum('IPCC.FitType',false);module.exports=pk;},{"./IPCC.Util":28}],26:[function(require,module,exports){var Cx=function(){function Ev(){return Math.floor((Math.random()*10)).toString();};var jn=new Date();return Ev()+Ev()+'_'+jn.getTime()+"_"+Ev()+Ev()+Ev()+Ev();};module.exports=Cx;},{}],27:[function(require,module,exports){var nS=function(){this.ac=false;this.h=false;};nS.prototype.mF=function(h){this.h=h;};nS.prototype.eg=function(){this.h=false;};nS.prototype.ak=function(){if(this.ac){this.ac=false;}};nS.prototype.sS=function(){this.ak();};nS.prototype.kF=function(J){this.ak();if(J.domEvent.button===0){this.ac=true;this.Qu=J.imagePoint;}};nS.prototype.kL=function(J){if(J.domEvent.button!==0){this.ak();}if(this.ac){var h=this.h;var aq=h.aw();var bn=aq.eA();var bu=h.fa();bn.Xu(this.Qu,J.windowPoint);bn.jZ(h.cz(),bu);h.bm('userModifiedViewState',{});aq.ip(bn);h.dC();}};nS.prototype.jN=function(){this.ak();};nS.prototype.ox=function(J){var bu=this.h.fa();if(J.windowPoint.x<=0||J.windowPoint.x>=bu.width-2){this.ak();}if(J.windowPoint.y<=0||J.windowPoint.y>=bu.height-2){this.ak();}};nS.prototype.lO=function(){this.ak();};module.exports=nS;},{}],28:[function(require,module,exports){var T={};T.SU=(function(){var kO={};var xz=[];kO.get=function aHp(qA){if(xz.length===0){return;}for(var i=0;i<qA.length;i++){if(xz[i]&&xz[i].qA===qA){return xz[i].iQ;}}};kO.set=function aEQ(qA,iQ){xz.push({qA:qA,iQ:iQ});if(xz.length>10){xz.shift();}};kO.contains=function hQ(qA){return kO.get(qA)!==undefined;};kO.cacheReponse=function aHE(qA,iQ){if(iQ.readyState===4){kO.set(qA,iQ);}else{var aAL=iQ.onreadystatechange;iQ.onreadystatechange=function(){if(iQ.readyState===XMLHttpRequest.DONE&&iQ.status===200){kO.set(qA,iQ);}aAL();};}};return kO;})();T.Yl=false;T.RN=(function(){var RN=false;var ss=navigator.userAgent,YK=((ss.indexOf('Mozilla/5.0')> -1&&ss.indexOf('Android ')> -1&&ss.indexOf('AppleWebKit')> -1)&& !(ss.indexOf('Chrome')> -1)),adr=new RegExp(/AppleWebKit\/([\d.]+)/),aBM=adr.exec(ss),ajA=(aBM===null?null:parseFloat(adr.exec(ss)[1]));RN=YK&&ajA!==null&&ajA<537;return RN;})();T.azs=(function(){var aej=false;var ss=navigator.userAgent,YK=/Android/i.test(ss),aAN=/iPhone|iPad|iPod/i.test(ss),azB=/IEMobile/i.test(ss);aej=(YK||aAN||azB);return aej;})();T.BK=(function(){var BK=false;if(document.documentMode===8||document.documentMode===9||document.documentMode===10){BK=true;}return BK;})();T.AN=(function(){var aql=navigator.userAgent;if(document.documentMode===10||T.RN){return 'svg';}else if(document.documentMode===9){return 'svga';}else if(/Apple Computer/.test(navigator.vendor||'')&&/Mac OS X.*?Version\/9\..*?Safari/i.test(aql)&& !T.azs){return 'svga';}else{return 'svgb';}})();T.DW=(function(){if(document.documentMode===8){document.namespaces.add('v','urn:schemas-microsoft-com:vml');document.createStyleSheet().addRule("v\\: *","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:roundrect","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:oval","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:roundrect","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:fill","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:line","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:shape","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:polyline","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:stroke","behavior:url(#default#VML); position:absolute");return true;}return false;})();T.DJ=(function(){return window.navigator.pointerEnabled||window.navigator.msPointerEnabled;})();T.HF=T.DJ||(function(){return('ontouchstart'in document.documentElement);})();T.azm=(function(){return(navigator.platform)? ! !navigator.platform.match(/iPad|iPhone|iPod/g):false;})();T.ahh=function(){return T.aEV.btoa((Math.random().toString(36).slice(-4))+'_'+T.wU(new Date())+'_'+(Math.random().toString(36).slice(-6)));};T.inArray=function(cg,db){for(var i=0,l=cg.length;i<l;i++){if(cg[i]===db){return true;}}return false;};T.forEach=function(aE,aT,cC){var pR=[].forEach,ayt=Object.prototype.hasOwnProperty;if(pR&&aE.forEach===pR){aT&&aE.forEach(aT,cC);}else if(aE.length=== +aE.length){for(var i=0,length=aE.length;i<length;i++){aT&&aT.call(cC,aE[i],i,aE);}}else{for(var aS in aE){if(ayt.call(aE,aS)){aT&&aT.call(cC,aE[aS],aS,aE);}}}};T.map=function(cg,aT,cC){var pR=[].map,wl=[];if(pR&&cg.map===pR){wl=cg.map(aT,cC);}else{T.forEach(cg,function(el,i){wl.push(aT.call(cC,el,i,cg));});}return wl;};T.filter=function(cg,aT,cC){var pR=[].filter,wl=[],aeE=false;if(pR&&cg.filter===pR){wl=cg.filter(aT,cC);}else{T.forEach(cg,function(ab,i){aeE=aT.call(cC,ab,i,cg);if(aeE){wl.push(ab);}});}return wl;};T.find=function(obj,cb,context){var hasProp=Object.prototype.hasOwnProperty;cb=(typeof cb==='function')?cb:function(){};if(obj.length=== +obj.length){for(var i=0,length=obj.length;i<length;i++){if(! !cb.call(context,obj[i],i,obj)){return obj[i];}}}else{for(var name in obj){if(hasProp.call(obj,name)){if(! !cb.call(context,obj[name],name,obj)){return obj[name];}}}}return undefined;};T.remove=function(cg,aT,cC){var ZI=[];var apG=T.filter(cg,aT,cC);T.forEach(apG,function(db){var aJ=T.indexOf(cg,db);if(aJ=== -1){return;}ZI=ZI.concat(cg.splice(aJ,1));});return ZI;};T.keys=function(aE){if(Object&&Object.keys){return Object.keys(aE);}else{var mQ=[];for(var H in aE){if(aE.hasOwnProperty&&aE.hasOwnProperty(H)){mQ.push(H);}}return mQ;}};T.indexOf=function(cg,ajN,ano){if(Array.prototype.indexOf){return cg.indexOf(ajN,ano);}var k;if(cg==null){throw new TypeError('"cg" is null or not defined');}var O=Object(cg);var len=O.length>>>0;if(len===0){return-1;}var n= +ano||0;if(Math.abs(n)===Infinity){n=0;}if(n>=len){return-1;}k=Math.max(n>=0?n:len-Math.abs(n),0);while(k<len){if(k in O&&O[k]===ajN){return k;}k++;}return-1;};T.reduce=function(cg,aT,fi,cC){var pR=[].reduce;var Gk=(arguments.length===2)?undefined:fi;if(pR&&typeof pR==='function'&&cg.reduce===pR&&cC===undefined){if(fi!==undefined){return cg.reduce(aT,fi,cC);}return cg.reduce(aT);}IPCC.T.forEach(cg,function(bG,bd){if(Gk===undefined){Gk=bG;return;}Gk=aT.call(cC,Gk,bG,bd,cg);});return Gk;};T.reduceLeft=function(cg,aT,fi,cC){var wl=cg.reverse();return T.reduce.call(undefined,wl,aT,fi,cC);};T.contains=function(cg,bG){var di=cg.length;while(di--){if(cg[di]===bG){return true;}}return false;};T.azi=function(ZL,ahx){if(ZL.length!==ahx.length){return false;}for(var i=0,l=ZL.length;i<l;i++){if(ZL[i]!==ahx[i]){return false;}}return true;};T.extend=function(target){"use strict";var source;if(!target){throw new IPCC.Web.UI.ImGearArgumentException("target","target must be defined.");}else if(typeof target!=='object'){throw new IPCC.Web.UI.ImGearArgumentException("target","typeof target must be 'object'");}else{for(var i=1;i<arguments.length;i++){source=arguments[i];for(var property in source){if(source.hasOwnProperty(property)){target[property]=source[property];}}}}return target;};T.trim=function(dM){if(String.prototype.trim){return dM.trim();}return dM.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,'');};T.getPageFromPoint=function(ba,de,cC){var aGq=function(gb){return gb.left<=ba&&ba<=gb.right&&gb.top<=de&&de<=gb.bottom;};var aFU=function(){return T.filter(cC.querySelectorAll('[id*=__pViewId]:not(.pccPreviousPage):not(.pccNextPage)'),function(jy){return aGq(jy.getBoundingClientRect());});};if(!cC){cC=document;}return aFU(ba,de)[0];};T.regEnum=function(name,flags){for(var i in this.prototype){if(this.prototype.hasOwnProperty(i)){this[i]=this.prototype[i];}}this.__typeName=name;this.__flags=flags;this.__enum=true;};T.regClass=function(typeName,baseType,interfaceTypes){this.prototype.constructor=this;this.__typeName=typeName;this.__class=true;if(baseType){this.__baseType=baseType;for(var Mn in baseType.prototype){if(baseType.prototype.hasOwnProperty(Mn)){var aui=baseType.prototype[Mn];if(!this.prototype[Mn]){this.prototype[Mn]=aui;}}}}return this;};T.aic=function(Wf,QO,aas){if(QO){if(!aas){QO.apply(Wf);}else{QO.apply(Wf,aas);}}return Wf;};T.alz=function alz(vM,aqV,aii){var nA;return function(){var cC=this,cI=arguments;var azl=function(){nA=undefined;if(!aii){vM.apply(cC,cI);}};var aoL=aii&& !nA;clearTimeout(nA);nA=setTimeout(azl,aqV);if(aoL){vM.apply(cC,cI);}};};T.ahH=function ahH(cK,sQ){if(cK.classList){cK.classList.add(sQ);}else{cK.className+=' '+sQ;}};T.akf=function akf(cK,sQ){if(cK.classList){cK.classList.remove(sQ);}else{cK.className=cK.className.replace(sQ,'');}};T.ZR=function(ic){return{width:ic.width||(ic.right-ic.left),height:ic.height||(ic.bottom-ic.top),top:ic.top,bottom:ic.bottom,left:ic.left,right:ic.right};};T.anu=function(alphabet,size){var rs='';for(var H=0;H<size;H++){rs+=alphabet[Math.floor(Math.random()*1000)%alphabet.length];}return rs;};T.auL=function(){var aGg='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';var aAe='AQgw';return T.anu(aGg,21)+T.anu(aAe,1);};T.aiJ=function(){var im={'Accusoft-Gid':T.auL(),'Accusoft-Parent-Name':'ViewerControl','Accusoft-Parent-Pid':0,'Accusoft-Parent-Taskid':0};return im;};T.pN=function(aH){if(aH instanceof T.pN){return aH;}this.im=T.reduce(aH.headers||{},function(pr,bG,aV){aV=aV.toLowerCase();if(pr[aV]){pr[aV]+=', '+bG;}else{pr[aV]=bG;}return pr;},{});this.status=aH.status;this.statusText=aH.statusText;this.responseText=aH.responseText;if(typeof aH.responseBody!=='undefined'){this.responseBody=aH.responseBody;}return this;};T.pN.prototype.getResponseHeader=function(Cg){var aH=this.im[Cg.toLowerCase()];return aH!==undefined?aH:null;};T.ob=(function(){var Ag={};Ag.im={};Ag.Pn=undefined;function adO(ajg){if(!ajg){return{};}return ajg.split('\r\n').reduce(function(LW,mA){var aJ=mA.indexOf(': ');if(aJ>0){var aV=mA.slice(0,aJ);var R=mA.slice(aJ+2);if(LW[aV]){R=LW[aV]+', '+R;}LW[aV]=R;}return LW;},{});};Ag.eB=function(awr){var Co={method:'GET',url:null,headers:{},body:null,timeout:null,mimeType:null,cache:false},kl=PCCViewer.Deferred(),dk=kl.getPromise(),sT;var aX=T.extend({},Co,awr);aX.headers=T.extend({},Ag.im,aX.headers);if(typeof Ag.Pn==='function'){sT=Ag.Pn(aX);if(typeof sT==='object'&&typeof sT.then==='function'){sT.then(function(am){kl.resolve(am);},function(am){kl.reject(am);});return dk;}}if(aX.cache&&T.SU.contains(aX.url)){var iQ=T.SU.get(aX.url);var aH,uy={};uy={status:iQ.status,headers:adO(iQ.getAllResponseHeaders())};try{uy.responseText=iQ.responseText;}catch(e){}if(typeof iQ.responseBody!=='undefined'){uy.responseBody=iQ.responseBody;}aH=new T.pN(uy);if(iQ.status>=200&&iQ.status<300||status===304){kl.resolve(aH);}else{kl.reject({response:aH,error:new PCCViewer.Error("Error","An AJAX problem occurred: "+iQ.status+" "+iQ.statusText)});}return dk;}var je,nA;try{je=new XMLHttpRequest();}catch(e){kl.reject(new PCCViewer.Error("Error",e.message));}if(je){je.open(aX.method,aX.url,true);if(aX.timeout){nA=window.setTimeout(function(){je.abort();kl.reject({error:new PCCViewer.Error("Error","Request timed out")});},aX.timeout);}je.onreadystatechange=function(){var aH,uy={};if(je.readyState===4){if(nA){window.clearTimeout(nA);}uy={status:je.status,headers:adO(je.getAllResponseHeaders())};try{uy.responseText=je.responseText;}catch(e){}if(typeof je.responseBody!=='undefined'){uy.responseBody=je.responseBody;}aH=new T.pN(uy);if(je.status>=200&&je.status<300||status===304){kl.resolve(aH);}else{kl.reject({response:aH,error:new PCCViewer.Error("Error","An AJAX problem occurred: "+je.status+" "+je.statusText)});}}};var abI=T.extend({},aX.headers,T.aiJ());for(var aV in abI){if(abI.hasOwnProperty(aV)){je.setRequestHeader(aV,abI[aV]);}}if(typeof aX.mimeType==='string'&&typeof je.overrideMimeType==='function'){je.overrideMimeType(aX.mimeType);}if(aX.cache){T.SU.cacheReponse(aX.url,je);}je.send(aX.body);}return dk;};return Ag;})();T.XY=function(gm,lX,eg){var gZ=[],rN=null,uM=null,ag;var azc=function(uM,rN){if(!rN){return false;}else{return Math.abs(uM.y-rN.y)<1&&Math.abs(uM.height-rN.height)<1&&uM.x+uM.width>=rN.x+rN.width;}};for(ag=lX;ag<eg+1;ag++){uM=gm.kn(ag).bC;if(azc(uM,rN)){rN.union(uM);}else{rN=uM.clone();gZ.push(rN);}}return gZ;};T.addEvent=function addEvent(obj,event,handler){if(obj.addEventListener){obj.addEventListener(event,handler,false);}else if(obj.attachEvent){obj.attachEvent('on'+event,handler);}};T.removeEvent=function(obj,event,handler){if(obj.removeEventListener){obj.removeEventListener(event,handler,false);}else if(obj.detachEvent){obj.detachEvent('on'+event,handler);}};T.bspline=(function(){var d3_svg_lineBasisBezier1=[0,2/3,1/3,0],d3_svg_lineBasisBezier2=[0,1/3,2/3,0],d3_svg_lineBasisBezier3=[0,1/6,2/3,1/6];function d3_svg_lineLinear(points){return points.join("L");};function d3_svg_lineDot4(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];};function d3_svg_lineBasisBezier(path,x,y){path.push("C",d3_svg_lineDot4(d3_svg_lineBasisBezier1,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier1,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,y));};function d3_svg_lineBasis(points){if(points.length<3){return d3_svg_lineLinear(points);}var i=1,n=points.length,pi=points[0],x0=pi[0],y0=pi[1],px=[x0,x0,x0,(pi=points[1])[0]],py=[y0,y0,y0,pi[1]],path=[x0,",",y0,"L",d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)];points.push(points[n-1]);while(++i<=n){pi=points[i];px.shift();px.push(pi[0]);py.shift();py.push(pi[1]);d3_svg_lineBasisBezier(path,px,py);}points.pop();path.push("L",pi);return path.join("");};return function(aW){var atS=T.map(aW,function(ab){return[ab.x,ab.y];});return d3_svg_lineBasis(atS);};})();T.aKu=function(dM){if(dM.match(/[^a-zA-Z0-9\s\,\.]/)){throw new Error('The path data attribute is not valid. It cannot be parsed.');}var ayZ=T.filter(dM.replace(/[Mm]/g,'|').split('|'),function(g){return! !g.length;});var avf=T.map(ayZ,function(el){var aqT=el.replace(/[a-zA-Z]/g,'|').split('|');return T.map(aqT,function(gX){var alX=gX.split(',');return{x: +alX[0],y: +alX[1]};});});return avf;};T.aij=function(dM,jg,kR,kr,aX){aX.cs="12px";var hL=T.uJ(dM,jg,aX),vZ=12*kR/(hL.width||1),wX=12*kr/(hL.height||1),asM=Math.min(vZ,wX);aX.cs=asM;return T.aiB(dM,jg,kR,kr,aX);};T.aiB=function(dM,jg,kR,kr,aX,Ps){Ps=Ps||1;var lF={},hL=T.uJ(dM,jg,aX),cs=aX.cs;lF.width=hL.width;lF.height=hL.height;lF.fontSize=cs;if(Ps>3){return lF;}if((hL.width<kR+1)&&(hL.height<kr+1)){return lF;}else{var vZ=cs*kR/(hL.width||1),wX=cs*kr/(hL.height||1),vp=Math.min(vZ,wX);if(vp>=aX.cs){return lF;}else{aX.cs=vp;return T.aiB(dM,jg,kR,kr,aX,Ps+1);}}};T.uJ=function(dM,jg,aX){aX=aX||{};if(document.createElementNS){return T.axy(dM,jg,aX);}else{return T.aiG(dM,jg,aX);}};T.axy=function(dM,jg,aX){var svg,alJ=false;if(aX.fH){svg=aX.fH;}else{svg=document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttribute('style','border: 1px solid black');svg.setAttribute('width','600');svg.setAttribute('height','600');alJ=true;document.body.appendChild(svg);}var cs=aX.cs||"12px";if(typeof cs==="number"){cs=cs+"px";}var dc=document.createElementNS("http://www.w3.org/2000/svg","text");T.forEach({x:0,y:0,'font-size':cs,'stroke':"none",'fill':"#000000",'font-family':jg},function(value,name){dc.setAttribute(name,value);});if(aX.uw){dc.setAttribute('style','white-space:'+aX.uw);}var mT=document.createTextNode(dM);dc.appendChild(mT);svg.appendChild(dc);var uT=dc.getBBox(),Ks=uT.width,Kk=uT.height;svg.removeChild(dc);if(alJ){document.body.removeChild(svg);}if(Ks===0&&Kk===0&&dM!=="M"){return T.uJ("M",jg,aX);}else{return{width:Ks,height:Kk};}};T.aiG=function(dM,jg,aX){var mT=document.createTextNode(dM),DU=document.createElement('div');var cs=aX.cs||"12px";if(typeof cs==="number"){cs=cs+"px";}T.forEach({position:'absolute',display:'inline-block',top:0,left:0,visibility:'hidden',fontSize:cs,fontFamily:jg},function(value,name){DU.style[name]=value;});if(aX.uw){DU.style.whiteSpace=aX.uw;}DU.appendChild(mT);document.body.appendChild(DU);var uT=DU.getBoundingClientRect(),Ks=uT.width||uT.right-uT.left,Kk=uT.height||uT.bottom-uT.top;document.body.removeChild(DU);if(Ks===0&&Kk===0&&dM!=="M"){return T.aiG("M",jg,cs);}else{return{width:Ks,height:Kk};}};T.abM=function(svgPath){var regexp=/[\s,]*(M)[\s,]*([\d\.]+)[\s,]+([\d\.]+)|[\s,]*(C)[\s,]?([\d\.]+)[\s,]+([\d\.]+)[\s,]+([\d\.]+)[\s,]+([\d\.]+)[\s,]+([\d\.]+)[\s,]+([\d\.]+)|[\s,]*(L)[\s,]*([\d\.]+)[\s,]+([\d\.]+)/g;var match=regexp.exec(svgPath);var xArr=[],yArr=[];function updateBounds(x,y){xArr.push(Number(x));yArr.push(Number(y));};while(match!==null){if(match[1]){updateBounds(match[2],match[3]);}else if(match[4]){updateBounds(match[5],match[6]);updateBounds(match[7],match[8]);updateBounds(match[9],match[10]);}else if(match[11]){updateBounds(match[12],match[13]);}match=regexp.exec(svgPath);}return{width:Math.max.apply(Math,xArr),height:Math.max.apply(Math,yArr)};};T.AF={SVG:function SVG(aoK){var fH=document.createElementNS("http://www.w3.org/2000/svg","svg");fH.setAttribute('viewBox',aoK);return fH;},Path:function Path(vN,la){var hb=document.createElementNS("http://www.w3.org/2000/svg","path");hb.style.fill='none';hb.style.stroke=la.color||'#000000';hb.style.strokeWidth=la.thickness||4;if(vN){hb.setAttribute('d',vN.toString().trim());}return hb;},Rect:function Rect(aF,bj,fD){var aQ=document.createElementNS("http://www.w3.org/2000/svg","rect");aQ.setAttribute('width',aF||0);aQ.setAttribute('height',bj||0);if(fD){aQ.setAttribute('style',fD);}return aQ;}};T.Hb=function Hb(lg){var regexIso8601=/^(\d{4}|\+\d{6})(?:-(\d{2})(?:-(\d{2})(?:T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,3}))?(?:Z|([\-+])(\d{2}):(\d{2}))?)?)?)?$/;var m=regexIso8601.exec(lg);if(m){return Date.UTC(m[1],(m[2]||1)-1,m[3]||1,m[4]-(m[8]?m[8]+m[9]:0)||0,m[5]-(m[8]?m[8]+m[10]:0)||0,m[6]||0,((m[7]||0)+'00').substr(0,3));}else{return new Error(lg+' cannot be parsed as an ISO 8601 date.');}};T.wU=function aKg(jn){if(jn.toISOString&&typeof jn.toISOString==='function'){return jn.toISOString();}else{return new Error(jn+' is not a Date object.');}};T.uh=function uh(o){return(!o?false:typeof Node==="object"?o instanceof Node:o&&typeof o==="object"&&typeof o.nodeType==="number"&&typeof o.nodeName==="string");};T.CJ=function CJ(o){if(T.uh(o)){while(o.firstChild){o.removeChild(o.firstChild);}}};T.UO=function sync(funcs,done){var counter=funcs.length;var idx=0;var next=function(err){if(err){done(err);}else if(--counter===0){done();}else{setTimeout(function(){funcs[idx++](next);},0);}};funcs[idx++](next);};T.ahL=function(bG){bG=String(bG).replace(/[^0-9a-f]/gi,"");if(bG.length<6){bG=bG[0]+bG[0]+bG[1]+bG[1]+bG[2]+bG[2];}var QH=function(dM){return parseInt(dM,16);};var r=QH(bG.substring(0,2));var g=QH(bG.substring(2,4));var b=QH(bG.substring(4,6));return{r:r,g:g,b:b};};T.aEG=function(bG){var RQ="";var Ph=function(n){while(n.length<2){n='0'+n;}return n;};var Tq=function(n){return Ph(n.toString(16));};RQ+=Tq(Math.floor(bG.r));RQ+=Tq(Math.floor(bG.g));RQ+=Tq(Math.floor(bG.b));return '#'+RQ;};T.asz=function(aBz,aqj,aCJ){var DO=aCJ,Wo=T.ahL(aBz),oa=T.ahL(aqj);oa.r=(1-DO)*oa.r+(Wo.r*DO);oa.g=(1-DO)*oa.g+(Wo.g*DO);oa.b=(1-DO)*oa.b+(Wo.b*DO);oa.r=Math.floor(oa.r);oa.g=Math.floor(oa.g);oa.b=Math.floor(oa.b);return T.aEG(oa);};T.agI=function(anQ,tC){var avV=T.reduceLeft(anQ,function(fi,dI){if(dI.opacity===undefined){dI.opacity=127;}var avk=dI.opacity/255;return T.asz(dI.color,fi,avk);},tC);return avV;};T.adH=function(hy){if(hy.length===0){return hy;}var fM=hy.slice(0);fM.sort(function(a,b){return a.startIndex-b.startIndex;});var TM=null;var kN=[];var ZV=0,LP=[];var H=fM[0].startIndex;while(fM.length>0){ZV=0;LP=null;LP=[];var ag=0;while(ag<fM.length&&fM[ag].startIndex<=H){if(H<=fM[ag].startIndex+fM[ag].length-1){ZV++;LP.push(fM[ag]);ag++;}else{fM.splice(ag,1);}}if(ZV>0){var Bl=T.agI(LP,'#ffffff');if(Bl===TM){kN[kN.length-1].endIndex=H;}else{kN.push({startIndex:H,endIndex:H,color:Bl});}TM=Bl;H++;}else{if(fM.length>0){H=fM[0].startIndex;}TM=null;}}return kN;};T.Iq=function(YU){return YU.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");};T.aeu=function(bE){var blackListPattern=/^\s*(file|data|javascript|[a-z]):.*$/i;return blackListPattern.test(bE);};T.Ph=function(iW,di){var dM=""+iW;while(dM.length<di){dM='0'+dM;}return dM;};T.aHd=function(fq){var fX=fq.getTimezoneOffset();fX=((fX<0?'+':'-')+T.Ph(parseInt(Math.abs(fX/60),10),2)+T.Ph(Math.abs(fX%60),2));return fX;};T.agT=['Sun','Mon','Tue','Wed','Thurs','Fri','Sat'];T.TP=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];T.aeF=function(XI){var aBq=/^\s*\w+\s+(\w+)\s+(\d+)\s+(\d+):(\d+):(\d+)\s+GMT[+-]?\d+\s+(\d+)\s*$/i,am=aBq.exec(XI),alG,BU,agQ,ait,ann,yO,agV;if(!am){return null;}else{alG=am[1].toLowerCase();agQ=am[2];ait=am[3];ann=am[4];yO=am[5];agV=am[6];for(BU=0;BU<12;BU++){if(T.TP[BU].toLowerCase()===alG){break;}}if(BU>=12){return null;}return new Date(Date.UTC(agV,BU,agQ,ait,ann,yO));}};T.aip=function(fq){return(T.agT[fq.getUTCDay()]+" "+T.TP[fq.getUTCMonth()]+" "+fq.getUTCDate()+" "+fq.getUTCHours()+':'+fq.getUTCMinutes()+':'+fq.getUTCSeconds()+" "+"GMT+0000 "+fq.getUTCFullYear());};T.ayR=function(fq){return(T.agT[fq.getUTCDay()]+" "+T.TP[fq.getUTCMonth()]+" "+fq.getUTCDate()+" "+fq.getUTCFullYear());};T.ayi=function(fq){return(fq.getUTCHours()+':'+fq.getUTCMinutes()+':'+fq.getUTCSeconds()+" "+"GMT+0000");};T.ri=function(text){return text.replace(/[&<>\"\']/g,function(char){switch(char){case "&":return "&amp;";case "<":return "&lt;";case ">":return "&gt;";case "\"":return "&quot;";case "'":return "&apos;";default:throw new Error("Did not find a replacement character.");}});};T.yV=function(text){return text.replace(/&amp;/g,'&').replace(/&gt;/g,'>').replace(/&lt;/g,'<').replace(/&quot;/g,'"').replace(/&apos;/g,'\'');};T.aEV=(function(chars){chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';function InvalidCharacterError(message){this.message=message;};InvalidCharacterError.prototype=new Error;InvalidCharacterError.prototype.name='InvalidCharacterError';function btoa(input){var str=String(input);for(var block,charCode,idx=0,map=chars,output='';str.charAt(idx|0)||(map='=',idx%1);output+=map.charAt(63&block>>8-idx%1*8)){charCode=str.charCodeAt(idx+=3/4);if(charCode>0xFF){throw new InvalidCharacterError("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");}block=block<<8|charCode;}return output;};function atob(input){var str=String(input).replace(/=+$/,'');if(str.length%4==1){throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.");}for(var bc=0,bs,buffer,idx=0,output='';buffer=str.charAt(idx++);~buffer&&(bs=bc%4?bs*64+buffer:buffer,bc++ %4)?output+=String.fromCharCode(255&bs>>(-2*bc&6)):0){buffer=chars.indexOf(buffer);}return output;};return{btoa:btoa,atob:atob};})();T.nz=(function(){var nz=['down','enter','leave','move','out','over','up'];if(window.navigator.pointerEnabled){var adM={};nz.forEach(function(ada){adM[ada]='pointer'+ada;});return adM;}if(window.navigator.msPointerEnabled){var amL={};for(var H=0;H<nz.length;H++){var VR=nz[H];var atF='MSPointer'+VR.charAt(0).toUpperCase()+VR.slice(1);amL[VR]=atF;}return amL;}return{};})();T.uG=(function(){return{Ar: ! !navigator.userAgent.match('Edge'),aHX:document.documentMode!==undefined,aGO:document.documentMode===8,aGY:document.documentMode===9,aIB:document.documentMode===10,aGX:document.documentMode===11,azK:(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)),aDh:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)};})();T.PA=(function(nD){if(!nD|| !IPCC.T.trim(nD)){return 'regular';}return IPCC.T.trim(nD).toLowerCase();});T.aHP=function(arg,value){return typeof arg!=='undefined'?arg:value;};T.MW=function(value){return Number(value.replace(/[a-z]+$/,''));};T.OT=function(elem,propertyName){if(elem.currentStyle){return elem.currentStyle[propertyName];}else{return window.getComputedStyle(elem,null).getPropertyValue(propertyName);}};T.aiU=function(){if(this.qX===undefined){this.qX=document.createTextNode('');}return this.qX;};T.agB=function(){if(this.dN===undefined){this.dN=document.createElement('textarea');this.qX=document.createTextNode('');this.dN.appendChild(T.qX);this.dN.style.position='absolute';this.dN.style.overflow='hidden';this.dN.style.width='80px';this.dN.style.height='80px';this.dN.style.resize='none';this.dN.style.top='-9999px';this.dN.style.left='-9999px';this.dN.style.whiteSpace='pre-wrap';this.dN.style.border=0;this.dN.style.padding='2px';document.body.appendChild(this.dN);}return this.dN;};T.US=function(dN,eV,as){var abw=0.1;var Hd;var aaA=as;while(abw<=aaA){Hd=(abw+aaA)/2;dN.style.fontSize=Hd+'px';if(dN.scrollHeight<=dN.offsetHeight){abw=Hd+0.1;}else{aaA=Hd-0.1;}}var ajV=(Hd-0.5)*0.95;var cs=eV>0?Math.min(ajV,eV):ajV;dN.style.fontSize=cs+'px';return cs;};T.Sj=function(vM,qs,TS,sT){if(vM(qs,TS)!==TS){return typeof(sT)==='number'?sT:TS;}return qs;};T.Qe=function(qs,auN,sT){return T.Sj(Math.min,qs,auN,sT);};T.Lt=function(qs,atp,sT){return T.Sj(Math.max,qs,atp,sT);};T.aqH=(function(){var FY;return function(apN,jO,aAx){if(FY!==undefined&& !aAx){setTimeout(jO.bind(null,FY),0);return;}arZ(apN,function(rs){FY=rs;jO(rs);});};function arZ(Py,jO){var jg='jctqxvjmncyjagibfltptfzhknc';var jC='@font-face {font-family:'+jg+';src:url(data:application/x-font-woff;charset=utf-8;base64,d09GRk9UVE8AAAQoAAkAAAAAA+QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAAC+AAAARkAAAEZ9R5YPk9TLzIAAAFEAAAAYAAAAGBKDUcOY21hcAAAAqwAAAAsAAAALAAMAFZoZWFkAAAA4AAAADYAAAA2+UdJt2hoZWEAAAEYAAAAJAAAACQIOgMbaG10eAAABBQAAAAUAAAAFAhtAW5tYXhwAAABPAAAAAYAAAAGAAVQAG5hbWUAAAGkAAABBQAAAQVCmPyecG9zdAAAAtgAAAAgAAAAIAADAAAAAQAAAAEAAM9NZw1fDzz1AAAD6AAAAADLUgMfAAAAAMtSAx8Ac//5AxwCmwAAAAgAAgAAAAAAAAABAAACm//5Ag4DHABzAAADHAABAAAAAAAAAAAAAAAAAAAABQAAUAAABQAAAAQCzwGQAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEFDQ1UAQAAfACMCm//5AkACmwAHAAAAAQAAAAAAAAAAAAAAIAAAAAAABgBOAAEAAAAAAAEAGwAAAAEAAAAAAAIABwBRAAEAAAAAAAYAGwBmAAMAAQQJAAEANgAbAAMAAQQJAAIADgBYAAMAAQQJAAYANgCBamN0cXh2am1uY3lqYWdpYmZsdHB0Znpoa25jAGoAYwB0AHEAeAB2AGoAbQBuAGMAeQBqAGEAZwBpAGIAZgBsAHQAcAB0AGYAegBoAGsAbgBjUmVndWxhcgBSAGUAZwB1AGwAYQByamN0cXh2am1uY3lqYWdpYmZsdHB0Znpoa25jAGoAYwB0AHEAeAB2AGoAbQBuAGMAeQBqAGEAZwBpAGIAZgBsAHQAcAB0AGYAegBoAGsAbgBjAAAAAAAAAQADAAEAAAAMAAQAIAAAAAQABAABAAAAI///AAAAIP///+EAAQAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEABAQAAQEBHGpjdHF4dmptbmN5amFnaWJmbHRwdGZ6aGtuYwABAQEq+Bv4HIsMHvgdAvgdA/cHhPmw+S8FiwwfkAwi95sMJPc5DCX3NA/3QREABAEBBg8qRUFkb2JlSWRlbnRpdHkwamN0cXh2am1uY3lqYWdpYmZsdHB0Znpoa25jamN0cXh2am1uY3lqYWdpYmZsdHB0Znpoa25jAAACAAEAAwMAAQAAAAAFAAUBAQIDFDNSDg7Q9xX5JxX5J4uL/Sf9J4sFDtj3LvkOFYv89fj1i4v49QWs/RUV/TaLi/k2+TaLBQ77JvcHixWL+NH4XouL/NEF/FCZFfhCi4v4tfxCiwUOAAEBAQn4HgwmkPeoEosU+WMVAAAAAAAAAAAAAAADFACBAxwAegI9AHM=)}';var fD;var oq;var ahg;var aeR,afu;aDP();asf(function(rs){aqI();jO(rs);});function aDP(){fD=document.createElement('style');fD.innerText=jC;Py.appendChild(fD);oq=document.createElement('div');oq.style.cssText='position: absolute;width: 100%;top:-9999px;left: -9999px;visibility: hidden;pointer-events: none;';aeR=aeG(oq,'monospace');afu=aeG(oq,'arial');Py.appendChild(oq);};function aqI(){clearInterval(ahg);Py.removeChild(oq);Py.removeChild(fD);};function asf(aT){var aqr=Date.now();var nA=500;var azt=25;ahg=setInterval(function(){var ali=aeR.offsetWidth===afu.offsetWidth;if(ali||Date.now()-aqr>nA){aT(ali);}},azt);};function aeG(oq,jC){var apO='!!';var aek=document.createElement('div');var GZ=document.createElement('span');GZ.style.cssText='font-size: 30px; font-weight: normal; font-style: normal; letter-spacing: 0px; white-space: nowrap;';GZ.innerText=apO;GZ.style.fontFamily=jg+', '+jC;aek.appendChild(GZ);oq.appendChild(aek);return GZ;}}})();T.apU=function(hd,vk,mP){var vw=document.createElement('div');if(!IPCC.T.uG.aDh){hd=hd.replace(/href="#/g,'href="#'+mP);hd=hd.replace(/url\("?#(.+?)"?\)/g,'url(#'+mP+'$1)');hd=hd.replace(/ id="/g,' id="'+mP);vw.innerHTML=hd;return vw;}vw.innerHTML=hd;var ayp=vw.querySelectorAll('[id]');var ayA=vw.querySelectorAll("*");var atj=vk.replace(/"/g,'\\$&');var azk=['href','xlink:href'];var apt=['fill','filter','clip-path','mask','marker-start','marker-mid','marker-end'];IPCC.T.forEach(ayp,function(ab){ab.id=mP+ab.id;});IPCC.T.forEach(ayA,function(ab){IPCC.T.forEach(azk,function(qM){if(ab.hasAttribute(qM)&&ab.getAttribute(qM).indexOf('#')===0){ab.setAttribute(qM,ab.getAttribute(qM).replace('#',vk+'#'+mP));}});IPCC.T.forEach(apt,function(qM){if(ab.hasAttribute(qM)&&ab.getAttribute(qM).match(/^url\("?#/)){ab.setAttribute(qM,ab.getAttribute(qM).replace(/^url\("?#(.+?)\"?\)$/,'url("'+vk+'#'+mP+'$1")'));}});if(ab.hasAttribute('style')){var EO=ab.style.cssText;EO=EO.replace(/url\("?#(.+?)"?\)/g,'url("'+atj+'#'+mP+'$1")');ab.style.cssText=EO;}});return vw;};module.exports=T;},{}],29:[function(require,module,exports){var Bu=require('./Type');Bu.registerNamespace('IPCC');module.exports={Pagecounter:1,gH:true,aeW:null,initializePageViewPlugin:require('./initializePageViewPlugin'),initializePageListPlugin:require('./initializePageListPlugin'),rc:require('./predefinedContextMenu'),YQ:require('./indexOf'),Oz:require('./setProperties'),bi:require('./PageItem'),Cx:require('./GetUniqueID'),YD:require('./ViewerState'),uq:require('./Configuration'),bF:require('./Cursor'),kM:require('./Res'),aA:require('./Validate'),iA:require('./Debug'),dW:require('./MenuCommand'),PageLayout:require('./PageLayout'),ViewMode:require('./ViewMode'),FitType:require('./FitType'),ScaleTrigger:require('./ScaleTrigger'),PageEventArgs:require('./PageEventArgs'),ExceptionEventArgs:require('./ExceptionEventArgs'),OpenPageEventArgs:require('./OpenPageEventArgs'),PageList:require('./PageList'),Web:require('./Web/Web'),Type:Bu,T:require('./IPCC.Util'),cJ:require('./Art'),lv:require('./SelectTextController'),eE:require('./Matrix'),Wl:require('./ViewerModel'),fo:require('./ContextMenuController'),ea:require('./SvgUIDirector'),pV:require('./PropertyChangedEventArgs'),zK:require('./StringBuilder'),cW:require('./MultiTouchController'),ru:require('./ImagePyramid'),cv:require('./SingleTouchController'),jT:require('./AddPolyMarkController'),nP:require('./SelectController'),fj:require('./AddRectangularMarkController'),mR:require('./AddFreehandMarkController'),lC:require('./AddLineMarkController'),cn:require('./MouseWheelController'),nS:require('./HandPanController'),nq:require('./RectangleZoomController'),qK:require('./MagnifierController'),jY:require('./EditMarksController'),zR:require('./RunMarksController'),FE:require('./Space'),hn:require('./Image'),Ra:require('./ImagePool'),DA:require('./PyramidLevel'),vm:require('./PyramidTile'),};},{"./AddFreehandMarkController":12,"./AddLineMarkController":13,"./AddPolyMarkController":14,"./AddRectangularMarkController":15,"./Art":16,"./Configuration":19,"./ContextMenuController":20,"./Cursor":21,"./Debug":22,"./EditMarksController":23,"./ExceptionEventArgs":24,"./FitType":25,"./GetUniqueID":26,"./HandPanController":27,"./IPCC.Util":28,"./Image":30,"./ImagePool":31,"./ImagePyramid":32,"./MagnifierController":33,"./Matrix":34,"./MenuCommand":35,"./MouseWheelController":36,"./MultiTouchController":37,"./OpenPageEventArgs":38,"./PageEventArgs":39,"./PageItem":40,"./PageLayout":41,"./PageList":42,"./PropertyChangedEventArgs":43,"./PyramidLevel":44,"./PyramidTile":45,"./RectangleZoomController":46,"./Res":47,"./RunMarksController":48,"./ScaleTrigger":49,"./SelectController":50,"./SelectTextController":51,"./SingleTouchController":52,"./Space":53,"./StringBuilder":54,"./SvgUIDirector":55,"./Type":56,"./Validate":57,"./ViewMode":58,"./ViewerModel":59,"./ViewerState":60,"./Web/Web":124,"./indexOf":125,"./initializePageListPlugin":126,"./initializePageViewPlugin":127,"./predefinedContextMenu":128,"./setProperties":129}],30:[function(require,module,exports){var hn=function(kh,bx,aF,bj,gV,gx){IPCC.FE.call(this,0,0,0,0);this.width=aF;this.height=bj;this.gV=gV;this.gx=gx;this.bx=bx||0;this.fC=0;this.qx=true;this.awE={};this.xA=false;var V=this;this.bx=bx;this.get_url=function(hI,dS,aG){dS=dS||'Image';aG=aG||'';var Eb=hn.IY(kh);var De=false;if(/^[\x00-\x7F]*$/.test(Eb)){De=true;}if(aG===null||aG===''){if(dS==='Attributes'){var tL='';if(!IPCC.uq.Jq()){tL='&ContentType=png';}if(!De){return hI+'/Page/q/'+bx.toString()+'/'+dS+'?DocumentID=e'+kh+tL;}else{return hI+'/Page/q/'+bx.toString()+'/'+dS+'?DocumentID=u'+encodeURIComponent(Eb)+tL;}}else{if(dS==='SvgImage'){if(!De){return hI+'/Page/q/'+bx.toString()+'?DocumentID=e'+kh+'&'+aG;}else{return hI+'/Page/q/'+bx.toString()+'?DocumentID=u'+encodeURIComponent(Eb)+'&'+aG;}}if(!De){return hI+'/Page/q/'+bx.toString()+'/'+dS+'?DocumentID=e'+kh+'&'+aG;}else{return hI+'/Page/q/'+bx.toString()+'/'+dS+'?DocumentID=u'+encodeURIComponent(Eb)+'&'+aG;}}}else{if(dS==='SvgImage'){if(!De){return hI+'/Page/q/'+bx.toString()+'?DocumentID=e'+kh+'&'+aG;}else{return hI+'/Page/q/'+bx.toString()+'?DocumentID=u'+encodeURIComponent(Eb)+'&'+aG;}}if(!De){return hI+'/Page/q/'+bx.toString()+'/'+dS+'?DocumentID=e'+kh+'&'+aG;}else{return hI+'/Page/q/'+bx.toString()+'/'+dS+'?DocumentID=u'+encodeURIComponent(Eb)+'&'+aG;}}};this.get_urlArt=function(hI,dS,aG){dS=dS||'Art';aG=aG||'';if(aG===null||aG===''){if(dS==='Art'){return hI+'/Page/q/'+bx.toString()+'/'+dS+'?DocumentID=e'+kh;}}else{return hI+'/Page/q/'+bx.toString()+'/'+dS+'?DocumentID=e'+kh+'&'+aG;}};this.get_identifier=function(){return IPCC.hn.IY(kh);};this.get_encodedIdentifier=function(){return kh;};this.toString=function(){return 'Image("'+kh+'", '+this.bx+', '+this.width+' x '+this.height+', '+this.gV+', '+this.gx+')';};function amD(arC,h){if(h.aaE()){V.qx=true;V.xA=false;return;}var YP=arC.split(',');var mk=false;for(var aa=0;aa<YP.length;aa++){if(YP[aa]==="SVG"||YP[aa]==="svg"){if(IPCC.uq.Jq()){V.xA=true;V.qx=false;}else{V.xA=false;}mk=true;break;}}if(!mk){V.xA=false;V.qx=true;}if(h){if(h.Rn){h.Rn(V.xA);}}};this.Ub=function(hI,h,zy){h.bx=this.bx;var mq=0;var mV=h.CC();if(mV){if(document.documentMode<9){mV=false;}}var sV=true;if(h.kE()===0){sV=false;}var ro=function(ed,aH){try{if(ed===null){throw new IPCC.Web.UI.ImGearArgumentException(null,'Unable to load the specified image. Failed to obtain Image attributes. Returned JSON from the server is null');}if(ed.errorCode){if(ed.errorCode==='SvgNotAvailable'){mV=false;V.width= +(ed.pageAttributes.imageWidth);V.height= +(ed.pageAttributes.imageHeight);V.gV= +(ed.pageAttributes.imageXResolution);if(V.gV<=0){V.gV=72;}V.gx= +(ed.pageAttributes.imageYResolution);if(V.gx<=0){V.gx=72;}V.fC= +(ed.pageAttributes.pageCount);V.qx=ed.pageAttributes.isRaster!=='false';amD(ed.pageAttributes.contentType,h);}}else{V.width= +(ed.imageWidth);V.height= +(ed.imageHeight);V.gV= +(ed.imageXResolution);if(V.gV<=0){V.gV=72;}V.gx= +(ed.imageYResolution);if(V.gx<=0){V.gx=72;}V.fC= +(ed.pageCount);V.qx=ed.isRaster!=='false';amD(ed.contentType,h);}var nJ=aH.getResponseHeader("Accusoft-Data-Encrypted");var Jv=false;if(nJ==="true"){Jv=true;}h.aiL(Jv);if(zy){zy();}}catch(e){h.af('openPage',e);if(typeof(h.bm)==='function'){var ca=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();ca.exception=e;ca.pageNumber=h.bx;h.bm('pageOpenFailed',ca);}}};function OK(){mV=false;if(mq<1){var gK={method:'GET',url:V.get_url(hI,'Attributes'),headers:{'Content-Type':'application/json'}};if(sV===true){gK.timeout=h.kE();}IPCC.T.ob.eB(gK).then(fz,fg);mq++;}};var aFM=function(hd,aH){var aF;var bj;function asn(){var TK;try{TK=JSON.parse(hd);}catch(aY){TK=undefined;mV=true;}return TK;};try{aF=hd.match(/width=\"([0-9.]+)\"/);bj=hd.match(/height=\"([0-9.]+)\"/);if(aF&&bj){aF=Number(aF[1]);bj=Number(bj[1]);}else{throw "error";}if(isNaN(aF)||isNaN(bj)){throw "error";}V.width=aF;V.height=bj;V.gV=72;V.gx=72;V.xA=true;V.qx=false;if(h){if(typeof(h.Rn==='function')){h.Rn(V.xA);}}if(zy){zy();}}catch(e){var am=asn();if(am){ro(am,aH);return;}if(mV){if(mq<1){mV=false;setTimeout(OK,10);return;}}h.af('openPage',e);if(typeof(h.bm)==='function'){var ca=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();ca.exception=e;ca.pageNumber=h.bx;h.bm('pageOpenFailed',ca);}}};function fz(aH){var am=null,cN;try{if(!mV){am=JSON.parse(aH.responseText);ro(am,aH);}else{var lN;var nJ=aH.getResponseHeader("Accusoft-Data-Encrypted");if(nJ==='true'&&h.jt()===true){var tm=IPCC.Web.hs.sP.tP(aH.getResponseHeader("Accusoft-Data-SK"));var aV=IPCC.Web.IV(tm,ij);var fu=IPCC.Web.Hw(aH);var uc=IPCC.Web.CS(fu,aV,ij);lN=IPCC.Web.hs.Gu.oP(uc);}else{lN=aH.responseText;}var aak;if(lN.length>=1000){aak=lN.substring(0,1000);}else{aak=lN.substring(0,lN.length);}aFM(aak,aH);}}catch(ex){if(mV){mV=false;if(mq<1){setTimeout(OK,10);return;}}cN="Attributes parsing error, Error message = "+ex.message;throw new IPCC.Web.UI.ImGearArgumentException(null,cN);}};function fg(am){try{var cN,lZ,mW;if(!am.response){throw new IPCC.Web.UI.ImGearHttpException(am.response.status,"Client timed out on load");}if(am.response.status===403){mq++;if(am.response.statusText&&am.response.statusText!==""){cN="Expired viewer session ID, error message from the server: "+am.response.statusText;}else{cN="Expired viewer session ID. Np error text message was received from the server:";}throw new IPCC.Web.UI.ImGearHttpException(am.response.status,cN);}if(mV){mV=false;if(mq<1){setTimeout(OK,10);return;}}mW=am.response.getResponseHeader('Accusoft-Status-Message');if(mW){var sI;lZ=am.response.getResponseHeader('Accusoft-Status-Number');if(IPCC.Web.xS(lZ)){sI=parseInt(lZ,10);}throw new IPCC.Web.UI.ImGearHttpException(am.response.status,mW,sI);}else{if(am.response.statusText&&am.response.statusText!==""){cN="Error message from the service: "+am.response.statusText;}else{cN="HTTP Error was received from the image server but the server did not provide any error description.";}throw new IPCC.Web.UI.ImGearHttpException(am.response.status,cN);}}catch(e){if(mV){mV=false;if(mq<1){setTimeout(OK,10);return;}}h.af('openPage',e);if(typeof(h.bm)==='function'){var ca=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();ca.exception=e;ca.pageNumber=h.bx;h.bm('pageOpenFailed',ca);}}};var ij=IPCC.Web.FD.ajd(4,IPCC.Web.Ru());var qR=IPCC.Web.hs.II.oP(ij);var gK={method:'GET',cache:true};if(!mV){gK.url=this.get_url(hI,'Attributes');gK.headers={'Content-Type':'application/json'};}else{var bE;if(h.jt()===true){ij=IPCC.Web.FD.SM(4,IPCC.Web.Ru());qR=IPCC.Web.hs.II.oP(ij);bE=this.get_url(hI,'SvgImage','Scale=1&ContentType='+IPCC.T.AN+'&iv='+qR);}else{bE=this.get_url(hI,'SvgImage','Scale=1&ContentType='+IPCC.T.AN);}gK.url=bE;}IPCC.T.ob.eB(gK).then(fz,fg);};this.awZ=function(hI,h,zy){h.bx=this.bx;var mq=0;var sV=true;if(h.kE()===0){sV=false;}var ro=function(ed,aH){try{if(ed===null){throw new IPCC.Web.UI.ImGearArgumentException(null,'Unable to load the specified image. Failed to obtain Image attributes. Returned JSON from the server is null');}V.width= +(ed.imageWidth);V.height= +(ed.imageHeight);V.gV= +(ed.imageXResolution);if(V.gV<=0){V.gV=72;}V.gx= +(ed.imageYResolution);if(V.gx<=0){V.gx=72;}V.fC= +(ed.pageCount);V.qx=true;var nJ=aH.getResponseHeader("Accusoft-Data-Encrypted");var Jv=false;if(nJ==="true"){Jv=true;}h.aiL(Jv);if(zy){zy();}}catch(e){h.af('openPage',e);if(typeof(h.bm)==='function'){var ca=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();ca.exception=e;ca.pageNumber=h.bx;h.bm('pageOpenFailed',ca);}}};function fz(aH){try{var fW=aH.status,am,cN;if(fW===200){am=null;try{am=JSON.parse(aH.responseText);ro(am,aH);}catch(ex){cN="Attributes parsing error, Error meesage = "+ex.message;throw new IPCC.Web.UI.ImGearArgumentException(null,cN);}}}catch(e){h.af('openPageForRaster',e);if(typeof(h.bm)==='function'){var ca=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();ca.exception=e;ca.pageNumber=h.bx;h.bm('pageOpenFailed',ca);}}};function fg(am){try{var fW=am.response.status,cN,mW,lZ;if(!am.response){throw new IPCC.Web.UI.ImGearHttpException(fW,"Client timed out on load");}if(fW===403){mq++;if(am.response.statusText&&am.response.statusText!==""){cN="Expired viewer session ID, error message from the server: "+am.response.statusText;}else{cN="Expired viewer session ID. No error text message was received from the server:";}throw new IPCC.Web.UI.ImGearHttpException(fW,cN);}mW=am.response.getResponseHeader('Accusoft-Status-Message');if(mW){var sI;lZ=am.response.getResponseHeader('Accusoft-Status-Number');if(IPCC.Web.xS(lZ)){sI=parseInt(lZ,10);}throw new IPCC.Web.UI.ImGearHttpException(fW,mW,sI);}else{if(am.response.statusText&&am.response.statusText!==""){cN="Error message from the service: "+am.response.statusText;}else{cN="HTTP Error was received from the image server but the server did not provide any error description.";}throw new IPCC.Web.UI.ImGearHttpException(fW,cN);}}catch(e){h.af('openPageForRaster',e);if(typeof(h.bm)==='function'){var ca=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();ca.exception=e;ca.pageNumber=h.bx;h.bm('pageOpenFailed',ca);}}};var act={method:'GET',url:this.get_url(hI,'Attributes'),headers:{'Content-Type':'application/json'}};if(sV===true){act.timeout=h.kE();}IPCC.T.ob.eB(act).then(fz,fg);};return this;};hn.prototype.clone=function(){var VF=new hn(this.get_encodedIdentifier(),this.bx,this.width,this.height,this.gV,this.gx);VF.fC=this.fC;VF.qx=this.qx;return VF;};hn.prototype.equals=function(R){if(this.get_encodedIdentifier()!==R.get_encodedIdentifier()){return false;}if(this.bx!==R.bx){return false;}return true;};hn.prototype.qd=8;hn.prototype.sX=0.000001;hn.alo=function(aG){var Ix=aG.referenceDocumentIdentifier;var acS=hn.sl(Ix);var gE=aG.encodedDocumentIdentifier;var kG=aG.documentIdentifier;var fN;if(gE===''){gE=undefined;}if(kG===''){kG=undefined;}if(Ix&&Ix!==''){if(gE===acS){gE=undefined;}if(kG===Ix){kG=undefined;}}if(kG){fN=IPCC.hn.sl(kG);if(gE){if(gE!==fN){throw new IPCC.Web.UI.ImGearArgumentException('documentIdentifier','When both are specified, documentIdentifier and encodedDocumentIdentifier must reference the same document (and encodedDocumentIdentifier must be base64-encoded).');}}else{gE=fN;}}else{if(gE){kG=IPCC.hn.IY(gE);}}if(!gE){kG=Ix;gE=acS;}var aR=aG.pageNumber;var acl=aG.referencePageNumber;if(aR===acl){aR=undefined;}if(aR!==0&& !aR){aR=acl;}aG.encodedDocumentIdentifier=gE;aG.documentIdentifier=kG;aG.pageNumber=aR;};hn.sl=function(iR){if(!iR||iR===''){return '';}var nv=[];var H;for(H=0;H<iR.length;H++){nv.push(iR.charCodeAt(H)%256);nv.push(Math.floor(iR.charCodeAt(H)/256));}nv.push(0);nv.push(0);var PH='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_';var nG=[],ug;for(H=0;H<nv.length-1;H+=3){ug=nv[H]*0x10000+nv[H+1]*0x100+nv[H+2];nG.push(PH.charAt(Math.floor(ug/0x40000)));nG.push(PH.charAt(Math.floor(ug/0x1000)%0x40));nG.push(PH.charAt(Math.floor(ug/0x40)%0x40));nG.push(PH.charAt(ug%0x40));}var Qv=Math.ceil(iR.length*16/6);while(nG.length>Qv){nG.pop();}if((nG.length%4)===3){nG.push('1');}else if((nG.length%4)===2){nG.push('2');}else if((nG.length%4)===0){nG.push('0');}return nG.join('');};hn.IY=function(kh){if(!kh||kh===''){return '';}var afk=kh.length-1;var Lj=[],ug;var pw,nv=[],oH=[];var H;for(H=0;H<afk;H++){pw=kh.charCodeAt(H);if(pw>64&&pw<91){oH.push(pw-65);}else if(pw>96&&pw<123){oH.push(pw-97+26);}else if(pw>47&&pw<58){oH.push(pw-48+52);}else if(pw===45){oH.push(62);}else if(pw===95){oH.push(63);}else{return '';}}oH.push(0);oH.push(0);oH.push(0);for(H=0;H<oH.length-3;H+=4){ug=oH[H]*0x40000+oH[H+1]*0x1000+oH[H+2]*0x40+oH[H+3];nv.push(Math.floor(ug/0x10000));nv.push(Math.floor(ug/0x100)%256);nv.push(ug%256);}for(H=0;H<nv.length-1;H+=2){Lj.push(String.fromCharCode(nv[H]+nv[H+1]*0x100));}var Qv=Math.floor(afk*6/16);while(Lj.length>Qv){Lj.pop();}return Lj.join('');};module.exports=hn;},{}],31:[function(require,module,exports){var Ra=function(){this.cj=[];this.parentElementID='';this.lockTile=function(ey){var db,H,UE,Vq;if(this.Zf(ey)){return;}UE=0;for(H=this.cj.length-1;H>=0;H--){if(!(this.cj[H].locked)){UE++;Vq=H;}}if(UE>4){db=this.cj[Vq];this.uiDirector.amC(db);this.cj.splice(Vq,1);}db=new axC();db.pool=this;this.uiDirector.awe(db);this.cj.push(db);db.locked=true;db.tile=ey;ey.poolItem=db;return;};this.Zf=function(ey){var db,H;if(this.locked){return true;}for(H=0;H<this.cj.length;H++){if(this.cj[H].tile===ey){db=this.cj[H];db.locked=true;ey.poolItem=db;return true;}}return false;};this.age=function(ey){var ie,H;ie=ey.poolItem;if(ie!==undefined&&ie.locked){this.uiDirector.axK(ie);ie.locked=false;ey.poolItem=undefined;for(H=0;H<this.cj.length;H++){if(this.cj[H]===ie){this.cj.splice(H,1);this.cj.push(ie);return;}}}};return this;};Ra.prototype.aDJ=function(){var H;for(H=0;H<this.cj.length;H++){if(!this.cj[H].locked){this.uiDirector.amC(this.cj[H]);}}};var axC=function(){this.locked=false;this.loaded=false;this.tile=undefined;this.pool=undefined;this.elementID='';return this;};module.exports=Ra;},{}],32:[function(require,module,exports){var ru=function(){this.fv=[];return this;};ru.prototype.aBi=function(dK,ei){var cT=dK.nU();var H,mh,nH;var dv=1;var abX;var xw=[];var vl=[];var wr=[];var Ez,NG;nH=this.fv.length;for(H=0;H<this.fv.length;H++){if(this.fv[H].cT>cT){nH=H;break;}}mh=nH-1;if(mh<0){mh=0;}if(nH>=this.fv.length){nH=this.fv.length-1;}if(mh!==nH){abX=(cT-this.fv[mh].cT)/(this.fv[nH].cT-this.fv[mh].cT);dv=abX*1.0;if(dv>=0.15){dv=1;mh=nH;}if(dv<=0.15){dv=1;nH=mh;}}vl=this.fv[mh].RW(ei);wr=this.fv[nH].RW(ei);var Ro=function(oG){var H;for(H=0;H<oG.length;H++){oG[H].level.pool.Zf(oG[H]);}};var VW=function(oG){var amG=[];var H;for(H=0;H<oG.length;H++){if(!oG[H].get_isLockedAndLoaded()){amG.push(oG[H]);}}return amG;};var ahS=function(oG){var ahk=[];var H;for(H=0;H<oG.length;H++){if(oG[H].get_isLockedAndLoaded()){ahk.push(oG[H]);}}return ahk;};if(mh>0&&mh===nH&&this.fv[nH].tiles.length>1){mh=nH-1;vl=this.fv[mh].RW(ei);}Ro(vl);xw=VW(vl);if(xw.length>0){for(Ez=mh-1;Ez>=0;Ez--){NG=this.fv[Ez].RW(ei);Ro(NG);if(VW(NG).length<1){break;}}if(Ez<0){vl=ahS(vl);}else{mh=Ez;vl=NG;dv=1;}}else{Ro(wr);xw=VW(wr);}Ro(wr);wr=ahS(wr);if(xw.length>3){xw.splice(3,xw.length-3);}function asw(){var am;function Ye(BX){var am='',H,bL;if(BX.length<1){return '';}bL=BX[0].level;am+='level '+bL.id.toString()+' - ';for(H=0;H<BX.length;H++){if(H>0){am+=', ';}am+='('+(BX[H].x/bL.oi).toString()+','+(BX[H].y/bL.zN).toString()+')';if(BX[H].get_isLockedAndLoaded()){am+='*';}}return am;};am='tilesToRequest: '+Ye(xw)+'<br/>';am+='opaqueTiles: '+Ye(vl)+'<br/>';am+='translucentTiles: '+Ye(wr)+'<br/>';am+='opacity: '+dv.toString()+'<br/>';am+='asx: '+cT.toString()+'<br/>';am+='dK: '+dK.toString()+'<br/>';return am;};return{opaqueTiles:vl,translucentTiles:wr,opacity:dv,tilesToRequest:xw,toString:asw,asx:cT,dK:dK.toString()};};ru.prototype.aAt=function(pG){var AY=[];var ue=[];var H,j;var bL,tile;for(H=0;H<this.fv.length;H++){bL=this.fv[H];for(j=0;j<bL.tiles.length;j++){tile=bL.tiles[j];if(tile.poolItem!==undefined){AY.push(tile);}}}var ajp=function(WX,amU){var H,j,Vr,UQ;for(H=0;H<amU.length;H++){Vr=amU[H];UQ=true;for(j=0;j<WX.length;j++){if(Vr===WX[j]){UQ=false;break;}}if(UQ){WX.push(Vr);}}};ue=pG.tilesToRequest.concat();ajp(ue,pG.opaqueTiles);ajp(ue,pG.translucentTiles);for(H=AY.length-1;H>=0;H--){var arr=AY[H];for(j=0;j<ue.length;j++){if(ue[j]===arr){AY.splice(H,1);break;}}}for(H=0;H<AY.length;H++){AY[H].unlock();}for(H=0;H<ue.length;H++){ue[H].relock();}for(H=0;H<ue.length;H++){if(ue[H].poolItem===undefined){ue[H].lock();}}};ru.prototype.unlockAllItems=function(){var H,j,bL;for(H=0;H<this.fv.length;H++){bL=this.fv[H];for(j=0;j<bL.tiles.length;j++){if(bL.tiles[j].poolItem!==undefined){bL.pool.age(bL.tiles[j]);}}}};ru.prototype.aGx=function(){var H;for(H=0;H<this.fv.length;H++){this.fv[H].pool.aDJ();}};ru.prototype.toString=function(){var am='',H,j,bL;for(H=0;H<this.fv.length;H++){bL=this.fv[H];am+='Level '+H.toString()+':   scaleFactor='+bL.cT.toString()+'  image='+bL.width.toString()+'x'+bL.height.toString()+'  tile='+bL.oi.toString()+'x'+bL.zN.toString()+'\n';for(j=0;j<bL.tiles.length;j++){if(j>0){am+=', ';}am+='('+bL.tiles[j].x.toString()+', '+bL.tiles[j].y.toString()+')';}am+='\n';}return am;};ru.prototype.expandTile=function(ey,aaW,abV,acp,adR,bL){ey.x=IPCC.T.Qe(aaW-ey.ya,0,aaW,aaW-ey.ya);ey.y=IPCC.T.Qe(abV-ey.vY,0,abV,abV-ey.vY);ey.aF=IPCC.T.Lt(acp+(2*ey.ya),bL.width,acp);ey.bj=IPCC.T.Lt(adR+(2*ey.vY),bL.height,adR);if(ey.x+ey.aF>bL.width){ey.x=ey.x-ey.ya;ey.aF=bL.width-ey.x;ey.ya=0;}if(ey.y+ey.bj>bL.height){ey.y=ey.y-ey.vY;ey.vY=0;ey.bj=bL.height-ey.y;}return ey;};ru.prototype.createPyramid=function(jr,h){var avh=6000000;var alP=5000;var oi=1024;var auW=oi*oi*3*150;var acy=0.5;var atH=2;var bV=h.cz();var Aw=bV.width*bV.height*3;var vD;var bL;var cT;var H;var ba,de;var tile;var Dz,Dw;this.fv=[];if(bV.qx){cT=1.0;vD=Aw*cT*cT;while(this.fv.length<atH||vD>alP){bL=new IPCC.DA();bL.cT=cT;this.fv.unshift(bL);cT*=acy;vD=Aw*cT*cT;}}else{if(h.qt()===true){Aw=bV.width*bV.height;}cT=Math.sqrt(alP/Aw);var aEe=cT*bV.gV;cT=Math.ceil(aEe)/bV.gV;vD=Aw*cT*cT;if(h.qt()===false){while(vD<auW){bL=new IPCC.DA();bL.cT=cT;this.fv.push(bL);cT/=acy;vD=Aw*cT*cT;}}else{bL=new IPCC.DA();bL.cT=1;this.fv.push(bL);}}bV.qd=this.fv[this.fv.length-1].cT*8;for(H=0;H<this.fv.length;H++){bL=this.fv[H];bL.Qy=85;if(H===this.fv.length-1){bL.Qy=100;}bL.pyramid=this;bL.id=H;bL.pool=new IPCC.Ra();bL.pool.uiDirector=jr;vD=Aw*bL.cT*bL.cT;bL.width=Math.round(bV.width*bL.cT);bL.height=Math.round(bV.height*bL.cT);bL.oi=bL.width;bL.zN=bL.height;if(H>2&&H>this.fv.length-2){bL.oi=Math.min(oi/2,bL.width);bL.zN=Math.min(oi/2,bL.height);}if(vD>avh){bL.oi=Math.min(oi,bL.width);bL.zN=Math.min(oi,bL.height);}bL.tiles=[];Dz=bL.oi;for(ba=0;ba<bL.width;ba+=Dz){Dz=bL.oi;if(ba+Dz*1.25>bL.width){Dz=bL.width-ba;}Dw=bL.zN;for(de=0;de<bL.height;de+=Dw){Dw=bL.zN;if(de+Dw*1.25>bL.height){Dw=bL.height-de;}tile=new IPCC.vm();tile.level=bL;if(h.qt()===false){var PG='jpeg';if(bL.Qy>=100){PG='png';}tile.contentType=PG;tile.vY=2;tile.ya=2;tile=this.expandTile(tile,ba,de,Dz,Dw,bL);if(tile.aF!==bL.width||tile.bj!==bL.height){tile.url=h.XE('Tile/'+tile.x.toString()+'/'+tile.y.toString()+'/'+tile.aF.toString()+'/'+tile.bj.toString(),'Scale='+bL.cT.toString()+'&Quality='+bL.Qy+'&ContentType='+PG);}else{tile.url=h.XE('','Scale='+bL.cT.toString()+'&Quality='+bL.Qy+'&ContentType='+PG);}}else{tile.url=h.XE('','Scale='+bL.cT.toString()+'&ContentType='+IPCC.T.AN);tile.aJW=jr.ade();}tile.right=tile.x+tile.aF;tile.bottom=tile.y+tile.bj;bL.tiles.push(tile);}}}};module.exports=ru;},{}],33:[function(require,module,exports){var qK=function(){this.ac=false;this.h=false;};qK.prototype.mF=function(h){this.h=h;};qK.prototype.eg=function(){this.h=false;};qK.prototype.ak=function(){if(this.ac){this.h.aw().hideMagnifier();this.ac=false;}};qK.prototype.sS=function(){this.ak();};qK.prototype.kF=function(J){this.ak();if(J.domEvent.button===0){this.ac=true;this.h.aw().showMagnifier(J.windowPoint);this.h.dC();}};qK.prototype.kL=function(J){if(J.domEvent.button!==0){this.ak();}if(this.ac){this.h.aw().showMagnifier(J.windowPoint);this.h.dC();}};qK.prototype.jN=function(){this.ak();this.h.dC();};qK.prototype.ox=function(J){var bu=this.h.fa();if(J.windowPoint.x<=0||J.windowPoint.x>=bu.width-2){this.ak();}if(J.windowPoint.y<=0||J.windowPoint.y>=bu.height-2){this.ak();}};module.exports=qK;},{}],34:[function(require,module,exports){var eE=function(hz,jB,hS,hc,fl,ek){if(arguments.length===0){hz=hc=1;jB=hS=fl=ek=0;}this.agA=function(){return hz*hc-jB*hS;};this.aGP=function(){return hz===1&&jB===0&&hS===0&&hc===1&&fl===0&&ek===0;};this.rk=function(){return hz;};this.ot=function(){return jB;};this.pJ=function(){return hS;};this.rD=function(){return hc;};this.yt=function(){return fl;};this.xU=function(){return ek;};this.append=function(dK){var Hu=hz*dK.rk()+jB*dK.pJ();var He=hz*dK.ot()+jB*dK.rD();var IB=hS*dK.rk()+hc*dK.pJ();var Hi=hS*dK.ot()+hc*dK.rD();var HS=fl*dK.rk()+ek*dK.pJ()+dK.yt();var GT=fl*dK.ot()+ek*dK.rD()+dK.xU();hz=Hu;jB=He;hS=IB;hc=Hi;fl=HS;ek=GT;};this.equals=function(R){if(hz!==R.rk()){return false;}if(jB!==R.ot()){return false;}if(hS!==R.pJ()){return false;}if(hc!==R.rD()){return false;}if(fl!==R.yt()){return false;}if(ek!==R.xU()){return false;}return true;};this.vJ=function(){if(!this.ahf()){throw new IPCC.Web.UI.ImGearArgumentException(null,'Matrix has no inverse');}var Fl=this.agA();var Hu=hc/Fl;var He= -jB/Fl;var IB= -hS/Fl;var Hi=hz/Fl;var HS=(hS*ek-hc*fl)/Fl;var GT=(jB*fl-hz*ek)/Fl;hz=Hu;jB=He;hS=IB;hc=Hi;fl=HS;ek=GT;};this.Jr=function(dK){var Hu=dK.rk()*hz+dK.ot()*hS;var He=dK.rk()*jB+dK.ot()*hc;var IB=dK.pJ()*hz+dK.rD()*hS;var Hi=dK.pJ()*jB+dK.rD()*hc;var HS=dK.yt()*hz+dK.xU()*hS+fl;var GT=dK.yt()*jB+dK.xU()*hc+ek;hz=Hu;jB=He;hS=IB;hc=Hi;fl=HS;ek=GT;};this.yb=function(kv,qa,np,mr){fl-=np;ek-=mr;this.scale(kv,qa);fl+=np;ek+=mr;};this.aps=function(){hz=hc=1;jB=hS=fl=ek=0;};this.transform=function(bH){var ba=bH.x*hz+bH.y*hS+fl;var de=bH.y*hc+bH.x*jB+ek;return new IPCC.Web.UI.Point(ba,de);};this.mY=function(ZK,Zu){fl+=ZK;ek+=Zu;};this.aus=function(R){if(Math.abs(hz-R.rk())>1e-8){return false;}if(Math.abs(jB-R.ot())>1e-8){return false;}if(Math.abs(hS-R.pJ())>1e-8){return false;}if(Math.abs(hc-R.rD())>1e-8){return false;}if(Math.abs(fl-R.yt())>1e-8){return false;}if(Math.abs(ek-R.xU())>1e-8){return false;}return true;};this.toString=function(){return '{'+hz.toFixed(6)+', '+jB.toFixed(6)+', '+hS.toFixed(6)+', '+hc.toFixed(6)+', '+fl.toFixed(3)+', '+ek.toFixed(3)+'}';};this.parse=function(){};this.clone=function(){return new IPCC.eE(hz,jB,hS,hc,fl,ek);};this.Pg=function(gD){hz=gD.rk();jB=gD.ot();hS=gD.pJ();hc=gD.rD();fl=gD.yt();ek=gD.xU();};this.aoZ=function(bM,bu){hz=1;hc=bu.gx*bM.gV/(bM.gx*bu.gV);jB=hS=fl=ek=0;};this.WY=function(bO,bM,bu){switch(bO){case IPCC.Web.UI.FitType.FullImage:this.aod(bM,bu);break;case IPCC.Web.UI.FitType.FullWidth:this.afS(bM,bu);break;case IPCC.Web.UI.FitType.FullHeight:this.agE(bM,bu);break;case IPCC.Web.UI.FitType.ActualSize:this.ahs(bM,bu);break;case IPCC.Web.UI.FitType.OneToOne:if(!(bM.qx)){this.ahs(bM,bu);}else{this.apq(bM,bu);}break;}};this.afS=function(bM,bu){var mJ=this.qV(bM);var CA=bu.width-2;if(CA<1){CA=1;}var aU=CA/mJ.width;this.scale(aU,aU);mJ=this.qV(bM);if(mJ.y<0){this.mY(0,-mJ.y);}};this.agE=function(bM,bu){var mJ=this.qV(bM);var CA=bu.height-2;if(CA<1){CA=1;}var aU=CA/mJ.height;this.scale(aU,aU);mJ=this.qV(bM);if(mJ.x<0){this.mY(-mJ.x,0);}};this.aod=function(bM,bu){var kc=this.clone();kc.afS(bM,bu);this.agE(bM,bu);if(Math.max(Math.abs(hz),Math.abs(jB))>Math.max(Math.abs(kc.rk()),Math.abs(kc.ot()))){this.Pg(kc);}};this.ahs=function(bM,bu){var mJ=this.qV({x:0,y:0,width:bM.gV,height:bM.gx});var aU=bu.gV/mJ.width;this.scale(aU,aU);};this.apq=function(bM,bu){var mJ=this.qV({x:0,y:0,width:1,height:1});var aU=1/Math.min(mJ.width,mJ.height);this.scale(aU,aU);if(Math.abs(hz-1)<0.0001){hz=1;}if(Math.abs(hc-1)<0.0001){hc=1;}};return this;};eE.prototype.ahf=function(){return Math.abs(this.agA())>1e-14;};eE.prototype.rotate=function(AR){this.acs(AR,0,0);};eE.prototype.acs=function(AR,np,mr){var FM=AR*Math.PI*2/360;var jl=Math.sin(FM);var ff=Math.cos(FM);var dK=new IPCC.eE(ff,jl,-jl,ff,np*(1-ff)+mr*jl,mr*(1-ff)-np*jl);this.append(dK);};eE.prototype.aEK=function(AR,np,mr){var FM=AR*Math.PI*2/360;var jl=Math.sin(FM);var ff=Math.cos(FM);var dK=new IPCC.eE(ff,jl,-jl,ff,np*(1-ff)+mr*jl,mr*(1-ff)-np*jl);this.Jr(dK);};eE.prototype.aHz=function(AR){this.aEK(AR,0,0);};eE.prototype.scale=function(kv,qa){var dK=new IPCC.eE(kv,0,0,qa,0,0);this.append(dK);};eE.prototype.aHb=function(kv,qa,np,mr){var dK=new IPCC.eE(kv,0,0,qa,np*(1-kv),mr*(1-qa));this.Jr(dK);};eE.prototype.aIA=function(kv,qa){var dK=new IPCC.eE(kv,0,0,qa,0,0);this.Jr(dK);};eE.prototype.skew=function(qP,qv){var dK=new IPCC.eE(1,Math.tan(qv*Math.PI*2/360),Math.tan(qP*Math.PI*2/360),1,0,0);this.append(dK);};eE.prototype.aGM=function(qP,qv){var dK=new IPCC.eE(1,Math.tan(qv*Math.PI*2/360),Math.tan(qP*Math.PI*2/360),1,0,0);this.Jr(dK);};eE.prototype.aGN=function(ZK,Zu){var dK=new IPCC.eE(1,0,0,1,ZK,Zu);this.Jr(dK);};eE.prototype.yg=function(C){var fr=this.transform({x:C.x,y:C.y});var nt=fr.x;var nB=fr.x;var mN=fr.y;var mv=fr.y;fr=this.transform({x:C.x+C.width,y:C.y});nt=Math.min(nt,fr.x);nB=Math.max(nB,fr.x);mN=Math.min(mN,fr.y);mv=Math.max(mv,fr.y);fr=this.transform({x:C.x+C.width,y:C.y+C.height});nt=Math.min(nt,fr.x);nB=Math.max(nB,fr.x);mN=Math.min(mN,fr.y);mv=Math.max(mv,fr.y);fr=this.transform({x:C.x,y:C.y+C.height});nt=Math.min(nt,fr.x);nB=Math.max(nB,fr.x);mN=Math.min(mN,fr.y);mv=Math.max(mv,fr.y);return new IPCC.Web.UI.Rectangle(nt,mN,nB-nt,mv-mN);};eE.prototype.aoA=function(bM,bu,dV){var ahw=this.clone();ahw.vJ();var aCW=ahw.transform({x:dV.x+dV.width/2,y:dV.y+dV.height/2});var aU=Math.min(bu.width/dV.width,bu.height/dV.height);aU-=1e-10;var kQ=this.nU();if(kQ*aU>bM.qd){aU=bM.qd/kQ;}if(kQ*aU<bM.sX){aU=bM.sX/kQ;}this.scale(aU,aU);this.agt(bu,aCW);};eE.prototype.Nc=function(bM,bu,ei){this.aoA(bM,bu,this.yg(ei));};eE.prototype.aHF=function(bu){this.yb(1,-1,bu.width/2,bu.height/2);};eE.prototype.aoM=function(bu){this.yb(-1,1,bu.width/2,bu.height/2);};eE.prototype.Xu=function(aEx,ajC){var adf=this.transform(aEx);this.mY(ajC.x-adf.x,ajC.y-adf.y);};eE.prototype.agt=function(bu,dw){var aiA=this.transform(dw);this.mY(bu.width/2-aiA.x,bu.height/2-aiA.y);};eE.prototype.jZ=function(bV,bu){var ba=0,de=0,end;var oD=this.qV(bV);if(oD.width<bu.width){ba=(bu.width-oD.width)/2-oD.x;}else{end=oD.x+oD.width;if(end<bu.width){ba=bu.width-end;}if(oD.x>0){ba= -oD.x;}}if(oD.height<bu.height){de=(bu.height-oD.height)/2-oD.y;}else{end=oD.y+oD.height;if(end<bu.height){de=bu.height-end;}if(oD.y>0){de= -oD.y;}}this.mY(ba,de);};eE.prototype.qV=function(bV){return this.yg({x:0,y:0,width:bV.width,height:bV.height});};eE.prototype.axp=function(){var iT,Bc,iJ,yv,adg,ji;iT=this.transform({x:0,y:0});Bc=this.transform({x:0,y:1});iJ=this.transform({x:1,y:0});yv=Math.atan2(Bc.y-iT.y,Bc.x-iT.x);adg=Math.atan2(iJ.y-iT.y,iJ.x-iT.x);ji=yv-adg;if(ji>Math.PI){ji=ji-2*Math.PI;}if(ji< -Math.PI){ji=ji+2*Math.PI;}return ji<0;};eE.prototype.agc=function(){var iT,Bc,yv;iT=this.transform({x:0,y:0});Bc=this.transform({x:0,y:1});yv=Math.atan2(Bc.y-iT.y,Bc.x-iT.x)-Math.PI/2;if(yv<0){yv=yv+2*Math.PI;}return yv*360/(Math.PI*2);};eE.prototype.nU=function(){var gj;var iT,rm;var fL,eN,cT;iT=this.transform({x:0,y:0});rm=this.transform({x:1,y:0});fL=rm.x-iT.x;eN=rm.y-iT.y;gj=fL*fL+eN*eN;rm=this.transform({x:0,y:1});fL=rm.x-iT.x;eN=rm.y-iT.y;cT=Math.min(gj,fL*fL+eN*eN);rm=this.transform({x:1,y:1});fL=rm.x-iT.x;eN=rm.y-iT.y;cT=Math.min(gj,fL*fL+eN*eN);rm=this.transform({x:1,y: -1});fL=rm.x-iT.x;eN=rm.y-iT.y;cT=Math.min(gj,fL*fL+eN*eN);return Math.sqrt(gj);};eE.aIs=function(){return new IPCC.eE(1,0,0,1,0,0);};module.exports=eE;},{}],35:[function(require,module,exports){var dW={aix:1,ahX:2,Yz:3,akl:4,amZ:5,Iy:6,KR:7,amY:8,ana:9,amB:10,anw:11,anp:12,alC:13,anx:14,ahM:15,abK:16};module.exports=dW;},{}],36:[function(require,module,exports){var cn=function(){this.h=false;this.aCr=1.5;};cn.prototype.mF=function(h){this.h=h;};cn.prototype.eg=function(){this.h=false;};cn.prototype.ak=function(){};cn.prototype.lO=function(J){var aq=this.h.aw();var bM=this.h.cz();var bu=this.h.fa();var bn=aq.eA();var OY=J.wheelDelta/120;if(J.domEvent.ctrlKey){J.domEvent.preventDefault();var aU=((this.aCr-1)/2)+1;if(OY<0){aU=1/aU;}var kQ=bn.nU();if(kQ*aU>bM.qd){aU=bM.qd/kQ;}if(kQ*aU<bM.sX){aU=bM.sX/kQ;}bn.yb(aU,aU,J.windowPoint.x,J.windowPoint.y);bn.jZ(bM,bu);this.h.bm('userModifiedViewState',{});aq.ip(bn);}else{var aeA=bn.transform({x:0,y:0});bn.mY(0,OY*bu.gx);bn.jZ(bM,bu);var acM=bn.transform({x:0,y:0});if(Math.abs(aeA.x-acM.x)>0.001||Math.abs(aeA.y-acM.y)>0.001){J.domEvent.preventDefault();this.h.bm('userModifiedViewState',{});aq.ip(bn);}}this.h.dC();};module.exports=cn;},{}],37:[function(require,module,exports){var cW=function(aiI){this.aiI=aiI;this.UY=0;this.OO=1;this.OJ=2;this.Vg=3;this.UF=4;this.dJ=this.UY;this.h=false;this.mP=0;};cW.prototype.mF=function(h){this.h=h;this.aq=h.aw();};cW.prototype.eg=function(){this.h=false;};cW.prototype.ak=function(){if(this.dJ===this.OJ){this.h.aw().hideMagnifier();}this.dJ=this.UY;};cW.prototype.MI=function(J){var aY=J.domEvent.rawEvent;switch(this.dJ){case this.UY:if(aY.touches.length===1){this.aDH(J);}else if(aY.touches.length===2){this.afh(J);}else if(aY.touches.length===3){this.QY(J);}else{this.ak();}break;case this.OO:if(aY.touches.length===2){this.afh(J);}else if(aY.touches.length===3){this.QY(J);}else{this.ak();}break;case this.UF:if(aY.touches.length!==3){this.ak();}break;case this.OJ:this.ak();break;case this.Vg:if(aY.touches.length===3){this.QY(J);}else if(aY.touches.length!==2){this.ak();}break;}};cW.prototype.ML=function(J){switch(this.dJ){case this.OO:this.mP++;break;case this.OJ:this.acc(J);break;case this.Vg:this.aDa(J);break;case this.UF:this.aBU(J);break;}};cW.prototype.NL=function(){this.ak();};cW.prototype.HG=function(){this.ak();};cW.prototype.aDH=function(J){this.dJ=this.OO;this.mP++;var awN=this.mP;var V=this;function awJ(){if(V.dJ===this.OO&&awN===V.mP){V.aEk(J);}};setTimeout(awJ,1000);};cW.prototype.aEk=function(J){this.h.gf('sS',J);this.acc(J);this.dJ=this.OJ;};cW.prototype.QY=function(J){var aY=J.domEvent.rawEvent;if(aY.touches.length!==3){this.ak();return;}var gk=aY.touches[0];var ct={x:gk.screenX,y:gk.screenY};var dK=this.aq.eA();dK.vJ();this.Qp=ct;this.aFn=ct;this.Zc=dK.transform(ct);this.dJ=this.UF;this.aIp=this.aq.eA();this.aci=true;this.adv=true;};cW.prototype.aBU=function(J){var aY=J.domEvent.rawEvent;if(aY.touches.length!==3){this.ak();return;}var gk=aY.touches[0];var ct={x:gk.screenX,y:gk.screenY};var atm=Math.abs(ct.x-this.Qp.x);var avb=Math.abs(ct.y-this.Qp.y);if(atm>35){this.adv=false;}if(avb>35){this.aci=false;}if(this.aci){ct.y=this.Qp.y;}if(this.adv){ct.x=this.Qp.x;}this.aFn=ct;var bn=this.aq.eA();var bu=this.h.fa();var bM=this.h.cz();bn.Xu(this.Zc,ct);bn.jZ(bM,bu);this.aq.ip(bn);};cW.prototype.aFx=function(){};cW.prototype.aib=function(J){var aY=J.domEvent.rawEvent;if(aY.touches.length!==2){this.ak();return{};}var PO=aY.touches[0];var OQ=aY.touches[1];var fL=PO.screenX-OQ.screenX;var eN=PO.screenY-OQ.screenY;var vQ=Math.sqrt(fL*fL+eN*eN);var ji=Math.atan2(fL,eN)*180/Math.PI;var bH={x:(PO.screenX+OQ.screenX)/2,y:(PO.screenY+OQ.screenY)/2};return{vQ:vQ,ji:ji,amO:bH};};cW.prototype.afh=function(J){this.dJ=this.Vg;this.ayv=this.aib(J);this.Lz=this.ayv;var dK=this.aq.eA();dK.vJ();this.Zc=dK.transform(this.Lz.amO);this.Ja=this.Lz.ji;};cW.prototype.acc=function(J){var aY=J.domEvent.rawEvent;var gk=aY.touches[0];var ct={x:gk.screenX,y:gk.screenY};this.aq.showMagnifier(ct);};cW.prototype.aDa=function(J){var vy=this.aib(J);var cT=vy.vQ/this.Lz.vQ;var bn=this.aq.eA();var bu=this.h.fa();var bM=this.h.cz();bn.scale(cT,cT);var Ed=this.Ja-vy.ji;var alY=this.Ja-vy.ji-360;var aol=this.Ja-vy.ji+360;if(Math.abs(Ed)>Math.abs(alY)){Ed=alY;}if(Math.abs(Ed)>Math.abs(aol)){Ed=aol;}if(Ed< -40){bn.rotate(-90);this.Ja=vy.ji;}else if(Ed>40){bn.rotate(90);this.Ja=vy.ji;}bn.Xu(this.Zc,vy.amO);bn.jZ(bM,bu);this.aq.ip(bn);this.Lz=vy;};cW.prototype.aGL=function(J){var bn=this.aq.eA();var bu=this.h.fa();var bM=this.h.cz();bn.WY(IPCC.Web.UI.FitType.FullImage,bM,bu);bn.jZ(bM,bu);this.aq.ip(bn);};cW.prototype.lO=function(){this.ak();};module.exports=cW;},{}],38:[function(require,module,exports){var da=require('./IPCC.Util').regClass;var Nr=function(){return this;};Nr.registerClass=da;Nr.prototype={};Nr.registerClass('IPCC.OpenPageEventArgs');module.exports=Nr;},{"./IPCC.Util":28}],39:[function(require,module,exports){var da=require('./IPCC.Util').regClass;var Qj=function(){return this;};Qj.registerClass=da;Qj.prototype={};Qj.registerClass('IPCC.PageEventArgs');module.exports=Qj;},{"./IPCC.Util":28}],40:[function(require,module,exports){var bi=function(aG){this.eo=aG.page;this.be=0;this.as=0;this.gL=0;this.gs=0;var aK=new IPCC.Web.UI.jq();this.afi=undefined;this.gy=false;this.axe=false;this.GS=0;this.aHm=undefined;this.zO=false;this.vT=false;this.Ej=false;this.gl=0;this.Cr=0;this.Cw=false;this.Ff=false;this.bJ=new IPCC.Web.UI.ArtPage();this.eS=new IPCC.Web.UI.ArtPage();this.cf=this.eo.get_pageNumber();this.bQ=this.eo.bf.Rh+'_'+this.cf+'__pViewId';this.bf=this.eo.bf;this.dq=function(ci){var F=aK.getHandler('propertyChanged');if(F){F(this,new IPCC.pV(ci));}};return this;};bi.prototype.lq=function(){if(this.eo){return this.eo.kS()||this.be;}return this.be;};bi.prototype.qG=function(){if(this.eo){return this.eo.hX()||this.as;}return this.as;};bi.prototype.UV=function(bool){bool= ! !bool;if(this.eo){this.eo.Cw=bool;}this.Cw=bool;};bi.prototype.aih=function(){if(this.eo){return this.eo.Cw||this.Cw;}return this.Cw;};module.exports=bi;},{}],41:[function(require,module,exports){var et=require('./IPCC.Util').regEnum;var Df=function(){};Df.registerEnum=et;Df.prototype={VerticalScrollDirection:0,HorizontalScrollDirection:1};Df.registerEnum('IPCC.PageLayout',false);module.exports=Df;},{"./IPCC.Util":28}],42:[function(require,module,exports){var da=require('./IPCC.Util').regClass;var atv=function(){this.dO=undefined;return this;};var MX=function(element){var V=this;var GW=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(func){return setTimeout(func,16);};var ath=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||function(id){return clearTimeout(id);};var aK=new IPCC.Web.UI.jq();var ay=[];var aqk;var ap='';var CY='';var ae='';var kt='';var Jb='';var Kz=0;this.zV=new IPCC.Web.UI.ImGearDocumentCollection();var Jp=[];this.aIf=0;this.aHZ={x:0,y:0};var kC=0;var ph=IPCC.Web.UI.DebugErrorLevel.Production;var _debug=false;var nn=false;var cw=0;var tY=false;var OW=[];var Kj='';var dF=1;var rv=0;var ma=1;var qO=1;var az=IPCC.Web.UI.MouseTool.None;var zk=false;var sN=true;var bD=IPCC.bF.None;var iB;var hF=0;var jm=0;var ajL=0;var eL=0;var hi=15;var iV=0;var ge=15;var nT=0;var mp=0;var pL=0;var oM=0;var aua=0;var gI=0;var hw=0;var oe=1;var fK=IPCC.PageLayout.VerticalScrollDirection;var cV=IPCC.ViewMode.Document;var lD=null;var Xe=null;var Mf=0;var Zq=0;var yf=0;var vF=false;var ih=null;var Hx=0;var Gn='';var BN='';var rE=[];var EA=0;var vf=3;var Oh=0.5;var KG=true;var Mj=false;var QI=false;var To;var sh=IPCC.Web.UI.MarkHandleMode.HideSideHandlesWhenClose;var vo=true;var nc;var dB={};var ve=false;var mw=function(){return null;};var iK=null;var alW="font-size:11px;color:#888;text-align:center;cursor:pointer;";var auC=alW+"padding:18px 0 20px;display:table-caption;caption-side:bottom;";var ave=alW+"white-space:nowrap;line-height:50px;display:table-cell;vertical-align:middle;padding-right:10px;";var cu=96;var aL;function oy(JV){if(!_debug){return false;}return ph>=JV;};this.af=function(ju,ia){if(!oy(IPCC.Web.UI.DebugErrorLevel.Production)){return;}var cE=ju+'() threw an exception ('+ia.name+'), "'+ia.message+'"';cE=cE.replace(/\n/g," ");IPCC.iA.lY(cE,IPCC.Web.UI.DebugItemCause.Exception,IPCC.Web.UI.DebugErrorLevel.Production,'PageList',this.oW().id);var oA=new IPCC.ExceptionEventArgs();oA.functionName=ju;oA.exception=ia;this.bm('exceptionThrown',oA);};this.ar=function(ju,kH,qH){if(!oy(IPCC.Web.UI.DebugErrorLevel.Development)){return;}var cE=ju+'(';var H;for(H=0;H<kH.length;H++){if(H>0){cE+=', ';}cE+=IPCC.iA.st(kH[H],(qH?qH:0));}cE+=')';this.vK(cE,IPCC.Web.UI.DebugErrorLevel.Development);};this.Cv=function(ju,kH,lF,qH){if(!oy(IPCC.Web.UI.DebugErrorLevel.Development)){return;}var cE=ju+'(';var H;for(H=0;H<kH.length;H++){if(H>0){cE+=', ';}cE+=IPCC.iA.st(kH[H],(qH?qH:0));}cE+=') = ';cE+=IPCC.iA.st(lF,1);this.vK(cE,IPCC.Web.UI.DebugErrorLevel.Development);};this.cZ=function(ju,kH,lF){if(!oy(IPCC.Web.UI.DebugErrorLevel.Detailed)){return;}var cE=ju+'(';var H;for(H=0;H<kH.length;H++){if(H>0){cE+=', ';}cE+=IPCC.iA.st(kH[H],0);}cE+=') = ';cE+=IPCC.iA.st(lF,1);this.vK(cE,IPCC.Web.UI.DebugErrorLevel.Detailed);};this.vK=function(jH,bL){IPCC.iA.lY(jH,IPCC.Web.UI.DebugItemCause.FunctionCall,bL,'PageList',this.oW().id);};this.lY=function(jH){IPCC.iA.lY(jH,IPCC.Web.UI.DebugItemCause.Custom,IPCC.Web.UI.DebugErrorLevel.Production,'PageList',this.oW().id);};this.Je=function(){return _debug;};this.Ve=function(R){var Jc= ! !R;if(_debug===Jc){return;}_debug=Jc;var ck=iG();var dr=[];if(ck){dr=qI(ck);}var H=0;for(H=0;H<dr.length;H++){var ax;if(ay[dr[H]].bQ){ax=document.getElementById(ay[dr[H]].bQ).aC;}if(ax){ax.set_debug(_debug);}}this.dq('debug');};this.Au=function(){return ph;};this.JE=function(R){IPCC.aA.jk(R,'value',IPCC.Web.UI.DebugErrorLevel);if(ph===R){return;}ph=R;var ck=iG();var dr=[];if(ck){dr=qI(ck);}var H=0;for(H=0;H<dr.length;H++){var ax;if(ay[dr[H]].bQ){ax=document.getElementById(ay[dr[H]].bQ).aC;}if(ax){ax.set_debugErrorLevel(ph);}}this.dq('debugErrorLevel');};function cS(cL,F){aK.addHandler(cL,F);};function cY(cL,F){aK.removeHandler(cL,F);};this.Om=function(F){cS('mouseDown',F);};this.VS=function(F){cY('mouseDown',F);};this.NT=function(F){cS('mouseMove',F);};this.Uy=function(F){cY('mouseMove',F);};this.Oi=function(F){cS('mouseUp',F);};this.VH=function(F){cY('mouseUp',F);};this.ZJ=function(F){cS('selectTextMouseToolCompleted',F);};this.Vl=function(F){cY('selectTextMouseToolCompleted',F);};this.xG=function(F){cS('textPageReady',F);};this.GB=function(F){cY('textPageReady',F);};this.abq=function(F){cS('hyperlinkPageReady',F);};this.adX=function(F){cY('hyperlinkPageReady',F);};this.atJ=function(F){cS('allPagesAdded',F);};this.azy=function(F){cY('allPagesAdded',F);};this.XP=function(F){cS('pageOpening',F);};this.Sq=function(F){cY('pageOpening',F);};this.Wj=function(F){cS('pageOpened',F);};this.Sr=function(F){cY('pageOpened',F);};this.Ki=function(F){cS('pageOpenFailed',F);};this.EZ=function(F){cY('pageOpenFailed',F);};this.Wy=function(F){cS('pageDisplayed',F);};this.Wq=function(F){cY('pageDisplayed',F);};this.lw=function(F){cS('propertyChanged',F);};this.nd=function(F){cY('propertyChanged',F);};this.abT=function(F){cS('exceptionThrown',F);};this.Qw=function(F){cY('exceptionThrown',F);};this.xh=function(F){cS('textExtractionFailed',F);};this.GD=function(F){cY('textExtractionFailed',F);};this.yW=function(F){cS('markAdded',F);};this.zs=function(F){cY('markAdded',F);};this.aba=function(F){cS('markCreating',F);};this.Tl=function(F){cY('markCreating',F);};this.Ka=function(F){cS('markChanged',F);};this.HQ=function(F){cY('markChanged',F);};this.Jk=function(F){cS('markReordered',F);};this.EQ=function(F){cY('markReordered',F);};this.Ji=function(F){cS('markSelectionChanged',F);};this.FN=function(F){cY('markSelectionChanged',F);};this.JQ=function(F){cS('markTextSelectionChanged',F);};this.Gz=function(F){cY('markTextSelectionChanged',F);};this.yo=function(F){cS('markRemoved',F);};this.zr=function(F){cY('markRemoved',F);};this.atB=function(F){cS('commentAdding',F);};this.aAn=function(F){cY('commentAdding',F);};this.vn=function(F){cS('commentAdded',F);};this.Du=function(F){cY('commentAdded',F);};this.vC=function(F){cS('commentRemoved',F);};this.DN=function(F){cY('commentRemoved',F);};this.tj=function(F){cS('commentChanged',F);};this.tK=function(F){cY('commentChanged',F);};this.Zz=function(F){cS('scaleChanged',F);};this.VN=function(F){cY('scaleChanged',F);};this.KU=function(){var aC=document.getElementById(ay[cw].bQ).aC;if(aC){return aC.get_currentState();}else{return null;}};this.amN=function(){var bI=IPCC.T.find(ay,function(fr){return fr.cf===cw;});if(!bI){return;}return bI.eo;};this.aAU=function(bx){var bI=IPCC.T.find(ay,function(fr){return fr.cf===cw;});if(!bI){return;}return bI.bQ;};this.nU=function(){return dF;};this.aoF=function(cT){kX(cT,undefined,undefined,undefined,undefined,undefined,IPCC.ScaleTrigger.Zoom);};this.Mv=function(aU,rS,aad,eI){eI=eI||IPCC.ScaleTrigger.Zoom;kX(dF*aU,aad,undefined,undefined,undefined,rS,eI);};this.apJ=function(aU,ba,de,Bz,eI){eI=eI||IPCC.ScaleTrigger.Zoom;if(dF*aU<8){kX(dF*aU,false,ba,de,Bz,undefined,eI);}else{kX(8,false,ba,de,Bz);}};this.ZY=function(aU,eI){eI=eI||IPCC.ScaleTrigger.Zoom;kX(dF/aU,false,undefined,undefined,undefined,undefined,eI);};this.axs=function(){return Uo();};this.aez=function(eI,eP,UB){var Jt,Ko,be,as;var TL=0;var H=0;for(H=0;H<ay.length;H++){be=ay[H].lq();as=ay[H].qG();if(iu(ay[H].gl)===true){var GQ=be;be=as;as=GQ;}if(be>0&&as>0){var JD=be/as;if(JD>TL){TL=JD;Jt=as;Ko=be;}}}if(TL>0){var aqL=(ap.offsetWidth-IPCC.Web.oT()-wc()-(hi+ge+mp+oM));var aqd=aqL/(Ko*cu/ay[0].gL);var dZ=hF;var eY=jm;if(iu(ay[0].gl)===true){dZ=jm;eY=hF;}var agh=Jt/eY*aqd;var jG=(ap.clientHeight-(eL+iV+nT+pL))/(eY*cu/ay[0].gs);var FR=agh;if(UB===true&&agh>jG){FR=jG;}kX(FR,true,undefined,undefined,undefined,undefined,eI,eP);}};this.abL=function(eI,eP,UB){var Jt,Ko,be,as;var So=0;var H=0;for(H=0;H<ay.length;H++){be=ay[H].lq();as=ay[H].qG();if(iu(ay[H].gl)===true){var GQ=be;be=as;as=GQ;}if(be>0&&as>0){var JD=as/be;if(JD>So){So=JD;Jt=as;Ko=be;}}}if(So>0){var apK=(ap.offsetHeight-IPCC.Web.oT()-(eL+iV+nT+pL));var apF=apK/(Jt*cu/ay[0].gs);var dZ=hF;var eY=jm;if(iu(ay[0].gl)===true){dZ=jm;eY=hF;}var ahu=Ko/dZ*apF;var jG=(ap.clientWidth-wc()-(hi+ge+mp+oM))/(dZ*cu/ay[0].gL);var FR=ahu;if(UB===true&&ahu>jG){FR=jG;}kX(FR,true,undefined,undefined,undefined,undefined,eI,eP);}};this.avD=function(eP,eI){if(V.wD&&typeof V.wD==='function'){V.wD();}var be;var as;var ej;var ki=1;eI=eI||IPCC.ScaleTrigger.Fit;if(eP===IPCC.FitType.FitToWidth){if(cV===IPCC.ViewMode.Document){ki=(ap.offsetWidth-IPCC.Web.oT()-wc()-(hi+ge+mp+oM))/(gI/dF);kX(ki,true,undefined,undefined,undefined,undefined,eI,eP);}else if(cV===IPCC.ViewMode.SinglePage){if(iu(ay[cw].gl)===true){be=ay[cw].qG();ej=cu/ay[cw].gs;}else{be=ay[cw].lq();ej=cu/ay[cw].gL;}ki=(ap.offsetWidth-IPCC.Web.oT()-wc()-(hi+ge+mp+oM))/(be*ej);kX(ki,true,undefined,undefined,undefined,undefined,eI,eP);}else{if(fK===IPCC.PageLayout.VerticalScrollDirection){Yd(eI,eP);}else{V.aez(eI,eP);}}}else if(eP===IPCC.FitType.ShrinkToWidth){var apu=ap.clientWidth-wc();var aqq=20;var Vx=apu-aqq;if(cV===IPCC.ViewMode.SinglePage){if(iu(ay[cw].gl)===true){be=ay[cw].qG();ej=cu/ay[cw].gs;}else{be=ay[cw].lq();ej=cu/ay[cw].gL;}if(Vx<dF*be*ej){ki=(ap.offsetWidth-IPCC.Web.oT()-wc()-(hi+ge+mp+oM))/(be*ej);kX(ki,true,undefined,undefined,undefined,undefined,eI,eP);}}else{if(Vx<gI){kX(dF*Vx/gI,true,undefined,undefined,undefined,undefined,eI,eP);}}}else if(eP===IPCC.FitType.ActualSize){if(cV===IPCC.ViewMode.Document||cV===IPCC.ViewMode.SinglePage){kX(1,true,undefined,undefined,undefined,undefined,eI,eP);}}else if(eP===IPCC.FitType.FitToHeight){if(cV===IPCC.ViewMode.Document){ki=(ap.offsetHeight-IPCC.Web.oT()-(eL+iV+nT+pL))/(hw/dF);kX(ki,true,undefined,undefined,undefined,undefined,eI,eP);}else if(cV===IPCC.ViewMode.SinglePage){if(iu(ay[cw].gl)===true){as=ay[cw].lq();ej=cu/ay[cw].gL;}else{as=ay[cw].qG();ej=cu/ay[cw].gs;}ki=(ap.offsetHeight-IPCC.Web.oT()-(eL+iV+nT+pL))/(as*ej);kX(ki,true,undefined,undefined,undefined,undefined,eI,eP);}else{if(fK===IPCC.PageLayout.HorizontalScrollDirection){Yd(eI,eP);}else{V.abL(eI,eP);}}}else if(eP===IPCC.FitType.BestFit){var Ca;if(cV===IPCC.ViewMode.Document){ki=(ap.offsetWidth-IPCC.Web.oT()-(hi+ge+mp+oM))/(gI/dF);Ca=(ap.offsetHeight-IPCC.Web.oT()-(eL+iV+nT+pL))/(hw/dF);if(Ca<ki){ki=Ca;}kX(ki,true,undefined,undefined,undefined,undefined,eI,eP);}else if(cV===IPCC.ViewMode.SinglePage){if(iu(ay[cw].gl)===true){be=ay[cw].qG();as=ay[cw].lq();ej=cu/ay[cw].gL;}else{be=ay[cw].lq();as=ay[cw].qG();ej=cu/ay[cw].gs;}ki=(ap.offsetWidth-IPCC.Web.oT()-wc()-(hi+ge+mp+oM))/(be*ej);Ca=(ap.offsetHeight-IPCC.Web.oT()-(eL+iV+nT+pL))/(as*ej);if(Ca<ki){ki=Ca;}kX(ki,true,undefined,undefined,undefined,undefined,eI,eP);}else{if(fK===IPCC.PageLayout.HorizontalScrollDirection){V.aez(eI,eP,true);}else{V.abL(eI,eP,true);}}}};this.axT=function(aR,aW){var bI=ay[aR-1];var al=document.getElementById(bI.bQ);var Cc=[];if(al){var eh,Bh,bH;try{eh=ZG(al);}catch(e){return null;}Cc=IPCC.T.map(aW,function(fr){Bh=al.aC.transformPagePointToWindow(new IPCC.Web.UI.Point(fr.x,fr.y),true);bH=ahI(al,Bh.x,Bh.y,eh);return{clientX:bH.x,clientY:bH.y};});return Cc;}else{return null;}};this.aDI=function(){var H=0;for(H=0;H<ay.length;H++){V.dC(H);}iG();oI();};this.dC=function(bx){var bw;if(ay[bx].bQ){bw=document.getElementById(ay[bx].bQ);}V.xN(bw,bx);};this.KP=function(bx){var bw;if(ay[bx].bQ){bw=document.getElementById(ay[bx].bQ);}if(bw){var ax=bw.aC;ax.KP();}};this.xN=function(bw,bx){if(bw&&bw.aC&&bw.aC.en()===true){var ax=bw.aC;ax.display();ay[bx].gy=true;if(cV===IPCC.ViewMode.SinglePage){var nl= -1;if(Array.prototype.indexOf){nl=rE.indexOf(bx);}else{nl=IPCC.Web.jQ(rE,bx);}if(nl!== -1){rE.splice(nl,1);}}}};function afG(dr){var bw;for(var H=0;H<dr.get_length();H++){var bI=dr.getPage(H);var bx=bI.get_pageNumber();if(ay[bx].bQ){bw=document.getElementById(ay[bx].bQ);}if(bw&&bw.aC&&bw.aC.AX()!==null){return bw.aC;}}return null;};this.GE=function(){var dr=this.get_displayedPages();var Mb=afG(dr);Mb.GE();};this.DB=function(aU){var fP=0;var he=ay.length-1;for(var aa=fP;aa<=he;aa++){var ax;var bw=document.getElementById(ay[aa].bQ);if(bw){ax=bw.aC;}else{continue;}ax.set_sharpening(aU);if(ax&&ay[aa].gy===true&&ax.en()===true){ax.display();}}rv=aU;};this.ayO=function(){return rv;};this.Ga=function(aU){var fP=0;var he=ay.length-1;for(var aa=fP;aa<=he;aa++){var ax;var bw=document.getElementById(ay[aa].bQ);if(bw){ax=bw.aC;}else{continue;}ax.set_gamma(aU);if(ax&&ay[aa].gy===true&&ax.en()===true){ax.display();}}qO=aU;};this.axv=function(){return qO;};this.DV=function(aU){var fP=0;var he=ay.length-1;for(var aa=fP;aa<=he;aa++){var ax;var bw=document.getElementById(ay[aa].bQ);if(bw){ax=bw.aC;}else{continue;}ax.set_svgLineWidthMultiplier(aU);if(ax&&ay[aa].gy===true&&ax.en()===true){ax.display();}}ma=aU;};this.ayo=function(){return ma;};this.AX=function(){var dr=this.get_displayedPages();var Mb=afG(dr);if(Mb){return Mb.AX();}return null;};this.wi=function(bx,K){var bw;if(ay[bx].bQ){bw=document.getElementById(ay[bx].bQ);}if(bw&&bw.aC){bw.aC.wi(K);}};this.pO=function(bx){var bw;if(ay[bx].bQ){bw=document.getElementById(ay[bx].bQ);}if(bw&&bw.aC){bw.aC.pO();}};var uO='';this.tF=function(R){uO=R;};this.oW=function(){return uO;};this.bm=function(cL,J){try{var F=aK.getHandler(cL);if(F!==null){F(V,J);}}catch(e){V.af(cL+'Event',e);}};this.dq=function(ci){var F=aK.getHandler('propertyChanged');if(F){F(this,new IPCC.pV(ci));}};this.ayn=function(F){aK.addHandler('currentPageChanged',F);};this.aBu=function(F){aK.removeHandler('currentPageChanged',F);};this.yc=function(cU,R){cU.style.cursor='move';cU.style.cursor='-webkit-'+R;cU.style.cursor='-moz-'+R;cU.style.cursor=R;};this.aeH=function(){return ae.style.cursor||'auto';};this.anU=function(R){ae.style.cursor=R||'auto';var H=0;for(H=0;H<ay.length;H++){if(ay[H].bQ){var bw=document.getElementById(ay[H].bQ);if(bw){var ax=bw.aC;bw.style.cursor=R;if(ax){ax.set_cursor(R);if(ay[H].gy===true&&ax.en()===true){ax.display();}}}}}};this.Yv=function(){return az;};this.HY=function(R){IPCC.aA.jk(R,'value',IPCC.Web.UI.MouseTool);var mg=false;if(az!==R){iB=null;az=R;switch(az){case IPCC.Web.UI.MouseTool.HandPan:bD='grab';V.yc(ae,'grab');break;case IPCC.Web.UI.MouseTool.SelectText:V.tU();bD=IPCC.bF.Text;ae.style.cursor=IPCC.bF.eD(bD);break;case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:V.tU();bD=IPCC.bF.Text;ae.style.cursor=IPCC.bF.eD(bD);break;case IPCC.Web.UI.MouseTool.None:bD=IPCC.bF.None;ae.style.cursor=IPCC.bF.eD(bD);break;case IPCC.Web.UI.MouseTool.Magnifier:bD=IPCC.bF.Magnifier;ae.style.cursor=IPCC.bF.eD(bD);break;case IPCC.Web.UI.MouseTool.RectangleZoom:bD=IPCC.bF.RectangleZoom;ae.style.cursor=IPCC.bF.eD(bD);break;case IPCC.Web.UI.MouseTool.CreateRectangleMark:bD=IPCC.bF.AddRectangleMark;ae.style.cursor=IPCC.bF.eD(bD);mg=true;iB=function(){return[new IPCC.fj(IPCC.Web.UI.MarkType.Rectangle)];};break;case IPCC.Web.UI.MouseTool.CreateRectangleRedactionMark:bD=IPCC.bF.AddRectangleRedactionMark;ae.style.cursor=IPCC.bF.eD(bD);mg=true;iB=function(){return[new IPCC.fj(IPCC.Web.UI.MarkType.RectangleRedaction)];};break;case IPCC.Web.UI.MouseTool.CreateEllipseMark:bD=IPCC.bF.AddEllipseMark;ae.style.cursor=IPCC.bF.eD(bD);mg=true;iB=function(){return[new IPCC.fj(IPCC.Web.UI.MarkType.Ellipse)];};break;case IPCC.Web.UI.MouseTool.CreateLineMark:bD=IPCC.bF.AddLineMark;ae.style.cursor=IPCC.bF.eD(bD);mg=true;iB=function(){return[new IPCC.lC()];};break;case IPCC.Web.UI.MouseTool.CreateStampMark:bD=IPCC.bF.AddStampMark;ae.style.cursor=IPCC.bF.eD(bD);mg=true;iB=function(){return[new IPCC.fj(IPCC.Web.UI.MarkType.Stamp)];};break;case IPCC.Web.UI.MouseTool.CreateImageStampAnnotationMark:bD=IPCC.bF.AddImageStampMark;ae.style.cursor=IPCC.bF.eD(bD);mg=true;iB=function(){return[new IPCC.fj(IPCC.Web.UI.MarkType.ImageStampAnnotation)];};break;case IPCC.Web.UI.MouseTool.CreateImageStampRedactionMark:bD=IPCC.bF.AddImageStampMark;ae.style.cursor=IPCC.bF.eD(bD);mg=true;iB=function(){return[new IPCC.fj(IPCC.Web.UI.MarkType.ImageStampRedaction)];};break;case IPCC.Web.UI.MouseTool.CreateTextMark:bD=IPCC.bF.AddTextMark;ae.style.cursor=IPCC.bF.eD(bD);mg=true;iB=function(){return[new IPCC.fj(IPCC.Web.UI.MarkType.Text)];};break;case IPCC.Web.UI.MouseTool.CreateTextInputSignatureMark:bD=IPCC.bF.AddTextMark;ae.style.cursor=IPCC.bF.eD(bD);mg=true;iB=function(){return[new IPCC.fj(IPCC.Web.UI.MarkType.TextLine)];};break;case IPCC.Web.UI.MouseTool.CreateTextAreaSignatureMark:bD=IPCC.bF.AddTextMark;ae.style.cursor=IPCC.bF.eD(bD);mg=true;iB=function(){return[new IPCC.fj(IPCC.Web.UI.MarkType.TextAreaSignature)];};break;case IPCC.Web.UI.MouseTool.CreateFreehandMark:bD=IPCC.bF.AddFreehandLineMark;ae.style.cursor=IPCC.bF.eD(bD);mg=true;iB=function(){return[new IPCC.mR()];};break;case IPCC.Web.UI.MouseTool.CreatePolylineMark:bD=IPCC.bF.AddPolylineMark;ae.style.cursor=IPCC.bF.eD(bD);mg=true;iB=function(){return[new IPCC.jT(IPCC.Web.UI.MarkType.Polyline)];};break;case IPCC.Web.UI.MouseTool.EditMarks:bD=IPCC.bF.EditMarks;ae.style.cursor=IPCC.bF.eD(bD);mg=true;iB=function(){return[new IPCC.jY(IPCC.Web.UI.MarkType.Text)];};break;default:bD=IPCC.bF.None;ae.style.cursor=IPCC.bF.eD(bD);break;}var H=0;for(H=0;H<ay.length;H++){if(ay[H].bQ){var bw=document.getElementById(ay[H].bQ);if(bw){var ax=bw.aC;if(bD==='grab'){V.yc(bw,'grab');}else{bw.style.cursor=IPCC.bF.eD(bD);}if(ax){ax.set_cursor(bD);ax.QB(az===IPCC.Web.UI.MouseTool.HandPan||az===IPCC.Web.UI.MouseTool.EditMarks);if(mg===true){ax.Kr(iB());}else{ax.set_mouseTool(IPCC.Web.UI.MouseTool.None);}if(ay[H].gy===true&&ax.en()===true){ax.display();}}}}}this.dq('mouseTool');}};this.aur=function(){return zk;};this.aCS=function(bool){zk= ! !bool;};this.AQ=function(){return sh;};this.It=function(R){if(sh!==R){sh=R;var ck=iG();var dr=[];if(ck){dr=qI(ck);}var H=0;for(H=0;H<dr.length;H++){var bw;var ax;bw=document.getElementById(ay[dr[H]].bQ);ax=bw.aC;if(ax){ax.set_markHandleMode(sh);this.xN(bw,H);}}this.dq('markHandleMode');}};this.jW=function(){return sN;};this.Jx=function(R){if(sN!==R){sN=R;var ck=iG();var dr=[];if(ck){dr=qI(ck);}var H=0;for(H=0;H<dr.length;H++){var ax;if(ay[dr[H]].bQ){ax=document.getElementById(ay[dr[H]].bQ).aC;}if(ax){ax.set_textRequired(sN);}}this.dq('textRequired');}};this.azJ=function(){return vf;};this.apj=function(R){if(R<0){R=0;}if(vf!==R){vf=R;this.dq('maxPrefetch');}};this.ato=function(){return KG;};this.aBJ=function(R){if(KG!==R){KG=R;this.dq('displayPagesWhenScrolling');}};this.azv=function(){return EA;};this.apk=function(R){if(R<0){R=0;}if(EA!==R){EA=R;this.dq('maxOutOfViewDisplay');}};this.atC=function(){return Mj;};this.aBL=function(R){if(Mj!==R){Mj= ! !R;this.dq('discardOutOfViewText');}};this.aAc=function(){return QI;};this.anZ=function(R){if(QI!==R){QI= ! !R;this.dq('retainPageText');}};this.axf=function(){return Oh;};this.aoc=function(R){if(R<0){R=0;}if(Oh!==R){Oh=R;this.dq('scrollDisplayThreshold');}};this.aAo=function(){return fK;};this.aoa=function(R){if(fK===R){return;}fK=R;if(ap===''||ap.clientHeight<=0||cV===IPCC.ViewMode.SinglePage){this.dq('pageLayout');return;}var wj=cw;var JW=cV;if(cV===IPCC.ViewMode.EqualWidthPages||cV===IPCC.ViewMode.EqualFitPages){V.OI(IPCC.ViewMode.Document);}ap.scrollLeft=0;ap.scrollTop=0;var H=0;var bw;if(fK===IPCC.PageLayout.VerticalScrollDirection){if(Jb){Jb.setAttribute('style',auC);}CY.insertBefore(kt,Jb);for(H=0;H<ay.length;H++){bw=document.getElementById(ay[H].bQ);bw.style.display='block';if(hF>0){bw.style.margin=eL+'px auto '+iV+'px auto';}}ae.style.margin='0px '+hi+'px 0px '+ge+'px';ap.scrollLeft=(gI-ap.clientWidth)/2+hi+mp;}else{if(Jb){Jb.setAttribute('style',ave);}CY.removeChild(kt);for(H=0;H<ay.length;H++){bw=document.getElementById(ay[H].bQ);if(bw){bw.style.display='inline-block';if(hF>0){bw.style.margin=eL+'px '+hi+'px '+iV+'px '+ge+'px';}}}ae.style.margin='0px';ap.scrollTop=(hw-ap.clientHeight)/2+eL+nT;}if(JW===IPCC.ViewMode.EqualWidthPages){V.OI(IPCC.ViewMode.EqualWidthPages);}else if(JW===IPCC.ViewMode.EqualFitPages){V.OI(IPCC.ViewMode.EqualFitPages);}this.pK(wj);oI();this.dq('layout');};this.axi=function(){return cV;};this.OI=function(R,eI){eI=eI||IPCC.ScaleTrigger.ViewMode;if(cV===R){return;}cV=R;if(ap===''||ap.clientHeight<=0){this.dq('viewMode');return;}var wj=cw;this.pK(wj);if(cV===IPCC.ViewMode.Document){var jG=1;var be=hF;var as=jm;if(iu(ra)===true){be=jm;as=hF;}if(fK===IPCC.PageLayout.VerticalScrollDirection){jG=(ap.clientWidth-(hi+ge+mp+oM))/be;}else{jG=(ap.clientHeight-(eL+iV+nT+pL))/as;}kX(jG,true,undefined,undefined,undefined,undefined,eI);}else{Yd(eI);}this.pK(wj);this.dq('viewMode');yj(dB,true);kK(dB,true);};var ra=0;this.azG=function(){return ra;};this.aoo=function(R){if(ra!==R){ra=R;var H=0;for(H=0;H<ay.length;H++){if(ay[H].Cr===0){ay[H].gl=ra;}}this.dq('pageRotation');}};this.UH=function(aR){var cf;if(arguments.length>0){if(!isNaN(aR)){cf=aR;}else{cf=cw;}}else{cf=cw;}for(var H=0;H<ay.length;H++){if(cf===H){return ay[H].gl;}}return 0;};var oJ=false;this.jt=function(){return oJ;};this.ou=function(R){if(typeof R!=="boolean"){return;}if(R===oJ){return;}oJ=R;};this.avd=function(){return To;};this.aDW=function(R,qc,vO,vh){if(To!==R){To=R;for(var H=0;H<ay.length;H++){ay[H].bJ.azn(R,H,ay[H].lq(),ay[H].qG(),ay[H].eo,qc,vO,vh);var aFk= !ay[H].lq();ay[H].UV(aFk);}this.dq('annotationXmlDom');}};var qb;this.Jg=function(R){qb=R;};this.wH=function(){return qb;};var pQ=false;this.mH=function(){return pQ;};this.pe=function(R){if(typeof R!=="boolean"){return;}if(R===pQ){return;}pQ=R;IPCC.T.forEach(ay,function(bi,H){var ax;if(ay[H].bQ){var bw=document.getElementById(ay[H].bQ);if(bw){ax=bw.aC;}}if(ax){ax.pe(pQ);ax=undefined;}});};this.aoU=function(R){if(Kj!==R){Kj=R;this.dq('loadingContent');}};this.ayr=function(){return Kj;};this.auH=function(){var ck=iG();var dr=[];if(ck){dr=qI(ck);}var alw=new IPCC.Web.UI.ImGearPageCollection();var H=0;for(H=0;H<dr.length;H++){alw.ahj(ay[dr[H]].eo);}return alw;};this.axE=function(bx){if(ay[bx]){return ay[bx].bQ;}};this.CC=function(){return vo;};this.Kg=function(R){vo=R;};this.kE=function(){return nc;};this.yH=function(R){nc=R;};this.LG=function(bI,zn,zi){var V=this;if(bI.kS()>0||bI.hX()>0){zn(bI.kS(),bI.hX());return;}bI.requestPageAttributes(function(aF,bj){if(ay[bI.get_pageNumber()].aih()===true){var hf=aF/bI.afM();if(hf!==1){var bJ=V.gJ(bI);if(bJ){anl(bJ,hf);}}}ay[bI.get_pageNumber()].UV(false);zn(aF,bj);},function(ew){zi(ew);});};this.awb=function(){if(ve===true){return;}ve=true;this.eO(kt,'pccHidden');yj(dB,true);kK(dB,true);};this.aqA=function(){if(ve===false){return;}ve=false;this.lz(kt,'pccHidden');};this.aza=function(){return ve;};this.lz=function(cU,sQ){var Hf=new RegExp('(?:^|\\s)'+sQ+'(?!\\S)','g');if(cU.className.match(Hf)===null){cU.className=cU.className+' '+sQ;}};this.eO=function(cU,sQ){var Hf=new RegExp('(?:^|\\s)'+sQ+'(?!\\S)','g');cU.className=cU.className.replace(Hf,'');};this.auK=function(){return mw;};this.aEC=function(R){mw=R;};this.ayg=function(){return iK;};this.anI=function(R){if(iK===R){return;}var K,dO,un;if(iK){K=iK.get_mark();un=dB[K.get_markID()];dO=mw(K,{isSelected:true},(un)?un.dO:undefined);if(un){DK(K,dB,dO);}}K=dO=un=undefined;iK=R;if(iK){K=iK.get_mark();un=dB[K.get_markID()];dO=mw(K,{isSelected:true},(un)?un.dO:undefined);if(un){DK(K,dB,dO);}}kK(dB,true);};this.aBf=function(aaM){var hZ=yl();IPCC.T.forEach(aaM,function(LB){var db=dB[LB];if(db){var kw=mw(db.K,{isSelected:(db.K.get_conversation()===iK)},db.dO);if(!IPCC.T.uh(kw)){throw new Error(kw+' is not a valid HTMLElement');}if(kw!==db.dO){DK(db.K,dB,kw);}}});kK(dB,false,hZ);};this.aGa=function(){V.aFw={top:ap.scrollTop,left:ap.scrollLeft};};this.aCO=function(){var oU=V.aFw;if(oU){ap.scrollTop=oU.top;ap.scrollLeft=oU.left;}};this.initialize=function(){var dp=this.oW();var H;for(H=dp.childNodes.length-1;H>=0;H--){if(dp.childNodes[H].tagName!=='INPUT'){dp.removeChild(dp.childNodes[H]);}}this.zV.add_documentAdded(aBP);this.zV.add_pageAdded(Tx);this.zV.add_pageRemoved(Vb);this.ajb(true);dp.aC=this;aeQ();var Ug='webkit moz o'.split(' '),Gc='';if(ae.style.animationName!==undefined){Gn='animationend';BN='transitionend';return;}for(H=0;H<Ug.length;H++){if(ae.style[Ug[H]+'Animation']!==undefined){Gc=Ug[H];Gn=Gc+'AnimationEnd';BN=Gc+'TransitionEnd';break;}}};this.atw=function(){return nn;};this.ajb=function(R){nn=R;this.dq('enabled');};this.aEi=function(){if(cw+1<ay.length){V.pK(cw+1);}};this.aDf=function(){var Ts=cw-1;if(Ts<0){Ts=0;}V.pK(Ts);};function EF(J){IPCC.Web.UI.ah.removeHandler(J.target,Gn,EF);IPCC.Web.UI.ah.removeHandler(J.target,BN,EF);if(Hx>cw){V.eO(J.target,'pccNextPageIn');V.eO(J.target,'pccPreviousPageIn');V.eO(J.target,'pccCurrentPage');V.eO(J.target,'pccPageBack');V.eO(J.target,'pccPageForward');V.lz(J.target,'pccNextPage');}else if(Hx<cw){V.eO(J.target,'pccNextPageIn');V.eO(J.target,'pccPreviousPageIn');V.eO(J.target,'pccCurrentPage');V.eO(J.target,'pccPageBack');V.eO(J.target,'pccPageForward');V.lz(J.target,'pccPreviousPage');}V.eO(ae,'pccPageListContainerPageChanging');ap.style.overflow='auto';ih=null;ae.style.overflow='hidden';var nN=IPCC.T.filter(dB,function(ab){return ab.aR===cw+1;});kK(nN);setTimeout(function(){oI();},60);};this.pK=function aIm(bx){var GF=cw;var nN;if(cV===IPCC.ViewMode.SinglePage){nN=IPCC.T.filter(dB,function(ab){return ab.aR!==bx+1;});LQ(nN);}else{tY=true;var alq=alE(bx);if(fK===IPCC.PageLayout.VerticalScrollDirection){ap.scrollTop=alq;}else{ap.scrollLeft=alq;}}var zI=[];if(cw!==bx){cw=bx;var bi=ay[cw];var J=new IPCC.PageEventArgs();J.imGearPage=V.get_currentPage();J.pageIndex=cw;J.pageNodeID=bi.bQ;V.bm('currentPageChanged',J);if(cV===IPCC.ViewMode.SinglePage){var fS=document.getElementById(ay[cw].bQ);var qC=document.getElementById(ay[GF].bQ);if(fS===null){fS=Jj(ay[cw].eo);zI.push(ay[cw]);fS.className='pccPageListItem pccCurrentPage';rE.push(cw);if(hF>0){var la=WP(ay[cw]);fS.style.width=la.aF+'px';fS.style.height=la.bj+'px';}else{fS.style.width=ae.clientWidth-hi-ge+'px';fS.style.height=ae.clientWidth*0.8+'px';}fS.style.display='block';fS.setAttribute('id',ay[cw].bQ);ae.appendChild(fS);}if(BN.length>0){ap.style.overflow='hidden';ae.style.width=fS.style.width;ae.style.height=fS.style.height;ae.style.overflow='visible';if(ih!==null){IPCC.Web.UI.ah.removeHandler(ih,Gn,EF);IPCC.Web.UI.ah.removeHandler(ih,BN,EF);if(Hx>cw){this.eO(ih,'pccNextPageIn');this.eO(ih,'pccPreviousPageIn');this.eO(ih,'pccCurrentPage');this.eO(ih,'pccPageForward');this.eO(ih,'pccPageBack');this.lz(ih,'pccNextPage');}else if(Hx<cw){this.eO(ih,'pccNextPageIn');this.eO(ih,'pccPreviousPageIn');this.eO(ih,'pccCurrentPage');this.eO(ih,'pccPageForward');this.eO(ih,'pccPageBack');this.lz(ih,'pccPreviousPage');}}IPCC.Web.UI.ah.addHandler(qC,Gn,EF);IPCC.Web.UI.ah.addHandler(qC,BN,EF);ih=qC;Hx=GF;this.lz(ae,'pccPageListContainerPageChanging');if(cw>GF){this.lz(qC,'pccPageForward');this.eO(fS,'pccPageBack');this.eO(fS,'pccPreviousPage');this.eO(fS,'pccPreviousPageIn');this.eO(fS,'pccNextPage');this.lz(fS,'pccCurrentPage');this.lz(fS,'pccNextPageIn');}else{this.lz(qC,'pccPageBack');this.eO(fS,'pccPageForward');this.eO(fS,'pccPreviousPage');this.eO(fS,'pccNextPage');this.eO(fS,'pccNextPageIn');this.lz(fS,'pccCurrentPage');this.lz(fS,'pccPreviousPageIn');}}else{ae.style.width=fS.style.width;ae.style.height=fS.style.height;if(cw>GF){this.eO(qC,'pccNextPage');this.eO(qC,'pccCurrentPage');this.lz(qC,'pccPreviousPage');}else{this.eO(qC,'pccPreviousPage');this.eO(qC,'pccCurrentPage');this.lz(qC,'pccNextPage');}this.eO(fS,'pccPreviousPage');this.eO(fS,'pccNextPage');this.lz(fS,'pccCurrentPage');nN=IPCC.T.filter(dB,function(el){return el.aR===bx+1;});Xp(nN);setTimeout(function(){oI();},60);}IPCC.T.forEach(zI,ake);}}};this.aDm=function(){if(ay.length>0){V.pK(0);}};this.aDD=function(){if(cw<ay.length-1){V.pK(ay.length-1);}};this.aEI=function(cr){if(ve===false){return "CommentsPanelClosed";}var fh=dB[cr.get_mark().get_markID()];if(!fh){return "ConversationDivDoesNotExist";}if(cV===IPCC.ViewMode.SinglePage&&fh.aR-1!==cw){return "SinglePageModePageNotShown";}var bI=document.getElementById(ay[fh.aR-1].bQ);if(ay[fh.aR-1].gy===false||bI===undefined||bI.aC===undefined||bI.aC===null||bI.aC.en()===false){return "PageOutOfView";}var C=cr.get_mark().get_boundingRectangle();var si=bI.aC.transformPagePointToWindow(new IPCC.Web.UI.Point(C.x,C.y),true);var zQ=bI.aC.transformPagePointToWindow(new IPCC.Web.UI.Point(C.x+C.width,C.y),true);si.x=ae.offsetWidth;zQ.x=ae.offsetWidth+wc();V.akn(bI.offsetTop,bI.offsetLeft,si,zQ);return "Success";};this.aDF=function(bx,C){if(cV===IPCC.ViewMode.SinglePage&&bx!==cw){return false;}var bI=document.getElementById(ay[bx].bQ);if(ay[bx].gy===false||bI===undefined||bI.aC===undefined||bI.aC===null||bI.aC.en()===false){return false;}var si=bI.aC.transformPagePointToWindow(new IPCC.Web.UI.Point(C.x,C.y),true);var zQ=bI.aC.transformPagePointToWindow(new IPCC.Web.UI.Point(C.x+C.width,C.y+C.height),true);V.akn(bI.offsetTop,bI.offsetLeft,si,zQ);return true;};this.aEM=function(apW,aqb){ap.scrollTop+=Math.round(aqb);ap.scrollLeft+=Math.round(apW);};this.akn=function(aGF,aFc,si,zQ){var aiz=zQ.x-si.x;var ahY=zQ.y-si.y;var ct=new IPCC.Web.UI.Point(0,0);if(aiz>ap.clientWidth){ct.x=si.x;}else{ct.x=si.x+(aiz/2);}if(ahY>ap.clientHeight){ct.y=si.y;}else{ct.y=si.y+(ahY/2);}if(fK===IPCC.PageLayout.VerticalScrollDirection){ap.scrollTop=aGF+ct.y-ap.clientHeight/2;ap.scrollLeft=ct.x-ap.clientWidth/2;}else{ap.scrollLeft=aFc+ct.x-ap.clientWidth/2;ap.scrollTop=ct.y-ap.clientHeight/2;}};this.aCu=function(){var H=0;for(H=0;H<ay.length;H++){BO(H,true);}};this.app=function(){var ck=iG();var dr=[];if(ck){dr=qI(ck);}var H=0;for(H=0;H<dr.length;H++){BO(dr[H]);}if(V.zV.get_length()>0){V.zV.removeAllDocuments();}};this.Yo=function(bx,aP,cc,dI){if(ay[bx]&&ay[bx].gy===true){var bw=document.getElementById(ay[bx].bQ);if(bw&&bw.aC&&bw.aC.en()===true){if(dI){IPCC.aA.dI(dI,"selectText");var ha=bw.aC.CE();var avP=ha.iI;var awu=ha.cP;ha.iI=dI;ha.cP=dI;bw.aC.showTextSelection(aP,cc);ha.iI=avP;ha.cP=awu;}else{bw.aC.showTextSelection(aP,cc);}}}};this.arp=function(){var ck=iG();var dr=[];if(ck){dr=qI(ck);}var H;for(H=0;H<dr.length;H++){if(ay[dr[H]].gy===true){var fJ=document.getElementById(ay[dr[H]].bQ),aC=fJ?fJ.aC:undefined;if(aC&&aC.en()===true){aC.showEmptyTextSelection(0);aC.extendTextSelection(undefined);aC.display();}}}};this.apY=function(bx){if(ay[bx]&&ay[bx].gy===true){var fJ=document.getElementById(ay[bx].bQ),aC=fJ?fJ.aC:undefined;if(aC&&aC.en()===true){aC.showEmptyTextSelection(0);aC.extendTextSelection(undefined);aC.display();}}};this.tU=function(){var bI,cK,aC;aL=null;IPCC.T.forEach(OW,function(H){bI=ay[H];cK=document.getElementById(bI.bQ);if(cK){aC=cK.aC;}if(aC){if(aC.en()&&aC.BB()){aC.showEmptyTextSelection(0);aC.extendTextSelection(undefined);if(bI.gy){aC.display();}}}bI=cK=aC=undefined;});};this.wB=function(bx,tf){var bw;var ax;var aeX=function(aoS,awk){return(aoS+awk)%360;};ay[bx].gl=aeX(ay[bx].gl,tf);if(ay[bx].bQ){bw=document.getElementById(ay[bx].bQ);}if(bw===undefined||bw===null){return;}ax=bw.aC;if(ax&&ax.en()===false){ay[bx].Cr=aeX(ay[bx].Cr,tf);return;}tY=true;if(ax&&ax.en()===true){ax.rotate(tf);}var be=0;var as=0;var dZ=hF;var eY=jm;if(iu(ra)===true){dZ=jm;eY=hF;}if(iu(ay[bx].gl)===true){if(ax&&ax.en()===true){be=ax.get_pageHeight();as=ax.get_pageWidth();}else{be=jm;as=hF;}}else{if(ax&&ax.en()===true){be=ax.get_pageWidth();as=ax.get_pageHeight();}else{be=hF;as=jm;}}tY=true;if(cV===IPCC.ViewMode.SinglePage){bw.style.width=be*dF*cu/ay[bx].gL+'px';bw.style.height=as*dF*cu/ay[bx].gs+'px';if(bx===cw){ae.style.width=be*dF*cu/ay[bx].gL+'px';ae.style.height=as*dF*cu/ay[bx].gs+'px';}}else if(cV===IPCC.ViewMode.Document){bw.style.width=be*dF*cu/ay[bx].gL+'px';bw.style.height=as*dF*cu/ay[bx].gs+'px';var H=0;if(fK===IPCC.PageLayout.VerticalScrollDirection){if(be*dF*cu/ay[bx].gL>gI){gI=be*dF*cu/ay[bx].gL;}else if(bw.clientHeight>=gI-10){gI=0;for(H=0;H<ay.length;H++){bw=document.getElementById(ay[H].bQ);if(bw&&bw.clientWidth>gI){gI=bw.clientWidth;}}}if(as*dF*cu/ay[bx].gs>hw){hw=as*dF*cu/ay[bx].gs;}}else{if(as*dF*cu/ay[bx].gs>hw){hw=as*dF*cu/ay[bx].gs;}else if(bw.clientWidth>=hw-10){hw=0;for(H=0;H<ay.length;H++){bw=document.getElementById(ay[H].bQ);if(bw&&bw.clientHeight>hw){hw=bw.clientHeight;}}}if(be*dF*cu/ay[bx].gL>gI){gI=be*dF*cu/ay[bx].gL;}}}else{var hD;if(fK===IPCC.PageLayout.VerticalScrollDirection){hD=dZ/be*dF*cu/ay[bx].gs;if(ax&&ax.en()===true){ax.zoom(hD);}tY=true;bw.style.width=dZ*dF*cu/ay[bx].gL+'px';bw.style.height=hD*as+'px';}else{hD=eY/as*dF*cu/ay[bx].gs;if(ax&&ax.en()===true){ax.zoom(hD);}tY=true;bw.style.height=eY*dF*cu/ay[bx].gs+'px';bw.style.width=hD*be+'px';}if(dZ*dF*cu/ay[bx].gL>gI){gI=dZ*dF*cu/ay[bx].gL;}if(eY*dF*cu/ay[bx].gs>hw){hw=eY*dF*cu/ay[bx].gs;}}if(ax&&ax.en()===true){tY=true;this.xN(bw,bx);setTimeout(function(){if(ve===false){return;}var hZ=yl();var nN=IPCC.T.filter(dB,function(el){return bx===el.aR-1;});yj(nN);kK(nN,true,hZ);},0);}};this.aEA=function(tf){var wj=cw;this.wB(cw,tf);if(cV!==IPCC.ViewMode.SinglePage){var V=this;setTimeout(function(){V.pK(wj);},10);}};this.aco=function(tf){var wj=cw;var ck=iG();if(cV!==IPCC.ViewMode.SinglePage){this.pK(wj);}var fP=0;var he=ay.length-1;var H;for(H=fP;H<=he;H++){this.wB(H,tf);}if(cV!==IPCC.ViewMode.SinglePage){var V=this;setTimeout(function(){aaF(ck);V.pK(wj);},10);}};function aeN(BH,mo){var lV=0;var qh=0;var DQ=false;tY=true;var ck=iG();if(ck){IPCC.T.forEach(ck.JA,function(bG){var fX=fK===IPCC.PageLayout.VerticalScrollDirection?bG.bj+eL:bG.aF+hi+ge;var aGz=BH.JA[bG.bd];if(aGz.yF){DQ=true;return;}if(mo&&bG.bd>=mo.kV&&bG.bd<=mo.kZ){var bw=document.getElementById(ay[bG.bd].bQ);if(bw){return;}}if(DQ){qh+=fX;}else{lV+=fX;}});}return{qh:qh,lV:lV};};function aaF(BH){if(cV===IPCC.ViewMode.SinglePage){return;}var mo=Mh(BH);var sk=aeN(BH,mo);if(fK===IPCC.PageLayout.VerticalScrollDirection){ae.style.paddingTop=sk.lV+'px';ae.style.paddingBottom=sk.qh+'px';}else{ae.style.paddingLeft=sk.lV+'px';ae.style.paddingRight=sk.qh+'px';}};function aDx(BH){if(cV===IPCC.ViewMode.SinglePage){return;}var LV;var mo;if(fK===IPCC.PageLayout.VerticalScrollDirection){LV=parseInt(window.getComputedStyle(ae,null).getPropertyValue('padding-top'),10);}else{LV=parseInt(window.getComputedStyle(ae,null).getPropertyValue('padding-left'),10);}mo=Mh(BH);var sk=aeN(BH,mo);if(fK===IPCC.PageLayout.VerticalScrollDirection){ae.style.paddingTop=sk.lV+'px';ae.style.paddingBottom=sk.qh+'px';ap.scrollTop=ap.scrollTop+sk.lV-LV;}else{ae.style.paddingLeft=sk.lV+'px';ae.style.paddingRight=sk.qh+'px';ap.scrollLeft=ap.scrollLeft+sk.lV-LV;}};this.Nn=function(bx){IPCC.aA.kf(bx,'pageIndex',0,ay.length-1);var bI=ay[bx];if(bI&&bI.bQ&&(bI.Ej===true||bI.vT===false)){var bS;var bw=document.getElementById(bI.bQ);if(bw.aC){bw.aC.dispose();}akh(bw);bS=new IPCC.Web.UI.PageView(bw,false,ap);if(bS){bS.set_autoUpdate(false);bS.tF(bw);bS.initialize();bS.set_imageHandlerUrl(bI.bf.so);bS.set_requireRequestsOptimize(vo);if(nc!==undefined){bS.set_serviceResponseTimeout(nc);}bS.set_scrollBars(IPCC.Web.UI.ScrollBars.None);bS.QB(az===IPCC.Web.UI.MouseTool.HandPan||az===IPCC.Web.UI.MouseTool.EditMarks);Yb(bS,bI);We(bS);Zm(bS);Wm(bS);Zp(bS);}bS.set_textRequired(sN);bS.set_markHandleMode(sh);bS.set_debug(_debug);bS.set_gamma(qO);bS.set_sharpening(rv);bS.set_svgLineWidthMultiplier(ma);bS.set_debugErrorLevel(ph);bS.ou(V.jt());if(qb){bS.set_resourcePath(qb);}if(iB){bS.Kr(iB());}else{bS.set_mouseTool(IPCC.Web.UI.MouseTool.None);}bS.pe(V.mH());bI.Ej=false;bI.zO=false;var zz={encodedDocumentIdentifier:bI.bf.get_encodedDocumentIdentifier(),pageNumber:bx,artServiceOption:0,documentArtPage:bI.eS,viewRotationDegreesClockwise:bI.gl};if(bI.bJ){zz.artPage=bI.bJ;}if(bI.eS){zz.documentArtPage=bI.eS;}bS.openPage(zz);bI.vT=true;kC++;}};function Yd(eI,eP){if(hF<=0){return;}var dZ=hF;var eY=jm;var ej=cu/ay[0].gL;if(iu(ra)===true){dZ=jm;eY=hF;ej=cu/ay[0].gs;}var jG=1;if(fK===IPCC.PageLayout.VerticalScrollDirection){jG=(ap.clientWidth-wc()-(hi+ge+mp+oM))/(dZ*ej);}else{jG=(ap.clientHeight-(eL+iV+nT+pL))/(eY*ej);}var vB;if(dF<=jG){vB=false;}else if(dF>jG){vB=true;}if(isNaN(jG)||jG<=0||Math.abs(jG)===Infinity){return;}dF=jG;gI=0;hw=0;var fP=0;var he=ay.length-1;var aa=0;var ax;for(aa=fP;aa<=he;aa++,ax=undefined){var bw=document.getElementById(ay[aa].bQ);if(bw){ax=bw.aC;}if(ax===undefined){continue;}var be=dZ;var as=eY;if(ay[aa].lq()>0){if(iu(ay[aa].gl)===true){be=ay[aa].qG();as=ay[aa].lq();}else{be=ay[aa].lq();as=ay[aa].qG();}}var hD=1;if(fK===IPCC.PageLayout.VerticalScrollDirection){hD=dZ/be*dF*ej;bw.style.width=dZ*dF*ej+'px';bw.style.height=as*hD+'px';if(dZ*dF*ej>gI){gI=dZ*dF*ej;}if(as*hD*cu/ay[aa].gs>hw){hw=as*hD*ej;}}else{hD=eY/as*dF;bw.style.height=eY*dF*ej+'px';bw.style.width=be*hD*ej+'px';if(be*dF*cu/ay[aa].gL>gI){gI=be*dF*ej;}if(eY*hD*ej>hw){hw=eY*hD*ej;}}if(ax&&ay[aa].gy===true&&ax.en()===true){ax.zoom(hD);}if(ax&&ay[aa].gy===true&&ax.en()===true){ax.display();}ax=undefined;}iG();oI();setTimeout(function(){yj(dB);kK(dB);},0);V.bm('scaleChanged',{scaleType:(vB)?"scaledDown":"scaledUp",scaleTrigger:eI,fitType:eP,scaleFactor:dF});};function iu(gB){switch(gB){case 90:case 270:case-90:case-270:return true;default:return false;}};function hm(qJ){var vR=document.createElement('div');var H;for(H in qJ){if(qJ.hasOwnProperty(H)){vR.style[H]=qJ[H];}}return vR;};this.arw=function(){if(Kz===undefined||Kz===null){Kz=1;}var dE=this.oW().id.toString()+'_'+Kz.toString();Kz++;return dE;};this.YM=function(){return this.zV;};this.gJ=function(aym){for(var tg=0;tg<ay.length;tg++){var apZ=ay[tg];if(aym===apZ.eo){return ay[tg].bJ;}}return null;};this.aHL=function(iS){var bw=document.getElementById(ay[iS.get_pageNumber()].bQ);if(bw){return bw.aC.mf();}return null;};this.aGw=function(){if(nn===false||ih!==null||vF){return;}var ck=iG();aeP(ck);};function aBP(bP,J){Wc(J);};function Wc(aG){var gr=aG.imGearDocument;var aBd=V.arw();gr.Rh=aBd;var cR=gr.get_pages();var cl=cR.get_length();if(cl>0){var PM=document.createDocumentFragment();for(var aa=0;aa<cl;aa++){var bI=cR.getPage(aa);if(!bI.bf){bI.bf=gr;}Jj(bI,bI.get_pageNumber()===0?null:PM);}ae.appendChild(PM);}};var aEL=IPCC.T.alz(function(){if(Jp.length>0&&nn){var cf;var Hm;var HW=0;IPCC.T.forEach(Jp,aea);var abe=iG();if(!abe){return;}var la=abe.JA;IPCC.T.forEach(Jp,function(bI,bd){cf=bI.oO();Hm=la[cf];if(fK===IPCC.PageLayout.VerticalScrollDirection){HW+=Hm.bj+eL;}else{HW+=Hm.aF+hi;}});if(HW&&cV!==IPCC.ViewMode.SinglePage){if(fK===IPCC.PageLayout.VerticalScrollDirection){ae.style.paddingBottom=HW+'px';}else{ae.style.paddingRight=HW+'px';}}yj(dB,true);kK(dB,true);if(V.zV.Qs(0).fC===ay.length){V.bm('allPagesAdded');}oI();}Jp=[];},10);function Tx(bP,J){if(J.imGearPage.get_pageNumber()===0){Jj(J.imGearPage);return;}Jp.push(J.imGearPage);aEL();};function Vb(bP,J){var cf=J.imGearPage.get_pageNumber();var TN=J.imGearPage.bf.get_documentIdentifier();for(var aa=0;aa<ay.length;aa++){if(ay[aa].eo.get_pageNumber()===cf&&ay[aa].eo.bf.get_documentIdentifier()===TN){var bw=document.getElementById(ay[aa].bQ);if(bw){ae.removeChild(bw);if(bw.aC){bw.aC.dispose();var nN=IPCC.T.filter(dB,function(el){return el.aR===ay[aa].cf+1;});LQ(nN);}}ay.splice(aa,1);}}};function aea(iS){if(!IPCC.T.contains(ay,iS)){var bi=new IPCC.bi({page:iS});if(ra){bi.gl=ra;}if(!bi.bf){bi.bf=iS.bf;}ay.push(bi);IPCC.Pagecounter++;ay=ay.sort(function(dR,dU){return dR.cf-dU.cf;});ark(iS);arm(iS);aqC(iS);bi.axe=false;bi.zO=false;aro(bi);aqz(bi);Ze(bi);arn(bi);aqw(bi);aqn(bi);apT(bi);aqy(bi);aqM(bi);aqv(bi);return bi;}};function Jj(bI,PM){var Qc=bI.get_pageNumber();var dp=V.oW();var gr=null;var ZA;var cl=V.get_documents().get_length();for(var ag=0;ag<cl;ag++){gr=V.get_documents().getDocument(ag);if(gr!==null){ZA=gr.Rh;if(ZA===bI.bf.Rh){break;}}}var gS=IPCC.T.find(ay,function(bi){return bi.eo&&bi.eo===bI;});if(!gS){gS=aea(bI);}gS.Ff=true;var acQ=gS.bQ;if(gS.GS===1){return document.getElementById(acQ);}gS.GS=1;if(ae===''){aeQ();}var jJ=(function(){var bh;if(cV!==IPCC.ViewMode.SinglePage){bh=hm({overflow:'hidden',position:'relative'});}else{bh=hm({overflow:'hidden',position:'absolute',margin:'0px'});if(gS.cf>cw){V.lz(bh,'pccNextPage');}else if(gS.cf<cw){V.lz(bh,'pccPreviousPage');}else{V.lz(bh,'pccCurrentPage');}}rE.push(bI.cf);V.lz(bh,'pccPageListItem');akh(bh);var Dh=WP(gS);bh.style.width=Dh.aF+'px';bh.style.height=Dh.bj+'px';var ck=iG();var MV;if(fK===IPCC.PageLayout.VerticalScrollDirection||cV===IPCC.ViewMode.SinglePage){bh.style.display='block';if(hF>0){bh.style.margin=eL+'px auto '+iV+'px auto';}if(ck.ce.length>0&&cV!==IPCC.ViewMode.SinglePage){MV=ck.ce[0];if(Qc<MV.bd){var aoW=IPCC.T.OT(ae,'padding-top');var aob=IPCC.T.MW(aoW);var YL=aob-Dh.bj-eL;if(YL<0){YL=0;}ae.style.paddingTop=YL+'px';}else{var arW=IPCC.T.OT(ae,'padding-bottom');var arY=IPCC.T.MW(arW);var YH=arY-Dh.bj-eL;if(YH<0){YH=0;}ae.style.paddingBottom=YH+'px';}}}else{bh.style.display='inline-block';if(hF>0){bh.style.margin=eL+'px '+hi+'px '+iV+'px '+ge+'px';}if(ck.ce.length>0&&cV!==IPCC.ViewMode.SinglePage){MV=ck.ce[0];if(Qc<MV.bd){var asZ=IPCC.T.OT(ae,'padding-left');var asE=IPCC.T.MW(asZ);var Zg=asE-Dh.aF-hi;if(Zg<0){Zg=0;}ae.style.paddingLeft=Zg+'px';}else{var aog=IPCC.T.OT(ae,'padding-right');var anV=IPCC.T.MW(aog);var YO=anV-Dh.aF-hi;if(YO<0){YO=0;}ae.style.paddingRight=YO+'px';}}}bh.setAttribute('id',acQ);return bh;}());gS.eo=gS.eo||bI;gS.afi=gS.afi||ZA;gS.gl=gS.gl!==undefined?gS.gl:ra;gS.gy=false;function aCh(fJ){var TI=fJ.childNodes;var ayj=IPCC.T.find(ay,function(bi){if(bi.cf<=Qc){return;}var jy=IPCC.T.find(TI,function(jy){return jy.id&&jy.id===bi.bQ;});if(!jy){return;}if(bi.cf>Qc){jy.parentElement.insertBefore(jJ,jy);return true;}});if(!ayj){fJ.appendChild(jJ);}}(function aHI(){if(ay.length===1){ae.appendChild(jJ);}else{return aCh(PM||ae);}}());var aDO=false;if(jJ&&dp.clientWidth>0){var aok=dp.clientWidth/(jJ.clientWidth+(jJ.clientLeft*2));var aEq=dp.clientHeight/(jJ.clientHeight+(jJ.clientTop*2));if(ay.length<(aok*aEq)){aDO=true;}}if(ay.length<2){var bS=new IPCC.Web.UI.PageView(jJ,false,ap);if(bS){bS.set_autoUpdate(false);bS.tF(jJ);bS.initialize();bS.set_imageHandlerUrl(bI.bf.so);bS.set_imGearPage(gS.eo);bS.set_artPage(gS.bJ);bS.set_documentArtPage(gS.eS);bS.set_requireRequestsOptimize(vo);if(nc!==undefined){bS.set_serviceResponseTimeout(nc);}bS.set_scrollBars(IPCC.Web.UI.ScrollBars.None);bS.set_textRequired(sN);bS.set_markHandleMode(sh);bS.set_debug(_debug);bS.set_gamma(qO);bS.set_sharpening(rv);bS.set_svgLineWidthMultiplier(ma);bS.set_debugErrorLevel(ph);bS.ou(V.jt());if(qb){bS.set_resourcePath(qb);}if(iB){bS.Kr(iB());}else{bS.set_mouseTool(IPCC.Web.UI.MouseTool.None);}bS.pe(V.mH());bS.QB(az===IPCC.Web.UI.MouseTool.HandPan||az===IPCC.Web.UI.MouseTool.EditMarks);}Yb(bS,gS);Zm(bS);Wm(bS);We(bS);Zp(bS);bS.openPage({encodedDocumentIdentifier:bI.bf.get_encodedDocumentIdentifier(),pageNumber:bI.get_pageNumber(),artServiceOption:0,imGearPage:gS.eo,artPage:gS.bJ,documentArtPage:gS.eS,viewRotationDegreesClockwise:gS.gl});gS.vT=true;kC++;}return jJ;};function alx(bi){return bi.Ff;};function oI(){if(kC>0||nn===false||ih!==null){return;}if(vF){return;}var ck=iG();if(!ck){return;}ay.forEach(function(bI,bd){if(!bI.gy){return;}V.KP(bd);});var zI=anN(ck);IPCC.T.forEach(zI||[],function(bd){var bI=ay[bd];if(bI){ake(bI);}});IPCC.T.forEach(ck.ce,function(Hm){var bi=ay[Hm.bd];if(alx(bi)&& !bi.gy&&bi.GS){Pr(bi);}});aeP(ck);atM();};function aeP(ck){if(!ck){return;}var mo=Mh(ck);for(var bd=mo.kV;bd<=mo.kZ;bd++){var bi=ay[bd];if(!alx(bi)){bi.Ff=true;var ZE=V.YM();var gr=ZE.Qs(0);var iS=gr.cR.jj(bd);Jj(iS);akg(bi,false);}}};function anN(ck){var ayH=qI(ck);var zI=[];IPCC.T.forEach(ayH,function(bd){var bI=ay[bd];if(bI&&bI.GS===0){var ZE=V.YM();var gr=ZE.Qs(0);var iS=gr.cR.jj(bd);Jj(iS);zI.push(bd);}});return zI;};function atM(){var ty=ap.scrollTop;var tM=ap.scrollLeft;var wQ=ap.clientHeight;var vd=ap.clientWidth;var wT=ap.scrollWidth;var uE=ap.scrollHeight;var ck=aby({ty:ty,tM:tM,wQ:wQ,vd:vd,wT:wT,uE:uE});var mo=Mh(ck);var abc=aoI(ck);var lV=0;var qh=0;var DQ=false;IPCC.T.forEach(ck.JA,function(bG){var fX=fK===IPCC.PageLayout.VerticalScrollDirection?bG.bj+eL:bG.aF+hi+ge;var bd= +bG.bd;if(bG.yF||(cV===IPCC.ViewMode.SinglePage&&bd===cw)){DQ=true;return;}if(bd>=mo.kV&&bd<=mo.kZ){if(bd>=abc.kV&&bd<=abc.kZ){return;}if(DQ){if(BO(bd,true)> -1){qh+=fX;}}else{if(BO(bd,true)> -1){lV+=fX;}}return;}if(DQ){qh+=fX;BO(bd);}else{lV+=fX;BO(bd);}});if(cV===IPCC.ViewMode.SinglePage){return;}if(fK===IPCC.PageLayout.VerticalScrollDirection){ae.style.paddingTop=lV+'px';ae.style.paddingBottom=qh+'px';}else{ae.style.paddingLeft=lV+'px';ae.style.paddingRight=qh+'px';}};function BO(aa,avx){var bI=ay[aa];if(!bI){return-1;}if(avx===true&& !bI.gy){return-1;}bI.zO=false;bI.vT=false;bI.gy=false;bI.GS=0;bI.Ff=false;if(Mj&& !bI.eo.cd().axA()&&QI!==true){bI.eo.afe();}var xp=document.getElementById(bI.bQ);if(!xp){return-1;}if(xp.aC){xp.aC.dispose();xp.parentElement.removeChild(xp);return aa;}else{xp.parentElement.removeChild(xp);}return-1;};function Pr(bi){var bh=document.getElementById(bi.bQ);V.xN(bh,bi.cf);};function ake(bi){akg(bi,true);Pr(bi);};function akg(bI,aum){var bh=document.getElementById(bI.bQ);if(bh===null){return;}var bS=new IPCC.Web.UI.PageView(bh,false,ap);bS.set_autoUpdate(false);bS.tF(document.getElementById(bI.bQ));bS.initialize();bS.set_imageHandlerUrl(bI.bf.so);bS.set_imGearPage(bI.eo);bS.set_artPage(bI.bJ);bS.set_requireRequestsOptimize(vo);if(nc!==undefined){bS.set_serviceResponseTimeout(nc);}bS.set_scrollBars(IPCC.Web.UI.ScrollBars.None);bS.set_textRequired(sN);bS.set_markHandleMode(sh);bS.set_debug(_debug);bS.set_gamma(qO);bS.set_sharpening(rv);bS.set_svgLineWidthMultiplier(ma);bS.set_debugErrorLevel(ph);bS.ou(V.jt());if(qb){bS.set_resourcePath(qb);}if(iB){bS.Kr(iB());}else{bS.set_mouseTool(IPCC.Web.UI.MouseTool.None);}bS.pe(V.mH());bS.QB(az===IPCC.Web.UI.MouseTool.HandPan||az===IPCC.Web.UI.MouseTool.EditMarks);Yb(bS,bI);Zm(bS);Wm(bS);We(bS);Zp(bS);if(aum===true){bS.add_pageOpened(function aGD(av){V.xN(bh,bI.cf);});}if(bI.zO===false&&bI.eo){bI.Ff=true;var zz={encodedDocumentIdentifier:bI.eo.bf.get_encodedDocumentIdentifier(),pageNumber:bI.eo.get_pageNumber(),imGearPage:bI.eo,viewRotationDegreesClockwise:bI.gl};if(bI.bJ){zz.artPage=bI.bJ;}if(bI.eS){zz.documentArtPage=bI.eS;}bS.openPage(zz);bI.vT=true;kC++;}};function anl(bJ,hf){var aQ;bJ.forEachMark(function(K){switch(K.get_type()){case IPCC.Web.UI.MarkType.Line:var aW=K.get_points();var bH=aW.yM(0);var lp=aW.yM(1);aW.setPoint(0,new IPCC.Web.UI.Point(bH.x*hf,bH.y*hf));aW.setPoint(1,new IPCC.Web.UI.Point(lp.x*hf,lp.y*hf));break;case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Ellipse:case IPCC.Web.UI.MarkType.Stamp:case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Freehand:case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.SignatureText:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:case IPCC.Web.UI.MarkType.TextSelectionRedaction:aQ=K.get_rectangle();K.set_rectangle({x:aQ.x*hf,y:aQ.y*hf,width:aQ.width*hf,height:aQ.height*hf});break;case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.Strikethrough:aQ=K.get_rectangle();K.set_rectangle({x:aQ.x*hf,y:aQ.y*hf,width:aQ.width*hf,height:aQ.height*hf});var by=K.by,gR;for(var i=0;i<by.length;i++){gR=by[i];gR.x=gR.x*hf;gR.y=gR.y*hf;gR.width=gR.width*hf;gR.height=gR.height*hf;}break;default:break;}});};function Yb(bS,bI){function aCE(sender,evnt){var adF=function(aF,bj,aR){var Xw={'width':aF,'height':bj,'pageNumber':aR};V.bm('pageOpening',Xw);};var cf=evnt.pageNumber;var TN=evnt.documentIdentifier;bI.be=bS.get_pageWidth();bI.as=bS.get_pageHeight();var gV=bS.get_pageXResolution();var gx=bS.get_pageYResolution();if(!isNaN(parseFloat(gV))&&isFinite(gV)){bI.gL=gV;}if(!isNaN(parseFloat(gx))&&isFinite(gx)){bI.gs=gx;}bS=null;for(var aa=0;aa<ay.length;aa++){if(nn&&ay[aa].eo.get_pageNumber()===cf&&ay[aa].eo.bf.get_documentIdentifier()===TN){ay[aa].vT=false;ay[aa].zO=true;ay[aa].Ej=false;if(cV===IPCC.ViewMode.SinglePage){var nl= -1;if(Array.prototype.indexOf){nl=rE.indexOf(aa);}else{nl=IPCC.Web.jQ(rE,aa);}if(nl!== -1){rE.splice(nl,1);}}var ais=false;for(var ag=0;ag<OW.length;ag++){if(OW[ag]===aa){ais=true;}}if(ais===false){OW.push(aa);}var mi=0;var lU=0;var bw=document.getElementById(ay[aa].bQ);var ax=bw.aC;var dZ;var eY;var ZT;if(hF===0&&(aa===0||ay[0].Ej===true)){if(bw.currentStyle){nT=parseInt(bw.currentStyle.borderTopWidth,10)||0;eL=parseInt(bw.currentStyle.marginTop,10)||0;mp=parseInt(bw.currentStyle.borderLeftWidth,10)||0;hi=parseInt(bw.currentStyle.marginLeft,10)||0;pL=parseInt(bw.currentStyle.borderBottomWidth,10)||0;iV=parseInt(bw.currentStyle.marginBottom,10)||0;oM=parseInt(bw.currentStyle.borderRightWidth,10)||0;ge=parseInt(bw.currentStyle.marginRight,10)||0;}else if(document.defaultView&&document.defaultView.getComputedStyle){var vV=document.defaultView.getComputedStyle(bw);nT=parseInt(vV.borderTopWidth,10)||0;eL=parseInt(vV.marginTop,10)||0;mp=parseInt(vV.borderLeftWidth,10)||0;hi=parseInt(vV.marginLeft,10)||0;pL=parseInt(vV.borderBottomWidth,10)||0;iV=parseInt(vV.marginBottom,10)||0;oM=parseInt(vV.borderRightWidth,10)||0;ge=parseInt(vV.marginRight,10)||0;}if(cV===IPCC.ViewMode.SinglePage){bw.style.margin=eL+'px 0px '+iV+'px 0px';ae.style.margin="0px auto";}else{if(fK===IPCC.PageLayout.VerticalScrollDirection){bw.style.margin=eL+'px auto '+iV+'px auto';}else{bw.style.margin=eL+'px '+ge+'px '+iV+'px '+hi+'px';ae.style.margin='0px '+ge+'px 0px '+hi+'px';}}hF=ax.get_pageWidth();jm=ax.get_pageHeight();ajL=gV;dZ=hF;eY=jm;var ej=cu/ay[aa].gL;if(iu(ay[aa].gl)===true){eY=hF;dZ=jm;ej=cu/ay[aa].gs;}if(cV===IPCC.ViewMode.SinglePage){var arl=(ap.offsetWidth-(hi+ge+mp+oM));var arf=(ap.offsetHeight-(eL+iV+nT+pL+aua));oe=arl/(dZ*ej);ZT=arf/(eY*ej);if(ZT<oe){oe=ZT;}ax.zoom(oe*ej);}else if(fK===IPCC.PageLayout.VerticalScrollDirection){oe=(ap.offsetWidth-IPCC.Web.oT()-(hi+ge+mp+oM))/(dZ*ej);ax.zoom(oe*ej);}else{oe=(ap.offsetHeight-IPCC.Web.oT()-(eL+iV+nT+pL))/(eY*ej);ax.zoom(oe*ej);}mi=dZ*oe*ej;lU=eY*oe*ej;bw.style.width=mi+'px';bw.style.height=lU+'px';if(cV===IPCC.ViewMode.SinglePage){ae.style.width=mi+'px';ae.style.height=lU+'px';}if(cV!==IPCC.ViewMode.SinglePage){for(var tg=0;tg<ay.length;tg++){if(ay[tg].gy===false&&tg!==aa){if(ay[tg].bQ){bw=document.getElementById(ay[tg].bQ);bw.style.width=dZ*oe+'px';bw.style.height=eY*oe+'px';if(fK===IPCC.PageLayout.VerticalScrollDirection){bw.style.margin=eL+'px auto '+iV+'px auto';}else{bw.style.margin=eL+'px '+ge+'px '+iV+'px '+hi+'px';}}}}}dF=oe;adF(bI.be,bI.as,cf+1);bw.aC.display();}else{if(cV===IPCC.ViewMode.Document||cV===IPCC.ViewMode.SinglePage){if(iu(ay[aa].gl)===true){mi=ax.get_pageHeight()*dF*cu/ay[aa].gL;lU=ax.get_pageWidth()*dF*cu/ay[aa].gs;}else{mi=ax.get_pageWidth()*dF*cu/ay[aa].gL;lU=ax.get_pageHeight()*dF*cu/ay[aa].gs;}}else{var hD;var be=ax.get_pageWidth();var as=ax.get_pageHeight();dZ=hF;eY=jm;if(iu(ra)===true){dZ=jm;eY=hF;}if(iu(ay[aa].gl)===true){be=ax.get_pageHeight();as=ax.get_pageWidth();}if(fK===IPCC.PageLayout.VerticalScrollDirection){hD=dZ/be*dF*cu/ay[0].gs;mi=dZ*dF*cu/ay[0].gL;lU=as*hD;}else{hD=eY/as*dF*cu/ay[0].gL;lU=eY*dF*cu/ay[0].gs;mi=be*hD;}}if(mi!==Math.round(mi)){mi=Math.floor(mi*100)/100;}if(lU!==Math.round(lU)){lU=Math.floor(lU*100)/100;}if(bw.style.width!==mi+'px'||bw.style.height!==lU+'px'){if(fK===IPCC.PageLayout.VerticalScrollDirection){bw.style.width=mi+'px';bw.style.height=lU+'px';}else{bw.style.width=mi+'px';bw.style.height=lU+'px';}yj(dB,true);kK(dB,true);}adF(bI.be,bI.as,cf+1);}if(mi>gI){gI=mi;if(fK===IPCC.PageLayout.VerticalScrollDirection){ap.scrollLeft=(gI-ap.clientWidth)/2;}}if(lU>hw){hw=lU;if(fK===IPCC.PageLayout.HorizontalScrollDirection){ap.scrollTop=(hw-ap.clientHeight)/2;}}if(ay[aa].Cr>0){var XV=document.getElementById(ay[aa].bQ).aC;if(XV){XV.rotate(ay[aa].Cr);XV.display();ay[aa].Cr=0;}}if(kC>0){kC=kC-1;}if(ay[aa].aih()===true){var iS=ay[aa].eo;var hf=ay[aa].lq()/iS.afM();if(hf!==1){var bJ=V.gJ(iS);if(bJ){anl(bJ,hf);}}}ay[aa].UV(false);iG();var Iu=new IPCC.OpenPageEventArgs();Iu.pageIndex=evnt.pageNumber;Iu.imGearPage=evnt.imGearPage;Iu.viewRotationDegreesClockwise=evnt.viewRotationDegreesClockwise;Iu.pageNodeID=ay[aa].bQ;V.bm('pageOpened',Iu);break;}}if(kC===0&&lD===null&&ih===null){setTimeout(function(){oI();},60);}};bS.add_pageOpened(aCE);};function Zm(bS){function aBc(bP,ai){if(nn===false){return;}var xY;if(ai.pageNumber>=0){if(ay[ai.pageNumber].bQ){xY=ay[ai.pageNumber].bQ;}}ay[ai.pageNumber].Ej=true;ay[ai.pageNumber].vT=false;ay[ai.pageNumber].zO=false;ay[ai.pageNumber].gy=false;var oA=new IPCC.ExceptionEventArgs();oA.exception=ai.exception;oA.pageIndex=ai.pageNumber;oA.pageNodeID=xY;V.bm('pageOpenFailed',oA);if(kC>0){kC=kC-1;if(kC===0){setTimeout(function(){oI();},60);}}};bS.add_pageOpenFailed(aBc);};function Wm(bS){function aCv(bP,ai){if(nn===false){return;}var J=new IPCC.PageEventArgs();J.pageIndex=ai.aR;J.imGearPage=ay[ai.aR].eo;J.pageNodeID=ay[ai.aR].bQ;ay[ai.aR].gy=true;if(cV===IPCC.ViewMode.SinglePage){var nl= -1;if(Array.prototype.indexOf){nl=rE.indexOf(ai.aR);}else{nl=IPCC.Web.jQ(rE,ai.aR);}if(nl!== -1){rE.splice(nl,1);}}V.bm('pageDisplayed',J);setTimeout(function(){var nN=IPCC.T.filter(dB,function(el){if(cV===IPCC.ViewMode.SinglePage){return ai.aR===el.aR-1&&el.aR-1===cw;}else{return ai.aR===el.aR-1;}});yj(nN);kK(nN);},0);};bS.add_pageDisplayed(aCv);};function arm(bI){function GI(bP,ai){if(nn===false){return;}V.bm('textPageReady',{pageIndex:ai.pageNumber,containsText:ai.containsText});var ck=iG();var dr=[];if(ck){dr=qI(ck);}if(ai.containsText===true&&ai.pageNumber>=dr[0]&&ai.pageNumber<=dr[dr.length-1]){if(ay[ai.pageNumber].bJ&&ay[ai.pageNumber].bJ.get_markCount()>0){var bw=document.getElementById(ay[ai.pageNumber].bQ);V.xN(bw,ai.pageNumber);}}};bI.xG(GI);};function aqC(bI){function aCy(bP,ai){if(nn===false){return;}var eS=ay[ai.pageNumber].eS;bI.agp().Jm().lx(function(gg){var K=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.DocumentHyperlink),aQ=gg.eH();K.set_rectangle(new IPCC.Web.UI.Rectangle(aQ.x,aQ.y,aQ.width,aQ.height));K.set_href(gg.agX());K.set_lineColor(gg.auP());K.set_lineWidth(gg.avX());K.set_borderPattern(gg.atY());K.set_borderType(gg.avm());K.set_borderHorizontalRadius(gg.aub());K.set_borderVerticalRadius(gg.aww());K.set_borderOpacity(gg.auy());eS.addMark(K);gg.aoq(K);});V.bm('hyperlinkPageReady',{pageIndex:ai.pageNumber});var ck=iG();var dr=[];if(ck){dr=qI(ck);}if(ai.pageNumber>=dr[0]&&ai.pageNumber<=dr[dr.length-1]){var bw=document.getElementById(ay[ai.pageNumber].bQ);V.xN(bw,ai.pageNumber);}};bI.abq(aCy);};function ark(bI){function FH(bP,ai){if(nn===false){return;}var xY;if(ai.pageNumber>=0){if(ay[ai.pageNumber].bQ){xY=ay[ai.pageNumber].bQ;}}V.bm('textExtractionFailed',{'exception':ai.exception,'pageIndex':ai.pageNumber,'pageNodeID':xY});};bI.xh(FH);};function We(bS){function aCP(bP,ai){if(nn===false){return;}var xY;if(isNaN(ai.pageNumber)===false){if(ai.pageNumber>=0){if(ay[ai.pageNumber].bQ){xY=ay[ai.pageNumber].bQ;}}ay[ai.pageNumber].Ej=true;ay[ai.pageNumber].vT=false;ay[ai.pageNumber].zO=false;ay[ai.pageNumber].gy=false;}var oA=new IPCC.ExceptionEventArgs();oA.functionName=ai.function_name;oA.exception=ai.exception;oA.pageIndex=ai.pageNumber;oA.pageNodeID=xY;V.bm('exceptionThrown',oA);if(kC>0){kC=kC-1;if(kC===0){setTimeout(function(){oI();},60);}}};bS.add_exceptionThrown(aCP);};function Zp(bS){function ES(bP,ai){V.bm('markCreating',ai);};bS.add_markCreating(ES);};function aro(bi){function acX(){if(nn===false){return;}var ck=iG();var dr=[];if(ck){dr=qI(ck);}if(bi.cf>=dr[0]&&bi.cf<=dr[dr.length-1]){var bw=document.getElementById(bi.bQ);V.xN(bw,bi.cf);}var J=new IPCC.Web.UI.MarkEventArgs();J.pageIndex=bi.cf;V.bm('marksLoaded',J);};bi.bJ.add_marksLoaded(acX);};function aqz(bi){function mj(bP,ai){var J=new IPCC.Web.UI.MarkEventArgs();J.pageIndex=bi.cf;J.mark=ai.mark;J.zIndex=ai.zIndex;J.clientX=ai.clientX;J.clientY=ai.clientY;V.bm('markAdded',J);};bi.bJ.add_markAdded(mj);};function Ze(bi){var Sz,sx=false,XK,WV;function Ik(L,fh){if(ve===false){return;}var hZ=yl();amy(L,fh,hZ);kK(dB,true,hZ);};function aEv(L,fh){XK=L;WV=fh;if(sx&& !Sz){Sz=GW(function(){sx=false;Sz=undefined;if(XK&&WV){Ik(XK,WV);}else{Ik(L,fh);}});}};function ml(bP,ai){if(ai.mark.vG===true){return;}var J=new IPCC.Web.UI.MarkEventArgs();J.pageIndex=bi.cf;J.mark=ai.mark;J.zIndex=ai.zIndex;J.propertyName=ai.propertyName;V.bm('markChanged',J);var fh=dB[ai.mark.get_markID()];if(fh&&(ai.propertyName==='rectangle'||ai.propertyName==='points'||ai.propertyName==='startPoint'||ai.propertyName==='endPoint')){sx=true;aEv(ai.mark,fh);}else if(fh&&ai.propertyName==='visible'){var aAE=ai.mark.get_visible();var Xd=(function(db){return IPCC.T.inArray(KH(),db.aR-1);})(fh);if(aAE&&Xd){Xp([fh]);kK(dB,true,yl());}else{LQ([fh]);}}};bi.bJ.add_markChanged(ml);};function arn(bi){function ado(bP,ai){var J=new IPCC.Web.UI.MarkEventArgs();J.pageIndex=bi.cf;J.mark=ai.mark;J.zIndex=ai.zIndex;J.oldZIndex=ai.oldZIndex;V.bm('markReordered',J);};bi.bJ.add_markReordered(ado);};function aqw(bi){function ED(bP,ai){if(ai.mark.vG===true){return;}var J=new IPCC.Web.UI.MarkEventArgs();J.pageIndex=bi.cf;J.mark=ai.mark;J.zIndex=ai.zIndex;V.bm('markSelectionChanged',J);};bi.bJ.add_markSelectionChanged(ED);};function apT(bi){function CX(bP,ai){if(ai.mark){var J=new IPCC.Web.UI.MarkEventArgs();J.pageIndex=bi.cf;J.mark=ai.mark;J.zIndex=ai.zIndex;V.bm('markRemoved',J);var fh=dB[ai.mark.get_markID()];if(fh){if(ai.mark.get_conversation()===iK){iK=null;}fh.dO.parentElement.removeChild(fh.dO);delete dB[ai.mark.get_markID()];kK(dB,true);}}};bi.bJ.add_markRemoved(CX);};function aqn(bi){function zh(bP,ai){var J=new IPCC.Web.UI.MarkEventArgs();J.pageIndex=bi.cf;J.mark=ai.mark;J.zIndex=ai.zIndex;V.bm('markTextSelectionChanged',J);};bi.bJ.add_markTextSelectionChanged(zh);};function amy(L,fh,NZ){var bi=ay[fh.aR-1],bI=document.getElementById(bi.bQ),EE=ZW(L,bi.cf+1);if(bI&&bI.aC){var ct=bI.aC.transformPagePointToWindow(new IPCC.Web.UI.Point(EE.x,EE.y),true);var pu=(eL*bi.cf);var If=(bI.offsetTop-pu+ct.y)/(NZ-(eL*ay.length));fh.aQ=EE;fh.TJ=If;}};function LQ(iY,aR){var axH=typeof aR==='undefined';IPCC.T.forEach(iY,function(ab){if(ab&&(axH||ab.pageNumber===aR)){ab.dO.style.display='none';ab.yF=false;}});};function wc(){if(kt.currentStyle&&kt.currentStyle.display==='none'){return 0;}return kt.clientWidth;};function yl(){if(kt.currentStyle&&kt.currentStyle.display==='none'){return 0;}return kt.offsetHeight;};function Xp(iY,aR){var aoE=typeof aR==='undefined';IPCC.T.forEach(iY,function(el){if(aoE||el.pageNumber===aR){el.dO.style.display='';el.yF=true;if(el&&el.K&&el.K.get_visible()===false){el.dO.style.display='none';el.yF=false;}}});};function yj(iY,abu){if(ve===false){return;}var Nt=(! !abu)?IPCC.T.filter(dB,function(db){return IPCC.T.contains(KH(),db.aR-1);}):iY;var hZ=yl();IPCC.T.forEach(Nt,function(el){amy(el.K,el,hZ);});};function avH(a,b){return(a.aQ.y!==b.aQ.y)?(a.aQ.y-b.aQ.y):(a.aQ.x!==b.aQ.x)?(a.aQ.x-b.aQ.x):(a.yQ-b.yQ);};function avs(a,b){return(a.aQ.x!==b.aQ.x)?(a.aQ.x-b.aQ.x):(a.aQ.y!==b.aQ.y)?(b.aQ.y-a.aQ.y):(a.yQ-b.yQ);};function awo(a,b){return(a.aQ.y!==b.aQ.y)?(b.aQ.y-a.aQ.y):(a.aQ.x!==b.aQ.x)?(b.aQ.x-a.aQ.x):(a.yQ-b.yQ);};function avz(a,b){return(a.aQ.x!==b.aQ.x)?(b.aQ.x-a.aQ.x):(a.aQ.y!==b.aQ.y)?(a.aQ.y-b.aQ.y):(a.yQ-b.yQ);};function aEa(Vc,hZ,CL){CL=CL||0;var _top,alM,Kl,Sk=(eL*ay.length),VY=hZ-Sk;IPCC.T.forEach(Vc,function(db){Kl=(eL*(db.aR-1));alM=(db.TJ*VY)+Kl;_top=Math.max(CL+5,alM);if(db.dO.style.top!==_top+'px'){db.dO.style.top=_top+'px';}CL=_top+db.Wt;});};function aDA(Vc,hZ){var KM,_top,Ln,Kl,afI,Sk=(eL*ay.length),VY=hZ-Sk;IPCC.T.forEach(Vc,function(db){Kl=(eL*(db.aR-1));Ln=(db.TJ*VY)+Kl;if(KM===undefined){KM=Ln;}if(db.K.get_conversation()===iK){_top=Ln;afI=_top+db.Wt;}else{_top=Math.min(KM-5-db.Wt,Ln);}if(db.dO.style.top!==_top+'px'){db.dO.style.top=_top+'px';}KM=_top;});return afI;};function kK(iY,abu,hZ){if(ve===false){return;}if(!hZ){hZ=yl();}var asV=function(a,b){if(a.aR!==b.aR){return(a.aR-b.aR);}var bI=ay[a.aR-1],gB=bI.gl;switch(gB){case 90:return avs(a,b);case 180:return awo(a,b);case 270:return avz(a,b);default:return avH(a,b);}};var Nt=(! !abu)?IPCC.T.filter(dB,function(db){return IPCC.T.inArray(KH(),db.aR-1);}):iY;Xp(Nt);var apa=IPCC.T.map(Nt,function(db,aV){db.Wt=db.dO.offsetHeight;return db;});var XS=apa.sort(asV);var Nu=[],Zv=[],YZ=false;if(iK){var aBS=dB[iK.get_mark().get_markID()];if(!IPCC.T.inArray(XS,aBS)){YZ=true;}IPCC.T.forEach(XS,function(db){if(YZ){Zv.push(db);}else if(db.K.get_conversation()===iK){Nu.unshift(db);YZ=true;}else{Nu.unshift(db);}});}else{Zv=XS;}var CL=0;if(Nu.length){CL=aDA(Nu,hZ);}aEa(Zv,hZ,CL);};function auz(iY,L,cf){var db=iY[L.ly()];db.aR=cf;db.K=L;db.aQ=ZW(L,cf);db.yQ=L.ee().oX(L);};function DK(L,iY,kw){var fh=iY[L.get_markID()];if(fh){fh.dO.parentElement.replaceChild(kw,fh.dO);fh.dO=kw;}return fh;};function aqi(L,iY,kw,aES,aGc,If,cf){var fh=new atv();fh.dO=kw;dB[L.get_markID()]=fh;auz(dB,L,cf);fh.TJ=If;aES.appendChild(kw);return fh;};function ZW(L,aR){var aQ=(L.get_boundingRectangle)?L.get_boundingRectangle():{},gB=ay[aR-1].gl;switch(gB){case 90:return{x:aQ.x,y:aQ.y+(aQ.height||0)};case 180:return{x:aQ.x+(aQ.width||0),y:aQ.y+(aQ.height||0)};case 270:return{x:aQ.x+(aQ.width||0),y:aQ.y};default:return{x:aQ.x,y:aQ.y};}};function aqy(bi){function QV(bP,ai){var J=new IPCC.Web.UI.CommentEventArgs();J.pageIndex=bi.cf;J.mark=ai.mark;J.index=ai.index;J.comment=ai.comment;var bI=document.getElementById(bi.bQ);V.bm('commentAdding',J);setTimeout(function(){var NZ=yl(),fh,dO;if(ai.index===0){dO=mw(ai.mark,{isSelected:false},null);if(!dO){return;}else if(!IPCC.T.uh(dO)){throw new Error(dO+' is not a valid HTMLElement');}var EE=ZW(ai.mark,bi.cf+1),aFI=EE.x,aFo=EE.y;var ct;if(bI&&bI.aC){ct=bI.aC.transformPagePointToWindow(new IPCC.Web.UI.Point(aFI,aFo),true);}else{ct=new IPCC.Web.UI.Point(0,0);}var pu=(eL*(bi.cf));var If=(alE(bi.cf)-pu+ct.y)/(NZ-(eL*ay.length));fh=aqi(ai.mark,dB,dO,kt,ct,If,bi.cf+1);}else{var JC=ai.mark.get_conversation()===iK;var currentConversationDiv=dB[ai.mark.get_markID()];if(!currentConversationDiv){return;}dO=mw(ai.mark,{isSelected:JC},currentConversationDiv.dO);if(!dO){return;}else if(!IPCC.T.uh(dO)){throw new Error(dO+' is not a valid HTMLElement');}fh=DK(ai.mark,dB,dO);}if(IPCC.T.contains(KH(),bi.cf)){kK(dB,true,NZ);}else{LQ([fh]);}V.bm('commentAdded',J);},0);};bi.bJ.add_commentAdded(QV);};function aqM(bi){function QN(bP,ai){var dO=null;if(dB[ai.mark.get_markID()]){dO=dB[ai.mark.get_markID()].dO;var JC=ai.mark.get_conversation()===iK;dO=mw(ai.mark,{isSelected:JC},dO);}if(!dO){V.bm('commentChanged',ai);return;}else if(!IPCC.T.uh(dO)){throw new Error(dO+' is not a valid HTMLElement');}if(dO){var hZ=yl();DK(ai.mark,dB,dO);kK(dB,true,hZ);}V.bm('commentChanged',ai);};bi.bJ.add_commentChanged(QN);};function aqv(bi){function Qz(bP,ai){var dO=null;if(dB[ai.mark.get_markID()]){dO=dB[ai.mark.get_markID()].dO;}var JC=ai.mark.get_conversation()===iK;dO=mw(ai.mark,{isSelected:JC},dO);if(IPCC.T.uh(dO)){DK(ai.mark,dB,dO);}else{var fh=dB[ai.mark.get_markID()];if(fh){if(ai.mark.get_conversation()===iK){iK=null;}fh.dO.parentElement.removeChild(fh.dO);delete dB[ai.mark.get_markID()];}}kK(dB,true);V.bm('commentRemoved',ai);};bi.bJ.add_commentRemoved(Qz);};function Uo(){var bj=jm;var aF=hF;var ars=function(ic){return{width:ic.width||(ic.right-ic.left),height:ic.height||(ic.bottom-ic.top),top:ic.top,bottom:ic.bottom,left:ic.left,right:ic.right};};var aht=ars(ap.getBoundingClientRect());var mz={height:aht.height/2};mz.width=mz.height*aF/bj;if(mz.width>aF/2){mz.width=aF/2;}if(mz.height>bj/2){mz.height=bj/2;}var YI=8;var amb={height:bj*YI,width:aF*YI};var avl=aF*dF<mz.width+5;var awO=aF*dF>amb.width-5;return{min:mz,max:amb,page:{width:aF,height:bj},viewport:aht,atMin:avl,atMax:awO,maxFactor:YI,minFactor:mz.width/aF};};function kX(aU,aad){if(aad){ael.apply(this,arguments);return;}var vB=(aU<dF)?true:false;var pa=Uo();if((pa.atMin&&vB)||(pa.atMax&& !vB)){return;}if(aU>pa.maxFactor){aU=pa.maxFactor;}else if(aU<pa.minFactor){aU=pa.minFactor;}if(!pa.atMax|| !pa.atMin){ael.apply(this,arguments);}};function ael(aU,aId,ba,de,Bz,rS,eI,eP){if(isNaN(aU)||aU<=0||Math.abs(aU)===Infinity){return;}var Su=cw;var ck=iG();var vB=(aU<dF)?true:false;var fP=0;var he=ay.length-1;if(cV===IPCC.ViewMode.SinglePage){if(cw-vf>=0){fP=cw-vf;}if(cw+vf<ay.length-1){he=cw+vf;}}var Mw=aU/dF;dF=aU;var Eu=ap.getBoundingClientRect();var ajM=(rS&&rS.x!==undefined)?rS.x:ap.scrollLeft+(Eu.width/2);var agu=(rS&&rS.y!==undefined)?rS.y:ap.scrollTop+(Eu.height/2);var ayx=rS&&rS.x!==undefined&&rS.y!==undefined;gI=0;hw=0;for(var aa=fP;aa<=he;aa++){var ax;var bw=document.getElementById(ay[aa].bQ);if(bw){ax=bw.aC;}else{continue;}if(aa===Su){var Nh=bw.getBoundingClientRect();if(!ayx){if(fK===IPCC.PageLayout.HorizontalScrollDirection&&Eu.height>Nh.height){agu-=((Eu.height-Nh.height)/2);}else if(fK===IPCC.PageLayout.VerticalScrollDirection&&Eu.width>Nh.width){ajM-=((Eu.width-Nh.width)/2);}}}var hg=aU*cu/ay[aa].gL;var be=hF;var as=jm;var dZ=hF;var eY=jm;if(iu(ra)===true){dZ=jm;eY=hF;}if(ay[aa].lq()>0){if(iu(ay[aa].gl)===true){be=ay[aa].qG();as=ay[aa].lq();}else{be=ay[aa].lq();as=ay[aa].qG();}}else{hg=aU*cu/ay[0].gL;if(iu(ay[aa].gl)===true){var GQ=be;be=as;as=GQ;hg=aU*cu/ay[0].gs;}}var Gy,Fo,hD;if(cV===IPCC.ViewMode.SinglePage){Fo=be*hg;Gy=as*hg;bw.style.width=Fo+'px';bw.style.height=Gy+'px';if(aa===cw){ae.style.width=Fo+'px';ae.style.height=Gy+'px';}if(ax&&ay[aa].gy===true&&ax.en()===true){ax.zoom(hg);}}else if(cV===IPCC.ViewMode.Document){Fo=be*hg;Gy=as*hg;bw.style.width=Fo+'px';bw.style.height=Gy+'px';if(ax&&ay[aa].gy===true&&ax.en()===true){ax.zoom(hg);}if(be*hg>gI){gI=be*hg;}if(as*hg>hw){hw=as*hg;}}else{hg=aU*cu/ay[0].gL;if(fK===IPCC.PageLayout.VerticalScrollDirection){hD=dZ/be*hg;bw.style.width=dZ*hg+'px';bw.style.height=as*hD+'px';if(dZ*hg>gI){gI=dZ*hg;}if(as*hg>hw){hw=as*hg;}}else{hD=eY/as*hg;bw.style.height=eY*hg+'px';bw.style.width=be*hD+'px';if(be*hg>gI){gI=be*hg;}if(eY*hg>hw){hw=eY*hg;}}if(ax&&ay[aa].gy===true&&ax.en()===true){ax.zoom(hD);}}if(ax&&ay[aa].gy===true&&ax.en()===true){ax.display();if(IPCC.T.uG.Ar){var awQ=ap.style.display;ap.style.display='none';ap.style.display=awQ;asL();}}}if(fK===IPCC.PageLayout.VerticalScrollDirection){Mf=ap.scrollTop;}else{Mf=ap.scrollLeft;}var Rd,PE,LD=0,LN=0;if(Bz){Rd=Bz.offsetLeft+Mw*ba;PE=Bz.offsetTop+Mw*de;ap.scrollLeft=Rd-(ap.clientWidth/2)+LD;ap.scrollTop=PE-(ap.clientHeight/2)+LN;aDx(ck);}else{if(fK===IPCC.PageLayout.VerticalScrollDirection){LN=eL*(Su+1);}else{LD=ge+((hi+ge)*(Su+1));}Rd=Mw*(ajM-LD);PE=Mw*(agu-LN);aaF(ck);ap.scrollLeft=Rd-(ap.clientWidth/2)+LD;ap.scrollTop=PE-(ap.clientHeight/2)+LN;}if(cV!==IPCC.ViewMode.SinglePage&&(eI===IPCC.ScaleTrigger.Pinch||vB===true)){oI();}kK(dB,true);V.bm('scaleChanged',{scaleType:(vB)?"scaledDown":"scaledUp",scaleTrigger:eI,fitType:eP,scaleFactor:dF});};function asL(){var dummy=document.createElement('div');setTimeout(function(){ap.appendChild(dummy);ap.removeChild(dummy);},0);};function ahI(al,fm,fF,eh){var ht=al.igElements;eh=eh||ZG(al);if(eh&&(eh.right-eh.left)>0&&(eh.bottom-eh.top)>0){return new IPCC.Web.UI.Point(fm+eh.left+ht.po.scrollLeft,fF+eh.top+ht.po.scrollTop);}else{return;}};function ZG(al){var ht=al.igElements;var eh=null;if(!al|| !ht|| !ht.nf){return null;}if(ht.nf.getBoundingClientRect){try{eh=ht.nf.getBoundingClientRect();}catch(aY){return;}}else{var fJ=ht.nf;var wY=document.documentElement;eh={left:wY.clientLeft-wY.scrollLeft,top:wY.clientTop-wY.scrollTop};fJ=fJ.offsetParent;while(fJ){eh.top+=fJ.offsetTop-fJ.scrollTop;eh.left+=fJ.offsetLeft-fJ.scrollLeft;fJ=fJ.offsetParent;}}return eh;};function aeQ(){var dp=V.oW();var Pv=dp.id;var vs;var wx;var ni;var Ut;var Vh;var ac=false;var al;var oV=[];var vI= -1;var gU=0;var pj;var Bd;var xZ;var os={x:0,y:0};var lc=0;var dj=0;var rQ=null;var tN=null;if(ae===''){ap=hm({width:'100%',height:'100%',position:'relative',margin:'0px',overflow:'auto',textAlign:'center'});ap.className='pccPageListContainerWrapper';ap.tabIndex=2;var SX=function(fm,fF){return IPCC.T.getPageFromPoint(fm,fF,ap)||false;};var Vs=function(al,fm,fF){var ht=al.igElements;var eh=ZG(al);if(eh&&(eh.right-eh.left)>0&&(eh.bottom-eh.top)>0){return new IPCC.Web.UI.Point(fm-eh.left-ht.po.scrollLeft,fF-eh.top-ht.po.scrollTop);}else{return;}};var apd=function(pg){pg.Kr([new IPCC.jY(IPCC.Web.UI.MarkType.Text)]);};var anT=function(pg){pg.set_mouseTool(IPCC.Web.UI.MouseTool.None);};var Nl=false,atX="";var ajT=function aGr(aY,jb,bI){if(jb.match(/edit/)){Nl=true;return;}apd(bI.aC);Nl=true;atX=jb;bI.aC.Gg("touchstart",aY);};var akp=function(bI){Nl=false;anT(bI.aC);};var Uf=function(aY){if(aY.target&&aY.target.attributes&&aY.target.getAttribute('data-pcc-mark')){return aY.target;}else if(aY.target.parentElement&&aY.target.parentElement.attributes&&aY.target.parentElement.getAttribute('data-pcc-mark')){return aY.target.parentElement;}else if(aY.target.parentNode&&aY.target.parentNode.attributes&&aY.target.parentNode.getAttribute('data-pcc-mark')){return aY.target.parentNode;}else{return undefined;}};var VO=function(aY){var cU=Uf(aY);if(cU){return cU.getAttribute('data-pcc-mark');}return undefined;};var als=function(pg){if(pg&&pg.ee()){pg.ee().CN(function(K){K.set_selected(false);});pg.display();}};var PQ,YX=false;var RD=function(aY,J){var nm={cO:undefined,K:undefined,bx:null};var kA=Uf(aY);if(kA){if(typeof al!=='undefined'&&al!==false&&al.aC&&al.igElements&&al.aC.en()===true){nm.bx=al.aC.oO();}if(kA.ImGearMarkRelation){nm.cO='mark';nm.K=kA.ImGearMarkRelation.K;nm.Vo=nm.K.get_selected();return nm;}else{while(!(kA.ImGearMarkRelation)&&kA.parentNode&&kA!==document.body){kA=kA.parentNode;if(kA.ImGearMarkRelation){nm.cO='mark';nm.K=kA.ImGearMarkRelation.K;nm.Vo=nm.K.get_selected();return nm;}}}}if(typeof al!=='undefined'&&al!==false&&al.aC&&al.igElements&&al.aC.en()===true){nm.bx=al.aC.oO();var bx=0;for(bx=0;bx<ay.length;bx++){if(ay[bx].bQ===al.id){if(typeof J.targetType==='undefined'||J.targetType===null){nm.cO='page';return nm;}break;}}}return nm;};var KO=function(bx,ti,jE,aBH){if(aL===null||aL===undefined){return;}var aac=false;if(ti===undefined){ti=aL.ti;aac=true;}if(jE===undefined){jE=aL.jE;aac=true;}var K;var bI=document.getElementById(ay[bx].bQ);if(aBH===true){K=aL.xd;}else{K=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.HighlightText);K.set_rectangle({x:0,y:0,width:0,height:0});K.dv=127;K.cP='#3366CC';K.by=null;bI.aC.mf().addMark(K);}K.set_selected(true);if(aac===true){if(aL.fP===aL.he){K.aP=gU;K.cq=jE-gU+1;K.ka=true;K.kg=true;bI.aC.display();}else if(bx===aL.fP){K.aP=gU;K.cq=bI.aC.cd().gY().ef()-1-ti;K.ka=true;K.kg=false;bI.aC.display();}else if(bx===aL.he){K.aP=0;K.cq=jE+1;K.ka=false;K.kg=true;bI.aC.display();}else{K.aP=0;K.cq=bI.aC.cd().gY().ef()-1-gU;K.ka=false;K.kg=false;}}else{if(aL.fP===aL.he){K.ka=true;K.kg=true;}else if(bx===aL.fP){K.ka=true;K.kg=false;}else if(bx===aL.he){K.ka=false;K.kg=true;}else{K.ka=false;K.kg=false;}}aL.eu[bx]=K;};var ajh=function(cU,ba,de,RA){if(cU){var Nb=cU.getBoundingClientRect();ba=IPCC.T.Qe(ba,Nb.left+RA);ba=IPCC.T.Lt(ba,Nb.right-RA);de=IPCC.T.Qe(de,Nb.top+RA);de=IPCC.T.Lt(de,Nb.bottom-RA);}return{x:ba,y:de};};var kF=function(aY){if(xZ){if(xZ.clientX===aY.clientX&&xZ.clientY===aY.clientY){if(aY.rawEvent.preventDefault){aY.rawEvent.preventDefault();}else if(aY.preventDefault){aY.preventDefault();}if(aY.rawEvent.stopPropagation){aY.rawEvent.stopPropagation();}else if(aY.stopPropagation){aY.stopPropagation();}YX=true;xZ=undefined;return false;}}PQ=aY;aie(aY,aY.clientX,aY.clientY,aY.button);};var ahZ=function(aY,J){ni=RD(aY,J);};var aie=function(aY,fm,fF,og){var J=new IPCC.Web.UI.MouseEventArgs();al=SX(fm,fF);ahZ(aY,J);var jb;var kA=Uf(aY);if(kA){jb=kA.getAttribute('data-pcc-mark');}var Zt=false;var Mc=jb&&jb.substring(0,10);if(jb&&Mc==='texthandle'){Bd=true;Zt=true;Mc=jb.substring(10,13);var K=kA.parentNode.ImGearMarkRelation.K;if(aL&&K.by===null){oV=aL.rO.slice();oV[J.pageIndex]=undefined;}else{aL=null;oV=[];V.tU();}var adT=function(aBx){gU=aL.ti;var H;for(H=aL.he;H>=aL.fP;H--){var bI=document.getElementById(ay[H].bQ);if(bI.aC===undefined||bI.aC===null){continue;}var xe=gU;if(H!==aL.fP){xe=0;}var qQ;if(H===aL.he){qQ=aL.jE;}else{qQ=bI.aC.get_textPage().gY().ef()-1;}aBx(bI,xe,qQ);if(H!==aL.pb){KO(H);}}rQ=az;az=IPCC.Web.UI.MouseTool.SelectText;ac=true;};var H,bx,bJ,Lu,fG,ta,bZ;if(Mc==='sta'){if(aL===null||aL===undefined){bx=K.bx;aL={};aL.eu=[];aL.fP=bx;aL.ti=K.aP;gU=K.aP;while(bx<ay.length){bJ=ay[bx].bJ;Lu=bJ.get_markCount();for(H=0;H<Lu;H++){fG=bJ.getMark(H);if(K.aD===fG.aD&&fG.get_type()===K.get_type()){aL.eu[bx]=fG;for(ta=fG.by.length-1;ta>=0;ta--){if(fG.by[ta].set_visible){fG.by[ta].set_visible(false);}else{fG.set_visible(false);break;}}if(bx===K.bx){tN=fG;}else{oV[bx]=bZ.substring(fG.aP,fG.cq);fG.set_selected(false);}bZ=fG.bZ.substring(fG.cq);if(fG.kg===true){aL.jE=fG.aP+fG.cq-1;aL.he=bx;break;}}}bx++;}}pj=aL.jE+1;lc=aL.he;var aCN=function(bI,xe,qQ){bI.aC.showEmptyTextSelection(qQ+1);bI.aC.extendTextSelection(undefined);bI.aC.extendTextSelection(qQ);bI.aC.extendTextSelection(xe);};aL.eu[aL.fP].vG=true;aL.pb=aL.fP;aL.xd=aL.eu[aL.fP];adT(aCN);}else if(Mc==='end'){if(aL===null||aL===undefined){bx=K.bx;aL={};aL.eu=[];aL.he=bx;aL.jE=K.aP+K.cq-1;while(bx>=0){bJ=ay[bx].bJ;Lu=bJ.get_markCount();for(H=0;H<Lu;H++){fG=bJ.getMark(H);if(K.aD===fG.aD&&fG.get_type()===K.get_type()){aL.eu[bx]=fG;for(ta=fG.by.length-1;ta>=0;ta--){if(fG.by[ta].set_visible){fG.by[ta].set_visible(false);}else{fG.set_visible(false);break;}}if(bx===K.bx){bZ=fG.bZ;}else{oV[bx]=bZ.substring(bZ.length-fG.cq);fG.set_selected(false);}bZ=fG.bZ.substring(0,bZ.length-fG.cq);if(fG.ka===true){aL.ti=fG.aP;gU=fG.aP;aL.fP=bx;tN=fG;break;}}}bx--;}}pj=aL.ti;lc=aL.fP;var aBr=function(bI,xe,qQ){bI.aC.showEmptyTextSelection(xe);bI.aC.extendTextSelection(undefined);bI.aC.extendTextSelection(xe);bI.aC.extendTextSelection(qQ);};aL.eu[aL.he].vG=true;aL.pb=aL.he;aL.xd=aL.eu[aL.he];adT(aBr);}if(tN){al.aC.display();}}var yJ=aY.target.tagName&&aY.target.tagName.toLowerCase()==='textarea';if(yJ){return;}var xQ=aY.target.tagName&&aY.target.tagName.toLowerCase()==='input'&&aY.target.type&&aY.target.type.toLowerCase()==='text';if(xQ){return;}if(az===IPCC.Web.UI.MouseTool.HandPan&&zk&&jb&&Zt===false){if(!ni||ni.K.get_interactionMode()!==IPCC.Web.UI.MarkInteractionMode.SelectionDisabled){ajT(aY,jb,al);return;}}var dw;var fw;if(al!==false&&al.aC&&al.igElements&&al.aC.en()===true){var aJ=0;for(aJ=0;aJ<ay.length;aJ++){if(ay[aJ].bQ===al.id){J.pageIndex=aJ;break;}}J.pointLiesWithinImage=true;fw=Vs(al,fm,fF);if(fw){dw=al.aC.PS(fw,false);J.imagePoint=dw;J.constrainedImagePoint=dw;}else{J.pointLiesWithinImage=false;}}else{J.pointLiesWithinImage=false;}J.domEvent=aY;J.windowPoint=new IPCC.Web.UI.Point(fm,fF);if(Zt===true){vI= -1;dj=J.pageIndex;aY.preventDefault();V.bm('mouseDown',J);return;}switch(az){case IPCC.Web.UI.MouseTool.None:aY.preventDefault();break;case IPCC.Web.UI.MouseTool.HandPan:aY.preventDefault();vs=fF;wx=fm;Ut=ap.scrollTop;Vh=ap.scrollLeft;ac=true;V.yc(ae,'grabbing');if(al&&al.aC){V.yc(al,'grabbing');al.aC.set_cursor('grabbing');al.aC.display();}break;case IPCC.Web.UI.MouseTool.SelectText:case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:aY.preventDefault();if(og===0&&al&&al.aC&&dw){V.tU();oV=[];vI= -1;Bd=undefined;gU=undefined;pj=undefined;ac=true;os=J.windowPoint;}break;case IPCC.Web.UI.MouseTool.Magnifier:aY.preventDefault();if(og===0&&al&&al.aC&&fw){var ks=IPCC.bF.eD(IPCC.bF.None);ae.style.cursor=ks;al.aC.showMagnifier(fw);al.aC.display();}ac=true;break;case IPCC.Web.UI.MouseTool.RectangleZoom:aY.preventDefault();if(og===0&&al&&al.aC&&dw){ac=true;vs=fw.y;wx=fw.x;al.aC.showEmptySelection(dw);al.aC.display();}break;}V.bm('mouseDown',J);};var kL=function(aY){aiH(aY,aY.clientX,aY.clientY,aY.button);};var ajl=function(J,fm,fF,cF){J.windowPoint=new IPCC.Web.UI.Point(fm,fF);cF=SX(fm,fF);var dw,fw;if(cF!==false&&cF.aC&&cF.igElements&&cF.aC.en()===true){J.pointLiesWithinImage=true;fw=Vs(cF,fm,fF);if(fw){dw=cF.aC.PS(fw,false);J.imagePoint=dw;J.constrainedImagePoint=dw;}else{J.pointLiesWithinImage=false;}}else{J.pointLiesWithinImage=false;}return{J:J,fm:fm,fF:fF,cF:cF,dw:dw,fw:fw};};var aiH=function(aY,fm,fF,og){var yJ=aY.target.tagName&&aY.target.tagName.toLowerCase()==='textarea';if(yJ){return;}var xQ=aY.target.tagName&&aY.target.tagName.toLowerCase()==='input'&&aY.target.type&&aY.target.type.toLowerCase()==='text';if(xQ){return;}var J=new IPCC.Web.UI.MouseEventArgs();var dw,fw,cF;var HA=function(fm,fF){var nK=ajl(J,fm,fF,cF);J=nK.J;J.domEvent=aY;fm=nK.fm;fF=nK.fF;cF=nK.cF;dw=nK.dw;fw=nK.fw;};HA(fm,fF);var kA=RD(aY,J);if(kA&&kA.K){J.mark=kA.K;}var ks;switch(az){case IPCC.Web.UI.MouseTool.None:aY.preventDefault();break;case IPCC.Web.UI.MouseTool.HandPan:aY.preventDefault();if(ac){var arO=fF;var asb=fm;var aFu=vs-arO;var aFV=wx-asb;ap.scrollTop=Ut+aFu;ap.scrollLeft=Vh+aFV;}break;case IPCC.Web.UI.MouseTool.SelectText:case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:aY.preventDefault();if(ac){if(og!==0){xt();}var gA;if(!cF){V.bm('mouseMove',J);return;}if(gU===undefined){al=cF;}else if(cF!==al&&cF.aC&&fw){vI= -1;var hK=0;var H=0;for(H=0;H<ay.length;H++){if(ay[H].bQ===cF.id){hK=H;break;}}if(hK>dj){if(hK>lc){gA=al.aC.get_textPage().gY().ef()-1;if(gA<0){xt();V.bm('mouseMove',J);return;}al.aC.extendTextSelection(gA);if(aL){gA=al.aC.get_textPage().gY().ef()-1;aL.eu[dj].set_startIndex(al.aC.Rs());aL.eu[dj].set_textLength(al.aC.BF());aL.he=hK;gU=al.aC.Rs();}oV[dj]=al.aC.getSelectedText();cF.aC.showEmptyTextSelection(0);cF.aC.extendTextSelection(undefined);vI=0;al.aC.display();al=cF;}else{gU=0;oV[dj]=undefined;oV[hK]=undefined;al.aC.showEmptyTextSelection(0);al.aC.extendTextSelection(undefined);if(aL&&aL.eu[dj]){aL.eu[dj].ka=false;}al.aC.display();al=cF;if(aL&&aL.eu[dj]){aL.eu[dj]=undefined;aL.fP=hK;aL.eu[hK].set_startIndex(0);aL.eu[hK].set_textLength(aL.eu[hK].get_startIndex()+aL.eu[hK].get_textLength());aL.eu[hK].ka=true;al.aC.display();}}}else if(hK<dj){if(hK<lc){gA=al.aC.get_currentTextIndex();if(gA!==0){al.aC.extendTextSelection(0);}if(aL){aL.eu[dj].set_startIndex(al.aC.Rs());aL.eu[dj].set_textLength(al.aC.BF());aL.fP=hK;}oV[dj]=al.aC.getSelectedText();al.aC.display();gA=cF.aC.cd().gY().ef()-1;vI=gA;gU=0;cF.aC.showEmptyTextSelection(gA+1);cF.aC.extendTextSelection(undefined);al=cF;al.aC.display();}else{oV[dj]=undefined;oV[hK]=undefined;al.aC.showEmptyTextSelection(0);al.aC.extendTextSelection(undefined);if(aL&&aL.eu[dj]){aL.eu[dj].kg=false;}al.aC.display();al=cF;if(aL&&aL.eu[dj]){aL.eu[dj]=undefined;aL.he=hK;gA=al.aC.cd().gY().ef()-1;aL.eu[hK].set_textLength(cF.aC.BF());aL.eu[hK].kg=true;al.aC.display();}}}dj=hK;}var apB=(dj<lc),aqF=(dj>lc);if(al&&al.aC&&al.aC.en()===true&&fw){fw=Vs(al,fm,fF);dw=al.aC.PS(fw,false);var dQ=al.aC.transformPagePointToTextIndex(dw);if(gU===undefined){if(dQ===undefined){V.bm('mouseMove',J);return;}var Wd=function(bI,wh){var Bf=bI.aC.cd();var gm=Bf.gY();var eU=gm.kn(wh);return eU.sa();};var sG=Wd(al,dQ);var aid=al.aC.transformPagePointToWindow(new IPCC.Web.UI.Point(sG.x,sG.y),true);var ahP=al.aC.transformPagePointToWindow(new IPCC.Web.UI.Point(sG.x+sG.width,sG.y+sG.height),true);var ajt=ahP.x-aid.x;var ayT=(fw.x>aid.x+(ajt*0.3)&&fw.x<ahP.x-(ajt*0.3));if(ayT){gU=dQ;pj=dQ;al.aC.showEmptyTextSelection(dQ);al.aC.extendTextSelection(undefined);al.aC.extendTextSelection(dQ);al.aC.display();var ag=0;for(ag=0;ag<ay.length;ag++){if(ay[ag].bQ===al.id){lc=ag;dj=ag;break;}}}else{V.bm('mouseMove',J);return;}}else{if(gU=== +gU&&dQ=== +dQ){if(apB){gU=dQ;}else if(!aqF){gU=Math.min(pj,dQ);}}}gA=al.aC.get_currentTextIndex();if(gA===dQ||dQ===undefined){V.bm('mouseMove',J);return;}if(vI!== -1){if(dQ!==vI){al.aC.extendTextSelection(vI);}vI= -1;}if((dQ>pj&&dj===lc)||dj>lc){if(aL){if(aL.eu[dj]===undefined||aL.eu[dj]===null){KO(dj,0,0,dj===aL.pb);if(dj-1>=0&&aL.eu[dj-1]){aL.eu[dj-1].kg=false;document.getElementById(ay[dj-1].bQ).aC.display();}}aL.eu[dj].kg=true;}if(Bd===undefined){Bd=false;}}else if(dQ<pj||dj<lc){if(aL){if(aL.eu[dj]===undefined||aL.eu[dj]===null){KO(dj,al.aC.cd().gY().ef()-1,0,dj===aL.pb);if(aL.eu[dj+1]){aL.eu[dj+1].ka=false;document.getElementById(ay[dj+1].bQ).aC.display();}}aL.eu[dj].ka=true;}if(Bd===undefined){Bd=true;pj++;al.aC.showEmptyTextSelection(pj);al.aC.extendTextSelection(undefined);var qQ=al.aC.cd().gY().ef();if(pj>=qQ){al.aC.extendTextSelection(qQ-1);}else{al.aC.extendTextSelection(pj);}}}al.aC.extendTextSelection(dQ);if(aL&&aL.eu[dj]){aL.eu[dj].set_startIndex(al.aC.Rs());aL.eu[dj].set_textLength(al.aC.BF());}al.aC.display();}}break;case IPCC.Web.UI.MouseTool.Magnifier:aY.preventDefault();if(ac){if(og!==0||(al&&al.aC&&al!==cF)){al.aC.hideMagnifier();ks=IPCC.bF.eD(IPCC.bF.Magnifier);ae.style.cursor=ks;al.aC.display();}if(cF&&cF.aC&&fw){al=cF;ks=IPCC.bF.eD(IPCC.bF.None);ae.style.cursor=ks;cF.aC.showMagnifier(fw);cF.aC.display();}}break;case IPCC.Web.UI.MouseTool.RectangleZoom:aY.preventDefault();if(ac){var Js=ajh(al,fm,fF,1);HA(Js.x,Js.y);if(cF&&cF.aC&&dw&&cF===al){if(og!==0){cF.aC.hideSelection();cF.aC.display();ac=false;}else{cF.aC.extendSelection(dw);cF.aC.display();}}}break;}V.bm('mouseMove',J);};var jN=function(aY){if(YX!==true){Uq(aY,aY.clientX,aY.clientY);}else{YX=false;}};var ahV=function(aY,J){J.upTargetType=null;var Bn=RD(aY,J);J.originalEvent=aY.rawEvent;J.clientX=aY.clientX;J.clientY=aY.clientY;J.downTarget={type:undefined,pageIndex:undefined};if(typeof ni!=='undefined'&&typeof ni.cO!=='undefined'){J.downTarget.type=ni.cO;}if(typeof ni!=='undefined'&&typeof ni.bx!=='undefined'){J.downTarget.pageIndex=ni.bx;}if(typeof ni!=='undefined'&&typeof ni.Vo!=='undefined'){J.downTarget.alreadySelected=ni.Vo;}J.downMark=(typeof ni!=='undefined')?ni.K:undefined;J.upMark=Bn.K;switch(Bn.cO){case 'page':case 'mark':J.upTarget={type:Bn.cO,pageIndex:Bn.bx};break;}if(J.pointLiesWithinImage===false&&Bn.cO==='page'){Bn.bx= -1;}};var Uq=function(aY,fm,fF){var J=new IPCC.Web.UI.MouseEventArgs();var cF;var dw;var fw;var HA=function(fm,fF){var nK=ajl(J,fm,fF,cF);J=nK.J;J.domEvent=aY;fm=nK.fm;fF=nK.fF;cF=nK.cF;dw=nK.dw;fw=nK.fw;};HA(fm,fF);if(aY){ahV(aY,J);V.bm('mouseUp',J);}ni=undefined;var ks;switch(az){case IPCC.Web.UI.MouseTool.None:aY.preventDefault();break;case IPCC.Web.UI.MouseTool.HandPan:aY.preventDefault();if(ac){wx=undefined;vs=undefined;Ut=undefined;Vh=undefined;ac=false;ks='move';V.yc(ae,'grab');if(al&&al.aC){V.yc(al,'grab');al.aC.set_cursor('grab');al.aC.display();}}break;case IPCC.Web.UI.MouseTool.SelectText:case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:if(aY){aY.preventDefault();}var xD=J.windowPoint.x-os.x;var yD=J.windowPoint.y-os.y;if(xD===0&&yD===0){xt();}if(ac){var qe=new IPCC.Web.UI.TextSelectedEventArgs(),kz=[],H,yX,Bx;var jE;var Kx=al.aC.getSelectedText();var rO=oV.slice();if(Kx.length>0){rO[dj]=al.aC.getSelectedText();}else{if(dj>lc){dj--;al=document.getElementById(ay[dj].bQ);if(rO[dj]){Kx=rO[dj];}}else if(dj<lc){dj++;al=document.getElementById(ay[dj].bQ);if(rO[dj]){Kx=rO[dj];}}}qe.text=rO.join('');var Ty=true;if(dj>=lc){if(dj===lc){if(al.aC.get_currentTextIndex()>=pj){Ty=false;}jE=gU+Kx.length-1;}else{jE=Kx.length-1;}if(jE<0){jE=0;}yX=lc;Bx=dj;}else{Ty=false;jE=pj-1;yX=dj;Bx=lc;}for(H=yX;H<=Bx;H++){kz.push(H);}if(qe.text.length===0){xt();kz=[];}qe.pageNumbers=kz;qe.clientX=fm;qe.clientY=fF;if(gU!==undefined){if(az===IPCC.Web.UI.MouseTool.SelectText){var Wd=function(bI,wh){var Bf=bI.aC.cd();var gm=Bf.gY();var eU=gm.kn(wh);return eU.sa();};var gA=al.aC.get_currentTextIndex();var sG=Wd(al,gA);var fl=0,ek=0;if(Ty===false){fl=sG.width;ek=sG.height;}var Bh=al.aC.transformPagePointToWindow(new IPCC.Web.UI.Point(sG.x+fl,sG.y+ek),true);var ct=ahI(al,Bh.x,Bh.y);qe.handleClientX=ct.x;qe.handleClientY=ct.y;}var azR=aL===undefined||aL===null;if(tN){qe.previousFirstMark=tN;qe.firstMark=aL.eu[yX];if(aL.pb<yX||aL.pb>Bx){var Gb=document.getElementById(ay[aL.pb].bQ);if(Gb.aC){Gb.aC.mf().removeMark(aL.xd);}}aL.xd.vG=false;V.tU();if(rQ!==null){az=rQ;}rQ=null;}else if(azR===true){if(az===IPCC.Web.UI.MouseTool.SelectText){aL={fP:yX,ti:gU,he:Bx,jE:jE,rO:rO.slice(),eu:[]};for(H=0;H<kz.length;H++){KO(kz[H]);}}else{V.tU();}}else{if(aL.pb<yX||aL.pb>Bx){var agS=document.getElementById(ay[aL.pb].bQ);if(agS.aC){agS.aC.mf().removeMark(aL.xd);}}aL.xd.vG=false;aL.fP=yX;aL.ti=gU;aL.he=Bx;aL.jE=jE;aL.rO=rO.slice();if(rQ!==null){az=rQ;}rQ=null;}qe.mouseTool=az;qe.startIndex=gU;V.bm('selectTextMouseToolCompleted',qe);if(tN){tN=null;aL=null;}}ac=false;}break;case IPCC.Web.UI.MouseTool.Magnifier:aY.preventDefault();if(cF&&cF.aC){cF.aC.hideMagnifier();ks=IPCC.bF.eD(IPCC.bF.Magnifier);ae.style.cursor=ks;cF.aC.display();}ac=false;break;case IPCC.Web.UI.MouseTool.RectangleZoom:aY.preventDefault();var Js=ajh(al,fm,fF,1);HA(Js.x,Js.y);if(ac&&fw){var Fq=0;var Do=0;var XT=0;var WO=0;if(fw.x<wx){Fq=wx-fw.x;XT=fw.x+Fq/2;}else{Fq=fw.x-wx;XT=wx+Fq/2;}if(fw.y<vs){Do=vs-fw.y;WO=fw.y+Do/2;}else{Do=fw.y-vs;WO=vs+Do/2;}var aha=ap.clientWidth/Fq;var ahv=ap.clientHeight/Do;var ov=aha;if(aha>ahv){ov=ahv;}if(cF&&cF.aC){cF.aC.pq();cF.aC.display();}ac=false;if(Fq*2+Do*2>25){V.apJ(ov,XT,WO,cF);}}break;}var yJ=false;var xQ=false;if(aY){yJ=aY.target.tagName&&aY.target.tagName.toLowerCase()==='textarea';xQ=aY.target.tagName&&aY.target.tagName.toLowerCase()==='input'&&aY.target.type&&aY.target.type.toLowerCase()==='text';}if(Nl&& !yJ&& !xQ){akp(al);}else if(az===IPCC.Web.UI.MouseTool.HandPan&&PQ&& !yJ&& !xQ&&aY&&PQ.clientX===aY.clientX&&PQ.clientY===aY.clientY&&aY.shiftKey!==true&&aY.ctrlKey!==true){als(al.aC);}};var ayW=function(){var ks;switch(az){case IPCC.Web.UI.MouseTool.None:break;case IPCC.Web.UI.MouseTool.HandPan:V.yc(ae,'grab');ac=false;break;case IPCC.Web.UI.MouseTool.SelectText:xt();break;case IPCC.Web.UI.MouseTool.Magnifier:if(al&&al.aC){al.aC.hideMagnifier();ks=IPCC.bF.eD(IPCC.bF.Magnifier);ae.style.cursor=ks;al.aC.display();}ac=false;break;case IPCC.Web.UI.MouseTool.RectangleZoom:if(al&&al.aC){al.aC.hideSelection();al.aC.display();ac=false;}break;}};var awm=function(){ayW();};var avq=function(){if(az===IPCC.Web.UI.MouseTool.Magnifier){if(al&&al.aC){al.aC.hideMagnifier();var ks=IPCC.bF.eD(IPCC.bF.Magnifier);ae.style.cursor=ks;al.aC.display();}ac=false;}else if(az===IPCC.Web.UI.MouseTool.RectangleZoom){if(al&&al.aC){al.aC.hideSelection();al.aC.display();ac=false;}}else if(az===IPCC.Web.UI.MouseTool.SelectText){xt();}};var lO=function(aY){if(aY.ctrlKey){switch(az){case IPCC.Web.UI.MouseTool.None:break;case IPCC.Web.UI.MouseTool.SelectText:break;default:break;case IPCC.Web.UI.MouseTool.HandPan:var OY=aY.rawEvent.wheelDelta;aY.preventDefault();if(OY<0){V.zoomOut(1.5);}else{V.zoomIn(1.5);}break;}}else{aY.preventDefault();ap.scrollTop-=aY.rawEvent.wheelDelta*0.72;}if(az===IPCC.Web.UI.MouseTool.Magnifier){if(al&&al.aC){al.aC.hideMagnifier();var ks=IPCC.bF.eD(IPCC.bF.Magnifier);ae.style.cursor=ks;al.aC.display();}ac=false;}else if(az===IPCC.Web.UI.MouseTool.RectangleZoom){if(al&&al.aC){al.aC.hideSelection();al.aC.display();ac=false;}}else if(az===IPCC.Web.UI.MouseTool.SelectText){xt();}};var ayE=function(av){var J=new IPCC.Web.UI.MouseEventArgs();J.upTarget={type:'comments',element:av.target};J.downTarget={type:'comments',element:av.target};J.originalEvent=av.rawEvent;J.clientX=av.clientX;J.clientY=av.clientY;J.pageIndex=undefined;V.bm('mouseUp',J);};var xt=function(){if(ac===true){if(aL&&aL.pb!==undefined){if(tN){Uq(null,0,0);return;}else{var Gb=document.getElementById(ay[aL.pb].bQ);if(Gb.aC){Gb.aC.mf().removeMark(aL.xd);}aL.xd.vG=false;}}V.tU();tN=null;ac=false;if(rQ!==null){az=rQ;}rQ=null;}};CY=hm({position:'relative',width:'auto',height:'auto',display:'table',tableLayout:'fixed',borderSpacing:'0px',margin:'0px auto',clear:'both',boxSizing:'border-box'});if(cV===IPCC.ViewMode.SinglePage){ae=hm({position:'relative',whiteSpace:'nowrap',width:'auto',height:'auto',overflow:'hidden'});ae.className='pccPageListContainer pccSinglePageView';}else{ae=hm({position:'relative',whiteSpace:'nowrap',width:'auto',height:'auto',display:'table-cell',verticalAlign:'top'});ae.className='pccPageListContainer';}IPCC.Web.UI.ah.addHandler(ap,"mousedown",kF);IPCC.Web.UI.ah.addHandler(ap,"mouseup",jN);IPCC.Web.UI.ah.addHandler(ap,"mousemove",kL);IPCC.Web.UI.ah.addHandler(ap,"mouseleave",awm);IPCC.Web.UI.ah.addHandler(ap,"mousewheel",lO);IPCC.Web.UI.ah.addHandler(ap,"DOMMouseScroll",avq);ap.onscroll=(! !GW)?aGm:aFd;ae.setAttribute('id',Pv+'_ListContainer');ap.setAttribute('id',Pv+'_ListWrapper');aqk=Pv+'_ListWrapper';kt=hm();kt.className='pccPageListComments pccHidden';kt.setAttribute('id',Pv+'_CommentsPanel');var VK=[];if(IPCC.T.azm){VK.push('touchend');}else{VK.push('click');}IPCC.T.forEach(VK,function(evName){IPCC.Web.UI.ah.addHandler(kt,evName,ayE);});CY.appendChild(ae);CY.appendChild(kt);ap.appendChild(CY);dp.appendChild(ap);if(navigator.userAgent.match('MSIE 10')&&document.documentMode===10){var aF='',bj='',sd='',rC='',pZ;var wD=function(){pZ=getComputedStyle(dp);sd=pZ.getPropertyValue('width');rC=pZ.getPropertyValue('height');if(sd!==aF||rC!==bj){aF=sd;bj=rC;ap.style.width=aF;ap.style.height=bj;}};setInterval(wD,1000);window.addEventListener('resize',wD);wD();V.wD=wD;}var axM=IPCC.T.HF;if(document.documentElement.getBoundingClientRect&&Array.prototype.forEach&&axM&&window.addEventListener&&document.querySelector){aBO(ap);}var ayG=function(ae,aHt){var kP;var ZF=function(av){var cL=av.rawEvent,gk=cL.touches[0]||cL.changedTouches[0];av.clientX=gk.clientX;av.clientY=gk.clientY;av.preventDefault=function(){cL.preventDefault();};av.stopPropagation=function(){cL.stopPropagation();};return av;};var FJ=function(hM,av){var J=new IPCC.Web.UI.MouseEventArgs(),Et=(hM==='touchstart')?'mouseDown':(hM==='touchend')?'mouseUp':null;var EL=(hM==='touchstart')?aie:(hM==='touchmove')?aiH:(hM==='touchend')?Uq:null;kP=SX(av.clientX,av.clientY);if(hM==='doubleTap'){kP&&kP.aC&&kP.aC.Gg(hM,av);}var jb;jb=VO(av);if(jb){if(jb.substring(0,5)==='texth'){av.preventDefault();av.stopPropagation();if(hM==='touchstart'){xZ=av;}EL&&EL(av,av.clientX,av.clientY,0);return;}}switch(az){case IPCC.Web.UI.MouseTool.CreateLineMark:case IPCC.Web.UI.MouseTool.CreatePolylineMark:case IPCC.Web.UI.MouseTool.CreateRectangleMark:case IPCC.Web.UI.MouseTool.CreateRectangleRedactionMark:case IPCC.Web.UI.MouseTool.CreateEllipseMark:case IPCC.Web.UI.MouseTool.CreateTextMark:case IPCC.Web.UI.MouseTool.CreateTextInputSignatureMark:case IPCC.Web.UI.MouseTool.CreateTextAreaSignatureMark:case IPCC.Web.UI.MouseTool.CreateStampMark:case IPCC.Web.UI.MouseTool.CreateFreehandMark:case IPCC.Web.UI.MouseTool.EditMarks:case IPCC.Web.UI.MouseTool.CreateImageStampAnnotationMark:case IPCC.Web.UI.MouseTool.CreateImageStampRedactionMark:kP&&kP.aC&&kP.aC.Gg(hM,av);if(Et==='mouseUp'){ahV(av,J);}else if(Et==='mouseDown'){ahZ(av,J);}V.bm(hM,J);break;case IPCC.Web.UI.MouseTool.SelectText:case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:av.preventDefault();av.stopPropagation();if(hM==='touchstart'){xZ=av;if(jb){V.tU();break;}}EL&&EL(av,av.clientX,av.clientY,0);break;case IPCC.Web.UI.MouseTool.Magnifier:case IPCC.Web.UI.MouseTool.RectangleZoom:av.preventDefault();av.stopPropagation();if(hM==='touchstart'){xZ=av;}EL&&EL(av,av.clientX,av.clientY,0);break;case IPCC.Web.UI.MouseTool.HandPan:if(jb===undefined){jb=VO(av);}var G=RD(av,{});if(jb&&zk){if(!G||G.K.get_interactionMode()!==IPCC.Web.UI.MarkInteractionMode.SelectionDisabled){if(hM==='touchstart'){ajT(av,jb,kP);}else if(hM==='touchmove'){kP&&kP.aC&&kP.aC.Gg(hM,av);}else if(hM==='touchend'){kP&&kP.aC&&kP.aC.Gg(hM,av);akp(kP);}}}break;}};var EC,zL,wG;var axn=function(av){if(av.rawEvent.touches.length>1){clearTimeout(wG);wG=zL=EC=undefined;return;}av=ZF(av);EC=av;if(az===IPCC.Web.UI.MouseTool.CreatePolylineMark){av.preventDefault();}zL=function(){FJ('touchstart',av);wG=zL=EC=undefined;};wG=setTimeout(function(){zL();},200);};var Ie,Gl;var axq=function(av){av=ZF(av);sx=false;var aqP=function(){if(!Gl){return false;}var fL=Gl.clientX-av.clientX;var eN=Gl.clientY-av.clientY;var gj=fL*fL+eN*eN;return gj<2500;};var ach=function(){Ie=Gl=undefined;var jb=VO(av);if(!jb&&az===IPCC.Web.UI.MouseTool.HandPan&&zk&&kP){als(kP.aC);}};var apL=function(){var adj=zL;if(Ie&&aqP()){clearTimeout(Ie);Gl=Ie=undefined;adj();FJ('touchend',av);FJ('doubleTap',av);}else{Ie=setTimeout(function(){adj();FJ('touchend',av);ach();},300);Gl=av;}};if(EC&&wG){clearTimeout(wG);if(az===IPCC.Web.UI.MouseTool.CreatePolylineMark){apL();}else{ach();}wG=zL=EC=undefined;return;}FJ('touchend',av);};var aey,sx=false;var axV=function(av){if(av.rawEvent.touches.length>1){return;}aey=av;if(EC&&wG){clearTimeout(wG);zL();}aFi();};function aFi(){var av=ZF(aey);FJ('touchmove',av);};IPCC.Web.UI.ah.addHandler(ae,"touchstart",axn);IPCC.Web.UI.ah.addHandler(ae,"touchmove",axV);IPCC.Web.UI.ah.addHandler(ae,"touchend",axq);};ayG(ae,kt);}};function aBO(hh){var adN=function(){},cT=1;function alj(aeo,aep,iT,awM){hh.style['-ms-transform']=aeo;hh.style['-moz-transform']=aeo;hh.style['-webkit-transform']=aep;hh.style['transform']=aep;hh.style['-ms-transform-origin']=iT;hh.style['-moz-transform-origin']=iT;hh.style['-webkit-transform-origin']=iT;hh.style['transform-origin']=iT;hh.style.overflow=awM||'';};function alZ(){alj('scale(1,1) translate(0px,0px)','scale3d(1,1,1) translate3d(0px,0px,0px)','0% 0%','auto');};alZ();function aFW(ov,fX,Mo,tO,adm){var fl=(-fX.x/ov)-Mo.x,ek=(-fX.y/ov)-Mo.y,aEu="scale3d("+ov+","+ov+",1) translate3d("+fl+"px,"+ek+"px,0px)",aCY="scale("+ov+", "+ov+") translate("+fl+"px,"+ek+"px)";var aqX=adm.x+'px '+adm.y+'px';alj(aCY,aEu,aqX,'visible');adN=function(){var bC=hh.getBoundingClientRect();var WB={x:(hh.clientWidth/2+ -bC.left+tO.left)/ov,y:(hh.clientHeight/2+ -bC.top+tO.top)/ov};if(fK===IPCC.PageLayout.VerticalScrollDirection&&tO.afB){WB.x=WB.x-(tO.afB/2);}alZ();V.Mv(ov,WB,undefined,IPCC.ScaleTrigger.Pinch);vF=false;};return hh;};function amQ(x,y,x0,y0){return Math.sqrt((x-=x0)*x+(y-=y0)*y);};function alN(x,y,x0,y0){return{x:(x+x0)/2,y:(y+y0)/2};};function aoB(akt,Ii){return{x:akt.x-Ii.x,y:akt.y-Ii.y};};var WW=false;hh.addEventListener('touchstart',function(ev){if(vF){return;}if(!WW&&ev.touches.length===2){afa(ev);}});var standardizeMSTouch=function(ev){var event={};event.identifier=ev.pointerId;event.x=event.clientX=ev.clientX;event.y=event.clientY=ev.clientY;event.preventDefault=ev.preventDefault;event.stopPropagation=ev.stopPropagation;event.rawEvent=ev;event.touches=[event];event.changedTouches=[event];return event;};var xI,Yh=false,yd={};PCCViewer.EventEmitter.extend(yd);hh.addEventListener(IPCC.T.nz['down'],function(av){Yh=true;av=standardizeMSTouch(av);if(xI){var cL={};cL.touches=[xI,av];cL.changedTouches=[xI,av];cL.preventDefault=function(){xI.rawEvent.preventDefault();av.rawEvent.preventDefault();};cL.stopPropagation=function(){xI.rawEvent.stopPropagation();av.rawEvent.stopPropagation();};afa(cL);}else{xI=av;}});hh.addEventListener(IPCC.T.nz['move'],function(av){yd.trigger('touchmove',{rawEvent:av});});hh.addEventListener(IPCC.T.nz['up'],function(av){yd.trigger('touchend',{rawEvent:av});xI=undefined;});function afa(ev){vF=true;var Mo={x:hh.scrollLeft,y:hh.scrollTop};var tO=hh.getBoundingClientRect();var pa=Uo();var Kh=hh.querySelector('.pccPageListItem');if(fK===IPCC.PageLayout.VerticalScrollDirection&&Kh.clientWidth<tO.width-30){tO.afB=tO.width-Kh.clientWidth;}var fX={x:0,y:0,set:function(ahm){this.x=ahm.x;this.y=ahm.y;return this;}};var sx=false;WW=true;ev.preventDefault();ev.stopPropagation();function MG(gk){gk.x=gk.clientX||gk.pageX||gk.screenX;gk.y=gk.clientY||gk.pageY||gk.screenY;return gk;};var kV=MG(ev.touches[0]);var yO=MG(ev.touches[1]);var vQ=amQ(kV.x,kV.y,yO.x,yO.y);var alD=alN(kV.x,kV.y,yO.x,yO.y);var AO,zH;function VL(av){av.preventDefault();[].forEach.call(av.changedTouches,function(t){if(t.identifier===kV.identifier){AO=MG(t);}else if(t.identifier===yO.identifier){zH=MG(t);}});if(!AO|| !zH){return;}var auJ=amQ(AO.x,AO.y,zH.x,zH.y);var auO=alN(AO.x,AO.y,zH.x,zH.y);cT=auJ/vQ;if((dF*cT)<pa.minFactor){cT=pa.minFactor/dF;}else if((dF*cT)>pa.maxFactor){cT=pa.maxFactor/dF;}fX.set(aoB(alD,auO));if(!sx){sx=true;Ik();}};function Vi(){WW=false;sx=false;hh.removeEventListener('touchmove',VL);hh.removeEventListener('touchend',Vi);if(Yh){yd.off('touchmove',alQ);yd.off('touchend',amX);}if(!AO|| !zH){vF=false;return;}GW(adN);};var alQ=function(av){var acG=standardizeMSTouch(av.rawEvent);acG.preventDefault=function(){};VL(acG);};var amX=function(av){Vi(standardizeMSTouch(av.rawEvent));};hh.addEventListener('touchmove',VL);hh.addEventListener('touchend',Vi);if(Yh){yd.on('touchmove',alQ);yd.on('touchend',amX);}function Ik(){if(sx){GW(function(){if(!sx){return;}aFW(cT,fX,Mo,tO,alD);Ik();});}}}};function aGm(){if(cV===IPCC.ViewMode.SinglePage){return;}if(vF){return;}if(lD){clearTimeout(lD);}if(Xe){ath(Xe);}atQ();lD=setTimeout(function(){lD=null;Xe=GW(function aGS(){if(vF){return;}oI();});},40);};function aFd(){if(nn===false||cV===IPCC.ViewMode.SinglePage){return;}iG(true);if(lD!==null){clearTimeout(lD);}var aFl=ap.scrollHeight/ay.length;var OX=0;if(fK===IPCC.PageLayout.VerticalScrollDirection){OX=ap.scrollTop;}else{OX=ap.scrollLeft;}var aDe=OX-Mf;Mf=OX;var apm=new Date().getTime();var VZ=apm-yf;if(VZ>1000){VZ=1000;}Zq=aDe/aFl*1000/VZ;lD=setTimeout(function(){lD=null;yf=0;yf=new Date().getTime();oI();},1000);yf=new Date().getTime();if(Zq!==0&&Math.abs(Zq)<Oh){if(KG&&lD!==null){clearTimeout(lD);lD=null;}yf=0;yf=new Date().getTime();setTimeout(function(){if(KG&&lD!==null){clearTimeout(lD);lD=null;}yf=0;yf=new Date().getTime();oI();},40);}};function asq(){function xs(ape,aom,aI,dv){var JX=document.createElementNS('http://www.w3.org/2000/svg','circle');JX.setAttribute('cx',ape);JX.setAttribute('cy',aom);JX.setAttribute('r',aI);JX.setAttribute('opacity',dv);return JX;};var ps=document.createElementNS('http://www.w3.org/2000/svg','svg');ps.setAttribute('viewBox','0 0 52 52');ps.appendChild(xs(26,13.813,2.813,1));ps.appendChild(xs(24,38.188,2.813,0.4));ps.appendChild(xs(13.813,26,2.813,0.1));ps.appendChild(xs(38.188,26,2.813,0.7));ps.appendChild(xs(34.618,34.618,2.813,0.55));ps.appendChild(xs(17.382,34.618,2.813,0.25));ps.appendChild(xs(34.618,17.382,2.813,0.85));return ps;};function akh(jJ){var ag=0;var ajm=false;var MO;var IJ;var ps;for(ag=0;ag<jJ.childNodes.length;ag++){if(jJ.childNodes[ag].className==="pccPageListItemLoading"){ajm=true;}}if(ajm===false){IJ=document.createElement('div');IJ.className='pccPageListItemLoading';ps=asq();jJ.innerHTML="";jJ.appendChild(IJ);IJ.appendChild(ps);if(Kj.length>0){MO=document.createElement('div');MO.className='pccPageListItemLoadingContent';MO.innerHTML=Kj;IJ.appendChild(MO);}}};function atQ(){var ty=ap.scrollTop;var tM=ap.scrollLeft;var wQ=ap.clientHeight;var vd=ap.clientWidth;var wT=ap.scrollWidth;var uE=ap.scrollHeight;var ck=aby({ty:ty,tM:tM,wQ:wQ,vd:vd,wT:wT,uE:uE});var H=ck.adB;if(nn&&tY===false&&cw!==H&&H>=0){cw=H;var J=new IPCC.PageEventArgs();J.imGearPage=V.get_currentPage();J.pageIndex=cw;J.pageNodeID=ay[cw].bQ;V.bm('currentPageChanged',J);}};function WP(bi){var aF=bi.be||hF;var bj=bi.as||jm;if(bi.gl%180){var qS=aF;aF=bj;bj=qS;}var rs=bi.gL||ajL;return{aF:aF*(dF*cu/rs),bj:bj*(dF*cu/rs),aHY:rs,bd:bi.cf};};function Zo(aEY){return IPCC.T.reduce(aEY,function(fi,bG,bd){fi[bd]=WP(bG);return fi;},{});};function alE(bx){var oU,CT,AV,wz,pu;if(fK===IPCC.PageLayout.VerticalScrollDirection){oU=ap.scrollTop;CT=ap.scrollHeight;AV=ap.clientHeight;wz='bj';pu=eL;}else{oU=ap.scrollLeft;CT=ap.scrollWidth;AV=ap.clientWidth;wz='aF';pu=hi+ge;}var la=Zo(ay);var Hv=fK===IPCC.PageLayout.VerticalScrollDirection?eL:hi;var aaB=false;IPCC.T.forEach(la,function(bG,bd){if(bG.bd===bx){aaB=true;}if(aaB){return;}Hv+=bG[wz]+pu;});return Hv-(pu/2);};function qI(ck){var EJ=IPCC.T.map(ck.ce,function(bG){return+bG.bd;}).sort();var kV=EJ[0];var kZ=EJ[EJ.length-1];var fC=ay.length;for(var H=EA;H;H--){kV-=1;kZ+=1;if(kV>=0){EJ.unshift(kV);}if(kZ<fC){EJ.push(kZ);}}return EJ.sort();};function Mh(ck){var kV=Math.max(ck.ce[0].bd-vf,0);var kZ=Math.min(ck.ce[ck.ce.length-1].bd+vf,ay.length-1);return{kV:kV,kZ:kZ};};function aoI(ck){var kV=Math.max(ck.ce[0].bd-EA,0);var kZ=Math.min(ck.ce[ck.ce.length-1].bd+EA,ay.length-1);return{kV:kV,kZ:kZ};};function aby(bk){if(cV===IPCC.ViewMode.SinglePage){return amk();}var oU,CT,AV,wz,pu;if(fK===IPCC.PageLayout.VerticalScrollDirection){oU=bk.ty;CT=bk.uE;AV=bk.wQ;wz='bj';pu=eL;}else{oU=bk.tM;CT=bk.wT;AV=bk.vd;wz='aF';pu=hi+ge;}var apw=oU;var aqZ=oU+AV;var la=Zo(ay);var Hv=fK===IPCC.PageLayout.VerticalScrollDirection?eL:hi;var aDR=oU/CT;var MC=(aDR*AV)+oU;var Yg=Number.MAX_VALUE;var mA= -1;var ce=[];IPCC.T.forEach(la,function(bG,bd){var lX=Hv;var eg=lX+bG[wz];if(lX<aqZ&&eg>apw){bG.yF=true;ce.push(bG);}var amW=Math.min(Math.abs(lX-MC),Math.abs(eg-MC));if(lX<MC&&eg>MC){Yg=0;mA=bd;}else if(amW<Yg){mA=bd;Yg=amW;}Hv+=bG[wz]+pu;});if(ce.length===0&&la[mA]!==undefined){ce.push(la[mA]);}return{ce:ce,adB:Number(mA)||0,JA:la};};function amk(){var la=Zo(ay);var FW=[cw];var ce=IPCC.T.filter(la,function(bG){return IPCC.T.contains(FW,+bG.bd);});return{ce:ce,adB:cw,JA:la};};function KH(){var ck=iG();if(!ck){return[];}var FW=IPCC.T.map(ck.ce,function(bG){return bG.bd;});var axr=2;var ang=Math.min.apply(Math,FW);for(var i=1;i<=axr;i++){if(ang-i>=0){FW.unshift(ang-i);}}return FW;};function iG(){if(cV===IPCC.ViewMode.SinglePage){return amk();}if(ap===''||ap.clientHeight<=0){return;}var ty=ap.scrollTop;var tM=ap.scrollLeft;var wQ=ap.clientHeight;var vd=ap.clientWidth;var wT=ap.scrollWidth;var uE=ap.scrollHeight;var apM=aby({ty:ty,tM:tM,wQ:wQ,vd:vd,wT:wT,uE:uE});tY=false;return apM;}};MX.prototype={dispose:function(){this.ar('dispose',arguments);this.ajb(false);this.app();},disposeDisplayedPages:function(){this.aCu();},get_debug:function(){try{var aI=this.Je();this.cZ('get_debug',arguments,aI);return aI;}catch(e){this.af('get_debug',e);throw e;}},set_debug:function(value){try{this.ar('set_debug',arguments);var Am=this.Je();this.Ve(value);if(!Am){this.ar('set_debug',arguments);}}catch(e){this.af('set_debug',e);throw e;}},get_debugErrorLevel:function(){try{var aI=this.Au();this.cZ('get_debugErrorLevel',arguments,aI);return aI;}catch(e){this.af('get_debugErrorLevel',e);throw e;}},set_debugErrorLevel:function(value){try{this.ar('set_debugErrorLevel',arguments);var Am=this.Au();this.JE(value);if(Am<IPCC.Web.UI.DebugErrorLevel.Development){this.ar('set_debugErrorLevel',arguments);}}catch(e){this.af('set_debugErrorLevel',e);throw e;}},add_mouseDown:function(handler){try{this.Om(handler);}catch(e){this.af('add_mouseDown',e);throw e;}},remove_mouseDown:function(handler){try{this.VS(handler);}catch(e){this.af('remove_mouseDown',e);throw e;}},add_mouseMove:function(handler){try{this.NT(handler);}catch(e){this.af('add_mouseMove',e);throw e;}},remove_mouseMove:function(handler){try{this.Uy(handler);}catch(e){this.af('remove_mouseMove',e);throw e;}},add_mouseUp:function(handler){try{this.Oi(handler);}catch(e){this.af('add_mouseUp',e);throw e;}},remove_mouseUp:function(handler){try{this.VH(handler);}catch(e){this.af('remove_mouseUp',e);throw e;}},add_selectTextMouseToolCompleted:function(handler){try{this.ZJ(handler);}catch(e){this.af('add_selectTextMouseToolCompleted',e);throw e;}},remove_selectTextMouseToolCompleted:function(handler){try{this.Vl(handler);}catch(e){this.af('remove_selectTextMouseToolCompleted',e);throw e;}},add_currentPageChanged:function(handler){try{this.ayn(handler);}catch(e){this.af('add_currentPageChanged',e);throw e;}},remove_currentPageChanged:function(handler){try{this.aBu(handler);}catch(e){this.af('remove_currentPageChanged',e);throw e;}},add_textPageReady:function(handler){try{this.xG(handler);}catch(e){this.af('add_textPageReady',e);throw e;}},remove_textPageReady:function(handler){try{this.GB(handler);}catch(e){this.af('remove_textPageReady',e);throw e;}},add_hyperlinkPageReady:function(handler){try{this.abq(handler);}catch(e){this.af('add_hyperlinkPageReady',e);throw e;}},remove_hyperlinkPageReady:function(handler){try{this.adX(handler);}catch(e){this.af('remove_hyperlinkPageReady',e);throw e;}},add_textExtractionFailed:function(handler){this.xh(handler);},remove_textExtractionFailed:function(handler){this.GD(handler);},add_allPagesAdded:function(handler){try{this.atJ(handler);}catch(e){this.af('add_allPagesAdded',e);throw e;}},remove_allPagesAdded:function(handler){try{this.azy(handler);}catch(e){this.af('remove_allPagesAdded',e);throw e;}},add_pageOpening:function(handler){try{this.XP(handler);}catch(e){this.af('add_pageOpening',e);throw e;}},remove_pageOpening:function(handler){try{this.Sq(handler);}catch(e){this.af('remove_pageOpening',e);throw e;}},add_pageOpened:function(handler){try{this.Wj(handler);}catch(e){this.af('add_pageOpened',e);throw e;}},remove_pageOpened:function(handler){try{this.Sr(handler);}catch(e){this.af('remove_pageOpened',e);throw e;}},add_pageOpenFailed:function(handler){try{this.Ki(handler);}catch(e){this.af('add_pageOpenFailed',e);throw e;}},remove_pageOpenFailed:function(handler){try{this.EZ(handler);}catch(e){this.af('remove_pageOpenFailed',e);throw e;}},add_pageDisplayed:function(handler){try{this.Wy(handler);}catch(e){this.af('add_pageDisplayed',e);throw e;}},remove_pageDisplayed:function(handler){try{this.Wq(handler);}catch(e){this.af('remove_pageDisplayed',e);throw e;}},add_propertyChanged:function(handler){try{this.lw(handler);}catch(e){this.af('add_propertyChanged',e);throw e;}},remove_propertyChanged:function(handler){try{this.nd(handler);}catch(e){this.af('remove_propertyChanged',e);throw e;}},add_markAdded:function(handler){try{this.yW(handler);}catch(e){this.af('add_markAdded',e);throw e;}},remove_markAdded:function(handler){try{this.zs(handler);}catch(e){this.af('remove_markAdded',e);throw e;}},add_markCreating:function(handler){try{this.aba(handler);}catch(e){this.af('add_markCreating',e);throw e;}},remove_markCreating:function(handler){try{this.Tl(handler);}catch(e){this.af('remove_markCreating',e);throw e;}},add_markChanged:function(handler){try{this.Ka(handler);}catch(e){this.af('add_markChanged',e);throw e;}},remove_markChanged:function(handler){try{this.HQ(handler);}catch(e){this.af('remove_markChanged',e);throw e;}},add_markReordered:function(handler){try{this.Jk(handler);}catch(e){this.af('add_markReordered',e);throw e;}},remove_markReordered:function(handler){try{this.EQ(handler);}catch(e){this.af('remove_markReordered',e);throw e;}},add_markSelectionChanged:function(handler){try{this.Ji(handler);}catch(e){this.af('add_markSelectionChanged',e);throw e;}},remove_markSelectionChanged:function(handler){try{this.FN(handler);}catch(e){this.af('remove_markSelectionChanged',e);throw e;}},add_markTextSelectionChanged:function(handler){try{this.JQ(handler);}catch(e){this.af('add_markTextSelectionChanged',e);throw e;}},remove_markTextSelectionChanged:function(handler){try{this.Gz(handler);}catch(e){this.af('remove_markTextSelectionChanged',e);throw e;}},add_markRemoved:function(handler){try{this.yo(handler);}catch(e){this.af('add_markRemoved',e);throw e;}},remove_markRemoved:function(handler){try{this.zr(handler);}catch(e){this.af('remove_markRemoved',e);throw e;}},add_commentAdding:function(handler){try{this.atB(handler);}catch(e){this.af('add_commentAdding',e);throw e;}},remove_commentAdding:function(handler){try{this.aAn(handler);}catch(e){this.af('remove_commentAdding',e);throw e;}},add_commentAdded:function(handler){try{this.vn(handler);}catch(e){this.af('add_commentAdded',e);throw e;}},remove_commentAdded:function(handler){try{this.Du(handler);}catch(e){this.af('remove_commentAdded',e);throw e;}},add_commentRemoved:function(handler){try{this.vC(handler);}catch(e){this.af('add_commentRemoved',e);throw e;}},remove_commentRemoved:function(handler){try{this.DN(handler);}catch(e){this.af('remove_commentRemoved',e);throw e;}},add_commentChanged:function(handler){try{this.tj(handler);}catch(e){this.af('add_commentChanged',e);throw e;}},remove_commentChanged:function(handler){try{this.tK(handler);}catch(e){this.af('remove_commentChanged',e);throw e;}},add_scaleChanged:function(handler){try{this.Zz(handler);}catch(e){this.af('add_scaleChanged',e);throw e;}},remove_scaleChanged:function(handler){try{this.VN(handler);}catch(e){this.af('remove_scaleChanged',e);throw e;}},add_exceptionThrown:function(handler){this.abT(handler);},remove_exceptionThrown:function(handler){this.Qw(handler);},writeToLog:function(message){try{this.lY(message);}catch(e){this.af('writeToLog',e);throw e;}},get_currentState:function(){try{var aI=this.KU();this.cZ('get_currentState',arguments,aI);return aI;}catch(e){this.af('get_currentState',e);throw e;}},get_scaleFactor:function(){try{var aI=this.nU();this.cZ('get_scaleFactor',arguments,aI);return aI;}catch(e){this.af('get_scaleFactor',e);throw e;}},set_scaleFactor:function(scaleFactor){try{this.ar('set_scaleFactor',arguments);this.aoF(scaleFactor);}catch(e){this.af('set_scaleFactor',e);throw e;}},zoomIn:function(factor){try{this.ar('zoomIn',arguments);this.Mv(factor);}catch(e){this.af('zoomIn',e);throw e;}},zoomOut:function(factor){try{this.ar('zoomOut',arguments);this.ZY(factor);}catch(e){this.af('zoomOut',e);throw e;}},getMinMaxZoom:function(){return this.axs();},displayAll:function(){try{this.ar('displayAll',arguments,1);this.aDI();}catch(e){this.af('displayAll',e);throw e;}},display:function(pageIndex){try{this.ar('display',arguments);this.dC(pageIndex);}catch(e){this.af('display',e);throw e;}},get_textRequired:function(){try{var aI=this.jW();this.cZ('get_textRequired',arguments,aI);return aI;}catch(e){this.af('get_textRequired',e);throw e;}},set_textRequired:function(value){try{this.ar('set_textRequired',arguments);this.Jx(value);}catch(e){this.af('set_textRequired',e);throw e;}},selectText:function(pageIndex,startIndex,endIndex,color){try{this.ar('selectText',arguments,1);this.Yo(pageIndex,startIndex,endIndex,color);}catch(e){this.af('selectText',e);throw e;}},clearSelectedText:function(pageIndex){try{this.ar('clearSelectedText',arguments,1);this.apY(pageIndex);}catch(e){this.af('clearSelectedText',e);throw e;}},clearAllSelectedText:function(){try{this.ar('clearAllSelectedText',arguments);this.arp();}catch(e){this.af('clearAllSelectedText',e);throw e;}},get_maxPrefetch:function(){try{var aI=this.azJ();this.cZ('get_maxPrefetch',arguments,aI);return aI;}catch(e){this.af('get_maxPrefetch',e);throw e;}},set_maxPrefetch:function(value){try{this.ar('set_maxPrefetch',arguments);this.apj(value);}catch(e){this.af('set_maxPrefetch',e);throw e;}},get_displayPagesWhenScrolling:function(){try{var aI=this.ato();this.cZ('get_displayPagesWhenScrolling',arguments,aI);return aI;}catch(e){this.af('get_displayPagesWhenScrolling',e);throw e;}},set_displayPagesWhenScrolling:function(value){try{this.ar('set_displayPagesWhenScrolling',arguments);this.aBJ(value);}catch(e){this.af('set_displayPagesWhenScrolling',e);throw e;}},get_maxOutOfViewDisplay:function(){try{var aI=this.azv();this.cZ('get_maxOutOfViewDisplay',arguments,aI);return aI;}catch(e){this.af('get_maxOutOfViewDisplay',e);throw e;}},set_maxOutOfViewDisplay:function(value){try{this.ar('set_maxOutOfViewDisplay',arguments);this.apk(value);}catch(e){this.af('set_maxOutOfViewDisplay',e);throw e;}},get_discardOutOfViewText:function(){try{var aI=this.atC();this.cZ('get_discardOutOfViewText',arguments,aI);return aI;}catch(e){this.af('get_discardOutOfViewText',e);throw e;}},set_discardOutOfViewText:function(value){try{this.ar('set_discardOutOfViewText',arguments);this.aBL(value);}catch(e){this.af('set_discardOutOfViewText',e);throw e;}},get_scrollDisplayThreshold:function(){try{var aI=this.axf();this.cZ('get_scrollDisplayThreshold',arguments,aI);return aI;}catch(e){this.af('get_scrollDisplayThreshold',e);throw e;}},set_scrollDisplayThreshold:function(value){try{this.ar('set_scrollDisplayThreshold',arguments);this.aoc(value);}catch(e){this.af('set_scrollDisplayThreshold',e);throw e;}},get_mouseCursor:function(){try{var aI=this.aeH();this.cZ('get_mouseCursor',arguments,aI);return aI;}catch(e){this.af('aeH',e);throw e;}},set_mouseCursor:function(value){try{this.ar('set_mouseCursor',arguments);this.anU(value);}catch(e){this.af('set_mouseCursor',e);throw e;}},get_mouseTool:function(){try{var aI=this.Yv();this.cZ('get_mouseTool',arguments,aI);return aI;}catch(e){this.af('get_mouseTool',e);throw e;}},set_mouseTool:function(value){try{this.ar('set_mouseTool',arguments);this.HY(value);}catch(e){this.af('set_mouseTool',e);throw e;}},get_markHandleMode:function(){try{var aI=this.AQ();this.ar('get_markHandleMode',arguments);return aI;}catch(e){this.af('get_markHandleMode',e);throw e;}},set_markHandleMode:function(R){try{this.ar('set_markHandleMode',arguments);this.It(R);}catch(e){this.af('set_markHandleMode',e);throw e;}},get_retainPageText:function(){try{var aI=this.aAc();this.ar('get_retainPageText',arguments);return aI;}catch(e){this.af('get_retainPageText',e);throw e;}},set_retainPageText:function(R){try{this.ar('set_retainPageText',arguments);this.anZ(R);}catch(e){this.af('set_retainPageText',e);throw e;}},get_allowMarkEdits:function(){try{var aI=this.aur();this.ar('get_allowMarkEdits',arguments);return aI;}catch(e){this.af('get_allowMarkEdits',e);throw e;}},set_allowMarkEdits:function(bool){try{this.ar('set_allowMarkEdits',arguments);this.aCS(! !bool);}catch(e){this.af('set_allowMarkEdits',e);throw e;}},get_currentPage:function(){try{var aI=this.amN();this.cZ('get_currentPage',arguments,aI);return aI;}catch(e){this.af('get_currentPage',e);throw e;}},get_pageNodeId:function(pageIndex){try{var akA=this.aAU(pageIndex);this.cZ('get_pageNodeId',arguments,akA);return akA;}catch(e){this.af('get_pageNodeId',e);throw e;}},scrollToNextPage:function(){try{this.ar('scrollToNextPage',arguments);this.aEi();}catch(e){this.af('scrollToNextPage',e);throw e;}},scrollToPreviousPage:function(){try{this.ar('scrollToPreviousPage',arguments);this.aDf();}catch(e){this.af('scrollToPreviousPage',e);throw e;}},scrollToFirstPage:function(){try{this.ar('scrollToFirstPage',arguments);this.aDm();}catch(e){this.af('scrollToFirstPage',e);throw e;}},scrollToLastPage:function(){try{this.ar('scrollToLastPage',arguments);this.aDD();}catch(e){this.af('scrollToLastPage',e);throw e;}},scrollToPage:function(pageIndex){try{this.ar('scrollToPage',arguments,1);this.pK(pageIndex);}catch(e){this.af('scrollToPage',e);throw e;}},rotate:function(degreesClockwise){try{this.ar('rotate',arguments,1);this.aEA(degreesClockwise);}catch(e){this.af('rotate',e);throw e;}},rotateAll:function(degreesClockwise){try{this.ar('rotateAll',arguments,1);this.aco(degreesClockwise,true);}catch(e){this.af('rotateAll',e);throw e;}},get_enabled:function(){try{var aI=this.atw();this.cZ('get_enabled',arguments,aI);return aI;}catch(e){this.af('get_enabled',e);throw e;}},get_pageLayout:function(){try{var aI=this.aAo();this.cZ('get_pageLayout',arguments,aI);return aI;}catch(e){this.af('get_pageLayout',e);throw e;}},set_pageLayout:function(value){try{this.ar('set_pageLayout',arguments);this.aoa(value);}catch(e){this.af('set_pageLayout',e);throw e;}},get_viewMode:function(){try{var aI=this.axi();this.cZ('get_viewMode',arguments,aI);return aI;}catch(e){this.af('get_viewMode',e);throw e;}},set_viewMode:function(value){try{this.ar('set_viewMode',arguments);this.OI(value);}catch(e){this.af('set_viewMode',e);throw e;}},get_loadingContent:function(){try{var aI=this.ayr();this.cZ('get_loadingContent',arguments,aI);return aI;}catch(e){this.af('get_loadingContent',e);throw e;}},set_loadingContent:function(value){try{this.ar('set_loadingContent',arguments);this.aoU(value);}catch(e){this.af('set_loadingContent',e);throw e;}},fitPages:function(fitType){try{this.ar('fitPages',arguments,1);this.avD(fitType);}catch(e){this.af('fitPages',e);throw e;}},openPage:function(pageIndex){try{this.ar('openPage',arguments,1);this.Nn(pageIndex);}catch(e){this.af('openPage',e);throw e;}},requestPageAttributes:function(page,attributesRetrievedCallback,attributesRetrievalFailedCallback){try{this.ar('requestPageAttributes',arguments,1);this.LG(page,attributesRetrievedCallback,attributesRetrievalFailedCallback);}catch(e){this.af('requestPageAttributes',e);throw e;}},scrollRegionIntoView:function(pageIndex,rectangle){try{this.ar('scrollRegionIntoView',arguments,1);return this.aDF(pageIndex,rectangle);}catch(e){this.af('scrollRegionIntoView',e);throw e;}},scrollBy:function(xVal,yVal){try{this.ar('scrollBy',arguments,1);return this.aEM(xVal,yVal);}catch(e){this.af('scrollBy',e);throw e;}},scrollConversationIntoView:function(conversation){try{this.ar('scrollConversationIntoView',arguments,1);return this.aEI(conversation);}catch(e){this.af('scrollConversationIntoView',e);throw e;}},get_documents:function(){return this.YM();},get_encryption:function(){try{var aI=this.jt();this.cZ('get_encryption',arguments,aI);return aI;}catch(e){this.af('get_encryption',e);throw e;}},set_encryption:function(value){try{this.ar('set_encryption',arguments);this.ou(value);}catch(e){this.af('set_encryption',e);throw e;}},get_annotationXmlDom:function(){try{var aI=this.avd();return aI;}catch(e){this.af('get_annotationXmlDom',e);throw e;}},set_annotationXmlDom:function(value,stampImages,retainExistingMarks,loadAsHidden){try{this.aDW(value,stampImages,retainExistingMarks,loadAsHidden);}catch(e){this.af('set_annotationXmlDom',e);throw e;}},get_resourcePath:function(){try{var aI=this.wH();this.cZ('get_resourcePath',arguments,aI);return aI;}catch(e){this.af('get_resourcePath',e);throw e;}},set_resourcePath:function(R){try{this.ar('set_resourcePath',arguments);this.Jg(R);}catch(e){this.af('set_resourcePath',e);throw e;}},get_redactionDraftMode:function(){try{var aI=this.mH();this.cZ('get_redactionDraftMode',arguments,aI);return aI;}catch(e){this.af('get_redactionDraftMode',e);throw e;}},set_redactionDraftMode:function(value){try{this.ar('set_redactionDraftMode',arguments);this.pe(value);}catch(e){this.af('set_redactionDraftMode',e);throw e;}},get_displayedPages:function(){try{var aI=this.auH();this.cZ('get_displayedPages',arguments,aI);return aI;}catch(e){this.af('get_displayedPages',e);throw e;}},get_requireRequestsOptimize:function(){try{var aI=this.CC();this.cZ('get_requireRequestsOptimize',arguments,aI);return aI;}catch(e){this.af('CC',e);throw e;}},set_requireRequestsOptimize:function(value){try{this.ar('set_requireRequestsOptimize',arguments);this.Kg(value);}catch(e){this.af('set_requireRequestsOptimize',e);throw e;}},get_serviceResponseTimeout:function(){try{var aI=this.kE();this.cZ('get_serviceResponseTimeout',arguments,aI);return aI;}catch(e){this.af('get_serviceResponseTimeout',e);throw e;}},set_serviceResponseTimeout:function(value){try{this.ar('set_serviceResponseTimeout',arguments);this.yH(value);}catch(e){this.af('set_serviceResponseTimeout',e);throw e;}},get_pageRotation:function(){try{var aI=this.azG();this.cZ('get_pageRotation',arguments,aI);return aI;}catch(e){this.af('get_pageRotation',e);throw e;}},set_pageRotation:function(value){try{this.ar('set_pageRotation',arguments);this.aoo(value);}catch(e){this.af('set_pageRotation',e);throw e;}},getNodeID:function(pageIndex){try{this.ar('getNodeID',arguments,1);return this.axE(pageIndex);}catch(e){this.af('getNodeID',e);throw e;}},get_isCommentsPanelOpen:function(){try{var aI=this.aza();this.cZ('get_isCommentsPanelOpen',arguments,aI);return aI;}catch(e){this.af('get_isCommentsPanelOpen',e);throw e;}},openCommentsPanel:function(){try{this.ar('openCommentsPanel',arguments);this.awb();}catch(e){this.af('openCommentsPanel',e);throw e;}},closeCommentsPanel:function(){try{this.ar('closeCommentsPanel',arguments);this.aqA();}catch(e){this.af('closeCommentsPanel',e);throw e;}},get_conversationDOMFactory:function(){try{var aI=this.auK();this.cZ('get_conversationDOMFactory',arguments,aI);return aI;}catch(e){this.af('get_conversationDOMFactory',e);throw e;}},set_conversationDOMFactory:function(value){try{this.ar('set_conversationDOMFactory',arguments);this.aEC(value);}catch(e){this.af('set_conversationDOMFactory',e);throw e;}},get_selectedConversation:function(){try{var aI=this.ayg();this.cZ('get_selectedConversation',arguments,aI);return aI;}catch(e){this.af('get_selectedConversation',e);throw e;}},set_selectedConversation:function(value){try{this.ar('set_selectedConversation',arguments);this.anI(value);}catch(e){this.af('set_selectedConversation',e);throw e;}},refreshConversations:function(markIDs){try{this.ar('refreshConversations',arguments);this.aBf(markIDs);}catch(e){this.af('refreshConversations',e);throw e;}},preserveScrollPosition:function(){try{this.aGa();}catch(e){this.af('preserveScrollPosition',e);throw e;}},restoreScrollPosition:function(){try{this.aCO();}catch(e){this.af('restoreScrollPosition',e);throw e;}},prefetchPages:function(){try{this.aGw();}catch(e){this.af('prefetchPages',e);throw e;}}};MX.registerClass=da;MX.registerClass('IPCC.PageList',{});module.exports=MX;},{"./IPCC.Util":28}],43:[function(require,module,exports){var pV=function(ci,vL){var V=this;this.ci=ci;this.vL=vL;this.azM=function(){return V.ci;};this.aIo=function(){return V.vL;};};pV.prototype.get_propertyName=function(){return this.ci;};pV.prototype.get_propertyInfo=function(){return this.vL;};module.exports=pV;},{}],44:[function(require,module,exports){var DA=function(){this.cT=1;this.width=0;this.height=0;this.oi=0;this.zN=0;this.pool=undefined;return this;};DA.prototype.RW=function(ei){if(ei.width<1||ei.height<1){return[];}var nt=Math.floor(ei.x*this.cT);var mN=Math.floor(ei.y*this.cT);var nB=Math.ceil((ei.x+ei.width)*this.cT);var mv=Math.ceil((ei.y+ei.height)*this.cT);var oG=[];var H,ey;var cl=this.tiles.length;for(H=0;H<cl;H++){ey=this.tiles[H];if(ey.x<=nB&&ey.right>=nt&&ey.y<=mv&&ey.bottom>=mN){oG.push(ey);}}return oG;};module.exports=DA;},{}],45:[function(require,module,exports){var vm=function(){this.x=0;this.y=0;this.right=0;this.bottom=0;this.aF=0;this.bj=0;this.ya=0;this.vY=0;this.url='';this.poolItem=undefined;this.level=undefined;return this;};vm.prototype.unlock=function(){this.level.pool.age(this);};vm.prototype.lock=function(){this.level.pool.lockTile(this);};vm.prototype.relock=function(){return this.level.pool.Zf(this);};vm.prototype.get_isLockedAndLoaded=function(){if(this.poolItem===undefined|| !this.poolItem.loaded){return false;}return true;};vm.prototype.toString=function(){var am='x:'+this.x.toString()+', y:'+this.y.toString()+', right:'+this.right.toString()+', bottom:'+this.bottom.toString();if(this.level){am='scale:'+this.level.cT.toString()+', '+am;}return am;};module.exports=vm;},{}],46:[function(require,module,exports){var nq=function(){this.ac=false;this.h=false;};nq.prototype.mF=function(h){this.h=h;};nq.prototype.eg=function(){this.h=false;};nq.prototype.ak=function(){if(this.ac){this.h.aw().pq();this.ac=false;this.h.dC();}};nq.prototype.sS=function(){this.ak();this.h.dC();};nq.prototype.kF=function(J){this.ak();if(J.domEvent.button===0){var aq=this.h.aw();this.ac=true;aq.Dn(J.constrainedImagePoint);this.os=J.windowPoint;this.h.dC();}};nq.prototype.kL=function(J){if(J.domEvent.button!==0){this.ak();}if(this.ac){var aq=this.h.aw();aq.zX(J.constrainedImagePoint);this.h.dC();}};nq.prototype.jN=function(J){if(this.ac&&J.domEvent.button===0){var fN=J.windowPoint.x-this.os.x;var gj=fN*fN;fN=J.windowPoint.y-this.os.y;gj+=fN*fN;if(gj>25){var h=this.h;var aq=h.aw();var bn=aq.eA();var bu=h.fa();var awn=bu.width;var axb=bu.height;var bM=h.cz();aq.zX(J.constrainedImagePoint);var it=aq.wb();aq.pq();h.bm('userModifiedViewState',{});bn.Nc(bM,bu,it);bn.jZ(bM,bu);aq.ip(bn);h.dC();if(awn!==bu.width||axb!==bu.height){bn=aq.eA();bn.Nc(bM,bu,it);bn.jZ(bM,bu);aq.ip(bn);}}}this.ak();};nq.prototype.ox=function(J){var bu=this.h.fa();if(J.windowPoint.x<=0||J.windowPoint.x>=bu.width-2){this.ak();}if(J.windowPoint.y<=0||J.windowPoint.y>=bu.height-2){this.ak();}};nq.prototype.lO=function(){this.ak();};module.exports=nq;},{}],47:[function(require,module,exports){var kM={'paramName':'Parameter name: {0}','svctype':'License','argumentNull':'Value cannot be null.','spc':' ','actualValue':'Actual value was {0}.','fwdslash':'/','prodInfo':'prodInfoPass','argumentOutOfRange':'Specified argument was out of the range of valid values.','argumentTypeWithTypes':'Object of type \'{0}\' cannot be converted to type \'{1}\'.','argumentType':'Object cannot be converted to the required type.','invalidOperation':'Operation is not valid due to the current state of the object.','notImplemented':'The method or operation is not implemented.','argument':'Value does not fall within the expected range.','prodFailInfo':'prodInfoFail','svcReqStr':'','viewer':'ClientViewer','querySymb':'?','version':'v=','iv':'iv=','param':'p='};module.exports=kM;},{}],48:[function(require,module,exports){var zR=function(){};zR.prototype.mF=function(h){this.h=h;this.aq=h.aw();};zR.prototype.eg=function(){this.h=false;};zR.prototype.ak=function(){};module.exports=zR;},{}],49:[function(require,module,exports){var et=require('./IPCC.Util').regEnum;var FB=function(){};FB.registerEnum=et;FB.prototype={Pinch:"Pinch",Zoom:"Zoom",Fit:"Fit",ViewMode:"ViewMode"};FB.registerEnum('IPCC.ScaleTrigger',false);module.exports=FB;},{"./IPCC.Util":28}],50:[function(require,module,exports){var nP=function(){this.ac=false;this.h=false;};nP.prototype.mF=function(h){this.h=h;};nP.prototype.eg=function(){this.h=false;};nP.prototype.ak=function(){if(this.ac){this.h.pq();this.ac=false;this.h.dC();}};nP.prototype.sS=function(){this.ak();};nP.prototype.kF=function(J){this.ak();if(J.domEvent.button===0){var aq=this.h.aw();this.ac=true;aq.Dn(J.constrainedImagePoint);this.h.dC();}};nP.prototype.kL=function(J){if(J.domEvent.button!==0){this.ak();}if(this.ac){var aq=this.h.aw();aq.zX(J.constrainedImagePoint);this.h.dC();}};nP.prototype.jN=function(J){if(J.domEvent.button===0){this.ac=false;}this.ak();};nP.prototype.ox=function(J){var bu=this.h.fa();if(J.windowPoint.x<=0||J.windowPoint.x>=bu.width-2){this.ak();}if(J.windowPoint.y<=0||J.windowPoint.y>=bu.height-2){this.ak();}};nP.prototype.lO=function(){this.ak();};module.exports=nP;},{}],51:[function(require,module,exports){var lv=function(){this.ac=false;this.h=false;};lv.prototype.mF=function(h){this.h=h;};lv.prototype.eg=function(){this.h=false;};lv.prototype.ak=function(){if(this.ac){this.h.aw().abJ();this.ac=false;}};lv.prototype.sS=function(){this.ak();};lv.prototype.kF=function(J){if(J.domEvent.button===0){var aq=this.h.aw();this.ac=true;var dQ=this.h.Kt(J.constrainedImagePoint);this.h.gU=dQ;if(!dQ){return;}this.h.zY(dQ);aq.zY(dQ);aq.tZ(undefined);this.h.dC();}};lv.prototype.kL=function(J){var h=this.h;h.aAu=true;if(J.domEvent.button!==0){this.ak();}if(this.ac){var aq=h.aw();var dQ=h.Kt(J.constrainedImagePoint);var gA=aq.Bv();if(gA===dQ){return;}h.tZ(dQ);h.dC();}};lv.prototype.jN=function(J){if(J.domEvent.button===0){this.ac=false;}var h=this.h;var aq=this.h.aw();var di=aq.iE.length;if(di===0){this.ak();return;}var aP=aq.iE[0].dQ;var cc=aq.iE[di-1].dQ;if(h.JI===true){if(aP>cc){aP=cc;}var H;var oR=IPCC.Cx();this.K=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.HighlightText);this.K.aP=aP;this.K.bZ=h.BB();this.K.cq=di;this.K.set_fillColor(h.sM);this.K.iq='y';this.K.aD=oR;for(H=0;H<aq.iE.length;H++){var aE=aq.iE[H];var Dg=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Highlight);var zd=aE.K.eH();Dg.set_fillColor(h.sM);Dg.set_opacity(aE.K.get_opacity());Dg.set_rectangle(zd);Dg.aD=oR;Dg.iq='y';this.h.ee().addMark(Dg);}aq.iE=[];if(di>0){this.h.ee().addMark(this.K);}h.mf().removeAllMarks();}di=aq.iE.length;var alu=new IPCC.Web.UI.TextSelectedEventArgs();alu.text=h.BB();h.bm('selectTextMouseToolCompleted',alu);h.dC();this.ak();};lv.prototype.ox=function(J){var bu=this.h.fa();if(J.windowPoint.x<=0||J.windowPoint.x>=bu.width-2){this.ak();}if(J.windowPoint.y<=0||J.windowPoint.y>=bu.height-2){this.ak();}};lv.prototype.lO=function(){this.ak();};module.exports=lv;},{}],52:[function(require,module,exports){var cv=function(){this.h=false;this.Hz=0;this.awa=1;this.abo=2;this.aan=3;};cv.prototype.mF=function(h){this.h=h;this.dJ=this.Hz;};cv.prototype.eg=function(){this.h=false;};cv.prototype.ak=function(){this.dJ=this.Hz;};cv.prototype.aaP=function(J){var aCF=new Date()-this.aqu;if(aCF<750){var fL=this.ams.x-J.windowPoint.x;var eN=this.ams.y-J.windowPoint.y;var gj=fL*fL+eN*eN;if(gj<2500){return true;}}return false;};cv.prototype.afC=function(J){this.aqu=new Date();this.ams=new IPCC.Web.UI.Point(J.windowPoint.x,J.windowPoint.y);};cv.prototype.MI=function(J){var aY=J.domEvent.rawEvent;if(aY.touches.length===1){if(this.dJ===this.abo&&this.aaP(J)){this.dJ=this.aan;}else{this.dJ=this.awa;}this.afC(J);this.h.gf('kF',J);}else{this.dJ=this.Hz;this.h.gf('sS',J);}};cv.prototype.ML=function(J){var aY=J.domEvent.rawEvent;if(aY.touches.length===1){this.h.gf('kL',J);}};cv.prototype.NL=function(J){var aY=J.domEvent.rawEvent;if(aY.touches.length===0){if(this.aaP(J)){if(this.dJ===this.aan){this.dJ=this.Hz;this.h.gf('jN',J);this.h.gf('zF',J);}else{this.afC(J);this.dJ=this.abo;this.h.gf('jN',J);}}else{this.dJ=this.Hz;this.h.gf('jN',J);}}};cv.prototype.HG=function(J){this.h.gf('sS',J);};module.exports=cv;},{}],53:[function(require,module,exports){var FE=function(aF,bj,gV,gx){IPCC.Web.UI.Rectangle.call(this,0,0,0,0);this.width=aF;this.height=bj;this.gV=gV;this.gx=gx;return this;};FE.prototype.toString=function(){return 'Space('+this.width+' x '+this.height+', '+this.gV+', '+this.gx+')';};module.exports=FE;},{}],54:[function(require,module,exports){var zK=function(Rx){this.wp=(typeof(Rx)!=='undefined'&&Rx!==null&&Rx!=='')?[Rx.toString()]:[];this.R={};this.cl=0;};zK.prototype.aHv=function(aO){this.wp[this.wp.length]=aO;};zK.prototype.aHo=function(aO){this.wp[this.wp.length]=((typeof(aO)==='undefined')||(aO===null)||(aO===''))?'\r\n':aO+'\r\n';};zK.prototype.aHl=function(){this.wp=[];this.R={};this.cl=0;};zK.prototype.aJZ=function(){if(this.wp.length===0){return true;}return this.toString()==='';};zK.prototype.aHn=function(CO){CO=CO||'';var parts=this.wp;if(this.cl!==parts.length){this.R={};this.cl=parts.length;}var val=this.R;if(typeof(val[CO])==='undefined'){if(CO!==''){for(var i=0;i<parts.length;){if((typeof(parts[i])==='undefined')||(parts[i]==='')||(parts[i]===null)){parts.splice(i,1);}else{i++;}}}val[CO]=this.wp.join(CO);}return val[CO];};module.exports=zK;},{}],55:[function(require,module,exports){var ea=function(h,qW){this.RZ=false;this.aaQ=false;this.EK=true;this.TG=false;this.NU=false;this.yi=0;this.xl=0;var aj=this;this.awp='opacity';this.avp=function(dv){return dv.toString();};var amw=function amw(bK,eR,ow,bM,mX,mG){var gu;if(this.h.qt()===true){bK.xO.setAttribute('width',ow.width);bK.xO.setAttribute('height',ow.height);bK.tC.setAttribute('width',ow.width);bK.tC.setAttribute('height',ow.height);gu=eR.rk().toString()+','+eR.ot().toString()+','+eR.pJ().toString()+','+eR.rD().toString()+','+(eR.yt()+mX).toString()+','+(eR.xU()+mG).toString();this.gW(bK.AS,'transform','matrix('+gu+')');}else{bK.xO.setAttribute('width',ow.width);bK.xO.setAttribute('height',ow.height);bK.tC.setAttribute('width',ow.width);bK.tC.setAttribute('height',ow.height);gu=eR.rk().toString()+','+eR.ot().toString()+','+eR.pJ().toString()+','+eR.rD().toString()+','+(eR.yt()+mX).toString()+','+(eR.xU()+mG).toString();this.gW(bK.AS,'transform','matrix('+gu+')');}};function awD(bK){var pathList=bK.xO.getElementsByTagName('path');var gList=bK.xO.getElementsByTagName('g');bK.LF=[];function ajG(pathItem,index){if(!pathItem.hasAttribute('data-pcc-mark')){if(pathItem.hasAttribute('stroke-width')||pathItem.style.strokeWidth){pathItem.originalStrokeWidth=pathItem.getAttribute('stroke-width')||pathItem.style.strokeWidth;bK.LF.push(pathItem);}}};IPCC.T.forEach(pathList,ajG);IPCC.T.forEach(gList,ajG);};this.agi=function(bK){var aq=h.aw();var aBI=1;var ma=aq.ayu();function setStrokeWidthToOriginalValue(pathItem,index){if(pathItem.hasAttribute('stroke-width')){pathItem.setAttribute('stroke-width',parseFloat(pathItem.originalStrokeWidth));}else{var strokeWidth=parseFloat(pathItem.originalStrokeWidth);pathItem.style.strokeWidth=strokeWidth;}};function updateStrokeWidthByLineWidthMultiplier(pathItem,index){if(pathItem.hasAttribute('stroke-width')){pathItem.setAttribute('stroke-width',parseFloat(pathItem.originalStrokeWidth*ma));}else{var strokeWidth=parseFloat(pathItem.originalStrokeWidth);pathItem.style.strokeWidth=strokeWidth*ma;}};if(bK.LF===undefined){awD(bK);}if(ma===aBI){IPCC.T.forEach(bK.LF,setStrokeWidthToOriginalValue);}else{IPCC.T.forEach(bK.LF,updateStrokeWidthByLineWidthMultiplier);}aq.aBl(false);};function aut(bK,aU){bK.sc.setAttribute('exponent',aU);bK.tk.setAttribute('exponent',aU);bK.rJ.setAttribute('exponent',aU);};function auG(bK,aU){var atr=841;var lT=(aU/atr)* -1;var gu;if(IPCC.T.BK){gu='{00} {01} {02} '+'{10} {11} {12} '+'{20} {21} {22}';gu=gu.replace('{00}',lT).replace('{01}',lT).replace('{02}',lT).replace('{10}',lT).replace('{11}',1).replace('{12}',lT).replace('{20}',lT).replace('{21}',lT).replace('{22}',lT);}else{gu='{00} {01} {02} {03} {04} '+'{10} {11} {12} {13} {14} '+'{20} {21} {22} {23} {24} '+'{30} {31} {32} {33} {34} '+'{40} {41} {42} {43} {44}';gu=gu.replace('{00}',0).replace('{01}',0).replace('{02}',0).replace('{03}',0).replace('{04}',0).replace('{10}',0).replace('{11}',lT).replace('{12}',lT).replace('{13}',lT).replace('{14}',0).replace('{20}',0).replace('{21}',lT).replace('{22}',1).replace('{23}',lT).replace('{24}',0).replace('{30}',0).replace('{31}',lT).replace('{32}',lT).replace('{33}',lT).replace('{34}',0).replace('{40}',0).replace('{41}',0).replace('{42}',0).replace('{43}',0).replace('{44}',0);}bK.ln.setAttribute('kernelMatrix',gu);};this.anB=function(bK){var aq=h.aw();var qO=aq.azw();var rv=aq.axl();if(rv===0&&qO===1){bK.AS.removeAttribute('filter','url(#'+bK.JT+')');}else{bK.AS.setAttribute('filter','url(#'+bK.JT+')');}aut(bK,qO);auG(bK,rv);};var XG,Xs;this.ahG=function(bK,eR,ow,bM,mX,mG){if(bK.XW.match('maglevel')){amw.apply(this,arguments);return;}var bC=bK.eZ.parentElement.getBoundingClientRect();var kv=bC.width/bM.width;var afg=function(val){return Math.abs(val)<1.0e-14;};var fl=0,ek=0;var axU=function(){var qP=eR.ot();if(afg(qP)){qP=0;}var qv=eR.pJ();if(afg(qv)){qv=0;}var awz=eR.rk();var gB=(qP>=0&&qv<0)?90:(qP<0&&qv>=0)?270:(awz<0)?180:(qP>=0&&qv>=0)?0:0;switch(gB){case 90:fl=bC.width;break;case 180:fl=bC.width;ek=bC.height;break;case 270:ek=bC.height;break;}return gB*(Math.PI/180);};var gB=axU();if(parseInt(gB,10)===1||parseInt(gB,10)===4){kv=bC.height/bM.width;}if(kv===XG&&gB===Xs){return;}else{XG=kv;Xs=gB;}var ff=1,jl=0;if(gB!==0){ff=Math.cos(gB);jl=Math.sin(gB);}var bn={kv:ff*kv,qa:ff*kv,qP:jl*kv,qv:jl* -1*kv,fl:fl,ek:ek};var axI=new IPCC.eE(bn.kv,bn.qP,bn.qv,bn.qa,bn.fl,bn.ek);eR.Pg(axI);h.aw().ip(eR);var gu='matrix({scaleX},{skewX},{skewY},{scaleY},{moveX},{moveY})';gu=gu.replace('{scaleX}',bn.kv).replace('{scaleY}',bn.qa).replace('{skewX}',bn.qP).replace('{skewY}',bn.qv).replace('{moveX}',bn.fl).replace('{moveY}',bn.ek);this.gW(bK.AS,'transform',gu);};this.aqY=function(){XG=undefined;Xs=undefined;};this.axL(h);this.asi=function(cU){var bu=new IPCC.FE(cU.clientWidth,cU.clientHeight,96,96);return bu;};this.amz=function(aY){aY.preventDefault();aj.kF(aY);};this.anv=function(aY){aY.preventDefault();aj.kL(aY);};this.anr=function(aY){aY.preventDefault();aj.jN(aY);};this.amT=function(aY){aj.kF(aY);};this.anh=function(aY){aj.zF(aY);};this.aoJ=function(aY){aj.kL(aY);};this.SA=function(aY){aj.lO(aY);};this.apn=function(aY){aj.jN(aY);};this.adP=function(aY){aj.zF(aY);};this.akz=function(aY){aj.VX(aY);};this.NV=function(aY){if(aY.target!==document.activeElement){aj.aws(aY);}};this.akZ=function(aY){if(aY.target!==document.activeElement){aj.avK(aY);}};this.ox=function(aY){try{aY.preventDefault();var J=new IPCC.Web.UI.MouseEventArgs();J.domEvent=aY;aj.qo(J);h.aBR(J);}catch(ex){h.af('mouseOut',ex);}};this.MI=function(aY){try{aY.preventDefault();var J=new IPCC.Web.UI.MouseEventArgs();J.domEvent=aY;aj.qo(J);h.aAZ(J);}catch(ex){h.af('touchStart',ex);}};this.ML=function(aY){try{aY.preventDefault();var J=new IPCC.Web.UI.MouseEventArgs();J.domEvent=aY;aj.qo(J);h.aCq(J);}catch(ex){h.af('touchMove',ex);}};this.NL=function(aY){try{aY.preventDefault();var J=new IPCC.Web.UI.MouseEventArgs();J.domEvent=aY;aj.qo(J);h.aCf(J);}catch(ex){h.af('touchEnd',ex);}};this.HG=function(aY){try{aY.preventDefault();var J=new IPCC.Web.UI.MouseEventArgs();J.domEvent=aY;aj.qo(J);h.aBa(J);}catch(ex){h.af('touchCancel',ex);}};this.ajO=function(aY){try{aY.preventDefault();}catch(ex){h.af('dragStart',ex);}};this.avj=function(){var eW=h.pn().igElements.nf;IPCC.Web.UI.ah.addHandler(eW,"mousewheel",this.SA);IPCC.Web.UI.ah.addHandler(eW,"DOMMouseScroll",this.SA);if(qW){IPCC.Web.UI.ah.addHandler(eW,"touchstart",this.MI);IPCC.Web.UI.ah.addHandler(eW,"touchmove",this.ML);IPCC.Web.UI.ah.addHandler(eW,"touchend",this.NL);IPCC.Web.UI.ah.addHandler(eW,"touchcancel",this.HG);}IPCC.Web.UI.ah.addHandler(eW,"mouseout",this.ox);IPCC.Web.UI.ah.addHandler(eW,"dragstart",this.ajO);};this.aEh=function(){var eW=h.pn().igElements.nf;IPCC.Web.UI.ah.removeHandler(eW,"DOMMouseScroll",this.SA);IPCC.Web.UI.ah.removeHandler(eW,"mouseout",this.ox);if(qW){IPCC.Web.UI.ah.removeHandler(eW,"touchstart",this.MI);IPCC.Web.UI.ah.removeHandler(eW,"touchmove",this.ML);IPCC.Web.UI.ah.removeHandler(eW,"touchend",this.NL);IPCC.Web.UI.ah.removeHandler(eW,"touchcancel",this.HG);}IPCC.Web.UI.ah.removeHandler(eW,"dragstart",this.ajO);};function asF(bK,ir){var qE=document.createElementNS('http://www.w3.org/2000/svg','filter');var JT='filter'+ir;bK.JT=JT;qE.setAttribute('id',JT);qE.setAttribute('x','0');qE.setAttribute('y','0');qE.setAttribute('filterUnits','objectBoundingBox');qE.setAttribute('color-interpolation-filters','sRGB');return qE;};function arI(ir){var ln=document.createElementNS('http://www.w3.org/2000/svg','feConvolveMatrix');ln.setAttribute('in','SourceGraphic');ln.setAttribute('result',ir+'ln');ln.setAttribute('preserveAlpha','true');if(IPCC.T.BK){ln.setAttribute('order','3 3');ln.setAttribute('kernelMatrix','0 0 0 0 1 0 0 0 0');}else{ln.setAttribute('order','5 5');ln.setAttribute('kernelMatrix','0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0');}return ln;};function asQ(ir){var qT=document.createElementNS('http://www.w3.org/2000/svg','feComponentTransfer');qT.setAttribute('in',ir+'ln');qT.setAttribute('result',ir+'qT');return qT;};function atf(ir){var sc=document.createElementNS('http://www.w3.org/2000/svg','feFuncR');sc.setAttribute('type','gamma');sc.setAttribute('amplitude','1');sc.setAttribute('exponent','1');sc.setAttribute('offset','0');var tk=document.createElementNS('http://www.w3.org/2000/svg','feFuncG');tk.setAttribute('type','gamma');tk.setAttribute('amplitude','1');tk.setAttribute('exponent','1');tk.setAttribute('offset','0');var rJ=document.createElementNS('http://www.w3.org/2000/svg','feFuncB');rJ.setAttribute('type','gamma');rJ.setAttribute('amplitude','1');rJ.setAttribute('exponent','1');rJ.setAttribute('offset','0');return{sc:sc,tk:tk,rJ:rJ};};function aCM(bK,ir){var JP=document.createElementNS('http://www.w3.org/2000/svg','feMerge');var aky=document.createElementNS('http://www.w3.org/2000/svg','feMergeNode');var aly=document.createElementNS('http://www.w3.org/2000/svg','feMergeNode');aky.setAttribute('in',ir+'ln');aly.setAttribute('in',ir+'qT');JP.appendChild(aky);JP.appendChild(aly);return JP;};this.arN=function(bK,eZ,sg,ir){var H,bL,cU,YC;var Mu=function(bO,dE,aZ){var cU=document.createElementNS('http://www.w3.org/2000/svg',bO);var H;if(dE){cU.setAttribute('id',dE);}for(H in aZ){if(aZ.hasOwnProperty(H)){cU.setAttribute(H,aZ[H]);}}return cU;};var fH=Mu('svg',null,{xmlns:'http://www.w3.org/2000/svg',version:'1.1',xlink:'http://www.w3.org/1999/xlink','image-rendering':'optimizeQuality'});var qE=asF(bK,ir);bK.aIg=qE;var ln=arI(ir);bK.ln=ln;qE.appendChild(ln);var qT=asQ(ir);bK.qT=qT;qE.appendChild(qT);var Dk=atf();qT.appendChild(Dk.sc);qT.appendChild(Dk.tk);qT.appendChild(Dk.rJ);bK.sc=Dk.sc;bK.tk=Dk.tk;bK.rJ=Dk.rJ;var JP=aCM(bK,ir);qE.appendChild(JP);fH.appendChild(qE);bK.tC=Mu('rect',null,{x:0,y:0,'fill-opacity':'0.005',fill:'#808080'});fH.appendChild(bK.tC);var Tf=Mu('g',null,{});bK.AS=Tf;fH.appendChild(Tf);var cl;if(h.qt()===false){cl=sg.fv.length;}else{cl=1;}for(H=0;H<cl;H++){bL=sg.fv[H];bL.pool.parentElementID=ir+H.toString();YC=1/bL.cT;cU=Mu('g',bL.pool.parentElementID,{transform:'matrix('+YC.toString()+',0,0,'+YC.toString()+',0,0)'});Tf.appendChild(cU);}bK.xO=fH;eZ.appendChild(fH);};this.awe=function(ie){var aqs=this.ade();ie.elementID=aqs;};this.axK=function(ie){var cU=document.getElementById(ie.elementID);this.gW(cU,'display','none');};this.amC=function(ie){var cU=document.getElementById(ie.elementID);if(cU===null){ie.elementID='';return;}cU.setAttributeNS('http://www.w3.org/1999/xlink','href','');cU.parentNode.removeChild(cU);ie.elementID='';};var awC=function(aY){try{aY.target.onload=undefined;aY.target.onerror=undefined;aY.target.onabort=undefined;var ie=aY.target.poolItem;ie.loaded=true;aj.zG();}catch(ex){h.af('downloadImage',ex);}};var akk=function(aY){try{aY.target.onload=undefined;aY.target.onerror=undefined;aY.target.onabort=undefined;aY.target.setAttributeNS('http://www.w3.org/1999/xlink','href','');aY.target.setAttribute('display','none');throw new IPCC.Web.UI.ImGearException('An image failed to download or the user cancelled it',{name:'IPCC.Web.UI.ImGearHttpException'});}catch(ex){h.af('downloadImage',ex);var ca=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();ca.exception=ex;ca.pageNumber=h.bx;h.bm('pageOpenFailed',ca);}};this.azj=function(AJ){var H;var cl=AJ.length;if(h.qt()===false){cl=AJ.length;}else{cl=1;}for(H=0;H<cl;H++){var er=AJ[H];var cU=document.getElementById(er.poolItem.elementID);if(cU===null){var ie=er.poolItem;var PP=ie.pool;var eZ=document.getElementById(PP.parentElementID);cU=document.createElementNS('http://www.w3.org/2000/svg','image');this.gW(cU,'id',ie.elementID);this.gW(cU,'externalResourcesRequired','true');cU.poolItem=ie;cU.onload=awC;cU.onerror=akk;cU.onabort=akk;if(document.documentMode>8||IPCC.T.uG.Ar){ie.loaded=true;}cU.setAttributeNS('http://www.w3.org/1999/xlink','href','data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7');this.avZ(cU,er.url,'image/'+er.contentType);eZ.appendChild(cU);this.gW(cU,'display','block');var aF=er.right-er.x;var bj=er.bottom-er.y;this.gW(cU,'x',er.x);this.gW(cU,'y',er.y);this.gW(cU,'width',aF);this.gW(cU,'height',bj);if(cl>1){var ard=aF-er.ya;var apS=bj-er.vY;var Lo=document.createElementNS('http://www.w3.org/2000/svg','clipPath');Lo.id=cU.id+'_clip';var fE=document.createElementNS('http://www.w3.org/2000/svg','rect');this.gW(fE,'x',er.x-er.ya);this.gW(fE,'y',er.y-er.vY);this.gW(fE,'width',ard);this.gW(fE,'height',apS);this.gW(fE,'class','expand-on-print');Lo.appendChild(fE);var insertBeforeElement=null;for(var i=0;i<eZ.childNodes.length;i++){if(eZ.childNodes.item(i).getAttribute('x')<er.x||eZ.childNodes.item(i).getAttribute('y')<er.y){insertBeforeElement=eZ.childNodes.item(i);break;}}eZ.insertBefore(cU,insertBeforeElement);eZ.appendChild(Lo);this.gW(cU,'style','clip-path: url(#'+Lo.id+')');this.gW(cU,'class','no-clip-on-print');}}this.gW(cU,'display','block');}if((document.documentMode>8||IPCC.T.uG.Ar)&&AJ.length>0){aj.zG();}};this.avZ=function(cU,bE,tL){var sV=true;var mq=0;if(h.kE()===0){sV=false;}function fz(aH){var cN,ca;try{var fu=IPCC.Web.Hw(aH),YR;var nJ=aH.getResponseHeader("Accusoft-Data-Encrypted");if(nJ==='true'&&h.jt()===true){var tm=IPCC.Web.hs.sP.tP(aH.getResponseHeader("Accusoft-Data-SK"));var aV=IPCC.Web.IV(tm,ij);var uc=IPCC.Web.CS(fu,aV,ij);YR=IPCC.Web.hs.sP.oP(uc,0,0);}else{YR=IPCC.Web.hs.sP.oP(fu,0,0);}cU.setAttributeNS('http://www.w3.org/1999/xlink','href','data:'+tL+';base64,'+YR);}catch(ex){cN="Image error, Error message = "+ex.message;ca=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();ca.exception=ex;ca.pageNumber=h.bx;h.bm('pageOpenFailed',ca);throw new IPCC.Web.UI.ImGearArgumentException(null,cN);}};function fg(am){var fW=am.response.status,cN,mW,lZ;if(!am.response){throw new IPCC.Web.UI.ImGearHttpException(fW,"Client Image load timeout");}if(fW===403){mq++;if(am.response.statusText&&am.response.statusText!==""){cN="Expired viewer session ID, error message from the server: "+am.response.statusText;}else{cN="Expired viewer session ID. No error text message was received from the server:";}throw new IPCC.Web.UI.ImGearHttpException(fW,cN);}mW=am.response.getResponseHeader('Accusoft-Status-Message');if(mW){var sI;lZ=am.response.getResponseHeader('Accusoft-Status-Number');if(IPCC.Web.xS(lZ)){sI=parseInt(lZ,10);}throw new IPCC.Web.UI.ImGearHttpException(fW,mW,sI);}else{if(am.response.statusText&&am.response.statusText!==""){cN=am.response.statusText;}else{cN="HTTP Error was received from the image server but the server did not provide any error description.";}throw new IPCC.Web.UI.ImGearHttpException(fW,cN);}};var gK={method:'GET'};if(sV===true){gK.timeout=h.kE();}if(h.aAd()&&h.jt()===true){var ij=IPCC.Web.FD.ajd(4);var qR=IPCC.Web.hs.II.oP(ij);var aEb=bE+'&iv='+qR;gK.url=aEb;}else{gK.mimeType='text/plain; charset=x-user-defined';gK.url=bE;}IPCC.T.ob.eB(gK).then(fz,fg);};this.aAf=function(bK){var V=this;if(bK.XM){return;}var mq=0;var er=bK.sg.fv[0].tiles[0];if(!er){return;}var PP=er.level.pool;var eZ=document.getElementById(PP.parentElementID);var sV=true;if(h.kE()===0){sV=false;}var wF=h.YY();if(bK.Ia){if(wF===2){delete bK.Ia;if(eZ.childNodes.length>0){eZ.removeChild(eZ.childNodes[0]);}}else if(wF===1){if(eZ.childNodes.length>0){eZ.removeChild(eZ.childNodes[0]);}}else{if(eZ.childNodes.length===0){eZ.appendChild(bK.asH);}}h.yG=true;return;}if(wF>0){return;}function fz(aH){var ca,cN;bK.XM=false;try{try{var lN;var nJ=aH.getResponseHeader("Accusoft-Data-Encrypted");if(nJ==='true'&&h.jt()===true){var tm=IPCC.Web.hs.sP.tP(aH.getResponseHeader("Accusoft-Data-SK"));var aV=IPCC.Web.IV(tm,ij);var fu=IPCC.Web.Hw(aH);var uc=IPCC.Web.CS(fu,aV,ij);lN=IPCC.Web.hs.Gu.oP(uc);}else{lN=aH.responseText;}axB(lN);}catch(ex){cN="SVG image error, Error message = "+ex.message;ca=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();ca.exception=ex;ca.pageNumber=h.bx;h.bm('pageOpenFailed',ca);throw new IPCC.Web.UI.ImGearArgumentException(null,cN);}}catch(e){h.af('openPage',e);if(typeof(h.bm)==='function'){ca=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();ca.exception=e;ca.pageNumber=h.bx;h.bm('pageOpenFailed',ca);}}};function fg(am){var ca,cN,mW,lZ;bK.XM=false;try{if(!am.response){throw new IPCC.Web.UI.ImGearHttpException(0,"Client SVG load timeout");}var fW=am.response.status;if(fW===480){mq++;if(am.response.statusText&&am.response.statusText!==""){cN=cN="PDF file password required, error message from the server: "+am.response.statusText;}else{cN="PDF file password required.";}throw new IPCC.Web.UI.ImGearHttpException(fW,cN);}if(fW===403){mq++;if(am.response.statusText&&am.response.statusText!==""){cN="Expired viewer session ID, error message from the server: "+am.response.statusText;}else{cN="Expired viewer session ID. No error text message was received from the server:";}throw new IPCC.Web.UI.ImGearHttpException(fW,cN);}mW=am.response.getResponseHeader('Accusoft-Status-Message');if(mW){var sI;lZ=am.response.getResponseHeader('Accusoft-Status-Number');if(IPCC.Web.xS(lZ)){sI=parseInt(lZ,10);}throw new IPCC.Web.UI.ImGearHttpException(fW,mW,sI);}else{if(am.response.statusText&&am.response.statusText!==""){cN=am.response.statusText;}else{cN="HTTP Error was received from the image server but the server did not provide any error description.";}throw new IPCC.Web.UI.ImGearHttpException(fW,cN);}}catch(e){h.af('openPage',e);if(typeof(h.bm)==='function'){ca=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();ca.exception=e;ca.pageNumber=h.bx;h.bm('pageOpenFailed',ca);}}};var apE=function(){var aq=h.aw();var AC=aq.agv();h.yG=true;h.bm('pageDisplayed',{aR:h.bx});if(AC){V.agi(bK);}};var axB=function(hd){var mP=PP.parentElementID.toString();var My=(IPCC.T.BK||IPCC.T.Yl)?'':window.location.href.replace(window.location.hash,'').replace(/#$/,'');var vw=IPCC.T.apU(hd,My,mP);var pZ=vw.querySelectorAll('style');IPCC.T.forEach(pZ,function(ab){var EO=(ab.styleSheet)?ab.styleSheet.cssText:ab.textContent;if(ab.styleSheet){ab.styleSheet.cssText=EO;}else{ab.appendChild(document.createTextNode(EO));}});var ky=null;var HH=vw.firstChild;while(HH!==null){if(HH.nodeName==='svg'){ky=HH;break;}HH=HH.nextSibling;}if(ky===null){throw new IPCC.Web.UI.ImGearInvalidOperationException('Unable to process SVG image data.');}if(!bK.Ia){bK.asH=ky;eZ.appendChild(ky);bK.Ia=true;if(!h.yG&&bK.Ia){setTimeout(apE,1);}}};var bE;var ij,qR;h.yG=false;if(h.jt()===true){ij=IPCC.Web.FD.SM(4,IPCC.Web.Ru());qR=IPCC.Web.hs.II.oP(ij);bE=er.url+'&iv='+qR;}else{bE=er.url;}var gK={method:'GET',url:bE,cache:true};if(sV===true){gK.timeout=h.kE();}bK.XM=true;IPCC.T.ob.eB(gK).then(fz,fg);};this.asv=function(er,dv){if(!er){return;}var CF=document.getElementById(er.poolItem.elementID);this.gW(CF,'x',er.x);this.gW(CF,'y',er.y);this.gW(CF,'width',er.right-er.x);this.gW(CF,'height',er.bottom-er.y);this.gW(CF,'opacity',dv);this.gW(CF,'display','block');};this.abW=function(AJ,dv,eR){var H;if(h.qt()===false){for(H=0;H<AJ.length;H++){this.asv(AJ[H],dv);}}};return this;};ea.viewerCounter=0;ea.tileCounter=0;ea.imageIDCounter=0;ea.prototype.axL=function(h){this.ir=IPCC.ea.viewerCounter.toString();IPCC.ea.viewerCounter++;this.h=h;if(IPCC.cJ){this.rd=new IPCC.Web.UI.MarkCollection();}var V=this;function aDb(bP,J){V.awS(J);};function xK(bP,J){V.avt(J);};h.lw(aDb);h.add_markAdded(xK);h.add_markChanged(xK);h.add_inProgressMarkChanged(xK);h.add_markRemoved(xK);h.add_markReordered(xK);h.add_marksLoaded(xK);h.add_markSelectionChanged(xK);h.add_markTextSelectionChanged(xK);};ea.prototype.ade=function(){var dE='igtile'+IPCC.ea.tileCounter.toString();IPCC.ea.tileCounter++;return dE;};ea.prototype.zG=function(){this.RZ=true;this.EK=this.EK&&this.aaQ;var V=this;var aDU=function(){if(!V.RZ){return;}V.dC(V.h.cz(),V.h.aw(),V.h.fa());V.EK=true;};window.setTimeout(aDU,0);};ea.prototype.awS=function(J){var tJ=J.get_propertyName();switch(tJ){case 'magnifierWindowSize':case 'magnifierWindowPosition':case 'magnifierMagnification':if(!this.h.aw().get_magnifierIsVisible()){return;}break;case 'cursor':case 'markCursor':this.FT=true;if(this.h.zA()===true){this.zG();}return;case 'displayedPageRectangle':if(this.h.yG===true){this.zG();return;}break;case 'redactionDraftMode':this.FT=true;this.zG();return;}if(this.h.zA()===true){this.zG();}};ea.prototype.avt=function(J){if(J.mark&& !this.FT){this.rd.addMark(J.mark);}else{this.FT=true;}if(this.h.zA()===true){this.zG();}};ea.prototype.abG=function(){this.jX=this.eR.clone();this.jX.mY(this.aiY,this.aji);this.jX.jZ(this.h.cz(),this.h.fa());this.sY=this.jX.clone();this.sY.vJ();};ea.prototype.dC=function(bV,aq,bu){try{this.RZ=false;if(this.NK===true){return;}var dp=this.h.pn();if(dp===null){return;}var bY=dp.igElements;try{this.NK=true;if(this.Hs===undefined||bV===undefined|| !(this.Hs.equals(bV))){if(this.TG){if(this.hW){this.aEh(this.hW);var eW=bY.nf;IPCC.Web.UI.ah.removeHandler(eW,"mousedown",this.amT);IPCC.Web.UI.ah.removeHandler(eW,"mousemove",this.aoJ);IPCC.Web.UI.ah.removeHandler(eW,"mouseup",this.apn);IPCC.Web.UI.ah.removeHandler(eW,"dblclick",this.adP);IPCC.Web.UI.ah.removeHandler(eW,"contextmenu",this.akz);IPCC.Web.UI.ah.removeHandler(bY.dY,"blur",this.NV);IPCC.Web.UI.ah.removeHandler(bY.gT,"blur",this.akZ);IPCC.Web.UI.ah.removeHandler(bY.dN,"blur",this.NV);}delete this.hW;this.anX(bY.qF);this.anX(bY.Cd);this.TG=false;if(this.EY!==undefined){this.EY.unlockAllItems();}if(this.Ip!==undefined){this.Ip.unlockAllItems();}this.EY=undefined;this.Ip=undefined;dp.igElements.po.onscroll=null;dp.igElements.po.onresize=null;}if(dp.querySelectorAll){if(dp.querySelectorAll(".pccPageLoadFail").length===0){dp.innerHTML='';}}this.h.pO(true);if(bV===undefined){this.NK=false;this.Hs=undefined;this.aqY();return;}this.Hs=bV.clone();this.EY=new IPCC.ru();this.EY.createPyramid(this,this.h);this.Ip=new IPCC.ru();this.Ip.createPyramid(this,this.h);this.TG=true;this.ask(this.ir);}this.eR=aq.eA();var Si=this.eR.qV(bV);this.eR.mY(-Si.x,-Si.y);this.ayc=this.eR.clone();this.ayc.vJ();this.aiY=Math.round(Si.x);this.aji=Math.round(Si.y);this.abG();this.anL(bV,aq,bu);if(bV.bx===0){this.abG();}}finally{this.NK=false;this.FT=false;if(this.rd){this.rd.removeAllMarks();}}this.acR(true);}catch(e){this.h.af('display',e);throw e;}};ea.prototype.aoO=function(xP,xg,yS){if(xP[xg]===yS){return;}xP[xg]=yS;};ea.prototype.gW=function(xP,xg,yS){if(xP.getAttribute(xg)===yS){return;}xP.setAttribute(xg,yS);};ea.prototype.zj=function(xP,xg,yS){if(xP.style[xg]===yS){return;}xP.style[xg]=yS;};ea.prototype.acR=function(aqm){if(this.NK){return;}if(this.RZ&& !this.EK){return;}if(!aqm){try{this.aaQ=true;var dp=this.h.pn();if(dp){this.yi=dp.igElements.po.scrollLeft;this.xl=dp.igElements.po.scrollTop;}this.aor();this.abG();this.h.aw().ip(this.jX);this.h.bm('userModifiedViewState',{});this.h.pO(false);}finally{this.aaQ=false;}}};ea.prototype.aCz=function(bK,eR,aEy){var sg=bK.sg;var pG=sg.aBi(eR,aEy);if(!this.h.yG&&pG.tilesToRequest.length===0&&(pG.opaqueTiles.length+pG.translucentTiles.length)>0){this.h.yG=true;this.h.bm('pageDisplayed',{aR:this.h.bx});}sg.aAt(pG);if(this.h.qt()===false){this.azj(pG.tilesToRequest);this.abW(pG.opaqueTiles,1,eR);this.abW(pG.translucentTiles,pG.opacity,eR);}};ea.prototype.ask=function(ir){var h=this.h;var dp=h.pn();var aq=h.aw();var aj=this;function hm(qJ){var vR=document.createElement('div');var H;for(H in qJ){if(qJ.hasOwnProperty(H)){vR.style[H]=qJ[H];}}return vR;};var bY={};dp.igElements=bY;var jK=hm({width:'100%',height:'100%',position:'relative',overflow:aq.get_overflow(),margin:'0px',borderWidth:'0px','-moz-user-select':'text','-webkit-user-select':'text'});bY.po=jK;jK.setAttribute('class','igViewerScroller');jK.onscroll=function(){aj.acR(false);};jK.onresize=function(){var bu=h.fa();bu.width=jK.clientWidth;bu.height=jK.clientHeight;h.bm('resize',{});};var eW=hm({width:'2px',height:'2px',position:'relative',overflow:'hidden',margin:'0px',left:'0',top:'0','-ms-touch-action':'none'});jK.appendChild(eW);bY.nf=eW;eW.setAttribute('class','igViewerGraphics');this.AK=2;this.Af=2;this.yi=0;this.xl=0;var bK={};bK.sg=this.EY;bK.XW='ig'+ir+'level';bY.qF=bK;this.afb(bK,eW,hm);bK.rj=this.rj;var lA;if(h.qt()===false){lA=hm({position:'absolute',display:'none',width:(aq.wJ().width+4)+'px',height:(aq.wJ().height+4)+'px',backgroundColor:'#000000'});}else{lA=hm({position:'absolute',display:'none',width:(aq.wJ().width+4)+'px',height:(aq.wJ().height+4)+'px',backgroundColor:'#cccccc'});}eW.appendChild(lA);bY.lA=lA;lA.setAttribute('class','igMagnifierFrame');var qB=hm({width:'0px',height:'0px',position:'absolute',overflow:'hidden',margin:'0px',left:'0',top:'0'});bY.qB=qB;lA.appendChild(qB);bK={};bK.sg=this.Ip;bK.XW='ig'+ir+'maglevel';bY.Cd=bK;this.afb(bK,qB,hm);bK.rj=this.aAi;var PW=document.createTextNode('');bY.PW=PW;var dY=document.createElement('textarea');dY.appendChild(PW);dY.style.position='absolute';dY.style.overflow='auto';dY.style.width='80px';dY.style.height='80px';dY.style.resize='none';dY.style.display='none';jK.appendChild(dY);bY.dY=dY;var TU=document.createTextNode('');bY.TU=TU;var gT=document.createElement('input');gT.type="text";gT.style.position='absolute';gT.style.overflow='hidden';gT.style.width='80px';gT.style.height='80px';gT.style.resize='none';gT.style.display='none';gT.style.padding='0px';gT.style.margin='0px';gT.style.lineHeight='normal';gT.className="no-ms-clear";var aku=function(ev){var xr=gT,aF=parseFloat(xr.style['width']),bj=parseFloat(xr.style['height']),jg=xr.style['fontFamily'];var atK=xr.value.length>xr.placeholder.length?xr.value:xr.placeholder;var hL=IPCC.T.uJ(atK,jg,{uw:'pre',fH:bY.qF.xO}),vZ=12*aF/(hL.width||1),wX=12*bj/(hL.height||1),vp=Math.floor(Math.min(vZ,wX))*0.9;var alk=h.Ci();if(alk.eV){var cT=h.aw().eA().nU();var eV=alk.eV*cT;vp=Math.min(vp,eV);}xr.style.fontSize=vp+'px';};gT.onkeyup=aku;gT.onfocus=function(ev){aku(ev);if(gT.setSelectionRange){var gb=gT.value.length*2;gT.setSelectionRange(gb,gb);}};jK.appendChild(gT);bY.gT=gT;var qX=document.createTextNode('');bY.qX=qX;var dN=document.createElement('textarea');dN.appendChild(qX);dN.style.position='absolute';dN.style.overflow='hidden';dN.style.width='80px';dN.style.height='80px';dN.style.resize='none';dN.style.display='none';dN.style.whiteSpace='pre-wrap';dN.style.border=0;dN.style.padding='2px';dN.style.fontStyle='normal';var avI=function(av){var aug=h.Ci();var cT=h.aw().eA().nU();var eV=aug.eV*cT;var as=h.nM().hX()*cT;IPCC.T.US(dN,eV,as);};dN.onkeyup=avI;jK.appendChild(dN);bY.dN=dN;this.hW={};this.avj(this.hW);IPCC.Web.UI.ah.addHandler(eW,"mousedown",this.amT);IPCC.Web.UI.ah.addHandler(eW,"mousemove",this.aoJ);IPCC.Web.UI.ah.addHandler(eW,"mouseup",this.apn);IPCC.Web.UI.ah.addHandler(eW,"dblclick",this.adP);IPCC.Web.UI.ah.addHandler(eW,"contextmenu",this.akz);IPCC.Web.UI.ah.addHandler(dY,"blur",this.NV);IPCC.Web.UI.ah.addHandler(gT,"blur",this.akZ);IPCC.Web.UI.ah.addHandler(dN,"blur",this.NV);dp.appendChild(jK);};ea.prototype.afb=function(bK,eZ,hm){var sH=hm({width:'2px',height:'2px',position:'absolute'});bK.eZ=eZ;eZ.appendChild(sH);bK.ahq=sH;sH.setAttribute('class','igAnchor');this.arN(bK,sH,bK.sg,bK.XW);bK.zC=hm({position:'absolute',width:'10px',height:'10px',left:'0px',top:'0px',overflow:'visible'});sH.appendChild(bK.zC);var it=hm({overflow:'hidden',display:'none',position:'absolute',backgroundColor:'#00C0E0',border:'#006070 2px solid'});it.style[this.awp]=this.avp(0.5);sH.appendChild(it);bK.it=it;};ea.prototype.anX=function(bK){if(bK&&bK.NU){bK.rj.aBn();bK.NU=false;}bK.eZ=null;};ea.prototype.anL=function(bV,aq,bu){var h=this.h;var md=this.jX.qV(bV);var dp=h.pn();var api=h.awy();var An=h.auF();var bY=dp.igElements;var qF=bY.qF;var Cd=bY.Cd;var jK=bY.po;var eW=bY.nf;var sH=qF.ahq;var lA=bY.lA;var qB=bY.qB;var afT=Cd.ahq;var Fy=Math.max(0,-md.x);var GH=Math.max(0,-md.y);var ayF=Math.max(md.width,bu.width);var ayb=Math.max(md.height,bu.height);var mX=Math.max(0,md.x);var mG=Math.max(0,md.y);var aiC=false;var FQ=false;if(aq.Ce()){FQ=aq.wb();}var aFh=this.AK;this.AK=Math.floor(ayF-1);if(this.AK<0){this.AK=0;}var aFJ=this.Af;this.Af=Math.floor(ayb-1);if(this.Af<0){this.Af=0;}if(h.qt()===true){if(this.Af===0){this.Af=2;}if(this.AK===0){this.AK=2;}}var aFr=this.yi;var aFe=this.xl;if(!this.EK){this.yi=Math.floor(Fy);this.xl=Math.floor(GH);}if(this.afr){this.zj(sH,'left',mX+'px');this.zj(sH,'top',mG+'px');}var eR=aq.eA();eR.mY(Fy-mX,GH-mG);this.agy(qF,aq.eA(),eR,bV,bu,FQ,mX,mG);this.zj(jK,'overflow',aq.get_overflow());if(bu.width!==jK.clientWidth||bu.height!==jK.clientHeight){bu.width=jK.clientWidth;bu.height=jK.clientHeight;aiC=true;}this.aoO(sH.style,'visibility','visible');if(aq.get_magnifierIsVisible()){var uK=aq.get_magnifierWindowPosition();var yx=aq.wJ();var KD=aq.Or();var LL=aq.Lc();var RM=aq.azW();var atL=Math.round(uK.x-yx.width/2+Fy+KD);var auM=Math.round(uK.y-yx.height/2+GH+LL);var Ob=RM.qV(bV);var avc=Math.max(0,-Ob.x);var atI=Math.max(0,-Ob.y);this.zj(afT,'left',Ob.x+'px');this.zj(afT,'top',Ob.y+'px');var Np=2;lA.style.width=(yx.width+Np*2)+'px';lA.style.height=(yx.height+Np*2)+'px';qB.style.width=yx.width+'px';qB.style.height=yx.height+'px';qB.style.left=Np+'px';qB.style.top=Np+'px';lA.style.left=atL+'px';lA.style.top=auM+'px';var abA=RM.clone();abA.mY(avc,atI);this.agy(Cd,RM,abA,bV,yx,FQ,0,0);lA.style.display='block';}else{lA.style.display='none';}if(h.ahF()){var hU=h.Ci();var auS=hU.eH();var gQ=this.jX.yg(auS);var mz=(hU.get_type()===IPCC.Web.UI.MarkType.Text)?64:0;var agk=hU.es* -1,afX=hU.es* -1;if(gQ.width<mz){gQ.width=mz;}if(gQ.height<mz){gQ.height=mz;}if(gQ.width>bu.width){gQ.width=bu.width;}if(gQ.height>bu.height){gQ.height=bu.height;}if(gQ.x<0){gQ.x=0;}if(gQ.y<0){gQ.y=0;}if(gQ.x+gQ.width+1>=bu.width){gQ.x=bu.width-gQ.width;agk= -8;}if(gQ.y+gQ.height+1>=bu.height){gQ.y=bu.height-gQ.height;afX= -8;}var iy=this.JO(hU);iy.style.left=this.yi+gQ.x+1+(hU.es/2)+'px';iy.style.top=this.xl+gQ.y+1+(hU.es/2)+'px';iy.style.width=gQ.width+agk-1+'px';iy.style.height=gQ.height+afX-1+'px';if(iy.style.display!=='block'){iy.style.display='block';iy.style.whiteSpace='pre-wrap';var rz=hU.cG;var sn='';if(rz&IPCC.Web.UI.FontStyle.Italic){iy.style.fontStyle="italic";}if(rz&IPCC.Web.UI.FontStyle.Bold){iy.style.fontWeight="bold";}if(rz&IPCC.Web.UI.FontStyle.Underline){sn+="underline";}if(rz&IPCC.Web.UI.FontStyle.Strikeout){if(rz&IPCC.Web.UI.FontStyle.Underline){sn+=" line-through";}else{sn="line-through";}}iy.style.textDecoration=sn;iy.style.color=hU.qn;if(hU.get_type()!==IPCC.Web.UI.MarkType.TextLine&&hU.get_type()!==IPCC.Web.UI.MarkType.TextAreaSignature){iy.style.backgroundColor=hU.cP;}iy.style.fontFamily=hU.gM;iy.style['z-index']=100;var vp=hU.Bo*this.jX.nU();if(vp){iy.style.fontSize=vp+"px";}switch(hU.ik){case IPCC.Web.UI.HorizontalAlignment.Center:iy.style.textAlign='center';break;case IPCC.Web.UI.HorizontalAlignment.Right:iy.style.textAlign='right';break;default:iy.style.textAlign='left';break;}if(hU.fU){setTimeout(function(){bY.dY.maxLength=hU.fU;bY.gT.maxLength=hU.fU;bY.dN.maxLength=hU.fU;},0);}if(hU.iP){if(An){An.destroy();h.SC(null);}h.SC(new PCCViewer.axN(iy,hU.iP));}if(hU.jd()===IPCC.Web.UI.MarkType.TextAreaSignature){var dN=IPCC.T.agB();dN.style.width=bY.dN.style.width;dN.style.height=bY.dN.style.height;dN.style.fontFamily=bY.dN.style.fontFamily;dN.style.fontStyle=bY.dN.style.fontStyle;dN.style.fontWeight=bY.dN.style.fontWeight;var cT=h.aw().eA().nU();var eV=hU.eV*cT;var as=h.nM().hX()*cT;IPCC.T.aiU().nodeValue=hU.aO||'m';bY.dN.style.fontSize=IPCC.T.US(dN,eV,as)+'px';}iy.focus();}}else{bY.dY.style.display='none';bY.gT.style.display='none';bY.dN.style.display='none';bY.dY.removeAttribute('maxlength');bY.gT.removeAttribute('maxlength');bY.dN.removeAttribute('maxlength');if(An){An.destroy();h.SC(null);}if(document.activeElement===bY.dY){bY.dY.blur();}if(document.activeElement===bY.gT){bY.gT.blur();}if(document.activeElement===bY.dN){bY.dN.blur();}}if(aiC){h.bm('resize',{});}if(this.AK!==aFh){this.zj(eW,'width','100%');}if(this.Af!==aFJ){this.zj(eW,'height','100%');}if(this.yi!==aFr){jK.scrollLeft=this.yi;}if(this.xl!==aFe){jK.scrollTop=this.xl;}if(api==="PageView"&& !this.EK){aq=h.aw();var bn=aq.eA();var xq=(+bn.nU().toFixed(6));if(h.LA!==xq){h.LA=xq;setTimeout(function(){h.bm('scaleChanged',{scaleFactor:xq,pageNumber:h.bx});},1);h.bm('scaleChanged',{scaleFactor:xq,pageNumber:h.bx});}}};ea.prototype.agy=function(bK,jX,eR,bM,bu,FQ,mX,mG){var md=jX.qV(bM);var ow={};ow.width=Math.max(md.width,bu.width);ow.height=Math.max(md.height,bu.height);this.aoh(bK,jX,eR,bM,bu,mX,mG);this.ahG(bK,eR,ow,bM,mX,mG);if(this.h.qt()===false){this.ahe(bK,bu,jX,eR);}else{this.aAf(bK);var aq=this.h.aw();var AC=aq.agv();if(this.h.yG&&AC){this.agi(bK);}}this.anB(bK);if(FQ){var DX=eR.yg(FQ);if(this.afr){bK.it.style.left=(DX.x-2)+'px';bK.it.style.top=(DX.y-2)+'px';}else{bK.it.style.left=(DX.x-2+mX)+'px';bK.it.style.top=(DX.y-2+mG)+'px';}bK.it.style.width=DX.width+'px';bK.it.style.height=DX.height+'px';bK.it.style.display='block';}else{bK.it.style.display='none';}};ea.prototype.ahe=function(bK,bu,jX,eR){var aeU=this.h.axt();var FK={x:0,y:0,width:bu.width,height:bu.height};if(aeU){var xF=aeU.getBoundingClientRect();var hk=bK.eZ.getBoundingClientRect();var QT;if(hk.left<xF.left){QT=xF.left-hk.left;FK.x=(QT/hk.width)*bu.width;}if(hk.right>xF.right){FK.width=xF.width;}if(hk.top<xF.top){QT=xF.top-hk.top;FK.y=(QT/hk.height)*bu.height;}if(hk.bottom>xF.bottom){FK.height=xF.height;}}var sY=jX.clone();sY.vJ();var ara=sY.yg(FK);this.aCz(bK,eR,ara);};ea.prototype.aoh=function(bK,jX,eR,bM,bu,mX,mG){var bJ=this.h.ee();var gP=this.h.mf();var eS=this.h.Me();var aaa=0;var V=this;if(bK.lK){aaa=bK.lK.length;}if(!bK.rj|| !bJ){return;}var oz=this.h.aAK();if(bJ.get_markCount()<=0&&gP.get_markCount()<=0&&eS.get_markCount()<=0&&aaa<=0&& !oz){return;}if(!bK.NU){bK.rj.arV(this.h,bK,bM);bK.lK=[];bK.NU=true;}gP=this.h.mf();var ad=[];function aCb(K){if((V.h.jW()&&V.h.cd().oY()===true)||K.get_type()!==IPCC.Web.UI.MarkType.Highlight){ad.push(K);}};function alv(K){ad.push(K);};eS.forEachMark(alv);gP.forEachMark(alv);bJ.forEachMark(aCb);if(oz){ad.push(oz);}var H,lK=bK.lK;for(H=0;H<lK.length;H++){while(H<lK.length&&(H>=ad.length||lK[H].K!==ad[H])){bK.rj.MH(lK[H]);lK.splice(H,1);}if(H<lK.length&&(this.FT||this.rd.contains(lK[H].K))){bK.rj.agn(lK[H]);}}for(H=lK.length;H<ad.length;H++){lK[H]={K:ad[H]};var G=lK[H];if(!G){continue;}bK.rj.auD(lK[H]);}if(this.afr){bK.rj.agw(this.h,bK,ad,eR,this.h.agR());}else{var acE=eR.clone();acE.mY(mX,mG);bK.rj.agw(this.h,bK,ad,acE,this.h.agR());}};ea.prototype.ahG=function(){};ea.prototype.aor=function(){var dp=this.h.pn();if(dp){this.aiY=dp.igElements.nf.offsetLeft-this.yi;this.aji=dp.igElements.nf.offsetTop-this.xl;}};ea.prototype.qo=function(J,dC){var ht=this.h.pn().igElements;var iU=J.domEvent;var eh;if(ht.nf.getBoundingClientRect){eh=ht.nf.getBoundingClientRect();}else{var fJ=ht.nf;var wY=document.documentElement;eh={left:wY.clientLeft-wY.scrollLeft,top:wY.clientTop-wY.scrollTop};fJ=fJ.offsetParent;while(fJ){eh.top+=fJ.offsetTop-fJ.scrollTop;eh.left+=fJ.offsetLeft-fJ.scrollLeft;fJ=fJ.offsetParent;}}if(iU.rawEvent.touches){if(iU.rawEvent.touches.length>0){this.Ni=new IPCC.Web.UI.Point(iU.rawEvent.touches[0].clientX-ht.po.scrollLeft-eh.left,iU.rawEvent.touches[0].clientY-ht.po.scrollTop-eh.top);}if(!this.Ni){this.Ni=new IPCC.Web.UI.Point(0,0);}J.windowPoint=new IPCC.Web.UI.Point(this.Ni.x,this.Ni.y);iU.button=0;}else{J.windowPoint=new IPCC.Web.UI.Point(iU.clientX-eh.left-ht.po.scrollLeft,iU.clientY-eh.top-ht.po.scrollTop);}var QF=this.sY.transform(J.windowPoint);J.imagePoint=new IPCC.Web.UI.Point(QF.x,QF.y);J.constrainedImagePoint=new IPCC.Web.UI.Point(QF.x,QF.y);J.constrainedImagePoint.x=Math.min(Math.max(J.constrainedImagePoint.x,0),this.Hs.width);J.constrainedImagePoint.y=Math.min(Math.max(J.constrainedImagePoint.y,0),this.Hs.height);J.pointLiesWithinImage=(J.constrainedImagePoint.x===J.imagePoint.x&&J.constrainedImagePoint.y===J.imagePoint.y);J.mark=null;try{var cO=iU.target;while(!(cO.ImGearMarkRelation)&&cO.parentNode&&cO!==document.body){cO=cO.parentNode;}if(cO.ImGearMarkRelation){J.mark=cO.ImGearMarkRelation.K;}}catch(aY){}};ea.prototype.kF=function(aY){try{aY.preventDefault();var J=new IPCC.Web.UI.MouseEventArgs();J.domEvent=aY;this.qo(J);this.h.aCm(J);}catch(ex){this.h.af('mouseDown',ex);}};ea.prototype.kL=function(aY){try{aY.preventDefault();var J=new IPCC.Web.UI.MouseEventArgs();J.domEvent=aY;this.qo(J);this.h.aCg(J);}catch(ex){this.h.af('mouseMove',ex);}};ea.prototype.lO=function(aY){try{var J=new IPCC.Web.UI.MouseEventArgs();J.domEvent=aY;this.qo(J);if(!aY.rawEvent.wheelDelta){J.wheelDelta= -aY.rawEvent.detail*120;}else{J.wheelDelta=aY.rawEvent.wheelDelta;}this.h.aCt(J);}catch(ex){this.h.af('mouseWheel',ex);}};ea.prototype.zF=function(aY){try{aY.preventDefault();var J=new IPCC.Web.UI.MouseEventArgs();J.domEvent=aY;this.qo(J);this.h.aCd(J);}catch(ex){this.h.af('mouseDoubleClick',ex);}};ea.prototype.jN=function(aY){try{aY.preventDefault();var J=new IPCC.Web.UI.MouseEventArgs();J.domEvent=aY;this.qo(J);this.h.aBh(J);}catch(ex){this.h.af('mouseUp',ex);}};ea.prototype.VX=function(aY){try{aY.preventDefault();var J=new IPCC.Web.UI.MouseEventArgs();J.domEvent=aY;this.qo(J);this.h.aCj(J);}catch(ex){this.h.af('contextMenu',ex);}};ea.prototype.aws=function(aY){try{this.h.pO(true);}catch(ex){this.h.af('textAreaBlur',ex);}};ea.prototype.avK=function(aY){try{this.h.pO(true);}catch(ex){this.h.af('textInputBlur',ex);}};ea.prototype.aAR=function(K){var dY=this.JO(K);dY.value=K.aO||"";};ea.prototype.aCV=function(){var h=this.h;var K=h.Ci();if(!K|| !h.ahF()){return;}var Xg=this.JO(K);if(document.activeElement===Xg){Xg.blur();}var aO=Xg.value;aO=aO.replace(/(\n|\n\r|\r\n|\r)/g,'\n');K.set_text(aO);};ea.prototype.JO=function(K){var ht=this.h.pn().igElements,dY=null;if(K.get_type()===IPCC.Web.UI.MarkType.TextLine){dY=ht.gT;}else if(K.get_type()===IPCC.Web.UI.MarkType.TextAreaSignature){dY=ht.dN;}else if(K.get_type()===IPCC.Web.UI.MarkType.Text){dY=ht.dY;}return dY;};module.exports=ea;},{}],56:[function(require,module,exports){var Bu={};Bu.registerNamespace=function(namespacePath){var rootObject=window;var namespaceParts=namespacePath.split('.');var getTypeName=function(){return this.__typeName;};for(var i=0;i<namespaceParts.length;i++){var currentPart=namespaceParts[i];var ns=rootObject[currentPart];var nsType=typeof(ns);if((nsType!=="undefined")&&(ns!==null)){if(nsType==="function"){throw new Error("namespace error: "+namespacePath);}if((typeof(ns)!=="object")||(ns instanceof Array)){throw new Error("Name space error: "+ns);}}if(!ns){ns=rootObject[currentPart]={};}if(!ns.__namespace){ns.__namespace=true;ns.__typeName=namespaceParts.slice(0,i+1).join('.');ns.getName=getTypeName;}rootObject=ns;}};module.exports=Bu;},{}],57:[function(require,module,exports){var ImGearExceptions=require('./Web/UI/ImGearExceptions');var aA={bO:function(R,aS,bO){if(typeof(R)!==bO){throw new ImGearExceptions.za(aS,typeof(R),bO);}},lg:function(R,aS){aA.bO(R,aS,'string');},jn:function(R,aS){if(!(R instanceof Date)){throw new ImGearExceptions.za(aS,typeof(R),"Date");}},iW:function(R,aS){aA.bO(R,aS,'number');if(!isFinite(R)){throw new ImGearExceptions.rW(aS,R,'The value must be a number.');}},kf:function(R,aS,wI,ww){aA.bO(R,aS,'number');if(R<wI||R>ww|| !isFinite(R)){throw new ImGearExceptions.rW(aS,R,'The value must be a number between '+wI+' and '+ww+' inclusive.');}},Vu:function(R,aS,IE){aA.bO(R,aS,'number');var H;for(H=0;H<IE.length;H++){if(R===IE[H]){return;}}var Ql='';for(H=0;H<IE.length;H++){if(H>0){if(H===IE.length-1){Ql+=' or ';}else{Ql+=', ';}}Ql+=IE[H];}throw new ImGearExceptions.rW(aS,R,'The value must be '+Ql+'.');},mt:function(R,aS,wI,ww){aA.kf(R,aS,wI,ww);if(R!==Math.floor(R)){throw new ImGearExceptions.sj(aS,'The value must be an integer.');}},dI:function(R,aS){aA.bO(R,aS,'string');if(!R.match(/#[0-9A-Fa-f]{6}/)){throw new ImGearExceptions.sj(aS,'Colors must be strings that begin with a # symbol, followed by 6 hexadecimal digits.');}},aai:function(R,aS){aA.bO(R,aS,'string');if(!R.match(/#[0-9A-Fa-f]{6}|transparent/)){throw new ImGearExceptions.sj(aS,'Colors must be strings that begin with a # symbol, followed by 6 hexadecimal digits or comply with other W3C accepted color values like "transparent".');}},jk:function(R,aS,jk,ahE){aA.bO(R,aS,'number');var ci;var TA=0;for(ci in jk){if(jk.hasOwnProperty(ci)){if(ahE){TA|=jk[ci];}else{if(R===jk[ci]){return;}}}}var dM="";if(ahE){if((R|TA)===TA){return;}else{throw new ImGearExceptions.rW(aS,R,'The value must be zero or more members of the '+dM+' enumeration.');}}throw new ImGearExceptions.rW(aS,R,'The value must be a member of the '+dM+' enumeration.');},bH:function(R,aS){aA.iW(R.x,aS+'.x');aA.iW(R.y,aS+'.y');},C:function(R,aS){aA.iW(R.x,aS+'.x');aA.iW(R.y,aS+'.y');aA.iW(R.width,aS+'.width');aA.iW(R.height,aS+'.height');},wy:function(R,aS){if(!Array.isArray(R)){throw new ImGearExceptions.sj(aS,'The value must be an array.');}}};module.exports=aA;},{"./Web/UI/ImGearExceptions":85}],58:[function(require,module,exports){var et=require('./IPCC.Util').regEnum;var Eo=function(){};Eo.registerEnum=et;Eo.prototype={Document:0,EqualWidthPages:1,SinglePage:2,EqualFitPages:3};Eo.registerEnum('IPCC.ViewMode',false);module.exports=Eo;},{"./IPCC.Util":28}],59:[function(require,module,exports){var Wl=function(qW){var aq;var bV;var jr;var bu;var aj=this;var zq;var BE='';var _debug=false;var ph=IPCC.Web.UI.DebugErrorLevel.Production;var lL=[];var aK=new IPCC.Web.UI.jq();var bJ;var eS;var oz=null;var Jl=false;var wL=false;var ym;var amn=IPCC.Web.UI.ImGearArtDataServices.None;var JS=false;var uO='';var qb;var aer=false;var adt=false;var wF=0;var sN=true;var iS;var gP;var vo=false;var akO=true,oJ=false;var ahC=false;var An=null;var QP;var Yf=false;var bD=null;this.LA=0.0;this.oy=function(JV){if(!_debug){return false;}return ph>=JV;};this.lY=function(jH,JG,bL){IPCC.iA.lY(jH,JG,bL,BE,zq);};this.af=function(ju,ia){if(!this.oy(IPCC.Web.UI.DebugErrorLevel.Production)){return;}var cE=ju+'() threw an exception ('+ia.name+'), "'+ia.message+'"';cE=cE.replace(/\n/g," ");this.lY(cE,IPCC.Web.UI.DebugItemCause.Exception,IPCC.Web.UI.DebugErrorLevel.Production);aj.bm('exceptionThrown',{"function_name":ju,"exception":ia,"pageNumber":aj.bx});};this.JO=function(K){var ht=this.pn().igElements,dY=null;if(K.get_type()===IPCC.Web.UI.MarkType.TextLine){dY=ht.gT;}else if(K.get_type()===IPCC.Web.UI.MarkType.TextAreaSignature){dY=ht.dN;}else if(K.get_type()===IPCC.Web.UI.MarkType.Text){dY=ht.dY;}return dY;};this.get_debug=function(){return _debug;};this.set_debug=function(R){var Jc= ! !R;if(_debug===Jc){return;}_debug=Jc;this.dq('debug');};this.Au=function(){return ph;};this.JE=function(R){if(ph===R){return;}ph=R;this.dq('debugErrorLevel');};this.get_areMarksEditable=function(){return Yf;};this.set_areMarksEditable=function(R){if(Yf===R){return;}Yf=R;this.dq('areMarksEditable');};this.get_cursor=function(){return bD;};this.set_cursor=function(R){if(bD===R){return;}bD=R;this.dq('cursor');};this.aEw=function(R){BE=R;};this.awy=function(){return BE;};this.aoG=function(R){zq=R;};this.aoy=function(R){QP=R;};this.axt=function(){return QP;};this.eT=function(avN){this.pO(false);var H;for(H=lL.length-1;H>=0;H--){if(lL[H]instanceof IPCC.jT){lL[H].ak(true);}else{lL[H].ak();}if(lL[H]instanceof IPCC.jY){lL[H].eg(true);}else{lL[H].eg();}}lL=avN;for(H=0;H<lL.length;H++){lL[H].mF(this);}};this.aFP=function(){var H;for(H=0;H<lL.length;H++){lL[H].ak();}};this.gf=function(aar,J){var H;for(H=0;H<lL.length;H++){if(J&&J.aiX&&J.aiX()){return;}if(lL[H][aar]){lL[H][aar](J);}}};this.aBk=function(hM,cI){switch(hM){case 'touchstart':jr.amz&&jr.amz(cI);break;case 'touchmove':jr.anv&&jr.anv(cI);break;case 'touchend':jr.anr&&jr.anr(cI);break;case 'doubleTap':jr.anh&&jr.anh(cI);break;}};this.lw=function(F){aK.addHandler('propertyChanged',F);};this.nd=function(F){aK.removeHandler('propertyChanged',F);};this.add_mouseDown=function(F){aK.addHandler('mouseDown',F);};this.remove_mouseDown=function(F){aK.removeHandler('mouseDown',F);};this.add_mouseMove=function(F){aK.addHandler('mouseMove',F);};this.remove_mouseMove=function(F){aK.removeHandler('mouseMove',F);};this.add_mouseUp=function(F){aK.addHandler('mouseUp',F);};this.remove_mouseUp=function(F){aK.removeHandler('mouseUp',F);};this.add_contextMenu=function(F){aK.addHandler('contextMenu',F);};this.remove_contextMenu=function(F){aK.removeHandler('contextMenu',F);};this.aul=function(F){aK.addHandler('contextMenuCommand',F);};this.aGU=function(F){aK.removeHandler('contextMenuCommand',F);};this.add_mouseWheel=function(F){aK.addHandler('mouseWheel',F);};this.remove_mouseWheel=function(F){aK.removeHandler('mouseWheel',F);};this.add_mouseOut=function(F){aK.addHandler('mouseOut',F);};this.remove_mouseOut=function(F){aK.removeHandler('mouseOut',F);};this.aAm=function(F){aK.addHandler('resize',F);};this.aHk=function(F){aK.removeHandler('resize',F);};this.aAJ=function(F){aK.addHandler('userModifiedViewState',F);};this.aIR=function(F){aK.removeHandler('userModifiedViewState',F);};this.add_scaleChanged=function(F){aK.addHandler('scaleChanged',F);};this.remove_scaleChanged=function(F){aK.removeHandler('scaleChanged',F);};this.add_markAdded=function(F){aK.addHandler('markAdded',F);};this.remove_markAdded=function(F){aK.removeHandler('markAdded',F);};this.add_markCreating=function(F){aK.addHandler('markCreating',F);};this.remove_markCreating=function(F){aK.removeHandler('markCreating',F);};this.add_markChanged=function(F){aK.addHandler('markChanged',F);};this.remove_markChanged=function(F){aK.removeHandler('markChanged',F);};this.add_inProgressMarkChanged=function(F){aK.addHandler('inProgressMarkChanged',F);};this.remove_inProgressMarkChanged=function(F){aK.removeHandler('inProgressMarkChanged',F);};this.add_markRemoved=function(F){aK.addHandler('markRemoved',F);};this.remove_markRemoved=function(F){aK.removeHandler('markRemoved',F);};this.add_markReordered=function(F){aK.addHandler('markReordered',F);};this.remove_markReordered=function(F){aK.removeHandler('markReordered',F);};this.add_marksLoaded=function(F){aK.addHandler('marksLoaded',F);};this.remove_marksLoaded=function(F){aK.removeHandler('marksLoaded',F);};this.add_marksSaved=function(F){aK.addHandler('marksSaved',F);};this.remove_marksSaved=function(F){aK.removeHandler('marksSaved',F);};this.add_markSelectionChanged=function(F){aK.addHandler('markSelectionChanged',F);};this.remove_markSelectionChanged=function(F){aK.removeHandler('markSelectionChanged',F);};this.add_markTextSelectionChanged=function(F){aK.addHandler('markTextSelectionChanged',F);};this.remove_markTextSelectionChanged=function(F){aK.removeHandler('markTextSelectionChanged',F);};this.add_pageOpenFailed=function(F){aK.addHandler('pageOpenFailed',F);};this.add_pageDisplayed=function(F){aK.addHandler('pageDisplayed',F);};this.remove_pageOpenFailed=function(F){aK.removeHandler('pageOpenFailed',F);};this.add_textPageReady=function(F){aK.addHandler('textPageReady',F);};this.remove_textPageReady=function(F){aK.removeHandler('textPageReady',F);};this.add_selectTextMouseToolCompleted=function(F){aK.addHandler('selectTextMouseToolCompleted',F);};this.remove_selectTextMouseToolCompleted=function(F){aK.removeHandler('selectTextMouseToolCompleted',F);};this.add_exceptionThrown=function(F){aK.cS('exceptionThrown',F);};this.remove_exceptionThrown=function(F){aK.cY('exceptionThrown',F);};this.add_textExtractionFailed=function(F){aK.cS('textExtractionFailed',F);};this.remove_textExtractionFailed=function(F){aK.cY('textExtractionFailed',F);};this.dq=function(ci,vL){var F=aK.getHandler("propertyChanged");if(F){F(this,new IPCC.pV(ci,vL));}};this.pn=function(){var _parent=document.getElementById(zq);return _parent;};this.aw=function(){return aq;};this.aHu=function(){return aK;};function Dj(bP,J){JS=true;J.pageIndex=aj.bx;aj.bm('markAdded',J);aj.gf('mj',J);};function Ee(bP,J){JS=true;J.pageIndex=aj.bx;aj.bm('markChanged',J);aj.gf('ml',J);};function amI(bP,J){J=new IPCC.Web.UI.MarkEventArgs();J.mark=oz;J.pageIndex=aj.bx;aj.bm('inProgressMarkChanged',J);aj.gf('_onInProgressMarkChanged',J);};function Ey(bP,J){JS=true;J.pageIndex=aj.bx;aj.bm('markRemoved',J);aj.gf('CX',J);};function avG(bP,J){aj.bm('textPageReady',J);};function awR(bP,J){aj.bm('textExtractionFailed',J);};function Gh(bP,J){JS=true;J.pageIndex=aj.bx;aj.bm('markReordered',J);aj.gf('ado',J);};function DI(bP,J){J.pageIndex=aj.bx;aj.bm('marksLoaded',J);aj.gf('acX',J);};function Go(bP,J){J.pageIndex=aj.bx;aj.bm('markSelectionChanged',J);aj.gf('ED',J);};function acg(bP,J){J.pageIndex=aj.bx;aj.bm('markTextSelectionChanged',J);};this.aCG=function(bP,J){this.gf('_onTextMarkEditCompleted',J);};function BI(bP,J){J.pageIndex=aj.bx;aj.bm('propertyChanged',J);};this.na=function(R){if(R===bJ){return;}if(bJ){bJ.remove_markAdded(Dj);bJ.remove_markChanged(Ee);bJ.remove_markRemoved(Ey);bJ.remove_markReordered(Gh);bJ.remove_marksLoaded(DI);bJ.remove_markSelectionChanged(Go);bJ.nd(BI);bJ.CV(true);}bJ=R;if(bJ){bJ.add_markAdded(Dj);bJ.add_markChanged(Ee);bJ.add_markRemoved(Ey);bJ.add_markReordered(Gh);bJ.add_marksLoaded(DI);bJ.add_markSelectionChanged(Go);bJ.add_markTextSelectionChanged(acg);bJ.lw(BI);}this.dq('artPage');};this.ee=function(){return bJ;};this.JY=function(R){if(R===eS){return;}if(eS){eS.remove_markAdded(Dj);eS.remove_markChanged(Ee);eS.remove_markRemoved(Ey);eS.remove_markReordered(Gh);eS.remove_marksLoaded(DI);eS.remove_markSelectionChanged(Go);eS.nd(BI);eS.CV(true);}eS=R;if(eS){eS.add_markAdded(Dj);eS.add_markChanged(Ee);eS.add_markRemoved(Ey);eS.add_markReordered(Gh);eS.add_marksLoaded(DI);eS.add_markSelectionChanged(Go);eS.add_markTextSelectionChanged(acg);eS.lw(BI);}this.dq('documentArtPage');};this.Me=function(){return eS;};this.mf=function(){return gP;};this.Ep=function(R){if(R===gP){return;}if(gP){gP.remove_markAdded(Dj);gP.remove_markChanged(Ee);gP.remove_markRemoved(Ey);gP.remove_markReordered(Gh);gP.remove_marksLoaded(DI);gP.remove_markSelectionChanged(Go);gP.nd(BI);}gP=R;if(gP){gP.add_markAdded(Dj);gP.add_markChanged(Ee);gP.add_markRemoved(Ey);gP.add_markReordered(Gh);gP.add_marksLoaded(DI);gP.add_markSelectionChanged(Go);gP.lw(BI);}this.dq('transientArtPage');};var ha;this.CE=function(){if(!ha){if(IPCC.Web.UI.Mark){ha=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Highlight);ha.set_opacity(100);ha.set_fillColor('#3366CC');ha.set_fillVisible(true);}}return ha;};this.YJ=function(R){amn=R;this.dq('artServiceOption');};this.Rg=function(){return amn;};this.oh=function(K,od){if(oz===K){return;}if(oz){oz.remove_propertyChanged(amI);}if(K&& !oz){var J=new IPCC.Web.UI.MarkEventArgs();J.mark=od?od:K;J.pageIndex=this.bx;this.bm('markCreating',J);}oz=K;if(oz){oz.add_propertyChanged(amI);}this.dq('inProgressMark');};this.aAK=function(){return oz;};this.xC=function(R){if(R===bV){return;}bV=R;this.yG=false;aq.pq();this.dq('image');};this.cz=function(){return bV;};this.aja=function(R){if(R===Jl){return;}Jl=R;this.dq('Jl');};this.agR=function(){return Jl;};this.GE=function(){var ym=this.Ci();var amj=this.JO(ym);var atb=amj.value;setTimeout(function(){amj.setSelectionRange(0,atb.length);},1);};this.wi=function(K){this.pO(false);jr.aAR(K);wL=true;ym=K;this.dq('wL');};this.acj=function(aP,di){if(this.jW()&&this.cd().oY()===true){var gm=this.cd().gY();var H=aP;for(;H<aP+di;H++){var eU=gm.kn(H);var um='#3366CC';var Ke='#3366CC';gP.Yu(eU.bC,Ke,um,false,H);}}};this.aIz=function(aQ){var H;try{var ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Highlight);if(!ha){ha=aj.CE();}for(H in ha){if(ha.hasOwnProperty(H)){ao[H]=ha[H];}}ao.set_rectangle({x:aQ.x,y:aQ.y,width:aQ.width,height:aQ.height});aj.oh(ao);gP.addMark(ao);return ao;}catch(aEg){var auT=aEg.message;window.console.log(auT);}};this.Kt=function(dw){var Bf;var gm;var RR;Bf=aj.cd();gm=aj.cd().gY();function arA(QG){var rH=QG.sa();if((dw.x>=rH.x-10&&dw.x<=rH.x+rH.width+1)&&(dw.y>=rH.y-1&&dw.y<=rH.y+rH.height+1)){return true;}rH=undefined;};if(!RR){for(var H=0;H<gm.ef();H++){if(arA(gm.kn(H))){RR=H;break;}}}return RR;};this.aAu=false;this.zY=function(dQ){if(dQ===undefined){return;}if(aj.jW()&&aj.cd().oY()===true){var Iv=aj.cd().gY().ef();IPCC.aA.mt(dQ,'textIndex',0,Iv);aj.aw().zY(dQ);aj.mf().CN(function(K){if(K.vG!==true&&K.get_type()!==IPCC.Web.UI.MarkType.ImageStampAnnotation){aj.mf().ws(K);}});if(aj.zA()===true){aj.dC();}}};this.Uv=function(){var Cf=aj.aw().get_transientHighlightMarks();while(Cf.length>0){aj.mf().removeMark(Cf.pop());}};this.LM=function(tz,di){if(aj.jW()&&aj.cd().oY()===true){var H=tz;var gm=this.cd().gY();var cc=tz+di;if(!ha){ha=aj.CE();}var Cf=aj.aw().get_transientHighlightMarks();for(;H<cc;H++){var eU=gm.kn(H);Cf.push(gP.aBT(eU.bC,ha,H));}}};this.aIe=function(aHV,di){var aq=aj.aw();for(var ag=di-1;ag>di;ag--){var aE=aq.iE[ag];gP.removeMark(aE.K);}};this.tZ=function(dQ){if(dQ===undefined){return;}var eU;var aq=aj.aw();var gA=aq.Bv();var um='#3366CC';var Ke='#3366CC';var dv=100;if(!ha){ha=aj.CE();}dv=ha.get_opacity();if(!dv){dv=100;}um=ha.get_fillColor();if(um===undefined){um='#3366CC';}var gm=aj.cd().gY();if(gA===undefined){eU=gm.kn(dQ);var K=gP.Yu(eU.bC,Ke,um,false,dv,dQ);aq.tZ(dQ,K,eU.kj);return;}var ag;function akT(aJ,ast){for(ag=aq.iE.length-1;ag>=0;ag--){var aE=aq.iE[ag];if(aE.dQ===aJ){aq.iE.splice(ag,1);gP.removeMark(aE.K);aq.aBg(ast);aq.aov(aJ);return ag;}}return-1;};function QW(aJ){eU=gm.kn(aJ);var agm=gP.Yu(eU.bC,Ke,um,false,dv,aJ);if(aq.tZ(aJ,agm,eU.kj)===false){gP.removeMark(agm);}};var RF=aq.ahB();var H;if(dQ>gA){for(H=gA;H<=dQ;H++){if(H===dQ){if(H<RF){continue;}QW(H);}else if(H>=RF){if(H===gA){continue;}QW(H);}else{akT(H,dQ);}}}else if(dQ<gA){for(H=gA;H>=dQ;H--){if(H===dQ){if(H>=RF){continue;}QW(H);}else if(H<RF){if(H===gA){continue;}QW(H);}else{akT(H,dQ);}}}};this.BB=function(){var aeV="";try{var aq=aj.aw();if(aj.aw().JZ()){var aqp=aj.cd().gY();if(aq.iE.length>0){var Es=[];for(var H=0;H<aq.iE.length;H++){Es.push(aq.iE[H].dQ);}if(Es[0]>Es[1]){Es.reverse();}for(H=0;H<Es.length;H++){aeV+=aqp.kn(Es[H]).avW();}}}return aeV;}catch(e){window.console.log(e.message);}};this.pO=function(aDu){if(wL){if(aDu){jr.aCV();}wL=false;ym=null;this.aCG();this.dq('wL');aj.dC();}};this.ahF=function(){return wL;};this.Ci=function(){return ym;};this.AX=function(){var ym=this.Ci();if(!ym){return null;}var UW=ym.jd();if(UW===IPCC.Web.UI.MarkType.TextLine){return 'singleline';}else if(UW===IPCC.Web.UI.MarkType.TextAreaSignature){return 'multiline';}else if(UW===IPCC.Web.UI.MarkType.Text){return 'multiline';}};this.amh=function(R){adt=R;};this.aaE=function(){return adt;};this.SC=function(R){An=R;};this.auF=function(){return An;};this.aet=function(R){if(R===wF){return;}wF=R;this.dq('wF');};this.YY=function(){return wF;};this.CV=function(R){if(bJ){bJ.CV(R);}};this.LJ=function(){if(bJ){return bJ.LJ();}return true;};this.axg=function(aJP){var bu=jr.asi(this.pn());this.aow(bu);};this.aow=function(R){if(R===bu){return;}bu=R;this.dq('windowSpace');};this.fa=function(){return bu;};this.dC=function(){jr.dC(bV,aq,bu);};this.KP=function(){if(this.qt()===false){var jX=aq.eA();var h=this;var md=jX.qV(bV);var dp=h.pn();var bY=dp.igElements;var bK=bY.qF;var Fy=Math.max(0,-md.x);var GH=Math.max(0,-md.y);var mX=Math.max(0,md.x);var mG=Math.max(0,md.y);var eR=aq.eA();eR.mY(Fy-mX,GH-mG);jr.ahe(bK,bu,jX,eR);}};this.Jg=function(R){qb=R;};this.wH=function(){return qb;};this.cd=function(){return iS.cd();};var nc=0;this.nM=function(){return iS;};this.Dr=function(R){if(R===this.nM()){return;}iS=R;if(iS){iS.xG(avG);iS.xh(awR);}};this.jW=function(){return sN;};this.Jx=function(R){sN=R;this.dq('textRequired');};this.CC=function(){return vo;};this.Kg=function(R){if(vo===R){return;}vo=R;this.dq('requireRequestsOptimize');};this.zA=function(){return akO;};this.St=function(R){akO=R;this.dq('autoUpdate');};var pQ=false;this.mH=function(){return pQ;};this.pe=function(R){if(typeof R!=="boolean"){return;}if(R===pQ){return;}pQ=R;if(bJ){var akP=false;bJ.forEachMark(function(K){if(K.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction){akP=true;}});if(akP===true){bJ.pe(pQ);}}};this.kE=function(){return nc;};this.yH=function(R){if(nc===R){return;}if(isNaN(R)){return;}nc=R;this.dq('serviceResponseTimeout');};var pf='';this.XE=function(dS,aG){if(dS!==''){dS='/'+dS;}aG=aG||'';if(aG===null||aG===''){if(dS==='/Attributes'){if(/^[\x00-\x7F]*$/.test(bV.get_identifier())){return pf+'/Page/q/'+bV.bx.toString()+dS+'?DocumentID=u'+encodeURIComponent(bV.get_identifier());}else{return pf+'/Page/q/'+bV.bx.toString()+dS+'?DocumentID=e'+bV.get_encodedIdentifier();}}else{if(/^[\x00-\x7F]*$/.test(bV.get_identifier())){return pf+'/Page/q/'+bV.bx.toString()+dS+'?DocumentID=u'+encodeURIComponent(bV.get_identifier())+'&Quality=85&ContentType=jpeg';}else{return pf+'/Page/q/'+bV.bx.toString()+dS+'?DocumentID=e'+bV.get_encodedIdentifier()+'&Quality=85&ContentType=jpeg';}}}else{if(/^[\x00-\x7F]*$/.test(bV.get_identifier())){return pf+'/Page/q/'+bV.bx.toString()+dS+'?DocumentID=u'+encodeURIComponent(bV.get_identifier())+'&'+aG;}else{return pf+'/Page/q/'+bV.bx.toString()+dS+'?DocumentID=e'+bV.get_encodedIdentifier()+'&'+aG;}}};this.azT=function(dS,aG){dS=dS||'Art';aG=aG||'';if(aG===null||aG===''){if(dS==='Art'){return pf+'/Page/q/'+bV.bx.toString()+'/'+dS+'?DocumentID=e'+bV.get_encodedIdentifier();}}else{return pf+'/Page/q/'+bV.bx.toString()+'/'+dS+'?DocumentID=e'+bV.get_encodedIdentifier()+'&'+aG;}};this.Ss=function(Ft){if(JS===false){if(Ft){Ft();}return;}IPCC.T.ob.eB({method:'POST',url:this.azT('Art'),headers:{'Content-Type':'application/json'},body:bJ.saveToJson()}).then(function(){if(Ft){Ft();}});};this.ts=function(){return pf;};this.abD=function(R){pf=R;this.dq('imageHandlerUrl');};this.qt=function(){return aer;};this.Rn=function(R){aer=R;};this.aAd=function(){return ahC;};this.aiL=function(R){ahC=R;};this.oW=function(){return uO;};this.tF=function(R){uO=R;uO.tabIndex= -1;};this.jt=function(){return oJ;};this.ou=function(R){if(typeof R!=="boolean"){return;}if(R===oJ){return;}oJ=R;};this.aCm=function(J){if(wL){this.pO(true);}else{this.bm('mouseDown',J);this.gf('kF',J);}};this.aCg=function(J){this.bm('mouseMove',J);this.gf('kL',J);};this.aBh=function(J){this.bm('mouseUp',J);this.gf('jN',J);};this.aCt=function(J){this.bm('mouseWheel',J);this.gf('lO',J);};this.aCd=function(J){this.bm('mouseDoubleClick',J);this.gf('zF',J);};this.aCj=function(J){this.bm('contextMenu',J);this.gf('VX',J);};this.aBA=function(J){this.bm('contextMenuCommand',J);};this.aBR=function(J){this.bm('mouseOut',J);this.gf('ox',J);};this.aAZ=function(J){this.bm('touchStart',J);this.gf('kF',J);};this.aCq=function(J){this.bm('touchMove',J);this.gf('kL',J);};this.aCf=function(J){this.bm('touchEnd',J);this.gf('jN',J);};this.aBa=function(J){this.bm('touchCancel',J);this.gf('HG',J);};this.bm=function(cL,J){var F=aK.getHandler(cL);if(F!==null){F(aj,J);}};var ahN=function(h,qW){aq=new IPCC.YD();function zP(bP,J){aj.bm('propertyChanged',J);};aq.lw(zP);jr=new IPCC.ea(h,qW);if(IPCC.cJ){jr.rj=new IPCC.cJ.co(h);jr.aAi=new IPCC.cJ.co(h);}};if(qW===false){ahN(this,false);}else{ahN(this,true);}return this;};module.exports=Wl;},{}],60:[function(require,module,exports){var YD=function(){var rv=0;var qO=1;var ma=1;var AC=false;var dK=new IPCC.eE();var CW=false;var tQ;var qZ;var KZ=false;var Cz=new IPCC.FE(200,150,96,96);var uK={x:0,y:0};var Mk=3;var KD=0,LL=0;var hH=0.2;var sh=IPCC.Web.UI.MarkHandleMode.HideSideHandlesWhenClose;var CP=new IPCC.eE();var Ky=0;var Kf=0;var DP=false;var aaL;this.iE=[];var abS=IPCC.Web.UI.ScrollBars.Auto;var Cf=[];this.get_transientHighlightMarks=function(){return Cf;};this.get_scrollBars=function(){return abS;};this.get_overflow=function(){switch(abS){case IPCC.Web.UI.ScrollBars.None:return 'hidden';case IPCC.Web.UI.ScrollBars.Both:return 'scroll';}return 'auto';};this.set_scrollBars=function(R){abS=R;this.dq('scrollBars');};var aK=new IPCC.Web.UI.jq();this.lw=function(F){aK.addHandler('propertyChanged',F);};this.nd=function(F){aK.removeHandler('propertyChanged',F);};this.dq=function(ci){var F=aK.getHandler('propertyChanged');if(F){F(this,new IPCC.pV(ci));}};var onSelectionChanged=function(aq){var J={};J.selectionIsVisible=CW;J.selectionRectangle=aq.wb();aq.dq('selection');};this.pq=function(){tQ={x:0,y:0};qZ={x:0,y:0};if(!CW){return;}CW=false;onSelectionChanged(this);};this.showSelection=function(ei){tQ.x=ei.x;tQ.y=ei.y;qZ.x=ei.x+ei.width;qZ.y=ei.y+ei.height;CW=true;onSelectionChanged(this);};this.Dn=function(dw){tQ.x=dw.x;tQ.y=dw.y;qZ.x=dw.x;qZ.y=dw.y;CW=true;onSelectionChanged(this);};this.zX=function(dw){qZ.x=dw.x;qZ.y=dw.y;onSelectionChanged(this);};this.Ce=function(){return CW;};this.wb=function(){var C=new IPCC.Web.UI.Rectangle(Math.min(tQ.x,qZ.x),Math.min(tQ.y,qZ.y),0,0);C.width=Math.max(tQ.x,qZ.x)-C.x;C.height=Math.max(tQ.y,qZ.y)-C.y;return C;};var FG=function(){if(!KZ){CP.aps();return;}CP.Pg(dK);CP.mY(-uK.x,-uK.y);CP.scale(Mk,Mk);CP.mY(Cz.width/2,Cz.height/2);};this.hideMagnifier=function(){KZ=false;FG();this.dq('magnifierIsVisible');};this.showMagnifier=function(ct){uK.x=ct.x;uK.y=ct.y;KZ=true;FG();this.dq('magnifierWindowPosition');this.dq('magnifierIsVisible');};this.get_magnifierIsVisible=function(){return KZ;};this.get_magnifierWindowPosition=function(){return{x:uK.x,y:uK.y};};this.get_magnifierMagnification=function(){return Mk;};this.set_magnifierMagnification=function(R){Mk=R;FG();this.dq('magnifierMagnification');};this.Or=function(){return KD;};this.Tz=function(R){KD=R;this.dq('magnifierXOffset');};this.Lc=function(){return LL;};this.aaY=function(R){LL=R;this.dq('magnifierYOffset');};this.wJ=function(){return{width:Cz.width,height:Cz.height};};this.set_magnifierWindowSize=function(newMagnifierSize){Cz.width=newMagnifierSize.width;Cz.height=newMagnifierSize.height;FG();this.dq('magnifierWindowSize');};this.azW=function(){return CP.clone();};this.eA=function(){return dK.clone();};this.ZM=function(){return hH;};this.WR=function(R){hH=R;this.dq('markHandleSize');};this.AQ=function(){return sh;};this.It=function(R){sh=R;this.dq('markHandleMode');};this.ip=function(R){if(R===dK||R.aus(dK)){return;}if(!R.ahf()){throw new IPCC.Web.UI.ImGearInvalidOperationException('The viewing state of the control is invalid.');}dK.Pg(R);FG();this.dq('displayedPageRectangle');};var afc='0';this.get_presentationQuality=function(){return afc;};this.set_presentationQuality=function(R){afc=R;this.dq('presentationQuality');};this.azw=function(){return qO;};this.Ga=function(R){qO=R;};this.axl=function(){return rv;};this.DB=function(R){rv=R;};this.ayu=function(){return ma;};this.DV=function(R){if(R!==ma){AC=true;}ma=R;};this.aBl=function(R){AC=R;};this.agv=function(){return AC;};var Yw=IPCC.bF.Default;this.aJx=function(){return Yw;};this.aot=function(R){if(Yw!==R){Yw=R;this.dq('markCursor');}};this.zY=function(dQ){Ky=dQ;DP=false;Kf=0;};this.LM=function(tz,di){if(tz!==Ky){Ky=tz;}Kf=di;DP=true;};this.abJ=function(){if(DP===true){for(var H=0;H<this.iE.length;H++){this.iE[H].K.set_visible(false);}DP=false;}};this.JZ=function(){return DP;};this.tZ=function(dQ,K,kj){aaL=dQ;if(dQ!==undefined){if(this.iE.length>0&&this.iE[this.iE.length-1].dQ===dQ){return false;}this.iE.push({dQ:dQ,K:K,kj:kj});DP=true;Kf++;}else{this.iE=[];Kf=0;}return true;};this.Bv=function(){return aaL;};this.aBg=function(R){if(R===undefined){return;}aaL=R;};var afK;this.aIi=function(){return afK;};this.aov=function(R){if(R===undefined){return;}afK=R;};this.ahB=function(){return Ky;};this.aIy=function(){return Ky+Kf;};this.BF=function(){return this.iE.length;};this.pq();this.hideMagnifier();return this;};module.exports=YD;},{}],61:[function(require,module,exports){var BY={};BY.ajv=function(aV){if(!this.Ec[0][0][0]){this.RS();}var H,ag,eC,IT,Zb,kk=this.Ec[0][4],uz=this.Ec[1],uo=aV.length,Ly=1;if(uo!==4&&uo!==6&&uo!==8){throw new IPCC.Web.UI.ImGearArgumentException('none',"invalid aes key size");}this.aV=[IT=aV.slice(0),Zb=[]];for(H=uo;H<4*uo+28;H++){eC=IT[H-1];if(H%uo===0||(uo===8&&H%uo===4)){eC=kk[eC>>>24]<<24^kk[eC>>16&255]<<16^kk[eC>>8&255]<<8^kk[eC&255];if(H%uo===0){eC=eC<<8^eC>>>24^Ly<<24;Ly=Ly<<1^(Ly>>7)*283;}}IT[H]=IT[H-uo]^eC;}for(ag=0;H;ag++,H--){eC=IT[ag&3?H:H-4];if(H<=4||ag<4){Zb[ag]=eC;}else{Zb[ag]=uz[0][kk[eC>>>24]]^uz[1][kk[eC>>16&255]]^uz[2][kk[eC>>8&255]]^uz[3][kk[eC&255]];}}};BY.ajv.prototype={Xi:function(dg){return this.atl(dg,1);},Ec:[[[],[],[],[],[]],[[],[],[],[],[]]],RS:function(){var KY=this.Ec[0],uz=this.Ec[1],kk=KY[4],aEm=uz[4],H,ba,xj,fq=[],akI=[],Sx,aiv,aif,jl,Pa,MT;for(H=0;H<256;H++){akI[(fq[H]=H<<1^(H>>7)*283)^H]=H;}for(ba=xj=0;!kk[ba];ba^=Sx||1,xj=akI[xj]||1){jl=xj^xj<<1^xj<<2^xj<<3^xj<<4;jl=jl>>8^jl&255^99;kk[ba]=jl;aEm[jl]=ba;aif=fq[aiv=fq[Sx=fq[ba]]];MT=aif*0x1010101^aiv*0x10001^Sx*0x101^ba*0x1010100;Pa=fq[jl]*0x101^jl*0x1010100;for(H=0;H<4;H++){KY[H][ba]=Pa=Pa<<24^Pa>>>8;uz[H][jl]=MT=MT<<24^MT>>>8;}}for(H=0;H<5;H++){KY[H]=KY[H].slice(0);uz[H]=uz[H].slice(0);}},atl:function(qs,Jo){if(qs.length!==4){throw new IPCC.Web.UI.ImGearArgumentException('blocksize','Invalid block size');}var aV=this.aV[Jo],dR=qs[0]^aV[0],dU=qs[Jo?3:1]^aV[1],ff=qs[2]^aV[2],fq=qs[Jo?1:3]^aV[3],uQ,alb,aeq,avy=aV.length/4-2,H,CD=4,fA=[0,0,0,0],HN=this.Ec[Jo],PB=HN[0],Ov=HN[1],Pf=HN[2],OG=HN[3],kk=HN[4];for(H=0;H<avy;H++){uQ=PB[dR>>>24]^Ov[dU>>16&255]^Pf[ff>>8&255]^OG[fq&255]^aV[CD];alb=PB[dU>>>24]^Ov[ff>>16&255]^Pf[fq>>8&255]^OG[dR&255]^aV[CD+1];aeq=PB[ff>>>24]^Ov[fq>>16&255]^Pf[dR>>8&255]^OG[dU&255]^aV[CD+2];fq=PB[fq>>>24]^Ov[dR>>16&255]^Pf[dU>>8&255]^OG[ff&255]^aV[CD+3];CD+=4;dR=uQ;dU=alb;ff=aeq;}for(H=0;H<4;H++){fA[Jo?3& -H:H]=kk[dR>>>24]<<24^kk[dU>>16&255]<<16^kk[ff>>8&255]<<8^kk[fq&255]^aV[CD++];uQ=dR;dR=dU;dU=ff;ff=fq;fq=uQ;}return fA;}};module.exports=BY;},{}],62:[function(require,module,exports){var hs={};hs.Gu={oP:function(cg){var fA="",pB=IPCC.Web.hA.xc(cg),H,eC;for(H=0;H<pB/8;H++){if((H&3)===0){eC=cg[H/4];}fA+=String.fromCharCode(eC>>>24);eC<<=8;}return decodeURIComponent(escape(fA));},tP:function(dM){dM=unescape(encodeURIComponent(dM));var fA=[],H,eC=0;for(H=0;H<dM.length;H++){eC=eC<<8|dM.charCodeAt(H);if((H&3)===3){fA.push(eC);eC=0;}}if(H&3){fA.push(IPCC.Web.hA.IX(8*(H&3),eC));}return fA;}};hs.sP={xT:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oP:function(cg,awV,bE){var fA="",H,fu=0,ff=IPCC.Web.hs.sP.xT,xJ=0,pB=IPCC.Web.hA.xc(cg);if(bE){ff=ff.substr(0,62)+'-_';}for(H=0;fA.length*6<pB;){fA+=ff.charAt((xJ^cg[H]>>>fu)>>>26);if(fu<6){xJ=cg[H]<<(6-fu);fu+=26;H++;}else{xJ<<=6;fu-=6;}}while((fA.length&3)&& !awV){fA+="=";}return fA;},tP:function(dM,bE){dM=dM.replace(/\s|=/g,'');var fA=[],H,fu=0,ff=IPCC.Web.hs.sP.xT,xJ=0,ba;if(bE){ff=ff.substr(0,62)+'-_';}for(H=0;H<dM.length;H++){ba=ff.indexOf(dM.charAt(H));if(ba<0){throw new IPCC.Web.UI.ImGearArgumentException('base64','Invalid base64');}if(fu>26){fu-=26;fA.push(xJ^ba>>>fu);xJ=ba<<(32-fu);}else{fu+=6;xJ^=ba<<(32-fu);}}if(fu&56){fA.push(IPCC.Web.hA.IX(fu&56,xJ,1));}return fA;}};hs.II={oP:function(cg){return IPCC.Web.hs.sP.oP(cg,1,1);},tP:function(dM){return IPCC.Web.hs.sP.tP(dM,1);}};module.exports=hs;},{}],63:[function(require,module,exports){var rf={};rf.Xj=function(rf){if(!this.aV[0]){this.RS();}if(rf){this.eK=rf.eK.slice(0);this.ze=rf.ze.slice(0);this.di=rf.di;}else{this.aex();}};rf.Xj.rf=function(dg){return(new IPCC.Web.rf.Xj()).aph(dg).awx();};rf.Xj.prototype={aHy:512,aex:function(){this.eK=this.aik.slice(0);this.ze=[];this.di=0;return this;},aph:function(dg){if(typeof dg==="string"){dg=IPCC.Web.Codec.Gu.tP(dg);}var H,dU=this.ze=IPCC.Web.hA.Vv(this.ze,dg),alc=this.di,awL=this.di=alc+IPCC.Web.hA.xc(dg);for(H=512+alc& -512;H<=awL;H+=512){this.oq(dU.splice(0,16));}return this;},awx:function(){var H,dU=this.ze,eK=this.eK;dU=IPCC.Web.hA.Vv(dU,[IPCC.Web.hA.IX(1,1)]);for(H=dU.length+2;H&15;H++){dU.push(0);}dU.push(Math.floor(this.di/0x100000000));dU.push(this.di|0);while(dU.length){this.oq(dU.splice(0,16));}this.aex();return eK;},aik:[],aV:[],RS:function(){var H=0,Fk=2,aU;function acU(ba){return(ba-Math.floor(ba))*0x100000000|0;};awg:for(;H<64;Fk++){for(aU=2;aU*aU<=Fk;aU++){if(Fk%aU===0){continue awg;}}if(H<8){this.aik[H]=acU(Math.pow(Fk,1/2));}this.aV[H]=acU(Math.pow(Fk,1/3));H++;}},oq:function(aqo){var H,eC,dR,dU,kT=aqo.slice(0),eK=this.eK,df=this.aV,XB=eK[0],sr=eK[1],Kv=eK[2],Og=eK[3],sR=eK[4],Os=eK[5],ET=eK[6],aaX=eK[7];for(H=0;H<64;H++){if(H<16){eC=kT[H];}else{dR=kT[(H+1)&15];dU=kT[(H+14)&15];eC=kT[H&15]=((dR>>>7^dR>>>18^dR>>>3^dR<<25^dR<<14)+(dU>>>17^dU>>>19^dU>>>10^dU<<15^dU<<13)+kT[H&15]+kT[(H+9)&15])|0;}eC=(eC+aaX+(sR>>>6^sR>>>11^sR>>>25^sR<<26^sR<<21^sR<<7)+(ET^sR&(Os^ET))+df[H]);aaX=ET;ET=Os;Os=sR;sR=Og+eC|0;Og=Kv;Kv=sr;sr=XB;XB=(eC+((sr&Kv)^(Og&(sr^Kv)))+(sr>>>2^sr>>>13^sr>>>22^sr<<30^sr<<19^sr<<10))|0;}eK[0]=eK[0]+XB|0;eK[1]=eK[1]+sr|0;eK[2]=eK[2]+Kv|0;eK[3]=eK[3]+Og|0;eK[4]=eK[4]+sR|0;eK[5]=eK[5]+Os|0;eK[6]=eK[6]+ET|0;eK[7]=eK[7]+aaX|0;}};module.exports=rf;},{}],64:[function(require,module,exports){var BS={};BS.aoY={aS:"cbc",adW:function(NP,Ur,fY,wM){if(wM&&wM.length){throw new IPCC.Web.UI.ImGearArgumentException('data','cannot authenticate data');}if(IPCC.Web.hA.xc(fY)!==128){throw new IPCC.Web.UI.ImGearArgumentException('iv','invalid data');}var H,kT=IPCC.Web.hA,Sf=kT.aiO,pB=kT.xc(Ur),adV=0,qY=[];if(pB&7){throw new IPCC.Web.UI.ImGearInvalidOperationException('padding works only for multiple bytes');}for(H=0;adV+128<=pB;H+=4,adV+=128){fY=NP.adW(Sf(fY,Ur.slice(H,H+4)));qY.splice(H,0,fY[0],fY[1],fY[2],fY[3]);}pB=(16-((pB>>3)&15))*0x1010101;fY=NP.adW(Sf(fY,kT.Vv(Ur,[pB,pB,pB,pB]).slice(H,H+4)));qY.splice(H,0,fY[0],fY[1],fY[2],fY[3]);return qY;},Xi:function(NP,QA,fY,wM){if(wM&&wM.length){throw new IPCC.Web.UI.ImGearArgumentException(wM,"cbc can't authenticate data");}if(IPCC.Web.hA.xc(fY)!==128){throw new IPCC.Web.UI.ImGearArgumentException('iv',"cbc iv must be 128 bits");}if((IPCC.Web.hA.xc(QA)&127)|| !QA.length){throw new IPCC.Web.UI.ImGearInvalidOperationException("cbc ciphertext must be a positive multiple of the block size");}var H,kT=IPCC.Web.hA,Sf=kT.aiO,rK,sb,qY=[];wM=wM||[];for(H=0;H<QA.length;H+=4){rK=QA.slice(H,H+4);sb=Sf(fY,NP.Xi(rK));qY.splice(H,0,sb[0],sb[1],sb[2],sb[3]);fY=rK;}rK=qY[H-1]&255;if(rK===0||rK>16){throw new IPCC.Web.UI.ImGearInvalidOperationException('pkcs#5 padding corrupt');}sb=rK*0x1010101;if(!kT.aEf(kT.SH([sb,sb,sb,sb],0,rK*8),kT.SH(qY,qY.length*32-rK*8,qY.length*32))){throw new IPCC.Web.UI.ImGearInvalidOperationException('2pkcs#5 padding corrupt');}return kT.SH(qY,0,qY.length*32-rK*8);}};module.exports=BS;},{}],65:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var Le=function(){var ad=[];var aK=new IPCC.Web.UI.jq();var dX=new IPCC.Web.UI.MarkCollection();var V=this;var Jh=true;this.axk=[];function onMarkSelectionChanged(bP,J){var K=J.mark;if(K.by&&K.by[0]&&K.by[0].ce===false){return;}var eG;var aCH=J.mark.get_selected();if(K.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&K.aD!==undefined){dX.remove_markAdded(onMarkSelectionChanged);dX.remove_markRemoved(onMarkSelectionChanged);for(var H=0;H<ad.length;H++){if(ad[H].aD===K.aD){if(ad[H].get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction){eG=ad[H];}else{ad[H].set_selected(J.mark.get_selected());}}}dX.add_markAdded(onMarkSelectionChanged);dX.add_markRemoved(onMarkSelectionChanged);if(eG){eG.set_selected(aCH);}return;}else if(K.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction){dX.remove_markAdded(onMarkSelectionChanged);dX.remove_markRemoved(onMarkSelectionChanged);for(var aa=0;aa<K.by.length;aa++){K.by[aa].set_selected(J.mark.get_selected());}dX.add_markAdded(onMarkSelectionChanged);dX.add_markRemoved(onMarkSelectionChanged);}var fI=new IPCC.Web.UI.MarkEventArgs();fI.mark=K;fI.zIndex=V.oX(K);fI.length=1;V.bm('markSelectionChanged',fI);};dX.add_markAdded(onMarkSelectionChanged);dX.add_markRemoved(onMarkSelectionChanged);var avA=dX.addMark;dX.addMark=function(K){if(V.oX(K)<0){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot select a Mark that is not associated with the ArtPage.');}if(!dX.contains(K)){avA.call(dX,K);K.dq('selected');}};var avv=dX.addMarks;dX.addMarks=function(AE){var rd=[];function Tw(K){if(V.oX(K)<0){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot select a Mark that is not associated with the ArtPage.');}if(!dX.contains(K)){rd.push(K);}};AE.forEach(Tw,{});avv.call(dX,AE);var H;for(H=0;H<rd.length;H++){rd[H].dq('selected');}};var avo=dX.removeMark;dX.removeMark=function(K){if(dX.contains(K)){avo.call(dX,K);K.dq('selected');}};var avQ=dX.removeAllMarks;dX.removeAllMarks=function(){var rd=[];function Tw(K){if(dX.contains(K)){rd.push(K);}};dX.forEach(Tw,{});avQ.call(dX);var H;for(H=0;H<rd.length;H++){rd[H].dq('selected');}};function alK(lb){IPCC.aA.mt(lb,'zIndex',0,ad.length-1);};this.WU=function(){return ad.length;};this.afU=function(){var H=0;for(;H<ad.length;H++){if(ad[H].get_type()!==IPCC.Web.UI.MarkType.HighlightText&&ad[H].get_type()!==IPCC.Web.UI.MarkType.Highlight&& !(ad[H].get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&ad[H].aD!==undefined)){break;}}return H;};this.BZ=function(){return dX;};this.CV=function(R){if(R===Jh){return;}Jh=R;this.dq('Jh');};this.LJ=function(){return Jh;};var pQ=false;this.mH=function(){return pQ;};this.pe=function(R){if(typeof R!=="boolean"){return;}pQ=R;this.dq('redactionDraftMode');};function ml(bP,J){if(J.get_propertyName()==='selected'){return;}var fI=new IPCC.Web.UI.MarkEventArgs();fI.mark=bP;fI.zIndex=V.oX(bP);fI.propertyName=J.ci;fI.length=1;if(fI.mark.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction||(fI.mark.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&fI.mark.aD!=='undefined')){V.aou(bP);}V.bm('markChanged',fI);};function zh(bP){var fI=new IPCC.Web.UI.MarkEventArgs();fI.mark=bP;fI.zIndex=V.oX(bP);fI.length=1;V.bm('markTextSelectionChanged',fI);};function QV(bP,J){var fI=new IPCC.Web.UI.CommentEventArgs();fI.mark=bP;fI.comment=J.comment;fI.index=J.index;V.bm('commentAdded',fI);};function Qz(bP,J){var fI=new IPCC.Web.UI.CommentEventArgs();fI.mark=bP;fI.comment=J.comment;fI.index=J.index;V.bm('commentRemoved',fI);};function QN(bP,J){var fI=new IPCC.Web.UI.CommentEventArgs();fI.mark=bP;fI.comment=J.comment;fI.index=J.index;V.bm('commentChanged',fI);};this.Qm=function(K,oK){oK=oK||{};var lb=this.oX(K);if(lb>=0){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot add a Mark to an ArtPage if the mark is already associated with the ArtPage.');}if(K.ee()){throw new IPCC.Web.UI.ImGearInvalidOperationExceptionException('You cannot add a Mark to an ArtPage if the mark is already associated with a different ArtPage.');}ad.push(K);K.na(this);K.add_propertyChanged(ml);K.add_markTextSelectionChanged(zh);K.vn(QV);K.vC(Qz);K.tj(QN);var J=new IPCC.Web.UI.MarkEventArgs();J.mark=K;if(K.get_type()===IPCC.Web.UI.MarkType.Highlight||K.get_type()===IPCC.Web.UI.MarkType.HighlightText||K.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||K.get_type()===IPCC.Web.UI.MarkType.DocumentHyperlink||K.get_type()===IPCC.Web.UI.MarkType.Strikethrough||(K.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&K.aD!==undefined)){this.aaI(K,0);}else{J.zIndex=ad.length-1;}J.clientX=oK.clientX;J.clientY=oK.clientY;J.length=1;V.bm('markAdded',J);};this.CN=function(hT,cC){var Im=[].concat(ad);var H;for(H=0;H<Im.length;H++){hT.call(cC,Im[H],H,this);}};this.Pw=function(lb){alK(lb);return ad[lb];};this.oX=function(K){var H;for(H=0;H<ad.length;H++){if(ad[H]===K){return H;}}return-1;};this.azI=function(ed){var fe=JSON.parse(ed);this.ST();var GN=[];var H;var KL=fe.m;if(KL){for(H=0;H<KL.length;H++){var ao=new IPCC.Web.UI.Mark(KL[H].t);ao.aAb(KL[H]);ao.na(this);ao.add_propertyChanged(ml);ao.add_markTextSelectionChanged(zh);GN.push(ao);}}ad=GN;V.bm('marksLoaded',{});};var ALPHA_CHAR_CODES=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70];this.apA=function(){var jI=new Array(36);var aJ=0;var H;var ag;for(H=0;H<8;H++){jI[aJ++]=ALPHA_CHAR_CODES[Math.floor(Math.random()*16)];}for(H=0;H<3;H++){jI[aJ++]=45;for(ag=0;ag<4;ag++){jI[aJ++]=ALPHA_CHAR_CODES[Math.floor(Math.random()*16)];}}jI[aJ++]=45;var aqK=new Date().getTime();var aqU=("0000000"+aqK.toString(16).toUpperCase()).substr(-8);for(H=0;H<8;H++){jI[aJ++]=aqU.charCodeAt(H);}for(H=0;H<4;H++){jI[aJ++]=ALPHA_CHAR_CODES[Math.floor(Math.random()*16)];}return String.fromCharCode.apply(null,jI);};function TC(ky){var ba=ky.firstChild;while(ba.nodeType!==1){ba=ba.nextSibling;}return ba;};function Pl(wP,akJ,aon){var aEo=parseFloat(wP.getAttribute(akJ));var aDG=parseFloat(wP.getAttribute(akJ+'Xb'));return aon/(aEo/aDG);};function apI(PV,be,as){if(be<=0&&as<=0){return 1;}var alm=PV.getAttribute('pageWidth');var akc=PV.getAttribute('pageHeight');var NH,SG,aU,wP,H;if(alm&&akc){NH=parseFloat(alm);SG=parseFloat(akc);if(isFinite(NH)&&isFinite(SG)&&NH>0&&SG>0){return be/NH;}}for(H=0;H<PV.childNodes.length;H++){wP=PV.childNodes[H];if(wP.nodeName!=='annotation'){continue;}aU=Pl(wP,'width',be);if(isFinite(aU)&&aU>0){return aU;}aU=Pl(wP,'height',as);if(isFinite(aU)&&aU>0){return aU;}aU=Pl(wP,'x',be);if(isFinite(aU)&&aU>0){return aU;}aU=Pl(wP,'y',as);if(isFinite(aU)&&aU>0){return aU;}}return 1;};this.azn=function(jS,aR,be,as,Sm,stampImages,vO,vh){var V=this;if(vO!==true){this.ST();}if(jS){var lu;if(IPCC.uq.Jq()){lu=jS.firstChild;}else{var VJ=jS.firstChild.nodeName;if(VJ.toLowerCase()==='xml'){lu=jS.firstChild.nextSibling;}else{lu=jS.firstChild;}}var cR=TC(lu);if(cR.nodeName!=='pages'){throw 'ERROR: pages';}if(cR.hasChildNodes()){var H;for(H=0;H<cR.childNodes.length;H++){var bI=cR.childNodes[H];if(bI.nodeName!=='page'){continue;}var AT=bI.getAttribute('id');var mk=false;var ub;var qm='';var Hh=[];var jC;var oC,aa=0;var cq,bZ,aP;if(Sm){var ahW=bI.getAttribute('pageWidth'),aiW=bI.getAttribute('pageHeight');if(ahW){Sm.aga(ahW);}if(aiW){Sm.adZ(aiW);}}var lQ=[],Ow={},by;if((AT&&parseInt(AT,10))===(aR+1)){mk=true;var GN=[];var ag;var ao;var jM,gC,qU,sJ,rX,fU;var lG=1;var amf=apI(bI,be,as);if(amf>0){lG=amf;}for(ag=0;ag<bI.childNodes.length;ag++){var aN=bI.childNodes[ag];if(aN.nodeName!=='annotation'){continue;}var jc=parseFloat(aN.getAttribute('width'))*lG;var iF=parseFloat(aN.getAttribute('height'))*lG;var fT=parseFloat(aN.getAttribute('x'))*lG;var hv=parseFloat(aN.getAttribute('y'))*lG;var ZC=aN.getAttribute('fillColor'),UN,qf,Yn=aN.getAttribute('lineColor'),ajB,jz,acx=aN.getAttribute('fontColor'),aiD,AA;if(ZC==='transparent'){UN=qf=ZC;}else{UN=parseInt(ZC||0,10);qf=parseInt(UN,10).toString(16);while(qf.length<6){qf='0'+qf;}qf='#'+qf;}if(Yn==='transparent'){jz=Yn;}else{ajB=parseInt(Yn||0,10);jz=parseInt(ajB,10).toString(16);while(jz.length<6){jz='0'+jz;}jz='#'+jz;}if(acx){aiD=parseInt(acx||0,10);AA=parseInt(aiD,10).toString(16);while(AA.length<6){AA='0'+AA;}AA='#'+AA;}var axF=aN.getAttribute('stampSize');var OH=aN.getAttribute('dragDirection');var Lp=parseInt(aN.getAttribute('opacity'),10);if(isNaN(Lp)){Lp=255;}if(aN.nodeName==='annotation'){var ajD=aN.getAttribute('label');if(!ajD){ajD='';}var kB=aN.getAttribute('drawType');var lm;switch(kB){case 'imagestamp':case 'imagestamp_redact':var qi=aN.getAttribute('imageStampId');var bv=(kB==='imagestamp')?IPCC.Web.UI.MarkType.ImageStampAnnotation:IPCC.Web.UI.MarkType.ImageStampRedaction;ao=new IPCC.Web.UI.Mark(bv);ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});ao.set_image(stampImages[qi].base64format);ao.qi=qi;jM=true;if(kB==='imagestamp_redact'){ao.jP(true);}break;case 'circle':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Ellipse);ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});jM=true;ao.set_lineColor(jz);ao.set_fillVisible(false);ao.set_lineWidth(parseFloat(aN.getAttribute('lineWidth')));break;case 'circle_filled':case 'circle_trans':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Ellipse);ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});jM=true;ao.set_fillColor(qf);ao.set_lineColor(jz);ao.set_fillVisible(true);ao.set_lineWidth(parseFloat(aN.getAttribute('lineWidth')));break;case 'text':case 'text_redact':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Text);ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});ao.set_fontName('verdana');ao.set_fontSize(10);ao.set_opacity(0);ub=undefined;ao.set_fillColor('#000000');if(kB==='text_redact'){ao.jP(true);}if(kB==='text'){ao.set_fillColor(qf);ao.set_lineColor(jz);ao.set_lineWidth(parseFloat(aN.getAttribute('lineWidth')));ao.set_fillVisible(true);ao.set_opacity(Lp);}fU=parseInt(aN.getAttribute('maxLength'));if(!isNaN(fU)){ao.set_maxLength(fU);}lQ=[];gC=aN.firstChild;while((gC)&&(gC.nodeType!==4)){gC=gC.nextSibling;}if((gC)&&(gC.nodeType===4)){lm=gC.innerText||gC.textContent||gC.data;ao.aZ.aO=lm;oC=lm.split("</TEXTFORMAT>");qm='';Hh=[];for(aa=0;aa<oC.length;aa++){if(oC[aa].match(/<TEXTFORMAT/)){oC[aa]=oC[aa]+"</TEXTFORMAT>";lQ.push(oC[aa]);}}for(aa=0;aa<lQ.length;aa++){if(lQ[aa].match(/<P/)){ub=this.aiE(lQ[aa]);Hh.push(ub);qm+=ub+" ";if(aa===0){jC=this.aiF(lQ[aa]);amr(jC,ao);}}qm=qm.replace(/\s+$/g,"");ao.set_text(qm);var Fx=this.aiV(lQ[aa]);switch(Fx){case 'CENTER':ao.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Center);break;case 'RIGHT':ao.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Right);break;default:ao.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Left);break;}}}break;case 'line':case 'arrow':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Line);var aW=ao.re();if(OH==='br'){aW.setPoint(1,new IPCC.Web.UI.Point(fT+jc,hv+iF));aW.setPoint(0,new IPCC.Web.UI.Point(fT,hv));}else if(OH==='bl'){aW.setPoint(1,new IPCC.Web.UI.Point(fT,hv+iF));aW.setPoint(0,new IPCC.Web.UI.Point(fT+jc,hv));}else if(OH==='tr'){aW.setPoint(1,new IPCC.Web.UI.Point(fT+jc,hv));aW.setPoint(0,new IPCC.Web.UI.Point(fT,hv+iF));}else if(OH==='tl'){aW.setPoint(1,new IPCC.Web.UI.Point(fT,hv));aW.setPoint(0,new IPCC.Web.UI.Point(fT+jc,hv+iF));}ao.set_lineColor(jz);ao.set_lineWidth(parseFloat(aN.getAttribute('lineWidth')));if(kB==='arrow'){ao.set_headFillColor(jz);ao.set_endHeadType(IPCC.Web.UI.LineHeadType.Solid);ao.set_startHeadAngle(30);ao.set_startHeadLength(35);ao.set_lineWidth(parseFloat(aN.getAttribute('lineWidth')));}break;case 'stamp':case 'stamp_redact':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Stamp);ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});ao.set_fillColor(jz);if(kB==='stamp_redact'){ao.jP(true);ao.set_fillColor('#000000');}gC=aN.firstChild;while((gC)&&(gC.nodeType!==4)){gC=gC.nextSibling;}if((gC)&&(gC.nodeType===4)){lm=gC.innerText||gC.textContent||gC.data;ao.aZ.aO=lm;ao.set_text(lm);}break;case 'highlightText':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.HighlightText);ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});ao.set_fillColor(jz);ao.aD=aN.getAttribute('highlightGroupID');if(aN.getAttribute('textLength')){ao.cq=parseInt(aN.getAttribute('textLength'),10);}ao.bZ=aN.getAttribute('selectedText');if(aN.getAttribute('startIndex')){ao.aP=parseInt(aN.getAttribute('startIndex'),10);}ao.iq=aN.getAttribute('isHighlight');ao.set_opacity(127);by=ZQ(aN,lG);if(by){ao.by=by;}break;case 'rectangle_filled_redact':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.RectangleRedaction);ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});ao.set_fillColor(qf||'#000000');ao.set_lineColor(jz);ao.set_lineWidth(parseFloat(aN.getAttribute('lineWidth')));ao.set_textColor(AA||'#ffffff');ao.set_fillVisible(true);ao.jP(true);qU=aN.getAttribute('highlightGroupID');ao.set_text(IPCC.T.yV(aN.getAttribute('meta')));if(qU){ao.set_lineWidth(0);ao.aD=qU;var eG=Ow[qU];if(!eG){eG=Ow[qU]=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextSelectionRedaction);eG.aD=qU;eG.set_rectangle(ao.get_rectangle());eG.jP(true);eG.set_text(IPCC.T.yV(aN.getAttribute('meta')));}else{var Kc=false;var ny=eG.get_rectangle();var hq=ny.x,iJ=ny.x+ny.width,_top=ny.y,ib=ny.y+ny.height;if(ny.x>fT){Kc=true;hq=fT;}if(ny.y>hv){Kc=true;_top=hv;}if(ny.x+ny.width<fT+jc){Kc=true;iJ=fT+jc;}if(ny.y+ny.height<hv+iF){Kc=true;ib=hv+iF;}if(Kc===true){eG.set_rectangle({x:hq,y:_top,width:iJ-hq,height:ib-_top});}}}break;case 'text_selection_redaction':qU=aN.getAttribute('highlightGroupID');ao=Ow[qU];if(!ao){ao=Ow[qU]=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextSelectionRedaction);ao.aD=qU;ao.set_rectangle({x:0,y:0,width:0,height:0});ao.jP(true);ao.set_text(aN.getAttribute('meta'));}cq=aN.getAttribute('textLength');if(cq){ao.cq=parseInt(cq,10);}bZ=aN.getAttribute('selectedText');if(bZ){ao.bZ=bZ;}aP=aN.getAttribute('startIndex');if(aP){ao.aP=parseInt(aP,10);}break;case 'text_hyperlink_annotation':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextHyperlinkAnnotation);ao.set_fillColor(jz);qU=aN.getAttribute('highlightGroupID');ao.aD=qU;var nb=aN.getAttribute('href');if(nb){ao.set_href(IPCC.T.yV(nb));}cq=aN.getAttribute('textLength');if(cq){ao.cq=parseInt(cq,10);}bZ=aN.getAttribute('selectedText');if(bZ){ao.bZ=bZ;}aP=aN.getAttribute('startIndex');if(aP){ao.aP=parseInt(aP,10);}var iq=aN.getAttribute('isHighlight');ao.iq=iq?iq:'n';ao.by=ZQ(aN,lG);ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});break;case 'rectangle':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Rectangle);ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});ao.set_lineVisible(true);ao.set_lineColor(jz);ao.set_fillVisible(false);ao.set_lineWidth(parseFloat(aN.getAttribute('lineWidth')));break;case 'rectangle_filled':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Rectangle);ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});ao.set_fillColor(qf);ao.set_lineColor(jz);ao.set_fillVisible(true);ao.set_lineWidth(parseFloat(aN.getAttribute('lineWidth')));break;case 'rectangle_trans':case 'rectangle_trans_redact':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Rectangle);ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});ao.set_fillColor(qf);ao.set_lineColor(jz);ao.set_fillVisible(true);if(kB==='rectangle_trans_redact'){ao.jP(true);}ao.set_lineWidth(parseFloat(aN.getAttribute('lineWidth')));break;case 'freehand':case 'signature_path':if(kB==='freehand'){ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Freehand);}else{ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.SignaturePath);switch(aN.getAttribute('align').toUpperCase()){case 'LEFT':ao.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Left);break;case 'RIGHT':ao.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Right);break;default:ao.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Center);break;}}ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});ao.set_pathWidth(parseFloat(aN.getAttribute('pathWidth')));ao.set_pathHeight(parseFloat(aN.getAttribute('pathHeight')));ao.set_lineWidth(parseFloat(aN.getAttribute('lineWidth')));ao.set_lineColor(jz);var ur=aN.firstChild;while((ur)&&(ur.nodeType!==4)){ur=ur.nextSibling;}if((ur)&&(ur.nodeType===4)){lm=ur.innerText||ur.textContent||ur.data;ao.aZ.aO=lm;ao.set_pathString(lm);}break;case 'signature_text':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.SignatureText);ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});ao.set_fontSize(10);ao.set_lineWidth=0;ao.set_fillVisible(true);ao.set_opacity(1);gC=aN.firstChild;this.Vd(gC,ao);ao.zv=parseFloat(aN.getAttribute('fontWidth'));ao.zD=parseFloat(aN.getAttribute('fontHeight'));break;case 'text_area_signature':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextAreaSignature);ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});ao.set_fontName('verdana');ub=undefined;fU=parseInt(aN.getAttribute('maxLength'));if(!isNaN(fU)){ao.set_maxLength(fU);}var eV=parseInt(aN.getAttribute('maxFontSize'));if(!isNaN(eV)){ao.set_maxFontSize(eV);}gC=aN.firstChild;this.Vd(gC,ao);break;case 'text_input_signature':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextLine);ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});gC=aN.firstChild;this.Vd(gC,ao);ao.zv=parseFloat(aN.getAttribute('fontWidth'));ao.zD=parseFloat(aN.getAttribute('fontHeight'));ao.set_lineVisible(false);fU=parseInt(aN.getAttribute('maxLength'));if(!isNaN(fU)){ao.set_maxLength(fU);}aDr(aN,ao);break;case 'polyline':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Polyline);ao.set_lineWidth(parseFloat(aN.getAttribute('lineWidth')));ao.set_lineColor(jz);var tu=aN.firstChild;while((tu)&&(tu.nodeType!==4)){tu=tu.nextSibling;}var GK;if((tu)&&(tu.nodeType===4)){lm=tu.innerText||tu.textContent||tu.data;if(lm&&lm!=='undefined'){GK=JSON.parse(lm);aW=ao.re();if(GK){for(H=0;H<GK.length;H++){aW.addPoint(new IPCC.Web.UI.Point(GK[H].x*lG,GK[H].y*lG));}}}}break;case 'strikethrough':ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Strikethrough);ao.set_rectangle({x:fT,y:hv,width:jc,height:iF});ao.set_lineWidth(parseFloat(aN.getAttribute('lineWidth')));ao.set_lineColor(jz);ao.aD=aN.getAttribute('highlightGroupID');var textLength=aN.getAttribute('textLength');if(textLength){ao.cq=parseInt(textLength,10);}ao.bZ=aN.getAttribute('selectedText');var startIndex=aN.getAttribute('startIndex');if(startIndex){ao.aP=parseInt(startIndex,10);}ao.iq=aN.getAttribute('isHighlight');by=ZQ(aN,lG);if(by){ao.by=by;}break;default:}if(ao){ao.aZ.lo=aN.getAttribute('nodeId');if(Lp>=0&&(kB==='rectangle_trans_redact'|| !ao.iM())&&kB!=='stamp'&&kB!=='imagestamp'&&kB!=='imagestamp_redact'&&kB!=='text_hyperlink_annotation'&&kB!=='text_input_signature'&&kB!=='text_area_signature'&&kB!=='strikethrough'){ao.set_opacity(Lp);}ao.aZ.Fs=axF;ao.aZ.aIF=kB;ao.aZ.es=aN.getAttribute('lineWidth');ao.aZ.cP=aN.getAttribute('fillColor');ao.aZ.iI=aN.getAttribute('lineColor');ao.aZ.aHx=aN.getAttribute('dragDirection');ao.aZ.AT=AT;ao.aZ.ba=aN.getAttribute('x');ao.aZ.de=aN.getAttribute('y');ao.aZ.bj=aN.getAttribute('height');ao.aZ.aF=aN.getAttribute('width');ao.aZ.aIC=aN.getAttribute('x_percent');ao.aZ.aFS=aN.getAttribute('y_percent');ao.aZ.aHH=aN.getAttribute('height_percent');ao.aZ.aIr=aN.getAttribute('width_percent');ao.aZ.aHa=aN.getAttribute('formUser');ao.aZ.aID=aN.getAttribute('created');ao.aZ.aHC=aN.getAttribute('modified');ao.aZ.aHO=aN.getAttribute('saveDate');ao.aZ.aHf=aN.getAttribute('saveTime');ao.aZ.la=aN.getAttribute('meta');var Cq=aN.firstChild;while((Cq)&&(Cq.nodeType!==4)){Cq=Cq.nextSibling;}if((Cq)&&(Cq.nodeType===4)){ao.cB.push(Cq.data);}else{ao.cB.push('');}var lj=parseInt(aN.getAttribute('interactionMode'))||IPCC.Web.UI.MarkInteractionMode.Full;ao.set_interactionMode(lj);ao.na(this);ao.add_propertyChanged(ml);ao.add_markTextSelectionChanged(zh);ao.vn(QV);ao.vC(Qz);ao.tj(QN);GN.push(ao);aDQ(aN,ao);sJ=IPCC.T.aeF(aN.getAttribute('created'));rX=IPCC.T.aeF(aN.getAttribute('modified'));sJ=sJ||new Date();rX=rX||new Date();ao.initializeDates(sJ,rX);if(vh){ao.set_visible(false);}}}}ad=ad.concat(GN);V.bm('marksLoaded',{});}if(mk){asU(jS,aR);break;}}}}};this.Vd=function(wu,ao){var H,lm,oC,qm,Hh,ub,lQ=[],xi=ao.get_type()===IPCC.Web.UI.MarkType.SignatureText,aCa=xi?IPCC.Web.UI.HorizontalAlignment.Center:IPCC.Web.UI.HorizontalAlignment.Left,jC;while((wu)&&(wu.nodeType!==4)){wu=wu.nextSibling;}if((wu)&&(wu.nodeType===4)){lm=wu.innerText||wu.textContent||wu.data;ao.aZ.aO=lm;oC=lm.split("</TEXTFORMAT>");for(H=0;H<oC.length;H++){if(oC[H].match(/<TEXTFORMAT/)){oC[H]=oC[H]+"</TEXTFORMAT>";lQ.push(oC[H]);}}qm='';Hh=[];for(H=0;H<lQ.length;H++){if(lQ[H].match(/<P/)){ub=this.aiE(lQ[H]);Hh.push(ub);qm+=ub+" ";if(H===0){jC=this.aiF(lQ[H]);amr(jC,ao);}}qm=qm.replace(/\s+$/g,"");ao.set_text(qm);var Fx=this.aiV(lQ[H]);switch(Fx){case 'LEFT':ao.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Left);break;case 'CENTER':ao.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Center);break;case 'RIGHT':ao.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Right);break;default:ao.set_textHorizontalAlignment(aCa);break;}}}};function SK(agf,dg){for(var i=0;i<agf.childNodes.length;i++){var Yc=agf.childNodes[i];if(Yc.nodeName==='kvp'){var aV=Yc.getAttribute("key");var R=Yc.getAttribute("value");dg.set_data(aV,R);}}};function aDM(Qb,cr){var dm=new IPCC.Web.UI.Comment(IPCC.T.yV(Qb.getAttribute("text")));dm.set_creationTime(Qb.getAttribute("created"));cr.addComment(dm);for(var i=0;i<Qb.childNodes.length;i++){var aml=Qb.childNodes[i];if(aml.nodeName==='data'){SK(aml,dm.get_data());}}};function aDL(aka,cr){for(var i=0;i<aka.childNodes.length;i++){var Op=aka.childNodes[i];if(Op.nodeName==='comments'){var hE=Op;for(var j=0;j<hE.childNodes.length;j++){var amt=hE.childNodes[j];if(amt.nodeName==='comment'){aDM(amt,cr);}}}else if(Op.nodeName==='data'){SK(Op,cr.get_data());}}};function aDQ(Lh,K){for(var i=0;i<Lh.childNodes.length;i++){var uj=Lh.childNodes[i];if(uj.nodeName==='conversation'){aDL(uj,K.get_conversation());}else if(uj.nodeName==='data'){SK(uj,K.get_data());}}};function aDr(Lh,K){var R=null,HM={};for(var i=0;i<Lh.childNodes.length;i++){var uj=Lh.childNodes[i];if(uj.nodeName==='inputMask'){R=IPCC.T.yV(uj.getAttribute('value'));for(var j=0;j<uj.childNodes.length;j++){var Xm=uj.childNodes[j];if(Xm.nodeName==='translation'){HM[IPCC.T.yV(Xm.getAttribute('key'))]=new RegExp(IPCC.T.yV(Xm.getAttribute('value').replace(/(^\/|\/$)/g,'')));}}break;}}if(R!==null){K.set_mask({value:R,translations:HM});}};function ZQ(sm,vr){var gZ=null,jy;for(var i=0;i<sm.childNodes.length;i++){jy=sm.childNodes[i];if(jy.nodeName==='line-rectangles'){if(!gZ){gZ=aDp(jy,vr);}else{throw new Error("An XML annotation node cannot have more than one line-rectangles child node.");}}}return gZ;};function aDp(sm,vr){var gZ=[],jy;for(var i=0;i<sm.childNodes.length;i++){jy=sm.childNodes[i];if(jy.nodeName==='rectangle'){gZ.push(aCZ(jy,vr));}}return gZ;};function aCZ(sm,vr){var ba=parseFloat(sm.getAttribute("x"))*vr;var de=parseFloat(sm.getAttribute("y"))*vr;var aF=parseFloat(sm.getAttribute("width"))*vr;var bj=parseFloat(sm.getAttribute("height"))*vr;return new IPCC.Web.UI.Rectangle(ba,de,aF,bj);};this.Yu=function(aQ,Ke,um,jD,dv,aJ){var ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Highlight);ao.set_rectangle({x:aQ.x,y:aQ.y,width:aQ.width,height:aQ.height});ao.set_fillColor(um);ao.set_fillVisible(true);ao.aP=aJ;ao.cq=1;if(dv){ao.set_opacity(dv);}else{ao.set_opacity(127);}V.addMark(ao);return ao;};this.aBT=function(aQ,WE,aJ){var ao=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Highlight);ao.set_rectangle({x:aQ.x,y:aQ.y,width:aQ.width,height:aQ.height});ao.set_fillColor(WE.get_fillColor());ao.set_fillVisible(true);ao.aP=aJ;ao.cq=1;if(WE.get_opacity()){ao.set_opacity(WE.get_opacity());}else{ao.set_opacity(127);}V.addMark(ao);return ao;};function amr(jC,ao){for(var df=0;df<jC.length;df++){var cj=jC[df].attribs;var mk=false;if(jC[df].attribs.length>1&& !mk&&jC[df].Ir==='font'){mk=true;for(var ag=0;ag<cj.length;ag++){if(cj[ag].aS==="FACE"){ao.set_fontName(cj[ag].R);}else if(cj[ag].aS==="SIZE"&&ao.get_type()!==IPCC.Web.UI.MarkType.TextLine&&ao.get_type()!==IPCC.Web.UI.MarkType.TextAreaSignature){var sU=parseFloat(cj[ag].R);ao.set_fontSize(sU);}else if(cj[ag].aS==="COLOR"){var ahd=cj[ag].R;if(ao.get_type()===IPCC.Web.UI.MarkType.SignatureText){ao.set_fillColor(ahd);}else{ao.set_textColor(ahd);}}}var lk=false;if(jC[df+1]&&ao.get_type()!==IPCC.Web.UI.MarkType.TextLine){if(jC[df+1].tagName==='font'){break;}else{var xB=jC[df+1].Ir;if(xB==='b'||xB==='i'||xB==='u'||xB==='s'){if(xB==='b'){ao.set_fontStyle(IPCC.Web.UI.FontStyle.Bold);}else if(xB==='i'){ao.set_fontStyle(IPCC.Web.UI.FontStyle.Italic);}else if(xB==='u'){ao.set_fontStyle(IPCC.Web.UI.FontStyle.Underline);}else if(xB==='s'){ao.set_fontStyle(IPCC.Web.UI.FontStyle.Strikeout);}lk=true;}}if(jC[df+2]){var ash=jC[df+2].Ir;lk=SQ(ao,lk,ash);}if(jC[df+3]){var asD=jC[df+3].Ir;lk=SQ(ao,lk,asD);}if(jC[df+4]){var asY=jC[df+4].Ir;lk=SQ(ao,lk,asY);}if(mk){break;}}}}};function SQ(K,ahz,xL){var lk=ahz;var ao=K;if(ahz){if(xL==='b'){ao.set_fontStyle(ao.get_fontStyle()|IPCC.Web.UI.FontStyle.Bold);lk=true;}else if(xL==='i'){ao.set_fontStyle(ao.get_fontStyle()|IPCC.Web.UI.FontStyle.Italic);lk=true;}else if(xL==='u'){ao.set_fontStyle(ao.get_fontStyle()|IPCC.Web.UI.FontStyle.Underline);lk=true;}else if(xL==='s'){ao.set_fontStyle(ao.get_fontStyle()|IPCC.Web.UI.FontStyle.Strikeout);lk=true;}}else{if(xL==='b'){ao.set_fontStyle(IPCC.Web.UI.FontStyle.Bold);lk=true;}else if(xL==='i'){ao.set_fontStyle(IPCC.Web.UI.FontStyle.Italic);lk=true;}else if(xL==='u'){ao.set_fontStyle(IPCC.Web.UI.FontStyle.Underline);lk=true;}else if(xL==='s'){ao.set_fontStyle(IPCC.Web.UI.FontStyle.Strikeout);lk=true;}}return lk;};function Gq(str){var obj={},items=str.split(",");for(var i=0;i<items.length;i++){obj[items[i]]=true;}return obj;};var adG=/^<([\-A-Za-z0-9_]+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,aed=/^<\/([\-A-Za\-z0-9_]+)[^>]*>/,aFb=/([\-A-Za\-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\[\w\W]|[^"])*)")|(?:'((?:\\[\w\W]|[^'])*)')|([^>\s]+)))?/g;var aFZ=Gq("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed");var oq=Gq("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul");var ayY=Gq("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var");var aox=Gq("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");var aFt=Gq("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected");var asA=Gq("script,style");this.ajj=function(html,handler){var aJ,xT,tX,mc=[],kZ=html;function parseEndTag(tag,tagName){var gb;if(!tagName){gb=0;}else{for(gb=mc.length-1;gb>=0;gb--){if(mc[gb]===tagName){break;}}}if(gb>=0){for(var i=mc.length-1;i>=gb;i--){if(handler.end){handler.end(mc[i]);}}mc.length=gb;}};function parseStartTag(tag,tagName,rest,unary){tagName=tagName.toLowerCase();if(oq[tagName]){while(mc.last()&&ayY[mc.last()]){parseEndTag("",mc.last());}}if(aox[tagName]&&mc.last()===tagName){parseEndTag("",tagName);}unary=aFZ[tagName]|| ! !unary;if(!unary){mc.push(tagName);}if(handler.start){var attrs=[];rest.replace(aFb,function(tX,name){var value=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:aFt[name]?name:"";attrs.push({name:name,value:value,escaped:value.replace(/(^|[^\\])"/g,'$1\\\"')});});if(handler.start){handler.start(tagName,attrs,unary);}}};mc.last=function(){return this[this.length-1];};function aGI(all,text){text=text.replace(/<!--([\w\W]*?)-->/g,"$1").replace(/<!\[CDATA\[([\w\W]*?)\]\]\]>/g,"$1");if(handler.chars){handler.chars(text);}return "";};while(html){xT=true;if(!mc.last()|| !asA[mc.last()]){if(html.indexOf("<!--")===0){aJ=html.indexOf("-->");if(aJ>=0){if(handler.comment){handler.comment(html.substring(4,aJ));}html=html.substring(aJ+3);xT=false;}}else if(html.indexOf("</")===0){tX=html.match(aed);if(tX){html=html.substring(tX[0].length);tX[0].replace(aed,parseEndTag);xT=false;}}else if(html.indexOf("<")===0){tX=html.match(adG);if(tX){html=html.substring(tX[0].length);tX[0].replace(adG,parseStartTag);xT=false;}}if(xT){aJ=html.indexOf("<");var text=aJ<0?html:html.substring(0,aJ);text=IPCC.T.yV(text);html=aJ<0?"":html.substring(aJ);if(handler.chars){handler.chars(text);}}}else{html=html.replace(new RegExp("(.*)<\/"+mc.last()+"[^>]*>"),aGI);parseEndTag("",mc.last());}if(html===kZ){throw " Parse Error in annotation Html Text: "+html;}kZ=html;}parseEndTag();};this.aiE=function(html){var results="";this.ajj(html,{start:function(){},end:function(){},chars:function(text){results+=text;},comment:function(){}});return results;};this.aiF=function(html){var fk=[];this.ajj(html,{start:function(tag,attrs){var fN;fN=tag;if(tag==='font'||tag==='b'||tag==='i'||tag==='u'||tag==='s'){var xv={};xv.Ir=tag;xv.attribs=[];if(tag==='b'){xv.aHw=true;}else if(tag==='i'){xv.aIw=true;}else if(tag==='u'){xv.aIa=true;}else if(tag==='s'){xv.aHT=true;}else{for(var i=0;i<attrs.length;i++){var zS={};zS.aS=attrs[i].name;zS.R=attrs[i].value;xv.attribs.push(zS);}}fk.push(xv);}},end:function(){},chars:function(){},comment:function(){}});return fk;};this.aiV=function(html){var parts=html.toUpperCase().split('ALIGN="');var alignment=parts[1].split('"')[0];return alignment;};function asU(jS,aDv){var mO=jS.getElementsByTagName("highlights")[0];if(mO.hasChildNodes()){var kW;var cf;for(var H=0;H<mO.childNodes.length;H++){kW=mO.childNodes[H];if(kW.nodeType===1){cf=kW.getAttribute('page');if(cf&&parseInt(cf,10)===aDv+1){var jf=new IPCC.Web.UI.YF();jf.ayf=kW.nodeName;switch(jf.ayf){case 'tag':jf.EP=IPCC.Web.UI.HighLightType.Tag;break;case 'highlight':jf.EP=IPCC.Web.UI.HighLightType.InlineHighLight;break;case 'link':jf.EP=IPCC.Web.UI.HighLightType.Link;break;case 'redaction':jf.EP=IPCC.Web.UI.HighLightType.Redaction;break;case 'strikethrough':jf.EP=IPCC.Web.UI.HighLightType.Strikethrough;break;default:jf.EP=undefined;}if(kW.childNodes[0].data){jf.cB.push(kW.childNodes[0].data);}jf.aZ.dE=kW.getAttribute('id');jf.aZ.aIE=kW.getAttribute('userid');jf.aZ.aHg=kW.getAttribute('mode');jf.aZ.dI=kW.getAttribute('color');jf.aZ.aIh=kW.getAttribute('occurence');jf.aZ.aN=kW.getAttribute('annotation');jf.aZ.bI=kW.getAttribute('page');jf.aZ.aGR=kW.getAttribute('documentname');jf.aZ.aIc=kW.getAttribute('tooltip');jf.aZ.aHc=kW.getAttribute('allowdelete');jf.aZ.lX=kW.getAttribute('start');jf.aZ.aIl=kW.getAttribute('end');V.axk.push(jf);}}}}};this.ST=function(){var J;if(ad.length<1){return;}dX.removeAllMarks();var H;for(H=ad.length-1;H>=0;H--){ad[H].remove_propertyChanged(ml);ad[H].remove_markTextSelectionChanged(zh);ad[H].na(null);J=new IPCC.Web.UI.MarkEventArgs();J.length=ad.length;J.zIndex=0;J.mark=ad.pop();V.bm('markRemoved',J);}J=new IPCC.Web.UI.MarkEventArgs();J.length=ad.length;J.zIndex=0;V.bm('markRemoved',J);};this.ws=function(K){var lb=this.oX(K);var wd=K.aD;if(lb>=0){K.remove_propertyChanged(ml);K.remove_markTextSelectionChanged(zh);K.na(null);ad.splice(lb,1);dX.removeMark(K);var J=new IPCC.Web.UI.MarkEventArgs();J.mark=K;J.zIndex=lb;J.length=1;V.bm('markRemoved',J);if(wd){this.aBQ(wd);}}};this.aHJ=function(oE){var va=ad.length;var wd=oE.aD;while(va--){var K=ad[va];if(K.aD===wd){K.set_fillColor(oE.get_fillColor());}}};this.aou=function(oE){var va=ad.length;var wd=oE.aD;if(!wd){oE.set_text(oE.get_text());return;}while(va--){var K=ad[va];if(K.aD===wd){if(K.get_text()!==oE.get_text()){K.set_text(oE.get_text());}if(K.get_fontName()!==oE.get_fontName()){K.set_fontName(oE.get_fontName());}if(K.get_fontSize()!==oE.get_fontSize()){K.set_fontSize(oE.get_fontSize());}}}};this.aBQ=function(wd){var va=ad.length;while(va--){var K=ad[va];if(K.aD===wd){var lb=this.oX(K);dX.removeMark(K);ad.splice(va,1);var J=new IPCC.Web.UI.MarkEventArgs();J.mark=K;J.zIndex=lb;J.length=1;}}};this.aaI=function(K,lb){var Pq=this.oX(K);if(Pq<0){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot reorder a Mark unless it is currently associated with the ArtPage.');}if(Pq===lb){return;}alK(lb);ad.splice(Pq,1);ad.splice(lb,0,K);if(K.get_type()===IPCC.Web.UI.MarkType.Highlight||K.get_type()===IPCC.Web.UI.MarkType.HighlightText||K.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||K.get_type()===IPCC.Web.UI.MarkType.DocumentHyperlink||K.get_type()===IPCC.Web.UI.MarkType.Strikethrough||(K.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&K.aD!==undefined)){return;}var J=new IPCC.Web.UI.MarkEventArgs();J.mark=K;J.zIndex=lb;J.oldZIndex=Pq;J.length=1;V.bm('markReordered',J);};function WD(gZ,fb,fB){if(!gZ){return undefined;}var kU={fV:'line-rectangles',cB:[],aZ:{}};IPCC.T.forEach(gZ,function(C){kU.cB.push({fV:'rectangle',cB:[],aZ:{x:C.x,y:C.y,height:C.height,width:C.width}});});return kU;};function aBe(iP){if(!iP){return undefined;}var kU={fV:'inputMask',cB:[],aZ:{value:IPCC.T.ri(iP.value)}};IPCC.T.forEach(iP.translations,function(R,aV){kU.cB.push({fV:'translation',cB:[],aZ:{key:IPCC.T.ri(aV),value:IPCC.T.ri(R.toString())}});});return kU;};function VU(dg){if(!dg){return undefined;}var mQ=dg.get_dataKeys();if(mQ.length===0){return undefined;}var kU={fV:'data',cB:[],aZ:{}};IPCC.T.forEach(mQ,function(aV){var R=dg.get_data(aV);kU.cB.push({fV:'kvp',cB:[],aZ:{key:aV,value:R}});});return kU;};function aqf(dm){if(!dm){return undefined;}var zo={fV:'comment',cB:[],aZ:{}};zo.aZ.text=IPCC.T.ri(dm.get_text());zo.aZ.created=dm.get_creationTime();var kU=VU(dm.get_data());if(kU){zo.cB.push(kU);}return zo;};function arQ(cr){if(!cr||cr.get_length()===0){return undefined;}var Wb={fV:'conversation',cB:[],aZ:{}};var ajE={fV:'comments',cB:[],aZ:{}};Wb.cB.push(ajE);cr.forEach(function(dm){var zo=aqf(dm);if(zo){ajE.cB.push(zo);}});var kU=VU(cr.get_data());if(kU){Wb.cB.push(kU);}return Wb;};this.att=function(K,fb,fB,tq){var bv=K.get_type();var jV=false;var jh;var hB;var akK;var WC;var gG,su,qr,aO;var bo={fV:'annotation',cB:[],aZ:{}};if(!K.aZ.lo){bo.aZ.nodeId=V.apA();}else{bo.aZ.nodeId=K.aZ.lo;}var JH,BC="",pp="";if(K.get_lineColor()){var ZS=K.get_lineColor();if(ZS==='transparent'){bo.aZ.lineColor=ZS;}else{JH=ZS.replace(/#/,"");BC=parseInt(JH,16);pp=BC.toString();bo.aZ.lineColor=pp;}}bo.aZ.interactionMode=K.get_interactionMode();bo.aZ.stampSize='122';var OS={};OS[IPCC.Web.UI.MarkType.Stamp]=true;OS[IPCC.Web.UI.MarkType.ImageStampAnnotation]=true;OS[IPCC.Web.UI.MarkType.ImageStampRedaction]=true;if((bv===IPCC.Web.UI.MarkType.Rectangle&&K.get_opacity()<255|| !K.iM())&&OS[bv]!==true){bo.aZ.opacity=K.get_opacity();}if(K.get_conversation().get_length()>0){bo.cB.push(arQ(K.get_conversation()));}var kU=VU(K.get_data());if(kU){bo.cB.push(kU);}jV=false;switch(bv){case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.Ellipse:hB=K.get_fillColor();if(hB==='transparent'){bo.aZ.fillColor=hB;}else if(hB){jh=hB.replace(/#/,"");bo.aZ.fillColor=parseInt(jh,16).toString();}else{bo.aZ.fillColor=pp;}if(K.get_fillVisible()){if(K.get_type()===IPCC.Web.UI.MarkType.Rectangle){if(K.get_opacity()===255){if(K.iM()===true){bo.aZ.drawType='rectangle_filled_redact';if(K.aD){bo.aZ.highlightGroupID=K.aD;}}else{bo.aZ.drawType='rectangle_filled';}}else{if(K.iM()===true){bo.aZ.drawType='rectangle_trans_redact';}else{bo.aZ.drawType='rectangle_trans';}}}else{if(K.get_opacity()===255){bo.aZ.drawType='circle_filled';if(K.iM()){bo.aZ.drawType='circle_filled_redact';}}else{bo.aZ.drawType='circle_trans';if(K.iM()){bo.aZ.drawType='circle_trans_redact';}}}}else{if(K.get_type()===IPCC.Web.UI.MarkType.Rectangle){bo.aZ.drawType='rectangle';bo.aZ.fillColor=pp;}else{bo.aZ.drawType='circle';bo.aZ.fillColor=pp;}}bo.aZ.dragDirection='br';var C=K.get_rectangle();bo.aZ.x=C.x;bo.aZ.y=C.y;bo.aZ.x_percent=C.x/fb;bo.aZ.y_percent=C.y/fB;bo.aZ.height_percent=C.height/fB;bo.aZ.width_percent=C.width/fb;bo.aZ.height=C.height;bo.aZ.width=C.width;break;case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:bo.aZ.lineWidth=K.get_lineWidth();jV=true;break;case IPCC.Web.UI.MarkType.TextSelectionRedaction:bo.aZ.highlightGroupID=K.aD;bo.aZ.drawType='text_selection_redaction';if(K.bZ&&K.bZ.length>0){bo.aZ.startIndex=K.aP;bo.aZ.selectedText=K.bZ;bo.aZ.textLength=K.cq;}break;case IPCC.Web.UI.MarkType.Text:var le=K.get_rectangle();bo.aZ.x=le.x;bo.aZ.y=le.y;bo.aZ.x_percent=le.x/fb;bo.aZ.y_percent=le.y/fB;bo.aZ.height_percent=le.height/fB;bo.aZ.width_percent=le.width/fb;bo.aZ.height=le.height;bo.aZ.width=le.width;bo.aZ.maxLength=K.get_maxLength();hB=K.get_fillColor();if(K.iM()===true){bo.aZ.drawType='text_redact';}else{bo.aZ.drawType='text';bo.aZ.opacity=K.get_opacity();}if(hB==='transparent'){bo.aZ.fillColor=hB;}else if(hB){jh=hB.replace(/#/,"");bo.aZ.fillColor=parseInt(jh,16).toString();}else{bo.aZ.fillColor='16776960';}var bA='';bA="<TEXTFORMAT LEADING=\"2\">";switch(K.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:bA+="<P ALIGN=\"center\" ";break;case IPCC.Web.UI.HorizontalAlignment.Left:bA+="<P ALIGN=\"left\" ";break;case IPCC.Web.UI.HorizontalAlignment.Right:bA+="<P ALIGN=\"right\" ";break;}bA+=">";bA+="<FONT ";su=K.get_fontName();bA+="FACE="+"\""+su+"\" ";qr=K.get_fontSize().toString();bA+="SIZE= \""+qr+"\" ";gG="\""+K.get_textColor()+"\" ";bA+="COLOR="+gG+" ";bA+="LETTERSPACING=\"0\" ";bA+="KERNING=\"0\" ";bA+=">";var cG=K.get_fontStyle();if(cG&IPCC.Web.UI.FontStyle.Bold){bA+="<B>";}if(cG&IPCC.Web.UI.FontStyle.Italic){bA+="<I>";}if(cG&IPCC.Web.UI.FontStyle.Underline){bA+="<U>";}if(cG&IPCC.Web.UI.FontStyle.Strikeout){bA+="<S>";}aO=K.get_text();aO=IPCC.T.ri(aO);bA+=aO;if(cG&IPCC.Web.UI.FontStyle.Strikeout){bA+="</S>";}if(cG&IPCC.Web.UI.FontStyle.Underline){bA+="</U>";}if(cG&IPCC.Web.UI.FontStyle.Italic){bA+="</I>";}if(cG&IPCC.Web.UI.FontStyle.Bold){bA+="</B>";}bA+="</FONT>";bA+="</P>";bA+="</TEXTFORMAT>";break;case IPCC.Web.UI.MarkType.Highlight:C=K.get_rectangle();bo.aZ.x=C.x;bo.aZ.y=C.y;bo.aZ.x_percent=C.x/fb;bo.aZ.y_percent=C.y/fB;bo.aZ.height_percent=C.height/fB;bo.aZ.width_percent=C.width/fb;bo.aZ.height=C.height;bo.aZ.width=C.width;bo.aZ.drawType='highlight';bo.aZ.highlightGroupID=K.aD;bo.aZ.isHighlight=K.iq;hB=K.get_fillColor();if(hB){jh=hB.replace(/#/,"");bo.aZ.fillColor=parseInt(jh,16).toString();bo.aZ.lineColor=parseInt(jh,16).toString();}else{bo.aZ.fillColor=pp;}break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:C=K.get_rectangle();bo.aZ.x=C.x;bo.aZ.y=C.y;bo.aZ.height=C.height;bo.aZ.width=C.width;bo.aZ.drawType='text_hyperlink_annotation';bo.aZ.href=IPCC.T.ri(K.nb);bo.aZ.startIndex=K.aP;bo.aZ.selectedText=K.bZ;bo.aZ.textLength=K.cq;bo.aZ.highlightGroupID=K.aD;bo.aZ.isHighlight=K.iq;hB=K.get_fillColor();if(hB){jh=hB.replace(/#/,"");bo.aZ.fillColor=parseInt(jh,16).toString();bo.aZ.lineColor=parseInt(jh,16).toString();}else{bo.aZ.fillColor=pp;}bo.cB.push(WD(K.by,fb,fB));break;case IPCC.Web.UI.MarkType.HighlightText:C=K.get_rectangle();bo.aZ.x=C.x;bo.aZ.y=C.y;bo.aZ.x_percent=C.x/fb;bo.aZ.y_percent=C.y/fB;bo.aZ.height_percent=C.height/fB;bo.aZ.width_percent=C.width/fb;bo.aZ.height=C.height;bo.aZ.width=C.width;bo.aZ.drawType='highlightText';bo.aZ.startIndex=K.aP;bo.aZ.selectedText=K.bZ;bo.aZ.textLength=K.cq;bo.aZ.highlightGroupID=K.aD;bo.aZ.isHighlight=K.iq;hB=K.get_fillColor();if(hB){jh=hB.replace(/#/,"");bo.aZ.fillColor=parseInt(jh,16).toString();bo.aZ.lineColor=parseInt(jh,16).toString();}else{bo.aZ.fillColor=pp;}bo.cB.push(WD(K.by,fb,fB));break;case IPCC.Web.UI.MarkType.RectangleRedaction:C=K.get_rectangle();bo.aZ.drawType='rectangle_filled_redact';bo.aZ.x=C.x;bo.aZ.y=C.y;bo.aZ.x_percent=C.x/fb;bo.aZ.y_percent=C.y/fB;bo.aZ.height_percent=C.height/fB;bo.aZ.width_percent=C.width/fb;bo.aZ.height=C.height;bo.aZ.width=C.width;bo.aZ.meta=IPCC.T.ri(K.get_text());bo.aZ.stampSize=K.get_fontSize();bo.aZ.lineWidth=K.get_lineWidth();hB=K.get_fillColor();if(hB){jh=hB.replace(/#/,"");bo.aZ.fillColor=parseInt(jh,16).toString();}else{bo.aZ.fillColor=pp;}JH=K.get_lineColor();if(JH){BC=JH.replace(/#/,"");bo.aZ.lineColor=parseInt(BC,16).toString();}else{bo.aZ.lineColor=pp;}WC=K.get_textColor();if(WC){akK=WC.replace(/#/,"");bo.aZ.fontColor=parseInt(akK,16).toString();}else{bo.aZ.fontColor=pp;}if(K.aD){bo.aZ.highlightGroupID=K.aD;}break;case IPCC.Web.UI.MarkType.Stamp:hB=K.get_fillColor();if(hB){jh=hB.replace(/#/,"");bo.aZ.fillColor=parseInt(jh,16).toString();bo.aZ.lineColor=parseInt(jh,16).toString();}else{bo.aZ.fillColor=pp;}C=K.get_rectangle();bo.aZ.x=C.x;bo.aZ.y=C.y;bo.aZ.x_percent=C.x/fb;bo.aZ.y_percent=C.y/fB;bo.aZ.height_percent=C.height/fB;bo.aZ.width_percent=C.width/fb;bo.aZ.height=C.height;bo.aZ.width=C.width;if(K.iM()===true){bo.aZ.drawType='stamp_redact';}else{bo.aZ.drawType='stamp';}aO=K.get_text();bo.aZ.stampSize=K.stampSize;bo.cB.push('<![CDATA['+aO+']]>');break;case IPCC.Web.UI.MarkType.Freehand:case IPCC.Web.UI.MarkType.SignaturePath:if(K.get_type()===IPCC.Web.UI.MarkType.Freehand){bo.aZ.drawType='freehand';}else{bo.aZ.drawType='signature_path';switch(K.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:bo.aZ.align='center';break;case IPCC.Web.UI.HorizontalAlignment.Left:bo.aZ.align='left';break;case IPCC.Web.UI.HorizontalAlignment.Right:bo.aZ.align='right';break;}}bA=K.get_pathString();bo.aZ.pathWidth=K.get_pathWidth();bo.aZ.pathHeight=K.get_pathHeight();C=K.get_rectangle();bo.aZ.x=C.x;bo.aZ.y=C.y;bo.aZ.x_percent=C.x/fb;bo.aZ.y_percent=C.y/fB;bo.aZ.height_percent=C.height/fB;bo.aZ.width_percent=C.width/fb;bo.aZ.height=C.height;bo.aZ.width=C.width;break;case IPCC.Web.UI.MarkType.SignatureText:hB=K.get_fillColor();var cP;if(hB){jh=hB.replace(/#/,"");bo.aZ.fillColor="";bo.aZ.lineColor="";cP=parseInt(jh,16).toString();}else{bo.aZ.fillColor="";cP=pp;}C=K.get_rectangle();bo.aZ.x=C.x;bo.aZ.y=C.y;bo.aZ.x_percent=C.x/fb;bo.aZ.y_percent=C.y/fB;bo.aZ.height_percent=C.height/fB;bo.aZ.width_percent=C.width/fb;bo.aZ.height=C.height;bo.aZ.width=C.width;bo.aZ.opacity=0;bo.aZ.drawType='signature_text';bo.aZ.stampSize=K.stampSize;bo.aZ.fontWidth=K.zv;bo.aZ.fontHeight=K.zD;bA='';bA="<TEXTFORMAT LEADING=\"2\">";switch(K.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:bA+="<P ALIGN=\"center\" ";break;case IPCC.Web.UI.HorizontalAlignment.Left:bA+="<P ALIGN=\"left\" ";break;case IPCC.Web.UI.HorizontalAlignment.Right:bA+="<P ALIGN=\"right\" ";break;}bA+=">";bA+="<FONT ";su=K.get_fontName();bA+="FACE="+"\""+su+"\" ";qr=K.stampSize.toString();bA+="SIZE= \""+qr+"\" ";gG="\""+K.get_fillColor()+"\" ";bA+="COLOR="+gG+" ";bA+="LETTERSPACING=\"0\" ";bA+="KERNING=\"0\" ";bA+=">";aO=IPCC.T.ri(K.get_text());bA+=aO;bA+="</FONT>";bA+="</P>";bA+="</TEXTFORMAT>";break;case IPCC.Web.UI.MarkType.TextAreaSignature:le=K.get_rectangle();bo.aZ.x=le.x;bo.aZ.y=le.y;bo.aZ.x_percent=le.x/fb;bo.aZ.y_percent=le.y/fB;bo.aZ.height_percent=le.height/fB;bo.aZ.width_percent=le.width/fb;bo.aZ.height=le.height;bo.aZ.width=le.width;bo.aZ.maxLength=K.fU;bo.aZ.maxFontSize=K.eV;if(tq){bo.aZ.drawType='text';}else{bo.aZ.drawType='text_area_signature';}bo.aZ.fillColor='transparent';bA='';bA="<TEXTFORMAT LEADING=\"2\">";switch(K.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:bA+="<P ALIGN=\"center\" ";break;case IPCC.Web.UI.HorizontalAlignment.Left:bA+="<P ALIGN=\"left\" ";break;case IPCC.Web.UI.HorizontalAlignment.Right:bA+="<P ALIGN=\"right\" ";break;}bA+=">";bA+="<FONT ";su=K.get_fontName();bA+="FACE="+"\""+su+"\" ";qr=K.cs.toString();bA+="SIZE= \""+qr+"\" ";gG="\""+K.get_textColor()+"\" ";bA+="COLOR="+gG+" ";bA+="LETTERSPACING=\"0\" ";bA+="KERNING=\"0\" ";bA+=">";cG=K.get_fontStyle();if(cG&IPCC.Web.UI.FontStyle.Bold){bA+="<B>";}if(cG&IPCC.Web.UI.FontStyle.Italic){bA+="<I>";}if(cG&IPCC.Web.UI.FontStyle.Underline){bA+="<U>";}if(cG&IPCC.Web.UI.FontStyle.Strikeout){bA+="<S>";}aO=K.get_text();aO=IPCC.T.ri(aO);bA+=aO;if(cG&IPCC.Web.UI.FontStyle.Strikeout){bA+="</S>";}if(cG&IPCC.Web.UI.FontStyle.Underline){bA+="</U>";}if(cG&IPCC.Web.UI.FontStyle.Italic){bA+="</I>";}if(cG&IPCC.Web.UI.FontStyle.Bold){bA+="</B>";}bA+="</FONT>";bA+="</P>";bA+="</TEXTFORMAT>";break;case IPCC.Web.UI.MarkType.TextLine:if(!tq){C=K.get_rectangle();bo.aZ.x=C.x;bo.aZ.y=C.y;bo.aZ.x_percent=C.x/fb;bo.aZ.y_percent=C.y/fB;bo.aZ.height_percent=C.height/fB;bo.aZ.maxLength=K.get_maxLength();bo.aZ.width_percent=C.width/fb;bo.aZ.height=C.height;bo.aZ.width=C.width;bo.aZ.opacity=0;bo.aZ.drawType='text_input_signature';bo.aZ.stampSize=K.stampSize;bo.aZ.fontWidth=K.zv;bo.aZ.fontHeight=K.zD;bA='';bA="<TEXTFORMAT LEADING=\"2\">";switch(K.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:bA+="<P ALIGN=\"center\" ";break;case IPCC.Web.UI.HorizontalAlignment.Left:bA+="<P ALIGN=\"left\" ";break;case IPCC.Web.UI.HorizontalAlignment.Right:bA+="<P ALIGN=\"right\" ";break;}bA+=">";bA+="<FONT ";su=K.get_fontName();bA+="FACE="+"\""+su+"\" ";qr=K.stampSize.toString();bA+="SIZE= \""+qr+"\" ";gG="\""+K.get_textColor()+"\" ";bA+="COLOR="+gG+" ";bA+="LETTERSPACING=\"0\" ";bA+="KERNING=\"0\" ";bA+=">";aO=IPCC.T.ri(K.get_text());bA+=aO;bA+="</FONT>";bA+="</P>";bA+="</TEXTFORMAT>";var ajw=aBe(K.get_mask());if(ajw){bo.cB.push(ajw);}}else{C=K.get_rectangle();var Dp=K.stampSize;var nF;if(!K.IC|| !K.nF){var ate=IPCC.T.aij(K.get_text(),K.get_fontName(),C.width,C.height,{uw:"pre",cs:Dp+"px"});nF=ate;K.IC=true;K.nF=nF;}else{nF=K.nF;}Dp=nF.fontSize;var hf=nF.width/C.width,cT=1.0,MIN_BUFFER=0.85;if(/mono/i.test(K.get_fontName())){MIN_BUFFER=0.75;}if(hf>MIN_BUFFER){cT=MIN_BUFFER*C.width/nF.width;Dp=Dp*cT;}var adC=C.width,aFm=nF.height*cT,aeB=C.height-(C.height-aFm)/2,afF=C.x,akd=C.y+(C.height-nF.height)/2+(nF.height*(1-cT));bo.aZ.x=afF;bo.aZ.y=akd;bo.aZ.x_percent=afF/fb;bo.aZ.y_percent=akd/fB;bo.aZ.height_percent=aeB/fB;bo.aZ.width_percent=adC/fb;bo.aZ.height=aeB;bo.aZ.width=adC;bo.aZ.opacity=0;bo.aZ.drawType='text_redact';bA='';bA="<TEXTFORMAT>";switch(K.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:bA+="<P ALIGN=\"center\" ";break;case IPCC.Web.UI.HorizontalAlignment.Left:bA+="<P ALIGN=\"left\" ";break;case IPCC.Web.UI.HorizontalAlignment.Right:bA+="<P ALIGN=\"right\" ";break;}bA+=">";bA+="<FONT ";su=K.get_fontName();bA+="FACE="+"\""+su+"\" ";if(K.awh){qr=(Dp/K.awh).toString();}else{qr=Dp.toString();}bA+="SIZE= \""+qr+"\" ";gG="\""+K.get_textColor()+"\" ";bA+="COLOR="+gG+" ";bA+="LETTERSPACING=\"0\" ";bA+="KERNING=\"0\" ";bA+=">";aO=IPCC.T.ri(K.get_text());bA+=aO;bA+="</FONT>";bA+="</P>";bA+="</TEXTFORMAT>";}break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:bo.aZ.drawType=(bv===IPCC.Web.UI.MarkType.ImageStampRedaction)?'imagestamp_redact':'imagestamp';C=K.get_rectangle();bo.aZ.x=C.x;bo.aZ.y=C.y;bo.aZ.height=C.height;bo.aZ.width=C.width;bo.aZ.lineWidth=K.get_lineWidth();bo.aZ.x_percent=C.x/fb;bo.aZ.y_percent=C.y/fB;bo.aZ.height_percent=C.height/fB;bo.aZ.width_percent=C.width/fb;bo.aZ.imageStampId=K.qi;break;case IPCC.Web.UI.MarkType.Strikethrough:C=K.get_rectangle();bo.aZ.x=C.x;bo.aZ.y=C.y;bo.aZ.height=C.height;bo.aZ.width=C.width;bo.aZ.drawType='strikethrough';bo.aZ.startIndex=K.aP;bo.aZ.selectedText=K.bZ;bo.aZ.textLength=K.cq;bo.aZ.highlightGroupID=K.aD;bo.aZ.isHighlight=K.iq;bo.cB.push(WD(K.by,fb,fB));break;}if(jV){bo.aZ.lineWidth=K.get_lineWidth();var aQ=K.get_boundingRectangle();bo.aZ.x=aQ.x;bo.aZ.y=aQ.y;bo.aZ.x_percent=aQ.x/fb;bo.aZ.y_percent=aQ.y/fB;bo.aZ.height_percent=aQ.height/fB;bo.aZ.width_percent=aQ.width/fb;bo.aZ.height=aQ.height;bo.aZ.width=aQ.width;if(bv===IPCC.Web.UI.MarkType.Line){if(K.get_endHeadType()===IPCC.Web.UI.LineHeadType.None){bo.aZ.drawType='line';}else{bo.aZ.drawType='arrow';}}else{bo.aZ.drawType='polyline';}bo.aZ.lineWidth=K.get_lineWidth();var aW=K.get_points();if(bv===IPCC.Web.UI.MarkType.Line){if((aW.getPoint(0).x<aW.getPoint(1).x)&&(aW.getPoint(0).y>aW.getPoint(1).y)){bo.aZ.dragDirection='tr';}else if((aW.getPoint(0).x>aW.getPoint(1).x)&&(aW.getPoint(0).y>aW.getPoint(1).y)){bo.aZ.dragDirection='tl';}else if((aW.getPoint(0).x>aW.getPoint(1).x)&&(aW.getPoint(0).y<aW.getPoint(1).y)){bo.aZ.dragDirection='bl';}else if((aW.getPoint(0).x<aW.getPoint(1).x)&&(aW.getPoint(0).y<aW.getPoint(1).y)){bo.aZ.dragDirection='br';}else{bo.aZ.dragDirection='br';}}else{var vt=[];var cl=aW.get_length(),bH;if(cl>1){for(var ag=0;ag<aW.get_length();ag++){bH=aW.getPoint(ag);vt.push({x:bH.x,y:bH.y});}bA=JSON.stringify(vt);}}if(BC){bo.aZ.fillColor=BC;}else{bo.aZ.fillColor="";}}else{bo.aZ.lineWidth=K.get_lineWidth();bo.aZ.dragDirection='br';}if(K.get_type()!==IPCC.Web.UI.MarkType.RectangleRedaction){bo.aZ.meta='';}bo.aZ.label='';var fq=new Date();bo.aZ.saveDate=IPCC.T.ayR(fq);bo.aZ.saveTime=IPCC.T.ayi(fq);bo.aZ.uuid='';bo.aZ.formUser='';bo.aZ.created=IPCC.T.aip(K.get_dateCreated());bo.aZ.modified=IPCC.T.aip(K.get_dateModified());if(K.get_type()===IPCC.Web.UI.MarkType.Text||K.get_type()===IPCC.Web.UI.MarkType.Freehand||K.get_type()===IPCC.Web.UI.MarkType.SignaturePath||K.get_type()===IPCC.Web.UI.MarkType.SignatureText||K.get_type()===IPCC.Web.UI.MarkType.Polyline||K.get_type()===IPCC.Web.UI.MarkType.TextAreaSignature||K.get_type()===IPCC.Web.UI.MarkType.TextLine){bo.cB.push('<![CDATA['+bA+']]>');}else{bo.cB.push('');}return bo;};this.aEH=function(aR,fb,fB,aX){var lu={fV:'documentAnnotations',cB:[],aZ:{}};var cR={fV:'pages',cB:[],aZ:{}};lu.cB.push(cR);var mO={fV:'highlights',cB:[],aZ:{}};lu.cB.push(mO);var uC={},qc=[];var bI={fV:'page',cB:[],aZ:{id:(aR+1).toString(),pageWidth:fb,pageHeight:fB}};cR.cB.push(bI);aX=aX||{};var aiy=(aX.includeAnnotations!==undefined)? ! !aX.includeAnnotations:true,aia=(aX.includeRedactions!==undefined)? ! !aX.includeRedactions:true,ahO=(aX.includeSignatures!==undefined)? ! !aX.includeSignatures:false,tq=(aX.tq!==undefined)? ! !aX.tq:false,QD=(aX.Fd!==undefined)?aX.Fd:false,aDX= ! !tq,alS=QD?QD:ad;for(var H=0;H<alS.length;H++){var K=alS[H];var bv=K.get_type();if(K.get_type()===IPCC.Web.UI.MarkType.Highlight){continue;}if(aDX&& !K.get_visible()){continue;}if(!QD){if(aiy===false&&aia===false&&ahO===false){break;}if(aiy===false){if(bv===IPCC.Web.UI.MarkType.Rectangle||bv===IPCC.Web.UI.MarkType.Ellipse||bv===IPCC.Web.UI.MarkType.Line||bv===IPCC.Web.UI.MarkType.Text||bv===IPCC.Web.UI.MarkType.Stamp||bv===IPCC.Web.UI.MarkType.Highlight||bv===IPCC.Web.UI.MarkType.Strikethrough||bv===IPCC.Web.UI.MarkType.HighlightText||bv===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||bv===IPCC.Web.UI.MarkType.Freehand||bv===IPCC.Web.UI.MarkType.ImageStampAnnotation||bv===IPCC.Web.UI.MarkType.Polyline){if(K.iM()===false){continue;}}}if(aia===false){if(K.iM()===true){continue;}if(bv===IPCC.Web.UI.MarkType.RectangleRedaction||bv===IPCC.Web.UI.MarkType.TextSelectionRedaction||bv===IPCC.Web.UI.MarkType.ImageStampRedaction){continue;}}if(ahO===false){if(bv===IPCC.Web.UI.MarkType.SignaturePath||bv===IPCC.Web.UI.MarkType.SignatureText||bv===IPCC.Web.UI.MarkType.SignatureImage||bv===IPCC.Web.UI.MarkType.TextAreaSignature||bv===IPCC.Web.UI.MarkType.TextLine){continue;}}}switch(bv){case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:uC[K.qi]={fV:'stampImage',cB:[],aZ:{imageStampId:K.qi,base64format:K.cz()}};break;}bI.cB.push(this.att(K,fb,fB,tq));}for(var GL in uC){if(uC.hasOwnProperty(GL)){qc.push(uC[GL]);}}return{lu:lu,qc:qc};};this.aDs=function(){var fe={m:[]};var H;for(H=0;H<ad.length;H++){fe.m.push(ad[H].aCT());}V.bm('marksSaved',{});var aff="";aff=JSON.stringify(fe);return aff;};this.yW=function(F){aK.addHandler('markAdded',F);};this.zs=function(F){aK.removeHandler('markAdded',F);};this.Ka=function(F){aK.addHandler('markChanged',F);};this.HQ=function(F){aK.removeHandler('markChanged',F);};this.yo=function(F){aK.addHandler('markRemoved',F);};this.zr=function(F){aK.removeHandler('markRemoved',F);};this.Jk=function(F){aK.addHandler('markReordered',F);};this.EQ=function(F){aK.removeHandler('markReordered',F);};this.XF=function(F){aK.addHandler('marksLoaded',F);};this.VQ=function(F){aK.removeHandler('marksLoaded',F);};this.aIv=function(F){aK.addHandler('marksSaved',F);};this.aGK=function(F){aK.removeHandler('marksSaved',F);};this.Ji=function(F){aK.addHandler('markSelectionChanged',F);};this.FN=function(F){aK.removeHandler('markSelectionChanged',F);};this.JQ=function(F){aK.addHandler('markTextSelectionChanged',F);};this.Gz=function(F){aK.removeHandler('markTextSelectionChanged',F);};this.vn=function(F){aK.addHandler('commentAdded',F);};this.Du=function(F){aK.removeHandler('commentAdded',F);};this.vC=function(F){aK.addHandler('commentRemoved',F);};this.DN=function(F){aK.removeHandler('commentRemoved',F);};this.tj=function(F){aK.addHandler('commentChanged',F);};this.tK=function(F){aK.removeHandler('commentChanged',F);};this.lw=function(F){aK.addHandler('propertyChanged',F);};this.nd=function(F){aK.removeHandler('propertyChanged',F);};this.bm=function(cL,J){var F=aK.getHandler(cL);if(F!==null){F(this,J);}};this.dq=function(ci){var F=aK.getHandler("propertyChanged");if(F){F(this,new IPCC.pV(ci));}};return this;};Le.prototype={get_markCount:function(){return this.WU();},get_selectedMarks:function(){return this.BZ();},toString:function(){return 'ArtPage with '+this.get_markCount()+' marks';},addMark:function(mark,mouseLocation){this.Qm(mark,mouseLocation);},forEachMark:function(method,context){this.CN(method,context);},getMark:function(zIndex){return this.Pw(zIndex);},getZIndexOfMark:function(mark){return this.oX(mark);},loadFromJson:function(json){this.azI(json);},removeAllMarks:function(){this.ST();},removeMark:function(mark){this.ws(mark);},reorderMark:function(mark,zIndex){this.aaI(mark,zIndex);},saveToJson:function(){return this.aDs();},add_markAdded:function(handler){this.yW(handler);},remove_markAdded:function(handler){this.zs(handler);},add_markChanged:function(handler){this.Ka(handler);},remove_markChanged:function(handler){this.HQ(handler);},add_markRemoved:function(handler){this.yo(handler);},remove_markRemoved:function(handler){this.zr(handler);},add_markReordered:function(handler){this.Jk(handler);},remove_markReordered:function(handler){this.EQ(handler);},add_marksLoaded:function(handler){this.XF(handler);},remove_marksLoaded:function(handler){this.VQ(handler);},add_markSelectionChanged:function(handler){this.Ji(handler);},remove_markSelectionChanged:function(handler){this.FN(handler);},add_markTextSelectionChanged:function(handler){this.JQ(handler);},remove_markTextSelectionChanged:function(handler){this.Gz(handler);},add_commentAdded:function(handler){this.vn(handler);},remove_commentAdded:function(handler){this.Du(handler);},add_commentRemoved:function(handler){this.vC(handler);},remove_commentRemoved:function(handler){this.DN(handler);},add_commentChanged:function(handler){this.tj(handler);},remove_commentChanged:function(handler){this.tK(handler);}};Le.registerClass=da;Le.registerClass('IPCC.Web.UI.ArtPage');module.exports=Le;},{"../../IPCC.Util":28}],66:[function(require,module,exports){var et=require('../../IPCC.Util').regEnum;var Nk=function(){};Nk.registerEnum=et;Nk.prototype={Line:0,Triangle:1};Nk.registerEnum('IPCC.Web.UI.CalloutType',false);module.exports=Nk;},{"../../IPCC.Util":28}],67:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var LX=function(text){var aK=new IPCC.Web.UI.jq();var dg=new IPCC.Web.UI.Data();this.Za=IPCC.T.wU(new Date());this.aO=text;this.aoP=function(aO){if(aO===this.aO){return;}this.aO=aO;var J=new IPCC.Web.UI.CommentEventArgs();J.comment=this;J.length=1;this.bm('commentChanged',J);};this.ayk=function(){return this.aO;};this.aBo=function(aAj){this.Za=aAj;};this.atP=function(){return this.Za;};this.tj=function(F){aK.addHandler('commentChanged',F);};this.tK=function(F){aK.removeHandler('commentChanged',F);};this.bm=function(cL,J){var F=aK.getHandler(cL);if(F!==null){F(this,J);}};this.vu=function(){return dg;};return this;};LX.prototype={toString:function(){return 'Comment('+this.creationTime+', '+this.text+')';},add_commentChanged:function(handler){this.tj(handler);},remove_commentChanged:function(handler){this.tK(handler);},get_text:function(){return this.ayk();},set_text:function(text){this.aoP(text);},get_creationTime:function(){return this.atP();},set_creationTime:function(isoTimeString){this.aBo(isoTimeString);},get_data:function(){return this.vu();}};LX.registerClass=da;LX.registerClass('IPCC.Web.UI.Comment');module.exports=LX;},{"../../IPCC.Util":28}],68:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var Ll=function(){return this;};Ll.registerClass=da;Ll.prototype={};Ll.registerClass('IPCC.Web.UI.CommentEventArgs');module.exports=Ll;},{"../../IPCC.Util":28}],69:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var Ok=function(awP){var hE=[];var aK=new IPCC.Web.UI.jq();var dg=new IPCC.Web.UI.Data();var K=awP;var V=this;function OD(bP,J){V.bm('commentChanged',J);};this.FI=function(dm){dm.add_commentChanged(OD);hE.push(dm);var J=new IPCC.Web.UI.CommentEventArgs();J.comment=dm;J.length=1;J.index=hE.length-1;this.bm('commentAdded',J);};this.aCI=function(dm){var Ti= -1;IPCC.T.forEach(hE,function(el,idx){if(el===dm){Ti=idx;}});if(Ti=== -1){throw new IPCC.Web.UI.ImGearArgumentException('comment',"The provided comment was not found in the conversation.");}var aaC=hE.splice(Ti,1)[0];aaC.tK(OD);var J=new IPCC.Web.UI.CommentEventArgs();J.comment=aaC;J.length=1;this.bm('commentRemoved',J);};this.lx=function(hT,cC){var H;for(H=0;H<hE.length;H++){hT.call(cC,hE[H],H,this);}};this.ef=function(){return hE.length;};this.vn=function(F){aK.addHandler('commentAdded',F);};this.Du=function(F){aK.removeHandler('commentAdded',F);};this.tj=function(F){aK.addHandler('commentChanged',F);};this.tK=function(F){aK.removeHandler('commentChanged',F);};this.vC=function(F){aK.addHandler('commentRemoved',F);};this.DN=function(F){aK.removeHandler('commentRemoved',F);};this.vu=function(){return dg;};this.LH=function(){return K;};this.bm=function(cL,J){var F=aK.getHandler(cL);if(F!==null){F(this,J);}};return this;};Ok.prototype={toString:function(){return 'Conversation with '+this.get_length()+' comments';},addComment:function(comment){this.FI(comment);},removeCommentInstance:function(comment){this.aCI(comment);},forEach:function(method,context){this.lx(method,context);},get_length:function(){return this.ef();},add_commentAdded:function(handler){this.vn(handler);},remove_commentAdded:function(handler){this.Du(handler);},add_commentChanged:function(handler){this.tj(handler);},remove_commentChanged:function(handler){this.tK(handler);},add_commentRemoved:function(handler){this.vC(handler);},remove_commentRemoved:function(handler){this.DN(handler);},get_data:function(){return this.vu();},get_mark:function(){return this.LH();}};Ok.registerClass=da;Ok.registerClass('IPCC.Web.UI.Conversation');module.exports=Ok;},{"../../IPCC.Util":28}],70:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var Rm=function(){this.dg={};this.vu=function(key){if(typeof key==='undefined'){return IPCC.T.extend({},this.dg);}else if(typeof key==='string'){return this.dg[key];}else{throw new IPCC.Web.UI.ImGearArgumentException("key","The argument must be a string.");}};this.aBV=function(key,value){if(typeof key!=='string'){throw new IPCC.Web.UI.ImGearArgumentException("key","The argument must be a string.");}if(typeof value==='string'){this.dg[key]=value;}else if(typeof value==='undefined'){delete this.dg[key];}else{throw new IPCC.Web.UI.ImGearArgumentException("value","The argument must be a string.");}return this;};this.auh=function(){var keys=[];IPCC.T.forEach(this.dg,function(value,key){keys.push(key);});return keys;};return this;};Rm.prototype={toString:function(){return 'Data('+this.creationTime+', '+this.text+')';},get_data:function(key){return this.vu(key);},set_data:function(key,value){return this.aBV(key,value);},get_dataKeys:function(){return this.auh();}};Rm.registerClass=da;Rm.registerClass('IPCC.Web.UI.Data');module.exports=Rm;},{"../../IPCC.Util":28}],71:[function(require,module,exports){var et=require('./../../IPCC.Util').regEnum;var NB=function(){};NB.prototype={Production:0,Development:1,Detailed:2};NB.registerEnum=et;NB.registerEnum('IPCC.Web.UI.DebugErrorLevel',false);module.exports=NB;},{"./../../IPCC.Util":28}],72:[function(require,module,exports){var et=require('./../../IPCC.Util').regEnum;var MQ=function(){};MQ.prototype={FunctionCall:0,Exception:1,Custom:2,UserAction:3,Warning:4};MQ.registerEnum=et;MQ.registerEnum('IPCC.Web.UI.DebugItemCause',false);module.exports=MQ;},{"./../../IPCC.Util":28}],73:[function(require,module,exports){var da=require('./../../IPCC.Util').regClass;var ah=function(aDz){var av=aDz;var afx=this.type=av.type.toLowerCase();var Nx=typeof av.changedTouches!=='undefined';this.rawEvent=av;this.altKey=av.altKey;if(typeof(av.button)!=='undefined'){this.button=(typeof(av.which)!=='undefined')?av.button:(av.button===4)?IPCC.Web.UI.MouseButton.middleButton:(av.button===2)?IPCC.Web.UI.MouseButton.rightButton:IPCC.Web.UI.MouseButton.leftButton;}if(afx==='keypress'){this.charCode=av.charCode||av.keyCode;}else if(av.keyCode&&(av.keyCode===46)){this.keyCode=127;}else{this.keyCode=av.keyCode;}this.clientX=(Nx)?av.changedTouches[0].clientX:av.clientX;this.clientY=(Nx)?av.changedTouches[0].clientY:av.clientY;this.ctrlKey=av.ctrlKey;this.target=av.target?av.target:av.srcElement;function arG(ab){var ba=0;var de=0;while(ab&& !isNaN(ab.offsetLeft)&& !isNaN(ab.offsetTop)){ba+=ab.offsetLeft-ab.scrollLeft;de+=ab.offsetTop-ab.scrollTop;if(ab.offsetparent){ab=ab.offsetParent;}else{ab=ab.parentNode;}}return{top:de,left:ba};};var eC=""+afx;var Gc='key';if(eC.substr(0,Gc.length)!==Gc){if((typeof(av.offsetX)!=='undefined')&&(typeof(av.offsetY)!=='undefined')){this.offsetX=av.offsetX;this.offsetY=av.offsetY;}else if(this.target&&(this.target.nodeType!==3)&&(typeof(av.clientX)==='number')){var My=arG(this.target);var fJ=this.target;var gr=fJ.ownerDocument||fJ.document||fJ;var kT=gr.defaultView||gr.parentWindow;this.offsetX=(kT.pageXOffset||0)+av.clientX-My.left;this.offsetY=(kT.pageYOffset||0)+av.clientY-My.top;}}this.screenX=(Nx)?av.changedTouches[0].screenX:av.screenX;this.screenY=(Nx)?av.changedTouches[0].screenY:av.screenY;this.shiftKey=av.shiftKey;};ah.prototype={preventDefault:function(){if(arguments.length!==0){throw new IPCC.Web.UI.ImGearParameterCountException();}if(this.rawEvent.preventDefault){this.rawEvent.preventDefault();}else if(window.event){this.rawEvent.returnValue=false;}},stopPropagation:function(){if(arguments.length!==0){throw new IPCC.Web.UI.ImGearParameterCountException();}if(this.rawEvent.stopPropagation){this.rawEvent.stopPropagation();}else if(window.event){this.rawEvent.cancelBubble=true;}}};ah.registerClass=da;ah.registerClass('IPCC.Web.UI.ah');ah.addHandler=function(element,eventName,handler,autoRemove){IPCC.Web.UI.ah.Tu(element);if(eventName==="error"){throw new IPCC.Web.UI.ImGearInvalidOperationException(IPCC.kM.addHandlerCantBeUsedForError);}if(!element.aK){element.aK={};}var eventCache=element.aK[eventName];if(!eventCache){element.aK[eventName]=eventCache=[];}var browserHandler;if(element.addEventListener){browserHandler=function(e){return handler.call(element,new IPCC.Web.UI.ah(e));};element.addEventListener(eventName,browserHandler,false);}else if(element.attachEvent){browserHandler=function(){var e={};try{var doc=element.ownerDocument||element.document||element;var fJ=doc.defaultView||doc.parentWindow;e=fJ.event;}catch(ex){}return handler.call(element,new IPCC.Web.UI.ah(e));};element.attachEvent('on'+eventName,browserHandler);}eventCache[eventCache.length]={handler:handler,browserHandler:browserHandler,autoRemove:autoRemove};if(autoRemove){var d=element.dispose;if(d!==IPCC.Web.UI.ah.aev){element.dispose=IPCC.Web.UI.ah.aev;if(typeof(d)!=="undefined"){element.agH=d;}}}};ah.clearHandlers=function(element){IPCC.Web.UI.ah.Tu(element);IPCC.Web.UI.ah.ags(element,false);};ah.ags=function(element,autoRemoving){if(element.aK){var cache=element.aK;for(var name in cache){if(cache.hasOwnProperty(name)){var handlers=cache[name];for(var i=handlers.length-1;i>=0;i--){var entry=handlers[i];if(!autoRemoving||entry.autoRemove){IPCC.Web.UI.ah.removeHandler(element,name,entry.handler);}}}}element.aK=null;}};ah.aev=function(){IPCC.Web.UI.ah.ags(this,true);var d=this.agH,type=typeof(d);if(type!=="undefined"){this.dispose=d;this.agH=null;if(type==="function"){this.dispose();}}};ah.removeHandler=function(element,eventName,handler){IPCC.Web.UI.ah.cY(element,eventName,handler);};ah.cY=function(element,eventName,handler){IPCC.Web.UI.ah.Tu(element);var browserHandler=null;if((typeof(element.aK)!=='object')|| !element.aK){throw new IPCC.Web.UI.ImGearInvalidOperationException('DOM event handler was not added through the DomEvent.addHandler method.');}var cache=element.aK[eventName];if(!(cache instanceof Array)){throw new IPCC.Web.UI.ImGearInvalidOperationException('DOM event handler was not added through the DomEvent.addHandler method.');}for(var i=0,l=cache.length;i<l;i++){if(cache[i].handler===handler){browserHandler=cache[i].browserHandler;break;}}if(typeof(browserHandler)!=='function'){throw new IPCC.Web.UI.ImGearInvalidOperationException('Handler was not added through the IPCC.Web.UI.ah.addHandler method.');}if(element.removeEventListener){element.removeEventListener(eventName,browserHandler,false);}else if(element.detachEvent){element.detachEvent('on'+eventName,browserHandler);}cache.splice(i,1);};ah.Tu=function(element){if(element.tagName&&(element.tagName.toUpperCase()==="SCRIPT")){return;}var doc=element.ownerDocument||element.document||element;if((typeof(element.document)!=='object')&&(element!==doc)&&(typeof(element.nodeType)!=='number')){throw new IPCC.Web.UI.ImGearArgumentException("element",IPCC.kM.argumentDomNode);}};module.exports=ah;},{"./../../IPCC.Util":28}],74:[function(require,module,exports){var et=require('../../IPCC.Util').regEnum;var pk=function(){};pk.registerEnum=et;pk.prototype={FullImage:0,FullWidth:1,FullHeight:2,ActualSize:3,OneToOne:4,Rectangle:5};pk.registerEnum('IPCC.Web.UI.FitType',false);module.exports=pk;},{"../../IPCC.Util":28}],75:[function(require,module,exports){var et=require('../../IPCC.Util').regEnum;var Qd=function(){};Qd.registerEnum=et;Qd.prototype={Regular:0,Bold:1,Italic:2,Underline:4,Strikeout:8};Qd.registerEnum('IPCC.Web.UI.FontStyle',true);module.exports=Qd;},{"../../IPCC.Util":28}],76:[function(require,module,exports){var et=require('../../IPCC.Util').regEnum;var RV=function(){};RV.registerEnum=et;RV.prototype={Tag:0,InlineHighLight:1,Link:2,Redaction:3,Strikethrough:4};RV.registerEnum('IPCC.Web.UI.HighLight',false);module.exports=RV;},{"../../IPCC.Util":28}],77:[function(require,module,exports){var et=require('../../IPCC.Util').regEnum;var Qq=function(){};Qq.registerEnum=et;Qq.prototype={Left:0,Center:16,Right:32};Qq.registerEnum('IPCC.Web.UI.HorizontalAlignment',false);module.exports=Qq;},{"../../IPCC.Util":28}],78:[function(require,module,exports){var et=require('./../../IPCC.Util').regEnum;var RI=function(){};RI.registerEnum=et;RI.prototype={None:0,ArtDataService:1};RI.registerEnum('IPCC.Web.UI.ImGearArtDataServices',false);module.exports=RI;},{"./../../IPCC.Util":28}],79:[function(require,module,exports){var da=require('./../../IPCC.Util').regClass;var BJ=function(aG){var kG='';var gE='';var V=this;this.cR=new IPCC.Web.UI.ImGearPageCollection();this.Rh=undefined;this.cR.bf=this;var QC=false;this.so=undefined;var fC=0;var Qa=IPCC.Web.UI.ImGearPageCountStatus.UnRequested;var aK=new IPCC.Web.UI.jq();this.ij=IPCC.Web.FD.SM(4,IPCC.Web.Ru());this.qR=IPCC.Web.hs.II.oP(this.ij);var xn=[];var lJ=0;var nr=[];var Eg=[];var gc={startPage:0,lastPage:0,requestCount:0,stopRequests:false,lastTimeout:1000};var UG=false;this.bm=function(cL,J){var F=aK.getHandler(cL);if(F!==null){try{F(V,J);}catch(e){IPCC.iA.Qo('raise event error in ImGearDocument, error: '+e.message);IPCC.iA.lY(e.message,IPCC.Web.UI.ImGearDocument,IPCC.Web.UI.DebugErrorLevel.Production,'ImGearDocument','');}}};function Tx(bP,J){if(J.length>0){V.bm('pageAdded',J);}};function Vb(bP,J){if(J.length>0){V.bm('pageRemoved',J);}};function Ib(bP,J){V.bm('pageChanged',J);};this.cR.add_pageAdded(Tx);this.cR.add_pageRemoved(Vb);this.cR.add_pageChanged(Ib);function aBC(){function aDk(ju,ia){var cE=ju+'() threw an exception ';if(ia.name){cE+='( '+ia.name+" ";}else{cE+=".";}if(ia.message){cE+="  exception message = "+ia.message;}if(ia.statusCode){cE+="  exception statusCode = "+ia.statusCode;}cE=cE.replace(/\n/g," ");IPCC.iA.lY(cE,IPCC.Web.UI.DebugItemCause.Exception,IPCC.Web.UI.DebugErrorLevel.Production,'ImGearDocument',"document");};this.af=aDk;this.bm=function(cL,J){var F=aK.getHandler(cL);if(F!==null){F(V,J);}};};if(arguments.length===0){var cE="ImGearDocument object creation requires parameters";throw new IPCC.Web.UI.ImGearArgumentException('ImGearDocument',cE);}if(arguments.length>0){if(aG.documentIdentifier!==undefined){kG=aG.documentIdentifier;gE=IPCC.hn.sl(kG);}if(aG.encodedDocumentIdentifier!==undefined){var ye=aG.encodedDocumentIdentifier;if(aG.documentIdentifier!==undefined){gE=IPCC.hn.sl(kG);if(ye!==gE){throw new IPCC.Web.UI.ImGearArgumentException('documentIdentifier','When both are specified, documentIdentifier and encodedImageIdentifier must reference the same document.');}}else{kG=IPCC.hn.IY(aG.encodedDocumentIdentifier);}}if(aG.imageServicePath!==undefined){this.so=aG.imageServicePath;}else{throw new IPCC.Web.UI.ImGearArgumentException('ImGearDocument','Document creation requires imageServicePath.');}var rZ;if(aG.includeAllPages!==undefined){QC=aG.includeAllPages;if(QC===true){var awU=new aBC();var WS=0;V.bV=new IPCC.hn(gE,0,0,0,0,0);var ro=function(){fC=V.bV.fC;Qa=IPCC.Web.UI.ImGearPageCountStatus.Known;for(;WS<fC;WS++){var ant=new IPCC.Web.UI.ImGearPage({pageNumber:WS,bf:V});ant.bf=V;V.cR.addPage(ant);}};Qa=IPCC.Web.UI.ImGearPageCountStatus.RequestPending;try{this.bV.Ub(this.so,awU,ro);}catch(e){Qa=IPCC.Web.UI.ImGearPageCountStatus.Failed;var ca=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();ca.exception=e;V.bm('pageOpenFailed',ca);throw e;}}}else if(aG.pages!==undefined){if(aG.pages.length>0){var H=0;for(H=0;H<aG.pages.length;H++){var bi=aG.pages[H];bi.document=this;this.cR.addPage(bi);}}}else if(aG.pageNumber!==undefined){if(aG.pageRangeCount!==undefined){var ql=aG.pageRangeCount;if(ql>0){var aa;for(aa=aG.pageNumber;aa<=ql;aa++){rZ=new IPCC.Web.UI.ImGearPage(aa);rZ.bf=V;this.cR.addPage(rZ);}}else if(ql===0){rZ=new IPCC.Web.UI.ImgearPage({pageNumber:aG.pageNumber,bf:V});rZ.bf=V;V.cR.addPage(rZ);}}else{if(aG.selected){rZ=new IPCC.Web.UI.ImGearPage({pageNumber:aG.pageNumber,bf:V,selected:true});}else{rZ=new IPCC.Web.UI.ImGearPage({pageNumber:aG.pageNumber,bf:V});}rZ.bf=V;V.cR.addPage(rZ);}}}this.Ku=function(){return kG;};this.Mp=function(){return gE;};this.afo=function(){return this.cR;};this.aAT=function(){return fC;};this.azP=function(){return Qa;};this.aAS=function(){return QC;};this.apl=function(R){QC=R;this.dq('includeAllPages');};var oJ=false;this.jt=function(){return oJ;};this.ou=function(R){oJ=R;};this.Jd=function(F){aK.addHandler('pageAdded',F);};this.HX=function(F){aK.removeHandler('pageAdded',F);};this.IG=function(F){aK.addHandler('pageRemoved',F);};this.FA=function(F){aK.removeHandler('pageRemoved',F);};this.Ki=function(F){aK.addHandler('pageOpenFailed',F);};this.EZ=function(F){aK.removeHandler('pageOpenFailed',F);};this.lw=function(F){aK.addHandler('propertyChanged',F);};this.nd=function(F){aK.removeHandler('propertyChanged',F);};this.KA=function(F){aK.addHandler('pageChanged',F);};this.Iw=function(F){aK.removeHandler('pageChanged',F);};this.dq=function(ci){var F=aK.getHandler('propertyChanged');if(F){F(this,new IPCC.pV(ci));}};this.azZ=function(F){aK.addHandler('textPagesReceived',F);};this.azL=function(F){aK.removeHandler('textPagesReceived',F);};this.azf=function(){return Eg.length;};this.aAC=function(){return xn;};this.azO=function(){return xn.length;};this.ayz=function(){return gc;};this.ayy=function(){return UG;};this.aHB=function(R){UG=R;};this.aqN=function(fQ){if(gc.stopRequests===true){var J={};J.error=0;J.textPagesReceived=Po(fQ);if(J.textPagesReceived.length===0){if(lJ>0&&lJ<fQ){for(var df=lJ;df<fQ;df++){J.textPagesReceived.push(df);}}}J.length=2;V.bm('textPagesReceived',J);return;}var hQ=true;var IM=false;for(var H=0;H<lJ;H++){if(Array.prototype.indexOf){if(xn.indexOf(H)<0){hQ=false;IM=true;break;}}else{if(IPCC.Web.jQ(xn,H)<0){IM=true;break;}}}if(IM){V.Sl(H,undefined,fQ);}else if(lJ<fQ){for(var ag=0;ag<fQ;ag++){if(Array.prototype.indexOf){if(nr.indexOf(ag)<0){hQ=false;break;}}else{if(IPCC.Web.jQ(nr,ag)<0){hQ=false;break;}}}if(!hQ){IM=true;V.Sl(ag,undefined,fQ);}else{V.Sl(lJ,undefined,fQ);}}else{IM=false;}};function Po(fQ){var Zn=[],df;if(nr.length>0){var hQ=true;for(df=0;df<fQ;df++){hQ=true;if(Array.prototype.indexOf){if(nr.indexOf(df)<0){hQ=false;}}else{if(IPCC.Web.jQ(nr,df)<0){hQ=false;}}if(!hQ){nr.push(df);Eg.push(df);Zn.push(df);}}}else{for(df=0;df<fQ;df++){nr.push(df);Eg.push(df);Zn.push(df);}}return Zn;};this.Sl=function(adl,aeJ,fQ){UG=true;var aP;if(!isNaN(adl)){aP=adl;}else{aP=0;}var CB;if(!isNaN(fQ)){CB=fQ;}var cc;if(!isNaN(aeJ)){cc=aeJ;}else if(!isNaN(CB)){cc=CB-1;}else{CB=fQ;if(!isNaN(CB)){cc=CB-1;}}if(isNaN(cc)){cc=aP+1;}if(cc-aP>9){cc=aP+9;}function Oa(aO){var Wa=lJ;var UJ=[];var hQ=true;var au;for(var bI=0;bI<aO.pages.length;bI++){if(Array.prototype.indexOf){if(xn.indexOf(aO.pages[bI].number)<0){hQ=false;}}else{if(IPCC.Web.jQ(xn,aO.pages[bI].number)<0){hQ=false;}}if(!hQ){xn.push(aO.pages[bI].number);if(V.cR.jj(aO.pages[bI].number).cd().Cb()===false){au=V.cR.jj(aO.pages[bI].number);au.adY(aO.pages[bI]);au.ahb(aO.pages[bI]);au.agz(aO.pages[bI].markup,aO.pages[bI].height,aO.pages[bI].width);}lJ++;UJ.push(aO.pages[bI].number);nr.push(aO.pages[bI].number);if(!aO.pages[bI].text){Eg.push(aO.pages[bI].number);}}}var J={};if(aO.hasOwnProperty("errorCode")){J.error=0;V.pageExtractionFailed=true;J.textPagesReceived=UJ;J.length=2;for(var xW=gc.startPage;xW<gc.lastPage+1;xW++){hQ=true;if(Array.prototype.indexOf){if(nr.indexOf(xW)<0){hQ=false;}}else{if(IPCC.Web.jQ(nr,xW)<0){hQ=false;}}if(!hQ){nr.push(xW);Eg.push(xW);J.textPagesReceived.push(xW);}}V.bm('textPagesReceived',J);gc.stopRequests=true;return;}if(lJ>Wa){J.textPagesReceived=UJ;J.length=2;J.error=0;}var nI=gc.lastTimeout;if(gc.startPage===aP&&gc.lastPage===cc&&lJ===Wa){if(gc.requestCount<25){nI=nI+1000;gc.requestCount++;}else{J.error=0;J.textPagesReceived=[];J.length=2;hQ=true;var df;for(df=gc.startPage;df<gc.lastPage+1;df++){hQ=true;if(Array.prototype.indexOf){if(nr.indexOf(df)<0){hQ=false;}}else{if(IPCC.Web.jQ(nr,df)<0){hQ=false;}}if(!hQ){nr.push(df);Eg.push(df);J.textPagesReceived.push(df);}}if(J.textPagesReceived.length===0){if(lJ>0&&lJ<fQ){for(df=lJ;df<fQ;df++){J.textPagesReceived.push(df);}}}gc.stopRequests=true;V.bm('textPagesReceived',J);return;}}else{nI=1000;gc.requestCount=0;}gc.lastTimeout=nI;gc.startPage=aP;gc.lastPage=cc;setTimeout(function(){V.aqN(fQ);},nI);if(lJ>Wa){V.bm('textPagesReceived',J);}};function fz(aH){var J={},hd,am;try{var nJ=aH.getResponseHeader("Accusoft-Data-Encrypted");if(nJ==='true'){var tm=IPCC.Web.hs.sP.tP(aH.getResponseHeader("Accusoft-Data-SK"));var aV=IPCC.Web.IV(tm,V.ij);var fu=IPCC.Web.Hw(aH);var uc=IPCC.Web.CS(fu,aV,V.ij);hd=IPCC.Web.hs.Gu.oP(uc);}else{hd=aH.responseText;}am=JSON.parse(hd);Oa(am);}catch(e){J.error= -1;Po(fQ);J.textPagesReceived=[];J.length=2;V.bm('textPagesReceived',J);return;}};function fg(am){var J={},fW;try{fW=am.response.status;if(am.response.responseText){am=JSON.parse(am.response.responseText);if(am.hasOwnProperty("errorCode")){J.error=0;if(lJ>0){if(am.pages){if(am.pages.length>0){Oa(am);return;}}}else{J.error= -1;}if(nr.length===0){J.error= -1;}V.pageExtractionFailed=true;J.textPagesReceived=[];J.length=2;J.textPagesReceived=Po(fQ);V.bm('textPagesReceived',J);return;}else{throw new IPCC.Web.UI.ImGearHttpException(fW,"Unable to obtain text");}}else{throw new IPCC.Web.UI.ImGearHttpException(fW,"Unable to obtain text");}}catch(e){J.error= -1;Po(fQ);J.textPagesReceived=[];J.length=2;V.bm('textPagesReceived',J);return;}};var iR=kG;var hI=V.so;if(!(/^[\x00-\x7F]*$/.test(iR))){iR='e'+gE;}else{iR='u'+iR;}var bE;if(V.jt()){bE=hI+'/Document/q/'+aP.toString()+'-'+cc.toString()+'/Text?DocumentID='+iR+'&iv='+V.qR;}else{bE=hI+'/Document/q/'+aP.toString()+'-'+cc.toString()+'/Text?DocumentID='+iR;}IPCC.T.ob.eB({method:'GET',url:bE,headers:{'accept':'application/json'}}).then(fz,fg);};return this;};BJ.encodeDocumentIdentifier=function(kG){var gE;if(kG!==undefined){gE=IPCC.hn.sl(kG);}return gE;};BJ.decodeDocumentIdentifier=function(gE){var agU;if(gE!==undefined){agU=IPCC.hn.IY(gE);}return agU;};BJ.prototype={get_documentIdentifier:function(){var aI=this.Ku();return aI;},get_encodedDocumentIdentifier:function(){var aI=this.Mp();return aI;},get_pages:function(){return this.afo();},get_pageCountStatus:function(){var r=this.azP();return r;},set_pageCountStatus:function(value){this.aGE(value);},get_pageCount:function(){var r=this.aAT();return r;},get_includeAllPages:function(){try{var aI=this.aAS();return aI;}catch(e){throw e;}},set_includeAllPages:function(value){try{this.apl(value);}catch(e){throw e;}},get_encryption:function(){var aI=this.jt();return aI;},set_encryption:function(value){this.ou(value);},add_pageChanged:function(handler){this.KA(handler);},remove_pageChanged:function(handler){this.Iw(handler);},add_pageRemoved:function(handler){this.IG(handler);},remove_pageRemoved:function(handler){this.FA(handler);},add_pageAdded:function(handler){this.Jd(handler);},remove_pageAdded:function(handler){this.HX(handler);},add_pageOpenFailed:function(handler){this.Ki(handler);},remove_pageOpenFailed:function(handler){this.EZ(handler);},get_textRequestInfo:function(){try{var aI=this.ayz();return aI;}catch(e){throw e;}},get_pagesWithText:function(){try{var aI=this.aAC();return aI;}catch(e){throw e;}},get_numberOfPagesWithText:function(){try{var aI=this.azO();return aI;}catch(e){throw e;}},get_numberOfPagesWithoutText:function(){try{var aI=this.azf();return aI;}catch(e){throw e;}},add_textPagesReceived:function(handler){try{this.azZ(handler);}catch(e){throw e;}},remove_textPagesReceived:function(handler){try{this.azL(handler);}catch(e){this.af('remove_textPagesReceived',e);throw e;}},add_propertyChanged:function(handler){this.lw(handler);},remove_propertyChanged:function(handler){this.nd(handler);}};BJ.registerClass=da;BJ.registerClass('IPCC.Web.UI.ImGearDocument');module.exports=BJ;},{"./../../IPCC.Util":28}],80:[function(require,module,exports){var da=require('./../../IPCC.Util').regClass;var Rv=function(){var jp=[];var aK=new IPCC.Web.UI.jq();var V=this;function auv(bP,J){if(J){var MD=new IPCC.Web.UI.ImGearDocumentEventArgs();MD.document=bP;MD.propertyName=J.get_propertyName();MD.length=2;V.bm('documentChanged',MD);}};this.Wc=function(azS){this.agb(jp.length,azS);};this.agb=function(aJ,bf){var ag;var cl=jp.length;if(aJ>jp.length||(aJ<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aJ,'document index is out of range');}for(ag=0;ag<cl;ag++){if(jp[ag]===bf){throw new IPCC.Web.UI.ImGearInvalidOperationException('The document instance object to be inserted already exists in the collection. You cannot use the same instance of a document object.');}}var ahQ=aK.getHandler('pageAdded');if(ahQ){bf.add_pageAdded(ahQ);}var ain=aK.getHandler('pageRemoved');if(ain){bf.add_pageRemoved(ain);}var aiT=aK.getHandler('pageChanged');if(aiT){bf.add_pageChanged(aiT);}bf.add_propertyChanged(auv);jp.splice(aJ,0,bf);var J=new IPCC.Web.UI.ImGearDocumentEventArgs();J.imGearDocument=bf;J.index=aJ;J.length=1;this.bm('documentAdded',J);};function lf(aJ){if(aJ>jp.length-1||(aJ<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aJ,'document index is out of range');}};this.Qs=function(aJ){lf(aJ);return jp[aJ];};this.ef=function(){return jp.length;};this.aHN=function(hT,cC){var aaD=[].concat(jp);var H;for(H=0;H<aaD.length;H++){hT.call(cC,aaD[H],H,this);}};this.aaH=function(aJ){lf(aJ);var J=new IPCC.Web.UI.ImGearDocumentEventArgs();J.imGearDocument=jp[aJ];J.length=1;jp[aJ].get_pages().removeAllPages();jp.splice(aJ,1);this.bm('documentRemoved',J);};this.azQ=function(){var H=0;while(jp.length>0){this.aaH(H);}};this.aAM=function(F){aK.addHandler('documentAdded',F);};this.aBX=function(F){aK.removeHandler('documentAdded',F);};this.aAq=function(F){aK.addHandler('documentRemoved',F);};this.aCs=function(F){aK.removeHandler('documentRemoved',F);};this.aAp=function(F){aK.addHandler('documentChanged',F);};this.aAI=function(F){aK.removeHandler('documentChanged',F);};this.Jd=function(F){aK.addHandler('pageAdded',F);};this.HX=function(F){aK.removeHandler('pageAdded',F);for(var ag=0;ag<jp.length;ag++){jp[ag].remove_pageAdded(F);}};this.KA=function(F){aK.addHandler('pageChanged',F);};this.Iw=function(F){aK.removeHandler('pageChanged',F);for(var ag=0;ag<jp.length;ag++){jp[ag].remove_pageChanged(F);}};this.IG=function(F){aK.addHandler('pageRemoved',F);};this.FA=function(F){aK.removeHandler('pageRemoved',F);for(var ag=0;ag<jp.length;ag++){jp[ag].remove_pageRemoved(F);}};this.bm=function(cL,J){var F=aK.getHandler(cL);if(F!==null){try{F(V,J);}catch(e){IPCC.iA.Qo('event raise, ImGearDocumentCollection, error: '+e.message);}}};return this;};Rv.prototype={addDocument:function(imGearDocument){this.Wc(imGearDocument);},insertDocument:function(index,imGearDocument){this.agb(index,imGearDocument);},forEach:function(method,context){this.lx(method,context);},getDocument:function(index){return this.Qs(index);},get_length:function(){return this.ef();},removeDocument:function(imGearDocument){this.aaH(imGearDocument);},removeAllDocuments:function(){this.azQ();},add_documentAdded:function(handler){this.aAM(handler);},remove_documentAdded:function(handler){this.aBX(handler);},add_documentRemoved:function(handler){this.aAq(handler);},remove_documentRemoved:function(handler){this.aCs(handler);},add_documentChanged:function(handler){this.aAp(handler);},remove_documentChanged:function(handler){this.aAI(handler);},add_pageAdded:function(handler){this.Jd(handler);},remove_pageAdded:function(handler){this.HX(handler);},add_pageRemoved:function(handler){this.IG(handler);},remove_pageRemoved:function(handler){this.FA(handler);},add_pageChanged:function(handler){this.KA(handler);},remove_pageChanged:function(handler){this.Iw(handler);}};Rv.registerClass=da;Rv.registerClass('IPCC.Web.UI.ImGearDocumentCollection');module.exports=Rv;},{"./../../IPCC.Util":28}],81:[function(require,module,exports){var da=require('./../../IPCC.Util').regClass;var Rj=function(){return this;};Rj.registerClass=da;Rj.prototype={};Rj.registerClass('IPCC.Web.UI.ImGearDocumentCreateArgs');module.exports=Rj;},{"./../../IPCC.Util":28}],82:[function(require,module,exports){var da=require('./../../IPCC.Util').regClass;var RO=function(){return this;};RO.registerClass=da;RO.prototype={};RO.registerClass('IPCC.Web.UI.ImGearDocumentEventArgs');module.exports=RO;},{"./../../IPCC.Util":28}],83:[function(require,module,exports){var axj=function(jL){var ba=0,de=0,aF=0,bj=0,nb=jL.href||"",aCc=jL.borderStyle||"Solid",jU=jL.borderThickness||0,BL=jL.borderPattern||[1],Kd=jL.borderHorizontalRadius||0,Kw=jL.borderHorizontalRadius||0,ko=jL.borderColor||"#0000FF",pS=jL.borderOpacity||255,C,K;if(typeof pS==='string'){pS=parseInt(pS,10);}if(jL.rectangle){ba=jL.rectangle.x;de=jL.rectangle.y;aF=jL.rectangle.width;bj=jL.rectangle.height;}C=new IPCC.Web.UI.Rectangle(ba,de,aF,bj);this.eH=function(){var aav=new IPCC.Web.UI.Rectangle(C.x,C.y,C.width,C.height);return aav;};this.DC=function(kx){C.x=kx.x;C.y=kx.y;C.width=kx.width;C.height=kx.height;};this.agX=function(){return nb;};this.avm=function(){return aCc;};this.avX=function(){return jU;};this.atY=function(){return BL;};this.aub=function(){return Kd;};this.aww=function(){return Kw;};this.auP=function(){return ko;};this.auy=function(){return pS;};this.LH=function(){return K;};this.aoq=function(awG){K=awG;};this.aAD=function(){return IPCC.T.aeu(nb);};};module.exports=axj;},{}],84:[function(require,module,exports){var jq=function jq(){if(arguments.length!==0){throw new IPCC.Web.UI.ImGearParameterCountException();}this.KB={};};jq.prototype.cS=function(dE,F){var cg=this.Sb(dE,true);cg[cg.length]=F;};jq.prototype.addHandler=function(dE,F){this.cS(dE,F);};jq.prototype.cY=function(dE,F){var sC=this.Sb(dE);if(!sC){return;}var aJ=IPCC.YQ(sC,F);if(aJ>=0){sC.splice(aJ,1);}};jq.prototype.removeHandler=function(dE,F){this.cY(dE,F);};jq.prototype.getHandler=function(dE){var sC=this.Sb(dE);if(!sC||(sC.length===0)){return null;}var cg=sC.slice();sC=cg;return function(source,args){for(var H=0,rn=sC.length;H<rn;H++){sC[H](source,args);}};};jq.prototype.Sb=function(dE,atd){if(!this.KB[dE]){if(!atd){return null;}this.KB[dE]=[];}return this.KB[dE];};module.exports=jq;},{}],85:[function(require,module,exports){var da=require('./../../IPCC.Util').regClass;var Ek=function(message,errorInfo){this.message=message;var V=this;if(errorInfo){for(var Wr in errorInfo){if(errorInfo.hasOwnProperty(Wr)){V[Wr]=errorInfo[Wr];}}}};Ek.prototype=new Error();Ek.registerClass=da;Ek.registerClass('IPCC.Web.UI.ImGearException');var Cu=function(statusCode,message,customErrorCode){var fR="IPCC.Web.UI.ImGearHttpException: ";if(message){fR+=message;}this.message=fR;this.statusCode=statusCode;this.customErrorCode=customErrorCode;};Cu.prototype=new Error();Cu.registerClass=da;Cu.registerClass('IPCC.Web.UI.ImGearHttpException');var sj=function(paramName,message){var fR="IPCC.Web.UI.ImGearArgumentException: "+(message?message:IPCC.kM.argument);if(paramName){if(typeof(paramName)!=="undefined"&&paramName!==null){fR+="\n"+IPCC.Web.AG(IPCC.kM.paramName,paramName);}}this.message=fR;this.paramName=paramName;};sj.prototype=new Error();sj.registerClass=da;sj.registerClass('IPCC.Web.UI.ImGearArgumentException');var Ct=function(paramName,message){var fR="IPCC.Web.UI.ImGearArgumentNullException: "+(message?message:IPCC.kM.argumentNull);if(paramName){if(typeof(paramName)!=="undefined"&&paramName!==null){fR+="\n"+IPCC.Web.AG(IPCC.Res.paramName,paramName);}}this.message=fR;this.paramName=paramName;};Ct.prototype=new Error();Ct.registerClass=da;Ct.registerClass('IPCC.Web.UI.ImGearArgumentNullException');var rW=function(paramName,actualValue,message){var fR="IPCC.Web.UI.ImGearArgumentOutOfRangeException: "+(message?message:IPCC.kM.argumentOutOfRange);if(paramName){if(typeof(paramName)!=="undefined"&&paramName!==null){fR+="\n"+IPCC.Web.AG(IPCC.kM.paramName,paramName);}}if(typeof(actualValue)!=="undefined"&&actualValue!==null){fR+="\n"+IPCC.Web.AG(IPCC.kM.actualValue,actualValue);}this.message=fR;this.paramName=paramName;this.actualValue=actualValue;};rW.prototype=new Error();rW.registerClass=da;rW.registerClass('IPCC.Web.UI.ImGearArgumentOutOfRangeException');var za=function(paramName,actualType,expectedType,message){var fR="IPCC.Web.UI.ImGearArgumentTypeException ";if(message){fR+=message;}else if(actualType&&expectedType){if(typeof(actualType.getName)==='function'&&typeof(expectedType.getName)==='function'){fR+=IPCC.Web.AG(IPCC.kM.argumentTypeWithTypes,actualType.getName(),expectedType.getName());}else{fR+="actualType = "+actualType+" expectedType =  "+expectedType;}}else{fR+=IPCC.kM.argumentType;}if(paramName){if(typeof(paramName)!=="undefined"&&paramName!==null){fR+="\n"+IPCC.Web.AG(IPCC.kM.paramName,paramName);}}this.message=fR;this.paramName=paramName;this.actualType=actualType;this.expectedType=expectedType;};za.prototype=new Error();za.registerClass=da;za.registerClass('IPCC.Web.UI.ImGearArgumentTypeException');var DS=function(paramName,message){var fR="IPCC.Web.UI.ImGearArgumentUndefinedException: "+(message?message:IPCC.kM.argumentUndefined);if(paramName){if(typeof(paramName)!=="undefined"&&paramName!==null){fR+="\n"+IPCC.Web.AG(IPCC.Res.paramName,paramName);}}this.message=fR;this.paramName=paramName;};DS.prototype=new Error();DS.registerClass=da;DS.registerClass('IPCC.Web.UI.ImGearArgumentUndefinedException');var Bb=function(message){var fR="IPCC.Web.UI.ImGearInvalidOperationException: "+(message?message:IPCC.kM.invalidOperation);this.message=fR;};Bb.prototype=new Error();Bb.registerClass=da;Bb.registerClass('IPCC.Web.UI.ImGearInvalidOperationException');var Bp=function(message){var fR="IPCC.Web.UI.ImGearNotImplementedException: "+(message?message:IPCC.kM.notImplemented);this.message=fR;};Bp.prototype=new Error();Bp.registerClass=da;Bp.registerClass('IPCC.Web.UI.ImGearNotImplementedException');var Bw=function(message){var fR="IPCC.Web.UI.ImGearParameterCountException: "+(message?message:IPCC.kM.parameterCount);this.message=fR;};Bw.prototype=new Error();Bw.registerClass=da;Bw.registerClass('IPCC.Web.UI.ImGearParameterCountException');module.exports={Ek:Ek,Cu:Cu,sj:sj,Ct:Ct,rW:rW,za:za,DS:DS,Bb:Bb,Bp:Bp,Bw:Bw};},{"./../../IPCC.Util":28}],86:[function(require,module,exports){var axO=function(){var Hn=[];this.azC=function(axz){Hn.push(axz);};this.di=function(){return Hn.length;};this.lx=function(hT,cC){IPCC.T.forEach(Hn,hT,cC);};this.azU=function(){if(Hn.length<1){return;}Hn=[];};return this;};module.exports=axO;},{}],87:[function(require,module,exports){var axx=function(){var HZ=new IPCC.Web.UI.ImGearHyperlinkCollection();this.Jm=function(){return HZ;};};module.exports=axx;},{}],88:[function(require,module,exports){var da=require('./../../IPCC.Util').regClass;var RE=function(aG){this.bf=undefined;var aR=0;var be=0,abl=0,adx=0;var as=0,aks=0,akL=0;var V=this;var aK=new IPCC.Web.UI.jq();this.aJh=undefined;this.gc={pU:0,aeK:false,qw:1000,NX:false};var fs=new IPCC.Web.UI.ImGearTextPage();var Sg=new IPCC.Web.UI.ImGearHyperlinkPage();var nc=0;var oJ=false;var Er=false,DM=0,DY=0;function alF(o){return!isNaN(o-0);};if(aG.pageNumber!==undefined){if(alF(aG.pageNumber)){aR=aG.pageNumber;}else{throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException("pageNumber","",'The value must be a number.');}}this.oO=function(){return aR;};this.aEZ=function(R){if(alF(aG.pageNumber)){aR=R;}};this.kS=function(){return be;};function ame(){if(!fs){fs=new IPCC.Web.UI.ImGearTextPage();}var arq=fs.gY();var oQ=be/DM,pd=as/DY;arq.aEj(oQ,pd);};function aoR(){var HZ=Sg.Jm();var oQ=be/DM,pd=as/DY;HZ.lx(function(gg){gg.DC(gg.eH().scale(oQ,pd));var ajc=gg.LH();ajc.set_rectangle(ajc.get_rectangle().scale(oQ,pd));});};this.Ot=function(R){be=R;if(Er&&be&&be!==DM&&as&&as!==DY){ame();aoR();Er=false;}};this.hX=function(){return as;};this.Oc=function(R){as=R;if(Er&&be&&be!==DM&&as&&as!==DY){ame();aoR();Er=false;}};this.afM=function(){return abl;};this.aga=function(R){abl=R;};this.aIG=function(){return aks;};this.adZ=function(R){aks=R;};this.aJt=function(){return adx;};this.aFv=function(R){adx=R;};this.aJm=function(){return akL;};this.aFG=function(R){akL=R;};this.atE=function(){return this.bf;};this.cd=function(){if(!fs){fs=new IPCC.Web.UI.ImGearTextPage();}return fs;};this.kE=function(){return nc;};this.yH=function(R){if(nc===R){return;}if(isNaN(R)){return;}nc=R;this.dq('serviceResponseTimeout');};this.jt=function(){return oJ;};this.ou=function(R){oJ=R;};this.lw=function(F){aK.addHandler('propertyChanged',F);};this.nd=function(F){aK.removeHandler('propertyChanged',F);};this.xG=function(F){aK.addHandler('textPageReady',F);};this.GB=function(F){aK.removeHandler('textPageReady',F);};this.agp=function(){return Sg;};this.abq=function(F){aK.addHandler('hyperlinkPageReady',F);};this.adX=function(F){aK.removeHandler('hyperlinkPageReady',F);};this.xh=function(F){aK.cS('textExtractionFailed',F);};this.GD=function(F){aK.cY('textExtractionFailed',F);};this.adY=function(hx){if(be===0&&as===0){Er=true;DM=hx.width;DY=hx.height;}};this.ahb=function(hx){if(!fs){fs=new IPCC.Web.UI.ImGearTextPage();}fs.aoz(hx.width);fs.aBK(hx.height);if(fs.gY().ef()>0){return;}else if(hx.errorCode){var mC=new IPCC.Web.UI.ImGearException(hx.errorDescription,{name:'Text Extraction'});var ca=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();ca.exception=mC;ca.pageNumber=V.get_pageNumber();V.bm('textExtractionFailed',ca);return;}var aqD=fs.gY();var Nm=false;var adL;function Iq(YU){return YU;};var pd=1;var oQ=1;if(hx.height&&hx.height>0&&as>0){if(hx.height!==as){pd=as/hx.height;}}if(hx.width&&hx.width>0&&be>0){if(hx.width!==be){oQ=be/hx.width;}}var ho;var afJ= -1;var Ma;var hN,AL;for(var H=0;H<hx.rectangles.length;H++){hN=hx.rectangles[H];AL=Iq(hx.text[H]);Nm=false;if(hN[2]===0){AL="\n";Nm=true;if(H>0){adL=hx.rectangles[H-1];hN[2]=adL[2];}}if(oQ===1&&pd===1){Ma=new IPCC.Web.UI.ImGearTextCharacter(hN[0],hN[1],hN[2],hN[3],AL,Nm);}else{Ma=new IPCC.Web.UI.ImGearTextCharacter(hN[0]*oQ,hN[1]*pd,hN[2]*oQ,hN[3]*pd,AL,Nm);}if(Ma){aqD.ayl(Ma);}if(ho===undefined||afJ!==hN[1]||hN[0]<ho.eH().x){if(ho){fs.ZP().aiZ(ho);}ho=new IPCC.Web.UI.ImGearTextSection();ho.DC(new IPCC.Web.UI.Rectangle(hN[0],hN[1],hN[2],hN[3]));ho.anC(H);}else{if(hN[0]+hN[2]-ho.eH().x>ho.eH().width){ho.eH().width=hN[0]+hN[2]-ho.eH().x;}}ho.aCQ(H);afJ=hN[1];}if(ho){fs.ZP().aiZ(ho);}fs.aDK(hx.text);if(hx.text.length>0){fs.LU(true);V.bm('textPageReady',{pageNumber:V.oO(),containsText:true});}else{fs.LU(false);V.bm('textPageReady',{pageNumber:V.oO(),containsText:false});}};this.agz=function(aee,MP,Na){if(!aee){return;}Sg.Jm().azU();var pd=1;var oQ=1;if(MP&&MP>0&&as>0){if(MP!==as){pd=as/MP;}}if(Na&&Na>0&&be>0){if(Na!==be){oQ=be/Na;}}IPCC.T.forEach(aee,function(adJ){var gg;switch(adJ.markType){case "DocumentHyperlink":gg=new IPCC.Web.UI.ImGearDocumentHyperlink(adJ.properties);gg.DC(gg.eH().scale(oQ,pd));if(!gg.aAD()){Sg.Jm().azC(gg);}break;default:break;}});V.bm('hyperlinkPageReady',{pageNumber:V.oO()});};this.aye=function(){V.Az();};this.Az=function(){if(!fs){fs=new IPCC.Web.UI.ImGearTextPage();}if(!V.bf){throw new IPCC.Web.UI.ImGearInvalidOperationException('You must add this Page to a valid ImGearDocument object which has a valid ImageServicePath property.');}if(fs.Cb()){return;}var afY=true;if(V.kE()===0){afY=false;}function Oa(aO){if(aO.pages){var bx;if(aO.pages.length>0){if(aO.pages[0].number!==V.oO()){for(var H=0;H<aO.pages.length;H++){if(aO.pages[H].number===V.oO()){bx=H;break;}}if(!bx){V.gc.NX=false;return;}}else{bx=0;}var hx=aO.pages[bx];V.gc.NX=true;if(aO.pages[bx].text&&aO.pages[bx].text.length>0){fs.LU(true);}else{fs.LU(false);}V.gc.qw=1000;V.adY(hx);V.ahb(hx);V.agz(hx.markup,hx.height,hx.width);return;}}var nI=V.gc.qw;if(!V.gc.NX){if(V.gc.pU<6){if(V.gc.pU<2){nI=nI+1000;}else{nI=nI+3000;}V.gc.pU++;V.gc.qw=nI;setTimeout(V.aye,nI);}else{V.gc.aeK=true;}}};function fz(aH){var ij=V.bf.ij,am;try{var hd;var nJ=aH.getResponseHeader("Accusoft-Data-Encrypted");if(nJ==='true'){var tm=IPCC.Web.hs.sP.tP(aH.getResponseHeader("Accusoft-Data-SK"));var aV=IPCC.Web.IV(tm,ij);var fu=IPCC.Web.Hw(aH);var uc=IPCC.Web.CS(fu,aV,ij);hd=IPCC.Web.hs.Gu.oP(uc);}else{hd=aH.responseText;}am=JSON.parse(hd);Oa(am);}catch(e){var ca=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();ca.exception=e;ca.pageNumber=V.get_pageNumber();V.bm('textExtractionFailed',ca);return;}};function fg(am){try{if(!am.response){throw new IPCC.Web.UI.ImGearHttpException(0,"Text extraction timeout");}else{if(am.response.statusText){throw new IPCC.Web.UI.ImGearHttpException(am.response.status,"Unable to obtain text, Error from the service = "+am.response.statusText);}else{throw new IPCC.Web.UI.ImGearHttpException(am.response.status,"Unable to obtain text from the service");}}}catch(e){var ca=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();ca.exception=e;ca.pageNumber=V.get_pageNumber();V.bm('textExtractionFailed',ca);return;}};var aP=V.get_pageNumber();var iR=V.bf.get_documentIdentifier();if(!(/^[\x00-\x7F]*$/.test(iR))){iR='e'+V.bf.get_encodedDocumentIdentifier();}else{iR='u'+encodeURIComponent(iR);}var hI=V.bf.so;var qR=V.bf.qR;var bE;if(V.jt()){bE=hI+'/Document/q/'+aP.toString()+'-'+aP.toString()+'/Text?DocumentID='+iR+'&iv='+qR;}else{bE=hI+'/Document/q/'+aP.toString()+'-'+aP.toString()+'/Text?DocumentID='+iR;}var gK={method:'GET',url:bE,headers:{'accept':'application/json'}};if(afY===true){gK.timeout=V.kE();}IPCC.T.ob.eB(gK).then(fz,fg);};this.cd=function(){if(!fs){fs=new IPCC.Web.UI.ImGearTextPage();}return fs;};this.aIt=function(R){if(typeof R.oY!=='function'){return;}fs=R;};this.afe=function(){fs=undefined;V.gc={pU:0,aeK:false,qw:1000,NX:false};Er=false;DM=0;DY=0;};this.LG=function(zn,zi){var V=this;function fz(aH){var am;am=JSON.parse(aH.responseText);if(am.imageWidth&&am.imageHeight){V.Ot(am.imageWidth);V.Oc(am.imageHeight);zn(am.imageWidth,am.imageHeight);}else{zi("Unable to obtain document information from the server");}};function fg(am){zi("Unable to obtain document information from the server");};if(V.kS()>0||V.hX()>0){zn(V.kS(),V.hX());}else{var rg=IPCC.hn.sl(V.bf.get_documentIdentifier());if(!rg||rg===""){zi("Invalid encoded Identifier");}var tL='';if(!IPCC.uq.Jq()){tL='&ContentType=png';}var bE;if(!(/^[\x00-\x7F]*$/.test(rg))){bE=V.bf.so+'/Page/q/'+(V.get_pageNumber())+'/Attributes?DocumentID=e'+rg+tL;}else{bE=V.bf.so+'/Page/q/'+(V.get_pageNumber())+'/Attributes?DocumentID=u'+encodeURIComponent(V.bf.get_documentIdentifier())+tL;}IPCC.T.ob.eB({method:'GET',url:bE,headers:{'Content-Type':'application/json'}}).then(fz,fg);}};this.dq=function(ci){var F=aK.getHandler('propertyChanged');if(F){F(this,new IPCC.pV(ci));}};this.bm=function(cL,J){var F=aK.getHandler(cL);if(F!==null){try{F(V,J);}catch(e){IPCC.iA.Qo('event raise, ImGearPage, error: '+e.message);}}};return this;};RE.prototype={get_pageNumber:function(){var aI=this.oO();return aI;},get_pageWidth:function(){var aI=this.kS();return aI;},get_pageHeight:function(){var aI=this.hX();return aI;},get_textPage:function(){var aI=this.cd();return aI;},get_encryption:function(){var aI=this.jt();return aI;},set_encryption:function(value){this.ou(value);},get_hyperlinkPage:function(){return this.agp();},get_document:function(){var aI=this.atE();return aI;},add_propertyChanged:function(handler){this.lw(handler);},remove_propertyChanged:function(handler){this.nd(handler);},requestPageAttributes:function(attributesRetrievedCallback,attributesRetrievalFailedCallback){this.LG(attributesRetrievedCallback,attributesRetrievalFailedCallback);}};RE.registerClass=da;RE.registerClass('IPCC.Web.UI.ImGearPage');module.exports=RE;},{"./../../IPCC.Util":28}],89:[function(require,module,exports){var da=require('./../../IPCC.Util').regClass;var RH=function(){var V=this;var cR=[];var aK=new IPCC.Web.UI.jq();this.aGu=false;this.aGs=true;this.bf=undefined;this.ahj=function(bI){this.ahn(cR.length,bI);};function lf(aJ){if(aJ>cR.length-1||(aJ<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aJ,'page index is out of range in the page collection');}};this.ahn=function(aJ,bI){var ag;var cl=cR.length;if(aJ>cR.length||(aJ<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aJ,'index of the page Collection is out of range');}if(V.aGs&&V.aGu){if(cl>0){throw new IPCC.Web.UI.ImGearInvalidOperationException('You must first remove the existing selected page before adding a new one to the selected page collection).');}}for(ag=0;ag<cl;ag++){if(cR[ag]===bI){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot duplicate same page instance in a page collection).');}}if(V.bf){if(!bI.bf){bI.bf=V.bf;}}bI.add_propertyChanged(Ib);cR.splice(aJ,0,bI);var J=new IPCC.Web.UI.ImGearPageEventArgs();J.imGearPage=bI;J.length=1;V.bm('pageAdded',J);};this.jj=function(aJ){lf(aJ);var fr=cR[aJ];return fr;};this.anO=function(aJ,bI){lf(aJ);var Sv=cR[aJ];if(Sv===bI){return;}cR[aJ]=bI;var J=new IPCC.Web.UI.ImGearPageEventArgs();J.imGearPage=bI;J.length=1;this.bm('pageAdded',J);Sv.remove_propertyChanged(Ib);var yT=new IPCC.Web.UI.ImGearPageEventArgs();yT.imGearPage=Sv;yT.length=1;this.bm('pageRemoved',yT);};this.ef=function(){return cR.length;};this.lx=function(hT,cC){var aaj=[].concat(cR);var H;for(H=0;H<aaj.length;H++){hT.call(cC,aaj[H],H,this);}};this.acq=function(aJ){lf(aJ);var J=new IPCC.Web.UI.ImGearPageEventArgs();J.imGearPage=cR[aJ];cR[aJ].remove_propertyChanged(Ib);J.length=1;cR.splice(aJ,1);V.bm('pageRemoved',J);};this.aGV=function(bI){var di=cR.length;for(var H=0;H<di;H++){if(bI===cR[H]){return H;}}return-1;};this.aAz=function(){var H=0;while(cR.length>0){this.acq(H);}};function Ib(bP,J){var yT=new IPCC.Web.UI.ImGearPageEventArgs();yT.imGearPage=bP;yT.length=1;V.bm('pageChanged',yT);};this.Jd=function(F){aK.addHandler('pageAdded',F);};this.HX=function(F){aK.removeHandler('pageAdded',F);};this.KA=function(F){aK.addHandler('pageChanged',F);};this.Iw=function(F){aK.removeHandler('pageChanged',F);};this.IG=function(F){aK.addHandler('pageRemoved',F);};this.FA=function(F){aK.removeHandler('pageRemoved',F);};this.bm=function(cL,J){var F=aK.getHandler(cL);if(F!==null){try{F(V,J);}catch(e){IPCC.iA.Qo('raise event error in ImGearPageCollection, Error: '+e.message);}}};return this;};RH.prototype={addPage:function(page){this.ahj(page);},insertPage:function(index,page){this.ahn(index,page);},forEach:function(method,context){this.lx(method,context);},getPage:function(index){return this.jj(index);},setPage:function(index,page){this.anO(index,page);},get_length:function(){return this.ef();},removePage:function(index){this.acq(index);},removeAllPages:function(){this.aAz();},add_pageAdded:function(handler){this.Jd(handler);},remove_pageAdded:function(handler){this.HX(handler);},add_pageChanged:function(handler){this.KA(handler);},remove_pageChanged:function(handler){this.Iw(handler);},add_pageRemoved:function(handler){this.IG(handler);},remove_pageRemoved:function(handler){this.FA(handler);}};RH.registerClass=da;RH.registerClass('IPCC.Web.UI.ImGearPageCollection');module.exports=RH;},{"./../../IPCC.Util":28}],90:[function(require,module,exports){var et=require('./../../IPCC.Util').regEnum;var QJ=function(){};QJ.registerEnum=et;QJ.prototype={UnRequested:0,RequestPending:1,Known:2,Failed:3};QJ.registerEnum('IPCC.Web.UI.ImGearPageCountStatus',false);module.exports=QJ;},{"./../../IPCC.Util":28}],91:[function(require,module,exports){var da=require('./../../IPCC.Util').regClass;var Rf=function(){};Rf.registerClass=da;Rf.prototype={};Rf.registerClass('IPCC.Web.UI.ImGearPageCreateArgs');module.exports=Rf;},{"./../../IPCC.Util":28}],92:[function(require,module,exports){var da=require('./../../IPCC.Util').regClass;var Sc=function(){return this;};Sc.prototype={};Sc.registerClass=da;Sc.registerClass('IPCC.Web.UI.ImGearPageEventArgs');module.exports=Sc;},{"./../../IPCC.Util":28}],93:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var RK=function(){return this;};RK.registerClass=da;RK.prototype={};RK.registerClass('IPCC.Web.UI.ImGearPageOpenFailedEventArgs');module.exports=RK;},{"../../IPCC.Util":28}],94:[function(require,module,exports){var axZ=function(ba,de,aF,bj,AL,aAO){this.bC=new IPCC.Web.UI.Rectangle(ba,de,aF,bj);this.kj=AL;this.HI=aAO;this.avW=function(){return AL;};this.sa=function(){var aav=new IPCC.Web.UI.Rectangle(this.bC.x,this.bC.y,this.bC.width,this.bC.height);return aav;};this.aIu=function(){return this.HI;};};module.exports=axZ;},{}],95:[function(require,module,exports){var ayN=function(){var iw=[];this.ayl=function(ku){iw.push(new IPCC.Web.UI.ImGearTextCharacter(ku.bC.x,ku.bC.y,ku.bC.width,ku.bC.height,ku.kj,ku.HI));};this.aGW=function(atW){function jO(ku){iw.push(ku);};atW.forEach(jO,{});};this.ayQ=function(){var acr=[];for(var ag=0;ag<this.ef();ag++){var QR=this.kn(ag).bC;var C=[];C.push(QR.x);C.push(QR.y);C.push(QR.width);C.push(QR.height);acr.push(C);}return acr;};this.aGQ=function(aJ,akB){var ag;var cl=iw.length;if(aJ>iw.length||(aJ<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aJ,'index of theText Character Collection is out of range');}for(ag=0;ag<cl;ag++){if(iw[ag]===akB){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot duplicate same aO Character instance in a ku collection).');}}iw.splice(aJ,0,akB);};this.aEj=function(aaV,abU){IPCC.T.forEach(iw,function(kj){kj.bC.width=kj.bC.width*aaV;kj.bC.height=kj.bC.height*abU;kj.bC.x=kj.bC.x*aaV;kj.bC.y=kj.bC.y*abU;});};this.lx=function(hT,cC){var Xn=[].concat(iw);var H;for(H=0;H<Xn.length;H++){hT.call(cC,new IPCC.Web.UI.ImGearTextCharacter(Xn[H].x,Xn[H].y),H,this);}};function lf(aJ){if(aJ>iw.length-1||(aJ<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aJ);}};this.kn=function(aJ){lf(aJ);var qS=iw[aJ];return new IPCC.Web.UI.ImGearTextCharacter(qS.bC.x,qS.bC.y,qS.bC.width,qS.bC.height,qS.kj,qS.HI);};this.aHK=function(aJ,ku){lf(aJ);var DE=iw[aJ];if(DE.bC.x===ku.bC.x&&DE.bC.y===ku.y&&DE.bC.width===ku.bC.width&&DE.bC.height===ku.bC.height&&DE.kj===ku.kj&&DE.HI===ku.HI){return;}iw[aJ]=ku;};this.ef=function(){return iw.length;};this.aHh=function(aJ){lf(aJ);iw.splice(aJ,1);};this.aHW=function(){if(iw.length<1){return;}iw=[];};return this;};module.exports=ayN;},{}],96:[function(require,module,exports){var ayq=function(){var aud=new IPCC.Web.UI.ImGearTextCharacterCollection();var Zy=false;var akU=false;var UK="";var wE=new IPCC.Web.UI.ImGearTextSectionCollection();var ZH=false;var aF=0;var bj=0;this.gY=function(){return aud;};this.oY=function(){return Zy;};this.LU=function(R){akU=true;if(R===Zy){return;}if((R===true)||(R===false)){Zy=R;}};this.Cb=function(){return akU;};this.Ei=function(){return UK;};this.aDK=function(R){if(R===UK){return;}UK=R;};this.ZP=function(){return wE;};this.axA=function(){return ZH;};this.aig=function(R){if(R===ZH){return;}if((R===true)||(R===false)){ZH=R;}};this.ayK=function(){return aF;};this.aoz=function(R){if(R===aF){return;}aF=R;};this.aAh=function(){return bj;};this.aBK=function(R){if(R===bj){return;}bj=R;};};module.exports=ayq;},{}],97:[function(require,module,exports){var axS=function(){var C=null;var aP=0;var cc=0;this.eH=function(){return C;};this.DC=function(R){C=R;};this.aje=function(){return aP;};this.anC=function(R){aP=R;};this.agL=function(){return cc;};this.aCQ=function(R){cc=R;};};module.exports=axS;},{}],98:[function(require,module,exports){var ayd=function(){var wE=[];this.aiZ=function(ho){wE.push(ho);};function lf(aJ){if(aJ>wE.length-1||(aJ<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aJ);}};this.ayM=function(aJ){lf(aJ);return wE[aJ];};this.ef=function(){return wE.length;};return this;};module.exports=ayd;},{}],99:[function(require,module,exports){var et=require('./../../IPCC.Util').regEnum;var KV=function(){if(arguments.length!==0){throw new IPCC.Web.UI.ImGearParameterCountException();}throw new IPCC.Web.UI.ImGearNotImplementedException();};KV.registerEnum=et;KV.prototype={backspace:8,tab:9,enter:13,esc:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,del:127};KV.registerEnum("IPCC.Web.UI.Key");module.exports=KV;},{"./../../IPCC.Util":28}],100:[function(require,module,exports){var et=require('../../IPCC.Util').regEnum;var Nf=function(){};Nf.registerEnum=et;Nf.prototype={Pointer:0,Solid:1,Open:2,PointerSolid:3,None:4};Nf.registerEnum('IPCC.Web.UI.LineHeadType',false);module.exports=Nf;},{"../../IPCC.Util":28}],101:[function(require,module,exports){var et=require('../../IPCC.Util').regEnum;var NR=function(){};NR.registerEnum=et;NR.prototype={Solid:0,Dash:1,Dot:2,DashDot:3,DashDotDot:4};NR.registerEnum('IPCC.Web.UI.LineStyle',false);module.exports=NR;},{"../../IPCC.Util":28}],102:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var Ns=function(){return this;};Ns.registerClass=da;Ns.prototype={};Ns.registerClass('IPCC.Web.UI.LogItemEventArgs');module.exports=Ns;},{"../../IPCC.Util":28}],103:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var LO=function(type){var bO=type;type=undefined;var sJ=new Date();var rX=new Date();var bJ=null;var C;var aW;var cr;var dg=new IPCC.Web.UI.Data();var aK=new IPCC.Web.UI.jq();var V=this;var hV;this.eF=function(jo,ci){if((hV&jo)===0){throw new IPCC.Web.UI.ImGearInvalidOperationException(ci+' is not a valid property for this type of Mark.');}};if(bO===IPCC.Web.UI.MarkType.SignatureText){this.iI='#000000';this.ig=IPCC.Web.UI.LineStyle.Solid;this.es=0;}else{this.iI='#000000';this.ig=IPCC.Web.UI.LineStyle.Solid;this.es=1;}this.dv=255;this.lj=IPCC.Web.UI.MarkInteractionMode.Full;var jV=false;switch(bO){case IPCC.Web.UI.MarkType.Line:jV=true;aW=new IPCC.Web.UI.PointCollection();aW.addPoint({x:0,y:0});aW.addPoint({x:0,y:0});hV=1;this.iI='#18385F';this.es=6;break;case IPCC.Web.UI.MarkType.Polyline:jV=true;this.uN=false;aW=new IPCC.Web.UI.PointCollection();hV=2;this.es=2;break;case IPCC.Web.UI.MarkType.Rectangle:C=new IPCC.Web.UI.Rectangle(0,0,0,0);hV=4;this.cP='#FB0404';this.es=4;break;case IPCC.Web.UI.MarkType.Ellipse:C=new IPCC.Web.UI.Rectangle(0,0,0,0);hV=8;this.cP='#FB0404';this.es=4;break;case IPCC.Web.UI.MarkType.Polygon:aW=new IPCC.Web.UI.PointCollection();hV=16;break;case IPCC.Web.UI.MarkType.Text:this.Dy='#000000';this.zE=false;this.rI=IPCC.Web.UI.LineStyle.Solid;this.CZ=1;this.me=new IPCC.Web.UI.Point(0,0);this.Be=IPCC.Web.UI.CalloutType.Triangle;this.yC=false;this.gM='Arial';this.cs=12;this.cG=IPCC.Web.UI.FontStyle.Regular;this.ig=IPCC.Web.UI.LineStyle.Solid;this.fU=0;C=new IPCC.Web.UI.Rectangle(0,0,0,0);this.aO='';this.ik=IPCC.Web.UI.HorizontalAlignment.Left;this.xE=IPCC.Web.UI.VerticalAlignment.Top;this.qn='#000000';this.yw=255;this.yk=IPCC.Web.UI.Orientation.TopLeft;this.fM=[];this.es=4;this.dv=127;this.cP='#FFFFFF';hV=32;break;case IPCC.Web.UI.MarkType.Stamp:C=new IPCC.Web.UI.Rectangle(0,0,0,0);hV=128;break;case IPCC.Web.UI.MarkType.Highlight:C=new IPCC.Web.UI.Rectangle(0,0,0,0);this.aD='';this.iq='n';this.aP=0;this.bZ='';this.cq=0;this.dv=127;hV=256;break;case IPCC.Web.UI.MarkType.HighlightText:C=new IPCC.Web.UI.Rectangle(0,0,0,0);this.aD='';this.iq='n';this.aP=0;this.bZ='';this.cq=0;this.dv=127;this.cP='#FFFF00';hV=512;this.fM=[];this.by=[];break;case IPCC.Web.UI.MarkType.Freehand:C=new IPCC.Web.UI.Rectangle(0,0,0,0);hV=64;this.es=4;this.iI='#000000';this.jD=false;this.UD=1;this.Uz=1;this.uD='M0,0';break;case IPCC.Web.UI.MarkType.SignaturePath:C=new IPCC.Web.UI.Rectangle(0,0,0,0);hV=1024;this.ik=IPCC.Web.UI.HorizontalAlignment.Center;this.es=4;this.iI='#000000';this.jD=false;this.UD=1;this.Uz=1;this.uD='M0,0';break;case IPCC.Web.UI.MarkType.SignatureText:C=new IPCC.Web.UI.Rectangle(0,0,0,0);hV=2048;this.ik=IPCC.Web.UI.HorizontalAlignment.Center;this.aO='John Doe';this.qn='#000000';this.cP='#000000';this.gM="";break;case IPCC.Web.UI.MarkType.RectangleRedaction:C=new IPCC.Web.UI.Rectangle(0,0,0,0);hV=4096;this.gM='Arial';this.cs=8;this.cG=IPCC.Web.UI.FontStyle.Regular;this.aO='';this.ik=IPCC.Web.UI.HorizontalAlignment.Center;this.xE=IPCC.Web.UI.VerticalAlignment.Center;this.cP='#000000';this.qn='#FFFFFF';this.yw=255;this.yk=IPCC.Web.UI.Orientation.TopLeft;break;case IPCC.Web.UI.MarkType.TextSelectionRedaction:C=new IPCC.Web.UI.Rectangle(0,0,0,0);this.by=[];this.aD='';this.ew='';this.aO='';this.gM='Arial';this.cs=8;this.aP=0;this.cq=0;hV=8192;this.fM=[];break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:C=new IPCC.Web.UI.Rectangle(0,0,0,0);this.nb='';this.es=2;this.bZ='';this.aD='';this.iq='n';this.aP=0;this.cq=0;this.cP='#3B00FF';hV=1<<14;this.fM=[];this.by=[];break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:C=new IPCC.Web.UI.Rectangle(0,0,0,0);hV=16384;this.bV='';this.qi='';break;case IPCC.Web.UI.MarkType.DocumentHyperlink:C=new IPCC.Web.UI.Rectangle(0,0,0,0);this.nb='';this.Ml='';this.BL='';this.Kd=0;this.Kw=0;this.pS=255;hV=32768;break;case IPCC.Web.UI.MarkType.TextLine:hV=65536;C=new IPCC.Web.UI.Rectangle(0,0,0,0);this.ik=IPCC.Web.UI.HorizontalAlignment.Left;this.aO='';this.qn='#000000';this.gM="Courier New";this.es=1;this.jD=true;this.fU=0;this.Fs=0;this.IC=false;var hL=IPCC.T.uJ("M",this.gM,{uw:'pre'});this.zv=hL.width;this.zD=hL.height;this.iP=null;this.eV=0;this.cP='transparent';this.iI='transparent';break;case IPCC.Web.UI.MarkType.TextAreaSignature:this.Dy='#000000';this.zE=false;this.rI=IPCC.Web.UI.LineStyle.Solid;this.CZ=1;this.me=new IPCC.Web.UI.Point(0,0);this.Be=IPCC.Web.UI.CalloutType.Triangle;this.yC=false;this.gM='Courier New';this.eV=0;this.fU=0;this.cs=12;this.cG=IPCC.Web.UI.FontStyle.Regular;C=new IPCC.Web.UI.Rectangle(0,0,0,0);this.aO='';this.ik=IPCC.Web.UI.HorizontalAlignment.Left;this.xE=IPCC.Web.UI.VerticalAlignment.Top;this.qn='#000000';this.yw=255;this.yk=IPCC.Web.UI.Orientation.TopLeft;this.fM=[];this.es=1;this.jD=false;this.cP='transparent';this.iI='transparent';this.dv=0;hV=1<<18;break;case IPCC.Web.UI.MarkType.Strikethrough:C=new IPCC.Web.UI.Rectangle(0,0,0,0);this.aD='';this.iI='#000000';this.es=2;this.iq='n';this.aP=0;this.bZ='';this.cq=0;hV=1<<17;this.fM=[];this.by=[];break;default:throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('type',bO);}if(bO!==IPCC.Web.UI.MarkType.SignaturePath&&bO!==IPCC.Web.UI.MarkType.Freehand&&bO!==IPCC.Web.UI.MarkType.SignatureText&&bO!==IPCC.Web.UI.MarkType.DocumentHyperlink&&bO!==IPCC.Web.UI.MarkType.HighlightText&&bO!==IPCC.Web.UI.MarkType.Strikethrough&&bO!==IPCC.Web.UI.MarkType.TextLine){if(jV){this.JK=15;this.IU=25;this.mx=IPCC.Web.UI.LineHeadType.None;this.AW='#000000';this.GO=15;this.HL=25;this.GM=IPCC.Web.UI.LineHeadType.None;}else{this.IK=true;this.jD=true;if(bO===IPCC.Web.UI.MarkType.Highlight){this.jD=false;this.dv=100;}}}this.abt=IPCC.Web.UI.aun++;this.ce=true;this.aZ={};this.cB=[];var Lq=false;function aqQ(bP,J){V.bm('commentAdded',J);};function aqt(bP,J){V.bm('commentRemoved',J);};function OD(bP,J){V.bm('commentChanged',J);};cr=new IPCC.Web.UI.Conversation(V);cr.add_commentAdded(aqQ);cr.add_commentChanged(OD);cr.add_commentRemoved(aqt);this.bm=function(cL,J){var F=aK.getHandler(cL);if(F!==null){F(this,J);}};function VB(bP,J){var aef='points';if(bO===IPCC.Web.UI.MarkType.Line){aef=J.index===0?'startPoint':'endPoint';}V.dq(aef,J);};if(aW){aW.add_pointAdded(VB);aW.add_pointChanged(VB);aW.add_pointRemoved(VB);}this.jd=function(){return bO;};this.afZ=function(){return sJ;};this.ajk=function(R){sJ=R;};this.ahp=function(){return rX;};this.VP=function(R){rX=R;};this.ee=function(){return bJ;};this.na=function(value){if(bJ!==value){bJ=value;this.dq('artPage');}};this.iM=function(){return Lq;};this.jP=function(R){Lq=R;};this.amu=function(){var lM=new IPCC.Web.UI.Rectangle(0,0,0,0);switch(bO){case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:case IPCC.Web.UI.MarkType.Polygon:return aW.sa();case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Ellipse:case IPCC.Web.UI.MarkType.Stamp:case IPCC.Web.UI.MarkType.Highlight:case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.DocumentHyperlink:case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.SignatureText:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:case IPCC.Web.UI.MarkType.Freehand:case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:case IPCC.Web.UI.MarkType.Strikethrough:return C.clone();case IPCC.Web.UI.MarkType.Text:var iJ=C.x+C.width,ib=C.y+C.height;var akw=C.x+this.me.x,ajY=C.y+this.me.y;lM.x=Math.min(C.x,Math.min(iJ,akw));lM.y=Math.min(C.y,Math.min(ib,ajY));lM.width=Math.max(C.x,Math.max(iJ,akw))-lM.x;lM.height=Math.max(C.y,Math.max(ib,ajY))-lM.y;break;}return lM;};this.eH=function(){return C.clone();};this.xC=function(R){this.Da(16384,'image','bV',R);};this.cz=function(){return this.bV;};this.re=function(){return aW;};this.auE=function(){return cr;};this.vu=function(){return dg;};this.DC=function(R){var tc;if(!C.equals(R)){C=new IPCC.Web.UI.Rectangle(R.x,R.y,R.width,R.height);if(bO===IPCC.Web.UI.MarkType.Stamp||bO===IPCC.Web.UI.MarkType.SignatureText||bO===IPCC.Web.UI.MarkType.TextLine){if(document.documentMode<9){tc=0;if(C.width>=C.height){tc=(C.width/14)/2;}else{tc=C.width/15;}if(tc*15>=C.width){tc=(C.width/15)/2;}this.stampSize=Math.round(tc);}else{var textFontSize=(C.width/6);if(textFontSize>C.height){textFontSize=(C.height-(C.height/6));}var nR=this.get_text();if(!nR){nR=(bO===IPCC.Web.UI.MarkType.Stamp)?'APPROVED':'';}tc=nR.length*textFontSize;if(tc>C.width){textFontSize=((C.width/nR.length));}var Fs=Math.round(textFontSize);this.stampSize=Fs.toString();}}this.dq('rectangle');}};this.ly=function(){return this.abt;};this.Ii=function(fL,eN){if(fL!==0||eN!==0){switch(bO){case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:case IPCC.Web.UI.MarkType.Polygon:aW.anj(fL,eN);break;case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Ellipse:case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.Stamp:case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.SignatureText:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:case IPCC.Web.UI.MarkType.Freehand:case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:case IPCC.Web.UI.MarkType.Freehand:if(bO===IPCC.Web.UI.MarkType.RectangleRedaction&&this.aD!==undefined){break;}C.x+=fL;C.y+=eN;this.dq('rectangle');break;case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.Highlight:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.Strikethrough:break;}}};this.Yo=function(UM){if(this.fM&&UM!==this.fM){while(this.fM.length>0){this.fM.pop();}if(UM){this.fM=UM.slice(0);}this.bm('markTextSelectionChanged',{});}};this.JQ=function(F){if(this.fM){aK.addHandler('markTextSelectionChanged',F);}};this.Gz=function(F){if(this.fM){aK.removeHandler('markTextSelectionChanged',F);}};this.vn=function(F){aK.addHandler('commentAdded',F);};this.Du=function(F){aK.removeHandler('commentAdded',F);};this.vC=function(F){aK.addHandler('commentRemoved',F);};this.DN=function(F){aK.removeHandler('commentRemoved',F);};this.tj=function(F){aK.addHandler('commentChanged',F);};this.tK=function(F){aK.removeHandler('commentChanged',F);};this.lw=function(F){aK.addHandler('propertyChanged',F);};this.nd=function(F){aK.removeHandler('propertyChanged',F);};this.dq=function(ci){var F=aK.getHandler('propertyChanged');if(F){F(this,new IPCC.pV(ci));}};this.lw(function(K){K.VP(new Date());});return this;};LO.prototype={toString:function(){switch(this.get_type()){case IPCC.Web.UI.MarkType.Line:return 'Line Mark from '+this.re().getPoint(0)+' to '+this.re().getPoint(1);case IPCC.Web.UI.MarkType.Polyline:return 'Polyline Mark with '+this.re().ef()+' vertices';case IPCC.Web.UI.MarkType.Rectangle:return 'Rectangle Mark at '+this.eH();case IPCC.Web.UI.MarkType.RectangleRedaction:return 'Rectangle Redaction Mark at '+this.eH();case IPCC.Web.UI.MarkType.Ellipse:return 'Ellipse Mark at '+this.eH();case IPCC.Web.UI.MarkType.Polygon:return 'Polygon Mark with '+this.re().ef()+' vertices';case IPCC.Web.UI.MarkType.Text:return 'Text Mark, "'+this.aO+'", at '+this.eH();case IPCC.Web.UI.MarkType.Stamp:return 'Stamp Mark at '+this.eH();case IPCC.Web.UI.MarkType.Highlight:return 'Rectangle Mark at '+this.eH();case IPCC.Web.UI.MarkType.HighlightText:return 'Highlight Mark at '+this.eH();case IPCC.Web.UI.MarkType.TextSelectionRedaction:return 'Text Selection Redaction at '+this.eH();case IPCC.Web.UI.MarkType.TextSelectionRedaction:return 'Text Hyperlink Annotation at '+this.eH();case IPCC.Web.UI.MarkType.TextSelectionRedaction:return 'Document Hyperlink at '+this.eH();case IPCC.Web.UI.MarkType.SignaturePath:return 'Signature Path Mark, "'+this.uD+'", at '+this.eH();case IPCC.Web.UI.MarkType.Freehand:return 'Freehand Mark, "'+this.uD+'", at '+this.eH();case IPCC.Web.UI.MarkType.SignatureText:return 'Signature Text Mark at '+this.eH();case IPCC.Web.UI.MarkType.TextLine:return 'Text Line Mark at '+this.eH();case IPCC.Web.UI.MarkType.TextAreaSignature:return 'Text Area Signature Mark at '+this.eH();case IPCC.Web.UI.MarkType.ImageStampAnnotation:return 'ImageStamp Mark at '+this.eH();case IPCC.Web.UI.MarkType.ImageStampRedaction:return 'ImageStamp Redaction Mark at '+this.eH();case IPCC.Web.UI.MarkType.Strikethrough:return 'Strikethrough Mark at '+this.eH();}return 'Mark';},initializeDates:function(sJ,rX){IPCC.aA.jn(sJ,"dateCreated");IPCC.aA.jn(rX,"dateModified");this.ajk(sJ);this.VP(rX);},get_dateCreated:function(){return this.afZ();},get_dateModified:function(){return this.ahp();},kI:function(jo,ci,kD,R){this.eF(jo,ci);if(this[kD]!==R){this[kD]=R;this.dq(ci);}},JB:function(jo,ci,kD,R){IPCC.aA.aai(R,ci);this.kI(jo,ci,kD,R);},yn:function(jo,ci,kD,R){IPCC.aA.iW(R,ci);this.kI(jo,ci,kD,R);},yB:function(jo,ci,kD,R,wI,ww){IPCC.aA.kf(R,ci,wI,ww);this.kI(jo,ci,kD,R);},Yk:function(jo,ci,kD,R,wI,ww){IPCC.aA.mt(R,ci,wI,ww);this.kI(jo,ci,kD,R);},Da:function(jo,ci,kD,R){IPCC.aA.bO(R,ci,'string');this.kI(jo,ci,kD,R);},uf:function(jo,ci,kD,R,jk){IPCC.aA.jk(R,ci,jk);this.kI(jo,ci,kD,R);},anM:function(jo,ci,kD,R,jk){IPCC.aA.jk(R,ci,jk,true);this.kI(jo,ci,kD,R);},aoT:function(jo,ci,kD,R){IPCC.aA.bH(R,ci);this.kI(jo,ci,kD,R);},get_artPage:function(){return this.ee();},get_boundingRectangle:function(){return this.amu();},get_selected:function(){var bJ=this.ee();if(!bJ){return false;}var dX=bJ.BZ();return dX.contains(this);},set_selected:function(value){var bJ=this.ee();if(bJ){if(this.lj!==IPCC.Web.UI.MarkInteractionMode.SelectionDisabled|| !value){var dX=bJ.BZ();if(value!==dX.contains(this)){if(value){dX.Qm(this);}else{dX.ws(this);}this.dq('selected');}}}else{if(value){throw new IPCC.Web.UI.ImGearInvalidOperationException('A Mark cannot be selected unless it is associated with an ArtPage.');}}},get_calloutLineColor:function(){this.eF(32,'calloutLineColor');return this.Dy;},set_calloutLineColor:function(value){this.JB(32,'calloutLineColor','Dy',value);},get_calloutLineIsDistinct:function(){this.eF(32,'calloutLineIsDistinct');return this.zE;},set_calloutLineIsDistinct:function(value){this.kI(32,'calloutLineIsDistinct','zE',value);},get_calloutLineStyle:function(){this.eF(32,'calloutLineStyle');return this.rI;},set_calloutLineStyle:function(value){this.uf(32,'calloutLineStyle','rI',value,IPCC.Web.UI.LineStyle);},get_calloutLineWidth:function(){this.eF(32,'calloutLineWidth');return this.CZ;},set_calloutLineWidth:function(value){this.yB(32,'calloutLineWidth','CZ',value,0,50);},get_calloutPoint:function(){this.eF(32,'calloutPoint');return this.me;},set_calloutPoint:function(value){this.aoT(32,'calloutPoint','me',value);},get_calloutType:function(){this.eF(32,'calloutType');return this.Be;},set_calloutType:function(value){this.uf(32,'calloutType','Be',value,IPCC.Web.UI.CalloutType);},get_calloutVisible:function(){this.eF(32,'calloutVisible');return this.yC;},set_calloutVisible:function(value){if(!this.yC&&value&&this.jd()===IPCC.Web.UI.MarkType.Text){if(this.me.x===0&&this.me.y===0){var C=this.eH();this.set_calloutPoint({x:C.width,y:C.height*1.5});}}this.kI(32,'calloutVisible','yC',value);},get_endHeadAngle:function(){this.eF(3,'endHeadAngle');return this.JK;},set_endHeadAngle:function(value){this.yB(3,'endHeadAngle','JK',value,0,180);},get_endHeadLength:function(){this.eF(3,'endHeadLength');return this.IU;},set_endHeadLength:function(value){this.yB(3,'endHeadLength','IU',value,0,100);},get_endHeadType:function(){this.eF(3,'endHeadType');return this.mx;},set_endHeadType:function(value){this.uf(3,'endHeadType','mx',value,IPCC.Web.UI.LineHeadType);},get_href:function(){this.eF(1<<14|1<<15,'href');return this.nb;},set_href:function(value){this.Da(1<<14|1<<15,'href','nb',value);},has_unsafe_href:function(){return(! !this.nb&&IPCC.T.aeu(this.nb));},get_mask:function(){this.eF(65536,'mask');return this.iP;},set_mask:function(value){this.kI(65536,'mask','iP',value);},get_borderType:function(){this.eF(32768,'borderType');return this.Ml;},set_borderType:function(value){this.Da(32768,'borderType','Ml',value);},get_borderHorizontalRadius:function(){this.eF(32768,'borderHorizontalRadius');return this.Kd;},set_borderHorizontalRadius:function(value){this.yn(32768,'borderHorizontalRadius','Kd',value);},get_borderVerticalRadius:function(){this.eF(1<<15,'borderVerticalRadius');return this.Kw;},set_borderVerticalRadius:function(value){this.yn(32768,'borderVerticalRadius','Kw',value);},get_borderOpacity:function(){this.eF(32768,'pS');return this.pS;},set_borderOpacity:function(value){this.Yk(32768,'pS','pS',value,0,255);},get_borderPattern:function(){this.eF(32768,'BL');return this.BL;},set_borderPattern:function(value){this.kI(32768,'BL','BL',value,0,255);},get_fillColor:function(){this.eF(16380+(1<<14)+65536+(1<<18),'fillColor');return this.cP;},set_fillColor:function(value){this.JB(16380+(1<<14)+65536+(1<<18),'fillColor','cP',value);},get_fillVisible:function(){this.eF(16380,'fillVisible');return this.IK;},set_fillVisible:function(value){this.kI(16380,'fillVisible','IK',value);},get_fontName:function(){this.eF(6176+8192+65536+(1<<18),'fontName');return this.gM;},set_fontName:function(value){this.Da(6176+8192+65536+(1<<18),'fontName','gM',value);if(this.jd()===IPCC.Web.UI.MarkType.SignatureText||this.jd()===IPCC.Web.UI.MarkType.TextLine){var aX=(this.jd()===IPCC.Web.UI.MarkType.TextLine)?{uw:'pre'}:{};var hL=IPCC.T.uJ(this.aO,this.gM,aX);this.zv=hL.width;this.zD=hL.height;}if(this.jd()===IPCC.Web.UI.MarkType.TextLine){this.IC=false;}},get_fontSize:function(){this.eF(32+2048+4096+8192,'fontSize');return this.cs;},set_fontSize:function(value){this.yB(32+2048+4096+8192,'fontSize','cs',value,0.1,288);},get_fontStyle:function(){this.eF(6176+(1<<18),'fontStyle');return this.cG;},set_fontStyle:function(value){this.anM(6176+(1<<18),'fontStyle','cG',value,IPCC.Web.UI.FontStyle);},get_headFillColor:function(){this.eF(3,'headFillColor');return this.AW;},set_headFillColor:function(value){this.JB(3,'headFillColor','AW',value);},get_interactionMode:function(){this.eF(~0,'interactionMode');return this.lj;},set_interactionMode:function(value){this.uf(~0,'interactionMode','lj',value,IPCC.Web.UI.MarkInteractionMode);if(value===IPCC.Web.UI.MarkInteractionMode.SelectionDisabled){this.set_selected(false);}},get_maxLength:function(){this.eF(32+65536+(1<<18),'maxLength');return this.fU;},set_maxLength:function(value){this.yn(32+65536+(1<<18),'maxLength','fU',value);},get_maxFontSize:function(){this.eF(65536+(1<<18),'maxFontSize');return this.eV;},set_maxFontSize:function(value){this.yn(65536+(1<<18),'maxFontSize','eV',value);},get_isClosed:function(){this.eF(2,'isClosed');return this.uN;},set_isClosed:function(value){this.kI(2,'isClosed','uN',value);},get_lineColor:function(){return this.iI;},set_lineColor:function(value){this.JB(13567+32768+(1<<17)+65536+(1<<18),'lineColor','iI',value);},get_lineStyle:function(){return this.ig;},set_lineStyle:function(value){this.uf(63+32768,'lineStyle','ig',value,IPCC.Web.UI.LineStyle);},get_lineWidth:function(){return this.es;},set_lineWidth:function(value){this.yB(13567+32768+(1<<17)+65536+(1<<18),'lineWidth','es',value,0,50);},get_lineVisible:function(){this.eF(172+65536,'lineVisible');return this.jD;},set_lineVisible:function(value){this.kI(172+65536,'lineVisible','jD',value);},get_opacity:function(){return this.dv;},set_opacity:function(value){this.Yk(895+2048+1024+65536+(1<<18),'opacity','dv',value,0,255);},get_points:function(){this.eF(19,'points');return this.re();},get_conversation:function(){return this.auE();},get_data:function(){return this.vu();},get_image:function(){this.eF(16384,'image');return this.cz();},set_image:function(value){this.eF(16384,'image');this.xC(value);},get_rectangle:function(){this.eF((1<<18)+(1<<17)+65536+32768+16384+8192+4096+2048+1024+512+256+128+64+32+8+4,'rectangle');return this.eH();},set_rectangle:function(value){this.eF((1<<18)+(1<<17)+65536+32768+16384+8192+4096+2048+1024+512+256+128+64+32+8+4,'rectangle');IPCC.aA.C(value,'rectangle');this.DC(value);if(this.jd()===IPCC.Web.UI.MarkType.TextLine){this.IC=false;}},get_startHeadAngle:function(){this.eF(3,'startHeadAngle');return this.GO;},set_startHeadAngle:function(value){this.yB(3,'startHeadAngle','GO',value,0,180);},get_startHeadLength:function(){this.eF(3,'startHeadLength');return this.HL;},set_startHeadLength:function(value){this.yB(3,'startHeadLength','HL',value,0,100);},get_startHeadType:function(){this.eF(3,'startHeadType');return this.GM;},set_startHeadType:function(value){this.uf(3,'startHeadType','GM',value,IPCC.Web.UI.LineHeadType);},get_text:function(){this.eF(14496+65536+(1<<17)+(1<<18),'text');return this.aO;},set_text:function(value){if(this.aO===value){return;}this.Da(14496+65536+(1<<17)+(1<<18),'text','aO',value);if(this.jd()===IPCC.Web.UI.MarkType.SignatureText||this.jd()===IPCC.Web.UI.MarkType.TextLine){var aX=(this.jd()===IPCC.Web.UI.MarkType.TextLine)?{uw:'pre'}:{};var hL=IPCC.T.uJ(this.aO,this.gM,aX);this.zv=hL.width;this.zD=hL.height;}if(this.fM){while(this.fM.length>0){this.fM.pop();}}},get_textHorizontalAlignment:function(){this.eF(32+1024+2048+65536+(1<<18),'textHorizontalAlignment');return this.ik;},set_textHorizontalAlignment:function(value){this.uf(32+1024+2048+65536+(1<<18),'textHorizontalAlignment','ik',value,IPCC.Web.UI.HorizontalAlignment);},get_textVerticalAlignment:function(){this.eF(32,'textVerticalAlignment');return this.xE;},set_textVerticalAlignment:function(value){this.uf(32,'textVerticalAlignment','xE',value,IPCC.Web.UI.VerticalAlignment);},get_textColor:function(){this.eF(6176+65536+(1<<18),'textColor');return this.qn;},set_textColor:function(value){this.JB(6176+65536+(1<<18),'textColor','qn',value);},get_textOpacity:function(){this.eF(32,'textOpacity');return this.yw;},set_textOpacity:function(value){this.Yk(32,'textOpacity','yw',value,0,255);},get_textOrientation:function(){this.eF(32,'textOrientation');return this.yk;},set_textOrientation:function(value){this.uf(32,'textOrientation','yk',value,IPCC.Web.UI.Orientation);},get_type:function(){return this.jd();},get_visible:function(){return this.ce;},set_visible:function(value){this.kI((1<<17)+65536+32768+16384+8192+4096+2048+1024+512+256+128+64+63,'visible','ce',value);},get_markID:function(){return this.ly();},get_pathString:function(){return this.uD;},set_pathString:function(value){var uD=this.get_pathString();if(uD!==value){this.anb=true;}this.Da(1088,'pathString','uD',value);},get_pathWidth:function(){return this.UD;},set_pathWidth:function(value){this.yn(1088,'pathWidth','UD',value);},get_pathHeight:function(){return this.Uz;},set_pathHeight:function(value){this.yn(1088,'pathHeight','Uz',value);},get_startIndex:function(){this.eF((1<<17)+(1<<14)+8192+512,'startIndex');return this.aP;},set_startIndex:function(value){this.yn((1<<17)+(1<<14)+8192+512,'startIndex','aP',value);},get_textLength:function(){this.eF((1<<17)+(1<<14)+8192+512,'textLength');return this.cq;},set_textLength:function(value){this.yn((1<<17)+(1<<14)+8192+512,'textLength','cq',value);},add_propertyChanged:function(handler){this.lw(handler);},remove_propertyChanged:function(handler){this.nd(handler);},add_markTextSelectionChanged:function(handler){this.JQ(handler);},remove_markTextSelectionChanged:function(handler){this.Gz(handler);},move:function(deltaX,deltaY){IPCC.aA.iW(deltaX,'deltaX');IPCC.aA.iW(deltaY,'deltaY');this.Ii(deltaX,deltaY);},moveBackward:function(){if(this.ee()){var index=this.ee().oX(this);var cA=this.ee().afU();if(index>cA){this.ee().reorderMark(this,index-1);}}else{throw new IPCC.Web.UI.ImGearInvalidOperationException('A Mark cannot be reordered unless it is associated with an ArtPage.');}},moveForward:function(){if(this.ee()){var index=this.ee().oX(this);if(index<this.ee().WU()-1){this.ee().reorderMark(this,index+1);}}else{throw new IPCC.Web.UI.ImGearInvalidOperationException('A Mark cannot be reordered unless it is associated with an ArtPage.');}},moveToBack:function(){if(this.ee()){var cA=0;cA=this.ee().afU();this.ee().reorderMark(this,cA);}else{throw new IPCC.Web.UI.ImGearInvalidOperationException('A Mark cannot be reordered unless it is associated with an ArtPage.');}},moveToFront:function(){if(this.ee()){this.ee().reorderMark(this,this.ee().WU()-1);}else{throw new IPCC.Web.UI.ImGearInvalidOperationException('A Mark cannot be reordered unless it is associated with an ArtPage.');}},removeFromPage:function(){if(this.ee()){this.ee().removeMark(this);}},selectText:function(textRanges){this.Yo(textRanges);},aCT:function(){var fe={};var V=this;var aW,ZN,bH,C,H;function cQ(ci,KK){fe[KK]=V[ci];};var jV=false;var jM=false;var wR=false;switch(this.get_type()){case IPCC.Web.UI.MarkType.Line:jV=true;wR=true;fe.__type='LineMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.Polyline:jV=true;wR=true;fe.__type='PolyLineMark:#IPCC.Web';cQ('uN','ic');break;case IPCC.Web.UI.MarkType.Rectangle:jM=true;fe.__type='RectangleMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.RectangleRedaction:jM=true;fe.__type='RectangleRedactionMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.Ellipse:jM=true;fe.__type='EllipseMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.Polygon:wR=true;fe.__type='PolygonMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.Text:jM=true;fe.__type='TextMark:#IPCC.Web';cQ('Dy','clc');cQ('zE','clid');cQ('rI','cls');cQ('CZ','clw');cQ('Be','ct');cQ('yC','cv');cQ('gM','fn');cQ('cs','fs');cQ('cG','fst');cQ('ig','ls');cQ('aO','te');cQ('ik','tha');cQ('xE','tva');cQ('qn','tc');cQ('yw','to');cQ('yk','tor');bH=this.me;if(bH.x!==0||bH.y!==0){fe.cp={x:bH.x,y:bH.y};}break;case IPCC.Web.UI.MarkType.Stamp:jM=true;fe.__type='StampMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.Highlight:case IPCC.Web.UI.MarkType.HighlightText:jM=true;fe.__type='HighlightText:#IPCC.Web';break;}if(jV){cQ('JK','eha');cQ('IU','ehl');cQ('mx','eht');cQ('AW','hfc');cQ('GO','sha');cQ('HL','shl');cQ('GM','sht');}else{cQ('cP','fc');cQ('IK','fv');cQ('jD','lv');}if(jM){C=this.get_rectangle();fe.r={x:C.x,y:C.y,width:C.width,height:C.height};}fe.t=this.get_type();cQ('iI','lc');cQ('ig','ls');cQ('es','lw');cQ('dv','o');cQ('ce','v');if(wR){aW=this.re();ZN=[];for(H=0;H<aW.get_length();H++){bH=aW.getPoint(H);ZN.push({x:bH.x,y:bH.y});}fe.p=ZN;}return fe;},aAb:function(fe){var V=this;var aW,H;function cQ(ci,KK){if(fe.hasOwnProperty(KK)){V[ci]=fe[KK];}};var jV=false;var jM=false;var wR=false;switch(this.get_type()){case IPCC.Web.UI.MarkType.Line:jV=true;if(fe.p&&fe.p.length===2){aW=this.re();aW.setPoint(0,new IPCC.Web.UI.Point(fe.p[0].x,fe.p[0].y));aW.setPoint(1,new IPCC.Web.UI.Point(fe.p[1].x,fe.p[1].y));}break;case IPCC.Web.UI.MarkType.Polyline:jV=true;wR=true;cQ('uN','ic');break;case IPCC.Web.UI.MarkType.Rectangle:jM=true;break;case IPCC.Web.UI.MarkType.RectangleRedaction:jM=true;break;case IPCC.Web.UI.MarkType.Ellipse:jM=true;break;case IPCC.Web.UI.MarkType.Polygon:wR=true;break;case IPCC.Web.UI.MarkType.Text:jM=true;cQ('Dy','clc');cQ('zE','clid');cQ('rI','cls');cQ('CZ','clw');cQ('Be','ct');cQ('yC','cv');cQ('gM','fn');cQ('cs','fs');cQ('cG','fst');cQ('ig','ls');cQ('aO','te');cQ('ik','tha');cQ('xE','tva');cQ('qn','tc');cQ('yw','to');cQ('yk','tor');if(fe.cp){this.me=new IPCC.Web.UI.Point(fe.cp.x,fe.cp.y);}break;case IPCC.Web.UI.MarkType.Stamp:jM=true;break;case IPCC.web.UI.MarkType.Highlight:case IPCC.web.UI.MarkType.HighlightText:case IPCC.web.UI.MarkType.Strikethrough:jM=true;break;}if(jV){cQ('JK','eha');cQ('IU','ehl');cQ('mx','eht');cQ('AW','hfc');cQ('GO','sha');cQ('HL','shl');cQ('GM','sht');}else{cQ('cP','fc');cQ('IK','fv');cQ('jD','lv');}if(jM){if(fe.r){this.set_rectangle(new IPCC.Web.UI.Rectangle(fe.r.x,fe.r.y,fe.r.width,fe.r.height));}}fe.t=this.get_type();cQ('iI','lc');cQ('ig','ls');cQ('es','lw');cQ('dv','o');cQ('ce','v');if(fe.p&&wR){aW=this.re();for(H=0;H<fe.p.length;H++){aW.addPoint(new IPCC.Web.UI.Point(fe.p[H].x,fe.p[H].y));}}return fe;}};LO.registerClass=da;LO.registerClass('IPCC.Web.UI.Mark');module.exports=LO;},{"../../IPCC.Util":28}],104:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var KT=function(){var ad=[];var aK=new IPCC.Web.UI.jq();this.Qm=function(K){if(this.Gr(K)=== -1){ad.push(K);var J=new IPCC.Web.UI.MarkEventArgs();J.mark=K;this.bm('markAdded',J);}};this.aAF=function(AE){var J=new IPCC.Web.UI.MarkEventArgs();J.length=AE.get_length();var V=this;function jO(K){if(V.Gr(K)=== -1){ad.push(K);}};AE.forEach(jO,{});if(J.length>0){this.bm('markAdded',J);}};this.lx=function(hT,cC){var Im=[].concat(ad);var H;for(H=0;H<Im.length;H++){hT.call(cC,Im[H],H,this);}};this.ef=function(){return ad.length;};this.ws=function(K){var H=this.Gr(K);if(H> -1){ad.splice(H,1);var J=new IPCC.Web.UI.MarkEventArgs();J.mark=K;this.bm('markRemoved',J);}};this.Gr=function(K){var H;for(H=0;H<ad.length;H++){if(ad[H]===K){return H;}}return-1;};this.yW=function(F){aK.addHandler('markAdded',F);};this.zs=function(F){aK.removeHandler('markAdded',F);};this.yo=function(F){aK.addHandler('markRemoved',F);};this.zr=function(F){aK.removeHandler('markRemoved',F);};this.bm=function(cL,J){var F=aK.getHandler(cL);if(F!==null){F(this,J);}};return this;};KT.prototype={toString:function(){return 'MarkCollection with '+this.get_length()+' marks';},addMark:function(mark){this.Qm(mark);},addMarks:function(markCollection){this.aAF(markCollection);},forEach:function(method,context){this.lx(method,context);},get_length:function(){return this.ef();},contains:function(mark){return this.Gr(mark)> -1;},removeMark:function(mark){this.ws(mark);},removeAllMarks:function(){this.lx(function(K,aJ,AE){AE.ws(K);});},add_markAdded:function(handler){this.yW(handler);},remove_markAdded:function(handler){this.zs(handler);},add_markRemoved:function(handler){this.yo(handler);},remove_markRemoved:function(handler){this.zr(handler);}};KT.registerClass=da;KT.registerClass('IPCC.Web.UI.MarkCollection');module.exports=KT;},{"../../IPCC.Util":28}],105:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var Lx=function(){return this;};Lx.registerClass=da;Lx.prototype={};Lx.registerClass('IPCC.Web.UI.MarkEventArgs');module.exports=Lx;},{"../../IPCC.Util":28}],106:[function(require,module,exports){var et=require('../../IPCC.Util').regEnum;var Cs=function(){};Cs.registerEnum=et;Cs.prototype={HideSideHandlesWhenClose:0,HideCornerHandlesWhenClose:1};Cs.registerEnum('IPCC.Web.UI.MarkHandleMode',false);module.exports=Cs;},{"../../IPCC.Util":28}],107:[function(require,module,exports){var et=require('../../IPCC.Util').regEnum;var Md=function(){};Md.registerEnum=et;Md.prototype={Full:0,SelectionDisabled:1,TextEditingDisabled:2};Md.registerEnum('IPCC.Web.UI.MarkInteractionMode',false);module.exports=Md;},{"../../IPCC.Util":28}],108:[function(require,module,exports){var et=require('../../IPCC.Util').regEnum;var Lg=function(){};Lg.registerEnum=et;Lg.prototype={Line:3,Polyline:502,Rectangle:600,Ellipse:601,Polygon:604,Text:605,Highlight:606,Stamp:607,HighlightText:608,SignaturePath:609,Freehand:610,SignatureText:611,SignatureImage:612,RectangleRedaction:613,TextSelectionRedaction:614,ImageStampAnnotation:615,ImageStampRedaction:616,TextHyperlinkAnnotation:617,DocumentHyperlink:618,TextLine:619,Strikethrough:620,TextAreaSignature:621};Lg.registerEnum('IPCC.Web.UI.MarkType',false);module.exports=Lg;},{"../../IPCC.Util":28}],109:[function(require,module,exports){var et=require('./../../IPCC.Util').regEnum;var SN=function(){if(arguments.length!==0){throw new IPCC.Web.UI.ImGearParameterCountException();}throw new IPCC.Web.UI.ImGearNotImplementedException();};SN.registerEnum=et;SN.prototype={leftButton:0,middleButton:1,rightButton:2};SN.registerEnum("IPCC.Web.UI.MouseButton");},{"./../../IPCC.Util":28}],110:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var Pm=function(){var aim=false;this.aFR=function(){aim=true;};this.aiX=function(){return aim;};return this;};Pm.prototype={preventDefault:function(){this.aFR();}};Pm.registerClass=da;Pm.registerClass('IPCC.Web.UI.MouseEventArgs');module.exports=Pm;},{"../../IPCC.Util":28}],111:[function(require,module,exports){var et=require('../../IPCC.Util').regEnum;var Qg=function(){};Qg.registerEnum=et;Qg.prototype={None:0,Magnifier:1,RectangleZoom:2,HandPan:3,Select:4,CreateRectangleMark:5,CreateEllipseMark:6,CreateLineMark:7,CreatePolylineMark:8,CreateFreehandMark:9,CreatePolygonMark:10,CreateTextMark:11,EditMarks:12,RunMarks:13,SelectText:14,CreateStampMark:15,CreateHighlightTextMark:16,CreateTextSelectionRedaction:17,CreateRectangleRedactionMark:18,CreateImageStampAnnotationMark:19,CreateImageStampRedactionMark:20,CreateTextHyperlinkMark:21,CreateTextInputSignatureMark:22,CreateStrikethroughMark:23,CreateTextAreaSignatureMark:24};Qg.registerEnum('IPCC.Web.UI.MouseTool',false);module.exports=Qg;},{"../../IPCC.Util":28}],112:[function(require,module,exports){var et=require('../../IPCC.Util').regEnum;var NS=function(){};NS.registerEnum=et;NS.prototype={TopLeft:1,TopRight:2,BottomRight:3,BottomLeft:4,LeftTop:5,RightTop:6,RightBottom:7,LeftBottom:8};NS.registerEnum('IPCC.Web.UI.Orientation',false);module.exports=NS;},{"../../IPCC.Util":28}],113:[function(require,module,exports){var abb=function(element,qW,QP){var fO=this;var bp;var h;var yu=0;var MY='';var Ri=false;var aK=new IPCC.Web.UI.jq();var ep=null;var rc=IPCC.rc;var akj=IPCC.rc;var Gw=0.0;var JI=false;var KW=0;var acz= -1;var acW= -1;var acB= -1;function oy(JV){if(!h){return false;}return h.oy(JV);};this.af=function(ju,ia){if(oy(IPCC.Web.UI.DebugErrorLevel.Production)){h.af(ju,ia);}};this.ar=function(ju,kH,qH){if(!oy(IPCC.Web.UI.DebugErrorLevel.Development)){return;}var cE=ju+'(';var H;for(H=0;H<kH.length;H++){if(H>0){cE+=', ';}cE+=IPCC.iA.st(kH[H],(qH?qH:0));}cE+=')';this.vK(cE,IPCC.Web.UI.DebugErrorLevel.Development);};this.Cv=function(ju,kH,lF,qH){if(!oy(IPCC.Web.UI.DebugErrorLevel.Development)){return;}var cE=ju+'(';var H;for(H=0;H<kH.length;H++){if(H>0){cE+=', ';}cE+=IPCC.iA.st(kH[H],(qH?qH:0));}cE+=') = ';cE+=IPCC.iA.st(lF,1);this.vK(cE,IPCC.Web.UI.DebugErrorLevel.Development);};this.cZ=function(ju,kH,lF){if(!oy(IPCC.Web.UI.DebugErrorLevel.Detailed)){return;}var cE=ju+'(';var H;for(H=0;H<kH.length;H++){if(H>0){cE+=', ';}cE+=IPCC.iA.st(kH[H],0);}cE+=') = ';cE+=IPCC.iA.st(lF,1);this.vK(cE,IPCC.Web.UI.DebugErrorLevel.Detailed);};this.vK=function(jH,bL){if(h){h.lY(jH,IPCC.Web.UI.DebugItemCause.FunctionCall,bL);}};this.lY=function(jH){if(h){h.lY(jH,IPCC.Web.UI.DebugItemCause.Custom,IPCC.Web.UI.DebugErrorLevel.Production);}};this.Je=function(){return h.get_debug();};this.Ve=function(R){h.set_debug(R);};this.Au=function(){return h.Au();};this.JE=function(R){IPCC.aA.jk(R,'value',IPCC.Web.UI.DebugErrorLevel);h.JE(R);};this.aGG=function(R){JI=R;};this.aIj=function(){return JI;};var op=function(){if(h.cz()===undefined){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot perform this operation unless an image is open (and it has completed the opening process).');}};function cS(cL,F){aK.addHandler(cL,F);};function cY(cL,F){aK.removeHandler(cL,F);};this.Gg=function(hM,cI){h.aBk(hM,cI);};this.aGC=function(cI,K){h.wi(K);h.dC();};this.XP=function(F){cS('pageOpening',F);};this.Sq=function(F){cY('pageOpening',F);};this.Wj=function(F){cS('pageOpened',F);};this.Sr=function(F){cY('pageOpened',F);};this.azE=function(F){cS('pageClosed',F);};this.azH=function(F){cY('pageClosed',F);};this.Ki=function(F){cS('pageOpenFailed',F);};this.EZ=function(F){cY('pageOpenFailed',F);};this.Wy=function(F){cS('pageDisplayed',F);};this.Wq=function(F){cY('pageDisplayed',F);};this.Om=function(F){cS('mouseDown',F);};this.VS=function(F){cY('mouseDown',F);};this.NT=function(F){cS('mouseMove',F);};this.Uy=function(F){cY('mouseMove',F);};this.Oi=function(F){cS('mouseUp',F);};this.VH=function(F){cY('mouseUp',F);};this.auY=function(F){cS('contextMenu',F);};this.aCk=function(F){cY('contextMenu',F);};this.yW=function(F){cS('markAdded',F);};this.zs=function(F){cY('markAdded',F);};this.aba=function(F){cS('markCreating',F);};this.Tl=function(F){cY('markCreating',F);};this.Ka=function(F){cS('markChanged',F);};this.HQ=function(F){cY('markChanged',F);};this.yo=function(F){cS('markRemoved',F);};this.zr=function(F){cY('markRemoved',F);};this.Jk=function(F){cS('markReordered',F);};this.EQ=function(F){cY('markReordered',F);};this.XF=function(F){cS('marksLoaded',F);};this.VQ=function(F){cY('marksLoaded',F);};this.Ji=function(F){cS('markSelectionChanged',F);};this.FN=function(F){cY('markSelectionChanged',F);};this.xG=function(F){cS('textPageReady',F);};this.GB=function(F){cY('textPageReady',F);};this.ZJ=function(F){cS('selectTextMouseToolCompleted',F);};this.Vl=function(F){cY('selectTextMouseToolCompleted',F);};this.abT=function(F){cS('exceptionThrown',F);};this.Zz=function(F){cS('scaleChanged',F);};this.VN=function(F){cY('scaleChanged',F);};this.Qw=function(F){cY('exceptionThrown',F);};this.xh=function(F){cS('textExtractionFailed',F);};this.GD=function(F){cY('textExtractionFailed',F);};this.lw=function(F){cS('propertyChanged',F);};this.nd=function(F){cY('propertyChanged',F);};var bm=function(cL,J){try{var F;F=aK.getHandler(cL);if(F){F(fO,J);}}catch(e){fO.af(cL+'Event',e);}};var qL=function(cL){function zP(bP,J){bm(cL,J);};h['add_'+cL](zP);};var JF=function(cL){function zP(bP,J){if(Ri&&h.LJ()){Gp();}bm(cL,J);};h['add_'+cL](zP);};function Gp(){var eQ,mb,Xq;if(MY!==''){Xq=document.getElementById(MY);if(Xq){eQ=fO.KU();mb='{encodedDocumentIdentifier:"'+eQ.encodedDocumentIdentifier;mb+='",pageNumber:'+eQ.pageNumber.toString();mb+=',viewFitType:'+eQ.viewFitType.toString();if(eQ.viewRectangle&&eQ.viewFitType===IPCC.Web.UI.FitType.Rectangle){mb+=',viewRectangle:{x:'+eQ.viewRectangle.x.toFixed(5);mb+=',y:'+eQ.viewRectangle.y.toFixed(5);mb+=',width:'+eQ.viewRectangle.width.toFixed(5);mb+=',height:'+eQ.viewRectangle.height.toFixed(5);mb+='}';}if(eQ.viewRotationDegreesClockwise){mb+=',viewRotationDegreesClockwise:'+eQ.viewRotationDegreesClockwise.toString();}if(eQ.viewMirror){mb+=',viewMirror:'+eQ.viewMirror.toString();}if(eQ.viewZoomFactor){mb+=',viewZoomFactor:'+eQ.viewZoomFactor.toString();}if(Ri){var bJ=h.ee();if(bJ){mb+=',artPageJson:"'+IPCC.hn.sl(bJ.saveToJson())+'"';}}mb+='}';Xq.value=mb;}}};var atT=function(){function zP(bP,J){var SB=true;switch(J.get_propertyName()){case 'documentIdentifier':case 'pageNumber':case 'artPage':case 'includeArtInPostBack':case 'displayedPageRectangle':Gp();break;case 'magnifierWindowPosition':case 'magnifierIsVisible':case 'cursor':case 'markCursor':case 'inProgressMark':case 'Jl':case 'wL':SB=false;break;case 'Jh':if(h.LJ()){Gp();}SB=false;break;}if(SB){bm('propertyChanged',J);}};h.lw(zP);};this.Vy=function(bO){IPCC.aA.jk(bO,'type',IPCC.Web.UI.FitType);if(bO===IPCC.Web.UI.FitType.Rectangle){throw new IPCC.Web.UI.ImGearArgumentException('type','The value must be a member of the IPCC.Web.UI.FitType enumeration (other than Rectangle).');}op();ep={aBm:true,viewFitType:bO};YA();};this.en=function(){return h.cz()!==undefined;};this.kS=function(){op();return h.cz().width;};this.hX=function(){op();return h.cz().height;};this.azF=function(){op();return h.cz().gV;};this.aAl=function(){return h.aw().eA().agc();};this.azN=function(){op();return h.cz().gx;};this.Ku=function(){if(!h|| !(h.cz())){return '';}return h.cz().get_identifier();};this.Mp=function(){if(!h|| !(h.cz())){return '';}return h.cz().get_encodedIdentifier();};this.oO=function(){if(!h|| !(h.cz())){return-1;}return h.cz().bx;};this.atq=function(){if(!h|| !(h.cz())){return 0;}return h.cz().fC;};this.agG=function(){var bV=h.cz();if(!bV){return new IPCC.Web.UI.Rectangle(0,0,0,0);}var bu=h.fa();bu.x=bu.y=0;var sY=h.aw().eA();sY.vJ();var ei=sY.yg(bu);if(ei.x<0){ei.width+=ei.x;ei.x=0;}if(ei.y<0){ei.height+=ei.y;ei.y=0;}if(ei.x+ei.width>bV.width){ei.width=bV.width-ei.x;}if(ei.y+ei.height>bV.height){ei.height=bV.height-ei.y;}return ei;};function Qk(){var dJ={},dK=h.aw().eA();dJ.documentIdentifier=fO.Ku();dJ.encodedDocumentIdentifier=fO.Mp();dJ.pageNumber=fO.oO();dJ.artPage=fO.ee();dJ.referenceDocumentIdentifier=fO.Ku();dJ.referencePageNumber=fO.oO();dJ.viewFitType=IPCC.Web.UI.FitType.Rectangle;dJ.viewRectangle=fO.agG();dJ.imGearPage=fO.nM();dJ.transientArtPage=fO.mf();var gB=dK.agc();if(gB!==0){dJ.viewRotationDegreesClockwise=gB;}if(dK.axp()){dJ.viewMirror=true;}return dJ;};this.acj=function(aP,di){h.acj(aP,di);};this.KU=function(){var dJ;if(bp){dJ=new IPCC.Web.UI.PageViewState();dJ.documentIdentifier=bp.documentIdentifier;dJ.encodedDocumentIdentifier=bp.encodedDocumentIdentifier;dJ.pageNumber=bp.pageNumber;dJ.artPage=bp.artPage;dJ.artPageJson=bp.artPageJson;dJ.referenceDocumentIdentifier=bp.documentIdentifier;dJ.referencePageNumber=bp.pageNumber;dJ.viewFitType=bp.viewFitType;dJ.viewRectangle=bp.viewRectangle;dJ.viewRotationDegreesClockwise=bp.viewRotationDegreesClockwise;dJ.viewMirror=bp.viewMirror;dJ.viewZoomFactor=bp.viewZoomFactor;dJ.transientArtPage=bp.transientArtPage;}else{dJ=Qk();}return dJ;};this.Mv=function(aU){var bu=h.fa();this.ahK(aU,{x:bu.width/2,y:bu.height/2});};this.ahK=function(aU,ct){IPCC.aA.kf(aU,'factor',1.01,20);IPCC.aA.bH(ct,'point');op();var aq=h.aw();var bn=aq.eA();var bM=h.cz();var kQ=bn.nU();if(kQ*aU>bM.qd){aU=bM.qd/kQ;}bn.yb(aU,aU,ct.x,ct.y);bn.jZ(bM,h.fa());ep=null;aq.ip(bn);};this.ZY=function(aU){var bu=h.fa();this.aiQ(aU,{x:bu.width/2,y:bu.height/2});};this.aiQ=function(aU,ct){IPCC.aA.kf(aU,'factor',1.01,20);IPCC.aA.bH(ct,'point');op();var aq=h.aw();var bn=aq.eA();var bM=h.cz();var kQ=bn.nU();if(kQ/aU<bM.sX){aU=kQ/bM.sX;}bn.yb(1/aU,1/aU,ct.x,ct.y);bn.jZ(bM,h.fa());ep=null;aq.ip(bn);};this.kX=function(aU){var bu=h.fa();this.apX(aU,{x:bu.width/2,y:bu.height/2});};this.DB=function(aU){var aq=h.aw();ep=null;aq.DB(aU);};this.Ga=function(aU){var aq=h.aw();ep=null;aq.Ga(aU);};this.DV=function(aU){var aq=h.aw();ep=null;aq.DV(aU);};this.apX=function(aU,ct){IPCC.aA.bH(ct,'point');op();var aq=h.aw();var bn=aq.eA();var bM=h.cz();var kQ=bn.nU();if(aU>bM.qd){aU=bM.qd;}else if(aU<bM.sX){aU=bM.sX;}bn.yb(aU/kQ,aU/kQ,ct.x,ct.y);bn.jZ(bM,h.fa());ep=null;aq.ip(bn);};this.wB=function(tf){IPCC.aA.Vu(tf,'degreesClockwise',[90,180,270,-90,-180,-270]);op();var aq=h.aw();var bn=aq.eA();var bu=h.fa();bn.acs(tf,bu.width/2,bu.height/2);bn.jZ(h.cz(),h.fa());ep=null;aq.ip(bn);};this.amc=function(){op();var aq=h.aw();var bn=aq.eA();var bu=h.fa();bn.yb(-1,1,bu.width/2,bu.height/2);bn.jZ(h.cz(),h.fa());ep=null;aq.ip(bn);};this.art=function(ei){IPCC.aA.C(ei,'pageRectangle');op();var aq=h.aw();var bn=aq.eA();var bu=h.fa();var bM=h.cz();bn.Nc(bM,bu,ei);bn.jZ(bM,h.fa());ep=null;aq.ip(bn);};this.arv=function(dw){IPCC.aA.bH(dw,'imagePoint');op();var aq=h.aw();var bn=aq.eA();var bu=h.fa();bn.agt(bu,dw);bn.jZ(h.cz(),h.fa());ep=null;aq.ip(bn);};this.ako=function(){op();ep=null;var aq=h.aw();var bn=aq.eA();var bu=h.fa();bn.yb(1,-1,bu.width/2,bu.height/2);bn.jZ(h.cz(),h.fa());ep=null;aq.ip(bn);};this.dC=function(){h.dC();};this.KP=function(){h.KP();};var YA=function(){var bM=h.cz();var bu=h.fa();var bn;if(!ep){bn=h.aw().eA();bn.jZ(bM,bu);h.aw().ip(bn);return;}if(ep.aBm){bn=h.aw().eA();}else{bn=new IPCC.eE();bn.aoZ(bM,bu);if(ep.viewRotationDegreesClockwise){bn.rotate(ep.viewRotationDegreesClockwise);}if(ep.viewMirror){bn.aoM(bu);}}if(ep.viewZoomFactor){if(ep.viewZoomFactor>bM.qd){ep.viewZoomFactor=bM.qd;}else if(ep.viewZoomFactor<bM.sX){ep.viewZoomFactor=bM.sX;}ep.viewFitType=IPCC.Web.UI.FitType.ActualSize;bn.WY(ep.viewFitType,bM,bu);bn.scale(ep.viewZoomFactor,ep.viewZoomFactor);}else{if(!ep.viewFitType&&ep.viewFitType!==0){ep.viewFitType=IPCC.Web.UI.FitType.FullImage;}if(ep.viewFitType===IPCC.Web.UI.FitType.Rectangle&& !ep.viewRectangle){ep.viewFitType=IPCC.Web.UI.FitType.FullImage;}if(ep.viewFitType!==IPCC.Web.UI.FitType.Rectangle){bn.WY(ep.viewFitType,bM,bu);}else{bn.Nc(bM,bu,ep.viewRectangle);}}bn.jZ(bM,bu);h.aw().ip(bn);};var aiP=function(GV){ep=GV;KW=0;YA();};this.Nn=function(aG){yu++;var XZ=yu;var ayL={};Gw=0.0;h.LA=0.0;IPCC.hn.alo(aG);if(oy(IPCC.Web.UI.DebugErrorLevel.Development)){var cE='opening documentIdentifier "'+aG.documentIdentifier+'", pageNumber '+aG.pageNumber;this.vK(cE,IPCC.Web.UI.DebugErrorLevel.Development);}bp=new IPCC.Web.UI.PageViewState();var H;for(H in aG){if(aG.hasOwnProperty(H)){bp[H]=aG[H];}}if(aG.documentIdentifier===''){this.NN();return;}if(IPCC.Web.UI.ArtPage){if(bp){if(!bp.artPage){var bJ=new IPCC.Web.UI.ArtPage();if(bp.artPageJson){bJ.loadFromJson(bp.artPageJson);}bp.artPage=bJ;}if(!bp.documentArtPage){var eS=new IPCC.Web.UI.ArtPage();bp.documentArtPage=eS;}if(this.jW()===true){if(!bp.imGearPage){var gr=new IPCC.Web.UI.ImGearDocument({documentIdentifier:aG.documentIdentifier,imageServicePath:this.ts()});bp.imGearPage=new IPCC.Web.UI.ImGearPage({pageNumber:aG.pageNumber,bf:gr});gr.get_pages().addPage(bp.imGearPage);}if(!bp.transientArtPage){bp.transientArtPage=new IPCC.Web.UI.ArtPage();}}}}if(bp.viewRotationDegreesClockwise){IPCC.aA.Vu(bp.viewRotationDegreesClockwise,'parameters.viewRotationDegreesClockwise',[0,90,180,270,-90,-180,-270]);}if(bp.viewFitType){IPCC.aA.jk(bp.viewFitType,'parameters.viewFitType',IPCC.Web.UI.FitType);}if(bp.viewZoomFactor){IPCC.aA.kf(bp.viewZoomFactor,'parameters.viewZoomFactor',0,20);}bm('pageOpening',aG);var bV=new IPCC.hn(aG.encodedDocumentIdentifier,aG.pageNumber,0,0,0,0);var ro=function(){if(XZ!==yu){return;}var sO=null;if(h.cz()){sO=Qk();}h.aw().pq();h.xC(bV);aiP(bp);if(aG.artServiceOption===IPCC.Web.UI.ImGearArtDataServices.ArtDataService){if(bp){if(bp.artPage){h.na(bp.artPage);h.ee().loadFromJson(bV.awE);}}}else{if(bp){if(bp.artPage){h.na(bp.artPage);}if(bp.documentArtPage){h.JY(bp.documentArtPage);}if(h.jW()===true){if(bp.imGearPage){var XD=bp.imGearPage.get_pageWidth();var abF=bp.imGearPage.get_pageHeight();bp.imGearPage.ou(fO.jt());if(!XD){bp.imGearPage.Ot(fO.get_pageWidth());}if(!abF){bp.imGearPage.Oc(fO.get_pageHeight());}h.Dr(bp.imGearPage);if(typeof(h.nM().Az==='function')){if(!h.nM().cd().Cb()){bp.imGearPage.yH(fO.kE());setTimeout(h.nM().Az,1000);}}}if(bp.transientArtPage){h.Ep(bp.transientArtPage);}}}}bp=null;if(sO){bm('pageClosed',sO);}Gp();bm('pageOpened',aG);};if(aG.artServiceOption===IPCC.Web.UI.ImGearArtDataServices.ArtDataService){if(bp){if(!bp.artPageJson){bV.aGT(h.ts(),h,ro,ayL);}else{bV.Ub(h.ts(),h,ro);}}}else{bV.Ub(h.ts(),h,ro);}};this.NN=function(){yu++;if(!(h.cz())){return;}var sO=Qk();h.xC(undefined);h.na(undefined);h.Dr(undefined);h.Ep(undefined);this.dC();Gp();sO=undefined;bp=undefined;ep=undefined;var dp;dp=fO.oW();if(dp.igElements){if(dp.igElements.qF){dp.igElements.qF.AS=null;dp.igElements.qF.xO=null;dp.igElements.qF.Ia=null;dp.igElements.qF=null;}dp.igElements.Cd=null;dp.igElements.dY=null;dp.igElements.gT=null;dp.igElements.dN=null;dp.igElements.po=null;dp.igElements.nf=null;dp.igElements.lA=null;dp.igElements.qB=null;dp.igElements.PW=null;dp.igElements.TU=null;dp.igElements.qX=null;}fO=null;dp.aC=null;bm('pageClosed',sO);};this.awF=function(aG){yu++;var XZ=yu;Gw=0.0;h.LA=0.0;IPCC.hn.alo(aG);if(oy(IPCC.Web.UI.DebugErrorLevel.Development)){var cE='opening documentIdentifier "'+aG.documentIdentifier+'", pageNumber '+aG.pageNumber;this.vK(cE,IPCC.Web.UI.DebugErrorLevel.Development);}bp=new IPCC.Web.UI.PageViewState();var H;for(H in aG){if(aG.hasOwnProperty(H)){bp[H]=aG[H];}}if(aG.documentIdentifier===''){this.NN();return;}if(IPCC.Web.UI.ArtPage){if(bp){if(!bp.artPage){var bJ=new IPCC.Web.UI.ArtPage();bp.artPage=bJ;}if(!bp.documentArtPage){var eS=new IPCC.Web.UI.ArtPage();bp.documentArtPage=eS;}if(this.jW()===true){if(!bp.imGearPage){var gr=new IPCC.Web.UI.ImGearDocument({documentIdentifier:aG.documentIdentifier,imageServicePath:this.ts()});bp.imGearPage=new IPCC.Web.UI.ImGearPage({pageNumber:aG.pageNumber,bf:gr});gr.get_pages().addPage(bp.imGearPage);}if(!bp.transientArtPage){bp.transientArtPage=new IPCC.Web.UI.ArtPage();}}}}if(bp.viewRotationDegreesClockwise){IPCC.aA.Vu(bp.viewRotationDegreesClockwise,'parameters.viewRotationDegreesClockwise',[0,90,180,270,-90,-180,-270]);}if(bp.viewFitType){IPCC.aA.jk(bp.viewFitType,'parameters.viewFitType',IPCC.Web.UI.FitType);}if(bp.viewZoomFactor){IPCC.aA.kf(bp.viewZoomFactor,'parameters.viewZoomFactor',0,20);}bm('pageOpening',aG);var bV=new IPCC.hn(aG.encodedDocumentIdentifier,aG.pageNumber,0,0,0,0);var ro=function(){if(XZ!==yu){return;}var sO=null;if(h.cz()){sO=Qk();}h.aw().pq();h.xC(bV);aiP(bp);if(bp){if(bp.artPage){h.na(bp.artPage);}if(bp.documentArtPage){h.JY(bp.documentArtPage);}if(h.jW()===true){if(bp.imGearPage){var XD=bp.imGearPage.get_pageWidth();var abF=bp.imGearPage.get_pageHeight();bp.imGearPage.ou(fO.jt());if(!XD){bp.imGearPage.Ot(fO.get_pageWidth());}if(!abF){bp.imGearPage.Oc(fO.get_pageHeight());}h.Dr(bp.imGearPage);if(typeof(h.nM().Az==='function')){if(!h.nM().cd().Cb()){bp.imGearPage.yH(fO.kE());setTimeout(h.nM().Az,1000);}}}if(bp.transientArtPage){h.Ep(bp.transientArtPage);}}}bp=null;if(sO){bm('pageClosed',sO);}Gp();bm('pageOpened',aG);};bV.awZ(h.ts(),h,ro);};this.aIq=function(){yu++;if(!(h.cz())){return;}var bV=h.cz();h.xC(undefined);this.dC();h.xC(bV);};this.Ss=function(Ft){h.Ss(Ft);};this.na=function(R){h.na(R);};this.ee=function(){return h.ee();};this.JY=function(R){h.JY(R);};this.Me=function(){return h.Me();};this.mf=function(){return h.mf();};this.Ep=function(R){h.Ep(R);};this.CE=function(){return h.CE();};this.anF=function(R){h.anF(R);};this.Jg=function(R){h.Jg(R);};this.wH=function(){return h.wH();};this.aDn=function(R){akj=this.aos(R);};this.js=function(){return akj;};this.amh=function(R){h.amh(R);};this.aaE=function(){return h.aaE();};this.mH=function(){return h.mH();};this.pe=function(R){h.pe(R);};this.aet=function(R){h.aet(R);};this.YY=function(){return h.YY();};this.YJ=function(awH){h.YJ(awH);};this.Rg=function(){return h.Rg();};this.aos=function(an){var aV='',Qh='',Us=function(aE){var sU=0,aV;for(aV in aE){if(aE.hasOwnProperty(aV)){sU+=1;}}return sU;};for(aV in rc){if(rc.hasOwnProperty(aV)){if(typeof an[aV]==='undefined'){an[aV]=rc[aV];}if(typeof an[aV]==='object'){if(!Us(an[aV])){an[aV]=rc[aV];}else if(Us(an[aV])!==Us(rc[aV])){for(Qh in rc[aV]){if(typeof an[aV][Qh]==='undefined'){an[aV][Qh]=rc[aV][Qh];}}}}}}return an;};this.aoH=function(apb){if(apb===false){IPCC.gH=false;h.eT([new IPCC.nq(),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}else{IPCC.gH=true;IPCC.aeW=this.js();h.eT([new IPCC.nq(),new IPCC.cn(),new IPCC.fo(),new IPCC.cv(),new IPCC.cW(false)]);}};this.pq=function(){var aq=h.aw();if(!aq.Ce()){return;}h.aw().pq();};this.asN=function(ei){IPCC.aA.C(ei,'pageRectangle');var bV=h.cz();if(bV){h.aw().showSelection(ei);}};this.Dn=function(dw){IPCC.aA.bH(dw,'imagePoint');if(h.cz()){h.aw().Dn(new IPCC.Web.UI.Point(dw.x,dw.y));}};this.zX=function(dw){IPCC.aA.bH(dw,'imagePoint');if(h.cz()){h.aw().zX(new IPCC.Web.UI.Point(dw.x,dw.y));}};this.wb=function(){if(h.cz()&&h.aw().Ce()){return h.aw().wb();}return new IPCC.Web.UI.Rectangle(0,0,0,0);};this.ays=function(){if(h.cz()&&h.aw().Ce()){var ei=h.aw().wb();return h.aw().eA().yg(ei);}return new IPCC.Web.UI.Rectangle(0,0,0,0);};this.Ce=function(){return! !(h.cz()&&h.aw().Ce());};this.ts=function(){return h.ts();};this.abD=function(R){IPCC.aA.lg(R,'value');h.abD(R);};this.awv=function(){return MY;};this.aDV=function(R){IPCC.aA.lg(R,'value');MY=R;};this.azh=function(){return Ri;};this.anK=function(R){Ri=R;};var uO='';this.tF=function(R){h.tF(R);uO=R;};this.oW=function(){return uO;};this.ayU=function(){return h.aw().get_magnifierMagnification();};this.aoX=function(R){IPCC.aA.kf(R,'value',1.5,8);h.aw().set_magnifierMagnification(R);};this.aAH=function(){return h.aw().wJ().width;};this.aop=function(R){IPCC.aA.kf(R,'value',25,500);var sU=h.aw().wJ();sU.width=R;h.aw().set_magnifierWindowSize(sU);};this.axP=function(){return h.aw().wJ().height;};this.aoj=function(R){IPCC.aA.kf(R,'value',25,500);var sU=h.aw().wJ();sU.height=R;h.aw().set_magnifierWindowSize(sU);};this.Or=function(){return h.aw().Or();};this.Tz=function(R){IPCC.aA.kf(R,'value',-500,500);h.aw().Tz(R);};this.Lc=function(){return h.aw().Lc();};this.aaY=function(R){IPCC.aA.kf(R,'value',-500,500);h.aw().aaY(R);};this.ZM=function(){return h.aw().ZM();};this.WR=function(R){IPCC.aA.kf(R,'value',0.1,0.5);h.aw().WR(R);};this.AQ=function(){return h.aw().AQ();};this.It=function(R){h.aw().It(R);};this.raisePropertyChanged=function(ci,vL){if(h){h.dq(ci,vL);}};var az= -1;this.Yv=function(){return az;};this.aGJ=function(R){h.sM=R;};this.QB=function(R){h.set_areMarksEditable(R);};this.aHs=function(){return h.set_areMarksEditable();};this.HY=function(R){IPCC.aA.jk(R,'value',IPCC.Web.UI.MouseTool);if(az!==R){az=R;var il="None";switch(az){case IPCC.Web.UI.MouseTool.None:h.eT([]);break;case IPCC.Web.UI.MouseTool.Magnifier:if(IPCC.gH===true){h.eT([new IPCC.qK(),new IPCC.cn(),new IPCC.fo(false,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.qK(),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);il="Magnifier";}break;case IPCC.Web.UI.MouseTool.RectangleZoom:if(IPCC.gH===true){h.eT([new IPCC.nq(),new IPCC.cn(),new IPCC.fo(false,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.nq(),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="RectangleZoom";break;case IPCC.Web.UI.MouseTool.HandPan:if(IPCC.gH===true){h.eT([new IPCC.nS(),new IPCC.cn(),new IPCC.fo(false,this.js()),new IPCC.cv(),new IPCC.cW(true)]);}else{h.eT([new IPCC.nS(),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(true)]);}il="HandPan";break;case IPCC.Web.UI.MouseTool.Select:if(IPCC.gH===true){h.eT([new IPCC.nP(),new IPCC.cn(),new IPCC.fo(false,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.nP(),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="Select";break;case IPCC.Web.UI.MouseTool.CreateRectangleMark:if(IPCC.gH===true){h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.Rectangle),new IPCC.cn(),new IPCC.fo(true,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.Rectangle),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="CreateRectangleMark";break;case IPCC.Web.UI.MouseTool.CreateRectangleRedactionMark:if(IPCC.gH===true){h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.RectangleRedaction),new IPCC.cn(),new IPCC.fo(true,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.RectangleRedaction),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="CreateRectangleRedactionMark";break;case IPCC.Web.UI.MouseTool.CreateEllipseMark:if(IPCC.gH===true){h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.Ellipse),new IPCC.cn(),new IPCC.fo(true,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.Ellipse),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="CreateEllipseMark";break;case IPCC.Web.UI.MouseTool.CreateLineMark:if(IPCC.gH===true){h.eT([new IPCC.lC(),new IPCC.cn(),new IPCC.fo(true,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.lC(),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="CreateLineMark";break;case IPCC.Web.UI.MouseTool.CreatePolylineMark:if(IPCC.gH===true){h.eT([new IPCC.jT(IPCC.Web.UI.MarkType.Polyline),new IPCC.cn(),new IPCC.fo(true,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.jT(IPCC.Web.UI.MarkType.Polyline),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="CreatePolylineMark";break;case IPCC.Web.UI.MouseTool.CreateFreehandMark:if(IPCC.gH===true){h.eT([new IPCC.mR(),new IPCC.cn(),new IPCC.fo(true,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.mR(),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="CreateFreehandMark";break;case IPCC.Web.UI.MouseTool.CreatePolygonMark:if(IPCC.gH===true){h.eT([new IPCC.jT(IPCC.Web.UI.MarkType.Polygon),new IPCC.cn(),new IPCC.fo(true,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.jT(IPCC.Web.UI.MarkType.Polygon),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="CreatePolygonMark";break;case IPCC.Web.UI.MouseTool.CreateTextMark:if(IPCC.gH===true){h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.Text),new IPCC.cn(),new IPCC.fo(true,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.Text),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="CreateTextMark";break;case IPCC.Web.UI.MouseTool.CreateTextInputSignatureMark:if(IPCC.gH===true){h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.TextLine),new IPCC.cn(),new IPCC.fo(true,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.TextLine),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="CreateTextInputSignatureMark";break;case IPCC.Web.UI.MouseTool.CreateTextAreaSignatureMark:h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.TextAreaSignature),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);il="CreateTextAreaSignatureMark";break;case IPCC.Web.UI.MouseTool.EditMarks:if(IPCC.gH===true){h.eT([new IPCC.jY(IPCC.Web.UI.MarkType.Text),new IPCC.cn(),new IPCC.fo(true,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.jY(IPCC.Web.UI.MarkType.Text),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="EditMarks";break;case IPCC.Web.UI.MouseTool.RunMarks:if(IPCC.gH===true){h.eT([new IPCC.zR(IPCC.Web.UI.MarkType.Text),new IPCC.cn(),new IPCC.fo(false,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.zR(IPCC.Web.UI.MarkType.Text),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="RunMarks";break;case IPCC.Web.UI.MouseTool.CreateStampMark:if(IPCC.gH===true){h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.Stamp),new IPCC.cn(),new IPCC.fo(true,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.Stamp),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="CreateStampMark";break;case IPCC.Web.UI.MouseTool.CreateImageStampAnnotationMark:if(IPCC.gH===true){h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.ImageStampAnnotation),new IPCC.cn(),new IPCC.fo(true,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.ImageStampAnnotation),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="CreateImageStampAnnotationMark";break;case IPCC.Web.UI.MouseTool.CreateImageStampRedactionMark:if(IPCC.gH===true){h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.ImageStampRedaction),new IPCC.cn(),new IPCC.fo(true,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.fj(IPCC.Web.UI.MarkType.ImageStampRedaction),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="CreateImageStampRedactionMark";break;case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:h.JI=true;if(IPCC.gH===true){h.eT([new IPCC.lv(),new IPCC.cn(),new IPCC.fo(false,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.lv(),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="CreateHighlightTextMark";break;case IPCC.Web.UI.MouseTool.SelectText:h.JI=false;if(IPCC.gH===true){h.eT([new IPCC.lv(),new IPCC.cn(),new IPCC.fo(false,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.lv(),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="SelectText";break;case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:if(IPCC.gH===true){h.eT([new IPCC.lv(),new IPCC.cn(),new IPCC.fo(true,this.js()),new IPCC.cv(),new IPCC.cW(false)]);}else{h.eT([new IPCC.lv(),new IPCC.cn(),new IPCC.cv(),new IPCC.cW(false)]);}il="CreateStrikethroughMark";break;}this.raisePropertyChanged('mouseTool',{mouseToolType:il});}};this.Kr=function(asP){az= -1;h.eT(asP);};this.aAA=function(){return h.aw().get_presentationQuality();};this.apr=function(R){IPCC.aA.kf(R,'value',0,100);h.aw().set_presentationQuality(R);};this.ayw=function(){return h.aw().get_scrollBars();};this.apo=function(R){IPCC.aA.jk(R,'value',IPCC.Web.UI.ScrollBars);h.aw().set_scrollBars(R);};this.arj=function(dw,ass){IPCC.aA.bH(dw,'imagePoint');if(!(h.cz())){return new IPCC.Web.UI.Point(0,0);}var ct=h.aw().eA().transform(dw);if(ass){ct.constrain(h.fa());}return ct;};this.PS=function(ct,ary){IPCC.aA.bH(ct,'windowPoint');var bV=h.cz();if(!bV){return new IPCC.Web.UI.Point(0,0);}var sY=h.aw().eA();sY.vJ();var dw=sY.transform(ct);if(ary){dw.constrain(bV);}return dw;};function aFX(){var dp;dp=fO.oW();var akR=dp.clientWidth;var akb=dp.clientHeight;var aBb=(ep&&ep.viewFitType===acz&&akR===acW&&akb===acB);if(aBb){if(KW>2){return;}KW++;}else{acz=ep?ep.viewFitType: -1;acW=akR;acB=akb;KW=0;}YA();};function atn(){ep=null;};function aqc(bP,J){switch(J.gX){case IPCC.dW.aix:fO.ahK(1.25,J.RG.windowPoint);break;case IPCC.dW.ahX:fO.aiQ(1.25,J.RG.windowPoint);break;case IPCC.dW.Yz:fO.wB(J.R);break;case IPCC.dW.akl:fO.ako();break;case IPCC.dW.amZ:fO.amc();break;case IPCC.dW.ahM:fO.Vy(J.R);break;case IPCC.dW.abK:fO.HY(J.R);break;}};this.jW=function(){return h.jW();};this.Jx=function(R){h.Jx(R);};this.cd=function(){return h.cd();};this.nM=function(){return h.nM();};this.Dr=function(R){h.Dr(R);};this.CC=function(){return h.get_requireRequestsOptimize();};this.Kg=function(R){h.Kg(R);};this.kE=function(){return h.kE();};this.yH=function(R){h.yH(R);};this.Kt=function(dw){IPCC.aA.bH(dw,'imagePoint');return h.Kt(dw);};this.zY=function(dQ){h.zY(dQ);};this.Uv=function(){h.Uv();};this.LM=function(tz,di){var Iv=h.cd().gY().ef();IPCC.aA.mt(tz,'tz',0,Iv-1);h.LM(tz,di);};this.tZ=function(dQ){if(dQ===undefined){h.aw().tZ(dQ);return false;}var Iv=h.cd().gY().ef();IPCC.aA.mt(dQ,'textIndex',0,Iv-1);h.tZ(dQ);return true;};this.JZ=function(){return! !(h.cz()&&h.jW()&&h.cd().oY()===true&&h.aw().JZ());};this.abJ=function(){var aq=h.aw();aq.abJ();};this.Rs=function(){if(h.jW()&&h.cd().oY()===true){return Math.min(h.aw().ahB(),h.aw().Bv());}};this.BF=function(){if(h.jW()&&h.cd().oY()===true){return h.aw().BF();}};this.BB=function(){if(h.jW()&&h.cd().oY()===true&&h.aw().JZ()){return h.BB();}else{return "";}};this.Bv=function(){return h.aw().Bv();};this.aty=function(){return h.get_cursor();};this.aCC=function(R){h.set_cursor(R);};this.zA=function(){return h.zA();};this.St=function(R){h.St(R);};this.jt=function(){return h.jt();};this.ou=function(R){h.ou(R);};this.ayB=function(){h.aw().hideMagnifier();};this.arR=function(ct){h.aw().showMagnifier(ct);};this.wi=function(K){if(h.pn().igElements){h.wi(K);h.dC();}};this.GE=function(){h.GE();};this.AX=function(){return h.AX();};this.pO=function(){if(h.pn().igElements){h.pO(true);}};function aFD(bP,J){var xq=J.scaleFactor;var ai={scaleType:"scaledDown",pageNumber:J.pageNumber};if(Gw!==xq){if(xq>Gw){ai.scaleType="scaledUp";}Gw=xq;bm('scaleChanged',ai);}};this.initialize=function(){h.aoG(this.oW().id);h.tF(this.oW().id);if(az=== -1){this.HY(IPCC.Web.UI.MouseTool.RectangleZoom);}qL('mouseDown');qL('mouseMove');qL('mouseUp');qL('contextMenu');qL('markCreating');qL('pageOpenFailed');qL('textPageReady');qL('pageDisplayed');qL('exceptionThrown');qL('selectTextMouseToolCompleted');JF('markAdded');JF('markChanged');JF('markRemoved');qL('textExtractionFailed');JF('markReordered');JF('marksLoaded');qL('markSelectionChanged');atT();h.aAm(aFX);h.aAJ(atn);h.aul(aqc);h.add_scaleChanged(aFD);h.axg();var dp=this.oW();dp.aC=this;};qW=(qW!==false);h=new IPCC.Wl(qW);h.aEw('PageView');h.aoy(QP);};abb.prototype={dispose:function(){this.ar('dispose',arguments);this.NN();},get_debug:function(){try{var aI=this.Je();this.cZ('get_debug',arguments,aI);return aI;}catch(e){this.af('get_debug',e);throw e;}},set_debug:function(value){try{this.ar('set_debug',arguments);var Am=this.Je();this.Ve(value);if(!Am){this.ar('set_debug',arguments);}}catch(e){this.af('set_debug',e);throw e;}},get_debugErrorLevel:function(){try{var aI=this.Au();this.cZ('get_debugErrorLevel',arguments,aI);return aI;}catch(e){this.af('get_debugErrorLevel',e);throw e;}},set_debugErrorLevel:function(value){try{this.ar('set_debugErrorLevel',arguments);var Am=this.Au();this.JE(value);if(Am<IPCC.Web.UI.DebugErrorLevel.Development){this.ar('set_debugErrorLevel',arguments);}}catch(e){this.af('set_debugErrorLevel',e);throw e;}},get_artServiceOption:function(){try{var aI=this.Rg();this.cZ('get_artServiceOption',arguments,aI);return aI;}catch(e){this.af('get_artServiceOption',e);throw e;}},set_artServiceOption:function(value){try{this.ar('set_artServiceOption',arguments);this.YJ(value);}catch(e){this.af('set_artServiceOption',e);throw e;}},add_pageOpening:function(handler){try{this.XP(handler);}catch(e){this.af('add_pageOpening',e);throw e;}},remove_pageOpening:function(handler){try{this.Sq(handler);}catch(e){this.af('remove_pageOpening',e);throw e;}},add_pageOpened:function(handler){try{this.Wj(handler);}catch(e){this.af('add_pageOpened',e);throw e;}},remove_pageOpened:function(handler){try{this.Sr(handler);}catch(e){this.af('remove_pageOpened',e);throw e;}},add_pageClosed:function(handler){try{this.azE(handler);}catch(e){this.af('add_pageClosed',e);throw e;}},remove_pageClosed:function(handler){try{this.azH(handler);}catch(e){this.af('remove_pageClosed',e);throw e;}},add_pageOpenFailed:function(handler){try{this.Ki(handler);}catch(e){this.af('add_pageOpenFailed',e);throw e;}},remove_pageOpenFailed:function(handler){try{this.EZ(handler);}catch(e){this.af('remove_pageOpenFailed',e);throw e;}},add_pageDisplayed:function(handler){try{this.Wy(handler);}catch(e){this.af('add_pageDisplayed',e);throw e;}},remove_pageDisplayed:function(handler){try{this.Wq(handler);}catch(e){this.af('remove_pageDisplayed',e);throw e;}},add_mouseDown:function(handler){try{this.Om(handler);}catch(e){this.af('add_mouseDown',e);throw e;}},remove_mouseDown:function(handler){try{this.VS(handler);}catch(e){this.af('remove_mouseDown',e);throw e;}},add_mouseMove:function(handler){try{this.NT(handler);}catch(e){this.af('add_mouseMove',e);throw e;}},remove_mouseMove:function(handler){try{this.Uy(handler);}catch(e){this.af('remove_mouseMove',e);throw e;}},add_mouseUp:function(handler){try{this.Oi(handler);}catch(e){this.af('add_mouseUp',e);throw e;}},remove_mouseUp:function(handler){try{this.VH(handler);}catch(e){this.af('remove_mouseUp',e);throw e;}},add_contextMenu:function(handler){try{this.auY(handler);}catch(e){this.af('add_contextMenu',e);throw e;}},remove_contextMenu:function(handler){try{this.aCk(handler);}catch(e){this.af('remove_contextMenu',e);throw e;}},add_markAdded:function(handler){try{this.yW(handler);}catch(e){this.af('add_markAdded',e);throw e;}},remove_markAdded:function(handler){try{this.zs(handler);}catch(e){this.af('remove_markAdded',e);throw e;}},add_markCreating:function(handler){try{this.aba(handler);}catch(e){this.af('add_markCreating',e);throw e;}},remove_markCreating:function(handler){try{this.Tl(handler);}catch(e){this.af('remove_markCreating',e);throw e;}},add_markChanged:function(handler){try{this.Ka(handler);}catch(e){this.af('add_markChanged',e);throw e;}},remove_markChanged:function(handler){try{this.HQ(handler);}catch(e){this.af('remove_markChanged',e);throw e;}},add_markRemoved:function(handler){try{this.yo(handler);}catch(e){this.af('add_markRemoved',e);throw e;}},remove_markRemoved:function(handler){try{this.zr(handler);}catch(e){this.af('remove_markRemoved',e);throw e;}},add_markReordered:function(handler){try{this.Jk(handler);}catch(e){this.af('add_markReordered',e);throw e;}},remove_markReordered:function(handler){try{this.EQ(handler);}catch(e){this.af('remove_markReordered',e);throw e;}},add_marksLoaded:function(handler){try{this.XF(handler);}catch(e){this.af('add_marksLoaded',e);throw e;}},remove_marksLoaded:function(handler){try{this.VQ(handler);}catch(e){this.af('remove_marksLoaded',e);throw e;}},add_markSelectionChanged:function(handler){try{this.Ji(handler);}catch(e){this.af('add_markSelectionChanged',e);throw e;}},remove_markSelectionChanged:function(handler){try{this.FN(handler);}catch(e){this.af('remove_markSelectionChanged',e);throw e;}},add_selectTextMouseToolCompleted:function(handler){try{this.ZJ(handler);}catch(e){this.af('add_selectTextMouseToolCompleted',e);throw e;}},remove_selectTextMouseToolCompleted:function(handler){try{this.Vl(handler);}catch(e){this.af('remove_selectTextMouseToolCompleted',e);throw e;}},add_textPageReady:function(handler){try{this.xG(handler);}catch(e){this.af('add_textPageReady',e);throw e;}},remove_textPageReady:function(handler){try{this.GB(handler);}catch(e){this.af('remove_textPageReady',e);throw e;}},add_exceptionThrown:function(handler){this.abT(handler);},remove_exceptionThrown:function(handler){this.Qw(handler);},add_scaleChanged:function(handler){try{this.Zz(handler);}catch(e){this.af('add_scaleChanged',e);throw e;}},remove_scaleChanged:function(handler){try{this.VN(handler);}catch(e){this.af('remove_scaleChanged',e);throw e;}},add_propertyChanged:function(handler){try{this.lw(handler);}catch(e){this.af('add_propertyChanged',e);throw e;}},remove_propertyChanged:function(handler){try{this.nd(handler);}catch(e){this.af('remove_propertyChanged',e);throw e;}},add_textExtractionFailed:function(handler){this.xh(handler);},remove_textExtractionFailed:function(handler){this.GD(handler);},writeToLog:function(message){try{this.lY(message);}catch(e){this.af('writeToLog',e);throw e;}},fitPage:function(type){try{this.ar('fitPage',arguments);this.Vy(type);}catch(e){this.af('fitPage',e);throw e;}},get_pageIsOpen:function(){try{var aI=this.en();this.cZ('get_pageIsOpen',arguments,aI);return aI;}catch(e){this.af('get_pageIsOpen',e);throw e;}},get_pageWidth:function(){try{var aI=this.kS();this.cZ('get_pageWidth',arguments,aI);return aI;}catch(e){this.af('get_pageWidth',e);throw e;}},get_pageHeight:function(){try{var aI=this.hX();this.cZ('get_pageHeight',arguments,aI);return aI;}catch(e){this.af('get_pageHeight',e);throw e;}},get_pageXResolution:function(){try{var aI=this.azF();this.cZ('get_pageXResolution',arguments,aI);return aI;}catch(e){this.af('get_pageXResolution',e);throw e;}},get_pageYResolution:function(){try{var aI=this.azN();this.cZ('get_pageYResolution',arguments,aI);return aI;}catch(e){this.af('get_pageYResolution',e);throw e;}},get_documentIdentifier:function(){try{var aI=this.Ku();this.cZ('get_documentIdentifier',arguments,aI);return aI;}catch(e){this.af('get_documentIdentifier',e);throw e;}},get_encodedDocumentIdentifier:function(){try{var aI=this.Mp();this.cZ('get_encodedDocumentIdentifier',arguments,aI);return aI;}catch(e){this.af('get_encodedDocumentIdentifier',e);throw e;}},get_pageNumber:function(){try{var aI=this.oO();this.cZ('get_pageNumber',arguments,aI);return aI;}catch(e){this.af('get_pageNumber',e);throw e;}},get_documentPageCount:function(){try{var aI=this.atq();this.cZ('get_documentPageCount',arguments,aI);return aI;}catch(e){this.af('get_documentPageCount',e);throw e;}},get_displayedPageRectangle:function(){try{var aI=this.agG();this.cZ('get_displayedPageRectangle',arguments,aI);return aI;}catch(e){this.af('get_displayedPageRectangle',e);throw e;}},get_currentState:function(){try{var aI=this.KU();this.cZ('get_currentState',arguments,aI);return aI;}catch(e){this.af('get_currentState',e);throw e;}},zoomIn:function(factor){try{this.ar('zoomIn',arguments);this.Mv(factor);}catch(e){this.af('zoomIn',e);throw e;}},zoomOut:function(factor){try{this.ar('zoomOut',arguments);this.ZY(factor);}catch(e){this.af('zoomOut',e);throw e;}},set_sharpening:function(factor){try{this.ar('set_sharpening',arguments);this.DB(factor);}catch(e){this.af('set_sharpening',e);throw e;}},set_gamma:function(factor){try{this.ar('set_gamma',arguments);this.Ga(factor);}catch(e){this.af('set_gamma',e);throw e;}},set_svgLineWidthMultiplier:function(factor){try{this.ar('set_svgLineWidthMultiplier',arguments);this.DV(factor);}catch(e){this.af('set_svgLineWidthMultiplier',e);throw e;}},zoom:function(factor){try{this.ar('zoom',arguments);this.kX(factor);}catch(e){this.af('zoom',e);throw e;}},rotate:function(degreesClockwise){try{this.ar('rotate',arguments);this.wB(degreesClockwise);}catch(e){this.af('rotate',e);throw e;}},showPageRectangle:function(imageRectangle){try{this.ar('showPageRectangle',arguments,1);this.art(imageRectangle);}catch(e){this.af('showPageRectangle',e);throw e;}},showPagePointAtCenter:function(imagePoint){try{this.ar('showPagePointAtCenter',arguments,1);this.arv(imagePoint);}catch(e){this.af('showPagePointAtCenter',e);throw e;}},mirror:function(){try{this.ar('mirror',arguments);this.amc();}catch(e){this.af('mirror',e);throw e;}},flip:function(){try{this.ar('flip',arguments);this.ako();}catch(e){this.af('flip',e);throw e;}},display:function(){try{this.ar('display',arguments);this.dC();}catch(e){this.af('display',e);throw e;}},openPage:function(parameters){try{this.ar('openPage',arguments,1);this.Nn(parameters);}catch(e){this.af('openPage',e);throw e;}},closePage:function(){try{this.ar('closePage',arguments);this.NN();}catch(e){this.af('closePage',e);throw e;}},hideSelection:function(){try{this.ar('hideSelection',arguments);this.pq();}catch(e){this.af('hideSelection',e);throw e;}},showSelection:function(imageRectangle){try{this.ar('showSelection',arguments);this.asN(imageRectangle);}catch(e){this.af('showSelection',e);throw e;}},showEmptySelection:function(imagePoint){try{this.ar('showEmptySelection',arguments);this.Dn(imagePoint);}catch(e){this.af('showEmptySelection',e);throw e;}},extendSelection:function(imagePoint){try{this.ar('extendSelection',arguments);this.zX(imagePoint);}catch(e){this.af('extendSelection',e);throw e;}},saveArtPage:function(onSave){try{this.ar('saveArtPage',arguments);this.Ss(onSave);}catch(e){this.af('saveArtPage',e);throw e;}},get_selectionPageRectangle:function(){try{var aI=this.wb();this.cZ('get_selectionPageRectangle',arguments,aI);return aI;}catch(e){this.af('get_selectionPageRectangle',e);throw e;}},get_selectionWindowRectangle:function(){try{var aI=this.ays();this.cZ('get_selectionWindowRectangle',arguments,aI);return aI;}catch(e){this.af('get_selectionWindowRectangle',e);throw e;}},get_selectionIsVisible:function(){try{var aI=this.Ce();this.cZ('get_selectionIsVisible',arguments,aI);return aI;}catch(e){this.af('get_selectionIsVisible',e);throw e;}},get_controlStateElementId:function(){try{var aI=this.awv();this.cZ('get_controlStateElementId',arguments,aI);return aI;}catch(e){this.af('get_controlStateElementId',e);throw e;}},set_controlStateElementId:function(value){try{this.ar('set_controlStateElementId',arguments);this.aDV(value);}catch(e){this.af('set_controlStateElementId',e);throw e;}},get_includeArtInPostBack:function(){try{var aI=this.azh();this.cZ('get_includeArtInPostBack',arguments,aI);return aI;}catch(e){this.af('get_includeArtInPostBack',e);throw e;}},set_includeArtInPostBack:function(value){try{this.ar('set_includeArtInPostBack',arguments);this.anK(value);}catch(e){this.af('set_includeArtInPostBack',e);throw e;}},get_artPage:function(){try{var aI=this.ee();this.cZ('get_artPage',arguments,aI);return aI;}catch(e){this.af('get_artPage',e);throw e;}},set_artPage:function(value){try{this.ar('set_artPage',arguments);this.na(value);}catch(e){this.af('set_artPage',e);throw e;}},get_documentArtPage:function(){try{var aI=this.Me();this.cZ('get_documentArtPage',arguments,aI);return aI;}catch(e){this.af('get_documentArtPage',e);throw e;}},set_documentArtPage:function(value){try{this.ar('set_documentArtPage',arguments);this.JY(value);}catch(e){this.af('set_documentArtPage',e);throw e;}},get_transientArtPage:function(){try{var aI=this.mf();this.cZ('get_transientArtPage',arguments,aI);return aI;}catch(e){this.af('get_transientArtPage',e);throw e;}},set_transientArtPage:function(value){try{this.ar('set_transientArtPage',arguments);this.Ep(value);}catch(e){this.af('set_transientArtPage',e);throw e;}},get_imageHandlerUrl:function(){try{var aI=this.ts();this.cZ('get_imageHandlerUrl',arguments,aI);return aI;}catch(e){this.af('get_imageHandlerUrl',e);throw e;}},set_imageHandlerUrl:function(value){try{this.ar('set_imageHandlerUrl',arguments);this.abD(value);}catch(e){this.af('set_imageHandlerUrl',e);throw e;}},get_resourcePath:function(){try{var aI=this.wH();this.cZ('get_resourcePath',arguments,aI);return aI;}catch(e){this.af('get_resourcePath',e);throw e;}},set_resourcePath:function(R){try{this.ar('set_resourcePath',arguments);this.Jg(R);}catch(e){this.af('set_resourcePath',e);throw e;}},get_contextMenuLanguageDictionary:function(){try{var aI=this.js();this.cZ('get_contextMenuLanguageDictionary',arguments,aI);return aI;}catch(e){this.af('get_contextMenuLanguageDictionary',e);throw e;}},set_contextMenuLanguageDictionary:function(R){try{this.ar('set_contextMenuLanguageDictionary',arguments);this.aDn(R);}catch(e){this.af('set_contextMenuLanguageDictionary',e);throw e;}},get_textRequired:function(){try{var aI=this.jW();this.cZ('get_textRequired',arguments,aI);return aI;}catch(e){this.af('get_textRequired',e);throw e;}},set_textRequired:function(R){try{this.ar('set_textRequired',arguments);this.Jx(R);}catch(e){this.af('set_textRequired',e);throw e;}},get_textPage:function(){try{var aI=this.cd();this.cZ('get_textPage',arguments,aI);return aI;}catch(e){this.af('get_textPage',e);throw e;}},get_textSelectionIsVisible:function(){try{var aI=this.JZ();this.Cv('textSelectionIsVisible',arguments,aI,1);return aI;}catch(e){this.af('textSelectionIsVisible',e);throw e;}},getSelectedText:function(){try{var aI=this.BB();this.Cv('getSelectedText',arguments,aI,1);return aI;}catch(e){this.af('getSelectedText',e);throw e;}},get_requireRequestsOptimize:function(){try{var aI=this.CC();this.cZ('get_requireRequestsOptimize',arguments,aI);return aI;}catch(e){this.af('CC',e);throw e;}},set_requireRequestsOptimize:function(value){try{this.ar('set_requireRequestsOptimize',arguments);this.Kg(value);}catch(e){this.af('set_requireRequestsOptimize',e);throw e;}},get_magnifierMagnification:function(){try{var aI=this.ayU();this.cZ('get_magnifierMagnification',arguments,aI);return aI;}catch(e){this.af('get_magnifierMagnification',e);throw e;}},set_magnifierMagnification:function(value){try{this.ar('set_magnifierMagnification',arguments);this.aoX(value);}catch(e){this.af('set_magnifierMagnification',e);throw e;}},get_magnifierWidth:function(){try{var aI=this.aAH();this.cZ('get_magnifierWidth',arguments,aI);return aI;}catch(e){this.af('get_magnifierWidth',e);throw e;}},set_magnifierWidth:function(value){try{this.ar('set_magnifierWidth',arguments);this.aop(value);}catch(e){this.af('set_magnifierWidth',e);throw e;}},get_magnifierHeight:function(){try{var aI=this.axP();this.cZ('get_magnifierHeight',arguments,aI);return aI;}catch(e){this.af('get_magnifierHeight',e);throw e;}},set_magnifierHeight:function(value){try{this.ar('set_magnifierHeight',arguments);this.aoj(value);}catch(e){this.af('set_magnifierHeight',e);throw e;}},get_magnifierXOffset:function(){try{var aI=this.Or();this.cZ('get_magnifierXOffset',arguments,aI);return aI;}catch(e){this.af('get_magnifierXOffset',e);throw e;}},set_magnifierXOffset:function(value){try{this.ar('set_magnifierXOffset',arguments);this.Tz(value);}catch(e){this.af('set_magnifierXOffset',e);throw e;}},get_magnifierYOffset:function(){try{var aI=this.Lc();this.cZ('get_magnifierYOffset',arguments,aI);return aI;}catch(e){this.af('get_magnifierYOffset',e);throw e;}},set_magnifierYOffset:function(value){try{this.ar('set_magnifierYOffset',arguments);this.aaY(value);}catch(e){this.af('set_magnifierYOffset',e);throw e;}},showMagnifier:function(windowPoint){try{this.ar('showMagnifier',arguments,1);this.arR(windowPoint);}catch(e){this.af('showMagnifier',e);throw e;}},hideMagnifier:function(){try{this.ar('hideMagnifier',arguments);this.ayB();}catch(e){this.af('hideMagnifier',e);throw e;}},get_markHandleSize:function(){try{var aI=this.ZM();this.cZ('get_markHandleSize',arguments,aI);return aI;}catch(e){this.af('get_markHandleSize',e);throw e;}},set_markHandleSize:function(value){try{this.ar('set_markHandleSize',arguments);this.WR(value);}catch(e){this.af('set_markHandleSize',e);throw e;}},get_markHandleMode:function(){try{var aI=this.AQ();this.cZ('get_markHandleMode',arguments,aI);return aI;}catch(e){this.af('get_markHandleMode',e);throw e;}},set_markHandleMode:function(value){try{this.ar('set_markHandleMode',arguments);this.It(value);}catch(e){this.af('set_markHandleMode',e);throw e;}},get_mouseTool:function(){try{var aI=this.Yv();this.cZ('get_mouseTool',arguments,aI);return aI;}catch(e){this.af('get_mouseTool',e);throw e;}},set_mouseTool:function(value){try{this.ar('set_mouseTool',arguments);this.HY(value);}catch(e){this.af('set_mouseTool',e);throw e;}},get_presentationQuality:function(){try{var aI=this.aAA();this.cZ('get_presentationQuality',arguments,aI);return aI;}catch(e){this.af('get_presentationQuality',e);throw e;}},set_presentationQuality:function(value){try{this.ar('set_presentationQuality',arguments);this.apr(value);}catch(e){this.af('set_presentationQuality',e);throw e;}},get_scrollBars:function(){try{var aI=this.ayw();this.cZ('get_scrollBars',arguments,aI);return aI;}catch(e){this.af('get_scrollBars',e);throw e;}},set_scrollBars:function(value){try{this.ar('set_scrollBars',arguments);this.apo(value);}catch(e){this.af('set_scrollBars',e);throw e;}},get_imGearPage:function(){try{var aI=this.nM();this.cZ('get_imGearPage',arguments,aI);return aI;}catch(e){this.af('get_imGearPage',e);throw e;}},set_imGearPage:function(value){try{this.ar('set_imGearPage',arguments);this.Dr(value);}catch(e){this.af('set_imGearPage',e);throw e;}},get_serviceResponseTimeout:function(){try{var aI=this.kE();this.cZ('get_serviceResponseTimeout',arguments,aI);return aI;}catch(e){this.af('get_serviceResponseTimeout',e);throw e;}},set_serviceResponseTimeout:function(value){try{this.ar('set_serviceResponseTimeout',arguments);this.yH(value);}catch(e){this.af('set_serviceResponseTimeout',e);throw e;}},get_currentTextIndex:function(){try{var aI=this.Bv();this.cZ('get_currentTextIndex',arguments,aI);return aI;}catch(e){this.af('get_currentTextIndex',e);throw e;}},get_cursor:function(){try{var aI=this.aty();this.cZ('get_cursor',arguments,aI);return aI;}catch(e){this.af('get_cursor',e);throw e;}},set_cursor:function(value){try{this.ar('set_cursor',arguments);this.aCC(value);}catch(e){this.af('set_cursor',e);throw e;}},get_encryption:function(){try{var aI=this.jt();this.cZ('get_encryption',arguments,aI);return aI;}catch(e){this.af('get_encryption',e);throw e;}},set_encryption:function(value){try{this.ar('set_encryption',arguments);this.ou(value);}catch(e){this.af('set_encryption',e);throw e;}},transformPagePointToWindow:function(imagePoint,constrainResultToWindow){try{var aI=this.arj(imagePoint,constrainResultToWindow);this.Cv('transformPagePointToWindow',arguments,aI,1);return aI;}catch(e){this.af('transformPagePointToWindow',e);throw e;}},transformWindowPointToPage:function(windowPoint,constrainResultToImage){try{var aI=this.PS(windowPoint,constrainResultToImage);this.Cv('transformWindowPointToPage',arguments,aI,1);return aI;}catch(e){this.af('transformWindowPointToPage',e);throw e;}},transformPagePointToTextIndex:function(pagePoint){try{var aI=this.Kt(pagePoint);this.Cv('transformPagePointToTextIndex',arguments,aI,1);return aI;}catch(e){this.af('transformPagePointToTextIndex',e);throw e;}},removeAllHighlights:function(){try{this.ar('removeAllHighlights',arguments);this.Uv();}catch(e){this.af('removeAllHighlights',e);throw e;}},showTextSelection:function(indexOfFirstCharacter,length){try{this.ar('showTextSelection',arguments);this.LM(indexOfFirstCharacter,length);}catch(e){this.af('showTextSelection',e);throw e;}},showEmptyTextSelection:function(textIndex){try{this.ar('showEmptyTextSelection',arguments);this.zY(textIndex);}catch(e){this.af('showEmptyTextSelection',e);throw e;}},extendTextSelection:function(textIndex){try{this.ar('extendTextSelection',arguments);this.tZ(textIndex);}catch(e){this.af('extendTextSelection',e);throw e;}},initializeViewControllers:function(showArtContextMenu){try{this.ar('initializeViewControllers',arguments);this.aoH(showArtContextMenu);}catch(e){this.af('initializeViewControllers',e);throw e;}},get_autoUpdate:function(){try{var aI=this.zA();this.cZ('get_autoUpdate',arguments,aI);return aI;}catch(e){this.af('get_autoUpdate',e);throw e;}},set_autoUpdate:function(value){try{this.ar('set_autoUpdate',arguments);this.St(value);}catch(e){this.af('set_autoUpdate',e);throw e;}}};module.exports=abb;},{}],114:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var pk=require('./FitType');var MJ=function(){return this;};MJ.prototype={documentIdentifier:'',encodedDocumentIdentifier:'',pageNumber:0,viewFitType:pk.FullImage,viewRectangle:null,viewRotationDegreesClockwise:0,viewMirror:false,viewZoomFactor:undefined,encryption:false};MJ.registerClass=da;MJ.registerClass('IPCC.Web.UI.PageViewState');module.exports=MJ;},{"../../IPCC.Util":28,"./FitType":74}],115:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var wC=function(x,y){this.x=x;this.y=y;return this;};wC.prototype={toString:function(){return 'Point('+this.x+', '+this.y+')';},constrain:function(rectangle){this.x=Math.min(Math.max(this.x,rectangle.x),rectangle.x+rectangle.width);this.y=Math.min(Math.max(this.y,rectangle.y),rectangle.y+rectangle.height);}};wC.registerClass=da;wC.registerClass('IPCC.Web.UI.Point');module.exports=wC;},{"../../IPCC.Util":28}],116:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var Qf=function(){var aW=[];var aK=new IPCC.Web.UI.jq();this.ayJ=function(bH){var J=new IPCC.Web.UI.PointEventArgs();J.point=bH;J.length=1;aW.push(new IPCC.Web.UI.Point(bH.x,bH.y));J.index=aW.length-1;this.bm('pointAdded',J);};this.axw=function(aeg){var J=new IPCC.Web.UI.PointEventArgs();J.index=aW.length;J.length=aeg.get_length();function jO(bH){aW.push(bH);};aeg.forEach(jO,{});if(J.length>0){this.bm('pointAdded',J);}};this.lx=function(hT,cC){var Xc=[].concat(aW);var H;for(H=0;H<Xc.length;H++){hT.call(cC,new IPCC.Web.UI.Point(Xc[H].x,Xc[H].y),H,this);}};this.yM=function(aJ){lf(aJ);var fr=aW[aJ];return new IPCC.Web.UI.Point(fr.x,fr.y);};this.aoN=function(aJ,bH){lf(aJ);IPCC.aA.bH(bH,'point');var OC=aW[aJ];if(OC.x===bH.x&&OC.y===bH.y){return;}OC.x=bH.x;OC.y=bH.y;var J=new IPCC.Web.UI.PointEventArgs();J.point=bH;J.index=aJ;J.length=1;this.bm('pointChanged',J);};this.ef=function(){return aW.length;};this.aCi=function(aJ){lf(aJ);var J=new IPCC.Web.UI.PointEventArgs();J.point=aW[aJ];J.index=aJ;J.length=1;aW.splice(aJ,1);this.bm('pointRemoved',J);};this.aAQ=function(){if(aW.length<1){return;}var J=new IPCC.Web.UI.PointEventArgs();J.index=0;J.length=aW.length;aW=[];this.bm('pointRemoved',J);};this.anj=function(fL,eN){if(fL===0&&eN===0){return;}IPCC.aA.iW(fL,'deltaX');IPCC.aA.iW(eN,'deltaY');var H;for(H=0;H<aW.length;H++){aW[H].x+=fL;aW[H].y+=eN;}var J=new IPCC.Web.UI.PointEventArgs();J.index=0;J.length=aW.length;this.bm('pointChanged',J);};this.sa=function(){if(aW.length<1){return new IPCC.Web.UI.Rectangle(0,0,0,0);}var H,hq=aW[0].x,iJ=aW[0].x,_top=aW[0].y,ib=aW[0].y;for(H=1;H<aW.length;H++){var bH=aW[H];hq=Math.min(hq,bH.x);iJ=Math.max(iJ,bH.x);_top=Math.min(_top,bH.y);ib=Math.max(ib,bH.y);}return new IPCC.Web.UI.Rectangle(hq,_top,iJ-hq,ib-_top);};function lf(aJ){if(aJ>aW.length-1||(aJ<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aJ);}};this.aAr=function(F){aK.addHandler('pointAdded',F);};this.aAv=function(F){aK.removeHandler('pointAdded',F);};this.azg=function(F){aK.addHandler('pointChanged',F);};this.azV=function(F){aK.removeHandler('pointChanged',F);};this.aAV=function(F){aK.addHandler('pointRemoved',F);};this.azq=function(F){aK.removeHandler('pointRemoved',F);};this.bm=function(cL,J){var F=aK.getHandler(cL);if(F!==null){F(this,J);}};return this;};Qf.prototype={toString:function(){return 'PointCollection with '+this.get_length()+' points';},addPoint:function(point){this.ayJ(point);},addPoints:function(pointCollection){this.axw(pointCollection);},forEach:function(method,context){this.lx(method,context);},getPoint:function(index){return this.yM(index);},setPoint:function(index,point){this.aoN(index,point);},get_length:function(){return this.ef();},removePoint:function(index){this.aCi(index);},removeAllPoints:function(){this.aAQ();},moveAllPoints:function(deltaX,deltaY){this.anj(deltaX,deltaY);},add_pointAdded:function(handler){this.aAr(handler);},remove_pointAdded:function(handler){this.aAv(handler);},add_pointChanged:function(handler){this.azg(handler);},remove_pointChanged:function(handler){this.azV(handler);},add_pointRemoved:function(handler){this.aAV(handler);},remove_pointRemoved:function(handler){this.azq(handler);}};Qf.registerClass=da;Qf.registerClass('IPCC.Web.UI.PointCollection');module.exports=Qf;},{"../../IPCC.Util":28}],117:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var Pj=function(){return this;};Pj.registerClass=da;Pj.prototype={};Pj.registerClass('IPCC.Web.UI.PointEventArgs');module.exports=Pj;},{"../../IPCC.Util":28}],118:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var Sd=function(x,y,width,height){if(width<0){x+=width;width= -width;}if(height<0){y+=height;height= -height;}this.x=x;this.y=y;this.width=width;this.height=height;return this;};Sd.prototype={intersect:function(rectangle){var ba=Math.max(this.x,rectangle.x);var aF=Math.min(this.x+this.width,rectangle.x+rectangle.width)-ba;var de=Math.max(this.y,rectangle.y);var bj=Math.min(this.y+this.height,rectangle.y+rectangle.height)-de;if(aF<=0||bj<=0){ba=de=aF=bj=0;}this.x=ba;this.y=de;this.width=aF;this.height=bj;},union:function(rectangle){var hq=Math.min(this.x,rectangle.x);var _top=Math.min(this.y,rectangle.y);var iJ=Math.max(this.x+this.width,rectangle.x+rectangle.width);var ib=Math.max(this.y+this.height,rectangle.y+rectangle.height);this.x=hq;this.y=_top;this.width=iJ-hq;this.height=ib-_top;return this;},scale:function(Xv,Qr){Qr=Qr||Xv;var hq=this.x*Xv;var _top=this.y*Qr;var aF=this.width*Xv;var bj=this.height*Qr;this.x=hq;this.y=_top;this.width=aF;this.height=bj;return this;},toString:function(){return 'Rectangle('+this.x+', '+this.y+', '+this.width+', '+this.height+')';},contains:function(point){return point.x>=this.x&&point.y>=this.y&&point.x<this.x+this.width&&point.y<this.y+this.height;},clone:function(){return new IPCC.Web.UI.Rectangle(this.x,this.y,this.width,this.height);},equals:function(other){return this.x===other.x&&this.y===other.y&&this.width===other.width&&this.height===other.height;}};Sd.registerClass=da;Sd.registerClass('IPCC.Web.UI.Rectangle');module.exports=Sd;},{"../../IPCC.Util":28}],119:[function(require,module,exports){var et=require('../../IPCC.Util').regEnum;var Qi=function(){};Qi.registerEnum=et;Qi.prototype={None:0,Both:3,Auto:4};Qi.registerEnum('IPCC.Web.UI.ScrollBars',false);module.exports=Qi;},{"../../IPCC.Util":28}],120:[function(require,module,exports){var da=require('../../IPCC.Util').regClass;var Nq=function(){return this;};Nq.registerClass=da;Nq.prototype={};Nq.registerClass('IPCC.Web.UI.TextSelectedEventArgs');module.exports=Nq;},{"../../IPCC.Util":28}],121:[function(require,module,exports){var Bu=require('./../../Type');var ZD={aun:1,ImGearDocumentHyperlink:require('./ImGearDocumentHyperlink'),ImGearTextCharacter:require('./ImGearTextCharacter'),ImGearTextCharacterCollection:require('./ImGearTextCharacterCollection'),ImGearHyperlinkCollection:require('./ImGearHyperlinkCollection'),ImGearHyperlinkPage:require('./ImGearHyperlinkPage'),ImGearTextPage:require('./ImGearTextPage'),ImGearTextSection:require('./ImGearTextSection'),ImGearTextSectionCollection:require('./ImGearTextSectionCollection'),ImGearPageCountStatus:require('./ImGearPageCountStatus'),ImGearPageCreateArgs:require('./ImGearPageCreateArgs'),ImGearPage:require('./ImGearPage'),ImGearPageEventArgs:require('./ImGearPageEventArgs'),ImGearPageCollection:require('./ImGearPageCollection'),ImGearDocumentCreateArgs:require('./ImGearDocumentCreateArgs'),ImGearDocument:require('./ImGearDocument'),ImGearDocumentEventArgs:require('./ImGearDocumentEventArgs'),ImGearDocumentCollection:require('./ImGearDocumentCollection'),ImGearPageOpenFailedEventArgs:require('./ImGearPageOpenFailedEventArgs'),ImGearExceptions:require('./ImGearExceptions'),ImGearException:require('./ImGearExceptions').Ek,ImGearHttpException:require('./ImGearExceptions').Cu,ImGearArgumentException:require('./ImGearExceptions').sj,ImGearArgumentNullException:require('./ImGearExceptions').Ct,ImGearArgumentOutOfRangeException:require('./ImGearExceptions').rW,ImGearArgumentTypeException:require('./ImGearExceptions').ImGearArgumentTypeException,ImGearArgumentUndefinedException:require('./ImGearExceptions').DS,ImGearInvalidOperationException:require('./ImGearExceptions').Bb,ImGearNotImplementedException:require('./ImGearExceptions').Bp,ImGearParameterCountException:require('./ImGearExceptions').Bw,jq:require('./ImGearEventHandlerList'),ImGearArtDataServices:require('./ImGearArtDataServices'),MouseButton:require('./MouseButton'),MouseTool:require('./MouseTool'),ah:require('./DomEvent'),DebugErrorLevel:require('./DebugErrorLevel'),DebugItemCause:require('./DebugItemCause'),PageView:require('./PageView'),PageViewState:require('./PageViewState'),ArtPage:require('./ArtPage'),Key:require('./Key'),FitType:require('./FitType'),ScrollBars:require('./ScrollBars'),Rectangle:require('./Rectangle'),Point:require('./Point'),PointCollection:require('./PointCollection'),LogItemEventArgs:require('./LogItemEventArgs'),MouseEventArgs:require('./MouseEventArgs'),PointEventArgs:require('./PointEventArgs'),CommentEventArgs:require('./CommentEventArgs'),TextSelectedEventArgs:require('./TextSelectedEventArgs'),HighLightType:require('./HighlightType'),LineStyle:require('./LineStyle'),LineHeadType:require('./LineHeadType'),CalloutType:require('./CalloutType'),FontStyle:require('./FontStyle'),HorizontalAlignment:require('./HorizontalAlignment'),VerticalAlignment:require('./VerticalAlignment'),Orientation:require('./Orientation'),MarkHandleMode:require('./MarkHandleMode'),MarkInteractionMode:require('./MarkInteractionMode'),MarkType:require('./MarkType'),MarkEventArgs:require('./MarkEventArgs'),MarkCollection:require('./MarkCollection'),Mark:require('./Mark'),Comment:require('./Comment'),Conversation:require('./Conversation'),Data:require('./Data'),YF:require('./highlightItem')};Bu.registerNamespace('IPCC.Web.UI');module.exports=ZD;},{"./../../Type":56,"./ArtPage":65,"./CalloutType":66,"./Comment":67,"./CommentEventArgs":68,"./Conversation":69,"./Data":70,"./DebugErrorLevel":71,"./DebugItemCause":72,"./DomEvent":73,"./FitType":74,"./FontStyle":75,"./HighlightType":76,"./HorizontalAlignment":77,"./ImGearArtDataServices":78,"./ImGearDocument":79,"./ImGearDocumentCollection":80,"./ImGearDocumentCreateArgs":81,"./ImGearDocumentEventArgs":82,"./ImGearDocumentHyperlink":83,"./ImGearEventHandlerList":84,"./ImGearExceptions":85,"./ImGearHyperlinkCollection":86,"./ImGearHyperlinkPage":87,"./ImGearPage":88,"./ImGearPageCollection":89,"./ImGearPageCountStatus":90,"./ImGearPageCreateArgs":91,"./ImGearPageEventArgs":92,"./ImGearPageOpenFailedEventArgs":93,"./ImGearTextCharacter":94,"./ImGearTextCharacterCollection":95,"./ImGearTextPage":96,"./ImGearTextSection":97,"./ImGearTextSectionCollection":98,"./Key":99,"./LineHeadType":100,"./LineStyle":101,"./LogItemEventArgs":102,"./Mark":103,"./MarkCollection":104,"./MarkEventArgs":105,"./MarkHandleMode":106,"./MarkInteractionMode":107,"./MarkType":108,"./MouseButton":109,"./MouseEventArgs":110,"./MouseTool":111,"./Orientation":112,"./PageView":113,"./PageViewState":114,"./Point":115,"./PointCollection":116,"./PointEventArgs":117,"./Rectangle":118,"./ScrollBars":119,"./TextSelectedEventArgs":120,"./VerticalAlignment":122,"./highlightItem":123}],122:[function(require,module,exports){var et=require('../../IPCC.Util').regEnum;var KE=function(){};KE.registerEnum=et;KE.prototype={Top:0,Center:1,Bottom:2};KE.registerEnum('IPCC.Web.UI.VerticalAlignment',false);module.exports=KE;},{"../../IPCC.Util":28}],123:[function(require,module,exports){var YF=function(){this.fV=undefined;this.cB=[];this.aZ={};};module.exports=YF;},{}],124:[function(require,module,exports){var ZD=require('././UI/UI');var T=require('./../IPCC.Util');var BY=require('./Cipher');var ayX=require('./Hash');var hs=require('./Codec');var BS=require('./Mode');var gp={};gp.awq=[];gp.xS=function(ba){return!isNaN(ba-0)&&ba!==null;};gp.AG=function(sz,cI){return IPCC.Web.amm(false,arguments);};gp.agZ=function(sz,cI){return IPCC.Web.amm(true,arguments);};gp.amm=function(useLocale,cI){var am='';var sz=cI[0];for(var H=0;;){var eB=sz.indexOf('{',H);var lH=sz.indexOf('}',H);if((eB<0)&&(lH<0)){am+=sz.slice(H);break;}if((lH>0)&&((lH<eB)||(eB<0))){if(sz.charAt(close+1)!=='}'){throw new IPCC.Web.UI.ImGearArgumentException('format','The format string contains an unmatched opening or closing brace.');}am+=sz.slice(H,lH+1);H=lH+2;continue;}am+=sz.slice(H,eB);H=eB+1;if(sz.charAt(H)==='{'){am+='{';H++;continue;}if(lH<0){throw new IPCC.Web.UI.ImGearArgumentException('format','The format string contains an unmatched opening or closing brace.');}var Rk=sz.substring(H,lH);var Nv=Rk.indexOf(':');var ajz=parseInt((Nv<0)?Rk:Rk.substring(0,Nv),10)+1;if(isNaN(ajz)){throw new IPCC.Web.UI.ImGearArgumentException('format','The format string is invalid.');}var YG=(Nv<0)?'':Rk.substring(Nv+1);var uk=cI[ajz];if(typeof(uk)==="undefined"||uk===null){uk='';}if(uk.toFormattedString){am+=uk.toFormattedString(YG);}else if(useLocale&&uk.agZ){am+=uk.agZ(YG);}else if(uk.format){am+=uk.format(YG);}else{am+=uk.toString();}H=lH+1;}return am;};gp.aIU=function(wy){var qy=wy.length;var vz=Math.ceil(qy/4),QQ;var fu=[];fu.length=vz;for(var km=0,gn=0;km<vz;km++,gn+=4){fu[km]=((wy[gn]&0xff)<<24)+((wy[gn+1]&0xff)<<16)+((wy[gn+2]&0xff)<<8)+(wy[gn+3]&0xff);}if(gn<qy){QQ[km]=0;for(var vv=0;gn<qy;gn++,vv++){QQ[km]+=(wy[gn++]&0xff)<<(3-vv);}}return fu;};gp.asl=function(aO){var qy=aO.length;var vz=Math.ceil(qy/4);var fu=[];fu.length=vz;for(var km=0,gn=0;km<vz;km++,gn+=4){fu[km]=((aO.charCodeAt(gn)&0xff)<<24)+((aO.charCodeAt(gn+1)&0xff)<<16)+((aO.charCodeAt(gn+2)&0xff)<<8)+((aO.charCodeAt(gn+3)&0xff));}if(gn<qy){fu[km]=0;for(var vv=0;gn<qy;gn++,vv++){fu[km]+=(aO.charCodeAt(gn++)&0xff)<<(3-vv);}}return fu;};gp.aGZ=function(ze){var FO=new Uint8Array(ze);var qy=FO.length;var vz=Math.ceil(qy/4),QQ;var fu=[];fu.length=vz;for(var km=0,gn=0;km<vz;km++,gn+=4){fu[km]=(FO[gn]<<24)+(FO[gn+1]<<16)+(FO[gn+2]<<8)+FO[gn+3];}if(gn<qy){fu[km]=0;for(var vv=0;gn<qy;gn++,vv++){QQ[km]+=FO[gn++]<<(3-vv);}}return fu;};gp.IV=function(fu,fY){var aV=[0x116D0662,0xA8BB5E38,0x4D7F93C8,0xA61D2F6B,0xADB1384D,0x3D4AC7FB,0x4E6EB64E,0x6F4D7E8F];return IPCC.Web.CS(fu,aV,fY);};gp.CS=function(fu,aV,fY){try{var ayh=new IPCC.Web.BY.ajv(aV);var dg=IPCC.Web.BS.aoY.Xi(ayh,fu,fY);return dg;}catch(aY){return;}};gp.Hw=function(Fh){return IPCC.Web.asl(Fh.responseText);};gp.Ru=function(){var EH=new Date();var avr=new Date(EH.getYear(),EH.getMonth(),EH.getDate(),EH.getHours(),EH.getMinutes(),EH.getSeconds());return(+avr);};gp.jQ=function(cg,elt){var len=cg.length>>>0;var from=Number(arguments[2])||0;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len;}for(;from<len;from++){if(from in cg&&cg[from]===elt){return from;}}return-1;};gp.auU=function aFa(){var ky=0xefc8249d;var te=function(dg){dg=dg.toString();for(var H=0;H<dg.length;H++){ky+=dg.charCodeAt(H);var eK=0.02519603282416938*ky;ky=eK>>>0;eK-=ky;eK*=ky;ky=eK>>>0;eK-=ky;ky+=eK*0x100000000;}return(ky>>>0)*2.3283064365386963e-10;};te.zf='Mash 0.9';return te;};gp.ail=function aGl(){return(function(cI){var Gs=0;var FU=0;var Aj=0;var ff=1;if(cI.length===0){cI=[+new Date()];}var te=IPCC.Web.auU();Gs=te(' ');FU=te(' ');Aj=te(' ');for(var H=0;H<cI.length;H++){Gs-=te(cI[H]);if(Gs<0){Gs+=1;}FU-=te(cI[H]);if(FU<0){FU+=1;}Aj-=te(cI[H]);if(Aj<0){Aj+=1;}}te=null;var wv=function(){var qS=2091639*Gs+ff*2.3283064365386963e-10;Gs=FU;FU=Aj;Aj=qS-(ff=qS|0);return Aj;};wv.amv=function(){return wv()*0x100000000;};wv.aHe=function(){return wv()+(wv()*0x200000|0)*1.1102230246251565e-16;};wv.zf='Alea 0.9';wv.cI=cI;return wv;}(Array.prototype.slice.call(arguments)));};gp.oT=function(){if(this.ajR===undefined){var zB=document.createElement("div");zB.style.overflow='scroll';zB.style.position='absolute';zB.style.top='-9999px';document.body.appendChild(zB);this.ajR=zB.offsetWidth-zB.clientWidth;document.body.removeChild(zB);}return this.ajR;};gp.FD={ajd:function(gv){var GX=[];var YN=IPCC.Web.ail().amv;for(var H=0;H<gv;H++){GX.push(YN());}return GX;},SM:function(gv,fi){var GX=[];var YN=IPCC.Web.ail(fi).amv;for(var H=0;H<gv;H++){GX.push(YN());}return GX;},aHU:function(fY,avU){var gv,lX=true,fA="",Kq,abR,WQ,KJ,Qn,anz;for(gv=0;gv<4;gv++){if(!lX){fA+='-';}else{lX=false;}Qn=0;for(Kq=0;Kq<4;Kq++){KJ=gv*32+Kq*8;abR=IPCC.Web.hA.WZ(fY,KJ,4);fA+=abR.toString(16).toUpperCase();WQ=IPCC.Web.hA.WZ(fY,KJ+4,4);fA+=WQ.toString(16).toUpperCase();anz=(abR*16+WQ+IPCC.Web.hA.WZ(IPCC.Web.aV,KJ,8))%256;Qn=Qn|(anz<<(24-(Kq*8)));}avU.awq[gv]=Qn;}return fA;}};gp.aV=[0x4B1C9AAE,0x25AE1AB6,0x48E3F1C8,0x8D61FC1A];gp.hA={SH:function(dR,sq,acP){dR=IPCC.Web.hA.aeI(dR.slice(sq/32),32-(sq&31)).slice(1);return(acP===undefined)?dR:IPCC.Web.hA.Sj(dR,acP-sq);},WZ:function(dR,sq,TZ){var ba,Wi=Math.floor((-sq-TZ)&31);if((sq+TZ-1^sq)& -32){ba=(dR[sq/32|0]<<(32-Wi))^(dR[sq/32+1|0]>>>Wi);}else{ba=dR[sq/32|0]>>>Wi;}return ba&((1<<TZ)-1);},Vv:function(AH,uQ){if(AH.length===0||uQ.length===0){return AH.concat(uQ);}var kZ=AH[AH.length-1],sL=IPCC.Web.hA.Uk(kZ);if(sL===32){return AH.concat(uQ);}else{return IPCC.Web.hA.aeI(uQ,sL,kZ|0,AH.slice(0,AH.length-1));}},xc:function(dR){var rn=dR.length,ba;if(rn===0){return 0;}ba=dR[rn-1];return(rn-1)*32+IPCC.Web.hA.Uk(ba);},Sj:function(dR,cl){if(dR.length*32<cl){return dR;}dR=dR.slice(0,Math.ceil(cl/32));var rn=dR.length;cl=cl&31;if(rn>0&&cl){dR[rn-1]=IPCC.Web.hA.IX(cl,dR[rn-1]&0x80000000>>(cl-1),1);}return dR;},IX:function(cl,ba,eg){if(cl===32){return ba;}return(eg?ba|0:ba<<(32-cl))+cl*0x10000000000;},Uk:function(ba){return Math.round(ba/0x10000000000)||32;},aEf:function(dR,dU){if(IPCC.Web.hA.xc(dR)!==IPCC.Web.hA.xc(dU)){return false;}var ba=0,H;for(H=0;H<dR.length;H++){ba|=dR[H]^dU[H];}return(ba===0);},aeI:function(dR,sL,Jn,fA){var H,afl=0,Yi;if(fA===undefined){fA=[];}for(;sL>=32;sL-=32){fA.push(Jn);Jn=0;}if(sL===0){return fA.concat(dR);}for(H=0;H<dR.length;H++){fA.push(Jn|dR[H]>>>sL);Jn=dR[H]<<(32-sL);}afl=dR.length?dR[dR.length-1]:0;Yi=IPCC.Web.hA.Uk(afl);fA.push(IPCC.Web.hA.IX(sL+Yi&31,(sL+Yi>32)?Jn:fA.pop(),1));return fA;},aiO:function(ba,de){return[ba[0]^de[0],ba[1]^de[1],ba[2]^de[2],ba[3]^de[3]];}};gp.BY=BY;gp.rf=ayX;gp.hs=hs;gp.BS=BS;gp.aic=T.aic;gp.UI=ZD;gp.regEnum=T.regEnum;gp.regClass=T.regClass;module.exports=gp;},{"./../IPCC.Util":28,"././UI/UI":121,"./Cipher":61,"./Codec":62,"./Hash":63,"./Mode":64}],125:[function(require,module,exports){var YQ=function ImageGearIndexOf(array,item,start){if(typeof(item)==="undefined"){return-1;}var length=array.length;if(length!==0){start=start-0;if(isNaN(start)){start=0;}else{if(isFinite(start)){start=start-(start%1);}if(start<0){start=Math.max(0,length+start);}}for(var i=start;i<length;i++){if((typeof(array[i])!=="undefined")&&(array[i]===item)){return i;}}}return-1;};module.exports=YQ;},{}],126:[function(require,module,exports){var ayS=function(Kn,aX){var RU=new IPCC.PageList(Kn);if(aX){IPCC.Oz(RU,aX);}RU.tF(Kn);RU.initialize();return RU;};module.exports=ayS;},{}],127:[function(require,module,exports){var axm=function(Kn,Um){var qW=Um.handleTouchEvents!==false;var Sa=new IPCC.Web.UI.PageView(Kn,qW);if(Um){IPCC.Oz(Sa,Um);}Sa.tF(Kn);Sa.initialize();return Sa;};module.exports=axm;},{}],128:[function(require,module,exports){var rc={zoomInMenuItem:"Zoom In 25%",zoomOutMenuItem:"Zoom Out 25%",fullImageMenuItem:"Full Image",fullWidthMenuItem:"Full Width",fullHeightMenuItem:"Full Height",oneToOneRatioMenuItem:"1 to 1 Ratio",actualSizeMenuItem:"Actual Size",rotateRightMenuItem:"Rotate Clockwise",rotateLeftMenuItem:"Rotate Counter-Clockwise",mirrorHorizontalMenuItem:"Mirror Horizontal",mirrorVerticalMenuItem:"Mirror Vertical",panToolMenuItem:"Pan Tool",areaSelectionToolMenuItem:"Area Selection Tool",zoomRectangleToolMenuItem:"Zoom Rectangle Tool",flyingMagnifierToolMenuItem:"Flying Magnifier Tool",createTextMarkToolMenuItem:"Create Text Mark",createLineMarkToolMenuItem:"Create Line Mark",createPolygonMarkToolMenuItem:"Create Polygon Mark",createPolylineMarkToolMenuItem:"Create Polyline Mark",createRectangleMarkToolMenuItem:"Create Rectangle Mark",createEllipseMarkToolMenuItem:"Create Ellipse Mark",createFreehandMarkToolMenuItem:"Create Freehand Mark",editMarksToolMenuItem:"Edit Marks",runMarksToolMenuItem:"Run Marks",createStampMarkToolMenuItem:"Create Stamp Mark",createHighlightMarkToolMenuItem:"Create Highlight Mark",thicknessMenu:{item1:"1",item2:"2",item3:"3",item4:"4",item5:"5",item6:"6",item7:"7",item8:"8"},opacityMenu:{translucent:"Translucent (127)",opaque:"Opaque (255)"},calloutTypeMenu:{line:"Line",triangle:"Triangle"},borderThicknessMenuItem:"Border Thickness",borderColorMenuItem:"Border Color...",fillColorMenuItem:"Fill Color...",lineThicknessMenuItem:"Thickness",lineColorMenuItem:"Color...",fontMenuItem:"Font...",opacityMenuItem:"Opacity",calloutTypeMenuItem:"Callout Type",calloutVisibleMenuItem:"Callout Visible",moveToBackMenuItem:"Move to Back",moveBackwardMenuItem:"Move Backward",moveForwardMenuItem:"Move Forward",moveToFrontMenuItem:"Move to Front",deleteMarkMenuItem:"Delete Mark",zoomToFitMenuItem:"Zoom to Fit",orientationMenuItem:"Orientation",mouseToolsMenuItem:"Mouse Tools",rectangleMarkPropertiesMenuItem:"Properties",textMarkPropertiesMenuItem:"Properties",polygonMarkPropertiesMenuItem:"Properties",polylineMarkPropertiesMenuItem:"Properties",lineMarkPropertiesMenuItem:"Properties",markOrderingMenuItem:"Ordering",stampMarkPropertiesMenuItem:"Properties",selectColor:"Select Color",selectFont:"Select Font",ok:"OK",cancel:"CANCEL",red:"Red",green:"Green",blue:"Blue",font:"Font",size:"Size",italic:"Italic",bold:"Bold",underline:"Underline",strikeout:"Strikeout"};module.exports=rc;},{}],129:[function(require,module,exports){var Oz=function(cO,jL){var mA;for(var aS in jL){if(jL.hasOwnProperty(aS)){var bG=jL[aS];var axX=cO["get_"+aS];var aec=cO["set_"+aS];if(typeof(aec)==='function'){aec.apply(cO,[bG]);}else if(bG instanceof Array){mA=axX.apply(cO);if(!(mA instanceof Array)){throw new new IPCC.Web.UI.ImGearInvalidOperationException(aS+" is not an Array property");}for(var H=0,ag=mA.length,rn=bG.length;H<rn;H++,ag++){mA[ag]=bG[H];}}}}};module.exports=Oz;},{}],130:[function(require,module,exports){"use strict";var akm=function(aH){if(aH instanceof PCCViewer.AjaxResponse){return aH;}else if(!(this instanceof PCCViewer.AjaxResponse)){return new PCCViewer.AjaxResponse(aH);}this.pN=new IPCC.T.pN(aH);this.status=this.pN.status;this.statusText=this.pN.statusText;this.responseText=this.pN.responseText;if(typeof this.pN.responseBody!=='undefined'){this.responseBody=this.pN.responseBody;}return this;};akm.prototype.getResponseHeader=function(Cg){return this.pN.getResponseHeader(Cg);};var Cn=(function(){function asT(){return IPCC.T.extend({},IPCC.T.ob.im);};function awT(im){if(!(typeof im==='undefined'||(typeof im==='object'&&im!==null&& !(im instanceof Array)))){throw new Error('Headers should be an object or undefined.');}if(typeof im==='object'){var aDN=Object.keys(IPCC.T.aiJ());Object.keys(im).forEach(function(Cg){if(aDN.indexOf(Cg)!== -1){throw new Error('Cannot overwrite the header "'+Cg+'".');}});}IPCC.T.ob.im=IPCC.T.extend({},im);return PCCViewer.Ajax;};function asm(){return IPCC.T.ob.Pn;};function awl(hT){if(typeof hT!=='undefined'&&typeof hT!=='function'){throw new Error('Method should be a function or undefined.');}IPCC.T.ob.Pn=hT;return PCCViewer.Ajax;};function eB(aX){var bB=PCCViewer.Deferred();if(!(typeof aX==='undefined'||(typeof aX==='object'&&aX!==null&& !(aX instanceof Array)))){throw new Error('Options should be an object or undefined.');}function fz(aH){if(!(aH instanceof PCCViewer.AjaxResponse)){aH=new PCCViewer.AjaxResponse(aH);}bB.resolve(aH);};function fg(am){if(am.response){am.response=new PCCViewer.AjaxResponse(am.response);}bB.reject(am);};IPCC.T.ob.eB(aX).then(fz,fg);return bB.getPromise();};return{getHeaders:asT,setHeaders:awT,getOverrideMethod:asm,setOverrideMethod:awl,eB:eB,};})();if(Object.defineProperties){Object.defineProperties(Cn,{"headers":{enumerable:true,get:function(){return Cn.getHeaders();},set:function(im){return Cn.setHeaders(im);}},"overrideMethod":{enumerable:true,get:function(){return Cn.getOverrideMethod();},set:function(hT){return Cn.setOverrideMethod(hT);}}});}module.exports={AjaxResponse:akm,Ajax:Cn};},{}],131:[function(require,module,exports){var BurnRequest=function(aX){this.nL="";this.eQ="";this.ld=0;this.qY="";this.fp="";this.pU=0;this.hu=false;this.qw=0;this.Uw="";this.pP=false;this.bB=PCCViewer.Deferred();this.dk=this.bB.getPromise();this.then=this.dk.then;this.aX=aX;this.fp=null;this.fc=undefined;this.rG=false;this.Sh=null;PCCViewer.EventEmitter.extend(this);var V=this;if(aX.mC){var mC=new PCCViewer.Error(aX.mC.code,aX.mC.message);delete V.aX.mC;setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnCancelled,{});V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.fp=mC.code;V.bB.reject(mC);},0);}};BurnRequest.EventType={BurnProgress:"BurnProgress",BurnCompleted:"BurnCompleted",BurnFailed:"BurnFailed",BurnCancelled:"BurnCancelled",BurnWorkerCreated:"BurnWorkerCreated"};BurnRequest.prototype.cancel=function(){var V=this;this.pP=true;this.fp="User Cancelled";setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnCancelled,{});V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.bB.reject(new PCCViewer.Error("UserCancelled","User Cancelled"));},0);return this;};BurnRequest.prototype.getProgress=function(){return this.ld;};BurnRequest.prototype.getWorkerID=function(){return this.nL;};BurnRequest.prototype.getOptions=function(){return this.aX;};BurnRequest.prototype.getErrorCode=function(){return this.fp;};BurnRequest.prototype.getBurnedDocumentDownloadURL=function(){return this.Sh;};BurnRequest.prototype.apg=function(kU){this.Uw=kU;};BurnRequest.prototype.Mq=function(fc){this.fc=fc;};BurnRequest.prototype.aab=function(){var V=this;this.fp="Failure to generate Markup XML";setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.bB.reject(new PCCViewer.Error("MarkupXMLFail",V.fp));},0);return this;};BurnRequest.prototype.Fa=function(){function fz(aH){var hd,am;try{hd=aH.responseText;if(!hd){setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.bB.reject(new PCCViewer.Error("ResponseEmpty","Empty/invalid response from the server"));},0);V.rG=true;return;}else{am=JSON.parse(hd);setTimeout(function(){aFB(am);},0);}}catch(e){setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.bB.reject(new PCCViewer.Error("BurnFailErrorCode","Burn process failed, error: "+e.message));},0);V.rG=true;return;}};function fg(am){V.hu=false;var cE=am.response.status+" "+am.response.statusText;setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.bB.reject(new PCCViewer.Error("StatusCode","Status Code "+cE));},0);V.rG=true;return;};try{if(!this.Uw){throw new Error("XMl Markup data for burn is missing");}var V=this;var adA=function(){var Xa;if(!(/^[\x00-\x7F]*$/.test(V.fc.bf.get_documentIdentifier()))){Xa=V.fc.aX.imageHandlerUrl+'/ViewingSession/e'+V.fc.aX.documentID+'/MarkupBurner/'+V.nL;}else{Xa=V.fc.aX.imageHandlerUrl+'/ViewingSession/u'+encodeURIComponent(V.fc.aX.documentID)+'/MarkupBurner/'+V.nL;}PCCViewer.Ajax.eB({method:'GET',url:Xa,headers:{'Content-Type':'application/json'}}).then(fz,fg);};var aFB=function(gF){if(gF){if(V.pP===true){V.hu=false;return;}if(gF.percentComplete>=0&&V.hu===true){if(gF.percentComplete===100&&gF.state==='complete'){if(gF.processId){V.hu=false;V.nL=gF.processId;V.eQ=gF.state;V.pU+=1;V.qw=1000;V.ld= +(gF.percentComplete);var GJ;if(!(/^[\x00-\x7F]*$/.test(V.fc.bf.get_documentIdentifier()))){GJ=V.fc.aX.imageHandlerUrl+'/ViewingSession/e'+V.fc.aX.documentID+'/MarkupBurner/'+V.nL+"/Document";}else{GJ=V.fc.aX.imageHandlerUrl+'/ViewingSession/u'+encodeURIComponent(V.fc.aX.documentID)+'/MarkupBurner/'+V.nL+"/Document";}if(V.aX.filename){GJ+="?ContentDispositionFilename="+V.aX.filename;}V.Sh=GJ;V.rG=true;var aCU= +(gF.percentComplete);setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnCompleted,{});V.trigger(PCCViewer.BurnRequest.EventType.BurnProgress,{progress:aCU});V.bB.resolve(GJ);},10);return;}}else{if(gF.state==='error'){V.hu=false;V.fp=gF.errorCode;setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.bB.reject(new PCCViewer.Error("BurnFailError","BurnProcess failed, errorCode: "+V.fp));},0);V.hu=false;V.rG=true;return;}if(gF.processId){var Xb= +(gF.percentComplete);if(V.ld!==Xb){setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnProgress,{progress:Xb});},10);}if(!V.nL){V.nL=gF.processId;setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnWorkerCreated,{});},0);V.eQ=gF.state;V.pU=1;V.hu=true;V.qw=1000;V.ld= +(gF.percentComplete);}if(gF.percentComplete<100){if(V.pU>1){V.qw+=1000;}V.pU+=1;V.eQ=gF.state;V.ld= +(gF.percentComplete);if(V.hu===true&&V.pP===false&&V.rG===false){setTimeout(adA,V.qw);}}}}}else{if(V.rG===false){var XL=false;if(V.hu===false){if(gF.state==='complete'){if(!V.Sh){XL=true;}else{V.rG=true;setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnCompleted,{});V.bB.resolve(V.Sh);},10);return;}}if(gF.state==='processing'&&gF.errorCode===null){if(gF.percentComplete>=0&&gF.percentComplete<100){if(V.pU>1){V.qw+=1000;}V.pU+=1;V.hu=true;V.eQ=gF.state;V.ld= +(gF.percentComplete);if(V.hu===true&&V.pP===false){setTimeout(adA,V.qw);}}else{XL=true;}}if(gF.state==='error'||XL===true){V.hu=false;V.fp=gF.errorCode;setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.bB.reject(new PCCViewer.Error("BurnFailError","BurnProcess failed, errorCode: "+gF.errorCode));},0);V.hu=false;V.rG=true;return;}}}}}};var bE;if(!(/^[\x00-\x7F]*$/.test(V.fc.bf.get_documentIdentifier()))){bE=V.fc.aX.imageHandlerUrl+'/ViewingSession/e'+V.fc.aX.documentID+'/MarkupBurner';}else{bE=V.fc.aX.imageHandlerUrl+'/ViewingSession/u'+encodeURIComponent(V.fc.aX.documentID)+'/MarkupBurner';}var Mz=[];if(V.aX.removeFormFields){Mz.push('RemoveFormFields=acroform');}if(V.aX.redactionOptions){Mz.push(V.aX.redactionOptions.mode===PCCViewer.RedactionViewMode.Draft.toLowerCase()?'redactionMode=draft':'redactionMode=normal');}if(Mz.length>0){bE+=('?'+Mz.join('&'));}PCCViewer.Ajax.eB({method:'POST',url:bE,headers:{'Content-Type':'application/xml;charset=utf-8'},body:V.Uw}).then(fz,fg);V.hu=true;}catch(e){this.hu=false;var aj=this,jH=e.message;setTimeout(function(){aj.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});aj.bB.reject(new PCCViewer.Error("BurnFailErrorCode","The burn process failed, error: "+jH));},0);this.rG=true;}};if(Object.defineProperties){Object.defineProperties(BurnRequest.prototype,{"options":{enumerable:true,get:function(){return this.getOptions();}},"progress":{enumerable:true,get:function(){return this.getProgress();}},"workerID":{enumerable:true,get:function(){return this.getWorkerID();}},"errorCode":{enumerable:true,get:function(){return this.getErrorCode();}},"burnedDocumentDownloadURL":{enumerable:true,get:function(){return this.getBurnedDocumentDownloadURL();}}});}module.exports=BurnRequest;},{}],132:[function(require,module,exports){function aof(bf,bx){var bI=bf.cR.jj(bx);var fs=bI.cd();return fs.Ei();};function aoD(bf,bx){var bI=bf.cR.jj(bx);var fs=bI.cd();var KB=fs.gY();return KB.ayQ();};function are(yI,aFH){var cl=yI.length;if(cl===0){return false;}if(cl!==aFH){return false;}for(var H=0;H<cl;H++){if(yI[H]!==true){return false;}}return true;};var Ry=function(){var V=this;this.Fu=false;this.yI=[];this.sF=[];this.xm=[];this.abi=0;this.bd=0;this.ia=false;function pA(GV,UT){switch(GV){case 'failed':setTimeout(function(){V.bN.trigger('SearchFailed',UT);},10);break;case 'complete':V.bN.fk=V.sF;V.bN.Ue=V.xm;V.bN.vW=true;setTimeout(function(){V.bN.trigger('SearchResultsAvailable',{completedSearchResults:(V.sF)});},10);break;case 'cancelled':break;}setTimeout(function(){V.bN.trigger('SearchCompleted',{completedSearchResults:(V.sF)});},10);};function awf(){V.bN.cN='Unable to communicate with server, please retry loading the document.';V.bN.fp='1011';V.bN.vW=true;pA('failed',{errorMessage:('Unable to communicate with server, please retry loading the document.')});V.ia=true;};function akH(aX,aAX){var aBw=IPCC.T.trim(aX.type||'').toLowerCase();var am;switch(aBw){case 'taskresult':am=new PCCViewer.SearchTaskResult();break;default:am=new PCCViewer.SearchResult();break;}IPCC.T.extend(am,aAX);var aae=am.pM+am.text.length-1;var cC=PCCViewer.Gt.formatter.getContext({text:aX.searchText,startIndex:am.pM,endIndex:aae,padding:am.bg.contextPadding});am.cC=cC.context;am.zb=cC.startIndex;if(aX.rectangles){var adz={rectangles:aX.rectangles,startIndex:am.pM,endIndex:aae};am.lM=PCCViewer.Gt.formatter.getBoundingRectangle(adz);am.by=PCCViewer.Gt.formatter.getLineRectangles(adz);}return am;};function afP(mL,wW,Ju,gZ,gO){var Fb=[];var Wk= !gZ;var vQ=wW.distance;var Ax=[];IPCC.T.forEach(wW.cD,function(cD){Ax.push(cD.searchTerm);});var aFQ=PCCViewer.Gt.proximity.getResults(Ju,Ax,vQ);IPCC.T.forEach(aFQ,function(am){var gN=akH({type:Wk?'TaskResult':'Result',searchText:Ju,rectangles:gZ},{gO:gO,bg:wW.tA,mL:mL,sM:wW.highlightColor,pM:am.startIndex,aO:am.text});Fb.push(gN);});return Fb;};function Re(mL,cD,Ju,gZ,gO){var Wk= !gZ;var Fb=[];var Nj=[cD.searchTerm];var fk=PCCViewer.Gt.regex.getResults(Ju,Nj);IPCC.T.forEach(fk,function(am){if(cD.tA.matchingOptions.wildcard&&(am.text[0]===" "||am.text[0]==="\n")){am.text=am.text.substring(1);am.startIndex+=1;}var gN=akH({type:Wk?'TaskResult':'Result',searchText:Ju,rectangles:gZ},{gO:gO,mL:mL,cD:cD,bg:cD.tA,pM:am.startIndex,aO:am.text,sM:cD.highlightColor});Fb.push(gN);});return Fb;};function anE(acn,bx,bf,gZ){var SS=[];var mL=Date.now();IPCC.T.forEach(V.cD,function(cD,H){var fk;var nD=IPCC.T.PA(cD.type);var bI=bf.cR.jj(bx);var fs=bI.cd();var gO={width:bI.kS()||fs.ayK(),height:bI.hX()||fs.aAh()};switch(nD){case 'proximity':fk=afP(mL,cD,acn,gZ,gO);break;default:fk=Re(mL,cD,acn,gZ,gO);break;}IPCC.T.forEach(fk,function(am){am.dE=V.bd;am.aR=bx+1;am.VI=bf.get_documentIdentifier();V.sF[V.bd]=am;V.bd++;SS.push(am);});});V.bN.fk=V.sF;if(SS.length){setTimeout(function(){V.bN.trigger('PartialSearchResultsAvailable',{partialSearchResults:(SS),pagesWithoutText:(V.xm)});},10);}};function anS(aO){var mL=Date.now();IPCC.T.forEach(V.cD,function(cD,H){var nD=IPCC.T.PA(cD.type);var fk;switch(nD){case 'proximity':fk=afP(mL,cD,aO);break;default:fk=Re(mL,cD,aO);break;}IPCC.T.forEach(fk,function(am){am.dE=V.bd;V.sF[V.bd]=am;V.bd++;});});V.bN.fk=V.sF;};function aau(AB,bf){for(var H=0;H<AB.length;H++){if(V.yI[AB[H]]===false){V.yI[AB[H]]=true;var aO=aof(bf,AB[H]);var gZ=aoD(bf,AB[H]);if(!aO&&aO!==null){V.xm[V.abi]=AB[H];V.abi++;continue;}anE(aO,AB[H],bf,gZ);if(V.bN.pP){if(V.Fu){pA('cancelled');V.Fu=false;bf.remove_textPagesReceived(Pp);return;}break;}}}if(are(V.yI,bf.fC)&& !V.bN.vW){pA('complete');V.Fu=false;bf.remove_textPagesReceived(Pp);}};function Pp(sender,J){if(J.error=== -1){awf();return V.bN;}try{if(V.ia===false){aau(J.textPagesReceived,sender);}}catch(e){V.bN.cN=e.message;V.bN.fp='1010';V.bN.vW=true;pA('failed',{errorMessage:(e.message)});V.ia=true;return V.bN;}};this.YB=function(bf,cD,dH,bN){V.cD=cD;V.bN=bN;V.bN.dH=dH;V.bN.on('SearchCancelled',function(){pA('cancelled');V.Fu=false;bf.remove_textPagesReceived(Pp);});for(var H=0;H<bf.fC;H++){V.yI[H]=false;}if(bf.afo().ef()>bf.get_numberOfPagesWithText()){V.Fu=true;bf.add_textPagesReceived(Pp);}if(bf.get_numberOfPagesWithText()>0){aau(bf.get_pagesWithText(),bf);}return V.bN;};this.aDC=function(aO){this.bN=new PCCViewer.SearchRequest();try{anS(aO);}catch(e){V.bN.cN=e.message;V.bN.fp='1010';return;}};};module.exports=Ry;},{}],133:[function(require,module,exports){var Comment=function Comment(comment,conversation){if(!(comment instanceof IPCC.Web.UI.Comment)&&(typeof comment!=='string')){throw new Error(comment+' is not a string.');}if(!(conversation instanceof PCCViewer.Conversation)){throw new Error(conversation+' is not a PCCViewer.Conversation object.');}this.getConversation=function aIn(){return conversation;};if(typeof comment==='string'){this.nV=new IPCC.Web.UI.Comment(comment);}else{this.nV=comment;}this.nV.GY=this;this.dg=this.nV.get_data();PCCViewer.Data.extend(this);this.EW=new IPCC.Web.UI.Data();PCCViewer.SessionData.extend(this);};Comment.prototype.getMarkupLayer=function aHS(){return this.jw;};Comment.prototype.getText=function aHA(){return this.nV.get_text();};Comment.prototype.setText=function aFp(text){if(typeof text!=='string'){throw new Error(text+' is not a string.');}this.nV.set_text(text);return this;};Comment.prototype.getCreationTime=function aHD(){var aBY=IPCC.T.Hb(this.nV.get_creationTime());return new Date(aBY);};Comment.prototype.setCreationTime=function aHG(time){function akF(){throw new Error(time+' is not a valid string or Date object.');};if(typeof time==='string'){var afH=IPCC.T.Hb(time);if(afH instanceof Error){akF();}time=new Date(afH);}if(!(time instanceof Date)){akF();}this.nV.set_creationTime(IPCC.T.wU(time));return this;};if(Object.defineProperties){Object.defineProperties(Comment.prototype,{"text":{enumerable:true,get:function(){return this.getText();},set:function(text){return this.setText(text);}},"creationTime":{enumerable:true,get:function(){return this.getCreationTime();},set:function(time){return this.setCreationTime(time);}}});}var Conversation=function Conversation(mark){if(!(mark instanceof PCCViewer.Mark)){throw new Error(mark+' is not a PCCViewer.Mark object.');}this.getMark=function Pw(){return mark;};this.iY=new PCCViewer.ObservableCollection();if(typeof mark.L!=="undefined"){this.vA=mark.L.get_conversation();this.vA.forEach(function(nV){var dm=new PCCViewer.Comment(nV,this);this.iY.add(dm);},this);}else{this.vA=new IPCC.Web.UI.Conversation();}this.dg=this.vA.get_data();PCCViewer.Data.extend(this);this.EW=new IPCC.Web.UI.Data();PCCViewer.SessionData.extend(this);};Conversation.prototype.addComment=function FI(commentText){var dm=new PCCViewer.Comment(commentText,this);this.iY.add(dm);this.vA.addComment(dm.nV);return dm;};Conversation.prototype.deleteComments=function(comments){var V=this;var akE=this.iY.toArray();var afj=function(dm){for(var i=0,length=akE.length;i<length;i++){if(akE[i]===dm){return true;}}return false;};function akS(dm,bd){throw new Error(dm+((bd!==undefined)?' (Array index '+bd+')':'')+' is not a PCCViewer.Comment object.');};function amM(dm,bd){throw new Error(((bd!==undefined)?' (Array index '+bd+')':'')+' is not part of this Conversation object.');};if(comments instanceof PCCViewer.Comment){if(!afj(comments)){amM(comments);}V.iY.remove(comments);V.vA.removeCommentInstance(comments.nV);}else if(comments instanceof Array){IPCC.T.forEach(comments,function(el,idx){if(!(el instanceof PCCViewer.Comment)){akS(el,idx);}if(!afj(el)){amM(el,idx);}});IPCC.T.forEach(comments,function(el){V.iY.remove(el);V.vA.removeCommentInstance(el.nV);});}else{akS(comments);}return this;};Conversation.prototype.getComments=function(){return this.iY.toArray().sort(function(a,b){return a.getCreationTime().getTime()-b.getCreationTime().getTime();});};Conversation.pH=function(gD,oc){if(typeof gD.getComments!=="function"||typeof oc.addComment!=="function"){throw new Error("Arguments `_source` and `_destination` must be Conversation objects.");}PCCViewer.Data.nC(gD,oc);var hE=gD.getComments(),i,length=hE.length;for(i=0;i<length;i++){var afE=hE[i];var aDq=oc.addComment(afE.getText());PCCViewer.Data.nC(afE,aDq);}};module.exports={Conversation:Conversation,Comment:Comment};},{}],134:[function(require,module,exports){var ConversionRequest=function(aX){this.nL="";this.eQ="";this.ld=0;this.fp="";this.hu=false;this.pP=false;this.aX=aX;this.Ao=null;this.BQ=null;this.fc=undefined;this.bB=PCCViewer.Deferred();this.dk=this.bB.getPromise();this.then=this.dk.then;PCCViewer.EventEmitter.extend(this);};ConversionRequest.EventType={ConversionProgress:"ConversionProgress",ConversionCompleted:"ConversionCompleted",ConversionFailed:"ConversionFailed",ConversionCancelled:"ConversionCancelled",ConversionWorkerCreated:"ConversionWorkerCreated"};ConversionRequest.prototype.cancel=function(){var V=this;this.pP=true;this.fp="User Cancelled";setTimeout(function(){V.trigger(PCCViewer.ConversionRequest.EventType.ConversionCancelled,{});V.trigger(PCCViewer.ConversionRequest.EventType.ConversionFailed,{});V.bB.reject(new PCCViewer.Error("UserCancelled","User Cancelled"));},0);return this;};ConversionRequest.prototype.getProgress=function(){return this.ld;};ConversionRequest.prototype.getWorkerID=function(){return this.nL;};ConversionRequest.prototype.getOptions=function(){return this.aX;};ConversionRequest.prototype.getErrorCode=function(){return this.fp;};ConversionRequest.prototype.getConvertedDocumentDownloadURL=function(){return this.Ao;};ConversionRequest.prototype.getConvertedDocumentDownloadURLs=function(){if(this.BQ){return this.BQ.slice();}return null;};ConversionRequest.prototype.Mq=function(fc){this.fc=fc;};ConversionRequest.prototype.Fa=function(){var V=this;V.hu=true;V.azX().then(function onResolve(pD){V.nL=pD.processId;V.ld=pD.percentComplete;V.eQ=pD.state;V.trigger(PCCViewer.ConversionRequest.EventType.ConversionWorkerCreated,{});V.aDE(pD).then(function onResolve(aFK){V.hu=false;V.BQ=[];if(V.aX.zf>1){for(var H=0;H<V.aCK;H++){var Ao=V.fc.aX.imageHandlerUrl+'/v2/viewingSessions/'+V.fc.aX.documentID+'/contentConverters/'+V.nL+'/results/'+H+'/file?ContentDispositionFilename='+encodeURIComponent(V.aX.filename);V.BQ.push(Ao);}V.bB.resolve(V.BQ);}else{V.Ao=V.fc.aX.imageHandlerUrl+'/WorkFile/'+aFK+"?ContentDispositionFilename="+encodeURIComponent(V.aX.filename);if(pD.affinityToken){V.Ao+="&affinityToken="+encodeURIComponent(pD.affinityToken);}V.BQ.push(V.Ao);V.bB.resolve(V.Ao);}V.trigger(PCCViewer.ConversionRequest.EventType.ConversionCompleted,{});},function onReject(reason){V.hu=false;V.fp=reason.error.code;V.bB.reject(reason);V.trigger(PCCViewer.ConversionRequest.EventType.ConversionFailed,{});});},function onReject(reason){V.hu=false;V.bB.reject(reason);V.trigger(PCCViewer.ConversionRequest.EventType.ConversionFailed,{});});};ConversionRequest.prototype.azX=function(){var bE,kl=PCCViewer.Deferred();var abO;if(this.aX.zf>1){bE=this.fc.aX.imageHandlerUrl+'/v2/viewingSessions/'+this.fc.aX.documentID+'/contentConverters/';abO={url:bE,method:'POST',headers:{"Content-Type":"application/json"}};}else{bE=this.fc.aX.imageHandlerUrl+'/contentConverters/';abO={url:bE,method:'POST',headers:{"Content-Type":"application/json"},body:JSON.stringify({viewingSessionId:this.fc.aX.documentID})};}PCCViewer.Ajax.eB(abO).then(function fz(aH){var am=JSON.parse(aH.responseText);kl.resolve(am);},function fg(am){kl.reject(am.error);});return kl.getPromise();};ConversionRequest.prototype.aDE=function(pD){var bE,kl=PCCViewer.Deferred(),V=this,im;if(V.aX.zf>1){bE=this.fc.aX.imageHandlerUrl+'/v2/viewingSessions/'+this.fc.aX.documentID+'/contentConverters/'+pD.processId;}else{bE=this.fc.aX.imageHandlerUrl+'/contentConverters/'+pD.processId;}if(pD.affinityToken){im={"Accusoft-Affinity-Token":pD.affinityToken};}(function poll(){setTimeout(function(){PCCViewer.Ajax.eB({method:'GET',url:bE,headers:im}).then(function fz(aH){var am=JSON.parse(aH.responseText);V.nL=am.processId;V.ld=am.percentComplete;V.eQ=am.state;if(V.aX.zf>1&&am.output){V.aCK=am.output.results.length;}V.trigger(PCCViewer.ConversionRequest.EventType.ConversionProgress,{progress:V.ld});if(am.percentComplete===100){if(am.state==="error"){kl.reject({response:aH,error:new PCCViewer.Error("CouldNotConvert","Could not convert document")});}else{kl.resolve(am.output.results[0].fileId);}}else{poll();}},function fg(am){kl.reject(am.error);});},3000);})();return kl.getPromise();};if(Object.defineProperties){Object.defineProperties(ConversionRequest.prototype,{"options":{enumerable:true,get:function(){return this.getOptions();}},"progress":{enumerable:true,get:function(){return this.getProgress();}},"workerID":{enumerable:true,get:function(){return this.getWorkerID();}},"errorCode":{enumerable:true,get:function(){return this.getErrorCode();}},"convertedDocumentDownloadURL":{enumerable:true,get:function(){return this.getConvertedDocumentDownloadURL();}},"convertedDocumentDownloadURLs":{enumerable:true,get:function(){return this.getConvertedDocumentDownloadURLs();}}});}module.exports=ConversionRequest;},{}],135:[function(require,module,exports){"use strict";var Data=(function(){function getData(key){return this.dg.get_data(key);};function setData(key,value){this.dg.set_data(key,value);return this;};function getDataKeys(){return this.dg.get_dataKeys();};return{extend:function(o){o.getData=getData;o.setData=setData;o.getDataKeys=getDataKeys;},nC:function(gD,oc){if(typeof gD.getData!=="function"||typeof gD.setData!=="function"||typeof gD.getDataKeys!=="function"||typeof oc.getData!=="function"||typeof oc.setData!=="function"||typeof oc.getDataKeys!=="function"){throw new Error("Arguments `_source` and `_destination` must be extended with the Data Mixin.");}var mQ=gD.getDataKeys(),i,length=mQ.length;for(i=0;i<length;i++){var aV=mQ[i];oc.setData(aV,gD.getData(aV));}}};})();var SessionData=(function(){function getSessionData(key){return this.EW.get_data(key);};function setSessionData(key,value){this.EW.set_data(key,value);return this;};function getSessionDataKeys(){return this.EW.get_dataKeys();};return{extend:function(o){o.getSessionData=getSessionData;o.setSessionData=setSessionData;o.getSessionDataKeys=getSessionDataKeys;},aEU:function(gD,oc){if(typeof gD.getSessionData!=="function"||typeof gD.setSessionData!=="function"||typeof gD.getSessionDataKeys!=="function"||typeof oc.getSessionData!=="function"||typeof oc.setSessionData!=="function"||typeof oc.getSessionDataKeys!=="function"){throw new Error("Arguments `_source` and `_destination` must be extended with the SessionData Mixin.");}var mQ=gD.getSessionDataKeys(),i,length=mQ.length;for(i=0;i<length;i++){var aV=mQ[i];oc.setSessionData(aV,gD.getSessionData(aV));}}};})();module.exports={SessionData:SessionData,Data:Data};},{}],136:[function(require,module,exports){'use strict';function PromiseDeferred(){this.eQ=PromiseDeferred.States.Pending;this.R=null;this.ew=null;this.hJ=[];};PromiseDeferred.prototype.then=function(onFulfilled,onRejected){var Bs=new PromiseDeferred();var Ud,abf;if(onFulfilled&&typeof onFulfilled==='function'){var avT=function(R){try{var aI=onFulfilled(R);Bs.resolve(aI);}catch(e){Bs.reject(e);}};Ud=avT;}else{var avB=function(R){Bs.resolve(R);};Ud=avB;}if(onRejected&&typeof onRejected==='function'){var axd=function(ew){try{var aI=onRejected(ew);aaG(Bs,aI);}catch(e){Bs.reject(e);}};abf=axd;}else{var avR=function(ew){Bs.reject(ew);};abf=avR;}this.hJ.push({aue:Ud,azx:abf});if(this.eQ===PromiseDeferred.States.Fulfilled){this.agq();}if(this.eQ===PromiseDeferred.States.Rejected){this.agl();}return Bs;};PromiseDeferred.prototype.resolve=function(x){if(!this.aoC()){return;}aaG(this,x);};PromiseDeferred.prototype.reject=function(reason){if(!this.aoC()){return;}this.CG(reason);};PromiseDeferred.prototype.SF=function(ba){this.eQ=PromiseDeferred.States.Fulfilled;this.R=ba;this.agq();};PromiseDeferred.prototype.agq=function(){var callback;while(this.hJ.length>0){callback=this.hJ.shift().aue;(function(jO,R){setTimeout(function(){jO(R);},0);})(callback,this.R);}};PromiseDeferred.prototype.agl=function(){var callback;while(this.hJ.length>0){callback=this.hJ.shift().azx;(function(jO,R){setTimeout(function(){jO(R);},0);})(callback,this.ew);}};function aaG(dk,ba){if(dk===ba){dk.CG(new TypeError("A Promise cannot be resolved with a value that is itself."));return;}if(ba&&ba.abp&&dk.acb&&dk.acb===ba){dk.CG(new TypeError("A Promise cannot be resolved with a value that is itself."));return;}if(ba&&ba.abp&&ba.abp==="PCCViewer.Promise"){ba.then(function(aqB){dk.SF(aqB);},function(aqE){dk.CG(aqE);});}else if(ba!==null&&(typeof ba==='object'||typeof ba==='function')){var SJ;try{SJ=ba.then;}catch(e){dk.CG(e);return;}if(typeof SJ==='function'){var FC=true;var aqO=function(de){if(FC){aaG(dk,de);FC=false;}};var apV=function(aI){if(FC){dk.CG(aI);FC=false;}};try{SJ.call(ba,aqO,apV);}catch(e){if(FC){dk.CG(e);}}}else{dk.SF(ba);}}else{dk.SF(ba);}};PromiseDeferred.prototype.CG=function(reason){this.eQ=PromiseDeferred.States.Rejected;this.ew=reason;this.agl();};PromiseDeferred.prototype.aoC=function(){return this.eQ===PromiseDeferred.States.Pending;};PromiseDeferred.States={Pending:"Pending",Fulfilled:"Fulfilled",Rejected:"Rejected"};var Deferred=function(){var Yx=new PromiseDeferred();function Promise(dk){this.then=function(onFulfilled,onRejected){return new Promise(dk.then(onFulfilled,onRejected));};this.abp="PCCViewer.Promise";dk.acb=this;};var promise=new Promise(Yx);return{getPromise:function(){return promise;},resolve:function(value){Yx.resolve(value);},reject:function(reason){Yx.reject(reason);}};};var Promise={all:function(promises){var i,bB=new PCCViewer.Deferred(),Ui=bB.getPromise();if(Object.prototype.toString.call(promises)!=='[object Array]'){throw new TypeError("The 'promises' argument must be an array.");}function createPushFunction(promise){return function(results){return wrapWithPromise(promise).then(function(value){results.push(value);return results;});};};function wrapWithPromise(value){var bB=new PCCViewer.Deferred();bB.resolve(value);return bB.getPromise();};bB.resolve([]);for(i=0;i<promises.length;i++){Ui=Ui.then(createPushFunction(promises[i]));}return Ui;}};if(typeof exports!=='undefined'&&module.exports){module.exports.Deferred=Deferred;module.exports.Promise=Promise;}},{}],137:[function(require,module,exports){var DocumentHyperlink=function DocumentHyperlink(parameters){this.CK=parameters.CK;this.aR=parameters.aR;};DocumentHyperlink.prototype.getHref=function(){return this.CK.agX();};DocumentHyperlink.prototype.getPageNumber=function(){return this.aR;};DocumentHyperlink.prototype.getRectangle=function(){return this.CK.eH();};if(Object.defineProperties){Object.defineProperties(DocumentHyperlink.prototype,{"href":{enumerable:true,get:function(){return this.getHref();}},"pageNumber":{enumerable:true,get:function(){return this.getPageNumber();}},"rectangle":{enumerable:true,get:function(){return this.getRectangle();}}});}module.exports=DocumentHyperlink;},{}],138:[function(require,module,exports){var IW=function(code,message){var afv=Error.call(null,message);this.code=code;function asp(cO,gD){Object.getOwnPropertyNames(gD).forEach(function(propName){Object.defineProperty(cO,propName,Object.getOwnPropertyDescriptor(gD,propName));});return cO;};function ata(cO,gD){for(var i in gD){if(gD.hasOwnProperty(i)){cO[i]=gD[i];}}return cO;};if(typeof Object.create==='function'){asp(this,afv);}else{ata(this,afv);}};var avL=(function(){var fN=function(){};return function(adn){if(arguments.length>1){throw Error('Second argument not supported');}if(typeof adn!=='object'){throw TypeError('Argument must be an object');}fN.prototype=adn;var am=new fN();fN.prototype=null;return am;};})();if(typeof Object.create==='function'){IW.prototype=Object.create(Error.prototype);}else{IW.prototype=avL(Error.prototype);}IW.prototype.constructor=IW;module.exports=IW;},{}],139:[function(require,module,exports){"use strict";function Event(target,type){this.cO=target;this.bO=type;};Event.prototype.getTarget=function(){return this.cO;};Event.prototype.getType=function(){return this.bO;};if(Object.defineProperties){Object.defineProperties(Event.prototype,{"target":{enumerable:true,get:function(){return this.getTarget();}},"type":{enumerable:true,get:function(){return this.getType();}}});}module.exports=Event;},{}],140:[function(require,module,exports){var EventEmitter=(function(){function on(eventType,handler){if(!this.hW){this.hW={};}var lowerCaseEventType=eventType.toLowerCase(),handlers=this.hW[lowerCaseEventType];if(!handlers){handlers=this.hW[lowerCaseEventType]=[];}handlers.push(handler);return this;};function off(eventType,handler){if(!this.hW){this.hW={};}var lowerCaseEventType=eventType.toLowerCase(),handlers=this.hW[lowerCaseEventType];if(handlers){var i=handlers.length;for(;i>=0;i--){if(handlers[i]===handler){handlers.splice(i,1);}}}return this;};function trigger(eventType,properties){if(!this.hW){this.hW={};}var lowerCaseEventType=eventType.toLowerCase(),event=new PCCViewer.Event(this,lowerCaseEventType),handlers=this.hW[lowerCaseEventType],i,length=0;if(properties){PCCViewer.sK.rr(event,properties);}if(handlers){length=handlers.length;handlers=handlers.slice(0);for(i=0;i<length;i++){handlers[i](event);}}return this;};return{extend:function(o){o.on=on;o.off=off;o.trigger=trigger;}};})();module.exports=EventEmitter;},{}],141:[function(require,module,exports){"use strict";var vg=function(eventEmitter){this.aB=eventEmitter;this.HC=true;this.Xz={};};vg.prototype.on=function(eventType,handler){this.aB.on(eventType,handler);return this.aB;};vg.prototype.off=function(eventType,handler){this.aB.off(eventType,handler);return this.aB;};vg.prototype.trigger=function(eventType,properties){if(this.HC){var lowerCaseEventType=eventType.toLowerCase();if(this.Xz[lowerCaseEventType]){var event=new PCCViewer.Event(this.aB,lowerCaseEventType);if(properties){PCCViewer.sK.rr(event,properties);}this.Xz[lowerCaseEventType](event);}else{this.aB.trigger(eventType,properties);}}return this.aB;};vg.prototype.stop=function(){this.HC=false;};vg.prototype.resume=function(){this.HC=true;};vg.prototype.intercept=function(eventType,handler){var lowerCaseEventType=eventType.toLowerCase();this.Xz[lowerCaseEventType]=handler;};module.exports=vg;},{}],142:[function(require,module,exports){var aDY={ViewerReady:"ViewerReady",PageCountReady:"PageCountReady",EstimatedPageCountReady:"EstimatedPageCountReady",PageChanged:"PageChanged",PageLoadFailed:"PageLoadFailed",PageDisplayed:"PageDisplayed",PageRotated:"PageRotated",DocumentRotated:"DocumentRotated",ScaleChanged:"ScaleChanged",DocumentPrinted:"DocumentPrinted",TextSelected:"TextSelected",MouseToolChanged:"MouseToolChanged",SearchPerformed:"SearchPerformed",PartialSearchResultsAvailable:"PartialSearchResultsAvailable",SearchCompleted:"SearchCompleted",SearchFailed:"SearchFailed",SearchCancelled:"SearchCancelled",SearchResultsAvailable:"SearchResultsAvailable",SearchCleared:"SearchCleared",SearchResultSelectionChanged:"SearchResultSelectionChanged",RevisionsRetrievalCompleted:"RevisionsRetrievalCompleted",RevisionsRetrievalFailed:"RevisionsRetrievalFailed",RevisionsAvailable:"RevisionsAvailable",PartialRevisionsAvailable:"PartialRevisionsAvailable",PrintRequested:"PrintRequested",MarkupLoaded:"MarkupLoaded",MarkupSaved:"MarkupSaved",MarkChanged:"MarkChanged",MarkCreated:"MarkCreated",MarkRemoved:"MarkRemoved",MarkReordered:"MarkReordered",MarkSelectionChanged:"MarkSelectionChanged",MarkMouseEnter:"MarkMouseEnter",MarkMouseOver:"MarkMouseOver",MarkMouseLeave:"MarkMouseLeave",CommentsPanelToggled:"CommentsPanelToggled",CommentCreated:"CommentCreated",CommentRemoved:"CommentRemoved",CommentChanged:"CommentChanged",PageTextReady:"PageTextReady",Click:"Click",PageOpening:"PageOpening",ViewingSessionChanging:"ViewingSessionChanging",ViewingSessionChanged:"ViewingSessionChanged"};module.exports=aDY;},{}],143:[function(require,module,exports){var pk={FullWidth:"FullWidth",ShrinkToWidth:"ShrinkToWidth",ActualSize:"ActualSize",FullHeight:"FullHeight",FullPage:"FullPage"};module.exports=pk;},{}],144:[function(require,module,exports){var sK={};sK.rr=function(target){var source;if(!target){throw new Error("target must be defined.");}else if(typeof target!=='object'){throw new Error("typeof target must be 'object'");}else{for(var i=1;i<arguments.length;i++){source=arguments[i];for(var property in source){if(source.hasOwnProperty(property)){target[property]=source[property];}}}}return target;};module.exports=sK;},{}],145:[function(require,module,exports){var ImageStamps=function(Options){this.aX=PCCViewer.sK.rr({},Options);};ImageStamps.prototype.requestImageStampList=function(){var bB=PCCViewer.Deferred();var dk=bB.getPromise();try{var bE=this.aX.imageHandlerUrl+'/ImageStampList';PCCViewer.Ajax.eB({method:'GET',url:bE}).then(function fz(aH){var uB;if(aH.responseText.length>0){uB=JSON.parse(aH.responseText);if(aH.status===200){bB.resolve(uB);}else{bB.reject(new PCCViewer.Error("ImageStampListFail","Unable to retrieve ImageStamp list from server."));}}},function fg(am){bB.reject(am.error);});}catch(e){bB.reject(new PCCViewer.Error("Error",e.message));}return dk;};ImageStamps.prototype.requestImageSourceBase64=function(imageStampId){if(!imageStampId){throw new Error("Parameter imageStampId is not valid.");}if(typeof imageStampId!=='string'){throw new Error("Parameter imageStampId should be of type string.");}var bB=PCCViewer.Deferred();var dk=bB.getPromise();try{var bE=this.aX.imageHandlerUrl+'/ImageStamp/'+imageStampId+'/q?format=Base64';PCCViewer.Ajax.eB({method:'GET',url:bE,}).then(function fz(aH){var uB;if(aH.responseText.length>0){uB=JSON.parse(aH.responseText);if(aH.status===200){bB.resolve(uB);}else{bB.reject(new PCCViewer.Error("ImageStampDataFail","Unable to retrieve image stamp data URL and dataHash from server."));}}},function fg(am){bB.reject(am.error);});}catch(e){bB.reject(new PCCViewer.Error("Error",e.message));}return dk;};ImageStamps.prototype.reqestImageSourceBase64=function(imageStampId){return this.requestImageSourceBase64(imageStampId);};ImageStamps.prototype.getImageSourceURL=function(ImageStampID){if(!ImageStampID){throw new Error("Parameter imageStampId is not valid.");}if(typeof ImageStampID!=='string'){throw new Error("Parameter imageStampId should be of type string.");}return this.aX.imageHandlerUrl+'/ImageStamp/'+ImageStampID+'/q?format=Image';};module.exports=ImageStamps;},{}],146:[function(require,module,exports){var aAa={data:{},initializeData:function(azp){PCCViewer.Language.data=IPCC.T.extend({},azp);return PCCViewer.Language;},getData:function(){return PCCViewer.Language.data;},getValue:function(agF){if(typeof PCCViewer.Language.data==='undefined'){throw new Error('Language data is not set.');}var mQ=agF.split('.'),aE=PCCViewer.Language.data,aV;while(mQ.length){aV=mQ.shift();aE=aE[aV];if(typeof aE==='undefined'){aE=agF;break;}}return aE;}};module.exports=aAa;},{}],147:[function(require,module,exports){var LoadMarkupLayersRequest=function(layerRecordIds,viewerControl,options){this.wS=layerRecordIds;this.dn=viewerControl;this.bz=viewerControl.bz;this.fp="";this.hu=false;this.pP=false;this.ld=0;this.bB=PCCViewer.Deferred();this.dk=this.bB.getPromise();this.then=this.dk.then;this.vh=options.loadAsHidden===true;PCCViewer.EventEmitter.extend(this);};LoadMarkupLayersRequest.EventType={LoadMarkupLayersFailed:"LoadMarkupLayersFailed",LoadMarkupLayersCompleted:"LoadMarkupLayersCompleted",LoadMarkupLayersCancelled:"LoadMarkupLayersCancelled",LoadMarkupLayersProgress:"LoadMarkupLayersProgress"};LoadMarkupLayersRequest.prototype.getProgress=function(){return this.ld;};LoadMarkupLayersRequest.prototype.cancel=function(){var V=this;this.pP=true;this.fp="User Cancelled";setTimeout(function(){V.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersCancelled,{});V.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersFailed,{});V.bB.reject(new PCCViewer.Error("UserCancelled","User Cancelled"));},0);return this;};LoadMarkupLayersRequest.prototype.getViewerControl=function(){return this.dn;};LoadMarkupLayersRequest.prototype.getErrorCode=function(){return this.fp;};LoadMarkupLayersRequest.prototype.Fa=function(){var V=this,XQ=1,XA,Zj=[];var vh=this.vh;var acN=function(){V.hu=false;if(V.dn.qD){V.bB.reject(new PCCViewer.Error('ViewerControlDestroyed','ViewerControl has been destroyed.'));}else{V.bB.reject(new PCCViewer.Error('ViewingSessionChanged','Current Viewing Session has been changed.'));}V.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersFailed,{});};var uV=function(ago){function fz(aH){if(V.bz.qD){acN();return;}var qg=JSON.parse(aH.responseText),Mi=V.aFO(qg),eJ,sp=[],ad,gd=[],amP={},Mt=0,Ny;for(var nj in Mi.gd){if(Mi.gd.hasOwnProperty(nj)){gd=gd.concat(Mi.gd[nj]);}}eJ=new PCCViewer.MarkupLayer(V.dn,gd);eJ.aFj={bE:bE};IPCC.T.forEach(Mi.sp,function(agj){sp.push(agj);Mt++;amP[agj.uid]=true;});if(qg.name){eJ.setName(qg.name);}if(qg.originalXmlName){eJ.setOriginalXmlName(qg.originalXmlName);}if(Mt>0){Ny=function(ev){if(amP[ev.mark.getUid()]){Mt--;}if(!Mt){V.bz.aB.off(PCCViewer.EventType.MarkCreated,Ny);V.bz.vU=true;}};V.bz.aB.on(PCCViewer.EventType.MarkCreated,Ny);V.bz.vU=false;try{ad=V.bz.deserializeMarks(sp);}catch(bW){V.hu=false;V.bz.aB.off(PCCViewer.EventType.MarkCreated,Ny);V.bz.vU=true;V.bB.reject(new PCCViewer.Error('Error',bW.message));V.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersFailed,{});return;}if(vh){IPCC.T.forEach(ad,function(K){K.setVisible(false);});}eJ.addMarks(ad);}eJ.Zx=ago;for(var tJ in qg.data){if(qg.data.hasOwnProperty(tJ)){eJ.setData(tJ,qg.data[tJ]);}}V.bz.getMarkupLayerCollection().addItem(eJ);Zj.push(eJ);XQ--;V.ld=(V.wS.length-XQ)/V.wS.length;V.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersProgress,{progress:V.ld});if(V.ld===1){V.hu=false;V.bB.resolve(Zj);V.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersCompleted,{markupLayers:Zj});}};function fg(am){V.hu=false;V.bB.reject(am.error);V.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersFailed,{});};var bE=XA+ago+'?'+new Date().getTime();PCCViewer.Ajax.eB({url:bE,method:'GET'}).then(fz,fg);};if(this.bz.qD){acN();return;}if(!(/^[\x00-\x7F]*$/.test(this.bz.bf.get_documentIdentifier()))){XA=this.bz.aX.imageHandlerUrl+'/MarkupLayers/e'+this.bz.aX.documentID+'/';}else{XA=this.bz.aX.imageHandlerUrl+'/MarkupLayers/u'+encodeURIComponent(this.bz.aX.documentID)+'/';}if(this.pP){return;}if(Object.prototype.toString.call(this.wS)==='[object Array]'&&this.wS.length>0){XQ=this.wS.length;this.hu=true;IPCC.T.forEach(this.wS,uV,this);}else if(typeof this.wS==="string"){this.hu=true;uV(this.wS);}else{this.hu=false;this.bB.reject(new PCCViewer.Error("InvalidParameter",'layerRecordIds parameter is missing or invalid.'));this.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersFailed,{});return;}};LoadMarkupLayersRequest.prototype.aFO=function(qg){var KN={},OV={};IPCC.T.forEach(qg.marks,function(Yt){Yt.conversation.comments=[];KN[Yt.uid]=Yt;},this);IPCC.T.forEach(qg.comments,function(vX){if(KN[vX.markUid]){KN[vX.markUid].conversation.comments.push(vX);}else if(OV[vX.markUid]){OV[vX.markUid].push(vX);}else{OV[vX.markUid]=[vX];}},this);return{sp:KN,gd:OV};};if(Object.defineProperties){Object.defineProperties(LoadMarkupLayersRequest.prototype,{"errorCode":{enumerable:true,get:function(){return this.getErrorCode();}},"progress":{enumerable:true,get:function(){return this.getProgress();}},"viewerControl":{enumerable:true,get:function(){return this.getViewerControl();}}});}module.exports=LoadMarkupLayersRequest;},{}],148:[function(require,module,exports){var cX={setMask:function(K,iP){var HM={};IPCC.T.forEach(iP.translations,function(bG,aV){HM[aV]=new RegExp(bG.replace(/^\/|\/$/g,''));});K.setMask({value:iP.value,translations:HM});},calculateRectangle:function(aE,aX){if(aE.pageData===undefined||(aE.pageData.width===aX.be&&aE.pageData.height===aX.as)){return aE.rectangle;}else{var lG=aX.be/aE.pageData.width;return{x:aE.rectangle.x*lG,y:aE.rectangle.y*lG,width:aE.rectangle.width*lG,height:aE.rectangle.height*lG};}},setRectangle:function(K,aE,aX){K.setRectangle(cX.calculateRectangle(aE,aX));},setLines:function(K,aE,aX){var acm,nY,cc=aE.textLength+aE.startIndex-1,bZ=aE.selectedText,cA={startIndex:aE.startIndex,length:aE.textLength};nY=[];var bx,zd;acm=IPCC.T.reduce(aE.lineGroups,function(fi,or){bx=or.pageNumber-1;fi[bx]=IPCC.T.map(or.lines,function(gb){if(or.pageData!==undefined){zd=cX.calculateRectangle({rectangle:gb,pageData:or.pageData},aX);return new IPCC.Web.UI.Rectangle(zd.x,zd.y,zd.width,zd.height);}else{return new IPCC.Web.UI.Rectangle(gb.x,gb.y,gb.width,gb.height);}});nY.push({pageIndex:bx,endIndex:or.startIndex+or.textLength-1});return fi;},{});K.HO(nY,cc,bZ,cA,acm);},postCreate:function(K,aE){K.L.ajk(new Date(IPCC.T.Hb(aE.creationDateTime)));K.L.VP(new Date(IPCC.T.Hb(aE.modificationDateTime)));return K;},calculatePoint:function(bH,gO,aX){if(gO===undefined||(gO.width===aX.be&&gO.height===aX.as)){return bH;}else{return{x:bH.x*aX.be/gO.width,y:bH.y*aX.as/gO.height};}},Data:function(aE,dg){IPCC.T.forEach(dg,function(bG,aV){aE.setData(aV,bG);});},Comment:function(cr,dm){var pm=cr.addComment(dm.text);pm.setCreationTime(dm.creationDateTime);cX.Data(pm,dm.data);},Conversation:function(K,cr){var ane=K.getConversation();IPCC.T.forEach(cr.comments?cr.comments:[],function(pm){cX.Comment(ane,pm);});cX.Data(ane,cr.data);},Common:function(aE,aX){if(aE.uid===undefined){aE.uid=IPCC.T.ahh();}var K=this.acd(aE.pageNumber,aE.type,{uid:aE.uid});if(aE.rectangle&&K.setRectangle){cX.setRectangle(K,aE,aX);}if(aE.startPoint&&K.setStartPoint){K.setStartPoint(cX.calculatePoint(aE.startPoint,aE.pageData,aX));}if(aE.endPoint&&K.setEndPoint){K.setEndPoint(cX.calculatePoint(aE.endPoint,aE.pageData,aX));}if(aE.points&&K.setPoints){K.setPoints(IPCC.T.map(aE.points,function(bH){return cX.calculatePoint(bH,aE.pageData,aX);}));}if(aE.lineGroups&&K.HO){K.aD=aE.uid;cX.setLines(K,aE,aX);}if(aE.interactionMode){K.setInteractionMode(aE.interactionMode);}K=this.ajo(K);cX.Data(K,aE.data);cX.Conversation(K,aE.conversation);return K;},EllipseAnnotation:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.borderColor){K.setBorderColor(aE.borderColor);}if(aE.borderThickness){K.setBorderThickness(aE.borderThickness);}if(aE.fillColor){K.setFillColor(aE.fillColor);}if(aE.opacity){K.setOpacity(aE.opacity);}return cX.postCreate(K,aE);},FreehandAnnotation:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.color){K.setColor(aE.color);}if(aE.opacity){K.setOpacity(aE.opacity);}if(aE.path){K.setPath(aE.path);}if(aE.thickness){K.setThickness(aE.thickness);}return cX.postCreate(K,aE);},FreehandSignature:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.color){K.setColor(aE.color);}if(aE.path){K.setPath(aE.path);}if(aE.thickness){K.setThickness(aE.thickness);}if(aE.horizontalAlignment){K.setHorizontalAlignment(aE.horizontalAlignment);}return cX.postCreate(K,aE);},HighlightAnnotation:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.fillColor){K.setFillColor(aE.fillColor);}return cX.postCreate(K,aE);},ImageStampAnnotation:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.imageDataUrl&&aE.imageId){K.setImage({id:aE.imageId,dataUrl:aE.imageDataUrl});}return cX.postCreate(K,aE);},ImageStampRedaction:function(aE,aX){return cX.ImageStampAnnotation.apply(this,arguments);},LineAnnotation:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.color){K.setColor(aE.color);}if(aE.endHeadType){K.setEndHeadType(aE.endHeadType);}if(aE.opacity){K.setOpacity(aE.opacity);}if(aE.thickness){K.setThickness(aE.thickness);}return cX.postCreate(K,aE);},PolylineAnnotation:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.color){K.setColor(aE.color);}if(aE.opacity){K.setOpacity(aE.opacity);}if(aE.thickness){K.setThickness(aE.thickness);}return cX.postCreate(K,aE);},RectangleAnnotation:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.borderColor){K.setBorderColor(aE.borderColor);}if(aE.borderThickness){K.setBorderThickness(aE.borderThickness);}if(aE.fillColor){K.setFillColor(aE.fillColor);}if(aE.opacity){K.setOpacity(aE.opacity);}return cX.postCreate(K,aE);},RectangleRedaction:function(aE,aX){var K=cX.Common.apply(this,arguments);if(K.om){var gz=aE.reasons||aE.reason;if(gz&& !Array.isArray(gz)){gz=[gz];}if(gz){K.setReasons(gz);}}else{if(aE.reason){K.setReason(aE.reason);}}if(aE.fillColor){K.setFillColor(aE.fillColor);}if(aE.borderColor){K.setBorderColor(aE.borderColor);}if(aE.borderThickness){K.setBorderThickness(aE.borderThickness);}if(aE.fontColor){K.setFontColor(aE.fontColor);}return cX.postCreate(K,aE);},StampAnnotation:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.label){K.setLabel(aE.label);}if(aE.color){K.setColor(aE.color);}return cX.postCreate(K,aE);},StampRedaction:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.label){K.setLabel(aE.label);}return cX.postCreate(K,aE);},StrikethroughAnnotation:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.color){K.setColor(aE.color);}if(aE.thickness){K.setThickness(aE.thickness);}return cX.postCreate(K,aE);},TextAnnotation:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.borderColor){K.setBorderColor(aE.borderColor);}if(aE.borderThickness){K.setBorderThickness(aE.borderThickness);}if(aE.fillColor){K.setFillColor(aE.fillColor);}if(aE.fontColor){K.setFontColor(aE.fontColor);}if(aE.fontName){K.setFontName(aE.fontName);}if(aE.fontSize){K.setFontSize(aE.fontSize);}if(aE.fontStyle){K.setFontStyle(aE.fontStyle);}if(aE.maxLength){K.setMaxLength(aE.maxLength);}if(aE.horizontalAlignment){K.setHorizontalAlignment(aE.horizontalAlignment);}if(aE.opacity){K.setOpacity(aE.opacity);}if(aE.text){K.setText(aE.text);}return cX.postCreate(K,aE);},TextAreaSignature:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.text){K.setText(aE.text);}if(aE.fontColor){K.setFontColor(aE.fontColor);}if(aE.fontName){K.setFontName(aE.fontName);}if(aE.maxFontSize){K.setMaxFontSize(aE.maxFontSize);}if(aE.fontStyle){K.setFontStyle(aE.fontStyle);}if(aE.maxLength){K.setMaxLength(aE.maxLength);}if(aE.horizontalAlignment){K.setHorizontalAlignment(aE.horizontalAlignment);}return cX.postCreate(K,aE);},TextHyperlinkAnnotation:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.fillColor){K.setFillColor(aE.fillColor);}if(aE.href){K.setHref(aE.href);}return cX.postCreate(K,aE);},TextInputSignature:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.fontColor){K.setFontColor(aE.fontColor);}if(aE.fontName){K.setFontName(aE.fontName);}if(aE.text){K.setText(aE.text);}if(aE.maxLength){K.setMaxLength(aE.maxLength);}if(aE.mask){cX.setMask(K,aE.mask);}if(aE.horizontalAlignment){K.setHorizontalAlignment(aE.horizontalAlignment);}return cX.postCreate(K,aE);},TextRedaction:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.fontColor){K.setFontColor(aE.fontColor);}if(aE.fontName){K.setFontName(aE.fontName);}if(aE.fontSize){K.setFontSize(aE.fontSize);}if(aE.maxLength){K.setMaxLength(aE.maxLength);}if(aE.text){K.setText(aE.text);}if(aE.horizontalAlignment){K.setHorizontalAlignment(aE.horizontalAlignment);}return cX.postCreate(K,aE);},TextSelectionRedaction:function(aE,aX){var K=cX.Common.apply(this,arguments);if(K.om){var gz=aE.reasons||aE.reason;if(gz&& !Array.isArray(gz)){gz=[gz];}if(gz){K.setReasons(gz);}}else{if(aE.reason){K.setReason(aE.reason);}}return cX.postCreate(K,aE);},TextSignature:function(aE,aX){var K=cX.Common.apply(this,arguments);if(aE.color){K.setColor(aE.color);}if(aE.fontName){K.setFontName(aE.fontName);}if(aE.text){K.setText(aE.text);}if(aE.horizontalAlignment){K.setHorizontalAlignment(aE.horizontalAlignment);}return cX.postCreate(K,aE);},TransparentRectangleRedaction:function(aE,aX){var K=cX.Common.apply(this,arguments);return cX.postCreate(K,aE);}};module.exports=cX;},{}],149:[function(require,module,exports){var Cs={HideSideHandlesWhenClose:"HideSideHandlesWhenClose",HideCornerHandlesWhenClose:"HideCornerHandlesWhenClose"};module.exports=Cs;},{}],150:[function(require,module,exports){var eb={serializeMask:function(iP){var agJ={value:iP.value,translations:{}};IPCC.T.forEach(iP.translations,function(bG,aV){agJ.translations[aV]=bG.toString();});return agJ;},copyRectangle:function(C){return{x:C.x,y:C.y,width:C.width,height:C.height};},Common:function(bk,aT){var as;var be;if(bk.page){as=bk.page.get_pageHeight();be=bk.page.get_pageWidth();}else{as=null;be=null;}var aR=bk.mark.getPageNumber();var aE={uid:bk.mark.getUid(),interactionMode:bk.mark.getInteractionMode(),pageNumber:aR,type:bk.mark.getType(),creationDateTime:IPCC.T.wU(bk.mark.L.afZ()),modificationDateTime:IPCC.T.wU(bk.mark.L.ahp()),data:eb.Data(bk.mark),conversation:eb.Conversation(bk.mark.getConversation())};function yM(bH){return{x:bH.x,y:bH.y};};function apQ(){var JR=IPCC.T.map([].concat(bk.mark.L,bk.mark.aM),function(L){if(be!==null){return{pageNumber:L.bx+1,pageData:{width:be,height:as},startIndex:L.get_startIndex(),textLength:L.get_textLength(),lines:IPCC.T.map(L.by,function(aQ){if(aQ.get_rectangle){return eb.copyRectangle(aQ.get_rectangle());}else{return eb.copyRectangle(aQ);}})};}else{return{pageNumber:L.bx+1,startIndex:L.get_startIndex(),textLength:L.get_textLength(),lines:IPCC.T.map(L.by,function(aQ){if(aQ.get_rectangle){return eb.copyRectangle(aQ.get_rectangle());}else{return eb.copyRectangle(aQ);}})};}});aE.lineGroups=JR;};function agP(){if(bk.mark.getRectangle){aE.rectangle=eb.copyRectangle(bk.mark.getRectangle());if(be!==null){aE.pageData={width:be,height:as};}}if(bk.mark.getStartPoint){aE.startPoint=yM(bk.mark.getStartPoint());if(be!==null){aE.pageData=aE.pageData||{width:be,height:as};}}if(bk.mark.getEndPoint){aE.endPoint=yM(bk.mark.getEndPoint());if(be!==null){aE.pageData=aE.pageData||{width:be,height:as};}}if(bk.mark.getPoints){var aW=bk.mark.getPoints();aE.points=IPCC.T.map(aW,yM);if(be!==null){aE.pageData={width:be,height:as};}}if(bk.mark.L.by){apQ();}};if(be!==undefined&&as!==undefined&&be!==0&&as!==0){agP();aT(undefined,aE);}else{bk.vc.requestPageAttributes(aR).then(function aJk(qM){as=qM.height;be=qM.width;agP();aT(undefined,aE);},function aHi(ew){aT(ew);});}},Data:function(aE){return IPCC.T.reduce(aE.getDataKeys(),function(fi,aV){fi[aV]=aE.getData(aV);return fi;},{});},Comment:function(dm){return{text:dm.getText(),data:eb.Data(dm),creationDateTime:IPCC.T.wU(dm.getCreationTime())};},Conversation:function(cr){return{comments:IPCC.T.map(cr.getComments(),function(dm){return eb.Comment(dm);}),data:eb.Data(cr)};},EllipseAnnotation:function(bk,aT){eb.RectangleAnnotation(bk,aT);},FreehandAnnotation:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}aE=IPCC.T.extend(aE,{color:bk.mark.getColor(),opacity:bk.mark.getOpacity(),path:bk.mark.getPath(),thickness:bk.mark.getThickness()});aT(undefined,aE);});},FreehandSignature:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}aE=IPCC.T.extend(aE,{color:bk.mark.getColor(),path:bk.mark.getPath(),thickness:bk.mark.getThickness(),horizontalAlignment:bk.mark.getHorizontalAlignment()});aT(undefined,aE);});},HighlightAnnotation:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}var cA=bk.mark.getPosition();aE=IPCC.T.extend(aE,{fillColor:bk.mark.getFillColor(),textLength:cA.length,startIndex:cA.startIndex,selectedText:bk.mark.getText()});aT(undefined,aE);});},ImageStampAnnotation:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}var bV=bk.mark.getImage();aE=IPCC.T.extend(aE,{imageDataUrl:bV.dataUrl,imageId:bV.id});aT(undefined,aE);});},ImageStampRedaction:function(bk,aT){eb.ImageStampAnnotation(bk,aT);},LineAnnotation:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}aE=IPCC.T.extend(aE,{color:bk.mark.getColor(),endHeadType:bk.mark.getEndHeadType(),opacity:bk.mark.getOpacity(),thickness:bk.mark.getThickness()});aT(undefined,aE);});},PolylineAnnotation:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}aE=IPCC.T.extend(aE,{color:bk.mark.getColor(),opacity:bk.mark.getOpacity(),thickness:bk.mark.getThickness()});aT(undefined,aE);});},RectangleAnnotation:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}aE=IPCC.T.extend(aE,{borderColor:bk.mark.getBorderColor(),borderThickness:bk.mark.getBorderThickness(),fillColor:bk.mark.getFillColor(),opacity:bk.mark.getOpacity()});aT(undefined,aE);});},RectangleRedaction:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}aE=IPCC.T.extend(aE,{fillColor:bk.mark.getFillColor(),borderColor:bk.mark.getBorderColor(),borderThickness:bk.mark.getBorderThickness(),fontColor:bk.mark.getFontColor()});if(bk.mark.om){aE.reasons=bk.mark.getReasons();}else{aE.reason=bk.mark.getReason();}aT(undefined,aE);});},StampAnnotation:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}aE=IPCC.T.extend(aE,{label:bk.mark.getLabel(),color:bk.mark.getColor()});aT(undefined,aE);});},StampRedaction:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}aE=IPCC.T.extend(aE,{label:bk.mark.getLabel()});aT(undefined,aE);});},StrikethroughAnnotation:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}var cA=bk.mark.getPosition();aE=IPCC.T.extend(aE,{color:bk.mark.getColor(),thickness:bk.mark.getThickness(),textLength:cA.length,startIndex:cA.startIndex,selectedText:bk.mark.getText()});aT(undefined,aE);});},TextAnnotation:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}aE=IPCC.T.extend(aE,{borderColor:bk.mark.getBorderColor(),borderThickness:bk.mark.getBorderThickness(),fillColor:bk.mark.getFillColor(),fontColor:bk.mark.getFontColor(),fontName:bk.mark.getFontName(),fontSize:bk.mark.getFontSize(),fontStyle:bk.mark.getFontStyle(),maxLength:bk.mark.getMaxLength(),horizontalAlignment:bk.mark.getHorizontalAlignment(),opacity:bk.mark.getOpacity(),text:bk.mark.getText()});aT(undefined,aE);});},TextAreaSignature:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}aE=IPCC.T.extend(aE,{text:bk.mark.getText(),fontColor:bk.mark.getFontColor(),fontName:bk.mark.getFontName(),fontStyle:bk.mark.getFontStyle(),maxFontSize:bk.mark.getMaxFontSize(),maxLength:bk.mark.getMaxLength(),horizontalAlignment:bk.mark.getHorizontalAlignment(),});aT(undefined,aE);});},TextHyperlinkAnnotation:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}var cA=bk.mark.getPosition();aE=IPCC.T.extend(aE,{href:bk.mark.getHref(),fillColor:bk.mark.getFillColor(),textLength:cA.length,startIndex:cA.startIndex,selectedText:bk.mark.getText()});aT(undefined,aE);});},TextInputSignature:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}aE=IPCC.T.extend(aE,{fontColor:bk.mark.getFontColor(),fontName:bk.mark.getFontName(),text:bk.mark.getText(),mask:bk.mark.getMask(),maxLength:bk.mark.getMaxLength(),horizontalAlignment:bk.mark.getHorizontalAlignment()});if(bk.mark.getMask()){aE.mask=eb.serializeMask(bk.mark.getMask());}aT(undefined,aE);});},TextRedaction:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}aE=IPCC.T.extend(aE,{fontColor:bk.mark.getFontColor(),fontName:bk.mark.getFontName(),fontSize:bk.mark.getFontSize(),text:bk.mark.getText(),maxLength:bk.mark.getMaxLength(),horizontalAlignment:bk.mark.getHorizontalAlignment()});aT(undefined,aE);});},TextSelectionRedaction:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}var cA=bk.mark.getPosition();aE=IPCC.T.extend(aE,{textLength:cA.length,startIndex:cA.startIndex,selectedText:bk.mark.getText()});if(bk.mark.om){aE.reasons=bk.mark.getReasons();}else{aE.reason=bk.mark.getReason();}aT(undefined,aE);});},TextSignature:function(bk,aT){eb.Common(bk,function(bW,aE){if(bW){aT(bW);return;}aE=IPCC.T.extend(aE,{color:bk.mark.getColor(),fontName:bk.mark.getFontName(),text:bk.mark.getText(),horizontalAlignment:bk.mark.getHorizontalAlignment()});aT(undefined,aE);});},TransparentRectangleRedaction:function(bk,aT){eb.Common(bk,aT);}};module.exports=eb;},{}],151:[function(require,module,exports){'use strict';var IPCC=require('./../IPCC/IPCC');var Data=require('./PCCViewer.Data').Data;var SessionData=require('./PCCViewer.Data').SessionData;function Mark(parameters){this.aR=0;this.dE=undefined;this.xi=false;this.lj=Mark.InteractionMode.Full;this.ce=true;this.om=parameters.enableMultipleRedactionReasons;if(parameters.uid&&parameters.viewerControl){(function(ad,jI){IPCC.T.forEach(ad,function validateMark(kc){if(kc.getUid()===jI){throw new Error('Uid '+jI+' already exists in the document and cannot be duplicated.');}});})(parameters.viewerControl.getAllMarks(),parameters.uid);}var jI=parameters.uid||IPCC.T.ahh();if(parameters.igMark&&parameters.igMark instanceof IPCC.Web.UI.Mark){this.L=parameters.igMark;this.dE=this.L.get_markID().toString();this.dg=this.L.get_data();}else{this.dg=new IPCC.Web.UI.Data();}Data.extend(this);this.EW=new IPCC.Web.UI.Data();SessionData.extend(this);if(parameters.pageNumber!==undefined){IPCC.aA.iW(parameters.pageNumber,'pageNumber');this.aR=parameters.pageNumber;}if(parameters.id!==undefined){IPCC.aA.lg(parameters.id,'id');this.dE=parameters.id;}if(parameters.type&&parameters.type==='PlaceSignature'&&parameters.xi){this.bO=parameters.type;this.xi=true;}else if(parameters.type!==undefined){IPCC.aA.lg(parameters.type,'type');var Ih=Qt(parameters.type,Mark.Type);if(Ih===null){throw new RangeError("The value of mark type was invalid.");}this.bO=Ih;}if('ds'in parameters){this.ds=parameters.ds;}if('bU'in parameters){this.bU=parameters.bU;}addPropertiesToMark(this);addMethodsToMark(this);this.getUid=function(){return jI;};if(Object.defineProperties&&Object.defineProperty){Object.defineProperty(this,'uid',{value:jI,enumerable:true,writable:false});}};Mark.prototype.getType=function(){return this.bO;};Mark.prototype.getId=function(){return this.dE;};Mark.prototype.getPageNumber=function(){return this.aR;};Mark.prototype.getConversation=function(){if(!this.cr){this.cr=new PCCViewer.Conversation(this);}return this.cr;};Mark.prototype.getBoundingRectangle=function(){if(this.L){var aQ=this.L.get_boundingRectangle();if(aQ instanceof IPCC.Web.UI.Rectangle){this.lM={width:aQ.width,height:aQ.height,x:aQ.x,y:aQ.y};}}return this.lM;};Mark.prototype.getInteractionMode=function(){if(this.L){switch(this.L.get_interactionMode()){case IPCC.Web.UI.MarkInteractionMode.SelectionDisabled:return PCCViewer.Mark.InteractionMode.SelectionDisabled;case IPCC.Web.UI.MarkInteractionMode.Full:return PCCViewer.Mark.InteractionMode.Full;case IPCC.Web.UI.MarkInteractionMode.TextEditingDisabled:return 'TextEditingDisabled';default:return PCCViewer.Mark.InteractionMode.Full;}}return this.lj;};Mark.prototype.setInteractionMode=function(interactionMode){var lj,QM;if(typeof interactionMode==='string'&&interactionMode.toLowerCase()==='texteditingdisabled'){lj='TextEditingDisabled';QM=IPCC.Web.UI.MarkInteractionMode.TextEditingDisabled;}else{lj=Qt(interactionMode,PCCViewer.Mark.InteractionMode);switch(lj){case PCCViewer.Mark.InteractionMode.SelectionDisabled:QM=IPCC.Web.UI.MarkInteractionMode.SelectionDisabled;break;case PCCViewer.Mark.InteractionMode.Full:QM=IPCC.Web.UI.MarkInteractionMode.Full;break;default:throw new Error("The specified interactionMode is not valid.");}}if(this.L){this.L.set_interactionMode(QM);}this.lj=lj;return this;};Mark.prototype.reset=function(){var dP=new Mark({type:this.bO,xi:this.xi});this.dg={};if(this.setBorderColor&&dP.getBorderColor){this.setBorderColor(dP.getBorderColor());}if(this.setBorderThickness&&dP.getBorderThickness){this.setBorderThickness(dP.getBorderThickness());}if(this.setColor&&dP.getColor){this.setColor(dP.getColor());}if(this.setEndHeadType&&dP.getEndHeadType){this.setEndHeadType(dP.getEndHeadType());}if(this.setEndPoint&&dP.getEndPoint){this.setEndPoint(dP.getEndPoint());}if(this.setFillColor&&dP.getFillColor){this.setFillColor(dP.getFillColor());}if(this.setFontColor&&dP.getFontColor){this.setFontColor(dP.getFontColor());}if(this.setFontName&&dP.getFontName){this.setFontName(dP.getFontName());}if(this.setFontSize&&dP.getFontSize){this.setFontSize(dP.getFontSize());}if(this.setFontStyle&&dP.getFontStyle){this.setFontStyle(dP.getFontStyle());}if(this.setHorizontalAlignment&&dP.getHorizontalAlignment){this.setHorizontalAlignment(dP.getHorizontalAlignment());}if(this.setLabel&&dP.getLabel){this.setLabel(dP.getLabel());}if(this.setPosition&&this.L&&dP.getPosition){this.setPosition(dP.getPosition());}if(this.setReason&&dP.getReason&&this.om!==true){this.setReason(dP.getReason());}if(this.setReasons&&dP.getReasons&&this.om!==false){this.setReasons(dP.getReasons());}if(this.setOpacity&&dP.getOpacity){this.setOpacity(dP.getOpacity());}if(this.setRectangle&&dP.getRectangle){this.setRectangle(dP.getRectangle());}if(this.setStartPoint&&dP.getStartPoint){this.setStartPoint(dP.getStartPoint());}if(this.setText&&dP.getText){this.setText(dP.getText());}if(this.setThickness&&dP.getThickness){this.setThickness(dP.getThickness());}if(this.setPath&&dP.getPath){this.setPath(dP.getPath());}if(this.setHref&&dP.getHref){this.setHref(dP.getHref());}if(this.setImage&&dP.getImage){this.setImage(dP.getImage());}if(this.setInteractionMode&&dP.getInteractionMode){this.setInteractionMode(dP.getInteractionMode());}if(this.setPoints&&dP.getPoints){this.setPoints(dP.getPoints());}if(this.setMask&&dP.getMask){this.setMask(dP.getMask());}if(this.setMaxLength&&dP.getMaxLength){this.setMaxLength(dP.getMaxLength());}if(this.setMaxFontSize&&dP.getMaxFontSize){this.setMaxFontSize(dP.getMaxFontSize());}};if(Object.defineProperties){Object.defineProperties(Mark.prototype,{"type":{enumerable:true,get:function(){return this.getType();}},"pageNumber":{enumerable:true,get:function(){return this.getPageNumber();}},"id":{enumerable:true,get:function(){return this.getId();}},"conversation":{enumerable:true,get:function(){return this.getConversation();}},"boundingRectangle":{enumerable:true,get:function(){return this.getBoundingRectangle();}},"interactionMode":{enumerable:true,get:function(){return this.getInteractionMode();},set:function(value){return this.setInteractionMode(value);}}});}Mark.Type={LineAnnotation:"LineAnnotation",RectangleAnnotation:"RectangleAnnotation",EllipseAnnotation:"EllipseAnnotation",TextAnnotation:"TextAnnotation",StampAnnotation:"StampAnnotation",HighlightAnnotation:"HighlightAnnotation",RectangleRedaction:"RectangleRedaction",TransparentRectangleRedaction:"TransparentRectangleRedaction",TextHyperlinkAnnotation:"TextHyperlinkAnnotation",TextRedaction:"TextRedaction",StampRedaction:"StampRedaction",FreehandAnnotation:"FreehandAnnotation",FreehandSignature:"FreehandSignature",TextSignature:"TextSignature",TextInputSignature:"TextInputSignature",TextAreaSignature:"TextAreaSignature",TextSelectionRedaction:"TextSelectionRedaction",ImageStampAnnotation:"ImageStampAnnotation",ImageStampRedaction:"ImageStampRedaction",PolylineAnnotation:"PolylineAnnotation",StrikethroughAnnotation:"StrikethroughAnnotation"};Mark.LineHeadType={None:"None",FilledTriangle:"FilledTriangle"};Mark.FontStyles={Bold:"Bold",Italic:"Italic",Strikeout:"Strikeout",Underline:"Underline"};Mark.InteractionMode={Full:"Full",SelectionDisabled:"SelectionDisabled"};Mark.HorizontalAlignment={Center:"Center",Left:"Left",Right:"Right"};function Qt(Zk,bO){var aaS=Zk.toLowerCase();for(var standardType in bO){if(bO.hasOwnProperty(standardType)&&standardType.toLowerCase&&standardType.toLowerCase()===aaS){return standardType;}}return null;};function addMethodsToMark(K){function aqa(K){K.highlightText=function(highlights){if(!this.L){throw new Error("It is invalid to highlight text on this mark.");}var mO;if(highlights!==null&&typeof highlights!=="undefined"){if(Object.prototype.toString.call(highlights)!=='[object Array]'){mO=[highlights];}else{mO=highlights;}for(var i=0;i<mO.length;i++){atD(mO[i]);}}else{mO=[];}var bO=K.getType();switch(bO){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:K.L.selectText(mO);break;case Mark.Type.HighlightAnnotation:case Mark.Type.TextSelectionRedaction:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.StrikethroughAnnotation:var V=this;var PN=[];var rr=false,Pu=0,QE,EN;var afm=function(GA,atg,hy){var yP;var aaq= -1,Rc=[];var vx=(GA.aP+GA.cq);if(rr===true&&QE>=0&&EN>=0){if(GA.bx-1===QE){yP=0;if(Pu<=vx){Rc.push({startIndex:yP,length:Pu,color:hy[EN].color,opacity:(hy[EN].opacity)?hy[EN].opacity:127});rr=false;Pu=0;QE= -1;EN= -1;}}}for(var ag=0;ag<hy.length;ag++){yP=GA.aP+hy[ag].startIndex-atg;if(yP<0){continue;}if(Array.prototype.indexOf){aaq=PN.indexOf(ag);}else{aaq=IPCC.Web.jQ(PN,ag);}var dv=127;if(aaq=== -1){if(yP+hy[ag].length<=vx){if(hy[ag].opacity){dv=hy[ag].opacity;}Rc.push({startIndex:yP,length:hy[ag].length,color:hy[ag].color,opacity:dv});PN.push(ag);V.Bj.push(hy[ag]);}else{var Sp=vx-yP;if(Sp>0){Pu=hy[ag].length-Sp;dv=127;if(hy[ag].opacity){dv=hy[ag].opacity;}Rc.push({startIndex:yP,length:Sp,color:hy[ag].color,opacity:dv});PN.push(ag);V.Bj.push(hy[ag]);rr=true;EN=ag;QE=GA.bx;}}}}return Rc;};this.Bj=[];var fM=afm(this.L,0,mO);K.clearHighlights();if(fM.length>0){V.L.selectText(fM);}fM=[];var fX=this.L.cq;if(this.aM&&this.aM.length){for(var H=0;H<this.aM.length;H++){fM=[];fM=afm(this.aM[H],fX,mO);fX+=this.aM[H].cq;if(fM.length>0){this.aM[H].selectText(fM);}}}break;}return this;};function atD(Fe){IPCC.aA.mt(Fe.startIndex,'highlight.startIndex',0,K.getText().length);IPCC.aA.mt(Fe.length,'highlight.length',1,Number.MAX_VALUE);IPCC.aA.dI(Fe.color,'highlight.color');if(Fe.opacity){IPCC.aA.mt(Fe.opacity,"highlight.opacity",0,255);}};K.clearHighlights=function(){if(this.L){if(!this.L){throw new Error("It is invalid to clear highlights on this mark.");}}var bO=K.getType();switch(bO){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:K.L.selectText();break;case Mark.Type.HighlightAnnotation:case Mark.Type.TextSelectionRedaction:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.StrikethroughAnnotation:this.L.selectText();if(this.aM&&this.aM.length){for(var H=0;H<this.aM.length;H++){this.aM[H].selectText();}}break;}return this;};};var bO=K.getType();switch(bO){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.HighlightAnnotation:case Mark.Type.TextSelectionRedaction:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.StrikethroughAnnotation:aqa(K);break;default:break;}};function addPropertiesToMark(K){K.lM={x:0,y:0,width:0,height:0};var bO=K.getType();switch(bO){case Mark.Type.LineAnnotation:K.dI='#18385F';K.ig=IPCC.Web.UI.LineStyle.Solid;K.nQ=6;K.dv=255;K.LC={x:0,y:0};K.vx={x:0,y:0};K.mx="None";break;case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:K.cP='#FB0404';K.dv=255;K.ko='#000000';K.jU=4;K.C={x:0,y:0,width:0,height:0};break;case Mark.Type.RectangleRedaction:K.ew="";K.gz=[];K.cP='#000000';K.ko='#000000';K.jU=1;K.gG='#FFFFFF';K.C={x:0,y:0,width:0,height:0};K.oS=true;if(K.L){K.L.jP(K.oS);}break;case Mark.Type.TransparentRectangleRedaction:K.C={x:0,y:0,width:0,height:0};K.oS=true;if(K.L){K.L.jP(K.oS);K.L.set_fillColor('#FFFF00');K.L.set_opacity(127);K.L.set_lineWidth(1);K.L.set_lineColor('#FFFF00');}break;case Mark.Type.TextAnnotation:K.aO='';K.cP='#FFFFFF';K.dv=127;K.ko='#000000';K.jU=4;K.gG='#000000';K.gM="Arial";K.cs=12;K.cG=[];K.mI="Left";K.fU=0;K.C={x:0,y:0,width:0,height:0};break;case Mark.Type.StampAnnotation:case Mark.Type.StampRedaction:K.tW="Approved";K.C={x:0,y:0,width:0,height:0};if(bO===Mark.Type.StampRedaction){K.oS=true;if(K.L){K.L.jP(K.oS);K.L.set_fillColor('#000000');}}else{K.dI="#000000";}break;case Mark.Type.HighlightAnnotation:K.cP="#FFFF00";K.aO='';K.bZ='';if(K.L){if(K.L.bZ){K.aO=K.L.bZ;}}K.cA={startIndex:0,length:0};K.Bj=[];K.aM=[];break;case Mark.Type.TextSelectionRedaction:K.ew="";K.gz=[];K.aO='';K.cA={startIndex:0,length:0};if(K.L){K.L.set_fillColor('#000000');if(K.L.bZ){K.aO=K.L.bZ;}}K.Bj=[];K.aM=[];break;case Mark.Type.TextHyperlinkAnnotation:K.nb='';K.cP="#3B00FF";K.aO='';if(K.L){if(K.L.bZ){K.aO=K.L.bZ;}}K.cA={startIndex:0,length:0};K.Bj=[];K.aM=[];break;case Mark.Type.TextRedaction:K.aO='';K.gG='#000000';K.gM="Arial";K.cs=12;K.C={x:0,y:0,width:0,height:0};K.oS=true;K.fU=0;if(K.L){K.L.jP(K.oS);K.L.set_fillColor('#FFFFFF');}K.mI="Left";break;case Mark.Type.FreehandAnnotation:K.dv=255;K.C={x:0,y:0,width:0,height:0};K.nQ=4;K.dI='#000000';K.hb='M0,0';break;case Mark.Type.FreehandSignature:K.C={x:0,y:0,width:0,height:0};K.nQ=4;K.dI='#000000';K.mI="Center";K.hb='M0,0';break;case Mark.Type.TextSignature:K.aO="John Doe";K.C={x:0,y:0,width:0,height:0};K.dI="#000000";if(K.L){K.dI=K.L.cP||'#000000';K.L.jP(K.oS);K.L.set_fillColor(K.dI);}K.mI="Center";K.gM="";break;case Mark.Type.TextInputSignature:K.aO="";K.C={x:0,y:0,width:0,height:0};K.gG="#000000";K.fU=0;if(K.L){K.gG=K.L.get_textColor()||'#000000';K.L.jP(false);K.L.set_fillColor('transparent');K.L.set_opacity(255);K.L.set_lineColor('transparent');K.L.set_lineWidth(0);}K.mI="Left";K.gM="Courier New";K.iP=null;K.eV=0;K.cP="transparent";K.dv=255;K.ko="transparent";K.jU=1;break;case Mark.Type.TextAreaSignature:K.aO="";K.C={x:0,y:0,width:0,height:0};K.gG="#000000";if(K.L){K.gG=K.L.get_textColor()||'#000000';K.L.jP(false);K.L.set_fillColor('transparent');K.L.set_opacity(255);K.L.set_lineColor('transparent');K.L.set_lineWidth(0);}K.mI="Left";K.gM="Courier New";K.cG=[];K.fU=0;K.eV=0;K.cP="transparent";K.dv=255;K.ko="transparent";K.jU=1;break;case 'PlaceSignature':K.lB=undefined;K.C={x:0,y:0,width:0,height:0};break;case Mark.Type.ImageStampAnnotation:case Mark.Type.ImageStampRedaction:K.bV="";K.qi="";K.C={x:0,y:0,width:0,height:0};if(K.L&&bO===Mark.Type.ImageStampRedaction){K.oS=true;K.L.jP(K.oS);}break;case Mark.Type.PolylineAnnotation:K.dI='#000000';K.ig=IPCC.Web.UI.LineStyle.Solid;K.nQ=2;K.dv=255;K.aW=[{x:0,y:0},{x:0,y:0}];break;case Mark.Type.StrikethroughAnnotation:K.dI='#000000';K.ig=IPCC.Web.UI.LineStyle.Solid;K.nQ=2;K.aO='';K.bZ='';if(K.L){if(K.L.bZ){K.aO=K.L.bZ;}}K.cA={startIndex:0,length:0};K.Bj=[];K.aM=[];break;}function getSignature(){return this.lB||undefined;};function setSignature(signature){if(typeof signature==='undefined'){this.lB=undefined;return;}else if(typeof signature!=='object'){throw new Error("The parameter `signature` is not an Object.");}if(!signature.path&& !signature.text){throw new Error("The parameter `signature` should have at least one of these properties: text, path");}else{if(signature.path){if(signature.path.length<1){throw new Error("The property `signature.path` cannot be empty.");}else if(signature.path.match(/[^MLC0-9,.\s]/)){throw new Error("The property `signature.path` has invalid characters.");}}else if(signature.text){if(signature.text.length<1){signature.text='';}}}this.lB=signature;return this;};if(K.lB||K.bO==='PlaceSignature'){K.getSignature=getSignature;K.setSignature=setSignature;if(Object.defineProperties){Object.defineProperties(K,{"signature":{enumerable:true,get:function(){return this.getSignature();},set:function(value){return this.setSignature(value);}}});}}function getColor(){if(this.L){switch(this.bO){case Mark.Type.LineAnnotation:case Mark.Type.PolylineAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.FreehandAnnotation:case Mark.Type.StrikethroughAnnotation:this.dI=this.L.get_lineColor()||this.dI;break;case Mark.Type.StampAnnotation:case Mark.Type.TextSignature:this.dI=this.L.get_fillColor()||this.dI;break;}}return this.dI;};function setColor(value){IPCC.aA.dI(value,'color');this.dI=value;if(this.L){switch(this.bO){case Mark.Type.LineAnnotation:case Mark.Type.PolylineAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.FreehandAnnotation:this.L.set_lineColor(value);break;case Mark.Type.StampAnnotation:this.L.set_fillColor(value);break;case Mark.Type.TextSignature:this.L.set_textColor(value);this.L.set_fillColor(value);break;case Mark.Type.StrikethroughAnnotation:this.L.set_lineColor(value);if(this.aM&&this.aM.length){for(var H=0;H<this.aM.length;H++){this.aM[H].set_lineColor(value);}}break;}}return this;};if(K.dI!==undefined){K.getColor=getColor;K.setColor=setColor;if(Object.defineProperties){Object.defineProperties(K,{"color":{enumerable:true,get:function(){return this.getColor();},set:function(value){return this.setColor(value);}}});}}function getFillColor(){if(this.L){switch(this.bO){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.HighlightAnnotation:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.cP=this.L.get_fillColor()||this.cP;break;}}return this.cP;};function setFillColor(value){if(this.bO===PCCViewer.Mark.Type.HighlightAnnotation||this.bO===PCCViewer.Mark.Type.TextHyperlinkAnnotation){IPCC.aA.dI(value,'fillColor');}else{IPCC.aA.aai(value,'fillColor');}this.cP=value;if(this.L){switch(this.bO){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.L.set_fillColor(value);break;case Mark.Type.HighlightAnnotation:case Mark.Type.TextHyperlinkAnnotation:this.L.set_fillColor(value);if(this.aM&&this.aM.length){for(var H=0;H<this.aM.length;H++){this.aM[H].set_fillColor(value);}}break;}}return this;};if(K.cP!==undefined){K.getFillColor=getFillColor;K.setFillColor=setFillColor;if(Object.defineProperties){Object.defineProperties(K,{"fillColor":{enumerable:true,get:function(){return this.getFillColor();},set:function(value){return this.setFillColor(value);}}});}}function getImage(){var retVal={dataUrl:this.bV,id:this.qi};return retVal;};function setImage(params){IPCC.aA.lg(params.dataUrl,'string');IPCC.aA.lg(params.id,'string');this.bV=params.dataUrl;this.qi=params.id;if(this.L){switch(this.bO){case Mark.Type.ImageStampAnnotation:case Mark.Type.ImageStampRedaction:this.L.set_image(params.dataUrl);this.L.qi=params.id;break;}}return this;};if(K.bV!==undefined){K.getImage=getImage;K.setImage=setImage;if(Object.defineProperties){Object.defineProperties(K,{"image":{enumerable:true,get:function(){return this.getImage();},set:function(params){return this.setImage(params);}}});}}function getBorderColor(){if(this.L){switch(this.bO){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.ko=this.L.get_lineColor()||this.ko;break;}}return this.ko;};function setBorderColor(value){IPCC.aA.aai(value,'borderColor');this.ko=value;if(this.L){switch(this.bO){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.L.set_lineColor(value);break;}}return this;};if(K.ko!==undefined){K.getBorderColor=getBorderColor;K.setBorderColor=setBorderColor;if(Object.defineProperties){Object.defineProperties(K,{"borderColor":{enumerable:true,get:function(){return this.getBorderColor();},set:function(value){return this.setBorderColor(value);}}});}}function getOpacity(){if(this.L){switch(this.bO){case Mark.Type.LineAnnotation:case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.FreehandAnnotation:case Mark.Type.PolylineAnnotation:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.dv=this.L.get_opacity()||this.dv;break;}}return this.dv;};function setOpacity(value){IPCC.aA.mt(value,'opacity',0,255);this.dv=value;if(this.L){switch(this.bO){case Mark.Type.LineAnnotation:case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.FreehandAnnotation:case Mark.Type.PolylineAnnotation:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.L.set_opacity(value);break;}}return this;};if(K.dv!==undefined&&K.dv>=0){K.getOpacity=getOpacity;K.setOpacity=setOpacity;if(Object.defineProperties){Object.defineProperties(K,{"opacity":{enumerable:true,get:function(){return this.getOpacity();},set:function(value){return this.setOpacity(value);}}});}}function getThickness(){if(this.L){switch(this.bO){case Mark.Type.LineAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.FreehandAnnotation:case Mark.Type.PolylineAnnotation:case Mark.Type.StrikethroughAnnotation:this.nQ=this.L.get_lineWidth()||this.nQ;break;}}return this.nQ;};function setThickness(value){IPCC.aA.kf(value,'thickness',1,50);this.nQ=value;if(this.L){switch(this.bO){case Mark.Type.LineAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.FreehandAnnotation:case Mark.Type.PolylineAnnotation:this.L.set_lineWidth(value);break;case Mark.Type.StrikethroughAnnotation:this.L.set_lineWidth(value);if(this.aM&&this.aM.length){for(var H=0;H<this.aM.length;H++){this.aM[H].set_lineWidth(value);}}break;}}return this;};if(K.nQ){K.getThickness=getThickness;K.setThickness=setThickness;if(Object.defineProperties){Object.defineProperties(K,{"thickness":{enumerable:true,get:function(){return this.getThickness();},set:function(value){return this.setThickness(value);}}});}}function getBorderThickness(){if(this.L){switch(this.bO){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.jU=this.L.get_lineWidth()||this.jU;break;}}return this.jU;};function setBorderThickness(value){IPCC.aA.kf(value,'borderThickness',1,50);this.jU=value;if(this.L){switch(this.bO){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.L.set_lineWidth(value);break;}}return this;};if(K.jU!==undefined){K.getBorderThickness=getBorderThickness;K.setBorderThickness=setBorderThickness;if(Object.defineProperties){Object.defineProperties(K,{"borderThickness":{enumerable:true,get:function(){return this.getBorderThickness();},set:function(value){return this.setBorderThickness(value);}}});}}function getVisible(){if(this.L){this.ce=this.L.get_visible();}return this.ce;};function setVisible(value){if(value!==true&&value!==false){throw new Error("The parameter value is invalid. The parameter must be boolean true or false.");}this.ce=value;if(this.L){this.L.set_visible(value);}var H;switch(this.bO){case Mark.Type.TextSelectionRedaction:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.HighlightAnnotation:case Mark.Type.StrikethroughAnnotation:if(this.aM&&this.aM.length){for(H=0;H<this.aM.length;H++){this.aM[H].set_visible(value);}}if(this.bO===PCCViewer.Mark.Type.TextSelectionRedaction){var eG=this.L;for(H=0;H<this.L.by.length;H++){eG.by[H].set_visible(value);}if(eG.aD){IPCC.T.forEach(this.aM,function(L){for(H=0;H<L.by.length;H++){L.by[H].set_visible(value);}});}}break;}return this;};if(K.ce!==undefined){K.getVisible=getVisible;K.setVisible=setVisible;if(Object.defineProperties){Object.defineProperties(K,{"visible":{enumerable:true,get:function(){return this.getVisible();},set:function(value){return this.setVisible(value);}}});}}function getStartPoint(){if(this.L&&this.L!==null){var aW=this.L.get_points();if(aW.get_length()>0){switch(this.bO){case Mark.Type.LineAnnotation:var bH=aW.getPoint(0);if(bH){this.LC={x:bH.x,y:bH.y};}break;}}}return this.LC;};function setStartPoint(value){IPCC.aA.iW(value.x,'startPoint'+'.x');IPCC.aA.iW(value.y,'startPoint'+'.y');if(this.L&&this.L!==null){var aW=this.L.get_points();switch(this.bO){case Mark.Type.LineAnnotation:aW.setPoint(0,new IPCC.Web.UI.Point(value.x,value.y));break;}}this.LC=value;return this;};if(K.LC){K.getStartPoint=getStartPoint;K.setStartPoint=setStartPoint;if(Object.defineProperties){Object.defineProperties(K,{"startPoint":{enumerable:true,get:function(){return this.getStartPoint();},set:function(value){return this.setStartPoint(value);}}});}}function getEndPoint(){if(this.L&&this.L!==null){var aW=this.L.get_points();if(aW.get_length()>0){switch(this.bO){case Mark.Type.LineAnnotation:var bH=aW.getPoint(1);if(bH){this.vx={x:bH.x,y:bH.y};}break;}}}return this.vx;};function setEndPoint(value){IPCC.aA.iW(value.x,'endPoint'+'.x');IPCC.aA.iW(value.y,'endPoint'+'.y');if(this.L&&this.L!==null){var aW=this.L.get_points();switch(this.bO){case Mark.Type.LineAnnotation:aW.setPoint(1,new IPCC.Web.UI.Point(value.x,value.y));break;}}this.vx=value;return this;};if(K.vx){K.getEndPoint=getEndPoint;K.setEndPoint=setEndPoint;if(Object.defineProperties){Object.defineProperties(K,{"endPoint":{enumerable:true,get:function(){return this.getEndPoint();},set:function(value){return this.setEndPoint(value);}}});}}function getEndHeadType(){if(this.L&&this.L!==null){var Bg;switch(this.bO){case Mark.Type.LineAnnotation:Bg=this.L.get_endHeadType();switch(Bg){case IPCC.Web.UI.LineHeadType.None:this.mx=PCCViewer.Mark.LineHeadType.None;break;case IPCC.Web.UI.LineHeadType.Solid:this.mx=PCCViewer.Mark.LineHeadType.FilledTriangle;break;}break;}}return this.mx;};function setEndHeadType(value){var Bg;switch(value){case Mark.LineHeadType.None:Bg=IPCC.Web.UI.LineHeadType.None;break;case Mark.LineHeadType.FilledTriangle:Bg=IPCC.Web.UI.LineHeadType.Solid;break;default:throw "The specified value is not a valid line head type.";}if(this.L&&this.L!==null){switch(this.bO){case Mark.Type.LineAnnotation:this.L.set_endHeadType(Bg);break;}}this.mx=value;return this;};if(K.mx){K.getEndHeadType=getEndHeadType;K.setEndHeadType=setEndHeadType;if(Object.defineProperties){Object.defineProperties(K,{"endHeadType":{enumerable:true,get:function(){return this.getEndHeadType();},set:function(value){return this.setEndHeadType(value);}}});}}function getPoints(){if(this.L&&this.L!==null){var Fi=this.L.get_points();var cl=Fi.get_length();var ajq=[];var VG=function(axo,aJ){ajq.push(axo.getPoint(aJ));};if(cl>1){switch(this.bO){case Mark.Type.PolylineAnnotation:for(var H=0;H<cl;H++){VG(Fi,H);}this.aW=ajq;break;}}}return this.aW.slice();};function setPoints(value){if(!(value instanceof Array)){throw "invalid parameter. The parameter should be an array.";}if(value.length<=1){return;}for(var ag=0;ag<value.length;ag++){IPCC.aA.bH(value[ag],'PolylinePoint');}if(this.L&&this.L!==null){var Fi=this.L.get_points();var apf=function(aJ){Fi.addPoint(new IPCC.Web.UI.Point(value[aJ].x,value[aJ].y));};switch(this.bO){case Mark.Type.PolylineAnnotation:Fi.removeAllPoints();for(var H=0;H<value.length;H++){apf(H);}}}this.aW=value;return this;};if(K.aW){K.getPoints=getPoints;K.setPoints=setPoints;if(Object.defineProperties){Object.defineProperties(K,{"points":{enumerable:true,get:function(){return this.getPoints();},set:function(value){return this.setPoints(value);}}});}}function getRectangle(){if(this.L){switch(this.bO){case Mark.Type.RectangleAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TransparentRectangleRedaction:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.StampAnnotation:case Mark.Type.StampRedaction:case Mark.Type.FreehandAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:case Mark.Type.ImageStampAnnotation:case Mark.Type.ImageStampRedaction:var aQ=this.L.get_rectangle();if(aQ instanceof IPCC.Web.UI.Rectangle){this.C={width:aQ.width,height:aQ.height,x:aQ.x,y:aQ.y};}break;}}return this.C;};function setRectangle(value){IPCC.aA.iW(value.x,'rectangle'+'.x');IPCC.aA.iW(value.y,'rectangle'+'.y');IPCC.aA.iW(value.width,'rectangle'+'.width');IPCC.aA.iW(value.height,'rectangle'+'.height');if(this.L&&this.L!==null){switch(this.bO){case Mark.Type.RectangleAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TransparentRectangleRedaction:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.StampAnnotation:case Mark.Type.StampRedaction:case Mark.Type.FreehandAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:case Mark.Type.ImageStampAnnotation:case Mark.Type.ImageStampRedaction:var aQ=new IPCC.Web.UI.Rectangle(value.x,value.y,value.width,value.height);this.L.set_rectangle(aQ);break;}}this.C=value;return this;};if(K.C){K.getRectangle=getRectangle;K.setRectangle=setRectangle;if(Object.defineProperties){Object.defineProperties(K,{"rectangle":{enumerable:true,get:function(){return this.getRectangle();},set:function(value){return this.setRectangle(value);}}});}}function getPosition(){var di=0;if(this.L&&this.L.bZ){di=this.L.bZ.length;}else if(this.L){di=IPCC.T.reduce([this.L].concat(this.aM||[]),function(cl,L){return cl+L.get_textLength();},0);}return this.L?{startIndex:this.L.aP,length:di}:this.cA;};function setPosition(value){IPCC.aA.iW(value.startIndex,'position.startIndex');IPCC.aA.iW(value.length,'position.length');if(value.startIndex<0){throw new Error("The start index must be 0 or greater.");}if(value.length<0){throw new Error("The length must be 0 or greater.");}if(this.L===undefined||this.L===null){throw new Error("The mark must be on a page.");}var bI;var bJ;var bx=this.aR-1;var uW= -value.startIndex;var nY=[];var bZ="";var cc;while(true){if(bx>=this.ds.get_length()){throw new Error("The specified length is out of range.");}bI=this.ds.getPage(bx);if(bI.cd()&&bI.cd().Cb()&&bI.cd().oY()===true){var aei=uW;var VV=bI.cd().Ei();uW+=VV.length;if(uW<0||(uW===0&&value.length!==0)){throw new Error("The specified start index is out of range for the specified page.");}var Tj=0;if(bx===this.aR-1){Tj=value.startIndex;}if(uW>=value.length){cc=value.startIndex+value.length-1;if(aei>=0){cc=value.length-1-aei;}nY.push({pageIndex:bx,endIndex:cc});bZ+=VV.substring(Tj,cc+1);break;}else{cc=bI.cd().Ei().length-1;nY.push({pageIndex:bx,endIndex:cc});bZ+=VV.substring(Tj,cc+1);}}else{throw new Error("The text has not been retrieved for this page.");}bx++;}this.aD=IPCC.Cx();var H=0;if(this.aM){if(this.L){this.L.aD=this.aD;bJ=this.bU.gJ(this.ds.getPage(this.L.bx));if(this.L.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction){for(var abQ=this.L.by.length-1;abQ>=0;abQ--){bJ.removeMark(this.L.by[abQ]);this.L.by.pop();}}}for(H=this.aM.length-1;H>=0;H--){var nk=this.aM[H];bJ=this.bU.gJ(this.ds.getPage(nk.bx));bJ.removeMark(nk);this.aM.splice(H,1);}}else{this.aM=[];}HO.call(this,nY,cc,bZ,value);this.cA=value;return this;};function HO(nY,cc,bZ,value,Xo){var H,bx,bI,bJ;Xo=Xo||{};var by;this.aM=this.aM||[];var agY=(this.L.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction)?atU:atG;for(H=0;H<nY.length;H++){bx=nY[H].pageIndex;bI=this.ds.getPage(bx);var asW=bI.cd().gY();bJ=this.bU.gJ(bI);var eG;var aP=0;cc=nY[H].endIndex;if(H===0){aP=value.startIndex;}bx=nY[H].pageIndex;by=Xo[bx]||IPCC.T.XY(asW,aP,cc);if(H===0){eG=agY(this.L,aP,cc-aP+1,bZ,by,bx,this.aD,this.L.get_type(),bJ);this.L.ka=true;}else{eG=agY(null,aP,cc-aP+1,bZ,by,bx,this.aD,this.L.get_type(),bJ);this.aM.push(eG);bJ.addMark(eG);eG.set_selected(this.L.get_selected());if(this.getFillColor){eG.set_fillColor(this.L.get_fillColor());}if(this.getColor){eG.set_lineColor(this.L.get_lineColor());}if(this.getThickness){eG.set_lineWidth(this.L.get_lineWidth());}if(this.getHref){eG.set_href(this.L.get_href());}if(this.getReason){eG.set_text(this.L.get_text());}}if(H===nY.length-1){eG.kg=true;}}};if(K.cA){K.getPosition=getPosition;K.setPosition=setPosition;K.HO=HO;if(Object.defineProperties){Object.defineProperties(K,{"position":{enumerable:true,get:function(){return this.getPosition();},set:function(value){return this.setPosition(value);}}});}}function atG(K,aP,di,bZ,by,bx,oR,bv,bJ){if(!K){K=new IPCC.Web.UI.Mark(bv);}K.aP=aP;K.cq=di;K.iq='y';K.aD=oR;K.bZ=bZ;K.by=by||[];K.bx=bx;var Tc=IPCC.T.reduce(K.by,function(Fp,aQ){if(!Fp){return aQ.clone();}else{return Fp.union(aQ);}},null);K.set_rectangle(Tc);return K;};function atU(K,aP,di,bZ,by,bx,oR,bv,bJ){if(!K){K=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextSelectionRedaction);}K.aP=aP;K.cq=di;K.aD=oR;K.bZ=bZ;K.bx=bx;K.by=IPCC.T.map(by,function(aQ){var wq=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.RectangleRedaction);wq.set_rectangle(aQ);wq.jP(true);wq.set_fillColor('#000000');wq.set_text(K.aO);wq.set_lineWidth(0);wq.aD=oR;bJ.addMark(wq);return wq;});var Tc=IPCC.T.reduce(by,function(Fp,aQ){if(!Fp){return aQ.clone();}else{return Fp.union(aQ);}},null);K.set_rectangle(Tc);return K;};function getText(){if(this.L){switch(this.bO){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.aO=(typeof this.L.get_text()==="string")?this.L.get_text():this.aO;break;case Mark.Type.HighlightAnnotation:case Mark.Type.TextSelectionRedaction:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.StrikethroughAnnotation:if(K.L.bZ){this.aO=K.L.bZ;}break;}}return this.aO;};function setText(value){IPCC.aA.lg(value,'text');this.aO=value;if(this.L){switch(this.bO){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.L.set_text(value);break;}}return this;};if(K.aO!==undefined){K.getText=getText;var bv=K.getType();if(bv!==Mark.Type.HighlightAnnotation&&bv!==Mark.Type.TextSelectionRedaction&&bv!==Mark.Type.TextHyperlinkAnnotation&&bv!==Mark.Type.StrikethroughAnnotation){K.setText=setText;}if(Object.defineProperties){var ajP={enumerable:true,get:function(){return this.getText();}};if(K.setText!==undefined){ajP.set=function(value){return this.setText(value);};}Object.defineProperties(K,{"text":ajP});}}function getFontColor(){if(this.L){switch(this.bO){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextInputSignature:case Mark.Type.RectangleRedaction:case Mark.Type.TextAreaSignature:this.gG=this.L.get_textColor()||this.gG;break;}}return this.gG;};function setFontColor(value){IPCC.aA.dI(value,'fontColor');this.gG=value;if(this.L){switch(this.bO){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:case Mark.Type.RectangleRedaction:this.L.set_textColor(value);break;}}return this;};if(K.gG){K.getFontColor=getFontColor;K.setFontColor=setFontColor;if(Object.defineProperties){Object.defineProperties(K,{"fontColor":{enumerable:true,get:function(){return this.getFontColor();},set:function(value){return this.setFontColor(value);}}});}}function getFontName(){if(this.L){switch(this.bO){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.gM=this.L.get_fontName()||this.gM;break;}}return this.gM;};function setFontName(value){IPCC.aA.lg(value,'fontName');this.gM=value;if(this.L){switch(this.bO){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.L.set_fontName(value);break;}}return this;};if(K.gM!==undefined){K.getFontName=getFontName;K.setFontName=setFontName;if(Object.defineProperties){Object.defineProperties(K,{"fontName":{enumerable:true,get:function(){return this.getFontName();},set:function(value){return this.setFontName(value);}}});}}function getFontSize(){if(this.L){switch(this.bO){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:this.cs=this.L.get_fontSize()||this.cs;break;}}return this.cs;};function setFontSize(value){IPCC.aA.kf(value,'fontSize',0.1,288);this.cs=value;if(this.L){switch(this.bO){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:this.L.set_fontSize(value);break;}}return this;};if(K.cs){K.getFontSize=getFontSize;K.setFontSize=setFontSize;if(Object.defineProperties){Object.defineProperties(K,{"fontSize":{enumerable:true,get:function(){return this.getFontSize();},set:function(value){return this.setFontSize(value);}}});}}function getHorizontalAlignment(){if(this.L){var zu=this.L.get_textHorizontalAlignment();switch(zu){case IPCC.Web.UI.HorizontalAlignment.Center:this.mI="Center";break;case IPCC.Web.UI.HorizontalAlignment.Left:this.mI="Left";break;case IPCC.Web.UI.HorizontalAlignment.Right:this.mI="Right";break;}}return this.mI;};function setHorizontalAlignment(value){IPCC.aA.lg(value,'horizontalAlignment');var qN=Qt(value,PCCViewer.Mark.HorizontalAlignment);var zu;switch(qN){case 'Center':zu=IPCC.Web.UI.HorizontalAlignment.Center;break;case 'Left':zu=IPCC.Web.UI.HorizontalAlignment.Left;break;case 'Right':zu=IPCC.Web.UI.HorizontalAlignment.Right;break;default:throw "Invalid value found for the Text horizontalAlignment.";}K.mI=qN;if(this.L&&zu!==undefined){this.L.set_textHorizontalAlignment(zu);this.mI=qN;}return this;};if(K.mI){K.getHorizontalAlignment=getHorizontalAlignment;K.setHorizontalAlignment=setHorizontalAlignment;if(Object.defineProperties){Object.defineProperties(K,{"horizontalAlignment":{enumerable:true,get:function(){return this.getHorizontalAlignment();},set:function(value){return this.setHorizontalAlignment(value);}}});}}function apx(Vt){var zw=[];for(var H=0;H<Vt.length;H++){switch(Vt[H]){case "Bold":zw.push(IPCC.Web.UI.FontStyle.Bold);break;case "Italic":zw.push(IPCC.Web.UI.FontStyle.Italic);break;case "Strikeout":zw.push(IPCC.Web.UI.FontStyle.Strikeout);break;case "Underline":zw.push(IPCC.Web.UI.FontStyle.Underline);break;default:throw Error("An unknown font style was encountered: "+Vt[H]);}}if(zw.length===0){zw.push(IPCC.Web.UI.FontStyle.Regular);}return zw;};function getFontStyle(){if(this.L){var pZ=[];switch(this.bO){case Mark.Type.TextAreaSignature:case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:var wg=this.L.get_fontStyle();if(wg&IPCC.Web.UI.FontStyle.Bold){pZ.push("Bold");}if(wg&IPCC.Web.UI.FontStyle.Italic){pZ.push("Italic");}if(wg&IPCC.Web.UI.FontStyle.Strikeout){pZ.push("Strikeout");}if(wg&IPCC.Web.UI.FontStyle.Underline){pZ.push("Underline");}if(pZ.length>0){this.cG=pZ;}break;}}return this.cG;};function setFontStyle(value){if(!(value instanceof Array)){throw "invalid parameter. The parameter should be an array.";}var LK,H,adI=[];for(H=0;H<value.length;H++){LK=Qt(value[H],PCCViewer.Mark.FontStyles);if(LK===null){throw new RangeError("The value of font styles "+value[H]+" is invalid.");}else{IPCC.aA.lg(LK,'fontStyle');adI.push(LK);}}this.cG=adI;var wg=[];wg=apx(this.cG);var aj=this;function awX(bG){setTimeout(function(){aj.L.set_fontStyle(bG);},2);};if(this.L){switch(this.bO){case Mark.Type.TextAreaSignature:case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:var aiu=wg[0];for(H=1;H<wg.length;H++){aiu|=wg[H];}awX(aiu);break;}}return this;};if(K.cG){K.getFontStyle=getFontStyle;K.setFontStyle=setFontStyle;if(Object.defineProperties){Object.defineProperties(K,{"fontStyle":{enumerable:true,get:function(){return this.getFontStyle();},set:function(value){return this.setFontStyle(value);}}});}}function getLabel(){if(this.L){switch(this.bO){case Mark.Type.StampAnnotation:case Mark.Type.StampRedaction:this.tW=this.L.get_text()||this.tW;break;}}return this.tW;};function setLabel(value){IPCC.aA.lg(value,'label');this.tW=value;if(this.L){switch(this.bO){case Mark.Type.StampAnnotation:case Mark.Type.StampRedaction:this.L.set_text(value);break;}}return this;};if(typeof K.tW!=='undefined'){K.getLabel=getLabel;K.setLabel=setLabel;if(Object.defineProperties){Object.defineProperties(K,{"label":{enumerable:true,get:function(){return this.getLabel();},set:function(value){return this.setLabel(value);}}});}}function getReason(){if(this.om===true){throw new Error("This method is not supported when ViewerControlOptions.enableMultipleRedactionReasons is set to false");}if(this.L){switch(this.bO){case Mark.Type.RectangleRedaction:case Mark.Type.TextSelectionRedaction:this.ew=this.L.get_text()||this.ew;break;}}return this.ew;};function setReason(value){if(this.om===true){throw new Error("This method is not supported when ViewerControlOptions.enableMultipleRedactionReasons is set to false");}IPCC.aA.lg(value,'text');this.ew=value;if(this.L){switch(this.bO){case Mark.Type.RectangleRedaction:this.L.set_text(value);break;case Mark.Type.TextSelectionRedaction:this.L.set_text(value);if(this.aM&&this.aM.length){for(var H=0;H<this.aM.length;H++){this.aM[H].set_text(value);}}break;}}return this;};if(typeof K.ew!=='undefined'){K.getReason=getReason;K.setReason=setReason;if(Object.defineProperties){Object.defineProperties(K,{"reason":{enumerable:true,get:function(){return this.getReason();},set:function(value){return this.setReason(value);}}});}}function getReasons(){if(this.om===false){throw Error('Using multiple redaction reasons is not supported when enableMultipleRedactionReasons is set to false');}return this.gz.slice();};function setReasons(value){if(this.om===false){throw Error('Using multiple redaction reasons is not supported when enableMultipleRedactionReasons is set to false');}IPCC.aA.wy(value);IPCC.T.forEach(value,function(reason){IPCC.aA.lg(reason);});this.gz=value.slice();if(this.L){var Yy=this.gz.join("; ");switch(this.bO){case Mark.Type.RectangleRedaction:this.L.set_text(Yy);break;case Mark.Type.TextSelectionRedaction:this.L.set_text(Yy);if(this.aM&&this.aM.length){for(var H=0;H<this.aM.length;H++){this.aM[H].set_text(Yy);}}break;}}return this;};if(typeof K.gz!=='undefined'){K.getReasons=getReasons;K.setReasons=setReasons;if(Object.defineProperties){Object.defineProperties(K,{"reasons":{enumerable:true,get:function(){return this.getReasons();},set:function(value){return this.setReasons(value);}}});}}function getPath(){if(this.L){return this.L.get_pathString();}else{return this.hb;}};function setPath(path){if(path.match(/[^MLC0-9.,\s]/)){throw new Error("The path string contains illegal characters.");}var us=IPCC.T.abM(path);this.hb=path;if(this.L){this.L.set_pathString(path);this.L.set_pathWidth(us.width);this.L.set_pathHeight(us.height);}return this;};if(K.hb){K.setPath=setPath;K.getPath=getPath;if(Object.defineProperties){Object.defineProperties(K,{"path":{enumerable:true,get:getPath,set:setPath}});}}function getHref(){if(this.L){return this.L.get_href();}else{return this.nb;}};function setHref(href){if(href!==null){var bO=typeof href;if(bO!=="undefined"&&bO!=="number"&&bO!=="string"){throw new Error("`href` can only be set to a value that is a Number, String, null, or undefined.");}}this.nb=href;if(this.L){this.L.set_href(href);}if(this.aM){IPCC.T.forEach(this.aM,function(L){L.set_href(href);});}return this;};if(typeof K.nb!=='undefined'){K.setHref=setHref;K.getHref=getHref;if(Object.defineProperties){Object.defineProperties(K,{"href":{enumerable:true,get:getHref,set:setHref}});}}function setMaxLength(maxLength){if(typeof maxLength!=='number'||maxLength<0||maxLength>Number.MAX_VALUE||Math.round(maxLength)!==maxLength){throw new Error('`maxLength` can only be set to a value that is a positive integer.');}this.fU=maxLength;if(this.L){this.L.set_maxLength(this.fU);}return this;};function getMaxLength(){if(this.L){this.fU=this.L.get_maxLength();}return this.fU;};if(typeof K.fU!=='undefined'){K.getMaxLength=getMaxLength;K.setMaxLength=setMaxLength;if(Object.defineProperties){Object.defineProperties(K,{"maxLength":{enumerable:true,get:getMaxLength,set:setMaxLength}});}}function setMaxFontSize(maxFontSize){if(typeof maxFontSize!=='number'||maxFontSize<0||maxFontSize>Number.MAX_VALUE||Math.round(maxFontSize)!==maxFontSize){throw new Error('`maxFontSize` can only be set to a value that is a positive integer.');}this.eV=maxFontSize;if(this.L){this.L.set_maxFontSize(this.eV);}return this;};function getMaxFontSize(){if(this.L){this.eV=this.L.get_maxFontSize();}return this.eV;};if(typeof K.eV!=='undefined'){K.getMaxFontSize=getMaxFontSize;K.setMaxFontSize=setMaxFontSize;if(Object.defineProperties){Object.defineProperties(K,{"maxFontSize":{enumerable:true,get:getMaxFontSize,set:setMaxFontSize}});}}function getMask(){return this.iP;};function setMask(mask){if(mask===null||typeof mask==='undefined'){this.iP=null;if(this.L){this.L.set_mask(this.iP);}return this;}if(typeof mask!=='object'||Array.isArray(mask)){throw new Error('`mask` can only be set to a value that is an Object, null or undefined.');}if(typeof mask.value!=='string'){throw new Error('`mask.value` can only be set to a value that is a string.');}if(typeof mask.translations!=='object'||mask.translations===null||Array.isArray(mask.translations)){throw new Error('`mask.translations` can only be set to a value that is an Object.');}var aju=false;IPCC.T.forEach(mask.translations,function(val,key){aju=true;if(key.length!==1){throw new Error('`'+key+'` does not have a string length of 1.');}if(!(val instanceof RegExp)|| !(/\/$/).exec(val.toString())){throw new Error('`mask.translations['+key+']` must be a regular expression without flags.');}});if(!aju){throw new Error('`mask.translations` must have at least one translation.');}this.iP=mask;if(this.L){this.L.set_mask(this.iP);}return this;};if(typeof K.iP!=='undefined'){K.getMask=getMask;K.setMask=setMask;if(Object.defineProperties){Object.defineProperties(K,{"mask":{enumerable:true,get:getMask,set:setMask}});}}};module.exports=Mark;},{"./../IPCC/IPCC":29,"./PCCViewer.Data":135}],152:[function(require,module,exports){var EventEmitter=require('./PCCViewer.EventEmitter');var jx=function(viewerControl,markReferences){var V=this;if(!viewerControl){throw new Error('`viewerControl` param is missing.');}this.dE=function(){var d=new Date().getTime();var uuid='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c==='x'?r:(r&0x3|0x8)).toString(16);});return uuid;}();this.dn=viewerControl;this.aS=undefined;this.Zx=undefined;this.anc=undefined;this.ad=[];this.gd={};this.lj=PCCViewer.Mark.InteractionMode.Full;if(viewerControl.bz){this.bz=viewerControl.bz;}else{var ND=function(){viewerControl.off('ViewerReady',ND);viewerControl.off('ViewingSessionChanged',ND);V.bz=viewerControl.bz;};viewerControl.on('ViewerReady',ND);viewerControl.on('ViewingSessionChanged',ND);}if(markReferences!==undefined){switch(Object.prototype.toString.call(markReferences)){case "[object Object]":markReferences=[markReferences];break;case "[object Array]":break;default:throw new Error('`markReferences` param is not an object or an array.');}IPCC.T.forEach(markReferences,function(pF){var LE=pF.markUid;pF.markupLayer=V;if(V.gd[LE]){V.gd[LE]=V.gd[LE].concat(pF);}else{V.gd[LE]=[pF];}});}var qu={};EventEmitter.extend(qu);qu.OP=function(Et,cI){var V=this;return setTimeout(function(){V.trigger(Et,cI);},0);};EventEmitter.extend(this);this.dg=new IPCC.Web.UI.Data();PCCViewer.Data.extend(this);this.EW=new IPCC.Web.UI.Data();PCCViewer.SessionData.extend(this);setTimeout(function(){V.trigger(PCCViewer.MarkupLayer.EventType.MarkupLayerCreated,{});},0);};jx.EventType={MarkupLayerCreated:"MarkupLayerCreated",MarkupLayerDestroyed:"MarkupLayerDestroyed",MarksAddedToLayer:"MarksAddedToLayer",MarksRemovedFromLayer:"MarksRemovedFromLayer",MarkupLayerInteractionModeChanged:"MarkupLayerInteractionModeChanged",MarkupLayerHidden:"MarkupLayerHidden",MarkupLayerShown:"MarkupLayerShown"};jx.prototype.getViewerControl=function(){return this.dn;};jx.prototype.addMarks=function(marks){var V=this,azD=function(dm){dm.jw=V;};switch(Object.prototype.toString.call(marks)){case "[object Object]":marks=[marks];break;case "[object Array]":break;default:throw new Error('`marks` param is not an object or an array.');}for(var H=0;H<marks.length;H++){if(!(marks[H]instanceof PCCViewer.Mark)){throw new Error('`marks` param contains an item that is not an instanceof `PCCViewer.Mark`');}if(this.hasMark(marks[H].getId())){marks.splice(H,1);continue;}IPCC.T.forEach(marks[H].getConversation().getComments(),azD);}if(marks.length){this.ad=this.ad.concat(marks);this.trigger(PCCViewer.MarkupLayer.EventType.MarksAddedToLayer,{marks:marks});}return this;};jx.prototype.removeMarks=function(marks){switch(Object.prototype.toString.call(marks)){case "[object Object]":marks=[marks];break;case "[object Array]":break;default:throw new Error('`marks` param is not an object or an array.');}for(var H=0;H<this.ad.length;H++){for(var ag=0;ag<marks.length;ag++){if(this.ad[H].getUid()===marks[ag].getUid()){this.ad.splice(H,1);this.trigger(PCCViewer.MarkupLayer.EventType.MarksRemovedFromLayer,{marks:[marks[ag]]});break;}}}};jx.prototype.getMarks=function(){var agC=[];IPCC.T.forEach(this.ad,function(K){agC.push(K);});return agC;};jx.prototype.hasMark=function(markId){if(typeof markId!=='string'){throw new Error('`markId` param is not a string.');}var H=0,aes=false,K;for(H;H<this.ad.length;H++){K=this.ad[H];if(K.getId()===markId){aes=true;break;}}return aes;};jx.prototype.getMarkReferences=function(){var gd=[];for(var nj in this.gd){if(this.gd.hasOwnProperty(nj)){gd=gd.concat(this.gd[nj]);}}return gd;};jx.prototype.hide=function(){var dn=this.bz;dn.hideMarks(this.getMarks());this.trigger(PCCViewer.MarkupLayer.EventType.MarkupLayerHidden,{});return this;};jx.prototype.show=function(){var dn=this.bz;dn.showMarks(this.getMarks());this.trigger(PCCViewer.MarkupLayer.EventType.MarkupLayerShown,{});return this;};jx.prototype.copyLayers=function(markupLayers){var dn=this.bz,V=this;if(markupLayers instanceof PCCViewer.MarkupLayer){markupLayers=[markupLayers];}if(markupLayers instanceof Array===false){throw new PCCViewer.Error("InvalidArgument","The parameter, markupLayers, is not an Array of MarkupLayers or a single MarkupLayer.");}var ad=[];IPCC.T.forEach(markupLayers,function(jw){dn.getMarkupLayerCollection().getItem(jw.getId());ad=ad.concat(jw.getMarks());});var copiedMarks=dn.copyMarks(ad);this.addMarks(copiedMarks);IPCC.T.forEach(this.ad,function(K){IPCC.T.forEach(K.getConversation().getComments(),function(dm){dm.jw=V;});});return this;};jx.prototype.getId=function(){return this.dE;};jx.prototype.getName=function(){return this.aS;};jx.prototype.setName=function(name){if(typeof name!=='string'){throw new Error('`name` param is not a string.');}this.aS=name;return this;};jx.prototype.getRecordId=function(){return this.Zx;};jx.prototype.destroy=function(){this.bz.getMarkupLayerCollection().removeItem(this.dE);this.trigger(PCCViewer.MarkupLayer.EventType.MarkupLayerDestroyed,{});};jx.prototype.setInteractionMode=function(interactionMode){if(typeof interactionMode!=='string'){throw new Error('`interactionMode` param is not a string.');}this.lj=interactionMode;IPCC.T.forEach(this.ad,function(K){K.setInteractionMode(interactionMode);});this.trigger(PCCViewer.MarkupLayer.EventType.MarkupLayerInteractionModeChanged,{interactionMode:interactionMode});return this;};jx.prototype.getOriginalXmlName=function(){return this.anc;};jx.prototype.setOriginalXmlName=function(name){if(typeof name!=='string'){throw new Error('`name` param is not a string.');}this.anc=name;return this;};if(Object.defineProperties){Object.defineProperties(jx.prototype,{"id":{enumerable:true,get:function(){return this.getId();}},"recordId":{enumerable:true,get:function(){return this.getRecordId();}},"name":{enumerable:true,get:function(){return this.getName();},set:function(name){return this.setName(name);}},"viewerControl":{enumerable:true,get:function(){return this.getViewerControl();}},"originalXmlName":{enumerable:true,get:function(){return this.getOriginalXmlName();},set:function(name){return this.setOriginalXmlName(name);}},});}module.exports=jx;},{"./PCCViewer.EventEmitter":140}],153:[function(require,module,exports){var EventEmitter=require('./PCCViewer.EventEmitter');var MarkupLayerCollection=function(viewerControl){if(!viewerControl){throw new Error('`viewerControl` param is missing.');}this.dn=viewerControl;this.sy={};this.ad={};this.jA={};this.ql=0;EventEmitter.extend(this);};MarkupLayerCollection.EventType={MarkupLayerAdded:"MarkupLayerAdded",MarkupLayerRemoved:"MarkupLayerRemoved"};MarkupLayerCollection.prototype.getViewerControl=function(){return this.dn;};MarkupLayerCollection.prototype.forEach=function(iterator,thisArg){if(typeof iterator!=='function'){throw new TypeError('The iterator parameter is not a function');}IPCC.T.forEach(this.sy,iterator,thisArg);return this;};MarkupLayerCollection.prototype.getItem=function(layerId){if(typeof layerId!=='string'){throw new Error('`layerId` param is not a string.');}return this.sy[layerId];};MarkupLayerCollection.prototype.getCount=function(){return this.ql;};MarkupLayerCollection.prototype.getAll=function(){var afR=[],XN;for(XN in this.sy){if(this.sy.hasOwnProperty(XN)){afR.push(this.sy[XN]);}}return afR;};MarkupLayerCollection.prototype.addItem=function(layer){var V=this,gd,XU=layer.gd,FI=function(K,pF){var dm=K.getConversation().addComment(pF.text);dm.creationTime=new Date(pF.creationDateTime);dm.jw=pF.markupLayer;for(var tJ in pF.data){if(pF.data.hasOwnProperty(tJ)){dm.setData(tJ,pF.data[tJ]);}}},aGn=function(axQ){FI(V.ad[wa],axQ);},alg=function(K){var nj=K.getUid();V.ad[K.getUid()]=K;if(V.jA[nj]){IPCC.T.forEach(V.jA[nj],function(pW){FI(K,pW);});delete V.jA[nj];}};if(!(layer instanceof PCCViewer.MarkupLayer)){throw new Error('`layer` param is not an instance of PCCViewer.MarkupLayer.');}this.sy[layer.getId()]=layer;for(var wa in XU){if(XU.hasOwnProperty(wa)){gd=XU[wa];if(V.ad[wa]){IPCC.T.forEach(gd,aGn);}else if(V.jA[wa]){V.jA[wa]=V.jA[wa].concat(gd);}else{V.jA[wa]=gd;}}}IPCC.T.forEach(layer.getMarks(),function(K){alg(K);});this.ql++;this.trigger(PCCViewer.MarkupLayerCollection.EventType.MarkupLayerAdded,{layerId:layer.getId()});layer.on(PCCViewer.MarkupLayer.EventType.MarksAddedToLayer,function(ev){IPCC.T.forEach(ev.marks,function(K){alg(K);});});layer.on(PCCViewer.MarkupLayer.EventType.MarksRemovedFromLayer,function(ev){var aFf=ev.cO;IPCC.T.forEach(ev.marks,function(K){var nj=K.getUid();IPCC.T.forEach(V.ad[nj].getConversation().getComments(),function(Hj){if(aFf.id!==Hj.jw.id){var pW={creationDateTime:IPCC.T.wU(Hj.creationTime),data:Hj.dg.vu(),markUid:K.getUid(),markupLayer:Hj.jw,text:Hj.text};if(V.jA[nj]){V.jA[nj]=V.jA[nj].concat([pW]);}else{V.jA[nj]=[pW];}}});V.ws(K);});});return this;};MarkupLayerCollection.prototype.ws=function(K){var Lw;IPCC.T.forEach(this.sy,function(eJ){var agx=eJ.hasMark(K.getId());Lw=(typeof Lw!=='undefined')? +agx^Lw: +agx;});if(Lw===0){delete this.ad[K.getUid()];}};MarkupLayerCollection.prototype.removeItem=function(layerId){var eJ=this.sy[layerId],V=this,aBy=function(pW,aJ){if(pW.markupLayer.getId()===layerId){V.jA[dE].splice(aJ);}};if(typeof layerId!=='string'){throw new Error('`layerId` param is not a string.');}IPCC.T.forEach(this.ad,function(K){var hE=K.getConversation().getComments();var Nd=eJ.hasMark(K.getId());IPCC.T.forEach(hE,function(dm){if(Nd&&dm.jw.getId()!==layerId){var acK={"markUid":K.getUid(),"markupLayer":dm.jw,"text":dm.getText(),"data":dm.dg.dg,"creationDateTime":IPCC.T.wU(dm.getCreationTime())};if(V.jA[K.getUid()]){V.jA[K.getUid()].push(acK);}else{V.jA[K.getUid()]=[acK];}K.getConversation().deleteComments(dm);}else if(Nd&&dm.jw.getId()===layerId){K.getConversation().deleteComments(dm);}else if(!Nd&&dm.jw.getId()===layerId){K.getConversation().deleteComments(dm);}});if(Nd&&V.ad[K.getUid()]){V.ws(K);}});for(var dE in this.jA){if(this.jA.hasOwnProperty(dE)){IPCC.T.forEach(this.jA[dE],aBy);}}delete this.sy[layerId];this.ql--;this.trigger(PCCViewer.MarkupLayerCollection.EventType.MarkupLayerRemoved,{layerId:layerId});return this;};MarkupLayerCollection.prototype.removeAll=function(){this.sy={};this.ql=0;return this;};if(Object.defineProperties){Object.defineProperties(MarkupLayerCollection.prototype,{"viewerControl":{enumerable:true,get:function(){return this.getViewerControl();}},"count":{enumerable:true,get:function(){return this.getCount();}}});}module.exports=MarkupLayerCollection;},{"./PCCViewer.EventEmitter":140}],154:[function(require,module,exports){'use strict';var Mark=require('./PCCViewer.Marks');function MouseTool(name,type){this.aS=name;var Ih=aCD(type);if(Ih===null){throw new RangeError("The value of type was invalid.");}this.bO=Ih;addPropertiesToMouseTool(this);};MouseTool.prototype.getName=function(){return this.aS;};MouseTool.prototype.getType=function(){return this.bO;};if(Object.defineProperties){Object.defineProperties(MouseTool.prototype,{"name":{enumerable:true,get:function(){return this.getName();}},"type":{enumerable:true,get:function(){return this.getType();}}});}function aCD(Zk){var aaS=Zk.toLowerCase();for(var standardType in MouseTool.Type){if(MouseTool.Type.hasOwnProperty(standardType)&&standardType.toLowerCase&&standardType.toLowerCase()===aaS){return standardType;}}return null;};function addPropertiesToMouseTool(mouseTool){var bO=mouseTool.getType();switch(bO){case MouseTool.Type.Magnifier:break;case MouseTool.Type.SelectToZoom:break;case MouseTool.Type.Pan:mouseTool.zk=false;break;case MouseTool.Type.PanAndEdit:mouseTool.zk=true;break;case MouseTool.Type.SelectText:break;case MouseTool.Type.EditMarks:break;case MouseTool.Type.LineAnnotation:mouseTool.bq=new Mark({type:Mark.Type.LineAnnotation});break;case MouseTool.Type.RectangleAnnotation:mouseTool.bq=new Mark({type:Mark.Type.RectangleAnnotation});break;case MouseTool.Type.EllipseAnnotation:mouseTool.bq=new Mark({type:Mark.Type.EllipseAnnotation});break;case MouseTool.Type.TextAnnotation:mouseTool.bq=new Mark({type:Mark.Type.TextAnnotation});break;case MouseTool.Type.StampAnnotation:mouseTool.bq=new Mark({type:Mark.Type.StampAnnotation});break;case MouseTool.Type.HighlightAnnotation:mouseTool.bq=new Mark({type:Mark.Type.HighlightAnnotation});break;case MouseTool.Type.TextHyperlinkAnnotation:mouseTool.bq=new Mark({type:Mark.Type.TextHyperlinkAnnotation});break;case MouseTool.Type.FreehandAnnotation:mouseTool.bq=new Mark({type:Mark.Type.FreehandAnnotation});break;case MouseTool.Type.RectangleRedaction:mouseTool.bq=new Mark({type:Mark.Type.RectangleRedaction});break;case MouseTool.Type.TransparentRectangleRedaction:mouseTool.bq=new Mark({type:Mark.Type.TransparentRectangleRedaction});break;case MouseTool.Type.TextRedaction:mouseTool.bq=new Mark({type:Mark.Type.TextRedaction});break;case MouseTool.Type.TextInputSignature:mouseTool.bq=new Mark({type:Mark.Type.TextInputSignature});break;case MouseTool.Type.TextAreaSignature:mouseTool.bq=new Mark({type:Mark.Type.TextAreaSignature});break;case MouseTool.Type.StampRedaction:mouseTool.bq=new Mark({type:Mark.Type.StampRedaction});break;case MouseTool.Type.PlaceSignature:mouseTool.bq=new Mark({type:'PlaceSignature',xi:true});break;case MouseTool.Type.TextSelectionRedaction:mouseTool.bq=new Mark({type:Mark.Type.TextSelectionRedaction});break;case MouseTool.Type.ImageStampAnnotation:mouseTool.bq=new Mark({type:Mark.Type.ImageStampAnnotation});break;case MouseTool.Type.ImageStampRedaction:mouseTool.bq=new Mark({type:Mark.Type.ImageStampRedaction});break;case MouseTool.Type.PolylineAnnotation:mouseTool.bq=new Mark({type:Mark.Type.PolylineAnnotation});break;case MouseTool.Type.StrikethroughAnnotation:mouseTool.bq=new Mark({type:Mark.Type.StrikethroughAnnotation});break;}if(mouseTool.bq){mouseTool.getTemplateMark=function(){return this.bq;};if(Object.defineProperties){Object.defineProperties(mouseTool,{"templateMark":{enumerable:true,get:mouseTool.getTemplateMark}});}}};MouseTool.prototype.reset=function(){if(this.bq){this.bq.reset();}};var MouseTools={rF:{},createMouseTool:function(name,type){if(!this.rF){this.rF={};createDefaultMouseTools();}var yL=name.toLowerCase();var existingTool=this.rF[yL];if(existingTool){if(existingTool.getType().toLowerCase()!==type.toLowerCase()){throw new Error("If calling createMouseTool and providing the name of a mouse tool that already exists, then the type must be the same type as the existing mouse tool.");}existingTool.reset();}else{this.rF[yL]=new MouseTool(name,type);}return this.rF[yL];},getMouseTool:function(name){if(name&&name.toLowerCase){if(!this.rF){this.rF={};createDefaultMouseTools();}var yL=name.toLowerCase();return this.rF[yL];}return undefined;}};MouseTool.Type={Magnifier:"Magnifier",SelectToZoom:"SelectToZoom",Pan:"Pan",PanAndEdit:"PanAndEdit",SelectText:"SelectText",EditMarks:"EditMarks",LineAnnotation:"LineAnnotation",RectangleAnnotation:"RectangleAnnotation",EllipseAnnotation:"EllipseAnnotation",TextAnnotation:"TextAnnotation",StampAnnotation:"StampAnnotation",HighlightAnnotation:"HighlightAnnotation",TextHyperlinkAnnotation:"TextHyperlinkAnnotation",FreehandAnnotation:"FreehandAnnotation",RectangleRedaction:"RectangleRedaction",TransparentRectangleRedaction:"TransparentRectangleRedaction",TextRedaction:"TextRedaction",TextInputSignature:"TextInputSignature",TextAreaSignature:"TextAreaSignature",StampRedaction:"StampRedaction",PlaceSignature:"PlaceSignature",TextSelectionRedaction:"TextSelectionRedaction",ImageStampAnnotation:"ImageStampAnnotation",ImageStampRedaction:"ImageStampRedaction",PolylineAnnotation:"PolylineAnnotation",StrikethroughAnnotation:"StrikethroughAnnotation"};function createDefaultMouseTools(){MouseTools.createMouseTool("AccusoftMagnifier",MouseTool.Type.Magnifier);MouseTools.createMouseTool("AccusoftSelectToZoom",MouseTool.Type.SelectToZoom);MouseTools.createMouseTool("AccusoftPan",MouseTool.Type.Pan);MouseTools.createMouseTool("AccusoftPanAndEdit",MouseTool.Type.PanAndEdit);MouseTools.createMouseTool("AccusoftSelectText",MouseTool.Type.SelectText);MouseTools.createMouseTool("AccusoftEditMarks",MouseTool.Type.EditMarks);MouseTools.createMouseTool("AccusoftLineAnnotation",MouseTool.Type.LineAnnotation);MouseTools.createMouseTool("AccusoftArrowAnnotation",MouseTool.Type.LineAnnotation).getTemplateMark().setEndHeadType("FilledTriangle");MouseTools.createMouseTool("AccusoftRectangleAnnotation",MouseTool.Type.RectangleAnnotation);MouseTools.createMouseTool("AccusoftEllipseAnnotation",MouseTool.Type.EllipseAnnotation);MouseTools.createMouseTool("AccusoftTextAnnotation",MouseTool.Type.TextAnnotation);MouseTools.createMouseTool("AccusoftStampAnnotation",MouseTool.Type.StampAnnotation);MouseTools.createMouseTool("AccusoftHighlightAnnotation",MouseTool.Type.HighlightAnnotation);MouseTools.createMouseTool("AccusoftTextHyperlinkAnnotation",MouseTool.Type.TextHyperlinkAnnotation);MouseTools.createMouseTool("AccusoftFreehandAnnotation",MouseTool.Type.FreehandAnnotation);MouseTools.createMouseTool("AccusoftPlaceSignature",MouseTool.Type.PlaceSignature);MouseTools.createMouseTool("AccusoftTextSelectionRedaction",MouseTool.Type.TextSelectionRedaction);MouseTools.createMouseTool("AccusoftRectangleRedaction",MouseTool.Type.RectangleRedaction);MouseTools.createMouseTool("AccusoftTransparentRectangleRedaction",MouseTool.Type.TransparentRectangleRedaction);MouseTools.createMouseTool("AccusoftTextRedaction",MouseTool.Type.TextRedaction);MouseTools.createMouseTool("AccusoftTextInputSignature",MouseTool.Type.TextInputSignature);MouseTools.createMouseTool("AccusoftTextAreaSignature",MouseTool.Type.TextAreaSignature);MouseTools.createMouseTool("AccusoftStampRedaction",MouseTool.Type.StampRedaction);MouseTools.createMouseTool("AccusoftImageStampAnnotation",MouseTool.Type.ImageStampAnnotation);MouseTools.createMouseTool("AccusoftImageStampRedaction",MouseTool.Type.ImageStampRedaction);MouseTools.createMouseTool("AccusoftPolylineAnnotation",MouseTool.Type.PolylineAnnotation);MouseTools.createMouseTool("AccusoftStrikethroughAnnotation",MouseTool.Type.StrikethroughAnnotation);return MouseTools.rF;};createDefaultMouseTools();module.exports={MouseTool:MouseTool,MouseTools:MouseTools};},{"./PCCViewer.Marks":151}],155:[function(require,module,exports){var EventEmitter=require('./PCCViewer.EventEmitter');var ObservableCollection=function(){var zT=[];var qu={};EventEmitter.extend(qu);qu.OP=function(Et,cI){var V=this;return setTimeout(function(){V.trigger(Et,cI);},0);};this.add=function(item){zT.push(item);qu.OP(this.EventType.ItemAdded,{item:item,count:zT.length});return this;};this.remove=function(item){var V=this;this.forEach(function(e,idx){if(e===item){zT.splice(idx,1);qu.OP(V.EventType.ItemRemoved,{item:item,count:zT.length});}});return this;};this.removeAll=function(){zT=[];qu.OP(this.EventType.ItemRemoved,{count:zT.length});return this;};this.forEach=function(iterator,thisArg){if(typeof iterator!=='function'){throw new TypeError('The iterator parameter is not a function');}IPCC.T.forEach(this.toArray(),iterator,thisArg);return this;};this.toArray=function(){return[].concat(zT);};this.on=function(eventType,handler){qu.on.apply(qu,arguments);return this;};this.off=function(eventType,handler){qu.off.apply(qu,arguments);return this;};};ObservableCollection.prototype.EventType={ItemAdded:"ItemAdded",ItemRemoved:"ItemRemoved"};module.exports=ObservableCollection;},{"./PCCViewer.EventEmitter":140}],156:[function(require,module,exports){var Df={Horizontal:"Horizontal",Vertical:"Vertical"};module.exports=Df;},{}],157:[function(require,module,exports){var PasswordProtectedDocumentLoader=function PasswordProtectedDocumentLoader(ZX){this.ZX=ZX;};PasswordProtectedDocumentLoader.prototype.load=function(password){return this.ZX(password);};module.exports=PasswordProtectedDocumentLoader;},{}],158:[function(require,module,exports){var printAlgorithm={standard:1,contentWindowContents:2};var Ww=function Ww(aE,cL,F){if(aE.addEventListener){aE.addEventListener(cL,F,false);}else if(aE.attachEvent){aE.attachEvent('on'+cL,F);}};var Wn=function Wn(aE,cL,F){if(aE.removeEventListener){aE.removeEventListener(cL,F,false);}else if(aE.detachEvent){aE.detachEvent('on'+cL,F);}};function aEE(fN){var acf={};fN=fN.split('&');for(var i=fN.length;i--;){var q=fN[i].split('=');acf[q.shift()]=q.join('=');}return acf;};function aGb(){var Ai=document.getElementById('pccPrintFrame');if(Ai){if(Ai.contentWindow&&Ai.contentWindow.destroy){Ai.contentWindow.destroy();}if(Ai.parentElement){Ai.parentElement.removeChild(Ai);}}};function aCL(aX){aX.agK();aGb();aX.ahJ();if(!aX.algorithm){aX.algorithm=printAlgorithm.standard;}var gr;var ga=document.createElement('iframe');ga.id='pccPrintFrame';ga.className='pccPrintFrame';ga.style.position='absolute';ga.style.bottom=ga.style.right='0px';ga.style.width=ga.style.height='1px';ga.style.zIndex='0';ga.style.border='none';if(aX.algorithm!==printAlgorithm.contentWindowContents){ga.style.visibility='0';}function Oj(){Wn(window,'message',ale);};function afz(){Wn(ga,'load',afz);if(ga.contentDocument){gr=ga.contentDocument;}else if(ga.contentWindow){gr=ga.contentWindow.document;}else{gr=ga.document;}if(aX.algorithm===printAlgorithm.contentWindowContents){ga.contentWindow.contents=aX.template;ga.src='javascript:window["contents"]';}else{gr.open();gr.write(aX.template);gr.close();}};var ale=function(message){message.source.PCCViewer.Ajax.setHeaders(PCCViewer.Ajax.getHeaders()).setOverrideMethod(PCCViewer.Ajax.getOverrideMethod());if(message.data.match(/loadArt/)){var amJ=JSON.parse(message.data);var bJ=aX.aeh(amJ.pageIndex);aX.agK();ga.contentWindow[amJ.callbackName](bJ);aX.ahJ();}else if(message.data==='extra'){var HB=aX.afs(aX);ga.contentWindow['extra'](aX.encryption,HB);}else if(message.data==='done'){if(aX.algorithm===printAlgorithm.contentWindowContents){setTimeout(function(){ga.contentWindow.focus();ga.contentWindow.document.execCommand('print',false,null);window.focus();Oj();aX.tE.trigger(PCCViewer.PrintRequest.EventType.PrintCompleted);},2000);}else{setTimeout(function(){ga.contentWindow.focus();ga.contentWindow.print();window.focus();Oj();aX.tE.trigger(PCCViewer.PrintRequest.EventType.PrintCompleted);},2000);}}else if(message.data==='fail'){Oj();aX.tE.trigger(PCCViewer.PrintRequest.EventType.PrintFailed);}else{var rA=aEE(message.data);rA.index= +rA.index;rA.pageNumber= +rA.pageNumber;rA.totalPages= +rA.totalPages;aX.tE.aem= +rA.index+1;aX.tE.trigger(PCCViewer.PrintRequest.EventType.PrintPagePrepared,rA);}};Ww(window,'message',ale);Ww(ga,'load',afz);document.body.appendChild(ga);return Oj;};function asu(dn){return function aeh(bx){return dn.bU.gJ(dn.ds.getPage(bx));};};function arS(dn){return function afs(options){var ad,K,wf=[],Aa=[],FL={},Il={},yK={},ew={},El='',aah,cr,aJ,Fg,aQ,Fc,aR,aap={},Dv={},H=0,df=0,ag=0,asB=function(a,b){return a-b;};if(options.includeComments!=='none'||options.includeReasons!=='none'){ad=dn.getAllMarks();for(H=0;H<options.pages.length;H++){aap[options.pages[H]]=true;}for(df=0;df<ad.length;df++){K=ad[df];aR=K.aR;if(options.includeReasons!=='none'&&(K.getReason||K.getReasons)){El=K.L.get_text();if(El){if(!yK[aR]){ew[El]=1;yK[aR]=ew;ew={};}else{if(yK[aR][El]){yK[aR][El]+=1;}else{yK[aR][El]=1;}}}}if(K.oS||K.bO.search("Redaction")!== -1){if(Dv[aR]){Dv[aR]+=1;}else{Dv[aR]=1;}}if(options.range.length&&aap[aR]!==true|| !options.includeRedactions&&K.oS|| !options.includeAnnotations&& !K.oS){continue;}cr=K.getConversation();if(cr&&cr.getComments().length){if(!Fg){Fg=aR;}else if(aR!==Fg){wf.sort(asB);for(ag=0;ag<wf.length;ag++){Aa=Aa.concat(FL[wf[ag]]);}Il[Fg]=Aa;Fg=aR;wf=[];FL={};Aa=[];}aJ=dn.getCharacterIndex(K);aah=aR;aQ=K.L.get_boundingRectangle();Fc=(aJ>0)?aJ*10000+aQ.y:aQ.y;wf.push(Fc);if(!FL[Fc]){FL[Fc]=[cr];}else{FL[Fc].push(cr);}}}if(wf.length){wf.sort(function(a,b){return a-b;});for(H=0;H<wf.length;H++){Aa=Aa.concat(FL[wf[H]]);}Il[aah]=Aa;}}return{Il:Il,yK:yK,Dv:Dv};};};function aER(dn){return function(){if(dn&&dn.bU){dn.bU.remove_markChanged(dn.ml);}};};function Ze(dn){return function(){if(dn&&dn.bU){dn.bU.add_markChanged(dn.ml);}};};function print(options){options=options||{};options.range=options.range||'all';options.orientation=(options.orientation&&options.orientation.toLowerCase()==='landscape')?'landscape':'portrait';options.paperSize=options.paperSize||'letter';options.margins=(options.margins&&options.margins.toLowerCase()==='none')?'none':'default';options.includeMarks=options.includeMarks!==undefined?(! !options.includeMarks&&this.canPrintMarks()):undefined;options.includeAnnotations=options.includeAnnotations!==undefined?(! !options.includeAnnotations&&this.canPrintMarks()):undefined;options.includeRedactions=options.includeRedactions!==undefined?(! !options.includeRedactions&&this.canPrintMarks()):undefined;options.includeComments=(options.includeComments)?options.includeComments:'none';options.includeReasons=(options.includeReasons)?options.includeReasons:'none';options.redactionViewMode=(options.redactionViewMode)?options.redactionViewMode:'Normal';if(options.includeAnnotations===undefined){options.includeAnnotations=options.includeMarks;}if(options.includeRedactions===undefined){options.includeRedactions=options.includeMarks;}var cR=PCCViewer.Util.convertPageRangeToArray(options.range.toString().toLowerCase(),{upperLimit:this.getPageCount()});var pf=this.aX.imageHandlerUrl;var arh=this.aX.documentID;var arx=this.aET;options.vsID=arh;options.handler=pf;options.pages=cR;var isOldIE= ! !navigator.appName.match('Microsoft');var isIE= ! !navigator.userAgent.match('Trident');var isSafari= ! !(navigator.userAgent.search('Safari')>=0&&navigator.userAgent.search('Chrome')<0);options.template=arx.replace(/{{viewingSessionId}}/g,options.vsID).replace(/{{handler}}/g,options.handler).replace(/{{pages}}/g,options.pages.join(',')).replace(/{{orientation}}/g,options.orientation).replace(/{{paperSize}}/g,options.paperSize).replace(/{{isIE}}/g,isIE.toString()).replace(/{{isSafari}}/g,isSafari.toString()).replace(/{{includeAnnotations}}/g,options.includeAnnotations).replace(/{{includeRedactions}}/g,options.includeRedactions).replace(/{{includeComments}}/g,options.includeComments).replace(/{{includeReasons}}/g,options.includeReasons).replace(/{{margins}}/g,options.margins).replace(/{{redactionViewMode}}/g,options.redactionViewMode).replace(/{{viewerAssetsPath}}/g,this.aX.viewerAssetsPath);options.encryption= ! !this.aX.encryption;if(isOldIE){options.algorithm=printAlgorithm.contentWindowContents;}var abE;function ak(){if(! !abE){abE();}};var tE=new PCCViewer.PrintRequest(options,cR.length,ak,this);this.aB.trigger(PCCViewer.EventType.PrintRequested,{printRequest:tE});options.tE=tE;options.aeh=asu(this);options.afs=arS(this);options.agK=aER(this);options.ahJ=Ze(this);abE=aCL(options);return tE;};function validatePrintRange(range){return PCCViewer.Util.validatePageRange(range.toString().toLowerCase(),{upperLimit:this.getPageCount()});};function canPrintMarks(){return(document.documentMode!==8);};var PrintRequest=function(options,totalPages,cancelFunc,that){this.aX=options;this.ak=cancelFunc;this.aem=0;PCCViewer.EventEmitter.extend(this);};PrintRequest.EventType={PrintPagePrepared:"PrintPagePrepared",PrintCompleted:"PrintCompleted",PrintCancelled:"PrintCancelled",PrintFailed:"PrintFailed"};PrintRequest.prototype.cancel=function(){this.ak();this.trigger(PCCViewer.PrintRequest.EventType.PrintCancelled);};PrintRequest.prototype.getOptions=function(){return{range:this.aX.pages.toString(),orientation:this.aX.orientation,paperSize:this.aX.paperSize,margins:this.aX.margins,includeMarks:this.aX.includeMarks,includeAnnotations:this.aX.includeAnnotations,includeRedactions:this.aX.includeRedactions,includeComments:this.aX.includeComments,includeReasons:this.aX.includeReasons,redactionViewMode:this.aX.redactionViewMode};};PrintRequest.prototype.getPageCount=function(){return this.aX.pages.length;};PrintRequest.prototype.getPreparedCount=function(){return this.aem;};if(Object.defineProperties){Object.defineProperties(PrintRequest.prototype,{"options":{enumerable:true,get:function(){return this.getOptions();}},"pageCount":{enumerable:true,get:function(){return this.getPageCount();}},"preparedCount":{enumerable:true,get:function(){return this.getPreparedCount();}}});}var PrintControl=function(domElement,options){var adk=[];IPCC.T.Yl=true;options.includeAnnotations=options.includeAnnotations!=='false';options.includeRedactions=options.includeRedactions!=='false';domElement.className=domElement.className+' '+options.orientation;function ys(n){(window.parent)?window.parent.postMessage(n,'*'):window.opener.postMessage(n,'*');};function aGf(aR,IA){var jH=[];jH.push("pageNumber="+(1+aR));jH.push("index="+IA);jH.push("totalPages="+options.pages.length);return jH.join('&');};function jj(aR,IA,next){var bk={documentIdentifier:options.vsID,pageNumber:aR,viewFitType:IPCC.Web.UI.FitType.FullImage,imageHandlerUrl:options.handler,encryption:options.encryption};var iZ=document.createElement('div');iZ.className=options.paperSize+" ";iZ.className+=options.isIE?'pageIE':options.isSafari?'pageSafari':'page';iZ.id='printpage'+aR;if(options.margins==='none'){iZ.className+=' nomargins';}domElement.appendChild(iZ);var pv=IPCC.initializePageViewPlugin(iZ,bk);pv.set_debug(false);pv.set_requireRequestsOptimize(true);adk.push(pv);var wN=false;function Hc(){ys(aGf(aR,IA));next();};pv.add_pageOpened(function(){var be=pv.kS(),as=pv.hX();var wB=(options.orientation==='portrait'&&be>as)||(options.orientation==='landscape'&&as>be);if(wB){pv.wB(90);}});pv.add_pageDisplayed(function(){if(!wN){Hc();}});pv.add_textPageReady(function(){if(wN){pv.dC();Hc();}});pv.add_pageOpenFailed(function(){ys('fail');});pv.add_textExtractionFailed(function(){if(wN){ys('fail');}});if(options.redactionViewMode){if(options.redactionViewMode.toLowerCase()==="draft"){pv.pe(true);}else if(options.redactionViewMode.toLowerCase()==="normal"){pv.pe(false);}}if(canPrintMarks()&&(options.includeAnnotations||options.includeRedactions)){var ahy='loadArt'+aR;var rA={pageIndex:aR,callbackName:ahy};window[ahy]=function(bJ){var mn,QK,H,cr={},Pb={},yz='',mU,gz,ew,CU='';var Lf=[];bJ.CN(function(K){if(K.get_type()===IPCC.Web.UI.MarkType.HighlightText){wN=true;}if(options.includeRedactions&&K.iM()){Lf.push(K);}if(options.includeAnnotations&& !K.iM()){Lf.push(K);}});var ads=new IPCC.Web.UI.ArtPage();IPCC.T.forEach(Lf,function(K){K.na(undefined);ads.addMark(K);});bk.artPage=ads;Pb=options.pagedConversations[aR+1];if(options.pagedConversations&&Pb&&options.includeComments==='followingPage'){mn=document.createElement('div');mn.className+='commentPage';mn.id='printcommentpage'+aR;if(options.margins==='none'){mn.className+=' nomargins';}QK='<h1>Comments for Page {{pageNumber}}</h1><hr><div class="pageConversations">{{conversationList}}</div>';for(H=0;H<Pb.length;H++){cr=Pb[H];yz+=aaR(cr,aR+1);}mn.innerHTML=QK.replace('{{pageNumber}}',aR+1).replace('{{conversationList}}',yz);domElement.appendChild(mn);}gz=options.pagedReasons[aR+1];if(options.pagedReasons&&gz&&options.includeReasons==='followingPage'){mU=document.createElement('div');mU.className+='reasonPage';mU.id='printreasonpage'+aR;if(options.margins==='none'){mU.className+=' nomargins';}QK='<h1>Redaction Reasons for Page {{pageNumber}}</h1>'+'<div class="redactionReasonPageHeader"><ul><li>Date: {{date}}</li><li>Number of Redactions on this Page: {{count}}</li></div><hr>'+'<div class="pageReasons">{{reasonList}}</div>';for(ew in gz){if(gz.hasOwnProperty(ew)){CU+=adE(ew,gz[ew]);}}mU.innerHTML=QK.replace('{{pageNumber}}',aR+1).replace('{{reasonList}}',CU).replace('{{date}}',agg()).replace('{{count}}',options.pagedRedactionCount[aR+1]);domElement.appendChild(mU);}pv.openPage(bk);IPCC.T.forEach(Lf,function(K){K.na(bJ);});};ys(JSON.stringify(rA));}else{pv.openPage(bk);}};function aaR(cr,aR){var aoV='',iv='',K=cr.getMark(),hE,dm,H;switch(K.L.jd()){case IPCC.Web.UI.MarkType.Rectangle:iv=(K.L.iM())?'Highlight Redaction ':'Rectangle Annotation';break;case IPCC.Web.UI.MarkType.Ellipse:iv='Ellipse Annotation';break;case IPCC.Web.UI.MarkType.RectangleRedaction:iv='Rectangle Redaction';break;case IPCC.Web.UI.MarkType.Line:iv=(K.mx==='None')?'Line Annotation':'Arrow Annotation';break;case IPCC.Web.UI.MarkType.Polyline:iv='Polyline Annotation';break;case IPCC.Web.UI.MarkType.Polygon:iv='Polygon Annotation';break;case IPCC.Web.UI.MarkType.Text:iv='Text Annotation';break;case IPCC.Web.UI.MarkType.Highlight:iv='Highlight Annotation';break;case IPCC.Web.UI.MarkType.Stamp:iv='Stamp Annotation';break;case IPCC.Web.UI.MarkType.HighlightText:iv='Highlight Text Annotation';break;case IPCC.Web.UI.MarkType.SignaturePath:iv='Signature Path';break;case IPCC.Web.UI.MarkType.Freehand:iv='Freehand Annotation';break;case IPCC.Web.UI.MarkType.SignatureText:iv='Signature Text';break;case IPCC.Web.UI.MarkType.TextLine:iv='Text Input Signature';break;case IPCC.Web.UI.MarkType.TextAreaSignature:iv='Text Area Signature';break;case IPCC.Web.UI.MarkType.SignatureImage:iv='Signature Image';break;case IPCC.Web.UI.MarkType.TextSelectionRedaction:iv='Text Selection Redaction';break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:iv='Image Stamp Annotation';break;case IPCC.Web.UI.MarkType.ImageStampRedaction:iv='Image Stamp Redaction';break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:iv='Text Hyperlink Annotation';break;case IPCC.Web.UI.MarkType.Strikethrough:iv='Strikethrough Annotation';break;default:break;}hE=cr.getComments();for(H=0;H<hE.length;H++){dm=hE[H];aoV+='<li>'+aBB({text:dm.getText(),createDate:dm.nV.Za,pageNumber:aR+1})+'</li>';}return '<h3>'+iv+'</h3><ul>'+aoV+'</ul>';};function aBB(dm){var jn=new Date(dm.createDate),XI='{{month}}/{{day}}/{{year}} {{hour}}:{{minutes}}{{period}}'.replace('{{month}}',jn.getMonth()+1).replace('{{day}}',jn.getDate()).replace('{{year}}',jn.getFullYear()).replace('{{hour}}',(jn.getHours()<10?'0':'')+jn.getHours()).replace('{{minutes}}',(jn.getMinutes()<10?'0':'')+jn.getMinutes()).replace('{{period}}',jn.getHours()<12?'am':'pm');var aO=dm.text.replace(/</g,'&#60;').replace(/>/g,'&#62;').replace(/\n/g,'<br/>');return "{{comment}} - {{date}}".replace('{{comment}}',aO).replace('{{date}}',XI);};function agg(){var jn=new Date();return '{{month}}/{{day}}/{{year}}'.replace('{{month}}',jn.getMonth()+1).replace('{{day}}',jn.getDate()).replace('{{year}}',jn.getFullYear());};function adE(ew,ql){ew=ew.replace(/</g,'&#60;').replace(/>/g,'&#62;').replace(/\n/g,'<br/>');var arb=(ql>1)?'times':'time';return '<li>"{{reason}}" occurs {{count}} {{times}}</li>'.replace('{{reason}}',ew).replace('{{count}}',ql).replace('{{times}}',arb);};function aDB(){window.onerror=function(ev){ys('fail');};function sync(funcs,done){var counter=funcs.length;var idx=0;var next=function(){if(--counter===0)done();else funcs[idx++](next);};funcs[idx++](next);};function aDd(aR,IA){return function(next){jj(aR,IA,next);};};var funcs=[];for(var i=0;i<options.pages.length;i++){var bI= +options.pages[i]-1;funcs.push(aDd(bI,i));}sync(funcs,function(){var mn,OA='',bI,Dq='',yz='',cr,K,anR='<h1>Comments</h1><hr>{{pageSections}}',mU,CU='',aCA='<h1>Redaction Reasons</h1><hr>{{pageSections}}';if(options.includeComments==='documentEnd'){for(bI in options.pagedConversations){if(options.pagedConversations.hasOwnProperty(bI)){if(!mn){mn=document.createElement('div');mn.className+=' commentPage';mn.id='printpage_comments';if(options.margins==='none'){mn.className+=' nomargins';}}OA='<div class="pageConversations"><h2>Page #{{pageNumber}}</h2><hr><ol>{{conversationList}}</ol></div>';yz='';for(var H=0;H<options.pagedConversations[bI].length;H++){cr=options.pagedConversations[bI][H];K=cr.getMark();yz+=aaR(cr,K.pageNumber);}Dq+=OA.replace('{{pageNumber}}',K.pageNumber).replace('{{conversationList}}',yz);if(yz.length){mn.innerHTML=anR.replace('{{pageSections}}',Dq);domElement.appendChild(mn);}}}}if(options.includeReasons==='documentEnd'){Dq='';anR='';OA='<div class="pageReasons"><h2>Page #{{pageNumber}}</h2><div class="redactionReasonPageHeader"><ul><li>Date: {{date}}</li><li>Number of Redactions on this Page: {{count}}</li></div><hr><ul>{{reasonList}}</ul></div>';for(bI in options.pagedReasons){if(options.pagedReasons.hasOwnProperty(bI)){if(!mU){mU=document.createElement('div');mU.className+='reasonPage';mU.id='printpage_reason';if(options.margins==='none'){mU.className+=' nomargins';}}CU='';for(var ew in options.pagedReasons[bI]){if(options.pagedReasons[bI].hasOwnProperty(ew)){CU+=adE(ew,options.pagedReasons[bI][ew]);}}Dq+=OA.replace('{{pageNumber}}',bI).replace('{{reasonList}}',CU).replace('{{date}}',agg()).replace('{{count}}',options.pagedRedactionCount[bI]);}}if(Dq.length){mU.innerHTML=aCA.replace('{{pageSections}}',Dq);domElement.appendChild(mU);}}ys('done');});};function asg(){window['extra']=function(bool,HB){options.encryption= ! !bool;options.pagedConversations=HB.Il;options.pagedReasons=HB.yK;options.pagedRedactionCount=HB.Dv;aDB();window['extra']=function(){};};ys('extra');};function arP(){var bJ;IPCC.T.forEach(adk,function(ax){bJ=ax.get_artPage();if(bJ){bJ.removeAllMarks();}ax.dispose();bJ=undefined;});};window['destroy']=arP;asg();};module.exports={PrintRequest:PrintRequest,PrintControl:PrintControl,print:print,validatePrintRange:validatePrintRange,canPrintMarks:canPrintMarks};},{}],159:[function(require,module,exports){var aCB={Draft:"Draft",Normal:"Normal"};module.exports=aCB;},{}],160:[function(require,module,exports){var Revision=function(){this.dE=0;this.wo=0;this.bO='';};Revision.prototype.getId=function(){return this.dE;};Revision.prototype.getEndPageNumber=function(){return this.wo;};Revision.prototype.getType=function(){return this.bO;};if(Object.defineProperties){Object.defineProperties(Revision.prototype,{"endPageNumber":{enumerable:true,get:function(){return this.wo;}},"id":{enumerable:true,get:function(){return this.dE;}},"type":{enumerable:true,get:function(){return this.bO;}}});}Revision.Type={ContentInserted:"ContentInserted",ContentDeleted:"ContentDeleted",PropertyChanged:"PropertyChanged",ParagraphNumberChanged:"ParagraphNumberChanged",FieldDisplayChanged:"FieldDisplayChanged",RevisionMarkedAsReconciledConflict:"RevisionMarkedAsReconciledConflict",RevisionMarkedAsConflict:"RevisionMarkedAsConflict",StyleChanged:"StyleChanged",ContentReplaced:"ContentReplaced",ParagraphPropertyChanged:"ParagraphPropertyChanged",TablePropertyChanged:"TablePropertyChanged",SectionPropertyChanged:"SectionPropertyChanged",StyleDefinitionChanged:"StyleDefinitionChanged",ContentMovedFrom:"ContentMovedFrom",ContentMovedTo:"ContentMovedTo",TableCellInserted:"TableCellInserted",TableCellDeleted:"TableCellDeleted",TableCellsMerged:"TableCellsMerged",Unknown:"Unknown"};module.exports=Revision;},{}],161:[function(require,module,exports){var FZ=function(aX){var iH=new PCCViewer.RevisionsRequest(true);function awI(bO){for(var Xk in PCCViewer.Revision.Type){if(PCCViewer.Revision.Type.hasOwnProperty(Xk)){if(Xk.toLowerCase()===bO.toLowerCase()){return PCCViewer.Revision.Type[Xk];}}}return PCCViewer.Revision.Type.Unknown;};function aEF(hd,aP){var xb=[];if(hd.changes&&hd.changes.length){xb=hd.changes.map(function(YE){var PJ=new PCCViewer.Revision();PJ.dE=YE.id;PJ.wo=YE.endPageIndex+1;PJ.bO=awI(YE.type);return PJ;});}return xb;};function aEn(Pd){var Uc=Pd?'&continueToken='+Pd:'';var anP=aX.imageHandlerUrl+'/v2/viewingSessions/'+aX.documentID;return anP+'/revisionData?limit=100'+Uc;};function aiR(Pd){var bB=PCCViewer.Deferred();var bE=aEn(Pd);PCCViewer.Ajax.eB({url:bE,method:'GET'}).then(function fz(aH){var dg=JSON.parse(aH.responseText);var BG=dg.continueToken;var xb=aEF(dg,iH.Gd.length);iH.Gd=iH.Gd.concat(xb);if(BG){if(xb.length){iH.trigger(PCCViewer.EventType.PartialRevisionsAvailable,{partialRevisions:xb});}setTimeout(function(){aiR(BG);},dg.continueAfter||0);}else{if(xb.length){iH.trigger(PCCViewer.EventType.PartialRevisionsAvailable,{partialRevisions:xb});}iH.trigger(PCCViewer.EventType.RevisionsAvailable,{completedRevisions:iH.getRevisions()});iH.trigger(PCCViewer.EventType.RevisionsRetrievalCompleted,{completedRevisions:iH.getRevisions()});}bB.resolve();},function fg(am){var fp='RequestFailed';var cN='The request to get revisions failed.';var lN=am.response.responseText?JSON.parse(am.response.responseText):'';var iC=am.response.status;if(lN&&(iC===580||(iC===480&&lN.errorCode==='DocumentNotProvidedYet'))){fp=lN.errorCode;}iH.fp=fp;iH.cN=cN;iH.trigger(PCCViewer.EventType.RevisionsRetrievalFailed,{errorMessage:iH.getErrorMessage()});iH.trigger(PCCViewer.EventType.RevisionsRetrievalCompleted,{completedRevisions:iH.getRevisions()});bB.reject(am.error);});};this.aBs=function(){setTimeout(function(){aiR();},0);return iH;};};var RevisionsRequest=function(tn){this.Gd=[];this.fp=null;this.cN=null;if(Object.defineProperties){Object.defineProperties(this,{"revisions":{configurable: ! !tn,enumerable:true,get:function(){return this.Gd;}},"errorCode":{configurable: ! !tn,enumerable:true,get:function(){return this.fp;}},"errorMessage":{configurable: ! !tn,enumerable:true,get:function(){return this.cN;}}});}PCCViewer.EventEmitter.extend(this);};RevisionsRequest.prototype.getRevisions=function(){return this.Gd;};RevisionsRequest.prototype.getErrorCode=function(){return this.fp;};RevisionsRequest.prototype.getErrorMessage=function(){return this.cN;};module.exports={RevisionsRequest:RevisionsRequest,FZ:FZ};},{}],162:[function(require,module,exports){var FB={Pinch:"Pinch",Zoom:"Zoom",Fit:"Fit",ViewMode:"ViewMode"};module.exports=FB;},{}],163:[function(require,module,exports){var _Search=function(){this.bg='';this.HJ={};this.cD={};this.Od=0;this.bN=new PCCViewer.SearchRequest();var V=this;this.abg=function(){var Pz=[];for(var H=0;H<V.HJ.searchTerms.length;H++){var bg=V.HJ.searchTerms[H];var nD=IPCC.T.PA(bg.type);var PL;switch(nD){case 'proximity':var wW={tA:bg,cD:[],type:bg.type,highlightColor:this.SD(bg.highlightColor),distance:bg.distance,contextPadding:bg.contextPadding};for(var x=0;x<bg.terms.length;x++){var aaw=bg.terms[x];PL=this.akr(aaw);wW.cD=wW.cD.concat(PL);}Pz.push(wW);break;default:PL=this.akr(bg);Pz=Pz.concat(PL);break;}}return Pz;};this.akr=function(bg){var fk=[];var cD={};if(bg.matchingOptions.exactPhrase===false&&bg.searchTermIsRegex===false){var zZ=bg.searchTerm.split(' ');for(var ag=0;ag<zZ.length;ag++){cD={};if(zZ[ag].length<0){continue;}cD.searchText=zZ[ag];cD.tA=bg;if(bg.matchingOptions.matchWholeWord){cD.searchTerm=this.anm(this.BA(zZ[ag]),bg.matchingOptions);}else{if(bg.matchingOptions.wildcard===true){cD.searchTerm=this.ald(this.BA(zZ[ag]),bg.matchingOptions);}else if(bg.matchingOptions.beginsWith===true||bg.matchingOptions.endsWith===true){cD.searchTerm=this.ajH(this.BA(zZ[ag]),bg.matchingOptions);}else{cD.searchTerm=this.adb(zZ[ag],bg.matchingOptions,false);}}cD.highlightColor=this.SD(bg.highlightColor);fk.push(cD);}}else{cD={};cD.searchText=bg.searchTerm;cD.tA=bg;if(bg.matchingOptions.matchWholeWord){cD.searchTerm=this.anm(this.BA(bg.searchTerm),bg.matchingOptions);}else{if(bg.matchingOptions.wildcard===true){cD.searchTerm=this.ald(this.BA(bg.searchTerm),bg.matchingOptions);}else if(bg.matchingOptions.beginsWith===true||bg.matchingOptions.endsWith===true){cD.searchTerm=this.ajH(this.BA(bg.searchTerm),bg.matchingOptions);}else{cD.searchTerm=this.adb(bg.searchTerm,bg.matchingOptions,bg.searchTermIsRegex);}}cD.highlightColor=this.SD(bg.highlightColor);fk.push(cD);}return fk;};this.anm=function(rh,wZ){var Gf=new RegExp('\\b'+rh+'\\b',this.EU(wZ.matchCase));return Gf;};this.ajH=function(rh,wZ){if(wZ.beginsWith){return new RegExp("\\b"+rh+'(\\w*)',this.EU(wZ.matchCase));}if(wZ.endsWith){rh=rh.replace("*","");return new RegExp('(\\w*)'+rh+"\\b",this.EU(wZ.matchCase));}};this.BA=function(rh){return rh.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");};this.ald=function(sf,wZ){sf=sf.replace(/[*]{2,}/g,'*').replace(/(\\\*){2,}/g,'\\*');if(sf==='\\*'){var bW=new Error('The search term must contain one or more non-wildcard characters.');bW.azA=true;throw bW;}var regexFlags='gim';if(wZ.matchCase){regexFlags='gm';}sf=sf.replace(/\*/g,'\S*');sf=sf.replace(/\?/g,'\S');var Gf=new RegExp('(\\s|^)'+sf+'(?=\\s|$)',regexFlags);return Gf;};this.aeO=function(rh){return rh.replace(/\ /g,'\\s+');};this.SV=function(rh){return rh.replace(/'/g,'[\'‘’]').replace(/"/g,'["“”]');};this.adb=function(PY,matchingOptions,isRegex){var nx='';if(isRegex===true){nx=PY;}else if(matchingOptions.wildcard===true){nx=PY.replace(/[-[\]{}()+,^$|#]/g,"\\$&");nx=this.aeO(nx);nx=this.SV(nx);}else if(matchingOptions.exactPhrase){nx=PY.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");nx=this.aeO(nx);nx=this.SV(nx);}else{nx=PY.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");nx=this.SV(nx);}return new RegExp(nx,this.EU(matchingOptions.matchCase));};this.EU=function(matchCase){if(matchCase){return 'gm';}else{return 'igm';}};this.aFE=function(sf){var Gf=new RegExp('\\b'+sf+'\\b',V.EU());return Gf;};var ajr=["#1c86ee","#ff8c00","#9932cc","#FFBA00","#00c5cd","#ee3a8c","#4169e1","#00cd00","#6959cd","#ff4500"];this.SD=function(dI){if(!dI){return ajr[V.Od++ %ajr.length];}else{return dI;}};this.Wz=function(dH){if(typeof dH==='string'){dH={searchTerms:[{searchTerm:dH,highlightColor:undefined,contextPadding:25,searchTermIsRegex:false,matchingOptions:{exactPhrase:true,matchCase:false,matchWholeWord:false,beginsWith:false,endsWith:false,wildcard:false}}]};return dH;}IPCC.T.forEach(dH.searchTerms,function(bg){if(!bg.matchingOptions){bg.matchingOptions={};}var nD=IPCC.T.PA(bg.type);switch(nD){case 'proximity':IPCC.T.forEach(bg.terms,function(aaw){V.akW(aaw);});break;default:V.akW(bg);break;}});return dH;};this.akW=function(bg){if(typeof bg.contextPadding==="undefined"){bg.contextPadding=25;}if(typeof bg.searchTermIsRegex==="undefined"){bg.searchTermIsRegex=false;}if(typeof bg.matchingOptions==="undefined"){bg.matchingOptions={};}if(!bg.matchingOptions.hasOwnProperty('matchCase')){bg.matchingOptions.matchCase=false;}if(!bg.matchingOptions.hasOwnProperty('exactPhrase')){bg.matchingOptions.exactPhrase=true;}if(!bg.matchingOptions.hasOwnProperty('matchWholeWord')){bg.matchingOptions.matchWholeWord=false;}if(!bg.matchingOptions.hasOwnProperty('beginsWith')){bg.matchingOptions.beginsWith=false;}if(!bg.matchingOptions.hasOwnProperty('endsWith')){bg.matchingOptions.endsWith=false;}if(!bg.matchingOptions.hasOwnProperty('wildcard')){bg.matchingOptions.wildcard=false;}if(typeof bg.highlightColor!=='undefined'){try{IPCC.aA.dI(bg.highlightColor,"selectText");}catch(e){bg.highlightColor=undefined;}}};this.axY=function(){return V.cD;};this.aio=function(e){V.bN.cN=e.message;V.bN.fp="1010";V.bN.vW=true;setTimeout(function(){V.bN.trigger("SearchFailed",{errorMessage:(e.message)});},10);setTimeout(function(){V.bN.trigger("SearchCompleted",{completedSearchResults:(V.sF)});},10);return V.bN;};this.wk=function(dH,bf){this.cD={};this.HJ=dH;this.bg=dH;this.Od=0;var wk=new PCCViewer.Ry();try{V.cD=this.abg();return wk.YB(bf,V.cD,dH,V.bN);}catch(e){return V.aio(e);}};this.Ds=function(dH,bf){this.cD={};this.HJ=dH;this.bg=dH;this.Od=0;var Ds=new PCCViewer.Xy();try{V.cD=this.abg();return Ds.YB(bf,V.cD,dH,V.bN);}catch(e){return V.aio(e);}};};_Search.prototype.Av=function(searchQuery){this.cD={};this.bN=new PCCViewer.SearchRequest();this.HJ=searchQuery;this.bN.dH=searchQuery;this.bg=searchQuery;this.Od=0;return this.bN;};var SearchTask=function(searchQuery){this.afp(searchQuery);var _search=new PCCViewer._Search();searchQuery=_search.Wz(searchQuery);this.bN=_search.Av(searchQuery);try{_search.cD=_search.abg();}catch(e){if(e.azA){throw new Error(e.message);}else{throw new Error(e.message);}}var wk=new PCCViewer.Ry();this.search=function(text){wk.sF=[];wk.bd=0;wk.cD=_search.cD;wk.aDC(text);return wk.sF;};};SearchTask.prototype.afp=function(searchQuery){if(typeof searchQuery==='string'){return;}var Ax;if(searchQuery&&searchQuery.searchTerms&&Object.prototype.toString.call(searchQuery.searchTerms)==='[object Array]'){Ax=searchQuery.searchTerms;}else{throw new Error('The `searchQuery` parameter is not a string, or a search terms array was not present in the search query.');}IPCC.T.forEach(Ax,function(tI,H){var nD=tI.type?IPCC.T.trim(tI.type).toLowerCase():undefined;switch(nD){case 'proximity':IPCC.T.forEach(tI.terms,function(aGp,ba){if(!anq(aGp)){throw new Error("Search term index "+ba+" under Proximity search term index "+H+" does not have a valid `searchTerm` string property.");}});break;default:if(!anq(tI)){throw new Error("Search term index "+H+" does not have a valid `searchTerm` string property.");}break;}});function anq(tI){return(typeof tI.searchTerm==='string');}};module.exports={_Search:_Search,SearchTask:SearchTask};},{}],164:[function(require,module,exports){function aDt(dH){var Ax=dH.map(function(bg,alr){if(bg.type==='proximity'){return{type:'proximity',distance:bg.distance,subTerms:bg.cD.map(function(aeZ){return{pattern:aeZ.searchTerm.source,caseSensitive:aeZ.tA.matchingOptions.matchCase};}),termId:alr.toString(),contextPadding:bg.contextPadding};}return{type:'simple',pattern:bg.searchTerm.source,caseSensitive:bg.tA.matchingOptions.matchCase,termId:alr.toString(),contextPadding:bg.contextPadding};});return{input:{searchTerms:Ax}};};var Xy=function(){var V=this;var Av,BG,ala;var NM=[];this.Ab=false;this.zJ={};this.xm=[];function aEN(){var Uc=BG?'&continueToken='+BG:'';return V.bf.so+'/v2/searchTasks/'+Av.processId+'/results?limit=100'+Uc;};function asc(fk){var Nj=V.zJ.input.searchTerms.reduce(function(pr,tI){pr[tI.termId]=V.cD[tI.termId];return pr;},{});return fk.map(function(am){var gN=new PCCViewer.SearchResult();if(V.cD[0].tA.matchingOptions.wildcard&&(am.text[0]===" "||am.text[0]==="\n")){am.text=am.text.substring(1);am.startIndex+=1;am.startIndexInContext+=1;}gN.lM=am.boundingRectangle;gN.cC=am.context;gN.zb=am.startIndexInContext;gN.mL=am.id;gN.cD=V.cD;gN.by=am.lineRectangles;gN.gO=am.pageData;gN.pM=am.startIndex;gN.aO=am.text;gN.aR=am.pageIndex+1;gN.dE=am.id;gN.VI=V.bf.get_documentIdentifier();gN.bg=Nj[am.searchTerm.termId].tA;gN.sM=Nj[am.searchTerm.termId].highlightColor;return gN;});};function pA(GV,UT){switch(GV){case 'failed':setTimeout(function(){V.bN.trigger(PCCViewer.EventType.SearchFailed,UT);},10);break;case 'complete':V.bN.Ue=V.xm;V.bN.vW=true;setTimeout(function(){V.bN.trigger(PCCViewer.EventType.SearchResultsAvailable,{completedSearchResults:(V.bN.getResults())});},10);break;case 'cancelled':break;}setTimeout(function(){V.bN.trigger(PCCViewer.EventType.SearchCompleted,{completedSearchResults:(V.bN.getResults())});},10);};function arF(mD){var bE=V.bf.so+'/v2/viewingSessions/'+encodeURIComponent(V.bf.get_documentIdentifier())+'/searchTasks';function fz(aH){var am=JSON.parse(aH.responseText);Av=am;if(NM.length){NM.forEach(function(vM){vM();});}NM=[];mD();};function fg(av){V.bN.off('SearchCancelled',V.amH);V.bN.cN='The request to create a search task failed.';var aGh=av&&av.response&&av.response.status===501;var aFA=av&&av.response&&av.response.status===480&&(function(aFz){try{return JSON.parse(aFz).errorCode==='FeatureDisabled';}catch(e){return false;}}(av.response.responseText));if(aGh||aFA){V.bN.fp='ServerSearchUnavailable';V.bN.cN='Server-side search is not available.';pA('failed',{errorMessage:V.bN.cN});return;}pA('failed',{errorMessage:V.bN.cN});};PCCViewer.Ajax.eB({url:bE,method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(V.zJ)}).then(fz,fg);};function Re(mD){var bE=aEN();var im={};if(Av.affinityToken){im['Accusoft-Affinity-Token']=Av.affinityToken;}if(!V.Ab){return;}function fz(aH){if(!V.Ab){return;}var am=JSON.parse(aH.responseText);var UU=asc(am.results);V.xm=am.pagesWithoutText;V.bN.fk.push.apply(V.bN.fk,UU);if(UU.length){setTimeout(function(){IPCC.T.forEach(UU.reduce(function(pr,am){var cf=am.aR;if(!pr[cf]){pr[cf]=[];}pr[cf].push(am);return pr;},{}),function(fk,cf){V.bN.trigger('PartialSearchResultsAvailable',{partialSearchResults:fk,pagesWithoutText:V.xm});});},10);}if(am.continueToken){BG=am.continueToken;ala=am.continueAfter;mD();}else if(V.Ab){pA('complete');}};function fg(am){if(!V.Ab){return;}V.Ab=false;V.bN.cN='The request to poll the search task failed.';V.bN.vW=true;pA('failed',{errorMessage:V.bN.cN});};PCCViewer.Ajax.eB({method:'GET',url:bE,headers:im}).then(fz,fg);};function aGA(){(function aEX(){setTimeout(function(){Re(aEX);},ala||0);}());};function amH(){pA('cancelled');V.Ab=false;function aaz(){};if(!Av){NM.push(aaz);return;}aaz();};this.YB=function(bf,cD,dH,bN){V.bf=bf;V.cD=cD;V.bN=bN;V.bN.dH=dH;V.zJ=aDt(V.cD);V.Ab=true;V.bN.on('SearchCancelled',amH);arF(function(){aGA();});return V.bN;};};module.exports=Xy;},{}],165:[function(require,module,exports){var ObservableCollection=require('./PCCViewer.ObservableCollection');function aeT(clientBB){this.top=clientBB.top;this.bottom=clientBB.bottom;this.left=clientBB.left;this.right=clientBB.right;this.width=clientBB.width||clientBB.right-clientBB.left;this.height=clientBB.height||clientBB.bottom-clientBB.top;};function wC(x,y){this.x=x;this.y=y;this.getDistance=function(point){var x=point.x-this.x,y=point.y-this.y,d=x*x+y*y,squared=false;return squared?d:Math.sqrt(d);};this.equals=function(point){return this===point||point&&(this.x===point.x&&this.y===point.y)||false;};this.close=function(point){return this.getDistance(point)<4;};this.clone=function(){return new wC(this.x,this.y);};};function Xh(ab){return(ab&&ab.nodeType===1);};function OZ(zW,EV){var RC=(EV&&IPCC.T.DW)?'m':'M';var Wh=(EV&&IPCC.T.DW)?'l':'L';return IPCC.T.map(zW,function(el,i){if(i===0){return RC+el.x+','+el.y;}else{return Wh+el.x+','+el.y;}}).join('');};function amo(cC,pl,eg){return function(av){if(IPCC.T.DJ&&av.type.match('mouse')){av.preventDefault();av.stopPropagation();return false;}if(av.preventDefault){av.preventDefault();}else{av.returnValue=false;}var x,y;if(av.changedTouches){var gk=av.changedTouches[0];if(av.type==='touchstart'){pl=av.target.getBoundingClientRect();}else if(av.type==='touchend'){eg&&eg();return;}x=gk.clientX-pl.left;y=gk.clientY-pl.top;}else{x=av.clientX-pl.left;y=av.clientY-pl.top;}var bH=new wC(x,y);cC.zW.push(bH);var vN=OZ(cC.zW);if(IPCC.T.DW){cC.hb.path=vN.toLowerCase();}else{cC.hb.setAttribute('d',vN);}eg&&eg();};};function aru(points){var Ac=3,dM='',rV;var rM=(points.length<Ac)?points:IPCC.T.filter(points,function(el){if(rV&&rV.close(el)){return false;}else{rV=el;return true;}});if(rM.length<Ac){rM=[points[0],points[points.length-1]];}rV=undefined;if(rM.length<Ac){dM+=OZ(rM);}else{dM='M'+IPCC.T.bspline(rM);dM=dM.replace(/\d*\.?\d*/g,function(bG){var IZ=bG.indexOf('.');if(bG.length&&IZ>0){return bG.substr(0,IZ+3);}else if(bG!==""){return bG;}else{return bG;}});}return dM;};function SignatureControl(dom){var V=this;if(typeof dom==='string'){this.cK=document.querySelector(dom);if(!(Xh(this.cK))){throw new Error('The query selector "'+dom+'" did not match any DOM element.');}}else if(Xh(dom)){this.cK=dom;}else{throw new Error('The SignatureControl target is not a valid DOM element.');}this.JL=[];this.pl=new aeT(this.cK.getBoundingClientRect());this.fH=IPCC.T.AF.SVG([0,0,this.pl.width,this.pl.height].join(' '));this.cK.appendChild(this.fH);function Ew(ev){var hb=IPCC.T.AF.Path(undefined,{width:2000,height:2000,color:'black',thickness:4});V.fH.appendChild(hb);var cC={zW:[],hb:hb,eg:function(){V.JL.push(cC.zW);IPCC.T.removeEvent(V.cK,'mousemove',zM);IPCC.T.removeEvent(V.cK,'mouseup',BV);if(IPCC.T.DJ){IPCC.T.removeEvent(V.cK,IPCC.T.nz['move'],zM);IPCC.T.removeEvent(V.cK,IPCC.T.nz['up'],BV);}if(IPCC.T.HF){IPCC.T.removeEvent(V.cK,'touchmove',zM);IPCC.T.removeEvent(V.cK,'touchend',BV);}}};var zM=amo(cC,V.pl);var BV=amo(cC,V.pl,cC.eg);zM(ev);IPCC.T.addEvent(V.cK,'mousemove',zM);IPCC.T.addEvent(V.cK,'mouseup',BV);if(IPCC.T.DJ){IPCC.T.addEvent(V.cK,IPCC.T.nz['move'],zM);IPCC.T.addEvent(V.cK,IPCC.T.nz['up'],BV);}if(IPCC.T.HF){IPCC.T.addEvent(V.cK,'touchmove',zM);IPCC.T.addEvent(V.cK,'touchend',BV);}};IPCC.T.addEvent(V.cK,'mousedown',Ew);if(IPCC.T.DJ){this.cK.style['-ms-touch-action']='none';this.cK.style['touch-action']='none';IPCC.T.addEvent(V.cK,IPCC.T.nz['down'],Ew);}if(IPCC.T.HF){IPCC.T.addEvent(V.cK,'touchstart',Ew);}this.Vp=function(){V.pl=new aeT(V.cK.getBoundingClientRect());V.fH.setAttribute('viewBox',[0,0,V.pl.width,V.pl.height].join(' '));};IPCC.T.addEvent(window,'resize',this.Vp);this.ajF=function(){IPCC.T.removeEvent(window,'resize',V.Vp);IPCC.T.removeEvent(V.cK,'mousedown',Ew);if(IPCC.T.DJ){IPCC.T.removeEvent(V.cK,IPCC.T.nz['down'],Ew);}if(IPCC.T.HF){IPCC.T.removeEvent(V.cK,'touchstart',Ew);}while(V.cK.firstChild){V.cK.removeChild(V.cK.firstChild);}};};SignatureControl.prototype.done=function(){var nt,mN,nB,mv,vN='M0,0',abv=this;IPCC.T.forEach(abv.JL,function(or){IPCC.T.forEach(or,function(p){if(nt===undefined||nt>p.x){nt=p.x;}if(mN===undefined||mN>p.y){mN=p.y;}if(nB===undefined||nB<p.x){nB=p.x;}if(mv===undefined||mv<p.y){mv=p.y;}});});IPCC.T.forEach(abv.JL,function(or){var axc=IPCC.T.map(or,function(p){return new wC(p.x-nt,p.y-mN);});vN+=aru(axc);});this.ajF();return{type:'path',path:vN,width:(nB-nt)||0,height:(mv-mN)||0};};SignatureControl.prototype.resize=function(){this.Vp();return this;};SignatureControl.prototype.clear=function(){var svg=this.fH;while(svg&&svg.firstChild){svg.removeChild(svg.firstChild);}this.JL=[];return this;};SignatureControl.prototype.undo=function(){if(this.fH.lastChild){this.fH.removeChild(this.fH.lastChild);}this.JL.pop();return this;};SignatureControl.prototype.cancel=function(){this.ajF();return this;};var Signatures=new ObservableCollection();var SignatureDisplay=function(domElement,signature){function handleSignatureAsPath(){if(!signature.path||signature.path.match(/[^MLC0-9.,\s]/)){throw new Error('A valid path is required in the signature object.');}var qk=IPCC.T.abM(signature.path);var fH=IPCC.T.AF.SVG([0,0,qk.width,qk.height].join(' '));var hb=IPCC.T.AF.Path(signature.path,{width:qk.width,height:qk.height,color:'black',thickness:4});if(IPCC.T.DW){var ayP=(qk.height/qk.width)*100;fH.style.width=hb.style.width='100%';fH.style.height=hb.style.height='0px';fH.style.paddingBottom=hb.style.paddingBottom=ayP+'%';}else{fH.style.width='100%';fH.style.maxHeight='100%';fH.setAttribute('preserveAspectRatio','xMinYMin meet');}fH.appendChild(hb);domElement.appendChild(fH);return{width:qk.width,height:qk.height,clear:function(){domElement.removeChild(fH);}};};function handleSignatureAsText(){if(!signature.text||typeof signature.text!=='string'){throw new Error('The signature text is not a valid string.');}var iZ=document.createElement('div');var mT=document.createTextNode(signature.text);var jg=(typeof signature.fontName==='string')?signature.fontName:'serif';iZ.appendChild(mT);iZ.style.textAlign='center';iZ.style.fontFamily='"'+jg+'", cursive';iZ.style.fontSize='2.5em';iZ.style.overflow='hidden';domElement.appendChild(iZ);var qk=IPCC.T.uJ(signature.text,jg);return{width:qk.width,height:qk.height,clear:function(){domElement.removeChild(iZ);}};};if(!Xh(domElement)){throw new Error('The `domElement` parameter is not a valid HTMLElement.');}else if(!signature){throw new Error('The `signature` parameter is required.');}else if(signature.path){return handleSignatureAsPath();}else if(signature.text){return handleSignatureAsText();}else{throw new Error('The signature provided does not have a known type.');}};module.exports={SignatureControl:function(dom){return new SignatureControl(dom);},SignatureDisplay:SignatureDisplay,Signatures:Signatures};},{"./PCCViewer.ObservableCollection":155}],166:[function(require,module,exports){"use strict";var IPCC=require('../IPCC/IPCC');var sK=require('./PCCViewer.Helper');var Print=require('./PCCViewer.Print');var cX=require('./PCCViewer.MarkDeserializer');var eb=require('./PCCViewer.MarkSerializer');function SingleSessionViewerControl(element,viewerControlFacade,options){if(!(this instanceof SingleSessionViewerControl)){return new SingleSessionViewerControl(element,viewerControlFacade,options);}if(!IPCC.T.uh(element)){throw new Error("The 'element' argument is required.");}if(!options.documentID){throw new Error("A valid value for 'options.documentID' is required");}if(!options.imageHandlerUrl){throw new Error("A valid value for 'options.imageHandlerUrl' is required");}var V=this;this.Zs=viewerControlFacade;this.aB=new PCCViewer.vg(viewerControlFacade);IPCC.T.CJ(element);var kw=document.createElement('div');kw.className='pccViewerControl';kw.id='pccViewerControl-'+IPCC.Cx();element.appendChild(kw);this.cU=kw;this.eZ=element;var uV=document.createElement('div');uV.className='pccPageListLoading';kw.appendChild(uV);this.uV=uV;this.qD=false;this.aX=sK.rr({},SingleSessionViewerControl.Co,options);this.aX.language=sK.rr({},SingleSessionViewerControl.aCn,(options.language?options.language:{}));if(options.language){PCCViewer.Language.initializeData(options.language);}if(this.aX.pageLayout.toLowerCase()==="vertical"){this.aX.pageLayout=IPCC.PageLayout.VerticalScrollDirection;}else if(this.aX.pageLayout.toLowerCase()==="horizontal"){this.aX.pageLayout=IPCC.PageLayout.HorizontalScrollDirection;}else{throw new Error("The value of 'options.pageLayout' is invalid.");}if(this.aX.viewMode.toLowerCase()==="document"){this.aX.viewMode=IPCC.ViewMode.Document;}else if(this.aX.viewMode.toLowerCase()==="equalwidthpages"){this.aX.viewMode=IPCC.ViewMode.EqualWidthPages;}else if(this.aX.viewMode.toLowerCase()==="equalfitpages"){this.aX.viewMode=IPCC.ViewMode.EqualFitPages;}else if(this.aX.viewMode.toLowerCase()==="singlepage"){this.aX.viewMode=IPCC.ViewMode.SinglePage;}else{throw new Error("The value of 'options.viewMode' is invalid.");}function isValidSearchMethodType(){return-1<['auto','server','client'].indexOf(V.aX.searchMethodType.toLowerCase());};if(!isValidSearchMethodType()){throw new Error("The value of 'options.searchMethodType' should be 'auto', 'server', or 'client'.");}if(isNaN(this.aX.searchMethodPageCountThreshold)&&(typeof this.aX.searchMethodPageCountThreshold!=='number')&&this.aX.searchMethodPageCountThreshold<=1){throw new Error("The value of 'options.searchMethodPageCountThreshold' must be a number greater than 1.");}if(this.aX.redactionViewMode){if(this.aX.redactionViewMode.toLowerCase()==="draft"){this.aX.redactionViewMode=PCCViewer.RedactionViewMode.Draft;}else if(this.aX.redactionViewMode.toLowerCase()==="normal"){this.aX.redactionViewMode=PCCViewer.RedactionViewMode.Normal;}}else{this.aX.redactionViewMode=PCCViewer.RedactionViewMode.Normal;}var iz=this.aX.pageRotation%360;if(iz!==0){var xf=[90,180,270,-90,-180,-270];if(Array.prototype.indexOf){if(!iz||xf.indexOf(iz)=== -1){throw new Error("The value of 'options.pageRotation' is invalid.");}}else{if(!iz||IPCC.Web.jQ(xf,iz)=== -1){throw new Error("The value of 'options.pageRotation' is invalid.");}}}this.aX.pageRotation=iz;if(this.aX.markHandleMode.toLowerCase()==="hidesidehandleswhenclose"){this.aX.markHandleMode=IPCC.Web.UI.MarkHandleMode.HideSideHandlesWhenClose;}else if(this.aX.markHandleMode.toLowerCase()==="hidecornerhandleswhenclose"){this.aX.markHandleMode=IPCC.Web.UI.MarkHandleMode.HideCornerHandlesWhenClose;}else{throw new Error("The value of 'options.markHandleMode' is invalid.");}if(isNaN(this.aX.serviceResponseTimeout)||typeof this.aX.serviceResponseTimeout!=='number'||this.aX.serviceResponseTimeout<0){throw new Error("The value of 'options.serviceResponseTimeout' is invalid.");}if(typeof this.aX.debug!=='boolean'){throw new Error("The value of 'options.debug' is invalid.");}if(typeof this.aX.viewerAssetsPath!=='string'){throw new Error("The value of 'options.viewerAssetsPath' is invalid.");}if(typeof this.aX.enableMultipleRedactionReasons!=='boolean'){throw new Error("The value of 'options.enableMultipleRedactionReasons' is invalid.");}this.hW={};this.bE="";this.fC=1;this.amF=1;this.acL=0;this.ma=1;this.bU=undefined;this.WN=new PCCViewer.Deferred();this.sv=this.WN.getPromise();this.ez=false;this.bf=undefined;this.Pe=0;this.ds=undefined;this.az=PCCViewer.MouseTools.getMouseTool("AccusoftPanAndEdit");this.mZ=false;this.yp=false;this.EI=false;this.DF=[];this.Rw=new PCCViewer.Deferred();this.azY=this.Rw.getPromise();this.wt=[];this.dz={};this.Gj=[];this.Gx=[];this.aL=null;this.Kb={};this.gq=null;this.lP=new PCCViewer.MarkupLayerCollection(this.Zs);this.AD=new PCCViewer.MarkupLayer(this.Zs);this.lP.addItem(this.AD);this.vU=true;setTimeout(function(){V.ahR(kw,V.aX);},0);this.xy=null;this.bN=null;this.zg=false;this.Jf= -1;this.Fv={};this.acw=false;this.aET=this.aX.printTemplate||(this.aX.template?this.aX.template.print:"");this.kb=null;this.xR=null;this.mw=function(cr,eQ,akV){var dO=document.createElement('div'),fD=dO.style;fD.position='absolute';if(eQ.isSelected){fD.backgroundColor='white';}else{fD.backgroundColor='lightgray';}fD.left='10px';fD.right='0';fD.textAlign='left';IPCC.T.forEach(cr.getComments(),function(pm,H){var Sn=document.createElement('div'),QS=Sn.style;QS.position='relative';QS.padding='5px';QS.border='1px solid gray';if(H>0){QS.borderTop='none';}Sn.appendChild(document.createTextNode(pm.getText()));dO.appendChild(Sn);});return dO;};return V;};SingleSessionViewerControl.Co={encryption:false,viewMode:"Document",debug:false,pageLayout:"Vertical",resourcePath:"img",serviceResponseTimeout:60*1000,printTemplate:"",pageRotation:0,markHandleMode:"HideSideHandlesWhenClose",enableMultipleRedactionReasons:false,debugErrorLevel:IPCC.Web.UI.DebugErrorLevel.Detailed,maxPrefetch:3,displayPagesWhenScrolling:true,maxOutOfViewDisplay:0,scrollDisplayThreshold:0.5,requireRequestsOptimize:true,loadingContent:"",redactionViewMode:"Normal",searchMethodType:'auto',searchMethodPageCountThreshold:80,viewerAssetsPath:'viewer-assets'};SingleSessionViewerControl.aCn={pageLoadFailed:"Page Load Failed",pageLoadFailedPassword:"Page Load Failed - Password Required",pageLoadFailedRetry:"Retry"};SingleSessionViewerControl.prototype.ahR=function(element,options){if(this.qD){return;}var V=this;var Zh=function(){if(V.aX.viewMode===IPCC.ViewMode.SinglePage||V.qD){return;}var anH=V.bU.get_pageNodeId(V.getPageNumber()-1);var bh=document.getElementById(anH);var TI=V.cU.childNodes[0].childNodes[0].childNodes[0].childNodes;if(!bh){return;}IPCC.T.forEach(TI,function(jy){if(bh!==jy){if(document.documentMode===8&&jy.style.outline){jy.style.outline='';}else if(jy.style.boxShadow){jy.style.boxShadow='';}}});if(document.documentMode===8){bh.style.outline='2px solid #aaa';}else{bh.style.boxShadow='0 0 4px 1px rgba(0,0,0,.4)';}};function aqW(){var bB=new PCCViewer.Deferred();function showNagDialog(delaySecondsRemaining){var mK=document.createElement('div'),AZ=document.createElement('div'),VE=function(){mK.classList.add('open');},Nz=function(){if(mK.parentNode!==null){mK.parentNode.removeChild(mK);}};AZ.innerHTML='<h3>Evaluation Mode</h3>'+'<p>Please note that PrizmDoc Viewer is running in evaluation mode with a fixed feature set. <b>Viewing is artificially delayed by about 10 seconds</b> and all pages will be watermarked.</p>'+'<p>To test all features without restriction, <a target="_blank" rel="noopener noreferrer" href="https://www.accusoft.com/contact-us/?product=prizmdoc-viewer">contact us</a> to discuss our 30-day full-featured trial.</p>';var agD=document.createElement('p');AZ.appendChild(agD);function updateRemainingSeconds(){agD.innerText='Please wait '+delaySecondsRemaining+' seconds...';};updateRemainingSeconds();mK.className='pccPageListNagModal';mK.appendChild(AZ);V.cU.appendChild(mK);VE();var intervalId=setInterval(function(){delaySecondsRemaining--;if(delaySecondsRemaining>0){updateRemainingSeconds();}else{Nz();clearInterval(intervalId);}},1000);};function fz(aH){if(aH.status===200){var am=JSON.parse(aH.responseText);if(am.delayEnabled){showNagDialog(am.delaySecondsRemaining);}}};function fg(aH){bB.reject(new PCCViewer.Error("AjaxError","The call to get viewing session restrictions failed."));};PCCViewer.Ajax.eB({method:'GET',url:V.aX.imageHandlerUrl+'/v2/ViewingSessions/'+V.aX.documentID+'/restrictions',headers:{'Content-Type':'application/json'}}).then(fz,fg);};var alB=function(){if(V.uV.parentNode){V.uV.parentNode.removeChild(V.uV);}V.bU.remove_pageOpenFailed(abP);V.bU.remove_pageDisplayed(alB);var bx=arguments[1].pageIndex;setTimeout(function(){V.aB.trigger("PageDisplayed",{pageNumber:(bx+1)});Zh();},10);if(bx!==0){return;}function fz(aH){if(V.qD){return;}var am;if(aH.status===200){am=JSON.parse(aH.responseText);if(am.pageCountConfidence<100){var bE;if(!(/^[\x00-\x7F]*$/.test(rg))){bE=V.aX.imageHandlerUrl+'/Document/q/Attributes?DocumentID=e'+rg+'&DesiredPageCountConfidence=100';}else{bE=V.aX.imageHandlerUrl+'/Document/q/Attributes?DocumentID=u'+encodeURIComponent(V.aX.documentID)+'&DesiredPageCountConfidence=100';}PCCViewer.Ajax.eB({method:'GET',url:bE,headers:{'Content-Type':'application/json'}}).then(fz,fg);V.fC=am.pageCount;V.bf.fC=am.pageCount;V.EI=true;setTimeout(function(){V.aB.trigger("EstimatedPageCountReady",{pageCount:am.pageCount});},10);adc();}else{if(V.fC>1){V.bf.fC=am.pageCount;setTimeout(function(){var H;if(am.pageCount<V.fC){for(H=V.fC-1;H>=am.pageCount;H--){V.ds.removePage(H);}}else if(am.pageCount>V.fC){for(H=V.fC;H<am.pageCount;H++){var Vk=new IPCC.Web.UI.ImGearPage({pageNumber:H});V.ds.addPage(Vk);}}V.fC=am.pageCount;if(V.ez===true){V.mZ=true;V.yp=true;setTimeout(function(){V.aB.trigger("PageCountReady",{pageCount:am.pageCount});},30);}},30);}else{V.fC=am.pageCount;V.bf.fC=am.pageCount;if(V.ez===true){adc(function(){V.mZ=true;V.yp=true;setTimeout(function(){V.aB.trigger("PageCountReady",{pageCount:am.pageCount});},0);});}}}}};function fg(am){if(V.qD){return;}var Wv="None",acI,Xr;var adS=am.response.getResponseHeader('Accusoft-Status-Message');if(adS){Wv=adS;Xr=am.response.getResponseHeader('Accusoft-Status-Number');if(IPCC.Web.xS(Xr)){acI=parseInt(Xr,10);}}else if(am.response.statusText){Wv=am.response.statusText;}setTimeout(function(){V.aB.trigger("PageLoadFailed",{statusCode:am.response.status,errorMessage:Wv,accusoftErrorNumber:acI});},1);throw("Unable to obtain document information from the server");};var rg=IPCC.hn.sl(V.aX.documentID);if(!rg||rg===""){throw("Invalid encoded Identifier");}if(!(/^[\x00-\x7F]*$/.test(rg))){V.bE=V.aX.imageHandlerUrl+'/Document/q/Attributes?DocumentID=e'+rg+'&DesiredPageCountConfidence=50';}else{V.bE=V.aX.imageHandlerUrl+'/Document/q/Attributes?DocumentID=u'+encodeURIComponent(V.aX.documentID)+'&DesiredPageCountConfidence=50';}PCCViewer.Ajax.eB({method:'GET',url:V.bE,headers:{'Content-Type':'application/json'}}).then(fz,fg);};function adc(pE){pE=pE||function(){};var akQ=V.fC;function afn(){V.bU.remove_allPagesAdded(afn);pE();};if(akQ>1){V.bU.add_allPagesAdded(afn);if(!V.aaK){V.bU.add_currentPageChanged(function(){if(arguments.length<2){throw("Controls currentPageChanged event did not provide any expected information");}var cI=arguments[1];setTimeout(function(){V.aB.trigger('PageChanged',{pageNumber:cI.pageIndex+1});Zh();},0);});V.bU.add_pageDisplayed(function(){if(arguments.length<2){throw("Controls pageDisplayed event did not provide any expected information");}var cI=arguments[1];if(V.kb){V.kb();V.kb=null;if(V.gq){V.gq.resolve();}V.gq=null;}setTimeout(function(){V.aB.trigger('PageDisplayed',{pageNumber:cI.pageIndex+1});Zh();},0);setTimeout(function(){V.requestPageText(cI.pageIndex+1).then(function Eq(){V.WI(cI.pageIndex+1,V.Jf);});},10);});V.bU.add_pageOpenFailed(function(){ahl(arguments);});V.aaK=true;}for(var H=V.Pe;H<akQ;H++){V.ds.addPage(new IPCC.Web.UI.ImGearPage({pageNumber:H}));V.Pe++;}}else{pE();}};var aDg=function(cI){var bh=document.getElementById(cI.pageNodeID),ab=document.createElement('div'),AI=document.createElement('button'),aen='pccPageLoadFailRetry'+cI.pageIndex,abk=function(){V.bU.Nn(cI.pageIndex);},asr=PCCViewer.Language.data.pageLoadFailed,asX=PCCViewer.Language.getValue("pageLoadFailedPassword"),ati=PCCViewer.Language.data.pageLoadFailedRetry,aGk=cI.exception.statusCode===480&&cI.exception.customErrorCode===4001;if(bh===null){return;}AI.id=aen;AI.innerHTML=ati;ab.className='pccPageLoadFail';if(aGk){ab.innerHTML=asX+'<br>';bh.appendChild(ab);}else{ab.innerHTML=asr+'<br>';ab.appendChild(AI);bh.appendChild(ab);AI=document.getElementById(aen);if(!AI.addEventListener){AI.attachEvent('onclick',abk);}else{AI.addEventListener('click',abk,false);}}};function ahl(CR){if(CR.length<2){throw("controls PageOpenFailed event did not provide any expected information");}var aew,afL,cI=CR[1];if(CR[1].exception.customErrorCode!==undefined){afL=CR[1].exception.customErrorCode;}if(CR[1].exception.message!==undefined){aew=CR[1].exception.message;}setTimeout(function(){V.aB.trigger('PageLoadFailed',{statusCode:cI.exception.statusCode,pageNumber:cI.pageIndex+1,errorMessage:aew,accusoftErrorNumber:afL});aDg(cI);},0);};function aqg(){if(V.bU&&typeof V.bU.dispose==="function"){V.bU.dispose();}V.bE="";V.bU=undefined;while(V.cU.firstChild){V.cU.removeChild(V.cU.firstChild);}};function aIx(adU){var bB=new PCCViewer.Deferred();if(typeof adU==="string"){PCCViewer.Ajax.eB({url:V.aX.imageHandlerUrl+'/ViewingSession/u'+V.aX.documentID+'/Replacement',body:JSON.stringify({password:adU}),method:'POST',headers:{'Content-Type':'application/json;charset=utf-8'}}).then(function aHj(aH){var result=JSON.parse(aH.responseText);var alh=result.viewingSessionId;V.aX.documentID=alh;aqg();V.ahR(V.cU,V.aX);bB.resolve(alh);},function aHq(err){bB.reject(new PCCViewer.Error("AjaxError","The call to replace the viewing session failed."));});}else{bB.reject(new PCCViewer.Error("InvalidArgument","The value of the 'password' parameter must be a string."));}return bB.getPromise();};function abP(){V.bU.remove_pageOpenFailed(abP);ahl(arguments);};var aEO=function(bP,J){V.uU=true;var Xw={width:J.width,height:J.height,pageNumber:J.pageNumber};V.aB.trigger("PageOpening",Xw);};function adq(){V.WN.resolve(V.bU);V.bU.remove_pageOpened(adq);V.ez=true;var aj=V;setTimeout(function(){V.aB.trigger("ViewerReady",{});if(aj.mZ===true&&aj.yp===false){aj.yp=true;setTimeout(function(){V.aB.trigger("PageCountReady",{pageCount:aj.getPageCount()});},10);}},10);V.setCurrentMouseTool("AccusoftPanAndEdit");};var arD=function(bP,J){if(J.containsText===true){V.Rw.resolve(true);}var zl= -1;if(Array.prototype.indexOf){zl=(V.wt.indexOf(J.pageIndex)>=0);}else{zl=(IPCC.Web.jQ(V.wt,J.pageIndex)>=0);}if(zl===false){V.wt.push(J.pageIndex);if(V.wt.length===V.fC){V.Rw.resolve(false);}}setTimeout(function(){V.aB.trigger("PageTextReady",{pageNumber:J.pageIndex+1});},0);};var asI=function(bP,J){var zl= -1;if(Array.prototype.indexOf){zl=(V.wt.indexOf(J.pageIndex)>=0);}else{zl=(IPCC.Web.jQ(V.wt,J.pageIndex)>=0);}if(zl===false){V.wt.push(J.pageIndex);if(V.wt.length===V.fC){V.Rw.resolve(false);}}};function aGy(sender,eventArgs){if(!eventArgs.text||(eventArgs.text.length===0)){return;}var kz=[];for(var i=0;i<eventArgs.pageNumbers.length;i++){kz.push(eventArgs.pageNumbers[i]+1);}var gZ=[],uW= -eventArgs.startIndex,aP,cc,iw,by,j,k;for(j=0;j<kz.length;j++){iw=V.ds.jj(kz[j]-1).cd().gY();uW+=iw.ef();aP=0;if(j===0){aP=eventArgs.startIndex;}if(uW>=eventArgs.text.length){cc=uW-eventArgs.text.length-1;}else{cc=iw.ef()-1;}by=IPCC.T.XY(iw,aP,cc);for(k=0;k<by.length;k++){gZ.push({x:by[k].x,y:by[k].y,width:by[k].width,height:by[k].height,pageNumber:kz[j]});}}V.aL={pageNumber:kz[0],length:eventArgs.text.length,text:eventArgs.text,startIndex:eventArgs.startIndex,rectangles:gZ};var K,akG={selectedText:eventArgs.text,pageNumbers:kz,clientX:eventArgs.clientX,clientY:eventArgs.clientY,handleClientX:eventArgs.handleClientX,handleClientY:eventArgs.handleClientY,textSelection:V.aL};function aED(){var Hy=V.mj;V.afV=true;V.mj=function(sender,args){V.mj=Hy;setTimeout(function(){V.aB.trigger(PCCViewer.EventType.MarkCreated,{mark:K,pageNumber:kz[0],clientX:eventArgs.clientX,clientY:eventArgs.clientY});},0);};};if(eventArgs.previousFirstMark){K=V.dz[eventArgs.previousFirstMark.get_markID()];V.bU.remove_markRemoved(V.CX);V.bU.remove_markSelectionChanged(V.ED);if(eventArgs.pageNumbers[0]!==eventArgs.previousFirstMark.bx){var aFN=K.L.abt;var TE;if(K.getReason){TE=K.L.get_text();}var TQ;if(K.getFillColor){TQ=K.L.get_fillColor();}var SR;if(K.getColor){SR=K.L.get_lineColor();}var SL;if(K.getThickness){SL=K.L.get_lineWidth();}var Sy;if(K.getHref){Sy=K.L.get_href();}var aGd=new PCCViewer.Conversation(K);var bJ=V.bU.gJ(V.ds.getPage(K.L.bx));bJ.removeMark(K.L);for(var H=K.aM.length-1;H>=0;H--){var nk=K.aM[H];bJ=V.bU.gJ(V.ds.getPage(nk.bx));bJ.removeMark(nk);K.aM.splice(H,1);}K.L=new IPCC.Web.UI.Mark(eventArgs.previousFirstMark.get_type());K.L.bx=eventArgs.pageNumbers[0];K.aR=eventArgs.pageNumbers[0]+1;K.L.ka=true;K.L.abt=aFN;var Hy=V.mj;V.mj=null;V.bU.remove_markChanged(V.ml);bJ=V.bU.gJ(V.ds.getPage(K.L.bx));bJ.addMark(K.L);if(TE){K.L.set_text(TE);}if(TQ){K.L.set_fillColor(TQ);}if(SR){K.L.set_lineColor(SR);}if(SL){K.L.set_lineWidth(SL);}if(Sy){K.L.set_href(Sy);}K.cr=new PCCViewer.Conversation(K);PCCViewer.Conversation.pH(aGd,K.cr);V.bU.add_markChanged(V.ml);V.mj=Hy;}K.L.set_selected(true);K.L.set_visible(true);K.setPosition({startIndex:eventArgs.startIndex,length:eventArgs.text.length});V.bU.add_markRemoved(V.CX);V.bU.add_markSelectionChanged(V.ED);V.nZ(K,eventArgs.pageNumbers[0]);return;}var zc=null;switch(eventArgs.mouseTool){case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:zc='HighlightAnnotation';break;case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:zc='TextSelectionRedaction';break;case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:zc='TextHyperlinkAnnotation';break;case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:zc='StrikethroughAnnotation';break;case IPCC.Web.UI.MouseTool.SelectText:auZ(eventArgs.text);V.Kb[kz[0]]='selectText';break;}var az=PCCViewer.MouseTools.getMouseTool(V.getCurrentMouseTool());var bq=(az&&az.getTemplateMark)?az.getTemplateMark():undefined;var atV=bq?bq.getType():"";if(zc){aED();V.aB.trigger(PCCViewer.EventType.TextSelected,akG);K=V.addMark(kz[0],zc);if(V.vU){V.AD.addMarks(K);}K.L.ka=true;K.setPosition({startIndex:eventArgs.startIndex,length:eventArgs.text.length});if(atV===zc){if(bq.getFillColor){K.setFillColor(bq.getFillColor());}if(bq.getReason&& !K.om){K.setReason(bq.getReason());}if(bq.getReasons&&K.om){K.setReasons(bq.getReasons());}if(bq.getHref){K.setHref(bq.getHref());}if(bq.getColor){K.setColor(bq.getColor());}if(bq.getThickness){K.setThickness(bq.getThickness());}PCCViewer.Data.nC(bq,K);}return;}setTimeout(function(){V.aB.trigger(PCCViewer.EventType.TextSelected,akG);},0);};function ari(){var bh=V.cU,ab=document.createElement('div');ab.className='pccCopyText';bh.appendChild(ab);V.JM=ab;};function auZ(aO){var mT,aGo=aO.split('\n'),IP=document.createDocumentFragment(),EB,it;mT=document.createTextNode(aO);IP.appendChild(mT);IPCC.T.CJ(V.JM);V.JM.appendChild(IP);if(document.body.createTextRange){EB=document.body.createTextRange();EB.moveToElementText(V.JM);EB.select();}else if(window.getSelection){it=window.getSelection();EB=document.createRange();EB.selectNodeContents(V.JM);it.removeAllRanges();it.addRange(EB);}};this.bf=new IPCC.Web.UI.ImGearDocument({documentIdentifier:this.aX.documentID,imageServicePath:this.aX.imageHandlerUrl});this.bf.set_encryption(this.aX.encryption||false);var Vk=new IPCC.Web.UI.ImGearPage({pageNumber:0});this.bf.get_pages().addPage(Vk);this.ds=this.bf.get_pages();this.bU=IPCC.initializePageListPlugin(element,options);aqW();this.bU.get_documents().addDocument(this.bf);this.Pe=1;this.bU.add_pageDisplayed(alB);this.bU.add_pageOpenFailed(abP);this.bU.add_pageOpening(aEO);this.bU.add_pageOpened(adq);this.bU.add_textPageReady(arD);this.bU.add_textExtractionFailed(asI);this.bU.set_conversationDOMFactory(function(L,eQ,akV){var K=V.dz[L.get_markID()];if(K){return V.mw(K.getConversation(),eQ,akV);}});IPCC.T.aqH(element,function(FY){if(!FY&&IPCC.T.AN!=='svg'){console.warn('PrizmDoc cannot use inline font. Enable remote fonts in your browser for faster document rendering.');if(!V.ez){IPCC.T.AN='svg';return;}else if(V.mZ){IPCC.T.AN='svg';V.bU.disposeDisplayedPages();V.bU.displayAll();}else{var nu=function(){V.aB.off(PCCViewer.EventType.PageCountReady,nu);IPCC.T.AN='svg';V.bU.disposeDisplayedPages();V.bU.displayAll();};V.aB.on(PCCViewer.EventType.PageCountReady,nu);}}});ari();this.bU.add_selectTextMouseToolCompleted(aGy);this.bU.add_propertyChanged(function(sD,cL){var proprtyName=cL.azM();if(proprtyName==="mouseTool"){setTimeout(function(){V.aB.trigger(PCCViewer.EventType.MouseToolChanged,{mouseToolName:V.az.getName()});},0);}});this.bU.add_markAdded(function(sender,eventArgs){if((eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.HighlightText||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.Strikethrough||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation)&&V.dz[eventArgs.mark.get_markID()]===undefined&&eventArgs.mark.aD!==undefined){V.nZ(eventArgs.mark,eventArgs.pageIndex);}if(V.mj){var bv=eventArgs.mark.get_type();if(bv!==IPCC.Web.UI.MarkType.Highlight&& !(bv===IPCC.Web.UI.MarkType.RectangleRedaction&&eventArgs.mark.aD!==undefined)){V.mj(sender,eventArgs);}}});this.bU.add_markCreating(function(sender,eventArgs){if(V.ES){V.ES(sender,eventArgs);}});this.bU.Om(function(sender,eventArgs){var Ge=0;var yE=0;var acC=0;var ut=0;var uv=0;var MB=0;var aso=V.az.getName().toLowerCase(),arK=V.az.getType();if(arK===PCCViewer.MouseTool.Type.PlaceSignature){var az=V.az;var bq=az.getTemplateMark(),lB=bq.getSignature(),aaZ=bq.getRectangle(),K,C={};if(!lB){return;}V.requestPageAttributes(eventArgs.pageIndex+1).then(function(attributes){var us;if(attributes.width>0){yE=aaZ.width||(attributes.width/5);}if(lB.path&&lB.path.length>0){us=IPCC.T.abM(lB.path);C={x:0,y:0,width:us.width,height:us.height};K=V.addMark(eventArgs.pageIndex+1,PCCViewer.Mark.Type.FreehandSignature);K.setPath(lB.path);K.setThickness(lB.thickness||4);}if(lB.text&&lB.text.length){us=IPCC.T.uJ(lB.text,lB.fontName);K=V.addMark(eventArgs.pageIndex+1,PCCViewer.Mark.Type.TextSignature);C={x:0,y:0,width:us.width,height:us.height};K.setText(lB.text);K.setFontName(lB.fontName);}acC=(C.width/yE);Ge=aaZ.height||(C.height/acC);ut=(eventArgs.imagePoint.x-(yE/2));uv=(eventArgs.imagePoint.y-(Ge/2));if(ut<=0){ut=0;}if(uv<=0){uv=0;}if((ut+yE)>=attributes.width){MB=(ut+yE)-attributes.width;ut=ut-MB;}if((uv+Ge)>=attributes.height){MB=(uv+Ge)-attributes.height;uv=uv-MB;}C={x:ut,y:uv,width:yE,height:Ge};K.setRectangle({x:ut,y:uv,width:yE,height:Ge});PCCViewer.Data.nC(bq,K);PCCViewer.Conversation.pH(bq.getConversation(),K.getConversation());});V.setCurrentMouseTool(aso);}});function MouseEvent(av){var V=this;for(var i in av){if(i){V[i]=av[i];}}};this.bU.Oi(function(sender,eventArgs){var aL=null,gN=null,K=null,gg=null,wV=false,MU=eventArgs.upTarget.type,KX=false;if(eventArgs.domEvent.ctrlKey===true||eventArgs.domEvent.shiftKey===true){KX=true;}if(eventArgs.upTarget.type==='page'&&eventArgs.downTarget.type==='page'&&eventArgs.upTarget.pageIndex===eventArgs.downTarget.pageIndex||eventArgs.upTarget.type==='comments'&&eventArgs.downTarget.element===eventArgs.upTarget.element){wV=true;if(eventArgs.upTarget.type==='page'&&eventArgs.downTarget.type==='page'&&KX===false){V.deselectAllMarks();}}else if(eventArgs.upMark&&typeof eventArgs.downMark!=='undefined'){if((eventArgs.upMark.get_type()===IPCC.Web.UI.MarkType.DocumentHyperlink)&&(eventArgs.upMark===eventArgs.downMark)){gg=V.avE(eventArgs.upMark);wV=gg!==null;MU="documentHyperlink";}else{K=V.dz[eventArgs.upMark.get_markID()];if(K===undefined){for(var jF in V.dz){if(V.dz.hasOwnProperty(jF)){if(V.dz[jF].L.aD===eventArgs.upMark.aD&&V.dz[jF].L.aD===eventArgs.downMark.aD){K=V.dz[jF];eventArgs.pageIndex=K.aR-1;wV=true;var ats=V.getCurrentMouseTool();var atx=PCCViewer.MouseTools.getMouseTool(ats);var adw=atx.getType();if(KX===false&&eventArgs.domEvent.button===0){if(adw===PCCViewer.MouseTool.Type.PanAndEdit||adw===PCCViewer.MouseTool.Type.EditMarks){V.deselectAllMarks();K.L.set_selected(true);}}break;}}}}else if(typeof eventArgs.downMark!=='undefined'&&typeof eventArgs.upMark!=='undefined'&&eventArgs.downMark.ly()===eventArgs.upMark.ly()){wV=true;if(KX===false&&eventArgs.downTarget.alreadySelected===false){V.deselectAllMarks();K.L.set_selected(true);}}if(K===undefined){if(V.bN&&V.Kb[eventArgs.upTarget.pageIndex+1]==='search'){var fk=V.bN.getResults();for(var H=0;H<fk.length;H++){if(fk[H].aR===eventArgs.upTarget.pageIndex+1&&typeof eventArgs.downMark.aP!=='undefined'&&typeof eventArgs.upMark.aP!=='undefined'&&typeof eventArgs.downMark.cq!=='undefined'&&typeof eventArgs.upMark.cq!=='undefined'&&eventArgs.downMark.aP>=fk[H].getStartIndexInPage()&&eventArgs.downMark.aP+eventArgs.downMark.cq<=fk[H].getStartIndexInPage()+fk[H].getText().length&&eventArgs.upMark.aP>=fk[H].getStartIndexInPage()&&eventArgs.upMark.aP+eventArgs.upMark.cq<=fk[H].getStartIndexInPage()+fk[H].getText().length){MU='searchResult';gN=fk[H];eventArgs.upTarget.pageIndex=gN.aR-1;wV=true;break;}}}}if(wV===false&&K===undefined&&V.Kb[eventArgs.upTarget.pageIndex+1]==='selectText'&&typeof eventArgs.downMark.aP!=='undefined'&&typeof eventArgs.upMark.aP!=='undefined'&&eventArgs.downMark.aP>=V.aL.startIndex&&eventArgs.downMark.aP+eventArgs.downMark.cq<=V.aL.startIndex+V.aL.length&&eventArgs.upMark.aP>=V.aL.startIndex&&eventArgs.upMark.aP+eventArgs.upMark.cq<=V.aL.startIndex+V.aL.length){MU='textSelection';aL=V.aL;wV=true;}}}var ZU=new MouseEvent(eventArgs.originalEvent);setTimeout(function(){var aGH=(isNaN(eventArgs.upTarget.pageIndex))?null:eventArgs.upTarget.pageIndex+1;var J={pageNumber:aGH,targetType:MU,textSelection:aL,searchResult:gN,mark:K,originalEvent:ZU,hyperlink:gg,clientX:eventArgs.clientX,clientY:eventArgs.clientY};if(wV===true){V.aB.trigger('Click',J);}},0);});(function(){var AU=null;V.bU.NT(function(sender,eventArgs){var ZU=new MouseEvent(eventArgs.domEvent);var J={originalEvent:ZU,clientX:eventArgs.windowPoint.x,clientY:eventArgs.windowPoint.y};if(!(eventArgs.mark instanceof IPCC.Web.UI.Mark)){if(AU!==null){J.mark=V.dz[AU];AU=null;setTimeout(function(){V.aB.trigger('MarkMouseLeave',J);},0);}}else{J.mark=V.dz[eventArgs.mark.get_markID()];if(J.mark===undefined){for(var jF in V.dz){if(V.dz.hasOwnProperty(jF)){if(V.dz[jF].L.aD===eventArgs.mark.aD){J.mark=V.dz[jF];break;}}}}if(!J.mark){return;}setTimeout(function(){if(AU!==J.mark.getId()){if(AU!==null){V.aB.trigger('MarkMouseLeave',IPCC.T.extend({},J,{mark:V.dz[AU]}));}AU=J.mark.getId();V.aB.trigger('MarkMouseEnter',J);}V.aB.trigger('MarkMouseOver',J);},0);}});})();this.bU.add_hyperlinkPageReady(function(sender,eventArgs){if(V.Gj[eventArgs.pageIndex]!==undefined){return;}var bx=eventArgs.pageIndex,bI=V.ds.getPage(bx),HZ=bI.get_hyperlinkPage().Jm(),xu=V.Gj[bx]=[];HZ.lx(function(CK){xu.push(new PCCViewer.DocumentHyperlink({aR:bx+1,CK:CK}));});if(!V.Gx[bx]){V.Gx[bx]=new PCCViewer.Deferred();}V.Gx[bx].resolve(xu);});this.nZ=function(K,hO){var aax=false;function Ta(){var kO=false;var dr=V.bU.get_displayedPages();for(var H=0;H<dr.get_length();H++){var bI=dr.getPage(H);if(bI.get_pageNumber()===hO){kO=true;break;}}return kO;};function Pr(gv){if(V.bU){V.bU.dC(gv);}};if(Ta()){if(Array.prototype.indexOf){if(IPCC.Web.jQ(V.DF,hO)>=0){aax=true;}}else{if(IPCC.Web.jQ(V.DF,hO)>=0){aax=true;}}if(!aax){V.DF.push(hO);setTimeout(function(){var cl=V.DF.length;if(cl>0){for(var H=0;H<cl;H++){Pr(V.DF[H]);}V.DF.splice(0,cl);}},10);}}};var Jz={FreehandSignature:{lineColor:'color',lineWidth:'thickness',pathWidth:false,pathHeight:false},FreehandAnnotation:{lineColor:'color',lineWidth:'thickness',pathWidth:false,pathHeight:false},LineAnnotation:{lineColor:'color',lineWidth:'thickness'},PolylineAnnotation:{lineColor:'color',lineWidth:'thickness'},TextSignature:{textColor:false,fillColor:'color'},TextInputSignature:{lineVisible:false},StampAnnotation:{text:'label',fillColor:'color'},StampRedaction:{text:'label'},StrikethroughAnnotation:{lineColor:'color',lineWidth:'thickness',rectangle:'position'},RectangleRedaction:{text:this.aX.enableMultipleRedactionReasons?'reasons':'reason'},TextRedaction:{opacity:false},HighlightAnnotation:{rectangle:'position'},TextSelectionRedaction:{rectangle:'position',text:this.aX.enableMultipleRedactionReasons?'reasons':'reason'},TextHyperlinkAnnotation:{rectangle:'position'}};var Rr={lineColor:"borderColor",lineWidth:"borderThickness",pathString:"path",textColor:"fontColor",textHorizontalAlignment:"horizontalAlignment"};this.ml=function(bP,J){var K=V.dz[J.mark.get_markID()];var bO;if(K){bO=K.bO;}if(bO&&Jz[bO]&&Jz[bO][J.propertyName]===false){return;}var ci;if(bO){ci=Jz[bO]&&Jz[bO][J.propertyName]?Jz[bO][J.propertyName]:Rr[J.propertyName]?Rr[J.propertyName]:J.propertyName;}else{ci=Rr[J.propertyName]?Rr[J.propertyName]:J.propertyName;}if(J.mark.get_type()===IPCC.Web.UI.MarkType.HighlightText||J.mark.get_type()===IPCC.Web.UI.MarkType.Highlight||J.mark.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction||J.mark.get_type()===IPCC.Web.UI.MarkType.TextHighlightAnnotation||J.mark.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||J.mark.get_type()===IPCC.Web.UI.MarkType.Strikethrough||(J.mark.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&J.mark.aD!==undefined)){if(K){setTimeout(function(){V.aB.trigger('MarkChanged',{mark:K,pageNumber:J.pageIndex+1,propertyName:ci});},0);}else{for(var jF in V.dz){if(V.dz.hasOwnProperty(jF)){K=V.dz[jF];if(K.aD===J.mark.aD){break;}}}}V.nZ(K,J.pageIndex);}else if(K&&J.mark.get_type()===IPCC.Web.UI.MarkType.Polyline&&ci==='points'){if(K.Ys){clearTimeout(K.Ys);}K.Ys=setTimeout(function(){K.Ys=undefined;V.nZ(K,J.pageIndex);V.aB.trigger('MarkChanged',{mark:K,pageNumber:J.pageIndex+1,propertyName:ci});},1);}else if(K){V.nZ(K,J.pageIndex);setTimeout(function(){V.aB.trigger('MarkChanged',{mark:K,pageNumber:J.pageIndex+1,propertyName:ci});},0);}if(K&&K.type===PCCViewer.Mark.Type.TextRedaction){K.L.set_opacity(0);}if(K&&(K.bO===PCCViewer.Mark.Type.TextInputSignature||K.bO===PCCViewer.Mark.Type.TextAreaSignature)){K.L.set_lineVisible(false);}};this.bU.add_markChanged(V.ml);this.bU.add_markReordered(function(sender,eventArgs){var K=V.dz[eventArgs.mark.get_markID()];setTimeout(function(){V.aB.trigger('MarkReordered',{mark:K,pageNumber:eventArgs.pageIndex+1,index:eventArgs.zIndex,oldIndex:eventArgs.oldZIndex});},0);});this.ED=function(sender,eventArgs){if(eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.Strikethrough||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.HighlightText){var K;for(var LB in V.dz){if(V.dz.hasOwnProperty(LB)){K=V.dz[LB];if(K.L.aD===eventArgs.mark.aD){K.L.set_selected(eventArgs.mark.get_selected());V.nZ(K.L,K.L.bx);for(var H=0;H<K.aM.length;H++){K.aM[H].set_selected(eventArgs.mark.get_selected());V.nZ(K.aM[H],K.aM[H].bx);}}}}}setTimeout(function(){V.aB.trigger('MarkSelectionChanged',{pageNumber:eventArgs.pageIndex+1});},0);};this.bU.add_markSelectionChanged(V.ED);this.bU.add_markTextSelectionChanged(function(sender,eventArgs){V.nZ(eventArgs.mark,eventArgs.pageIndex);});this.CX=function(sender,eventArgs){var K;if(eventArgs.mark){K=V.dz[eventArgs.mark.get_markID()];if((eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.HighlightText||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.Strikethrough||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation)&&K===undefined&&eventArgs.mark.aD!==undefined){V.nZ(eventArgs.mark,eventArgs.pageIndex);}else if(K){setTimeout(function(){V.aB.trigger(PCCViewer.EventType.MarkRemoved,{mark:K,pageNumber:eventArgs.pageIndex});},0);}}};this.bU.add_markRemoved(V.CX);this.bU.add_commentAdding(function(sender,eventArgs){var K=V.dz[eventArgs.mark.get_markID()];if(eventArgs.comment.GY.jw===undefined){eventArgs.comment.GY.jw=V.getActiveMarkupLayer();}});this.bU.add_commentAdded(function(sender,eventArgs){var K=V.dz[eventArgs.mark.get_markID()];V.aB.trigger(PCCViewer.EventType.CommentCreated,{conversation:K.getConversation(),comment:eventArgs.comment.GY});});this.bU.add_commentRemoved(function(sender,eventArgs){var K=V.dz[eventArgs.mark.get_markID()];V.aB.trigger(PCCViewer.EventType.CommentRemoved,{conversation:K.getConversation(),comment:eventArgs.comment.GY});});this.bU.add_commentChanged(function(sender,eventArgs){var K=V.dz[eventArgs.mark.get_markID()];V.aB.trigger(PCCViewer.EventType.CommentChanged,{conversation:K.getConversation(),comment:eventArgs.comment.GY});});this.bU.add_scaleChanged(function(sender,eventArgs){var eP;switch(eventArgs.fitType){case 0:eP=PCCViewer.FitType.FullWidth;break;case 1:eP=PCCViewer.FitType.ShrinkToWidth;break;case 2:eP=PCCViewer.FitType.ActualSize;break;case 3:eP=PCCViewer.FitType.FullHeight;break;case 4:eP=PCCViewer.FitType.FullPage;break;default:break;}V.aB.trigger(PCCViewer.EventType.ScaleChanged,{scaleType:eventArgs.scaleType,trigger:eventArgs.scaleTrigger,fitType:eP,scaleFactor:eventArgs.scaleFactor});});};SingleSessionViewerControl.prototype.getPageCount=function(){return this.fC;};SingleSessionViewerControl.prototype.getPageNumber=function(){return(this.bU)?(this.bU.amN().get_pageNumber()+1):1;};SingleSessionViewerControl.prototype.setPageNumber=function(pageNumber){var aR;if(typeof(pageNumber)==='number'){aR=pageNumber;}else{if(isNaN(+pageNumber)){throw "The parameter pageNumber is not a number.";}else{aR=Number(pageNumber);}}if(parseInt(aR,10)!==aR){throw new Error("The 'pageNumber' value "+aR+" is not an integer page number.");}if(aR<1||aR>this.getPageCount()|| !isFinite(aR)){throw "The parameter pageNumber is out of range.";}if(this.getPageNumber()===aR){return this;}if(this.bU){this.bU.scrollToPage(aR-1);}return this;};SingleSessionViewerControl.prototype.changeToFirstPage=function(){if(this.bU){if(this.EI||this.mZ){this.bU.scrollToFirstPage();}}return this;};SingleSessionViewerControl.prototype.changeToLastPage=function(){if(this.bU){if(this.EI||this.mZ){this.bU.scrollToLastPage();}}return this;};SingleSessionViewerControl.prototype.changeToNextPage=function(){if(this.bU){if(this.EI||this.mZ){this.bU.scrollToNextPage();}}return this;};SingleSessionViewerControl.prototype.changeToPrevPage=function(){if(this.bU){if(this.EI||this.mZ){this.bU.scrollToPreviousPage();}}return this;};SingleSessionViewerControl.prototype.scrollBy=function(offsetX,offsetY){if(!this.ez){throw new Error("The method scrollTo requires the viewer to be in a 'ViewerReady' state.");}var V=this;if(typeof offsetX==='number'&&typeof offsetY==='number'){V.bU.scrollBy(offsetX,offsetY);}else{if(isNaN(+offsetX)||isNaN(+offsetY)){throw new PCCViewer.Error('InvalidArgument','Please provide integer values for offsetX and offsetY properties.');}else{V.bU.scrollBy(Number(+offsetX),Number(+offsetY));}}return this;};SingleSessionViewerControl.prototype.scrollTo=function(target){if(!this.ez){throw new Error("The method scrollTo requires the viewer to be in a 'ViewerReady' state.");}if(this.gq){this.gq.reject(new PCCViewer.Error("Error","The scrollTo method was called before this scrollToAsync method completed scrolling, so scrolling for this scrollToAsync method has been cancelled."));this.gq=null;this.kb=null;}var V=this;var Ic=function(){V.bU.scrollConversationIntoView(target.getMark().L.get_conversation());if(V.gq){V.gq.resolve();}V.gq=null;V.kb=null;};var tw=function(ev){if(ev.target.xR===target){V.aB.off(PCCViewer.EventType.CommentCreated,tw);V.xR=null;V.scrollTo(target);}else if(ev.target.xR===null){V.aB.off(PCCViewer.EventType.CommentCreated,tw);}if(V.gq){V.gq.resolve();}V.gq=null;V.kb=null;};var JN=function(aR,hk){V.bU.prefetchPages();V.bU.scrollRegionIntoView(aR-1,hk);if(V.gq){V.gq.resolve();}V.gq=null;V.kb=null;};akN(V,target,tw,Ic,JN);return this;};SingleSessionViewerControl.prototype.scrollToAsync=function(target){if(this.gq){this.gq.reject(new PCCViewer.Error("Error","The scrollToAsync method was called before this scrollToAsync method completed scrolling, so scrolling for this scrollToAsync method has been cancelled."));this.gq=null;this.kb=null;}var bB=PCCViewer.Deferred();var dk=bB.getPromise();var V=this;V.gq=bB;try{var Ic=function(){V.bU.scrollConversationIntoView(target.getMark().L.get_conversation());if(V.gq){V.gq.resolve();}V.gq=null;V.kb=null;};var tw=function(ev){if(ev.target.xR===target){V.aB.off(PCCViewer.EventType.CommentCreated,tw);V.xR=null;V.scrollTo(target);}else if(ev.target.xR===null){V.aB.off(PCCViewer.EventType.CommentCreated,tw);}if(V.gq){V.gq.resolve();}V.gq=null;V.kb=null;};var JN=function(aR,hk){V.bU.prefetchPages();V.bU.scrollRegionIntoView(aR-1,hk);if(V.gq){V.gq.resolve();}V.gq=null;V.kb=null;};if(akN(V,target,tw,Ic,JN)===true){bB.resolve();}}catch(e){V.gq=null;V.kb=null;bB.reject(new PCCViewer.Error("Error",e));}return dk;};function akN(dn,cO,tw,Ic,JN){var hk,aR,aQ;dn.xR=null;if(cO instanceof PCCViewer.Conversation){if(dn.dz[cO.getMark().getId()]===undefined){throw new Error("The parameter target is a conversation of a mark unknown to the viewer control.");}var aki=dn.bU.scrollConversationIntoView(cO.getMark().L.get_conversation());if(aki==="PageOutOfView"){dn.kb=Ic;dn.setPageNumber(cO.getMark().getPageNumber());return false;}else if(aki==="ConversationDivDoesNotExist"&&cO.getMark().L.get_conversation().get_length()>0){dn.xR=cO;dn.aB.on(PCCViewer.EventType.CommentCreated,tw);return false;}else{dn.kb=null;return true;}}else if(cO instanceof PCCViewer.SearchResult){if(cO.VI!==dn.bf.get_documentIdentifier()){throw new Error("The parameter target is a SearchResult that was not created using the current document viewing session.");}aQ=cO.getBoundingRectangle();hk=new IPCC.Web.UI.Rectangle(aQ.x,aQ.y,aQ.width,aQ.height);aR=cO.getPageNumber();}else if(cO instanceof PCCViewer.Mark){if(dn.dz[cO.getId()]===undefined){throw new Error("The parameter target is a mark unknown to the viewer control.");}aQ=cO.getBoundingRectangle();hk=new IPCC.Web.UI.Rectangle(aQ.x,aQ.y,aQ.width,aQ.height);aR=cO.getPageNumber();}else if(cO!==undefined&&cO!==null){if(typeof cO.x==='number'&&typeof cO.y==='number'){hk=new IPCC.Web.UI.Rectangle(+cO.x,+cO.y,0,0);}else{if(isNaN(+cO.x)||isNaN(+cO.y)){throw new Error('The parameter target does not contain a valid x and y values.');}else{hk=new IPCC.Web.UI.Rectangle(Number(+cO.x),Number(+cO.y),0,0);}}if(cO.width){if(typeof cO.width==='number'){hk.width=cO.width;}else{if(isNaN(+cO.width)){throw new Error('The parameter target does not contain a valid width value.');}else{hk.width=Number(+cO.width);}}}if(cO.height){if(typeof cO.height==='number'){hk.height=cO.height;}else{if(isNaN(+cO.height)){throw new Error('The parameter target does not contain a valid height value.');}else{hk.height=Number(+cO.height);}}}if(typeof cO.pageNumber==='number'){aR= +cO.pageNumber;}else{if(isNaN(+cO.pageNumber)){throw new Error('The parameter target does not contain a valid pageNumber value.');}else{aR=Number(+cO.pageNumber);}}}else{throw new Error('The target parameter must be a Mark, SearchResult, or Point.');}if(aR<1||aR>dn.getPageCount()|| !isFinite(aR)){throw new RangeError("The parameter pageNumber is out of range.");}if(dn.bU.scrollRegionIntoView(aR-1,hk)===false){dn.kb=function(){JN(aR,hk);};dn.setPageNumber(aR);return false;}else{dn.kb=null;return true;}};SingleSessionViewerControl.prototype.rotatePage=function(degreesClockwise){if(!this.ez){throw "The method rotatePage requires the viewer to be in a 'ViewerReady' state.";}if(yU(this.getPageNumber()-1,this)===false){this.bU.dC(this.getPageNumber()-1);}var iz=degreesClockwise%360,V=this;if(iz!==0){var xf=[90,180,270,-90,-180,-270];if(Array.prototype.indexOf){if(!iz||xf.indexOf(iz)=== -1){throw new RangeError("The value of degreesClockwise ("+degreesClockwise+") is not valid.");}}else{if(!iz||IPCC.Web.jQ(xf,iz)=== -1){throw new RangeError("The value of degreesClockwise ("+degreesClockwise+") is not valid.");}}this.bU.rotate(iz);}setTimeout(function(){V.aB.trigger("PageRotated",{degreesClockwise:iz,pageNumber:(V.getPageNumber())});},0);return this;};SingleSessionViewerControl.prototype.rotateDocument=function(degreesClockwise){if(!this.ez){throw "The method rotateDocument requires the viewer to be in a 'ViewerReady' state.";}if(yU(this.getPageNumber()-1,this)===false){this.bU.dC(this.getPageNumber()-1);}var iz=degreesClockwise%360,V=this;if(iz!==0){var xf=[90,180,270,-90,-180,-270];if(Array.prototype.indexOf){if(!iz||xf.indexOf(iz)=== -1){throw new RangeError("The value of degreesClockwise ("+degreesClockwise+") is not valid.");}}else{if(!iz||IPCC.Web.jQ(xf,iz)=== -1){throw new RangeError("The value of degreesClockwise ("+degreesClockwise+") is not valid.");}}this.bU.aco(iz);}setTimeout(function(){V.aB.trigger("DocumentRotated",{degreesClockwise:iz});},0);return this;};SingleSessionViewerControl.prototype.getScaleFactor=function(){if(!this.uU){throw "The getScaleFactor method cannot be called before the initial PageOpening event.";}return this.bU.get_scaleFactor();};SingleSessionViewerControl.prototype.setScaleFactor=function(scaleFactor){if(!this.uU){throw "The setScaleFactor method cannot be called before the initial PageOpening event.";}if(isNaN(+scaleFactor)||(+scaleFactor<this.getMinScaleFactor())||(+scaleFactor>this.getMaxScaleFactor())){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('scaleFactor',scaleFactor,'The value must be a number between the values returned by the getMinScaleFactor and getMaxScaleFactor methods.');}this.bU.set_scaleFactor(+scaleFactor);return this;};SingleSessionViewerControl.prototype.getMinScaleFactor=function(){if(!this.uU){throw "The getMinScaleFactor method cannot be called before the initial PageOpening event.";}return this.bU.getMinMaxZoom().minFactor;};SingleSessionViewerControl.prototype.getMaxScaleFactor=function(){if(!this.uU){throw "The getMaxScaleFactor method cannot be called before the initial PageOpening event.";}return this.bU.getMinMaxZoom().maxFactor;};SingleSessionViewerControl.prototype.zoomIn=function(zoomFactor){if(!this.uU){throw "The zoomIn method cannot be called before the initial PageOpening event.";}if(isNaN(+zoomFactor)||(+zoomFactor<1.01)||(+zoomFactor>20)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('zoomFactor',zoomFactor,'The value must be a number between 1.01 and 20 inclusive.');}if(this.bU){this.bU.zoomIn(+zoomFactor);}return this;};SingleSessionViewerControl.prototype.zoomOut=function(zoomFactor){if(!this.uU){throw "The zoomOut method cannot be called before the initial PageOpening event.";}if(isNaN(+zoomFactor)||(+zoomFactor<1.01)||(+zoomFactor>20)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('zoomFactor',zoomFactor,'The value must be a number between 1.01 and 20 inclusive.');}if(this.bU){this.bU.zoomOut(+zoomFactor);}return this;};SingleSessionViewerControl.prototype.getViewMode=function(){var oj;if(this.bU&&this.bU.get_viewMode){oj=this.bU.get_viewMode();}else{oj=this.aX.viewMode;}if(oj===IPCC.ViewMode.EqualWidthPages){return PCCViewer.ViewMode.EqualWidthPages;}else if(oj===IPCC.ViewMode.EqualFitPages){return PCCViewer.ViewMode.EqualFitPages;}else if(oj===IPCC.ViewMode.SinglePage){return PCCViewer.ViewMode.SinglePage;}else{return PCCViewer.ViewMode.Document;}};SingleSessionViewerControl.prototype.setViewMode=function(viewMode){var oj;switch(viewMode){case PCCViewer.ViewMode.Document:oj=IPCC.ViewMode.Document;break;case PCCViewer.ViewMode.EqualWidthPages:oj=IPCC.ViewMode.EqualWidthPages;break;case PCCViewer.ViewMode.EqualFitPages:oj=IPCC.ViewMode.EqualFitPages;break;case PCCViewer.ViewMode.SinglePage:oj=IPCC.ViewMode.SinglePage;break;default:throw new RangeError("The value of viewMode is not a supported value.");}if(this.bU&&this.bU.set_viewMode){var JW=this.bU.get_viewMode();if(JW!==oj){if(JW===IPCC.ViewMode.SinglePage){throw new Error("The view mode may not be changed from SinglePage to another view mode after initializing the viewer.");}else if(oj===IPCC.ViewMode.SinglePage){throw new Error("The view mode may not be changed to SinglePage after initializing the viewer. Please use the viewMode viewer parameter instead.");}this.bU.set_viewMode(oj);}}else{this.aX.viewMode=oj;}return this;};SingleSessionViewerControl.prototype.getPageLayout=function(){var yr;if(this.bU&&this.bU.get_pageLayout){yr=this.bU.get_pageLayout();}else{yr=this.aX.pageLayout;}if(yr===IPCC.PageLayout.HorizontalScrollDirection){return PCCViewer.PageLayout.Horizontal;}else{return PCCViewer.PageLayout.Vertical;}};SingleSessionViewerControl.prototype.setPageLayout=function(pageLayout){var yr;if(this.aX.viewMode!==IPCC.ViewMode.SinglePage){switch(pageLayout){case PCCViewer.PageLayout.Vertical:yr=IPCC.PageLayout.VerticalScrollDirection;break;case PCCViewer.PageLayout.Horizontal:if(this.bU&&this.bU.closeCommentsPanel){this.bU.closeCommentsPanel();var V=this;setTimeout(function(){V.aB.trigger("CommentsPanelToggled",{isOpen:false});},10);}yr=IPCC.PageLayout.HorizontalScrollDirection;break;default:throw new RangeError("The value of pageLayout is not a supported value.");}}if(this.bU&&this.bU.set_pageLayout){this.bU.set_pageLayout(yr);}else{this.aX.pageLayout=yr;}return this;};SingleSessionViewerControl.prototype.getAtMaxScale=function(){if(!this.uU){throw "The getAtMaxScale method cannot be called before the initial PageOpening event.";}return this.bU.getMinMaxZoom().atMax;};SingleSessionViewerControl.prototype.getAtMinScale=function(){if(!this.uU){throw "The getAtMinScale method cannot be called before the initial PageOpening event.";}return this.bU.getMinMaxZoom().atMin;};SingleSessionViewerControl.prototype.fitContent=function(fitType){if(!this.uU){throw "The fitContent method cannot be called before the initial PageOpening event.";}var En;switch(fitType){case PCCViewer.FitType.FullWidth:En=IPCC.FitType.FitToWidth;break;case PCCViewer.FitType.ShrinkToWidth:En=IPCC.FitType.ShrinkToWidth;break;case PCCViewer.FitType.ActualSize:if(this.getViewMode()===PCCViewer.ViewMode.EqualWidthPages||this.getViewMode()===PCCViewer.ViewMode.EqualFitPages){throw new Error("Fitting content actual size is not supported when in EqualFitPages view mode.");}En=IPCC.FitType.ActualSize;break;case PCCViewer.FitType.FullHeight:En=IPCC.FitType.FitToHeight;break;case PCCViewer.FitType.FullPage:En=IPCC.FitType.BestFit;break;default:throw new RangeError("The value of fitType is not a supported value.");}this.sv.then(function(sD){sD.fitPages(En);});return this;};SingleSessionViewerControl.prototype.getPageRotation=function(pageNumber){if(!this.ez){throw new Error("The method getPageRotation requires the viewer to be in a 'ViewerReady' state.");}var aR;if(arguments.length>0){if(typeof(pageNumber)==='number'){aR=pageNumber;}else{if(isNaN(+pageNumber)){throw new Error("The parameter pageNumber is not a number.");}else{aR=Number(pageNumber);}}if(parseInt(aR,10)!==aR){throw new Error("The 'pageNumber' value "+aR+" is not an integer page number.");}if(aR<1||aR>this.getPageCount()|| !isFinite(aR)){throw new Error("The parameter pageNumber is out of range.");}return this.bU.UH(aR-1);}else{return this.bU.UH();}};SingleSessionViewerControl.prototype.search=function(dH){var aX=this.aX;var aDZ=aX.searchMethodType.toLowerCase();var aqS=aX.searchMethodPageCountThreshold;var V=this;var WA;var hY;var Gm=new PCCViewer.SearchRequest(true);if(Object.defineProperties){Object.defineProperties(Gm,{"searchQuery":{enumerable:true,get:function(){return hY.getSearchQuery();}},"results":{enumerable:true,get:function(){return hY.getResults();}},"isComplete":{enumerable:true,get:function(){return hY.getIsComplete();}},"errorCode":{enumerable:true,get:function(){return hY.getErrorCode();}},"errorMessage":{enumerable:true,get:function(){return hY.getErrorMessage();}}});}function IO(aS){return function(){Gm.trigger.apply(Gm,[aS].concat([].slice.call(arguments)));};};var acD=IO(PCCViewer.EventType.SearchCompleted);var acT=IO(PCCViewer.EventType.SearchCancelled);var acY=IO(PCCViewer.EventType.SearchResultsAvailable);var acu=IO(PCCViewer.EventType.PartialSearchResultsAvailable);var adK=function(av){var fp=WA.getErrorCode();if(fp==='ServerSearchUnavailable'){V.acw=true;V.zg=false;aBZ();hY=V.clientSearch(dH);agW();}else{IO(PCCViewer.EventType.SearchFailed).apply(null,arguments);}};var agW=function(){hY.on(PCCViewer.EventType.SearchCompleted,acD);hY.on(PCCViewer.EventType.SearchFailed,adK);hY.on(PCCViewer.EventType.SearchCancelled,acT);hY.on(PCCViewer.EventType.SearchResultsAvailable,acY);hY.on(PCCViewer.EventType.PartialSearchResultsAvailable,acu);};var aBZ=function(){hY.off(PCCViewer.EventType.SearchCompleted,acD);hY.off(PCCViewer.EventType.SearchFailed,adK);hY.off(PCCViewer.EventType.SearchCancelled,acT);hY.off(PCCViewer.EventType.SearchResultsAvailable,acY);hY.off(PCCViewer.EventType.PartialSearchResultsAvailable,acu);};var Ds=function(){if(V.acw===false){WA=V.serverSearch(dH);hY=WA;agW();IPCC.T.forEach(['getSearchQuery','getResults','getIsComplete','getErrorCode','getErrorMessage','cancel','getPagesWithoutText'],function(aS){Gm[aS]=function(){return hY[aS].apply(hY,arguments);};});return Gm;}else{return V.clientSearch(dH);}};switch(aDZ){case('auto'):if(aqS>=this.fC){return this.clientSearch(dH);}else{return Ds();}break;case('client'):return this.clientSearch(dH);case('server'):return Ds();default:throw new Error("The value of 'options.searchMethodType' should be 'auto', 'server', or 'client'.");}};SingleSessionViewerControl.prototype.acZ=function(dH,aCp){var V=this;var cD=new PCCViewer._Search();this.bN=cD.axY();PCCViewer.SearchTask.prototype.afp(dH);if(aCp===true){if(V.yp!==true){V.sv.then(function(sD){var HD=function(){V.aB.off('PageCountReady',HD);V.clientSearch(dH);};V.aB.on('PageCountReady',HD);return V.bN;});}if(!this.bf.ayy()){this.bf.Sl(0,this.bf.fC-1,this.bf.fC);}}this.xy=null;this.Fv={};this.bU.clearAllSelectedText();return cD;};SingleSessionViewerControl.prototype.air=function(){var aj=this;this.bN.on('PartialSearchResultsAvailable',function(cL){if(aj.qD){return;}var Hk=[];var Mg={};Hk=cL.partialSearchResults;var am=Hk[0];if(aj.Fv[am.getPageNumber()]!==undefined){Mg=aj.Fv[am.getPageNumber()];}else{Mg.aP=am.getId();}am=Hk[Hk.length-1];Mg.cc=am.getId();aj.Fv[am.getPageNumber()]=Mg;function Eq(bI){if(aj.qD){return;}aj.ace(bI.get_pageNumber(),Hk);};var dr=aj.bU.get_displayedPages();for(var H=0;H<dr.get_length();H++){var bI=dr.getPage(H);if(bI.get_pageNumber()+1===am.getPageNumber()){aj.requestPageText(bI.get_pageNumber()+1).then(Eq.bind(null,bI));}}});this.bN.on('SearchCompleted',function(cL){aj.zg=false;});this.bN.on('SearchCancelled',function(cL){aj.zg=false;});this.aB.trigger('SearchPerformed',{searchRequest:this.bN});};SingleSessionViewerControl.prototype.clientSearch=function(searchQuery){var aj=this;var cD=aj.acZ(searchQuery,true);searchQuery=cD.Wz(searchQuery);if(this.zg===false){aj.bU.set_retainPageText(true);this.bN=cD.wk(searchQuery,this.bf);this.zg=true;}else{throw new Error("You cannot run multiple searches concurrently. Retry after the current search is completed.");}aj.air();return this.bN;};SingleSessionViewerControl.prototype.serverSearch=function(searchQuery){var aj=this;var cD=aj.acZ(searchQuery,false);searchQuery=cD.Wz(searchQuery);if(this.zg===false){this.bN=cD.Ds(searchQuery,this.bf);this.zg=true;}else{throw new Error("You cannot run multiple searches concurrently. Retry after the current search is completed.");}aj.air();return this.bN;};SingleSessionViewerControl.prototype.getSearchRequest=function(){return this.bN;};SingleSessionViewerControl.prototype.clearSearch=function(){if(!this.ez){throw "The clearSearch method requires the viewer to be in a 'ViewerReady' state.";}var V=this;if(this.getSelectedSearchResult()){this.xy=null;setTimeout(function(){V.aB.trigger(PCCViewer.EventType.SearchResultSelectionChanged,{});},0);}this.bU.clearAllSelectedText();this.bN=null;setTimeout(function(){V.aB.trigger(PCCViewer.EventType.SearchCleared,{});},0);return this;};SingleSessionViewerControl.prototype.validateSearch=function(dH){var fd={errorsExist:false};var searchTermObj,ajK,H,ag,abn,Lm,NI;if(typeof dH!=='object'&&typeof dH!=='string'){fd.errorsExist=true;fd.summaryMsg="Search query must be either an object or string.";return fd;}if(typeof dH==='string'&&dH.length<0){fd.errorsExist=true;fd.summaryMsg="Search term must contain at least 3 characters.";return fd;}else if(typeof dH==='string'){return fd;}if(!dH.hasOwnProperty('searchTerms')){fd.errorsExist=true;fd.summaryMsg="Search options must have a 'searchTerms' key.";return fd;}if(Object.prototype.toString.call(dH.searchTerms)!=='[object Array]'){fd.errorsExist=true;fd.summaryMsg="Search terms value must be an array.";return fd;}if(!dH.searchTerms.length){fd.errorsExist=true;fd.summaryMsg="Search terms array must contain at least one value.";return fd;}fd.searchTerms=[];IPCC.T.forEach(dH.searchTerms,function(searchTermObj){var Ij=anf(searchTermObj);if(Ij.errorsExist){fd.errorsExist=true;}fd.searchTerms=fd.searchTerms.concat(Ij.searchTerms);});return fd;};function anf(lh){var fd={errorsExist:false,searchTerms:[]};var aBE=lh.type?IPCC.T.trim(lh.type).toLowerCase():undefined;if(aBE==='proximity'){if(Object.prototype.toString.call(lh.terms)!=='[object Array]'){fd.searchTerms.push({isValid:false,message:"Proximity search terms property must be an array"});fd.errorsExist=true;return fd;}if(lh.terms.length<2){fd.searchTerms.push({isValid:false,message:"Proximity search terms array must contain at least two values"});fd.errorsExist=true;return fd;}if(!lh.distance){fd.searchTerms.push({isValid:false,message:"Proximity search term must have a distance specified"});fd.errorsExist=true;return fd;}IPCC.T.forEach(lh.terms,function(aFY){var Ij=anf(aFY);if(Ij.errorsExist){fd.errorsExist=true;}fd.searchTerms=fd.searchTerms.concat(Ij.searchTerms);});return fd;}var abn,NI;var Lm=(typeof lh.matchingOptions!=='undefined'&&lh.matchingOptions.hasOwnProperty('matchCase'))?lh.matchingOptions.matchCase:false;if(typeof lh.searchTerm==='undefined'||typeof lh.searchTerm!=='string'||(lh.searchTermIsRegex===true&& !aAk(lh.searchTerm,Lm))){fd.errorsExist=true;fd.searchTerms.push({isValid:false,message:"Search term must be a string containing either plain text or a valid regular expression."});return fd;}abn=(typeof lh.matchingOptions!=='undefined'&&lh.matchingOptions.hasOwnProperty('exactPhrase'))?lh.matchingOptions.exactPhrase:false;if(abn){if(lh.searchTerm.length<0){fd.errorsExist=true;fd.searchTerms.push({isValid:false,message:"Search term must contain at least 3 characters."});return fd;}}else{var ajK=lh.searchTerm.split(' ');IPCC.T.forEach(ajK,function(NI){if(NI.length>0&&NI.length<0){fd.errorsExist=true;fd.searchTerms.push({isValid:false,message:"Search term must contain at least 3 characters."});}});}if(!fd.searchTerms.length){fd.searchTerms.push({isValid:true,message:null});}return fd;};var aAk=function(aaT,Lm){var auj,SY,Mr;if(Lm){SY='gm';}else{SY='igm';}if(!aaT&&aaT!==null){Mr=false;}else{try{auj=new RegExp(aaT,SY);Mr=true;}catch(err){Mr=false;}}return Mr;};SingleSessionViewerControl.prototype.requestRevisions=function(){this.iH=new PCCViewer.FZ({imageHandlerUrl:this.aX.imageHandlerUrl,documentID:this.aX.documentID});return this.iH.aBs();};SingleSessionViewerControl.prototype.gy=function(Uu){var Ay=false,dr=this.bU.get_displayedPages();for(var H=0;H<dr.get_length();H++){var bI=dr.getPage(H);if(bI.get_pageNumber()===Uu){Ay=true;}}return Ay;};SingleSessionViewerControl.prototype.getDownloadDocumentURL=function(){var bE;if(!(/^[\x00-\x7F]*$/.test(this.bf))){bE=this.aX.imageHandlerUrl+'/SaveDocument/q?DocumentID=e'+this.aX.documentID+'/SourceFile';}else{bE=this.aX.imageHandlerUrl+'/SaveDocument/q?DocumentID=u'+encodeURIComponent(this.aX.documentID);}return bE;};SingleSessionViewerControl.prototype.requestDocumentHyperlinks=function(pageNumber){var aR;var bB=PCCViewer.Deferred();var dk=bB.getPromise();var dn=this;try{if(typeof(pageNumber)==='number'){aR=pageNumber;}else{if(isNaN(+pageNumber)){throw "The parameter pageNumber is not a number.";}else{aR=parseInt(pageNumber,10);}}if(aR<1||aR>this.getPageCount()|| !isFinite(pageNumber)){throw "The specified page is out of range.";}var WH=this.Gx[aR-1];if(!WH){WH=this.Gx[aR-1]=new PCCViewer.Deferred();this.sv.then(function(){var bI=dn.ds.getPage(aR-1);bI.Az();});}bB.resolve(WH.getPromise());}catch(e){bB.reject(new PCCViewer.Error('Error',e));}return dk;};SingleSessionViewerControl.prototype.avE=function(azb){var i,j,xu;for(j=0;j<this.Gj.length;j++){xu=this.Gj[j];if(xu){for(i=0;i<xu.length;i++){if(xu[i].CK.LH()===azb){return xu[i];}}}}return null;};SingleSessionViewerControl.prototype.print=Print.print;SingleSessionViewerControl.prototype.validatePrintRange=Print.validatePrintRange;SingleSessionViewerControl.prototype.canPrintMarks=Print.canPrintMarks;SingleSessionViewerControl.prototype.deserializeMarks=function deserializeMarks(values){if(this.ez===false){throw new Error("The method addMark is not available until 'ViewerReady' state is reached.");}var V=this;var fC=V.getPageCount();var ed;if(typeof values==='string'){try{ed=JSON.parse(values);}catch(e){throw new Error('JSON parse error: '+e.message);}}else{ed=values;}if(ed.constructor!==Array){ed=[ed];}function PD(ew,bd){throw new Error('Cannot serialize mark (at index '+bd+') because of '+ew);};var Ya=IPCC.T.map(V.getAllMarks(),function(K){return K.getUid();});IPCC.T.forEach(ed,function validateObject(aE,bd){if(!aE.pageNumber||isNaN(+aE.pageNumber)||aE.pageNumber<1||aE.pageNumber>fC){PD('unknown page number '+aE.pageNumber,bd);}if(!PCCViewer.Mark.Type[aE.type]){PD('unknown type '+aE.type,bd);}if(aE.type==='RectangleRedaction'||aE.type==='TextSelectionRedaction'){if(!V.aX.enableMultipleRedactionReasons&&aE.hasOwnProperty('reasons')){PD('Loading markup with multiple redaction reasons is not supported when enableMultipleRedactionReasons is set to false',bd);}}if(IPCC.T.contains(Ya,aE.uid)){PD('uid '+aE.uid+' is being duplicated or already exists',bd);}else if(aE.uid!==undefined){Ya.push(aE.uid);}});if(ed.length===0){return[];}var cR=V.bf.get_pages();var aup=[];cR.lx(function(bI){aup.push(V.bU.gJ(bI));});var ad=IPCC.T.reduce(ed,function(am,aE){var bI=cR.jj(aE.pageNumber-1);var Ws=bI.get_pageWidth();var aft=bI.get_pageHeight();var gO=aE.pageData;if(!gO&&(!Ws|| !aft)){var aAB=IPCC.T.find(aE.lineGroups,function(adp){return(adp.pageNumber&&adp.pageNumber===aE.pageNumber);});gO=aAB.pageData;}var be=Ws||gO.width;var as=aft||gO.height;var K=cX[aE.type].call(V,aE,{be:be,as:as});if(aE.uid===undefined){Ya.push(K.getUid());}if(!Ws&&aE.maintainMarkScaling!==true){bI.Cw=true;bI.aga(be);bI.adZ(as);}if(!K.L.has_unsafe_href()){am.push(K);}else{V.deleteMarks(K);}return am;},[]);return ad;};SingleSessionViewerControl.prototype.serializeMarks=function serializeMarks(marks){var bB=PCCViewer.Deferred();var dk=bB.getPromise();var V=this,ad,aze=false;function alp(ew){setTimeout(function(){bB.reject(ew);},0);};if(Object.prototype.toString.call(marks)==='[object Array]'){ad=marks;}else if(marks){ad=[marks];aze=true;}else{alp(new PCCViewer.Error('InvalidArgument','`marks` is not defined or falsy.'));return dk;}var RY;ad=IPCC.T.filter(ad,function(kc,bd){var Hq=kc instanceof PCCViewer.Mark&&kc===V.getMarkById(kc.getId())&& ! !eb[kc.getType()];if(!Hq&& !RY){RY=bd;}return Hq;});if(RY){alp(new PCCViewer.Error('InvalidArgument','Cannot serialize object at index '+RY+' because it is not a valid mark or a mark known to ViewerControl'));return dk;}var Zr=V.bf.get_pages();var cR=IPCC.T.reduce(ad,function(fi,kc){var aR=kc.getPageNumber();if(fi[aR]){return fi;}fi[aR]=Zr.getPage(aR-1);return fi;},{});function asj(K,bI,avM){return function(mD){eb[K.getType()]({mark:K,page:bI,vc:V},function(bW,dg){if(!bW){avM(dg);mD();}else{bB.reject(bW);}});};};var sp=[];var auq=IPCC.T.map(ad,function(kc,bd){return asj(kc,cR[kc.getPageNumber()],function(dg){sp[bd]=dg;});});IPCC.T.UO(auq,function(){bB.resolve(sp);});return dk;};SingleSessionViewerControl.prototype.setRedactionViewMode=function(redactionViewMode){var NA,Zi;switch(redactionViewMode){case PCCViewer.RedactionViewMode.Draft:NA=true;Zi=PCCViewer.RedactionViewMode.Draft;break;case PCCViewer.RedactionViewMode.Normal:NA=false;Zi=PCCViewer.RedactionViewMode.Normal;break;default:throw new RangeError("The value of RedactionViewMode is not a supported value.");}if(this.bU&&this.bU.set_redactionDraftMode){var arT=this.bU.get_redactionDraftMode();if(arT!==NA){this.bU.set_redactionDraftMode(NA);}}else{this.aX.redactionViewMode=Zi;}return this;};SingleSessionViewerControl.prototype.getRedactionViewMode=function(){var akx;if(this.bU&&this.bU.get_redactionDraftMode){akx=this.bU.get_redactionDraftMode();if(akx===true){return PCCViewer.RedactionViewMode.Draft;}else{return PCCViewer.RedactionViewMode.Normal;}}else{return this.aX.redactionViewMode;}};SingleSessionViewerControl.prototype.convertToRedaction=function(searchResult){var V=this;var gN=searchResult;if(this.ez===false){throw "The convertToRedaction method can not be used until 'ViewerReady' state is reached.";}return this.addMarkFromSearchResult(searchResult,PCCViewer.Mark.Type.TextSelectionRedaction);};var aHM=function(bJ,gm,lX,eg,oR,alf){var eG=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextSelectionRedaction);eG.aD=oR;eG.bx=alf;var K=null;var kp={hq:Number.MAX_VALUE,iJ:0,_top:Number.MAX_VALUE,ib:0};for(var ag=lX;ag<eg;ag++){var eU=gm.kn(ag);if(K){var vE=K.get_rectangle();if(Math.abs(eU.bC.y-vE.y)<1&&Math.abs(eU.bC.height-vE.height)<1&&eU.bC.x+eU.bC.width>=vE.x+vE.width){K.set_rectangle(new IPCC.Web.UI.Rectangle(vE.x,vE.y,eU.bC.x+eU.bC.width-vE.x,vE.height));}else{aca(bJ,eG,K,kp);K=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.RectangleRedaction);K.set_rectangle(eU.bC);K.jP(true);K.set_fillColor('#000000');K.set_text(eG.aO);K.set_lineWidth(0);K.aD=oR;}}else{K=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.RectangleRedaction);K.set_rectangle(eU.bC);K.jP(true);K.set_fillColor('#000000');K.set_text(eG.aO);K.set_lineWidth(0);K.aD=oR;}K.bx=alf;}if(K!==null){aca(bJ,eG,K,kp);}eG.set_rectangle(new IPCC.Web.UI.Rectangle(kp.hq,kp._top,kp.iJ-kp.hq,kp.ib-kp._top));return eG;};var aca=function(bJ,eG,K,kp){var C=K.get_rectangle();if(C.x<kp.hq){kp.hq=C.x;}if(C.y<kp._top){kp._top=C.y;}if(C.x+C.width>kp.iJ){kp.iJ=C.x+C.width;}if(C.y+C.height>kp.ib){kp.ib=C.y+C.height;}bJ.addMark(K);eG.by.push(K);};SingleSessionViewerControl.prototype.convertToHighlight=function(searchResult){var gN=searchResult;if(this.ez===false){throw "The convertToHighlight method can not be used until 'ViewerReady' state is reached.";}return this.addMarkFromSearchResult(searchResult,PCCViewer.Mark.Type.HighlightAnnotation);};var aIX=function(bv,am,ayD,oR){var K=new IPCC.Web.UI.Mark(bv);if(bv===IPCC.Web.UI.MarkType.HighlightText){K.bZ=am.getText();}K.aP=ayD;K.set_rectangle({x:0,y:0,width:0,height:0});K.cq=am.getText().length;K.aGi=am.getStartIndexInPage()+am.getText().length;K.dv=127;K.cP=am.getHighlightColor();K.iq='y';K.aD=oR;return K;};SingleSessionViewerControl.prototype.ace=function(bx,fk){var am={};for(var ag=0;ag<fk.length;ag++){am=fk[ag];this.bU.selectText(am.getPageNumber()-1,am.getStartIndexInPage(),am.getText().length,am.getHighlightColor());}this.bU.display(am.getPageNumber()-1);this.Kb[am.getPageNumber()]='search';};SingleSessionViewerControl.prototype.WI=function(bx,searchResult){var am={};if(this.bN===null||typeof this.bN.getResults!=='function'){return;}var fk=this.bN.getResults();this.bU.clearSelectedText(bx-1);var WM=this.Fv[bx];if(!WM){return;}for(var ag=WM.aP;ag<WM.cc+1;ag++){am=fk[ag];if(am.getPageNumber()===bx){this.bU.selectText(am.getPageNumber()-1,am.getStartIndexInPage(),am.getText().length,am.getHighlightColor());if(searchResult===am.getId()){this.bU.selectText(am.getPageNumber()-1,am.getStartIndexInPage(),am.getText().length,am.getHighlightColor());}}}this.bU.display(am.getPageNumber()-1);this.Kb[am.getPageNumber()]='search';};SingleSessionViewerControl.prototype.setSelectedSearchResult=function(searchResult,scrollTo){if(!this.ez){throw "The setSelectedSearchResult method requires the viewer to be in a 'ViewerReady' state.";}if(searchResult===null){this.Jf= -1;}else{if(!(searchResult instanceof PCCViewer.SearchResult)){throw "The parameter searchResult is not an instance of PCCViewer.SearchResult.";}if(!this.bN){throw "There is no current SearchRequest object available.";}var aaJ=this.bN.getResults();if(aaJ[searchResult.getId()].mL!==searchResult.mL){throw "The parameter searchResult is not current. There is a newer version of search result available.";}aaJ=null;this.Jf=searchResult.getId();if(scrollTo){var aQ=searchResult.getBoundingRectangle();var hk=new IPCC.Web.UI.Rectangle(aQ.x,aQ.y,aQ.width,aQ.height);if(this.bU.scrollRegionIntoView(searchResult.getPageNumber()-1,hk)===false){this.kb=function(){V.bU.scrollRegionIntoView(searchResult.getPageNumber()-1,hk);};this.setPageNumber(searchResult.getPageNumber());}else{this.kb=null;}}}var V=this;var aDl=searchResult!==null?searchResult.getPageNumber(): -1;if(this.xy&&this.xy.getPageNumber()!==aDl){V.requestPageText(V.xy.getPageNumber()).then(function Eq(){V.WI(V.xy.getPageNumber(),V.Jf);});}if(searchResult){V.requestPageText(searchResult.getPageNumber()).then(function Eq(){V.WI(searchResult.getPageNumber(),V.Jf);});}this.xy=searchResult;setTimeout(function(){V.aB.trigger(PCCViewer.EventType.SearchResultSelectionChanged,{});},0);return this;};SingleSessionViewerControl.prototype.clearSelectedSearchResult=function(){if(!this.ez){throw "The clearSelectedSearchResult method requires the viewer to be in a 'ViewerReady' state.";}this.setSelectedSearchResult(null);return this;};SingleSessionViewerControl.prototype.getSelectedSearchResult=function(){return this.xy;};SingleSessionViewerControl.prototype.requestPageText=function(pageNumber){var aR;var bB=PCCViewer.Deferred();var dk=bB.getPromise();var V=this;try{if(typeof(pageNumber)==='number'){aR=pageNumber;}else{if(isNaN(+pageNumber)){throw "The parameter pageNumber is not a number.";}else{aR=parseInt(pageNumber,10);}}if(aR<1||aR>this.getPageCount()|| !isFinite(pageNumber)){throw "The specified page is out of range.";}this.sv.then(function(sD){var bI=V.ds.getPage(aR-1);var fs=bI.cd();fs.aig(true);if(fs&&fs.Cb()){if(fs.oY()===true){var aO=bI.cd().Ei();bB.resolve(aO);}else{bB.resolve("");}}else{var GI=function(bP,cI){if(cI.containsText===true){var aO=fs.Ei();bB.resolve(aO);}else{bB.resolve("");}bI.GB(GI);bI.GD(FH);};var FH=function(bP,cI){if(cI.exception&&cI.exception.message){bB.reject(new PCCViewer.Error("TextExtractionFailed",cI.exception.message));}else{bB.reject(new PCCViewer.Error("TextExtractionFailed","Text extraction failed."));}bI.GB(GI);bI.GD(FH);};bI.xG(GI);bI.xh(FH);bI.Az();}});}catch(e){bB.reject(new PCCViewer.Error("Error",e));}return dk;};SingleSessionViewerControl.prototype.disposePageText=function(pageNumber){var aR;var V=this;if(!this.ez){throw new Error("The disposePageText method requires the viewer to be in a 'ViewerReady' state.");}if(V.bU.get_retainPageText()===true){return this;}if(typeof(pageNumber)==='number'){aR=pageNumber;}else{if(isNaN(+pageNumber)){throw new Error("The parameter pageNumber is not a number.");}else{aR=parseInt(pageNumber,10);}}if(aR<1||aR>this.getPageCount()|| !isFinite(pageNumber)){throw new Error("The specified page is out of range.");}var dr=V.bU.get_displayedPages();for(var H=0;H<dr.get_length();H++){var adi=dr.getPage(H);if(adi.get_pageNumber()===aR-1){adi.cd().aig(false);return this;}}var bI=V.ds.getPage(aR-1);bI.afe();return this;};SingleSessionViewerControl.prototype.isPageTextReady=function(pageNumber){IPCC.aA.mt(pageNumber,"pageNumber",1,this.getPageCount());var bI;return(this.bU&&this.ds&&(bI=this.ds.getPage(pageNumber-1))&&bI.cd()&&bI.cd().Cb())===true;};SingleSessionViewerControl.prototype.documentHasText=function(){return this.azY;};SingleSessionViewerControl.prototype.requestPageAttributes=function(pageNumber){var aR;var bB=PCCViewer.Deferred();var dk=bB.getPromise();var V=this;try{if(typeof(pageNumber)==='number'){aR=pageNumber;}else{if(isNaN(+pageNumber)){throw "The parameter pageNumber is not a number.";}else{aR=parseInt(pageNumber,10);}}if(aR<1||aR>this.getPageCount()|| !isFinite(pageNumber)){throw "The specified page is out of range.";}this.sv.then(function(sD){var bI=V.ds.getPage(aR-1);if(bI.kS()>0||bI.hX()>0){bB.resolve({'width':bI.kS(),'height':bI.hX()});}else{var zn=function(aF,bj){bB.resolve({'width':aF,'height':bj});};var zi=function(errorMessage){bB.reject(new PCCViewer.Error("RequestPageAttributesFailed",errorMessage));};sD.requestPageAttributes(bI,zn,zi);}});}catch(e){bB.reject(new PCCViewer.Error("Error",e));}return dk;};SingleSessionViewerControl.prototype.destroy=function(){if(!this.qD){this.Gj=undefined;this.Gx=undefined;this.AD=undefined;this.lP=undefined;this.iH=undefined;this.iY=undefined;if(this.bU&&typeof this.bU.dispose==="function"){this.bU.dispose();}this.bE="";this.fC=0;delete this.bU;this.bf=undefined;this.Pe=0;this.ds=undefined;this.aaK=false;if(this.eZ){IPCC.T.CJ(this.eZ);this.eZ=this.cU=undefined;}this.mZ=false;this.yp=false;this.EI=false;this.bU=undefined;this.OM=undefined;this.WN=undefined;this.sv=undefined;PCCViewer.MouseTools.rF=undefined;this.mw=undefined;this.Gj=undefined;this.JM=undefined;for(var Ht in this.dz){if(this.dz.hasOwnProperty(Ht)){this.dz[Ht].dg=undefined;this.dz[Ht].cr=undefined;this.dz[Ht].L=undefined;this.dz[Ht]=undefined;}}this.dz=undefined;this.ez=false;this.qD=true;this.aB={on:function Gi(){},off:function Gi(){},trigger:function Gi(){}};this.hW=undefined;this.hW={};}};SingleSessionViewerControl.prototype.aEd=function(){if(this.eZ){this.bU.preserveScrollPosition();this.OM=this.eZ.childNodes[0];IPCC.T.CJ(this.eZ);}};SingleSessionViewerControl.prototype.aCo=function(){if(this.OM){IPCC.T.CJ(this.eZ);this.eZ.appendChild(this.OM);this.OM=undefined;this.bU.restoreScrollPosition();}};SingleSessionViewerControl.prototype.ase=function(){this.aB.stop();};SingleSessionViewerControl.prototype.aAY=function(){this.aB.resume();};SingleSessionViewerControl.prototype.axu=function(interceptor){this.aB.intercept("ViewerReady",interceptor);};SingleSessionViewerControl.prototype.getMarkById=function(markId){var V=this;if(!isNaN(markId)){markId=parseInt(markId,10);}else{throw "The parameter, markId, contains a value that is not a number.";}if(V.dz[markId]){return V.dz[markId];}else{return null;}};SingleSessionViewerControl.prototype.getMarksByType=function(markType){var YW=[];if(typeof markType!=="string"){throw "The parameter, markType, is not a String.";}alI(markType);if(!this.bU){return YW;}var H=0;var di=this.ds.get_length();var V=this;function apR(L){var K=V.dz[L.get_markID()];if(K&&K.getType().toLowerCase()===markType.toLowerCase()){YW.push(K);}};for(H=0;H<di;H++){var bJ=this.bU.gJ(this.ds.getPage(H));if(bJ){bJ.forEachMark(apR);}}return YW;};SingleSessionViewerControl.prototype.getAllMarks=function(){var Cj=[];if(!this.bU){return Cj;}var di=this.ds.get_length();var V=this;var H=0;var K;function Pw(L){var K=V.dz[L.get_markID()];if(typeof K!=='undefined'){Cj.push(K);}};for(H=0;H<di;H++){var bJ=this.bU.gJ(this.ds.getPage(H));if(bJ){bJ.forEachMark(Pw);}}return Cj;};function alI(markType){var ec;switch(markType.toLowerCase()){case "lineannotation":ec=IPCC.Web.UI.MarkType.Line;break;case "rectangleannotation":ec=IPCC.Web.UI.MarkType.Rectangle;break;case "ellipseannotation":ec=IPCC.Web.UI.MarkType.Ellipse;break;case "textannotation":ec=IPCC.Web.UI.MarkType.Text;break;case "stampannotation":ec=IPCC.Web.UI.MarkType.Stamp;break;case "highlightannotation":ec=IPCC.Web.UI.MarkType.HighlightText;break;case "texthyperlinkannotation":ec=IPCC.Web.UI.MarkType.TextHyperlinkAnnotation;break;case "freehandannotation":ec=IPCC.Web.UI.MarkType.Freehand;break;case "rectangleredaction":ec=IPCC.Web.UI.MarkType.RectangleRedaction;break;case "transparentrectangleredaction":ec=IPCC.Web.UI.MarkType.Rectangle;break;case "textredaction":ec=IPCC.Web.UI.MarkType.Text;break;case "stampredaction":ec=IPCC.Web.UI.MarkType.Stamp;break;case "freehandsignature":ec=IPCC.Web.UI.MarkType.SignaturePath;break;case "textsignature":ec=IPCC.Web.UI.MarkType.SignatureText;break;case "textinputsignature":ec=IPCC.Web.UI.MarkType.TextLine;break;case "textareasignature":ec=IPCC.Web.UI.MarkType.TextAreaSignature;break;case "textselectionredaction":ec=IPCC.Web.UI.MarkType.TextSelectionRedaction;break;case "imagestampannotation":ec=IPCC.Web.UI.MarkType.ImageStampAnnotation;break;case "imagestampredaction":ec=IPCC.Web.UI.MarkType.ImageStampRedaction;break;case "polylineannotation":ec=IPCC.Web.UI.MarkType.Polyline;break;case "strikethroughannotation":ec=IPCC.Web.UI.MarkType.Strikethrough;break;default:throw "The parameter, markType, does not specify a valid mark type.";}return ec;};SingleSessionViewerControl.prototype.addMarkFromSearchResult=function(searchResult,markType){var V=this,gO;if(V.ez===false){throw "The method addMarkFromSearchResult is not available until 'ViewerReady' state is reached.";}if(!(searchResult instanceof PCCViewer.SearchResult)){throw new PCCViewer.Error("InvalidArgument","searchResult is not a valid instance of PCCViewer.SearchResult");}if([PCCViewer.Mark.Type.TextSelectionRedaction,PCCViewer.Mark.Type.HighlightAnnotation,PCCViewer.Mark.Type.TextHyperlinkAnnotation,PCCViewer.Mark.Type.StrikethroughAnnotation].indexOf(markType)=== -1){throw new PCCViewer.Error("InvalidArgument","The mark type must be: 'TextSelectionRedaction', 'HighlightAnnotation', 'TextHyperlinkAnnotation' or 'StrikethroughAnnotation'.");}if(searchResult.gO.width===0){var Kh=V.bf.cR.jj(0);gO={width:Kh.kS(),height:Kh.hX()};}else{gO=searchResult.gO;}var adu=IPCC.T.wU(new Date());var markInfo=[{conversation:{comments:[],data:{}},creationDateTime:adu,data:{},interactionMode:'Full',lineGroups:[{lines:searchResult.by,pageData:gO,pageNumber:searchResult.pageNumber,startIndex:searchResult.startIndexInPage,textLength:searchResult.text.length}],maintainMarkScaling:true,modificationDateTime:adu,pageNumber:searchResult.pageNumber,pageData:gO,reason:"",selectedText:searchResult.text,startIndex:searchResult.startIndexInPage,textLength:searchResult.text.length,type:markType}];var Oy=V.deserializeMarks(markInfo);return Oy[0];};SingleSessionViewerControl.prototype.addMark=function(pageNumber,markType){if(this.ez===false){throw "The method addMark is not available until 'ViewerReady' state is reached.";}var aR;if(typeof(pageNumber)==='number'){aR=pageNumber;}else{if(isNaN(+pageNumber)){throw "The parameter, pageNumber, contains a value that is not a number.";}else{aR=parseInt(pageNumber,10);}}if(aR<1||aR>this.ds.get_length()|| !isFinite(aR)){throw "The specified page is out of range.";}if(typeof markType!=="string"){throw "The parameter, markType, is not a String.";}var K=this.acd(aR,markType);return this.ajo(K);};SingleSessionViewerControl.prototype.acd=function(aR,bv,aX){var V=this;aX=aX||{};var ec=alI(bv);var L=new IPCC.Web.UI.Mark(ec);L.bx=aR-1;var MK={type:bv,igMark:L,pageNumber:aR,uid:aX.uid,viewerControl:this};if(bv.toLowerCase()==="highlightannotation"||bv.toLowerCase()==="textselectionredaction"||bv.toLowerCase()==="strikethroughannotation"||bv.toLowerCase()==="texthyperlinkannotation"){MK.ds=V.ds;MK.bU=V.bU;}if(bv.toLowerCase()==="rectangleredaction"||bv.toLowerCase()==="textselectionredaction"){MK.enableMultipleRedactionReasons=this.aX.enableMultipleRedactionReasons;}var K=new PCCViewer.Mark(MK);return K;};SingleSessionViewerControl.prototype.ajo=function(K){var V=this;if(V.afV===true){V.afV=false;}else{var Hy=V.mj;V.mj=function(sender,eventArgs){V.mj=Hy;if(V.vU){V.AD.addMarks(K);}setTimeout(function(){V.aB.trigger('MarkCreated',{mark:K,pageNumber:eventArgs.pageIndex+1,clientX:eventArgs.clientX,clientY:eventArgs.clientY});},0);};}var bJ=this.bU.gJ(this.ds.getPage(K.aR-1));bJ.addMark(K.L);V.dz[K.L.get_markID()]=K;V.nZ(K,K.aR-1);return K;};SingleSessionViewerControl.prototype.deleteMarks=function(marks){var V=this;var H=0;var K;if(!this.ez){throw "The method deleteMarks can not be used until 'ViewerReady' state is reached.";}function MH(qj){var bx=qj.getPageNumber()-1;var aD='';var bO='';var GF=bx;var bJ=V.bU.gJ(V.ds.getPage(bx));bJ.removeMark(qj.L);if(V.dz[qj.getId()]){aD=qj.L.aD;bO=qj.getType();delete V.dz[qj.getId()];}var PK=bO.toLowerCase();if((PK==='highlightannotation'||PK==='textselectionredaction'||PK==='strikethroughannotation'||PK==='texthyperlinkannotation')&&(qj.aM&&qj.aM.length)){for(var H=0;H<qj.aM.length;H++){var nk=qj.aM[H];bJ=V.bU.gJ(V.ds.getPage(nk.bx));bJ.removeMark(nk);V.nZ(nk,nk.bx);}}V.lP.forEach(function(eJ){if(eJ.hasMark(qj.getId())){eJ.removeMarks(qj);}});};if(marks instanceof Array){for(H=0;H<marks.length;H++){K=marks[H];if(!(K instanceof PCCViewer.Mark)){throw "The parameter, marks, contains an item that is not a Mark.";}if(!(V.dz[K.getId()])){throw "The parameter, marks, contains a Mark that is not on the document.";}}for(H=0;H<marks.length;H++){MH(marks[H]);V.nZ(marks[H],marks[H].getPageNumber()-1);}}else{if(marks instanceof PCCViewer.Mark){if(!(V.dz[marks.getId()])){throw "The parameter, marks, contains a Mark that is not on the document.";}MH(marks);V.nZ(marks,marks.getPageNumber()-1);}else{throw "The parameter, marks, is not an Array of Marks or a single Mark.";}}return this;};SingleSessionViewerControl.prototype.deleteAllMarks=function(){var Cj=this.getAllMarks();if(Cj.length>0){return this.deleteMarks(Cj);}return this;};SingleSessionViewerControl.prototype.hideMarks=function(marks){alU(this,marks,false,'hideMarks');return this;};SingleSessionViewerControl.prototype.showMarks=function(marks){alU(this,marks,true,'showMarks');return this;};function alU(dn,ad,yF,awd){var H=0;var K;if(!dn.ez){throw new PCCViewer.Error("InvalidArgument","The method "+awd+" can not be used until 'ViewerReady' state is reached.");}if(ad instanceof Array){for(H=0;H<ad.length;H++){K=ad[H];if(!(K instanceof PCCViewer.Mark)){throw new PCCViewer.Error("InvalidArgument","The parameter, marks, contains an item that is not a Mark.");}if(!(dn.dz[K.getId()])){throw new PCCViewer.Error("InvalidArgument","The parameter, marks, contains a Mark that is not on the document.");}}for(H=0;H<ad.length;H++){ad[H].setVisible(yF);}}else{if(ad instanceof PCCViewer.Mark){if(!(dn.dz[ad.getId()])){throw new PCCViewer.Error("InvalidArgument","The parameter, marks, contains a Mark that is not on the document.");}ad.setVisible(yF);}else{throw new PCCViewer.Error("InvalidArgument","The parameter, marks, is not an Array of Marks or a single Mark.");}}};function yU(axJ,ng){var kO=false;var dr=ng.bU.get_displayedPages();for(var H=0;H<dr.get_length();H++){var bI=dr.getPage(H);if(bI.get_pageNumber()===axJ){kO=true;break;}}return kO;};SingleSessionViewerControl.prototype.moveMarkToFront=function(mark){var bJ;var hO;if(!this.ez){throw "The method moveMarkToFront is not available until ViewerReady state is reached.";}if(mark instanceof PCCViewer.Mark){hO=mark.getPageNumber();if(mark.getPageNumber()>0){bJ=this.bU.gJ(this.ds.getPage(hO-1));}else{throw "The mark object has not been added to any page yet";}}else{throw "The parameter, mark object is not a PCCViewer.Mark object";}if(!mark.L){throw "The parameter, mark object is probably a templateMark or has not been initialized";}if(bJ){if(mark.L instanceof IPCC.Web.UI.Mark){mark.L.moveToFront();if(yU(hO-1,this)===true){var ng=this;setTimeout(function(){ng.bU.dC(hO-1);},1);}}else{throw "The mark object has not been initialized yet";}}return this;};SingleSessionViewerControl.prototype.moveMarkToBack=function(mark){var bJ;var hO;if(!this.ez){throw "The method moveMarkToBack is not available until ViewerReady state is reached.";}if(!(mark instanceof PCCViewer.Mark)){throw "The parameter, mark object is not a PCCViewer.Mark object";}hO=mark.getPageNumber();if(hO>=1){bJ=this.bU.gJ(this.ds.getPage(mark.getPageNumber()-1));}else{throw "The mark object has not been added to any page yet";}if(!mark.L){throw "The parameter, mark may be a templateMark or has not been initialized";}if(bJ){if(mark.L instanceof IPCC.Web.UI.Mark){mark.L.moveToBack();if(yU(hO-1,this)===true){var ng=this;setTimeout(function(){ng.bU.dC(hO-1);},1);}}else{throw "The mark object has not been initialized yet";}}return this;};SingleSessionViewerControl.prototype.moveMarkForward=function(mark){var bJ,hO;if(!this.ez){throw "The method moveMarkForward is not available until 'ViewerReady' state is reached.";}if(!(mark instanceof PCCViewer.Mark)){throw "The parameter, mark object is not a PCCViewer.Mark object";}hO=mark.getPageNumber();if(hO>=1){bJ=this.bU.gJ(this.ds.getPage(mark.getPageNumber()-1));}else{throw "The mark object has not been added to any page yet";}if(!mark.L){throw "The parameter, mark object is probably a templateMark or has not been initialized";}if(bJ){if(mark.L instanceof IPCC.Web.UI.Mark){mark.L.moveForward();if(yU(hO-1,this)===true){var ng=this;setTimeout(function(){ng.bU.dC(hO-1);},1);}}else{throw "The mark object has not been initialized yet";}}return this;};SingleSessionViewerControl.prototype.moveMarkBackward=function(mark){var bJ,hO;if(!this.ez){throw "The method moveMarkBackward is not available until ViewerReady state is reached.";}if(!(mark instanceof PCCViewer.Mark)){throw "The parameter, mark object is not a PCCViewer.Mark object";}hO=mark.getPageNumber();if(hO>=1){bJ=this.bU.gJ(this.ds.getPage(mark.getPageNumber()-1));}else{throw "The mark object has not been added to any page yet";}if(!mark.L){throw "The parameter, mark object is probably a templateMark or has not been initialized";}if(bJ){if(mark.L instanceof IPCC.Web.UI.Mark){mark.L.moveBackward();if(yU(hO-1,this)===true){var ng=this;setTimeout(function(){ng.bU.dC(hO-1);},1);}}else{throw "The mark object has not been initialized yet";}}return this;};SingleSessionViewerControl.prototype.getSelectedMarks=function(){var ad=[];var TW=[];if(this.ez===false){return ad;}var di=this.ds.get_length(),bJ,ft;var V=this;function aoe(RX){if(RX){var RJ=RX.get_type();if(RJ===IPCC.Web.UI.MarkType.HighlightText||RJ===IPCC.Web.UI.MarkType.TextSelectionRedaction||RJ===IPCC.Web.UI.MarkType.Strikethrough||RJ===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation){for(var jF in V.dz){if(V.dz.hasOwnProperty(jF)){ft=V.dz[jF];if(RX.aD===ft.L.aD){for(var H=0;H<TW.length;H++){if(ft.L.aD===TW[H]){return;}}TW.push(ft.L.aD);break;}}}}else{ft=V.dz[RX.get_markID()];}if(ft&&ft instanceof PCCViewer.Mark){ad.push(ft);}else{return ad;}}};for(var H=0;H<di;H++){bJ=this.bU.gJ(this.ds.getPage(H));if(bJ){bJ.get_selectedMarks().forEach(aoe,{});}}return ad;};function ady(ad,apv,ng){var ft,H;function Ta(gv){var kO=false;var dr=ng.bU.get_displayedPages();for(var H=0;H<dr.get_length();H++){var bI=dr.getPage(H);if(bI.get_pageNumber()===gv){kO=true;break;}}return kO;};if(!ad.length){return;}for(H=0;H<ad.length;H++){if(ad[H]instanceof PCCViewer.Mark){ft=ng.dz[parseInt(ad[H].getId(),10)];if(ft&&ft instanceof PCCViewer.Mark){if(ft.L&&ft.L instanceof IPCC.Web.UI.Mark){if(ft.getId()!==ft.L.get_markID().toString()){throw "The mark ID does not match the ID of the mark loaded in the viewer";}}else{throw "The mark provided may not have been added to the document pages in the viewer";}}else{throw "The parameter, marks, contains a Mark that is not on the document.";}}else{throw "The mark provided in the position : "+(H+1)+" is invalid";}}var oZ=[];var tS=false;for(H=0;H<ad.length;H++){ft=ng.dz[parseInt(ad[H].getId(),10)];tS=false;if(ft){if(ft.getId()===ft.L.get_markID().toString()){ft.L.set_selected(apv);if(Array.prototype.IndexOf){tS=(oZ.IndexOf(ft.getPageNumber())>=0);}else{tS=(IPCC.Web.jQ(oZ,ft.getPageNumber())>=0);}}if(!tS){var cf=ft.getPageNumber();if(Ta(cf-1)){oZ.push(cf);}}}}if(oZ.length>0){setTimeout(function(){for(H=0;H<oZ.length;H++){ng.bU.dC(oZ[H]-1);}},1);}};SingleSessionViewerControl.prototype.selectMarks=function(marks){if(this.ez===false){throw "The method selectMarks is not available until 'ViewerReady' state is reached.";}var ad=[];if(marks===undefined){return this;}if(marks&& !(marks instanceof Array)){if(marks instanceof PCCViewer.Mark){ad.push(marks);}}else{ad=marks;}if(ad.length===0){return this;}ady(ad,true,this);return this;};SingleSessionViewerControl.prototype.deselectMarks=function(marks){if(this.ez===false){throw "The method deselectMarks is not available until 'ViewerReady' state is reached.";}var ad=[];if(marks===undefined){return this;}if(marks&& !(marks instanceof Array)){if(marks instanceof PCCViewer.Mark){ad.push(marks);}}else{ad=marks;}if(ad.length===0){return this;}ady(ad,false,this);return this;};SingleSessionViewerControl.prototype.deselectAllMarks=function(){var oZ=[];var ad=this.getSelectedMarks();var tS=false,H,ft;for(H=0;H<ad.length;H++){ft=this.dz[parseInt(ad[H].getId(),10)];tS=false;if(ft){if(ft.getId()===ft.L.get_markID().toString()){ft.L.set_selected(false);if(Array.prototype.IndexOf){tS=(oZ.IndexOf(ft.getPageNumber())>=0);}else{tS=(IPCC.Web.jQ(oZ,ft.getPageNumber())>=0);}}if(!tS){var cf=ft.getPageNumber();if(yU(cf-1,this)===true){oZ.push(cf);}}}}if(oZ.length>0){var ng=this;setTimeout(function(){for(H=0;H<oZ.length;H++){ng.bU.dC(oZ[H]-1);}},1);}return this;};SingleSessionViewerControl.prototype.copyMarks=function(marks){var dn=this,Oy;if(marks instanceof PCCViewer.Mark){marks=[marks];}if(marks instanceof Array===false){throw new PCCViewer.Error("InvalidArgument","The parameter, marks, is not an Array of Marks or a single Mark.");}var ad=[];IPCC.T.forEach(marks,function(K){if(K instanceof PCCViewer.Mark){if(dn.dz[K.getId()]===undefined){throw new PCCViewer.Error("InvalidArgument","The parameter, marks, contains a Mark that is not on the document.");}ad.push(K);}else{throw new PCCViewer.Error("InvalidArgument","The parameter, marks, contains an item that is not a Mark.");}});var sp=[];IPCC.T.forEach(ad,function(K,aJ){eb[K.getType()]({mark:K},function(bW,dg){dg.uid=undefined;sp[aJ]=dg;});});this.vU=false;Oy=dn.deserializeMarks(sp);this.vU=true;return Oy;};SingleSessionViewerControl.prototype.enterTextMarkEditingMode=function(K){var dn=this,bU=this.bU;var acA=function(Uu){var Ay=false,dr=bU.get_displayedPages();for(var H=0;H<dr.get_length();H++){var bI=dr.getPage(H);if(bI.get_pageNumber()===Uu){Ay=true;}bU.pO(bI.get_pageNumber());}return Ay;};if(typeof K==="undefined"||K===null){acA(-1);}else{if(this.ez===false){throw PCCViewer.Error("ViewerNotReady","The method selectMarks is not available until 'ViewerReady' state is reached.");}if(!(K instanceof PCCViewer.Mark)){throw new PCCViewer.Error("InvalidArgument","The argument 'mark' must be an instance of PCCViewer.Mark.");}var aag=this.dz[parseInt(K.getId(),10)];if(!(aag&&aag instanceof PCCViewer.Mark)){throw new PCCViewer.Error("InvalidArgument","The provided mark is not on the document.");}if(!(K.L&&K.L instanceof IPCC.Web.UI.Mark)){throw new PCCViewer.Error("InvalidArgument","The provided mark may not have been added to the document pages in the viewer");}if(K.getId()!==K.L.get_markID().toString()){throw new PCCViewer.Error("InvalidArgument","The mark ID does not match the ID of the mark loaded in the viewer");}var bv=K.getType();if(bv!==PCCViewer.Mark.Type.TextAnnotation&&bv!==PCCViewer.Mark.Type.TextRedaction&&bv!==PCCViewer.Mark.Type.TextInputSignature&&bv!==PCCViewer.Mark.Type.TextAreaSignature){throw new PCCViewer.Error("InvalidArgument","The mark type must be: 'TextAnnotation', 'TextRedaction', 'TextInputSignature', or 'TextAreaSignature'.");}var Ay=acA(K.getPageNumber()-1);if(Ay){dn.bU.wi(K.getPageNumber()-1,K.L);}}return this;};SingleSessionViewerControl.prototype.getCharacterIndex=function(sortableObject){if(this.ez===false){throw new Error("The getCharacterIndex method can not be used until 'ViewerReady' state is reached.");}var HU= -1;var dw;var aQ;var aR=0;if(sortableObject instanceof PCCViewer.Mark){if(sortableObject.getStartPoint){dw=sortableObject.getStartPoint();}else{aQ=(sortableObject.L)?sortableObject.L.get_boundingRectangle():sortableObject.getRectangle();dw={x:aQ.x,y:aQ.y};}aR=sortableObject.getPageNumber();}else if(sortableObject instanceof PCCViewer.SearchResult){return sortableObject.startIndexInPage;}else if(sortableObject!==undefined&&sortableObject!==null){if(typeof sortableObject.x==='number'&&typeof sortableObject.y==='number'){dw={x: +sortableObject.x,y: +sortableObject.y};}else{if(isNaN(+sortableObject.x)||isNaN(+sortableObject.y)){throw new Error('The parameter sortableObject does not contain valid x and y values.');}else{dw={x:Number(+sortableObject.x),y:Number(+sortableObject.y)};}}if(typeof sortableObject.pageNumber==='number'){aR= +sortableObject.pageNumber;}else{if(isNaN(+sortableObject.pageNumber)){throw new Error('The parameter sortableObject does not contain a valid pageNumber value.');}else{aR=Number(+sortableObject.pageNumber);}}}else{throw new Error('The sortableObject parameter must be a Mark, SearchResult, or Point.');}if(aR<1||aR>this.getPageCount()|| !isFinite(aR)){throw new RangeError("The parameter pageNumber is out of range.");}if(!this.isPageTextReady(aR)){return-2;}var bI=this.ds.getPage(aR-1);var wE=bI.cd().ZP();var gm=bI.cd().gY();function akC(bbox,point){if(point.x>bbox.x&&point.x<bbox.x+bbox.width&&point.y>bbox.y&&point.y<bbox.y+bbox.height){return true;}return false;};function akM(dR,dU){var ba=Math.max(Math.min(dU.x,dR.x+dR.width),dR.x);var de=Math.max(Math.min(dU.y,dR.y+dR.height),dR.y);return(dU.x-ba)*(dU.x-ba)+(dU.y-de)*(dU.y-de);};var ER;var QZ=Number.MAX_VALUE;for(var H=0;H<wE.ef();H++){var ho=wE.ayM(H);if(akC(ho.eH(),dw)){for(var ag=ho.aje();ag<ho.agL();ag++){var QG=gm.kn(ag);var rH=QG.sa();if(akC(rH,dw)){return ag;}ER=akM(rH,dw);if(ER<QZ){HU=ag;QZ=ER;}}return HU;}ER=akM(ho.eH(),dw);if(ER<QZ){if(ho.eH().y>dw.y){HU=ho.aje()-1;}else{HU=ho.agL();}QZ=ER;}}return HU;};SingleSessionViewerControl.prototype.getCurrentMouseTool=function(){return this.az.getName();};SingleSessionViewerControl.prototype.setCurrentMouseTool=function(name){var V=this;if(this.ez===false){throw "The method setCurrentMouseTool is not available until 'ViewerReady' state is reached.";}var yL=name.toLowerCase();var az=PCCViewer.MouseTools.getMouseTool(yL);if(!az){throw new Error("The name argument for setCurrentMouseTool(name) must be the name of a known mouse tool.");}var fZ,hJ;switch(az.getType()){case PCCViewer.MouseTool.Type.Magnifier:fZ=IPCC.Web.UI.MouseTool.Magnifier;break;case PCCViewer.MouseTool.Type.SelectToZoom:fZ=IPCC.Web.UI.MouseTool.RectangleZoom;break;case PCCViewer.MouseTool.Type.PanAndEdit:case PCCViewer.MouseTool.Type.Pan:fZ=IPCC.Web.UI.MouseTool.HandPan;break;case PCCViewer.MouseTool.Type.SelectText:fZ=IPCC.Web.UI.MouseTool.SelectText;break;case PCCViewer.MouseTool.Type.EditMarks:fZ=IPCC.Web.UI.MouseTool.EditMarks;break;case PCCViewer.MouseTool.Type.LineAnnotation:fZ=IPCC.Web.UI.MouseTool.CreateLineMark;hJ=aEB(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.RectangleAnnotation:fZ=IPCC.Web.UI.MouseTool.CreateRectangleMark;hJ=akq(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.RectangleRedaction:fZ=IPCC.Web.UI.MouseTool.CreateRectangleRedactionMark;hJ=aDi(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.TransparentRectangleRedaction:fZ=IPCC.Web.UI.MouseTool.CreateRectangleMark;hJ=auX(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.EllipseAnnotation:fZ=IPCC.Web.UI.MouseTool.CreateEllipseMark;hJ=akq(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextAnnotation:fZ=IPCC.Web.UI.MouseTool.CreateTextMark;hJ=awj(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextRedaction:fZ=IPCC.Web.UI.MouseTool.CreateTextMark;hJ=Xl(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextInputSignature:fZ=IPCC.Web.UI.MouseTool.CreateTextInputSignatureMark;hJ=Xl(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextAreaSignature:fZ=IPCC.Web.UI.MouseTool.CreateTextAreaSignatureMark;hJ=Xl(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.StampAnnotation:case PCCViewer.MouseTool.Type.StampRedaction:fZ=IPCC.Web.UI.MouseTool.CreateStampMark;hJ=avu(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.HighlightAnnotation:fZ=IPCC.Web.UI.MouseTool.CreateHighlightTextMark;hJ=Ox(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextHyperlinkAnnotation:fZ=IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark;hJ=Ox(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.FreehandAnnotation:fZ=IPCC.Web.UI.MouseTool.CreateFreehandMark;hJ=arX(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextSelectionRedaction:fZ=IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction;hJ=Ox(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.PlaceSignature:var arU=this.aX.resourcePath+'/placeSignatureCursor.cur';this.bU.set_mouseTool(IPCC.Web.UI.MouseTool.None);this.bU.set_allowMarkEdits(false);this.bU.set_mouseCursor('url('+arU+'), pointer');this.az=az;return this;case PCCViewer.MouseTool.Type.ImageStampAnnotation:fZ=IPCC.Web.UI.MouseTool.CreateImageStampAnnotationMark;hJ=ans(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.ImageStampRedaction:fZ=IPCC.Web.UI.MouseTool.CreateImageStampRedactionMark;hJ=ans(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.PolylineAnnotation:fZ=IPCC.Web.UI.MouseTool.CreatePolylineMark;hJ=aCX(az.getTemplateMark());break;case PCCViewer.MouseTool.Type.StrikethroughAnnotation:fZ=IPCC.Web.UI.MouseTool.CreateStrikethroughMark;hJ=Ox(az.getTemplateMark());break;default:throw new Error("An unexpected error occurred. The MouseTool type is not known.");}var atc=this.bU.get_mouseTool();if(this.az!==az&&atc===fZ){setTimeout(function(){V.aB.trigger(PCCViewer.EventType.MouseToolChanged,{mouseToolName:V.az.getName()});},0);}this.az=az;if(hJ){this.ES=hJ.onCreating;this.mj=hJ.onAdded;}else{this.ES=undefined;this.mj=undefined;}this.bU.set_mouseTool(fZ);this.bU.set_allowMarkEdits((az.getType()===PCCViewer.MouseTool.Type.PanAndEdit));return this;};function XJ(dn,Vm,jO){if(dn.yp!==true){var HD=function(){dn.aB.off('PageCountReady',HD);XJ(dn,Vm,jO);};dn.aB.on('PageCountReady',HD);return;}var aj=dn;var yY;var lu={},uC={},qc=[];var fQ=aj.fC;var jS;var aX;if(Vm){aX=Vm;}var acF=[];var Zr=aj.bf.get_pages();var axD=function(bI,done){var aHQ=false;var jj=bI;var aR=bI.get_pageNumber();var fb=jj.get_pageWidth();var fB=jj.get_pageHeight();try{if(jj){var gJ=aj.bU.gJ(jj),Ba=0,CQ=0,ew="",aFy=false;var getArt=function getArt(){var NF;if(aX&&aX.Fd&&aX.Fd[aR]){NF=IPCC.T.extend({},aX);NF.Fd=aX.Fd[aR];}else{NF=aX;}var ag,Xf;var IH=gJ.aEH(aR,Ba,CQ,NF);if(IH.lu){lu[aR]=IH.lu;}else{var auA=axW(aR,jS,CQ,Ba);lu[aR]=auA;}if(IH.qc){for(ag=0;ag<IH.qc.length;ag++){Xf=IH.qc[ag];uC[Xf.aZ.imageStampId]=Xf;}}done();};if(gJ){if(!fb|| !fB){if(gJ.get_markCount()>0){aj.bU.LG(bI,function(aF,bj){Ba=aF;if(Ba){jj.Ot(Ba);}CQ=bj;if(CQ){jj.Oc(CQ);}getArt();},function(mC){done(mC);});}else{getArt();}}else{Ba=fb;CQ=fB;getArt();}}else{done(new Error("No art page was found"));}}}catch(ex){done(new Error("Error while saving annotation, error:"+ex.message));}};Zr.forEach(function(bI,bd,iY){acF.push(function(done){axD(bI,done);});});var Qx=function(bh,bI){var xV="";var H;if(!bh.fV){if(bh.toString()){return bh.toString();}else{return '<![CDATA[]]>';}}if((fQ===1||bI===0||(bI>0&&bh.fV!=="documentAnnotations"&&bh.fV!=="pages"))&&bh.fV!=="highlights"){xV='<'+bh.fV;for(var zS in bh.aZ){if(bh.aZ.hasOwnProperty(zS)){var Vn=bh.aZ[zS];if(Vn===undefined||Vn===null){continue;}var aZ=Vn.toString();aZ=aZ.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');xV=xV+' '+zS+'="'+aZ+'"';}}xV+='>';}for(H=0;H<bh.cB.length;H++){xV+=Qx(bh.cB[H],bI);}if(fQ===1||(bI===fQ-1)||(bI!==fQ-1&&bh.fV!=="documentAnnotations"&&bh.fV!=="pages"&&bh.fV!=="highlights")){if(bh.fV!=="highlights"){xV+='</'+bh.fV+'>';}else{xV+='<'+bh.fV+' />';}}return xV;};IPCC.T.UO(acF,function(bW){if(bW){jO(bW);return;}yY='<?xml version="1.0"?>';for(var H=0;H<(aj.fC);H++){yY=yY+Qx(lu[H],H);}var stampImageXml='';for(var GL in uC){if(uC.hasOwnProperty(GL)){stampImageXml+=Qx(uC[GL],1);}}if(stampImageXml.length){var stampImagesXml='<stampImages>'+stampImageXml+'</stampImages></documentAnnotations>';yY=yY.replace('</documentAnnotations>',stampImagesXml);}jO(undefined,yY);});};SingleSessionViewerControl.prototype.saveMarkup=function(recordName,options){if(this.aX.enableMultipleRedactionReasons){throw new Error('Saving markup as XML is not supported when enableMultipleRedactionReasons is set to true');}var bB=PCCViewer.Deferred();var dk=bB.getPromise();var aX;if(options){aX=options;}else{aX={includeAnnotations:true,includeRedactions:true,includeSignatures:false};}try{if(typeof recordName!=="string"){bB.reject(new PCCViewer.Error("InvalidArgument","The parameter, recordName, is not a String."));return dk;}if(!aoQ(recordName)){bB.reject(new PCCViewer.Error("InvalidCharactersFilename",'Invalid characters in the annotations filename.'));return dk;}var aj=this;this.sv.then(function(sD){var As=recordName;XJ(aj,aX,function(err,yY){if(err){bB.reject(new PCCViewer.Error("Error",err));return dk;}var KC=IPCC.hn.sl(As);var bE;if(!(/^[\x00-\x7F]*$/.test(aj.bf.get_documentIdentifier()))){bE=aj.aX.imageHandlerUrl+'/Document/q/Art/q?DocumentID=e'+aj.aX.documentID+'&AnnotationID=e'+KC;}else{bE=aj.aX.imageHandlerUrl+'/Document/q/Art/q?DocumentID=u'+encodeURIComponent(aj.aX.documentID)+'&AnnotationID=u'+encodeURIComponent(As);}function fz(aH){bB.resolve(As);setTimeout(function(){aj.aB.trigger('MarkupSaved',{name:As});},0);};function fg(am){bB.reject(new PCCViewer.Error("AjaxError","Status Code "+am.response.status+" "+am.response.statusText));};PCCViewer.Ajax.eB({method:'POST',url:bE,headers:{'Content-Type':'application/xml;charset=utf-8'},body:yY}).then(fz,fg);});});}catch(e){bB.reject(new PCCViewer.Error("Error",e.message));}return dk;};var aoQ=function(recordName){return!/[\\\/:*?"<>|\x00-\x1f]/.test(recordName);};var TC=function(ky){var ba=ky.firstChild;while(ba.nodeType!==1){ba=ba.nextSibling;}return ba;};var axW=function(cf,jS,fB,fb){var lu={fV:'documentAnnotations',cB:[],aZ:{}};var aaU={fV:'pages',cB:[],aZ:{}};lu.cB.push(aaU);var mO={fV:'highlights',cB:[],aZ:{}};var bI={fV:'page',cB:[],aZ:{id:(cf+1).toString(),pageWidth:fb,pageHeight:fB}};lu.cB.push(mO);try{if(jS){var ba=jS.getElementsByTagName("documentAnnotations");if(ba.length>1){throw 'ERROR: Invalid PCC annotations XML';}var Rz;var DR;if(document.documentMode<9){var VJ=jS.firstChild.nodeName;if(VJ.toLowerCase()==='xml'){Rz=jS.firstChild.nextSibling;}else{Rz=jS.firstChild;}}else{Rz=jS.firstChild;}var cR=TC(Rz);if(cR.nodeName!=='pages'){throw 'ERROR: Problem with pages node in the PCC annotations XML';}if(cR.hasChildNodes()){var H;var mk=false;for(H=0;H<cR.childNodes.length;H++){DR=cR.childNodes[H];if(DR.nodeName!=='page'){continue;}var AT=DR.getAttribute('id');mk=false;if(AT&&parseFloat(AT)===cf+1){mk=true;for(var ag=0;ag<DR.childNodes.length;ag++){var aN=DR.childNodes[ag];var bo={fV:'annotation',cB:[],aZ:{}};if(aN.nodeName!=='annotation'){continue;}var Ou=DR.childNodes[ag].attributes;if(Ou.length>0){for(var df=0;df<Ou.length;df++){bo.aZ[Ou[df].name]=Ou[df].value;}}if(aN.childNodes[0].data){bo.cB.push('<![CDATA['+aN.childNodes[0].data+']]>');}else{bo.cB.push('');}bI.cB.push(bo);}break;}}}}aaU.cB.push(bI);return lu;}catch(e){throw(e.message);}};SingleSessionViewerControl.prototype.loadMarkup=function(recordName,options){var Fj=recordName;var bB=PCCViewer.Deferred(),dk=bB.getPromise(),aj=this;var aX=options||{};var vO=aX.retainExistingMarks;var jw=aX.markupLayer;var vh=aX.loadAsHidden;this.sv.then(function(sD){var bE,KC,bU=aj.bU,ds=aj.ds;if(typeof Fj!=="string"){bB.reject(new PCCViewer.Error("InvalidArgument","The parameter, recordName, is not a String."));}if(vO!==undefined){if(typeof vO!=='boolean'){bB.reject(new PCCViewer.Error('InvalidArgument','The parameter `retainExistingMarks` must be a boolean value if it is specified.'));}}if(jw!==undefined){if(!(jw instanceof PCCViewer.MarkupLayer)){bB.reject(new PCCViewer.Error('InvalidArgument','The parameter `markupLayer` must be an instance of PCCViewer.MarkupLayer if it is specified.'));}if(aj.lP.getItem(jw.getId())===undefined){bB.reject(new PCCViewer.Error('InvalidArgument','The parameter `markupLayer` is a markup layer unknown to the viewer.'));}}function fz(aH){var WT,LY=aH.responseText,Pi;if(LY.indexOf('xml')=== -1){bB.reject(new PCCViewer.Error("InvalidAnnotationRecord","Did not receive valid annotation record from web server."));return;}LY=LY.replace(/(comment\s+text=")((?:.|[\r\n])*?)("\s+created=")/g,function(match,p1,p2,p3){return p1+IPCC.T.ri(p2)+p3;});if(window.DOMParser){Pi=function(xmlStr){return(new window.DOMParser()).parseFromString(xmlStr,"text/xml");};}else if(typeof window.ActiveXObject!=="undefined"&&new window.ActiveXObject("Microsoft.XMLDOM")){Pi=function(xmlStr){var xmlDoc=new window.ActiveXObject("Microsoft.XMLDOM");xmlDoc.async="false";xmlDoc.loadXML(xmlStr);return xmlDoc;};}else{Pi=function(){return null;};}WT=Pi(LY);var akX=WT.getElementsByTagName('stampImage');var qc={};var VG=function(aJ){K.aW.push(ajx.getPoint(aJ));};for(var H=0;H<akX.length;H++){var Vj=akX[H];qc[Vj.getAttribute('imageStampId')]={imageStampId:Vj.getAttribute('imageStampId'),base64format:Vj.getAttribute('base64format')};}bU.set_annotationXmlDom(WT,qc,vO===true,vh===true);if(vO!==true){aj.dz={};}var di=aj.ds.get_length();var K;var bv,ec;var wn={};var Jy=[];for(H=0;H<di;H++){var bJ=aj.bU.gJ(aj.ds.getPage(H));if(bJ){var Cp={};var ag=0;for(ag=0;ag<bJ.get_markCount();ag++){var L=bJ.getMark(ag);if(aj.dz[L.get_markID()]!==undefined){continue;}ec=L.get_type();switch(ec){case IPCC.Web.UI.MarkType.Rectangle:if(L.iM()===true){if(L.get_opacity()===255){bv=PCCViewer.Mark.Type.RectangleRedaction;}else{bv=PCCViewer.Mark.Type.TransparentRectangleRedaction;}K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,uid:L.aZ.lo});}else{bv=PCCViewer.Mark.Type.RectangleAnnotation;K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,uid:L.aZ.lo});K.jU=L.get_lineWidth();K.cP=L.get_fillColor();K.ko=L.get_lineColor();K.dv=L.get_opacity();}break;case IPCC.Web.UI.MarkType.Ellipse:bv=PCCViewer.Mark.Type.EllipseAnnotation;K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,uid:L.aZ.lo});K.jU=L.get_lineWidth();K.cP=L.get_fillColor();K.ko=L.get_lineColor();K.dv=L.get_opacity();break;case IPCC.Web.UI.MarkType.Line:bv=PCCViewer.Mark.Type.LineAnnotation;K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,uid:L.aZ.lo});K.nQ=L.get_lineWidth();K.dI=L.get_lineColor();K.dv=L.get_opacity();if(L.get_endHeadType()===IPCC.Web.UI.LineHeadType.Solid){K.mx="FilledTriangle";}else{K.mx="None";}break;case IPCC.Web.UI.MarkType.Stamp:if(L.iM()===true){bv=PCCViewer.Mark.Type.StampRedaction;K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,uid:L.aZ.lo});}else{bv=PCCViewer.Mark.Type.StampAnnotation;K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,uid:L.aZ.lo});K.dI=L.get_fillColor();}K.tW=L.get_text();break;case IPCC.Web.UI.MarkType.Text:if(L.iM()===true){bv=PCCViewer.Mark.Type.TextRedaction;K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,uid:L.aZ.lo});}else{bv=PCCViewer.Mark.Type.TextAnnotation;K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,uid:L.aZ.lo});K.jU=L.get_lineWidth();K.cP=L.get_fillColor();K.ko=L.get_lineColor();K.dv=L.get_opacity();}K.fU=L.get_maxLength();K.gM=L.get_fontName();K.gG=L.get_textColor();K.cs=L.get_fontSize();var cG=L.get_fontStyle();var rR=[];if((cG&IPCC.Web.UI.FontStyle.Bold)===IPCC.Web.UI.FontStyle.Bold){rR.push("Bold");}if((cG&IPCC.Web.UI.FontStyle.Italic)===IPCC.Web.UI.FontStyle.Italic){rR.push("Italic");}if((cG&IPCC.Web.UI.FontStyle.Strikeout)===IPCC.Web.UI.FontStyle.Strikeout){rR.push("Strikeout");}if((cG&IPCC.Web.UI.FontStyle.Underline)===IPCC.Web.UI.FontStyle.Underline){rR.push("Underline");}K.cG=rR;var qN;switch(L.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:qN="center";break;case IPCC.Web.UI.HorizontalAlignment.Left:qN="left";break;case IPCC.Web.UI.HorizontalAlignment.Right:qN="right";break;}K.mI=qN;break;case IPCC.Web.UI.MarkType.TextAreaSignature:bv=PCCViewer.Mark.Type.TextAreaSignature;K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,uid:L.aZ.lo});K.jU=L.get_lineWidth();K.fU=L.get_maxLength();K.gM=L.get_fontName();K.gG=L.get_textColor();K.eV=L.get_maxFontSize();cG=L.get_fontStyle();rR=[];if((cG&IPCC.Web.UI.FontStyle.Bold)===IPCC.Web.UI.FontStyle.Bold){rR.push("Bold");}if((cG&IPCC.Web.UI.FontStyle.Italic)===IPCC.Web.UI.FontStyle.Italic){rR.push("Italic");}if((cG&IPCC.Web.UI.FontStyle.Strikeout)===IPCC.Web.UI.FontStyle.Strikeout){rR.push("Strikeout");}if((cG&IPCC.Web.UI.FontStyle.Underline)===IPCC.Web.UI.FontStyle.Underline){rR.push("Underline");}K.cG=rR;switch(L.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:qN="center";break;case IPCC.Web.UI.HorizontalAlignment.Left:qN="left";break;case IPCC.Web.UI.HorizontalAlignment.Right:qN="right";break;}K.mI=qN;break;case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.Strikethrough:bv=(ec===IPCC.Web.UI.MarkType.HighlightText)?PCCViewer.Mark.Type.HighlightAnnotation:(ec===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation)?PCCViewer.Mark.Type.TextHyperlinkAnnotation:(ec===IPCC.Web.UI.MarkType.Strikethrough)?PCCViewer.Mark.Type.StrikethroughAnnotation:PCCViewer.Mark.Type.TextSelectionRedaction;var Ym=L.aD;if(typeof wn[Ym]==='undefined'){K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,ds:ds,bU:bU,uid:L.aZ.lo});K.aM=[];if(bv===PCCViewer.Mark.Type.HighlightAnnotation){K.cP=L.get_fillColor();}wn[Ym]=K;L.bx=H;L.ka=true;}else{L.bx=H;wn[Ym].aM.push(L);}break;case IPCC.Web.UI.MarkType.Freehand:bv=PCCViewer.Mark.Type.FreehandAnnotation;K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,uid:L.aZ.lo});K.nQ=L.get_lineWidth();K.dI=L.get_lineColor();K.dv=L.get_opacity();break;case IPCC.Web.UI.MarkType.SignaturePath:bv=PCCViewer.Mark.Type.FreehandSignature;K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,uid:L.aZ.lo});K.nQ=L.get_lineWidth();K.dI=L.get_lineColor();break;case IPCC.Web.UI.MarkType.SignatureText:bv=PCCViewer.Mark.Type.TextSignature;K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,uid:L.aZ.lo});K.gM=L.get_fontName();K.dI=L.get_fillColor();K.aO=L.get_text();break;case IPCC.Web.UI.MarkType.TextLine:bv=PCCViewer.Mark.Type.TextInputSignature;K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,uid:L.aZ.lo});K.gM=L.get_fontName();K.gG=L.get_textColor();K.aO=L.get_text();K.fU=L.get_maxLength();K.iP=L.get_mask();break;case IPCC.Web.UI.MarkType.RectangleRedaction:if(!L.aD){bv=PCCViewer.Mark.Type.RectangleRedaction;K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,ds:ds,bU:bU,uid:L.aZ.lo});K.jU=L.get_lineWidth();K.cP=L.get_fillColor();K.ko=L.get_lineColor();K.dv=L.get_opacity();}else{if(Cp[L.aD]===undefined){Cp[L.aD]=[];}Cp[L.aD].push(L);}break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:bv=(ec===IPCC.Web.UI.MarkType.ImageStampAnnotation)?PCCViewer.Mark.Type.ImageStampAnnotation:PCCViewer.Mark.Type.ImageStampRedaction;K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,uid:L.aZ.lo});K.setImage({dataUrl:L.get_image(),id:L.qi});break;case IPCC.Web.UI.MarkType.Polyline:bv=PCCViewer.Mark.Type.PolylineAnnotation;K=new PCCViewer.Mark({type:bv,igMark:L,pageNumber:H+1,uid:L.aZ.lo});K.nQ=L.get_lineWidth();K.dI=L.get_lineColor();K.dv=L.get_opacity();var ajx=L.get_points();K.aW=[];for(var aa=0;aa<ajx.get_length();aa++){VG(aa);}break;default:K=undefined;continue;}if(typeof K!=='undefined'&&ec!==IPCC.Web.UI.MarkType.HighlightText&& !(ec===IPCC.Web.UI.MarkType.RectangleRedaction&&L.aD!==undefined)&&ec!==IPCC.Web.UI.MarkType.TextSelectionRedaction&&ec!==IPCC.Web.UI.MarkType.TextHyperlinkAnnotation&&ec!==IPCC.Web.UI.MarkType.Strikethrough){aj.dz[L.get_markID()]=K;Jy.push(K);}}for(var QU in Cp){if(Cp.hasOwnProperty(QU)&&wn[QU]){var Ef=wn[QU];var afA=Ef.L;if(Ef.aM&&Ef.aM.length>0){for(var LT=0;LT<Ef.aM.length;LT++){if(Ef.aM[LT].bx===H){afA=Ef.aM[LT];}}}var by=Cp[QU];for(var XH=0;XH<by.length;XH++){afA.by.push(by[XH]);}}}}}for(var or in wn){if(wn.hasOwnProperty(or)){var yq=wn[or];aj.dz[yq.L.get_markID()]=yq;Jy.push(yq);if(yq.aM&&yq.aM.length>0){yq.aM[yq.aM.length-1].kg=true;}else{yq.L.kg=true;}}}bB.resolve(Fj);if(jw!==undefined){jw.addMarks(Jy);}else{aj.getActiveMarkupLayer().addMarks(Jy);}aj.aB.trigger('MarkupLoaded',{name:Fj,loadedMarks:Jy});};function fg(am){bB.reject(new PCCViewer.Error("Error","Status Code "+am.response.status+" "+am.response.statusText));};KC=IPCC.hn.sl(Fj);if(!(/^[\x00-\x7F]*$/.test(aj.bf.get_documentIdentifier()))){bE=aj.aX.imageHandlerUrl+'/Document/q/Art/q?DocumentID=e'+aj.aX.documentID+'&AnnotationID=e'+KC;}else{bE=aj.aX.imageHandlerUrl+'/Document/q/Art/q?DocumentID=u'+encodeURIComponent(aj.aX.documentID)+'&AnnotationID=u'+encodeURIComponent(Fj);}PCCViewer.Ajax.eB({method:'GET',url:bE,headers:{'Content-Type':'application/x-www-form-urlencoded'}}).then(fz,fg);});return dk;};function ajW(context,message){var mK=document.createElement('div'),AZ=document.createElement('div'),lH=document.createElement('button'),VE=function(){mK.classList.add('open');},Nz=function(){if(mK.parentNode!==null){mK.parentNode.removeChild(mK);}};lH.innerHTML='&#215;';lH.setAttribute('type','button');AZ.innerHTML='<p>PrizmDoc Viewer is running in evaluation mode with a fixed feature set. <b>'+message+'</b>';mK.className='pccPageListNagModal';mK.appendChild(lH);mK.appendChild(AZ);context.cU.appendChild(mK);VE();if(!lH.addEventListener){lH.attachEvent('onclick',Nz);}else{lH.addEventListener('click',Nz,false);}};SingleSessionViewerControl.prototype.getSavedMarkupNames=function(){var bB=PCCViewer.Deferred();var dk=bB.getPromise();var V=this;try{var H=0,IQ=0;var As='';var bE=this.aX.imageHandlerUrl+'/AnnotationList/q/Art/q?DocumentID=u'+encodeURIComponent(this.aX.documentID)+'&AnnotationID=u'+encodeURIComponent(As);var fz=function(aH){var uB;if(typeof aH.responseText!=='unknown'&&aH.responseText.length>0){try{uB=JSON.parse(aH.responseText);}catch(e){}}var YV=[],IQ=0;for(var H=0,cl=uB.annotationFiles.length;H<cl;H++){if(uB.annotationFiles[H].annotationLabel){YV[IQ]={};YV[IQ].name=uB.annotationFiles[H].annotationLabel;IQ++;}}bB.resolve(YV);};var fg=function(am){var error=new PCCViewer.Error("MarkupListFail","Unable to retrieve markup list from server.");if(am&&am.response){var iC=am.response.status;var mu;try{mu=JSON.parse(am.response.responseText);}catch(e){}if(iC===480&&mu&&mu.errorCode==='LicenseCouldNotBeVerified'){ajW(V,'Loading annotations is disabled in evaluation mode.');error=new PCCViewer.Error(mu.errorCode,"License error.");}}bB.reject(error);};PCCViewer.Ajax.eB({method:'GET',url:bE}).then(fz,fg);}catch(e){bB.reject(new PCCViewer.Error("Error",e.message));}return dk;};SingleSessionViewerControl.prototype.getMarkupLayerCollection=function(){if(!this.lP){this.lP=new PCCViewer.MarkupLayerCollection(this);}return this.lP;};SingleSessionViewerControl.prototype.requestMarkupLayerNames=function(metadata){var bB=PCCViewer.Deferred(),dk=bB.getPromise(),bE,avO=function(obj){var parts=[];for(var key in obj){if(obj.hasOwnProperty(key)&&(typeof obj[key]==='string'||typeof obj[key]==='boolean'||typeof obj[key]==='number')){parts.push(encodeURIComponent(key)+'='+encodeURIComponent(obj[key]));}}return "?"+parts.join('&');};if(!(/^[\x00-\x7F]*$/.test(this.bf.get_documentIdentifier()))){bE=this.aX.imageHandlerUrl+'/MarkupLayers/e'+this.aX.documentID+'/';}else{bE=this.aX.imageHandlerUrl+'/MarkupLayers/u'+encodeURIComponent(this.aX.documentID)+'/';}if(metadata){var aBt=avO(metadata);bE+=aBt;}bE+='?nocache='+new Date().getTime();PCCViewer.Ajax.eB({url:bE,method:'GET'}).then(function fz(aH){var azu=JSON.parse(aH.responseText);bB.resolve(azu);},function fg(am){bB.reject(am.error);});return dk;};SingleSessionViewerControl.prototype.getActiveMarkupLayer=function(){return this.AD;};SingleSessionViewerControl.prototype.setActiveMarkupLayer=function(markupLayer){if(!(markupLayer instanceof PCCViewer.MarkupLayer)){throw new PCCViewer.Error('InvalidArgument','The parameter `markupLayer` must be an instance of PCCViewer.MarkupLayer.');}if(this.lP.getItem(markupLayer.getId())===undefined){throw new PCCViewer.Error('InvalidArgument','The parameter `markupLayer` is a markup layer unknown to the viewer.');}this.AD=markupLayer;};SingleSessionViewerControl.prototype.loadMarkupLayers=function(layerRecordIds,options){var abB,V=this;abB=new PCCViewer.LoadMarkupLayersRequest(layerRecordIds,this.Zs,options||{});function xk(){setTimeout(function(){abB.Fa();},20);};function nu(){V.aB.off(PCCViewer.EventType.PageCountReady,nu);xk();};if(this.mZ===false){V.aB.on(PCCViewer.EventType.PageCountReady,nu);}else{xk();}return abB;};SingleSessionViewerControl.prototype.saveMarkupLayer=function(id){var bB=PCCViewer.Deferred();var dk=bB.getPromise();var V=this;if(typeof id!=='string'|| !id){bB.reject(new PCCViewer.Error('InvalidArgument','The parameter `id` is not a string.'));return dk;}var eJ=this.lP?this.lP.getItem(id):undefined;if(!eJ){bB.reject(new PCCViewer.Error('UnknownLayerRecord','The layer record '+id+' is not known to ViewerControl'));return dk;}function awK(pE){var OE=eJ.getMarks();if(!OE.length){pE(undefined,[]);}else{V.serializeMarks(OE).then(function jl(ad){pE(undefined,IPCC.T.map(ad,function(K){if(K.conversation&&K.conversation.comments){delete K.conversation.comments;}return K;}));},function _f(ew){pE(ew);});}};function aAG(pE){var OE=eJ.getMarks();var XC=function(fi,hE,jI){var aaf=IPCC.T.filter(hE,function(pm){return!pm.jw||pm.jw===eJ;});IPCC.T.forEach(aaf,function(dm){var aE=eb.Comment(dm);aE.markUid=jI;fi.push(aE);});return fi;};var YS=IPCC.T.reduce(OE,function(fi,K){var cr=K.getConversation();var hE=cr.getComments();return hE.length?XC(fi,hE,K.getUid()):fi;},[]);pE(undefined,YS);};function aGe(pE){var aux=IPCC.T.reduce(V.lP.getAll(),function(fi,afW){return fi.concat(eJ===afW?[]:afW.getMarks());},[]);var XC=function(fi,hE,jI){var aaf=IPCC.T.filter(hE,function(pm){return pm.jw===eJ;});IPCC.T.forEach(aaf,function(pm){var aE=eb.Comment(pm);aE.markUid=jI;fi.push(aE);});return fi;};var YS=IPCC.T.reduce(aux,function(fi,K){var cr=K.getConversation();var hE=cr.getComments();return hE.length?XC(fi,hE,K.getUid()):fi;},[]);pE(undefined,YS);};var acO=[],aCx=function(pW){if(pW.markupLayer===eJ){acO.push({text:pW.text,data:pW.data,creationDateTime:pW.creationDateTime,markUid:pW.markUid});}};for(var agd in this.lP.jA){if(this.lP.jA.hasOwnProperty(agd)){IPCC.T.forEach(this.lP.jA[agd],aCx);}}var yh={layerRecordId:eJ.getRecordId(),name:eJ.getName(),originalXmlName:eJ.getOriginalXmlName(),comments:acO,data:eb.Data(eJ)};var yZ;IPCC.T.UO([function(mD){awK(function(bW,dg){if(bW&& !yZ){yZ=bW;}else{yh.marks=dg;}mD();});},function(mD){aAG(function(bW,dg){if(bW&& !yZ){yZ=bW;}else{yh.comments=yh.comments.concat(dg);}mD();});},function(mD){aGe(function(bW,dg){if(bW&& !yZ){yZ=bW;}else{yh.comments=yh.comments.concat(dg);}mD();});}],function(){if(!yZ){aGB(yh);}else{bB.reject(new PCCViewer.Error('SerializationError',yZ.message));}});function aGB(aFq){var vk,gK={method:'POST',body:JSON.stringify(yh),headers:{'Content-Type':'application/json;charset=utf-8'}};if(!(/^[\x00-\x7F]*$/.test(V.bf.get_documentIdentifier()))){vk=V.aX.imageHandlerUrl+'/MarkupLayers/e'+V.aX.documentID+'/';}else{vk=V.aX.imageHandlerUrl+'/MarkupLayers/u'+encodeURIComponent(V.aX.documentID)+'/';}if(eJ.getRecordId()){gK.url=vk+eJ.getRecordId();gK.headers['X-HTTP-Method-Override']='PUT';}else{gK.url=vk;}PCCViewer.Ajax.eB(gK).then(fz,fg);};function fz(aH){if(aH.responseText&&typeof aH.responseText==='string'){var mu;try{mu=JSON.parse(aH.responseText);}catch(e){}if(mu&&mu.layerRecordId){eJ.Zx=mu.layerRecordId;}}bB.resolve({layerRecordId:eJ.getRecordId()});};function fg(am){var error=new PCCViewer.Error("AjaxError",am.error.message||'An unknown server error occurred.');if(am&&am.response){var iC=am.response.status;var mu;try{mu=JSON.parse(am.response.responseText);}catch(e){}if(iC===480&&mu&&mu.errorCode==='LicenseCouldNotBeVerified'){ajW(V,'Saving annotations is disabled in evaluation mode.');error=new PCCViewer.Error(mu.errorCode,'License error.');}}bB.reject(error);};return dk;};SingleSessionViewerControl.prototype.burnMarkup=function(burnOptions){var iX={burnSignatures:true,burnRedactions:true,burnAnnotations:false,redactionOptions:{mode:PCCViewer.RedactionViewMode.Normal,draftOptions:{opacity:0.2}}};var La;var aiN;var VC;var aKm=false;if(burnOptions){if(typeof burnOptions.marks==='object'){if(burnOptions.marks instanceof PCCViewer.Mark){La=[burnOptions.marks];}else if(burnOptions.marks instanceof Array){La=burnOptions.marks;}iX={marks:La};}else{iX.burnSignatures=(burnOptions.burnSignatures!==undefined)? ! !burnOptions.burnSignatures:iX.burnSignatures;iX.burnRedactions=(burnOptions.burnRedactions!==undefined)? ! !burnOptions.burnRedactions:iX.burnRedactions;iX.burnAnnotations=(burnOptions.burnAnnotations!==undefined)? ! !burnOptions.burnAnnotations:iX.burnAnnotations;}if(typeof burnOptions.filename==='string'){iX.filename=burnOptions.filename;}if(burnOptions.removeFormFields!==undefined){if(burnOptions.removeFormFields instanceof Array){if(burnOptions.removeFormFields.length>0){var OB,Hq=true;for(OB=0;OB<burnOptions.removeFormFields.length;OB++){if(burnOptions.removeFormFields[OB]!=='acroform'){Hq=false;}}if(Hq){iX.removeFormFields=['acroform'];}else{iX.mC={code:'InvalidArgument',message:'The burnOptions.removeFormFields parameter contains an invalid form type.'};}}else{iX.mC={code:'InvalidArgument',message:'The burnOptions.removeFormFields parameter must specify a valid form type.'};}}else{iX.mC={code:'InvalidArgument',message:'The burnOptions.removeFormFields parameter must be an Array if defined.'};}}if(burnOptions.redactionOptions!==undefined&&typeof burnOptions.redactionOptions==='object'){if(typeof burnOptions.redactionOptions.mode==="string"){if(burnOptions.redactionOptions.mode.toLowerCase()==="draft"){iX.redactionOptions={mode:PCCViewer.RedactionViewMode.Draft.toLowerCase()};}else{iX.redactionOptions={mode:PCCViewer.RedactionViewMode.Normal.toLowerCase()};}}else{iX.mC={code:'InvalidArgument',message:'The burnOptions.redactionOptions.mode parameter must be a string if defined.'};}if(typeof burnOptions.redactionOptions.draftOptions==='object'){if(typeof burnOptions.redactionOptions.draftOptions.opacity==='number'){iX.redactionOptions.draftOptions={opacity:burnOptions.redactionOptions.draftOptions.opacity};}else{iX.mC={code:'InvalidArgument',message:'The burnOptions.redactionOptions.draftOptions.opacity parameter must be a number value.'};}}}}var zp=new PCCViewer.BurnRequest(iX),V=this;if(La){var dX=[];for(var H=0,cl=this.getPageCount();H<cl;H++){dX[H]=[];}dX=IPCC.T.reduce(La,function(ad,ab){var aR=ab.getPageNumber()-1;if(!(typeof ab==='object'&&ab instanceof PCCViewer.Mark&&ab.L)){zp.aab(new Error('The burnOptions.marks parameter is an invalid object.'));return ad;}if(!V.getMarkById(ab.dE)){zp.aab(new Error('The burnOptions.marks parameter contains a mark not known to Viewer Control.'));return ad;}ad[aR].push(ab.L);if(ab.L.by){for(var H=0,cl=ab.L.by.length;H<cl;H++){if(ab.L.by[H]instanceof IPCC.Web.UI.Mark){ad[aR].push(ab.L.by[H]);}}}if(ab.aM){for(var ag=0,azz=ab.aM.length;ag<azz;ag++){ad[aR+1+ag].push(ab.aM[ag]);if(ab.aM[ag].by){for(var df=0,aAP=ab.aM[ag].by.length;df<aAP;df++){if(ab.aM[ag].by[df]instanceof IPCC.Web.UI.Mark){ad[aR+1+ag].push(ab.aM[ag].by[df]);}}}}}return ad;},dX);VC={Fd:dX,tq:true};}else{VC={includeAnnotations:iX.burnAnnotations,includeRedactions:iX.burnRedactions,includeSignatures:iX.burnSignatures,tq:true};}function abH(){XJ(V,VC,function(bW,aiN){if(bW){setTimeout(function(){zp.aab(bW);},20);}else{zp.Mq({bf:V.bf,aX:V.aX});zp.apg(aiN);setTimeout(function(){zp.Fa();},20);}});};function nu(){V.aB.off(PCCViewer.EventType.PageCountReady,nu);abH();};if(this.mZ===false){V.aB.on(PCCViewer.EventType.PageCountReady,nu);}else{abH();}return zp;};SingleSessionViewerControl.prototype.convertDocument=function(zx){var vq,V=this,Co={targetExtension:'pdf',filename:'document'},aX={};sK.rr(aX,Co,zx);aX.zf=1;vq=new PCCViewer.ConversionRequest(aX);function xk(){vq.Mq({bf:V.bf,aX:V.aX});setTimeout(function(){vq.Fa(aX);},20);};function nu(){V.aB.off(PCCViewer.EventType.PageCountReady,nu);xk();};if(this.mZ===false){V.aB.on(PCCViewer.EventType.PageCountReady,nu);}else{xk();}return vq;};SingleSessionViewerControl.prototype.requestDocumentConversion=function(zx){var vq,V=this,Co={targetExtension:'pdf',filename:'document'},aX={};sK.rr(aX,Co,zx);aX.zf=2;vq=new PCCViewer.ConversionRequest(aX);function xk(){vq.Mq({bf:V.bf,aX:V.aX});setTimeout(function(){vq.Fa(aX);},20);};function nu(){V.aB.off(PCCViewer.EventType.PageCountReady,nu);xk();};if(this.mZ===false){V.aB.on(PCCViewer.EventType.PageCountReady,nu);}else{xk();}return vq;};SingleSessionViewerControl.prototype.loadAttachments=function(){var bB=PCCViewer.Deferred();var dk=bB.getPromise();try{var H=0,IQ=0;var As='';var bE=this.aX.imageHandlerUrl+'/ViewingSession/u'+encodeURIComponent(this.aX.documentID)+'/Attachments';var aCw=function(aH){var Fh=JSON.parse(aH.responseText);if(Fh===null||Fh.status!=='complete'){setTimeout(ahU,500);return;}bB.resolve(Fh.attachments||[]);};var fg=function(am){bB.reject(new PCCViewer.Error("AttachmentListFail","Unable to retrieve attachment list from server."));};var ahU=function(){PCCViewer.Ajax.eB({method:'GET',url:bE}).then(aCw,fg);};ahU();}catch(e){bB.reject(new PCCViewer.Error("Error",e.message));}return dk;};function sZ(){return function(sender,eventArgs){var V=this;var K=V.dz[eventArgs.mark.get_markID()];if(V.vU){V.AD.addMarks(K);}setTimeout(function(){if(K){V.aB.trigger('MarkCreated',{mark:K,pageNumber:eventArgs.pageIndex+1,clientX:eventArgs.clientX,clientY:eventArgs.clientY});}},0);};};function aEB(bq){return{onCreating:function(bP,J){var K=new PCCViewer.Mark({type:bq.getType(),igMark:J.mark,pageNumber:J.pageIndex+1,enableMultipleRedactionReasons:this.aX.enableMultipleRedactionReasons});this.dz[J.mark.get_markID()]=K;K.setThickness(bq.getThickness());K.setColor(bq.getColor());K.setOpacity(bq.getOpacity());K.setEndHeadType(bq.getEndHeadType());PCCViewer.Data.nC(bq,K);PCCViewer.Conversation.pH(bq.getConversation(),K.getConversation());},onAdded:sZ()};};function akq(bq){return{onCreating:function(bP,J){var K=new PCCViewer.Mark({type:bq.getType(),igMark:J.mark,pageNumber:J.pageIndex+1,enableMultipleRedactionReasons:this.aX.enableMultipleRedactionReasons});this.dz[J.mark.get_markID()]=K;K.setBorderThickness(bq.getBorderThickness());K.setFillColor(bq.getFillColor());K.setBorderColor(bq.getBorderColor());K.setOpacity(bq.getOpacity());PCCViewer.Data.nC(bq,K);PCCViewer.Conversation.pH(bq.getConversation(),K.getConversation());},onAdded:sZ()};};function auX(bq){return{onCreating:function(bP,J){var K=new PCCViewer.Mark({type:bq.getType(),igMark:J.mark,pageNumber:J.pageIndex+1,enableMultipleRedactionReasons:this.aX.enableMultipleRedactionReasons});this.dz[J.mark.get_markID()]=K;},onAdded:sZ()};};function aDi(bq){return{onCreating:function(bP,J){var K=new PCCViewer.Mark({type:bq.getType(),igMark:J.mark,pageNumber:J.pageIndex+1,enableMultipleRedactionReasons:this.aX.enableMultipleRedactionReasons});this.dz[J.mark.get_markID()]=K;if(K.om){K.setReasons(bq.getReasons());}else{K.setReason(bq.getReason());}K.setBorderThickness(bq.getBorderThickness());K.setFillColor(bq.getFillColor());K.setBorderColor(bq.getBorderColor());K.setFontColor(bq.getFontColor());PCCViewer.Data.nC(bq,K);PCCViewer.Conversation.pH(bq.getConversation(),K.getConversation());},onAdded:sZ()};};function awj(bq){return{onCreating:function(bP,J){var K=new PCCViewer.Mark({type:bq.getType(),igMark:J.mark,pageNumber:J.pageIndex+1,enableMultipleRedactionReasons:this.aX.enableMultipleRedactionReasons});this.dz[J.mark.get_markID()]=K;K.setBorderThickness(bq.getBorderThickness());K.setFillColor(bq.getFillColor());K.setBorderColor(bq.getBorderColor());K.setOpacity(bq.getOpacity());K.setFontName(bq.getFontName());K.setFontColor(bq.getFontColor());K.setFontSize(bq.getFontSize());K.setFontStyle(bq.getFontStyle());K.setHorizontalAlignment(bq.getHorizontalAlignment());PCCViewer.Data.nC(bq,K);PCCViewer.Conversation.pH(bq.getConversation(),K.getConversation());},onAdded:sZ()};};function Xl(bq){return{onCreating:function(bP,J){var K=new PCCViewer.Mark({type:bq.getType(),igMark:J.mark,pageNumber:J.pageIndex+1,enableMultipleRedactionReasons:this.aX.enableMultipleRedactionReasons});this.dz[J.mark.get_markID()]=K;K.setFontName(bq.getFontName());K.setFontColor(bq.getFontColor());K.setText(bq.getText());if(K.cP&&bq.cP!=='transparent'){K.setFillColor(bq.getFillColor());}if(K.setFontSize){K.setFontSize(bq.getFontSize());}if(K.setOpacity){K.setOpacity(bq.getOpacity());}if(K.setBorderColor&&bq.ko!=='transparent'){K.setBorderColor(bq.getBorderColor());K.setBorderThickness(bq.getBorderThickness());}PCCViewer.Data.nC(bq,K);PCCViewer.Conversation.pH(bq.getConversation(),K.getConversation());},onAdded:sZ()};};function avu(bq){return{onCreating:function(bP,J){var K=new PCCViewer.Mark({type:bq.getType(),igMark:J.mark,pageNumber:J.pageIndex+1,enableMultipleRedactionReasons:this.aX.enableMultipleRedactionReasons});this.dz[J.mark.get_markID()]=K;if(bq.getType()===PCCViewer.MouseTool.Type.StampAnnotation){K.setColor(bq.getColor());}K.setLabel(bq.getLabel());PCCViewer.Data.nC(bq,K);PCCViewer.Conversation.pH(bq.getConversation(),K.getConversation());},onAdded:sZ()};};var aIk;function Ox(bq){return{onCreating:function(bP,J){},onAdded:sZ()};};function arX(bq){return{onCreating:function(bP,J){var K=new PCCViewer.Mark({type:bq.getType(),igMark:J.mark,pageNumber:J.pageIndex+1,enableMultipleRedactionReasons:this.aX.enableMultipleRedactionReasons});this.dz[J.mark.get_markID()]=K;K.setThickness(bq.getThickness());K.setColor(bq.getColor());K.setOpacity(bq.getOpacity());PCCViewer.Data.nC(bq,K);PCCViewer.Conversation.pH(bq.getConversation(),K.getConversation());},onAdded:sZ()};};function ans(bq){return{onCreating:function(bP,J){var K=new PCCViewer.Mark({type:bq.getType(),igMark:J.mark,pageNumber:J.pageIndex+1,enableMultipleRedactionReasons:this.aX.enableMultipleRedactionReasons});this.dz[J.mark.get_markID()]=K;K.setImage(bq.getImage());PCCViewer.Data.nC(bq,K);PCCViewer.Conversation.pH(bq.getConversation(),K.getConversation());},onAdded:sZ()};};function aCX(bq){return{onCreating:function(bP,J){var K=new PCCViewer.Mark({type:bq.getType(),igMark:J.mark,pageNumber:J.pageIndex+1,enableMultipleRedactionReasons:this.aX.enableMultipleRedactionReasons});this.dz[J.mark.get_markID()]=K;K.setThickness(bq.getThickness());K.setColor(bq.getColor());K.setOpacity(bq.getOpacity());PCCViewer.Data.nC(bq,K);PCCViewer.Conversation.pH(bq.getConversation(),K.getConversation());},onAdded:sZ()};};SingleSessionViewerControl.prototype.setMarkHandleMode=function(markHandleMode){var xH;switch(markHandleMode){case PCCViewer.MarkHandleMode.HideCornerHandlesWhenClose:xH=IPCC.Web.UI.MarkHandleMode.HideCornerHandlesWhenClose;break;case PCCViewer.MarkHandleMode.HideSideHandlesWhenClose:xH=IPCC.Web.UI.MarkHandleMode.HideSideHandlesWhenClose;break;default:throw new RangeError("The value of markHandleMode is not a supported value.");}if(this.bU&&this.bU.set_markHandleMode){this.bU.set_markHandleMode(xH);}else{this.aX.markHandleMode=xH;}return this;};SingleSessionViewerControl.prototype.getMarkHandleMode=function(){var xH;if(this.bU&&this.bU.get_markHandleMode){xH=this.bU.get_markHandleMode();}else{xH=this.aX.markHandleMode;}if(xH===IPCC.Web.UI.MarkHandleMode.HideCornerHandlesWhenClose){return PCCViewer.MarkHandleMode.HideCornerHandlesWhenClose;}else{return PCCViewer.MarkHandleMode.HideSideHandlesWhenClose;}};SingleSessionViewerControl.prototype.setConversationDOMFactory=function(factoryFunction){if(typeof(factoryFunction)!=='function'){throw new Error("The parameter factoryFunction is not a function.");}this.mw=factoryFunction;return this;};SingleSessionViewerControl.prototype.getConversationDOMFactory=function(){return this.mw;};SingleSessionViewerControl.prototype.refreshConversations=function(conversations){var aao,adD=(conversations===undefined);function anA(cr,bd){throw new Error(cr+((bd!==undefined)?' (Array index '+bd+')':'')+' is not a valid PCCViewer.Conversation object.');};function awY(cr,bd){throw new Error(cr+((bd!==undefined)?' (Array index '+bd+')':'')+' is not a known conversation in this ViewerControl.');};if(conversations instanceof PCCViewer.Conversation){aao=[conversations];}else if(conversations instanceof Array){aao=conversations;}else if(!adD){anA(conversations);}var ahi=IPCC.T.map(this.getAllMarks(),function(ab){return ab.getConversation();});var aaM=IPCC.T.map(aao||ahi,function(ab,H){if(!(ab instanceof PCCViewer.Conversation)){anA(ab,H);}if(!adD&& !IPCC.T.inArray(ahi,ab)){awY(ab,H);}return ab.getMark().dE;});this.bU.refreshConversations(aaM);return this;};SingleSessionViewerControl.prototype.openCommentsPanel=function(){if(this.ez===false){throw new Error("The method openCommentsPanel is not available until 'ViewerReady' state is reached.");}if(this.getPageLayout()===PCCViewer.PageLayout.Horizontal){throw new Error("The page layout must be set to vertical to use the comments panel.");}this.bU.openCommentsPanel();var V=this;setTimeout(function(){V.aB.trigger("CommentsPanelToggled",{isOpen:true});},10);return this;};SingleSessionViewerControl.prototype.closeCommentsPanel=function(){if(this.ez===false){throw new Error("The method closeCommentsPanel is not available until 'ViewerReady' state is reached.");}this.bU.closeCommentsPanel();var V=this;setTimeout(function(){V.aB.trigger("CommentsPanelToggled",{isOpen:false});},10);return this;};SingleSessionViewerControl.prototype.getIsCommentsPanelOpen=function(){if(this.ez===false){throw new Error("The method getIsCommentsPanelOpen is not available until 'ViewerReady' state is reached.");}if(this.getPageLayout()===PCCViewer.PageLayout.Horizontal){return false;}return this.bU.get_isCommentsPanelOpen();};SingleSessionViewerControl.prototype.setSelectedConversation=function(conversation){if(this.ez===false){throw new Error("The method setSelectedConversation is not available until 'ViewerReady' state is reached.");}if(conversation===null||conversation===undefined){this.bU.set_selectedConversation(undefined);return this;}if(!(conversation instanceof PCCViewer.Conversation)){throw new Error("The parameter conversation is not an instance of PCCViewer.Conversation.");}var nk=conversation.getMark();if(nk){var vA=nk.L.get_conversation();this.bU.set_selectedConversation(vA);}else{throw new Error("The conversation is unknown to the viewer control.");}return this;};SingleSessionViewerControl.prototype.getSelectedConversation=function(){if(this.ez===false){return null;}var iK=this.bU.get_selectedConversation();if(iK){var nk=this.dz[iK.get_mark().get_markID()];if(nk){return nk.getConversation();}}return null;};SingleSessionViewerControl.prototype.clearMouseSelectedText=function(textSelection){if(!textSelection){throw new Error('textSelection is a required parameter');}else if(typeof textSelection.startIndex!=='number'||textSelection.startIndex<0){throw new Error('Start index value '+textSelection.startIndex+' is not a valid value.');}else if(typeof textSelection.pageNumber!=='number'||textSelection.pageNumber<1||textSelection.pageNumber>this.getPageCount()){throw new Error('Page number value '+textSelection.pageNumber+' is not a valid value.');}else if(typeof textSelection.length!=='number'||textSelection.length<1){throw new Error('Length value '+textSelection.pageNumber+' is not a valid value.');}var V=this,zJ=V.bN;function afN(bx,lX,di){var aal=[bx+1];var bI=V.ds.getPage(bx),fs=bI.cd();if(fs.oY()){var aO=fs.Ei(),aeb=aO.substr(lX);if(aeb.length>di){return aal;}else{return aal.concat(afN(bx+1,0,di-aeb.length));}}else{return aal;}};this.bU.tU();function Eq(Uj,aR){V.ace(aR,Uj);};if(zJ&&zJ.getResults().length){var cR=afN(textSelection.pageNumber-1,textSelection.startIndex,textSelection.length),fk=zJ.getResults(),alH=false,PF={};if(fk.length){IPCC.T.forEach(fk,function(ab){var atk=IPCC.T.contains(cR,ab.aR);if(atk){alH=true;PF[ab.aR]=PF[ab.aR]||[];PF[ab.aR].push(ab);}});}if(alH){IPCC.T.forEach(PF,function(Uj,aR){V.requestPageText(aR).then(Eq.bind(null,Uj,aR));});}}return this;};SingleSessionViewerControl.prototype.convertPageToWindowCoordinates=function(pageNumber,points){if(this.ez===false){throw new Error("The method setSelectedConversation is not available until 'ViewerReady' state is reached.");}if(!pageNumber||typeof pageNumber!=='number'||pageNumber<1||pageNumber>this.getPageCount()){throw new PCCViewer.Error('InvalidArgument','pageNumber is not a known page number in the document');}var xS=function(n){return typeof n==='number'&& !isNaN(n);};var vt,acV=true;if(points&&points.constructor===Array){vt=points;}else{vt=[points];acV=false;}var ajZ=function(bH,bd,bG){throw new PCCViewer.Error('InvalidArgument',bH+' (Array index '+bd+') does not have a valid '+bG+' property');};if(vt.length===0|| !points){throw new PCCViewer.Error('InvalidArgument','At least one point is required');}IPCC.T.forEach(vt,function(bH,bd){if(!xS(bH.x)){ajZ(bH,bd,'x');}if(!xS(bH.y)){ajZ(bH,bd,'y');}});var Cc=this.bU.axT(pageNumber,vt);if(Cc===null){return null;}else if(acV){return Cc;}else{return Cc[0];}};SingleSessionViewerControl.prototype.selectEditorText=function(){if(this.ez===false){throw new Error("The method selectEditorText is not available until 'ViewerReady' state is reached.");}var V=this;var bU=V.bU;var Zw=bU.AX();if(!Zw){throw new Error("The method selectEditorText is not available unless there is an active editor on the page.");}if(Zw==='singleline'){bU.GE();}else if(Zw==='multiline'){throw new PCCViewer.Error('InvalidArgument','Only TextInputSignature Marks are supported at this time');}return V;};SingleSessionViewerControl.prototype.setSharpening=function(amount){if(amount!==Math.floor(amount)||typeof amount!=='number'||amount<0||amount>100){throw new PCCViewer.Error('InvalidArgument','Amount must be an integer between 0 and 100 inclusive');}var V=this;V.acL=amount;if(this.ez===false){this.sv.then(function(sD){var bU=V.bU;bU.DB(amount);});}else{var bU=V.bU;bU.DB(amount);}return V;};SingleSessionViewerControl.prototype.getSharpening=function(){var V=this;if(this.ez===false){return V.acL;}else{var bU=V.bU;return bU.ayO();}};SingleSessionViewerControl.prototype.setGamma=function(amount){if(typeof amount!=='number'||amount<0||amount>10){throw new PCCViewer.Error('InvalidArgument','Amount must be a number between 0 and 10 inclusive');}var V=this;V.amF=amount;if(this.ez===false){this.sv.then(function(sD){var bU=V.bU;bU.Ga(amount);});}else{var bU=V.bU;bU.Ga(amount);}return V;};SingleSessionViewerControl.prototype.getGamma=function(){var V=this;if(this.ez===false){return V.amF;}else{var bU=V.bU;return bU.axv();}};SingleSessionViewerControl.prototype.setSvgLineWidthMultiplier=function(amount){if(typeof amount!=='number'||amount<=0||amount>100){throw new PCCViewer.Error('InvalidArgument','Amount must be greater than 0 and not greater than 100.');}var V=this;V.ma=amount;if(this.ez===false){this.sv.then(function(sD){V.bU.DV(amount);});}else{V.bU.DV(amount);}return V;};SingleSessionViewerControl.prototype.getSvgLineWidthMultiplier=function(){var V=this;if(this.ez===false){return V.ma;}else{var bU=V.bU;return bU.ayo();}};if(Object.defineProperties){Object.defineProperties(SingleSessionViewerControl.prototype,{"pageCount":{enumerable:true,get:function(){return this.getPageCount();}},"pageNumber":{enumerable:true,get:function(){return this.getPageNumber();},set:function(value){return this.setPageNumber(value);}},"searchRequest":{enumerable:true,get:function(){return this.bN;}},"selectedSearchResult":{enumerable:true,get:function(){return this.getSelectedSearchResult();},set:function(val){return this.setSelectedSearchResult(val,true);}},"currentMouseTool":{enumerable:true,get:function(){return this.getCurrentMouseTool();},set:function(value){return this.setCurrentMouseTool(value);}},"atMaxScale":{enumerable:true,get:SingleSessionViewerControl.prototype.getAtMaxScale},"atMinScale":{enumerable:true,get:SingleSessionViewerControl.prototype.getAtMinScale},"scaleFactor":{enumerable:true,get:function(){return this.getScaleFactor();},set:function(value){return this.setScaleFactor(value);}},"selectedMarks":{enumerable:true,get:SingleSessionViewerControl.prototype.getSelectedMarks},"viewMode":{enumerable:true,get:function(){return this.getViewMode();},set:function(value){return this.setViewMode(value);}},"isCommentsPanelOpen":{enumerable:true,get:function(){return this.getIsCommentsPanelOpen();}},"selectedConversation":{enumerable:true,get:function(){return this.getSelectedConversation();},set:function(conversation){return this.setSelectedConversation(conversation);}},"redactionViewMode":{enumerable:true,get:function(){return this.getRedactionViewMode();},set:function(value){return this.setRedactionViewMode(value);}},"markHandleMode":{enumerable:true,get:function(){return this.getMarkHandleMode();},set:function(value){return this.setMarkHandleMode(value);}}});}module.exports=SingleSessionViewerControl;},{"../IPCC/IPCC":29,"./PCCViewer.Helper":144,"./PCCViewer.MarkDeserializer":148,"./PCCViewer.MarkSerializer":150,"./PCCViewer.Print":158}],167:[function(require,module,exports){var Gi=function(){},iC={ajn:0,aEr:1,HC:2};var ThumbnailControl=function(domElement,viewerControl){if(!domElement|| !IPCC.T.uh(domElement)){throw new Error('The "domElement" parameter is not a valid HTML Element');}if(!viewerControl|| !(viewerControl instanceof PCCViewer.ViewerControl)){throw new Error('The "viewerControl" parameter is not a valid PCCViewer.ViewerControl object');}var V=this;this.iC=iC.ajn;this.aX=viewerControl.bz.aX;this._debug= ! !this.aX.debug;this.aFC="Single";this.Kp=[];this.pI={};if(!this.dn){this.dn=viewerControl;}else{throw new Error("This instance of thumbnail already is attached to a ViewerControl.");}PCCViewer.EventEmitter.extend(this);this.bb=domElement;if(viewerControl.bz.mZ){V.iC=iC.HC;V.FP(viewerControl.getPageCount());V.VT(V.bb);}else{V.iC=iC.aEr;V.FP(1,0);var IF=function(){viewerControl.off('PageCountReady',IF);V.FP(viewerControl.getPageCount(),1);V.VT(V.bb);};viewerControl.on('PageCountReady',IF);}viewerControl.on('PageRotated',function(av){IPCC.T.forEach(V.pI,function(au){if(au.bx===(av.pageNumber-1)){if(au.vH===true){V.Vf(au);}}});});viewerControl.on('DocumentRotated',function(av){IPCC.T.forEach(V.pI,function(au){if(au.vH===true){V.Vf(au);}});});viewerControl.on('ViewingSessionChanging',function(av){V.aiK();V.abm([]);});viewerControl.on('ViewingSessionChanged',function(av){V.aX=viewerControl.bz.aX;if(viewerControl.bz.mZ){V.FP(viewerControl.getPageCount());}else{V.FP(1,0);var IF=function(){viewerControl.off('PageCountReady',IF);V.FP(viewerControl.getPageCount(),1);};viewerControl.on('PageCountReady',IF);}});};ThumbnailControl.prototype.getViewerControl=function(){return this.dn;};ThumbnailControl.prototype.FP=function(fC,fX){fX=fX||0;var V=this,IP=document.createDocumentFragment();for(var i=fX;i<fC;i++){var _parent=document.createElement('div');_parent.className='pccThumbnailWrapper';var fJ=document.createElement('div');fJ.className='pccThumbnail';var sB=document.createElement('div');sB.className='pccThumbnailView';sB.id='pcc-thumbnailPage-'+i+'-'+IPCC.Cx();fJ.appendChild(sB);_parent.appendChild(fJ);IP.appendChild(_parent);V.pI[i]={SP:_parent,cK:fJ,sB:sB,bx:i,ax:{},vH:false,kR:0,kr:0,gB:0};}IPCC.T.forEach(V.pI,function(au){var ZB=document.createElement('div'),tW=document.createElement('span'),aAw=document.createTextNode(au.bx+1);ZB.className='pccThumbnailLabel';tW.appendChild(aAw);ZB.appendChild(tW);au.cK.appendChild(ZB);au.cK.onclick=function(){V.abm([au.bx+1]);};});V.bb.appendChild(IP);this.SO();return this;};ThumbnailControl.EventType={PageSelectionChanged:"PageSelectionChanged"};ThumbnailControl.prototype.getSelectedPages=function getSelectedPages(){if(!this.iC){return[];}return[].concat(this.Kp);};ThumbnailControl.prototype.setSelectedPages=function setSelectedPages(pageNumbers){if(!this.iC){return this;}var fC=this.dn.getPageCount();if(typeof pageNumbers==='number'){pageNumbers=[pageNumbers];}else if(Object.prototype.toString.call(pageNumbers)!=='[object Array]'){throw new Error(pageNumbers+' is not a number or an array of numbers');}IPCC.T.forEach(pageNumbers,function(gv,H){if(isNaN(gv)){throw new Error(gv+' (array index '+H+') is not a number');}if(gv<1||gv>fC){throw new Error(gv+' (array index '+H+') is out of range');}});this.abm([].concat(pageNumbers).sort());return this;};if(Object.defineProperties){Object.defineProperties(ThumbnailControl.prototype,{"selectedPages":{enumerable:true,get:function(){return this.getSelectedPages();},set:function(pageNumbers){return this.setSelectedPages(pageNumbers);}},"viewerControl":{enumerable:true,get:function(){return this.getViewerControl();}},"visiblePages":{emunerable:true,get:function(){return this.getVisiblePages();}}});}ThumbnailControl.prototype.scrollTo=function(pageNumber,options){var gv=Number(pageNumber);if(gv!==(gv|0)||gv<1||gv>this.dn.getPageCount()){throw new Error(pageNumber+' is not a valid page number');}var mk=false,V=this,aX=options||{};IPCC.T.forEach(this.pI,function(au){if(mk){return;}if(au.bx+1===gv){mk=true;V.UZ(au,undefined,! !aX.forceAlignTop);}});return this;};ThumbnailControl.prototype.UZ=function(au,lW,axR){lW=lW||IPCC.T.ZR(this.bb.getBoundingClientRect());var uI=IPCC.T.ZR(au.SP.getBoundingClientRect());if(uI.top>lW.top&&uI.bottom<lW.bottom){return;}var ahT=window.getComputedStyle?getComputedStyle(au.SP):au.SP.currentStyle,gb;if(uI.top<lW.top||axR){gb=uI.top-lW.top+this.bb.scrollTop-parseInt(ahT.marginTop,10);}else if(uI.bottom>lW.bottom){gb=uI.bottom-lW.top-lW.height+this.bb.scrollTop+parseInt(ahT.marginBottom,10);}if(gb!==undefined){this.bb.scrollTop=gb;}return this;};ThumbnailControl.prototype.abm=function(kz){if(IPCC.T.azi(this.Kp,kz)){return this;}var ZO='pcc-thumbnail-selected',Hf=new RegExp(ZO),WJ=false,abr=[].concat(kz),aay=abr.shift(),amx=false,lW=IPCC.T.ZR(this.bb.getBoundingClientRect()),V=this;IPCC.T.forEach(this.pI,function(au){if(au.bx===aay-1){IPCC.T.ahH(au.cK,ZO);WJ=true;aay=abr.shift()||0;if(!amx){amx=true;V.UZ(au,lW);}return;}if(Hf.test(au.cK.className)){IPCC.T.akf(au.cK,ZO);WJ=true;}});this.Kp=kz;if(WJ){this.trigger(PCCViewer.ThumbnailControl.EventType.PageSelectionChanged,{pageNumbers:[].concat(this.Kp)});}return this;};ThumbnailControl.prototype.axG=function(){var ce=this.LZ(),V=this,xo;IPCC.T.forEach(ce,function(au){if(!xo&&IPCC.T.inArray(V.Kp,au.bx+1)){xo=au;}});if(!xo){xo=ce[0];}return xo;};ThumbnailControl.prototype.reflow=function(){if(!this.iC){return this;}var Cy,Di,be,as,OR,Pk,gB,xo=this.axG();IPCC.T.forEach(this.pI,function(au){if(au.vH){au.cK.style.height=au.sB.style.height='';au.cK.style.width=au.sB.style.width='';}});IPCC.T.forEach(this.pI,function(au){if(au.vH&&au.ax.en()){Cy=au.cK.offsetWidth;Di=au.cK.offsetHeight;gB=au.ax.aAl();if(Math.abs(gB)===90||Math.abs(gB)===270){as=au.ax.kS();be=au.ax.hX();}else{be=au.ax.kS();as=au.ax.hX();}OR=be/as;Pk=Cy/Di;var kR,kr;if(OR<Pk){kr=Di;kR=Math.floor(kr*be/as);}else{kR=Cy;kr=Math.floor(kR*as/be);}au.kR=kR;au.kr=kr;}});IPCC.T.forEach(this.pI,function(au){if(au.vH&&au.ax&&au.ax.en()){au.sB.style.height=au.kr+'px';au.sB.style.width=au.kR+'px';au.ax.Vy(IPCC.Web.UI.FitType.FullImage);au.ax.dC();}});if(xo){this.UZ(xo);}this.SO();return this;};ThumbnailControl.prototype.destroy=function(){if(!this.iC){return this;}this.iC=iC.ajn;this.aiK();this.on=this.off=this.trigger=Gi;this.hW={};};ThumbnailControl.prototype.aiK=function(){IPCC.T.forEach(this.pI,function(au){if(au.ax&&au.ax.dispose){au.ax.dispose();}});while(this.bb.firstChild){this.bb.removeChild(this.bb.firstChild);}};ThumbnailControl.prototype.getVisiblePages=function(){if(!this.iC){return[];}var ce=this.LZ();return IPCC.T.map(ce,function(au){return au.bx+1;});};ThumbnailControl.prototype.LZ=function LZ(){var aGv=this.bb.getBoundingClientRect(),uI;function Xd(lW,Oq){return(!(Oq.top>=lW.bottom||Oq.left>=lW.right||Oq.bottom<=lW.top||Oq.right<=lW.left));};return IPCC.T.filter(this.pI,function(au){uI=au.cK.getBoundingClientRect();return Xd(aGv,uI);});};ThumbnailControl.prototype.SO=function(){var V=this,ce=V.LZ();IPCC.T.forEach(ce,function(au){if(!au.vH){au.ax=V.jj(au);au.vH=true;}});return this;};ThumbnailControl.prototype.VT=function VT(cK){var KS={},V=this;function avY(aS,vM,nA){if(KS[aS]){clearTimeout(KS[aS]);KS[aS]=undefined;}KS[aS]=setTimeout(vM,nA||0);};IPCC.Web.UI.ah.addHandler(cK,'scroll',function(ev){avY('scroll',function(){V.SO();},300);});};ThumbnailControl.prototype.jj=function(au,mD){var V=this;mD=mD||Gi;var bk={documentIdentifier:V.aX.documentID,pageNumber:au.bx,viewFitType:IPCC.Web.UI.FitType.FullImage,imageHandlerUrl:V.aX.imageHandlerUrl,encryption:V.aX.encryption,handleTouchEvents:false};var ax=IPCC.initializePageViewPlugin(au.sB,bk);ax.set_debug(V._debug);ax.set_mouseTool(IPCC.Web.UI.MouseTool.None);var wN=false;function Hc(){mD();};ax.add_pageOpened(function(){V.Vf(au);});ax.add_pageDisplayed(function(){if(!wN){Hc();}});ax.add_textPageReady(function(){if(wN){ax.dC();Hc();}});ax.add_pageOpenFailed(function(){});ax.add_textExtractionFailed(function(){});var bz=V.dn.bz;bk.artPage=bz.bU.gJ(bz.ds.getPage(au.bx));bk.artPage.CN(function(K){if(K.get_type()===608){wN=true;}});ax.awF(bk);ax.set_mouseTool(IPCC.Web.UI.MouseTool.None);return ax;};ThumbnailControl.prototype.Vf=function(au){var V=this;var bz=V.dn.bz;var EG=bz.bU.UH(au.bx);var gB=au.gB;var ack=gB;if(EG!==au.gB){ack=EG-gB;}var ax=au.ax,iZ=au.sB,as,be;if(!au.vH|| !ax.en()){return;}iZ.style.height='';iZ.style.width='';if(Math.abs(EG)===90||Math.abs(EG)===270){as=ax.kS();be=ax.hX();}else{as=ax.hX();be=ax.kS();}var Cy=iZ.offsetWidth,Di=iZ.offsetHeight;if(au.gB!==EG){ax.rotate(ack);au.gB=EG;}var OR=be/as,Pk=Cy/Di;var kR,kr;if(OR<Pk){kr=Di;kR=Math.floor(kr*be/as);}else{kR=Cy;kr=Math.floor(kR*as/be);}iZ.style.height=kr+'px';iZ.style.width=kR+'px';};module.exports=ThumbnailControl;},{}],168:[function(require,module,exports){function abN(message,value){var err=new Error('PCC Range Error: '+message);err.value=value;return err;};function aEc(aFs){var ay=[];var aeD=function(n){return!(isNaN(+n));};var aeS=aFs.split(',');var Lb,YT;var Lv=0;var wo=0;for(var H=0;H<aeS.length;H++){var Io=aeS[H].split('-');var Bm=Io[0].replace(/\s+/g,'');if(Bm.length===0){continue;}var Iz=Bm;if(Io[1]!==undefined&&Io[1]!==""){Iz=Io[1].replace(/\s+/g,'');}Bm= +(Bm);Iz= +(Iz);if(aeD(Bm)===true){Lv=parseInt(Bm);}if(aeD(Iz)===true){wo=parseInt(Iz);}if(Lv<wo){Lb=Lv;YT=wo;}else{Lb=wo;YT=Lv;}if(Io.length>1){for(var aJ=Lb;aJ<=YT;aJ++){ay.push(aJ);}}else{ay.push(Lb);}}ay.sort(function(a,b){return a-b;});for(H=ay.length-1;H>0;H--){if(ay[H-1]===ay[H]){ay.splice(H,1);}}return ay;};var Util={save:function(filename,stringValue){if('Blob'in window){var blob=new Blob([stringValue],{'type':'text/plain;charset=utf-8'});if(window.navigator.msSaveBlob){window.navigator.msSaveBlob(blob,filename);}else if(window.saveAs){window.saveAs(blob,filename);}else{var a=document.createElement('a');a.href=URL.createObjectURL(blob);a.target='_blank';a.download=filename;a.style.display='none';document.body.appendChild(a);a.click();document.body.removeChild(a);}}else{if(document.execCommand){var oWin=window.open('about:blank','_blank');oWin.document.write(stringValue);oWin.document.close();oWin.document.execCommand('SaveAs',true,filename+'.txt');oWin.close();}}},calculateNonOverlappingSelections:function(selections,backgroundColor){var hy;if(!(selections instanceof Array)){hy=[selections];}else{hy=selections;}IPCC.T.forEach(hy,function(db){IPCC.aA.mt(db.startIndex,'selection.startIndex',0,Number.MAX_VALUE);IPCC.aA.mt(db.length,'selection.length',1,Number.MAX_VALUE);IPCC.aA.dI(db.color,'selection.color');IPCC.aA.mt(db.opacity,'selection.opacity',0,255);});IPCC.aA.dI(backgroundColor,'backgroundColor');var arJ=IPCC.T.adH(hy);return IPCC.T.map(arJ,function(ab){ab.length=ab.endIndex-ab.startIndex+1;return ab;});},layerColors:function(colors,backgroundColor){var NY;if(!(colors instanceof Array)){NY=[colors];}else{NY=colors;}IPCC.T.forEach(NY,function(db){IPCC.aA.dI(db.color,'selection.color');IPCC.aA.mt(db.opacity,'selection.opacity',0,255);});IPCC.aA.dI(backgroundColor,'backgroundColor');return IPCC.T.agI(NY,backgroundColor);},validatePageRange:function(pageRange,options){if(pageRange&&typeof pageRange!=='string'){return false;}else{try{PCCViewer.Util.convertPageRangeToArray(pageRange,options);}catch(e){return false;}return true;}},convertPageRangeToArray:function(pageRange,options){options=options||{};var lowerLimit=options.lowerLimit||1,upperLimit=options.upperLimit||Number.MAX_VALUE,allowEmpty=options.allowEmpty||false;if(pageRange!=='all'&&pageRange.match(/[^0-9\-\,\s]/g)){throw abN('Illegal page range value',pageRange);}var cR=[];if(pageRange==='all'){while(upperLimit>=lowerLimit){cR.unshift(upperLimit--);}}else{cR=aEc(pageRange);if((cR.length===0&& !allowEmpty)||cR[0]<lowerLimit||cR[cR.length-1]>upperLimit){throw abN('Pages are out of range',cR.join(', '));}}return cR;}};module.exports=Util;},{}],169:[function(require,module,exports){var Eo={Document:"Document",EqualWidthPages:"EqualWidthPages",SinglePage:"SinglePage",EqualFitPages:"EqualFitPages"};module.exports=Eo;},{}],170:[function(require,module,exports){"use strict";var IPCC=require('./../IPCC/IPCC');var EventEmitter=require('./PCCViewer.EventEmitter');var abh=require('./PCCViewer.SingleSessionViewerControl');function ViewerControl(element,options){if(!(this instanceof ViewerControl)){return new ViewerControl(element,options);}EventEmitter.extend(this);this.Ak=IPCC.T.extend({},options);this.bz=new abh(element,this,options);this.KQ={};return this;};ViewerControl.prototype.getPageCount=function(){return this.bz.getPageCount();};ViewerControl.prototype.getPageNumber=function(){return this.bz.getPageNumber();};ViewerControl.prototype.setPageNumber=function(pageNumber){this.bz.setPageNumber(pageNumber);return this;};ViewerControl.prototype.changeToFirstPage=function(){this.bz.changeToFirstPage();return this;};ViewerControl.prototype.changeToLastPage=function(){this.bz.changeToLastPage();return this;};ViewerControl.prototype.changeToNextPage=function(){this.bz.changeToNextPage();return this;};ViewerControl.prototype.changeToPrevPage=function(){this.bz.changeToPrevPage();return this;};ViewerControl.prototype.scrollBy=function(offsetX,offsetY){this.bz.scrollBy(offsetX,offsetY);return this;};ViewerControl.prototype.scrollTo=function(target){this.bz.scrollTo(target);return this;};ViewerControl.prototype.scrollToAsync=function(target){return this.bz.scrollToAsync(target);};ViewerControl.prototype.rotatePage=function(degreesClockwise){this.bz.rotatePage(degreesClockwise);return this;};ViewerControl.prototype.rotateDocument=function(degreesClockwise){this.bz.rotateDocument(degreesClockwise);return this;};ViewerControl.prototype.getScaleFactor=function(){return this.bz.getScaleFactor();};ViewerControl.prototype.setScaleFactor=function(scaleFactor){this.bz.setScaleFactor(scaleFactor);return this;};ViewerControl.prototype.getMinScaleFactor=function(){return this.bz.getMinScaleFactor();};ViewerControl.prototype.getMaxScaleFactor=function(){return this.bz.getMaxScaleFactor();};ViewerControl.prototype.zoomIn=function(zoomFactor){this.bz.zoomIn(zoomFactor);return this;};ViewerControl.prototype.zoomOut=function(zoomFactor){this.bz.zoomOut(zoomFactor);return this;};ViewerControl.prototype.getViewMode=function(){return this.bz.getViewMode();};ViewerControl.prototype.setViewMode=function(viewMode){this.bz.setViewMode(viewMode);return this;};ViewerControl.prototype.getPageLayout=function(){return this.bz.getPageLayout();};ViewerControl.prototype.setPageLayout=function(pageLayout){this.bz.setPageLayout(pageLayout);return this;};ViewerControl.prototype.getAtMaxScale=function(){return this.bz.getAtMaxScale();};ViewerControl.prototype.getAtMinScale=function(){return this.bz.getAtMinScale();};ViewerControl.prototype.fitContent=function(fitType){this.bz.fitContent(fitType);return this;};ViewerControl.prototype.getPageRotation=function(pageNumber){if(arguments.length>0){return this.bz.getPageRotation(pageNumber);}else{return this.bz.getPageRotation();}};ViewerControl.prototype.search=function(dH){return this.bz.search(dH);};ViewerControl.prototype.clientSearch=function(searchQuery){return this.bz.clientSearch(searchQuery);};ViewerControl.prototype.serverSearch=function(searchQuery){return this.bz.serverSearch(searchQuery);};ViewerControl.prototype.getSearchRequest=function(){return this.bz.getSearchRequest();};ViewerControl.prototype.clearSearch=function(){this.bz.clearSearch();return this;};ViewerControl.prototype.validateSearch=function(dH){return this.bz.validateSearch(dH);};ViewerControl.prototype.requestRevisions=function(){return this.bz.requestRevisions();};ViewerControl.prototype.getDownloadDocumentURL=function(){return this.bz.getDownloadDocumentURL();};ViewerControl.prototype.requestDocumentHyperlinks=function(pageNumber){return this.bz.requestDocumentHyperlinks(pageNumber);};ViewerControl.prototype.print=function(options){return this.bz.print(options);};ViewerControl.prototype.validatePrintRange=function(range){return this.bz.validatePrintRange(range);};ViewerControl.prototype.canPrintMarks=function(){return this.bz.canPrintMarks();};ViewerControl.prototype.deserializeMarks=function deserializeMarks(values){return this.bz.deserializeMarks(values);};ViewerControl.prototype.serializeMarks=function serializeMarks(marks){return this.bz.serializeMarks(marks);};ViewerControl.prototype.setRedactionViewMode=function(redactionViewMode){this.bz.setRedactionViewMode(redactionViewMode);return this;};ViewerControl.prototype.getRedactionViewMode=function(){return this.bz.getRedactionViewMode();};ViewerControl.prototype.convertToRedaction=function(searchResult){return this.bz.convertToRedaction(searchResult);};ViewerControl.prototype.convertToHighlight=function(searchResult){return this.bz.convertToHighlight(searchResult);};ViewerControl.prototype.setSelectedSearchResult=function(searchResult,scrollTo){this.bz.setSelectedSearchResult(searchResult,scrollTo);return this;};ViewerControl.prototype.clearSelectedSearchResult=function(){this.bz.clearSelectedSearchResult();return this;};ViewerControl.prototype.getSelectedSearchResult=function(){return this.bz.getSelectedSearchResult();};ViewerControl.prototype.requestPageText=function(pageNumber){return this.bz.requestPageText(pageNumber);};ViewerControl.prototype.disposePageText=function(pageNumber){this.bz.disposePageText(pageNumber);return this;};ViewerControl.prototype.isPageTextReady=function(pageNumber){return this.bz.isPageTextReady(pageNumber);};ViewerControl.prototype.documentHasText=function(){return this.bz.documentHasText();};ViewerControl.prototype.requestPageAttributes=function(pageNumber){return this.bz.requestPageAttributes(pageNumber);};ViewerControl.prototype.destroy=function(){if(this.bz){this.bz.destroy();}this.bz=null;this.qD=true;};ViewerControl.prototype.getMarkById=function(markId){return this.bz.getMarkById(markId);};ViewerControl.prototype.getMarksByType=function(markType){return this.bz.getMarksByType(markType);};ViewerControl.prototype.getAllMarks=function(){return this.bz.getAllMarks();};ViewerControl.prototype.addMarkFromSearchResult=function(searchResult,markType){return this.bz.addMarkFromSearchResult(searchResult,markType);};ViewerControl.prototype.addMark=function(pageNumber,markType){return this.bz.addMark(pageNumber,markType);};ViewerControl.prototype.deleteMarks=function(marks){this.bz.deleteMarks(marks);return this;};ViewerControl.prototype.deleteAllMarks=function(){this.bz.deleteAllMarks();return this;};ViewerControl.prototype.hideMarks=function(marks){this.bz.hideMarks(marks);return this;};ViewerControl.prototype.showMarks=function(marks){this.bz.showMarks(marks);return this;};ViewerControl.prototype.moveMarkToFront=function(mark){this.bz.moveMarkToFront(mark);return this;};ViewerControl.prototype.moveMarkToBack=function(mark){this.bz.moveMarkToBack(mark);return this;};ViewerControl.prototype.moveMarkForward=function(mark){this.bz.moveMarkForward(mark);return this;};ViewerControl.prototype.moveMarkBackward=function(mark){this.bz.moveMarkBackward(mark);return this;};ViewerControl.prototype.getSelectedMarks=function(){return this.bz.getSelectedMarks();};ViewerControl.prototype.selectMarks=function(marks){this.bz.selectMarks(marks);return this;};ViewerControl.prototype.deselectMarks=function(marks){this.bz.deselectMarks(marks);return this;};ViewerControl.prototype.deselectAllMarks=function(){this.bz.deselectAllMarks();return this;};ViewerControl.prototype.copyMarks=function(marks){return this.bz.copyMarks(marks);};ViewerControl.prototype.enterTextMarkEditingMode=function(K){this.bz.enterTextMarkEditingMode(K);return this;};ViewerControl.prototype.getCharacterIndex=function(sortableObject){return this.bz.getCharacterIndex(sortableObject);};ViewerControl.prototype.getCurrentMouseTool=function(){return this.bz.getCurrentMouseTool();};ViewerControl.prototype.setCurrentMouseTool=function(name){this.bz.setCurrentMouseTool(name);return this;};ViewerControl.prototype.saveMarkup=function(recordName,options){return this.bz.saveMarkup(recordName,options);};ViewerControl.prototype.loadMarkup=function(recordName,options){return this.bz.loadMarkup(recordName,options);};ViewerControl.prototype.getSavedMarkupNames=function(){return this.bz.getSavedMarkupNames();};ViewerControl.prototype.getMarkupLayerCollection=function(){return this.bz.getMarkupLayerCollection();};ViewerControl.prototype.requestMarkupLayerNames=function(metadata){return this.bz.requestMarkupLayerNames(metadata);};ViewerControl.prototype.getActiveMarkupLayer=function(){return this.bz.getActiveMarkupLayer();};ViewerControl.prototype.setActiveMarkupLayer=function(markupLayer){return this.bz.setActiveMarkupLayer(markupLayer);};ViewerControl.prototype.loadMarkupLayers=function(layerRecordIds,options){return this.bz.loadMarkupLayers(layerRecordIds,options);};ViewerControl.prototype.saveMarkupLayer=function(id){return this.bz.saveMarkupLayer(id);};ViewerControl.prototype.burnMarkup=function(burnOptions){return this.bz.burnMarkup(burnOptions);};ViewerControl.prototype.convertDocument=function(zx){return this.bz.convertDocument(zx);};ViewerControl.prototype.requestDocumentConversion=function(zx){return this.bz.requestDocumentConversion(zx);};ViewerControl.prototype.loadAttachments=function(){return this.bz.loadAttachments();};ViewerControl.prototype.setMarkHandleMode=function(markHandleMode){this.bz.setMarkHandleMode(markHandleMode);return this;};ViewerControl.prototype.getMarkHandleMode=function(){return this.bz.getMarkHandleMode();};ViewerControl.prototype.setConversationDOMFactory=function(factoryFunction){this.bz.setConversationDOMFactory(factoryFunction);return this;};ViewerControl.prototype.getConversationDOMFactory=function(){return this.bz.getConversationDOMFactory();};ViewerControl.prototype.refreshConversations=function(conversations){this.bz.refreshConversations(conversations);return this;};ViewerControl.prototype.openCommentsPanel=function(){this.bz.openCommentsPanel();return this;};ViewerControl.prototype.closeCommentsPanel=function(){this.bz.closeCommentsPanel();return this;};ViewerControl.prototype.getIsCommentsPanelOpen=function(){return this.bz.getIsCommentsPanelOpen();};ViewerControl.prototype.setSelectedConversation=function(conversation){this.bz.setSelectedConversation(conversation);return this;};ViewerControl.prototype.getSelectedConversation=function(){return this.bz.getSelectedConversation();};ViewerControl.prototype.clearMouseSelectedText=function(textSelection){this.bz.clearMouseSelectedText(textSelection);return this;};ViewerControl.prototype.convertPageToWindowCoordinates=function(pageNumber,points){return this.bz.convertPageToWindowCoordinates(pageNumber,points);};ViewerControl.prototype.selectEditorText=function(){this.bz.selectEditorText();return this;};ViewerControl.prototype.setSharpening=function(amount){this.bz.setSharpening(amount);return this;};ViewerControl.prototype.getSharpening=function(){return this.bz.getSharpening();};ViewerControl.prototype.setGamma=function(amount){this.bz.setGamma(amount);return this;};ViewerControl.prototype.getGamma=function(){return this.bz.getGamma();};ViewerControl.prototype.setSvgLineWidthMultiplier=function(amount){this.bz.setSvgLineWidthMultiplier(amount);return this;};ViewerControl.prototype.getSvgLineWidthMultiplier=function(){return this.bz.getSvgLineWidthMultiplier();};ViewerControl.prototype.changeViewingSession=function(viewingSessionId,isRestorable){var V=this;var Fn=V.bz;var cU=Fn.eZ;var aeM=V.Ak.documentID;if(V.Wg){throw "The changeViewingSession method cannot be used again before the 'ViewingSessionChanged' event has fired.";}if(V.bz.ez===false){throw "The changeViewingSession method can not be used until 'ViewerReady' state is reached.";}if(aeM===viewingSessionId){return V;}V.Wg=true;V.trigger(PCCViewer.EventType.ViewingSessionChanging,{viewingSessionId:viewingSessionId});if(isRestorable){V.KQ[aeM]={control:Fn,options:V.Ak};Fn.ase();Fn.aEd();}else{Fn.destroy();}if(V.KQ[viewingSessionId]){var aeY=V.KQ[viewingSessionId];V.Ak=aeY.options;V.bz=aeY.control;V.bz.aAY();V.bz.aCo();V.Wg=false;V.trigger(PCCViewer.EventType.ViewingSessionChanged,{viewingSessionId:viewingSessionId});if(V.bz.yp){V.trigger("PageCountReady",{pageCount:V.bz.fC});}delete V.KQ[viewingSessionId];}else{V.Ak=IPCC.T.extend({},V.Ak);V.Ak.documentID=viewingSessionId;V.bz=null;V.bz=new abh(cU,V,V.Ak);V.bz.axu(function(){V.Wg=false;V.trigger(PCCViewer.EventType.ViewingSessionChanged,{viewingSessionId:viewingSessionId});});}return V;};if(Object.defineProperties){Object.defineProperties(ViewerControl.prototype,{"pageCount":{enumerable:true,get:function(){return this.bz.getPageCount();}},"pageNumber":{enumerable:true,get:function(){return this.bz.getPageNumber();},set:function(value){return this.bz.setPageNumber(value);}},"searchRequest":{enumerable:true,get:function(){return this.bz.bN;}},"selectedSearchResult":{enumerable:true,get:function(){return this.bz.getSelectedSearchResult();},set:function(val){return this.bz.setSelectedSearchResult(val,true);}},"currentMouseTool":{enumerable:true,get:function(){return this.bz.getCurrentMouseTool();},set:function(value){return this.bz.setCurrentMouseTool(value);}},"atMaxScale":{enumerable:true,get:function(){return this.bz.getAtMaxScale();}},"atMinScale":{enumerable:true,get:function(){return this.bz.getAtMinScale();}},"scaleFactor":{enumerable:true,get:function(){return this.bz.getScaleFactor();},set:function(value){return this.bz.setScaleFactor(value);}},"selectedMarks":{enumerable:true,get:function(){return this.bz.getSelectedMarks();}},"viewMode":{enumerable:true,get:function(){return this.bz.getViewMode();},set:function(value){return this.bz.setViewMode(value);}},"isCommentsPanelOpen":{enumerable:true,get:function(){return this.bz.getIsCommentsPanelOpen();}},"selectedConversation":{enumerable:true,get:function(){return this.bz.getSelectedConversation();},set:function(conversation){return this.bz.setSelectedConversation(conversation);}},"redactionViewMode":{enumerable:true,get:function(){return this.bz.getRedactionViewMode();},set:function(value){return this.bz.setRedactionViewMode(value);}},"markHandleMode":{enumerable:true,get:function(){return this.bz.getMarkHandleMode();},set:function(value){return this.bz.setMarkHandleMode(value);}}});}module.exports=ViewerControl;},{"./../IPCC/IPCC":29,"./PCCViewer.EventEmitter":140,"./PCCViewer.SingleSessionViewerControl":166}],171:[function(require,module,exports){var PCCViewer={ViewMode:require('./PCCViewer.ViewMode'),MarkHandleMode:require('./PCCViewer.MarkHandleMode'),RedactionViewMode:require('./PCCViewer.RedactionViewMode'),PageLayout:require('./PCCViewer.PageLayout'),EventType:require('./PCCViewer.EventType'),Event:require('./PCCViewer.Event'),ScaleTrigger:require('./PCCViewer.ScaleTrigger'),FitType:require('./PCCViewer.FitType'),Promise:require('./PCCViewer.Deferred').Promise,Deferred:require('./PCCViewer.Deferred').Deferred,EventEmitter:require('./PCCViewer.EventEmitter'),vg:require('./PCCViewer.EventEmitterProxy'),Util:require('./PCCViewer.Util'),ObservableCollection:require('./PCCViewer.ObservableCollection'),axN:require('prizmdoc-input-mask'),Data:require('./PCCViewer.Data').Data,SessionData:require('./PCCViewer.Data').SessionData,Ajax:require('./PCCViewer.Ajax').Ajax,AjaxResponse:require('./PCCViewer.Ajax').AjaxResponse,Language:require('./PCCViewer.Language'),Error:require('./PCCViewer.Error'),ViewerControl:require('./PCCViewer.ViewerControl'),sK:require('./PCCViewer.Helper'),MouseTool:require('./PCCViewer.MouseTool').MouseTool,MouseTools:require('./PCCViewer.MouseTool').MouseTools,Conversation:require('./PCCViewer.Comments').Conversation,Comment:require('./PCCViewer.Comments').Comment,ImageStamps:require('./PCCViewer.ImageStamps'),DocumentHyperlink:require('./PCCViewer.DocumentHyperlink'),_Search:require('./PCCViewer.Search')._Search,SearchTask:require('./PCCViewer.Search').SearchTask,SearchRequest:require('./searchRequest'),SearchResult:require('./searchResult').SearchResult,Xy:require('./PCCViewer.ServerSearch'),SearchTaskResult:require('./searchResult').SearchTaskResult,Ry:require('./PCCViewer.ClientSearch'),Gt:require('prizmdoc-search'),Signatures:require('./PCCViewer.Signature').Signatures,SignatureControl:require('./PCCViewer.Signature').SignatureControl,SignatureDisplay:require('./PCCViewer.Signature').SignatureDisplay,ThumbnailControl:require('./PCCViewer.ThumbnailControl'),Revision:require('./PCCViewer.Revision'),FZ:require('./PCCViewer.RevisionsRequest').FZ,RevisionsRequest:require('./PCCViewer.RevisionsRequest').RevisionsRequest,ConversionRequest:require('./PCCViewer.ConversionRequest'),BurnRequest:require('./PCCViewer.BurnRequest'),PrintRequest:require('./PCCViewer.Print').PrintRequest,PrintControl:require('./PCCViewer.Print').PrintControl,Mark:require('./PCCViewer.Marks'),MarkupLayer:require('./PCCViewer.MarkupLayer'),LoadMarkupLayersRequest:require('./PCCViewer.LoadMarkupLayersRequest'),MarkupLayerCollection:require('./PCCViewer.MarkupLayerCollection'),PasswordProtectedDocumentLoader:require('./PCCViewer.PasswordProtectedDocumentLoader'),};module.exports=PCCViewer;},{"./PCCViewer.Ajax":130,"./PCCViewer.BurnRequest":131,"./PCCViewer.ClientSearch":132,"./PCCViewer.Comments":133,"./PCCViewer.ConversionRequest":134,"./PCCViewer.Data":135,"./PCCViewer.Deferred":136,"./PCCViewer.DocumentHyperlink":137,"./PCCViewer.Error":138,"./PCCViewer.Event":139,"./PCCViewer.EventEmitter":140,"./PCCViewer.EventEmitterProxy":141,"./PCCViewer.EventType":142,"./PCCViewer.FitType":143,"./PCCViewer.Helper":144,"./PCCViewer.ImageStamps":145,"./PCCViewer.Language":146,"./PCCViewer.LoadMarkupLayersRequest":147,"./PCCViewer.MarkHandleMode":149,"./PCCViewer.Marks":151,"./PCCViewer.MarkupLayer":152,"./PCCViewer.MarkupLayerCollection":153,"./PCCViewer.MouseTool":154,"./PCCViewer.ObservableCollection":155,"./PCCViewer.PageLayout":156,"./PCCViewer.PasswordProtectedDocumentLoader":157,"./PCCViewer.Print":158,"./PCCViewer.RedactionViewMode":159,"./PCCViewer.Revision":160,"./PCCViewer.RevisionsRequest":161,"./PCCViewer.ScaleTrigger":162,"./PCCViewer.Search":163,"./PCCViewer.ServerSearch":164,"./PCCViewer.Signature":165,"./PCCViewer.ThumbnailControl":167,"./PCCViewer.Util":168,"./PCCViewer.ViewMode":169,"./PCCViewer.ViewerControl":170,"./searchRequest":172,"./searchResult":173,"prizmdoc-input-mask":2,"prizmdoc-search":7}],172:[function(require,module,exports){var SearchRequest=function(tn){this.hW={};this.dH={};this.fk=[];this.vW=false;this.fp=null;this.cN=null;this.Ue=[];if(Object.defineProperties){Object.defineProperties(this,{"searchQuery":{configurable: ! !tn,enumerable:true,get:function(){return this.dH;}},"results":{configurable: ! !tn,enumerable:true,get:function(){return this.fk;}},"isComplete":{configurable: ! !tn,enumerable:true,get:function(){return this.vW;}},"errorCode":{configurable: ! !tn,enumerable:true,get:function(){return this.fp;}},"errorMessage":{configurable: ! !tn,enumerable:true,get:function(){return this.cN;}}});}PCCViewer.EventEmitter.extend(this);};SearchRequest.prototype.getSearchQuery=function(){return this.dH;};SearchRequest.prototype.getResults=function(){return this.fk;};SearchRequest.prototype.getIsComplete=function(){return this.vW;};SearchRequest.prototype.getErrorCode=function(){return this.fp;};SearchRequest.prototype.getErrorMessage=function(){return this.cN;};SearchRequest.prototype.getPagesWithoutText=function(){return this.Ue;};SearchRequest.prototype.cancel=function(){this.pP=true;this.trigger('SearchCancelled');};module.exports=SearchRequest;},{}],173:[function(require,module,exports){var SearchResult=function(){this.dE=0;this.aR=0;this.aP=0;this.aO='';this.sM='';this.pM=0;this.cC='';this.zb=0;this.bg='';this.VI='';this.lM=null;};SearchResult.prototype.getId=function(){return this.dE;};SearchResult.prototype.getPageNumber=function(){return this.aR;};SearchResult.prototype.getText=function(){return this.aO;};SearchResult.prototype.getHighlightColor=function(){return this.sM;};SearchResult.prototype.getStartIndexInPage=function(){return this.pM;};SearchResult.prototype.getContext=function(){return this.cC;};SearchResult.prototype.getStartIndexInContext=function(){return this.zb;};SearchResult.prototype.getSearchTerm=function(){return this.bg;};SearchResult.prototype.getBoundingRectangle=function(){return this.lM;};if(Object.defineProperties){Object.defineProperties(SearchResult.prototype,{"pageNumber":{enumerable:true,get:function(){return this.aR;}},"id":{enumerable:true,get:function(){return this.dE;}},"text":{enumerable:true,get:function(){return this.aO;}},"highlightColor":{enumerable:true,get:function(){return this.sM;}},"startIndexInPage":{enumerable:true,get:function(){return this.pM;}},"context":{enumerable:true,get:function(){return this.cC;}},"startIndexInContext":{enumerable:true,get:function(){return this.zb;}},"searchTerm":{enumerable:true,get:function(){return this.bg;}},"boundingRectangle":{enumerable:true,get:function(){return this.getBoundingRectangle();}}});}var SearchTaskResult=function(){this.dE=0;this.aP=0;this.aO='';this.sM='';this.pM=0;this.cC='';this.zb=0;this.bg='';};SearchTaskResult.prototype.getId=function(){return this.dE;};SearchTaskResult.prototype.getText=function(){return this.aO;};SearchTaskResult.prototype.getHighlightColor=function(){return this.sM;};SearchTaskResult.prototype.getStartIndexInInput=function(){return this.pM;};SearchTaskResult.prototype.getContext=function(){return this.cC;};SearchTaskResult.prototype.getStartIndexInContext=function(){return this.zb;};SearchTaskResult.prototype.getSearchTerm=function(){return this.bg;};if(Object.defineProperties){Object.defineProperties(SearchTaskResult.prototype,{"id":{enumerable:true,get:function(){return this.dE;}},"text":{enumerable:true,get:function(){return this.aO;}},"highlightColor":{enumerable:true,get:function(){return this.sM;}},"startIndexInInput":{enumerable:true,get:function(){return this.pM;}},"context":{enumerable:true,get:function(){return this.cC;}},"startIndexInContext":{enumerable:true,get:function(){return this.zb;}},"searchTerm":{enumerable:true,get:function(){return this.bg;}}});}module.exports={SearchTaskResult:SearchTaskResult,SearchResult:SearchResult};},{}],174:[function(require,module,exports){if(typeof window==='undefined'){throw new Error('The viewer-core module can only be used in a browser environment (where a window object exists).');}require('./../css/viewercontrol.css');var IPCC=require('./IPCC/IPCC');var PCCViewer=require('./PCCViewer/PCCViewer');window.IPCC=IPCC;window.PCCViewer=PCCViewer;module.exports=PCCViewer;},{"./../css/viewercontrol.css":11,"./IPCC/IPCC":29,"./PCCViewer/PCCViewer":171}]},{},[174])(174)}); 