// See license at https://www.npmjs.com/package/@prizmdoc/viewer-core
// @prizmdoc/viewer-core@13.13.10
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.viewerCore=f()}})(function(){var define,module,exports;return(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){'use strict';var styleElementsInsertedAtTop=[];var insertStyleElement=function(styleElement,options){var head=document.head||document.getElementsByTagName('head')[0];var lastStyleElementInsertedAtTop=styleElementsInsertedAtTop[styleElementsInsertedAtTop.length-1];options=options||{};options.insertAt=options.insertAt||'bottom';if(options.insertAt==='top'){if(!lastStyleElementInsertedAtTop){head.insertBefore(styleElement,head.firstChild);}else if(lastStyleElementInsertedAtTop.nextSibling){head.insertBefore(styleElement,lastStyleElementInsertedAtTop.nextSibling);}else{head.appendChild(styleElement);}styleElementsInsertedAtTop.push(styleElement);}else if(options.insertAt==='bottom'){head.appendChild(styleElement);}else{throw new Error('Invalid value for parameter \'insertAt\'. Must be \'top\' or \'bottom\'.');}};module.exports={createLink:function(href,attributes){var head=document.head||document.getElementsByTagName('head')[0];var link=document.createElement('link');link.href=href;link.rel='stylesheet';for(var key in attributes){if(!attributes.hasOwnProperty(key)){continue;}var value=attributes[key];link.setAttribute('data-'+key,value);}head.appendChild(link);},createStyle:function(cssText,attributes,extraOptions){extraOptions=extraOptions||{};var style=document.createElement('style');style.type='text/css';for(var key in attributes){if(!attributes.hasOwnProperty(key)){continue;}var value=attributes[key];style.setAttribute('data-'+key,value);}if(style.sheet){style.innerHTML=cssText;style.sheet.cssText=cssText;insertStyleElement(style,{insertAt:extraOptions.insertAt});}else if(style.styleSheet){insertStyleElement(style,{insertAt:extraOptions.insertAt});style.styleSheet.cssText=cssText;}else{style.appendChild(document.createTextNode(cssText));insertStyleElement(style,{insertAt:extraOptions.insertAt});}}};},{}],2:[function(require,module,exports){var cursor=require('./util/cursor.js');var mask=require('./util/mask.js');function InputMask(elem,options){var originalPlaceholder=elem.placeholder;var regexMask=mask.getRegex(options.value,options.translations);function onInput(){var cursorPos=cursor.get(elem);var oldVal=elem.value;var newVal=mask.getValue(oldVal,options.value,options.translations,cursorPos);elem.value=newVal.val;setTimeout(function(){cursor.set(elem,cursorPos+newVal.cursorAdjustment);},1);};function clearInvalidValue(){elem.value=mask.fill(elem.value,options.value,options.translations);if(!regexMask.test(elem.value)){elem.value='';}}(function init(){clearInvalidValue();elem.placeholder=mask.getPlaceholder(options.value,options.translations);elem.addEventListener('input',onInput);elem.addEventListener('focusout',clearInvalidValue);elem.addEventListener('blur',clearInvalidValue);}());this.destroy=function(){clearInvalidValue();elem.placeholder=originalPlaceholder;elem.removeEventListener('input',onInput);elem.removeEventListener('focusout',clearInvalidValue);elem.removeEventListener('blur',clearInvalidValue);};};module.exports=InputMask;},{"./util/cursor.js":3,"./util/mask.js":4}],3:[function(require,module,exports){function getCursor(elem){var position=0;if(elem.selectionEnd){position=elem.selectionEnd;}return Number(position);};function setCursor(elem,position){elem.setSelectionRange(position,position);};module.exports={get:getCursor,set:setCursor};},{}],4:[function(require,module,exports){var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reHasRegExpChar=new RegExp(reRegExpChar.source);function getMaskRegex(mask,translations){var maskRegex='';var char,translation,i;for(i=0;i<mask.length;i++){char=mask.charAt(i);translation=translations[char];if(translation){maskRegex+=translation.toString().replace(/.{1}$|^.{1}/g,'');}else if(reHasRegExpChar.test(char)){maskRegex+=char.replace(reRegExpChar,'\\$&');}else{maskRegex+=char;}}return new RegExp(maskRegex);};function getMaskPlaceholder(mask,translations){var placeholder=mask;var key;for(key in translations){if(translations.hasOwnProperty(key)){if(reHasRegExpChar.test(key)){key=key.replace(reRegExpChar,'\\$&');}placeholder=placeholder.replace(new RegExp(key,'g'),'_');}}return placeholder;};function getMaskValue(value,mask,translations,cursorPos){var result={val:'',cursorAdjustment:0};var m=0;var v=0;var lastUntranslatedMaskChar,maskChar,valChar,translation;while(m<mask.length&&v<value.length){maskChar=mask.charAt(m);valChar=value.charAt(v);translation=translations[maskChar];if(translation){if(valChar.match(translation)){result.val+=valChar;m+=1;}else if(v<cursorPos){result.cursorAdjustment-=1;}else if(valChar===lastUntranslatedMaskChar){lastUntranslatedMaskChar=null;}v+=1;}else{result.val+=maskChar;if(valChar===maskChar){v+=1;}else{if(v<cursorPos){result.cursorAdjustment+=1;}lastUntranslatedMaskChar=maskChar;}m+=1;}}return result;};function fillMask(value,mask,translations){var newVal=value;var index=value.length;var maskChar;while(index<mask.length){maskChar=mask[index];if(translations[maskChar]){break;}newVal+=maskChar;index+=1;}return newVal;};module.exports={getRegex:getMaskRegex,getPlaceholder:getMaskPlaceholder,getValue:getMaskValue,fill:fillMask};},{}],5:[function(require,module,exports){var util=require('./util.js');var regexSearch=require('./regex-search.js');var proximitySearch=require('./proximity-search.js');function isSimpleSearchInput(input){return(typeof input.pattern==='string'&&(typeof input.caseSensitive==='boolean'||typeof input.caseSensitive==='undefined'));};function isProximitySearchInput(input){if(!util.isPositiveInteger(input.distance)|| !(input.subTerms instanceof Array)){return false;}return util.every(input.subTerms,isSimpleSearchInput);};function isSearchInput(input){if(util.isPlainObject(input)&&typeof input.type==='string'){if(input.type==='simple'){return isSimpleSearchInput(input);}if(input.type==='proximity'){return isProximitySearchInput(input);}}return false;};function isArrayOfSearchInputs(input){if(!(input instanceof Array)){return false;}return util.every(input,isSearchInput);};function getRegExp(searchInput){return(new RegExp(searchInput.pattern,searchInput.caseSensitive?'g':'gi'));};function cleanSearchResult(searchInput){return function(val){return{input:searchInput,text:val.text,startIndex:val.startIndex};};};function getRegexResults(text,searchInput){var regex=getRegExp(searchInput);var results=regexSearch.getResultsForTerm(text,regex);return results.map(cleanSearchResult(searchInput));};function getProximityResults(text,searchInput){var regexes=searchInput.subTerms.map(getRegExp);var results=proximitySearch.getResults(text,regexes,searchInput.distance);return results.map(cleanSearchResult(searchInput));};function getResults(text,searchInputs){if(typeof text!=='string'){throw util.inputError('text','string');}if(!isArrayOfSearchInputs(searchInputs)){throw util.inputError('searchInputs','array of search inputs');}var combinedResults=[];searchInputs.forEach(function(term,i){if(term.type==='simple'){combinedResults=combinedResults.concat(getRegexResults(text,term));}else if(term.type==='proximity'){combinedResults=combinedResults.concat(getProximityResults(text,term));}else{throw util.inputError('searchInputs['+i+'].type','string equal to "simple" or "proximity"');}});util.sortResults(combinedResults);return combinedResults;};module.exports={getResults:getResults};},{"./proximity-search.js":8,"./regex-search.js":9,"./util.js":10}],6:[function(require,module,exports){var util=require('./util.js');function validateGetContextOptions(options){var rules=[{property:'options',validator:function(){return util.isPlainObject(options);},error:'object'},{property:'options.text',validator:function(){return(typeof options.text==='string');},error:'string'},{property:'options.startIndex',validator:function(){return util.isMinInteger(options.startIndex,0);},error:'integer that is at least 0'},{property:'options.endIndex',validator:function(){return util.isMinInteger(options.endIndex,0);},error:'integer that is at least 0'},{property:'options.padding',validator:function(){return util.isMinInteger(options.padding,0);},error:'integer that is at least 0'},{property:'options.startIndex',validator:function(){return(options.startIndex<options.text.length);},error:'integer that is less than "options.text.length"'},{property:'options.endIndex',validator:function(){return(options.endIndex<options.text.length);},error:'integer that is less than "options.text.length"'},{property:'options.startIndex',validator:function(){return(options.startIndex<=options.endIndex);},error:'integer that is at most "options.endIndex"'}];util.validateInput(rules);};function validateRectangleOptions(options){var rules=[{property:'options',validator:function(){return util.isPlainObject(options);},error:'object'},{property:'options.rectangles',validator:function(){return(options.rectangles instanceof Array);},error:'array'},{property:'options.startIndex',validator:function(){return util.isMinInteger(options.startIndex,0);},error:'integer that is at least 0'},{property:'options.endIndex',validator:function(){return util.isMinInteger(options.endIndex,0);},error:'integer that is at least 0'},{property:'options.startIndex',validator:function(){return util.isMaxInteger(options.startIndex,options.endIndex);},error:'integer that is at most "options.endIndex"'}];util.validateInput(rules);};function getContext(options){validateGetContextOptions(options);var startIndex=Math.max(options.startIndex-options.padding,0);var endIndex=Math.min(options.endIndex+options.padding,options.text.length-1);return{startIndex:(startIndex===0)?options.startIndex:options.padding,context:options.text.substring(startIndex,endIndex+1)};};function getBoundingRectangle(options){validateRectangleOptions(options);var boundingRectangle={left:Number.MAX_VALUE,right:0,top:Number.MAX_VALUE,bottom:0};var rectangle;for(var i=options.startIndex;i<=options.endIndex;i++){rectangle=options.rectangles[i];boundingRectangle.left=Math.min(rectangle[0],boundingRectangle.left);boundingRectangle.right=Math.max(rectangle[0]+rectangle[2],boundingRectangle.right);boundingRectangle.top=Math.min(rectangle[1],boundingRectangle.top);boundingRectangle.bottom=Math.max(rectangle[1]+rectangle[3],boundingRectangle.bottom);}return{x:boundingRectangle.left,y:boundingRectangle.top,width:boundingRectangle.right-boundingRectangle.left,height:boundingRectangle.bottom-boundingRectangle.top};};function getLineRectangles(options){validateRectangleOptions(options);var lineRectangles=[];function processCharacter(rectangle){var character=util.getRectangleObject(rectangle);var line=lineRectangles[lineRectangles.length-1];if(util.isCharacterAtEndOfLine(character,line)){lineRectangles.splice(-1,1,util.joinRectangles(line,character));return;}lineRectangles.push(character);};for(var i=options.startIndex;i<=options.endIndex;i++){processCharacter(options.rectangles[i]);}return lineRectangles;};module.exports={getContext:getContext,getBoundingRectangle:getBoundingRectangle,getLineRectangles:getLineRectangles};},{"./util.js":10}],7:[function(require,module,exports){var formatter=require('./formatter.js');var regexSearch=require('./regex-search.js');var proximitySearch=require('./proximity-search.js');var combinedSearch=require('./combined-search.js');module.exports={formatter:formatter,regex:regexSearch,proximity:proximitySearch,combined:combinedSearch};},{"./combined-search.js":5,"./formatter.js":6,"./proximity-search.js":8,"./regex-search.js":9}],8:[function(require,module,exports){var regexSearch=require('./regex-search.js');var util=require('./util.js');function isAProximityResult(matching,searchTerms){return(Object.keys(matching).length===searchTerms.length);};function getStartIndex(wordIndex,searchResult){var startIndex= -1;for(var i=1;i<wordIndex.length;i++){if(wordIndex[i]>searchResult.startIndex){startIndex=i-1;break;}}if(startIndex=== -1&&searchResult.startIndex>wordIndex[wordIndex.length-1]){startIndex=wordIndex.length-1;}return startIndex;};function getEndIndex(wordIndex,searchResult,termsLength,distance){var startIndex=getStartIndex(wordIndex,searchResult);var endIndex=null;if(distance===0){endIndex=startIndex+termsLength-1;}else{endIndex=startIndex+((termsLength-1)*distance+termsLength)-1;}return wordIndex[endIndex<wordIndex.length?endIndex:wordIndex.length-1];};function getWordIndex(text){if(typeof text!=='string'){throw util.inputError('text','string');}var wordIndex=[];var regex=(/[^\s]+/gm);var regexResult;while((regexResult=regex.exec(text))!==null){wordIndex.push(regexResult.index);}return wordIndex;};function getResults(text,searchTerms,distance){if(!util.isPositiveInteger(distance)){throw util.inputError('distance','integer that is greater than 0');}var wordIndex=getWordIndex(text);var searchResults=regexSearch.getResults(text,searchTerms);var proximityResults=[];searchResults.forEach(function(searchResult,i){var opts={nextIndex: -1,currentIndex:i,matches:{},nextResult:null};opts.endIndex=getEndIndex(wordIndex,searchResult,searchTerms.length,distance);opts.matches[searchResult.term]=true;while(opts.nextIndex<opts.endIndex&& !isAProximityResult(opts.matches,searchTerms)&&opts.currentIndex+1<searchResults.length){opts.nextResult=searchResults[++opts.currentIndex];opts.nextIndex=opts.nextResult.startIndex;if(opts.nextIndex<=opts.endIndex){opts.matches[opts.nextResult.term]=true;}}if(isAProximityResult(opts.matches,searchTerms)){proximityResults.push({text:text.substring(searchResult.startIndex,opts.nextResult.startIndex+opts.nextResult.text.length),startIndex:searchResult.startIndex});}});return proximityResults;};module.exports={getWordIndex:getWordIndex,getResults:getResults};},{"./regex-search.js":9,"./util.js":10}],9:[function(require,module,exports){var util=require('./util.js');function isRegExp(input){return(input instanceof RegExp);};function isArrayOfRegExp(input){if(!(input instanceof Array)){return false;}return util.every(input,isRegExp);};function validateGetResultsForTerm(text,searchTerm){if(typeof text!=='string'){throw util.inputError('text','string');}if(!isRegExp(searchTerm)){throw util.inputError('searchTerm','regular expression');}};function getResultsForTerm(text,searchTerm){validateGetResultsForTerm(text,searchTerm);var searchResults=[];var regexResult;while((regexResult=searchTerm.exec(text))!==null){if(regexResult[0]){searchResults.push({term:searchTerm.toString(),text:regexResult[0],startIndex:regexResult.index});}else{searchTerm.lastIndex+=1;}}return searchResults;};function getResults(text,searchTerms){if(typeof text!=='string'){throw util.inputError('text','string');}if(!isArrayOfRegExp(searchTerms)){throw util.inputError('searchTerms','array of regular expressions');}var combinedResults=[];for(var i=0;i<searchTerms.length;i++){combinedResults=combinedResults.concat(getResultsForTerm(text,searchTerms[i]));}util.sortResults(combinedResults);return combinedResults;};module.exports={getResultsForTerm:getResultsForTerm,getResults:getResults};},{"./util.js":10}],10:[function(require,module,exports){function inputError(property,expected){var a=(['a','e','i','o','u'].indexOf(expected.charAt(0))> -1)?'an':'a';return new Error('Invalid argument. Argument "'+property+'" must be '+a+' '+expected+'.');};function isInteger(input){return(typeof input==='number'&&Math.round(input)===input);};function isMinInteger(input,min){if(typeof min!=='number'){throw inputError('min','number');}return(isInteger(input)&&input>=min);};function isMaxInteger(input,max){if(typeof max!=='number'){throw inputError('max','number');}return(isInteger(input)&&input<=max);};function isPositiveInteger(input){return isMinInteger(input,0);};function isPlainObject(input){return(typeof input==='object'&&input!==null&& !(input instanceof Array)&&input.constructor===Object);};function validateInput(rules){rules.forEach(function(rule){if(!rule.validator()){throw inputError(rule.property,rule.error);}});return true;};function every(obj,fn){for(var key in obj){if(obj.hasOwnProperty(key)){if(!fn(obj[key],key)){return false;}}}return true;};function sortResults(results){results.sort(function(a,b){return a.startIndex-b.startIndex;});};function joinRectangles(rectA,rectB){var left=Math.min(rectA.x,rectB.x);var top=Math.min(rectA.y,rectB.y);var right=Math.max(rectA.x+rectA.width,rectB.x+rectB.width);var bottom=Math.max(rectA.y+rectA.height,rectB.y+rectB.height);return{x:left,y:top,width:right-left,height:bottom-top};};function isCharacterAtEndOfLine(character,line){if(line&&Math.abs(character.y-line.y)<1&&Math.abs(character.height-line.height)<1&&(character.x+character.width)>=(line.x+line.width)){return true;}return false;};function getRectangleObject(rect){return{x:rect[0],y:rect[1],width:rect[2],height:rect[3]};};module.exports={inputError:inputError,isInteger:isInteger,isMinInteger:isMinInteger,isMaxInteger:isMaxInteger,isPositiveInteger:isPositiveInteger,isPlainObject:isPlainObject,validateInput:validateInput,every:every,sortResults:sortResults,joinRectangles:joinRectangles,isCharacterAtEndOfLine:isCharacterAtEndOfLine,getRectangleObject:getRectangleObject};},{}],11:[function(require,module,exports){var css="/* page list specific */\n.pccViewerControl {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  /* promote to a new layer */\n  -webkit-transform: translateZ(0);\n  transform: translateZ(0);\n  /* iOS momentum scrolling */\n  -webkit-overflow-scrolling: touch;\n  /* helps touch zoom not overlap any other element */\n  overflow: hidden;\n}\n/* normalize override */\nsvg:not(:root) {\n  overflow: visible!important;\n}\n.pccPageListContainer {\n  box-sizing: border-box;\n}\n.pccPageListContainerWrapper {\n  -ms-transform: scale(1,1) translate(0px,0px);\n  -moz-transform: scale(1,1) translate(0px,0px);\n  -webkit-transform: scale3d(1,1,1) translate3d(0px,0px,0px);\n  transform: scale3d(1,1,1) translate3d(0px,0px,0px);\n  -ms-transform-origin: 0% 0%;\n  -moz-transform-origin: 0% 0%;\n  -webkit-transform-origin: 0% 0%;\n  transform-origin: 0% 0%;\n  will-change: transform, -webkit-transform;\n}\n.pccPageListLoading {\n  height: 30px;\n  margin: -15px;\n  left: 50%;\n  position: absolute;\n  top: 50%;\n  width: 30px;\n}\n.pccPageListComments {\n  position: relative;\n  min-width: 300px;\n  height: auto;\n  vertical-align: top;\n  display: table-cell;\n  box-sizing: border-box;\n  z-index: 2;\n}\n.pccPageListComments > div {\n  position: absolute;\n}\n.pccHidden {\n  display: none;\n}\n.pccPageListItem {\n  background: #fff;\n  overflow: hidden;\n  margin: 13px;\n  vertical-align: middle;\n  border-bottom: 1px solid #d4d6db;\n}\n/* Single Page view mode */\n.pccSinglePageView .pccPageListItem {\n  -webkit-transform: translateZ(0);\n  transform: translateZ(0);\n  -webkit-animation-duration: 1s;\n  animation-duration: 1s;\n  -webkit-animation-timing-function: ease-out;\n  animation-timing-function: ease-out;\n}\n/* Next and previous page list items for single page view mode */\n.pccSinglePageView .pccNextPage {\n  opacity: 0;\n  z-index: 0;\n}\n.pccSinglePageView .pccPreviousPage {\n  opacity: 0;\n  z-index: 0;\n}\n.pccSinglePageView .pccCurrentPage {\n  opacity: 1;\n  z-index: 1;\n}\n/* Default animations for single page view mode */\n.pccSinglePageView .pccNextPageIn {\n  animation-name: moveInFromRight;\n  -webkit-animation-name: moveInFromRight;\n}\n.pccSinglePageView .pccPreviousPageIn {\n  animation-name: moveInFromLeft;\n  -webkit-animation-name: moveInFromLeft;\n}\n.pccSinglePageView .pccPageForward {\n  animation-name: moveLeft;\n  -webkit-animation-name: moveLeft;\n}\n.pccSinglePageView .pccPageBack {\n  animation-name: moveRight;\n  -webkit-animation-name: moveRight;\n}\n@keyframes moveRight {\n  0% {\n    transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n\n  100% {\n    transform: translate3d(110%, 0, 0);\n    opacity: 0;\n  }\n}\n@-webkit-keyframes moveRight {\n  0% {\n    -webkit-transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n\n  100% {\n    -webkit-transform: translate3d(110%, 0, 0);\n    opacity: 0;\n  }\n}\n@keyframes moveLeft {\n  0% {\n    transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n\n  100% {\n    transform: translate3d(-110%, 0, 0);\n    opacity: 0;\n  }\n}\n@-webkit-keyframes moveLeft {\n  0% {\n    -webkit-transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n\n  100% {\n    -webkit-transform: translate3d(-110%, 0, 0);\n    opacity: 0;\n  }\n}\n@keyframes moveInFromLeft {\n  0% {\n    transform: translate3d(-110%, 0, 0);\n    opacity: 0;\n  }\n\n  100% {\n    transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n}\n@-webkit-keyframes moveInFromLeft {\n  0% {\n    -webkit-transform: translate3d(-110%, 0, 0);\n    opacity: 0;\n  }\n\n  100% {\n    -webkit-transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n}\n@keyframes moveInFromRight {\n  0% {\n    transform: translate3d(110%, 0, 0);\n    opacity: 0;\n  }\n\n  100% {\n    transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n}\n@-webkit-keyframes moveInFromRight {\n  0% {\n    -webkit-transform: translate3d(110%, 0, 0);\n    opacity: 0;\n  }\n\n  100% {\n    -webkit-transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n}\n/*\n.pccPageListItem * {\n    -ms-touch-action: pinch-zoom pan-x pan-y;\n    touch-action: pinch-zoom pan-x pan-y;\n} */\n.pccPageListItem .pccPageListItemLoading {\n  margin: 30% auto;\n  display: block;\n  filter: Alpha(Opacity=50);\n  background-color: #fff;\n}\n.pccPageListItem .pccPageLoadFail {\n  margin: 35% auto;\n  text-align: center;\n  line-height: 2;\n  color: #777;\n}\n/* PageList container fix */\n.pccPageListItem .igAnchor,\n.pccPageListItem .igViewerScroller,\n.pccPageListItem .igViewerGraphics,\n.pccThumbnailView .igAnchor {\n  /* never recalculate these values */\n  width: 100% !important;\n  height: 100% !important;\n}\n.igAnchor > svg {\n  width: 100%;\n  height: 100%;\n}\n.igMagnifierFrame .igAnchor > svg {\n  width: auto;\n  height: auto;\n}\n.igViewerScroller,\n.igViewerGraphics,\n.igAnchor,\n.igAnchor > svg,\n.igAnchor svg svg {\n  -webkit-user-select: none !important;\n  -webkit-touch-callout: none !important;\n  -webkit-tap-highlight-color: rgba(0,0,0,0) !important;\n}\n.igAnchor svg svg use {\n  pointer-events: none;\n}\n/* do not show textarea outline on text marks */\n.pccViewerControl textarea {\n  outline: none;\n}\n/* copy text */\n.pccCopyText {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 0;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  opacity: 0;\n  filter: alpha(opacity=0);\n  color: #000;\n}\n/* about modal */\n.pccPageListAboutModal {\n  background: #383a3f;\n  position: absolute;\n  top: -300px;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n  width: 280px;\n  padding: 10px;\n  visibility: hidden;\n  opacity: 0;\n  z-index: 5;\n  border-radius: 3px;\n  text-align: center;\n  -webkit-box-shadow: 0 2px 4px -1px rgba(0, 0, 0, .4);\n  box-shadow: 0 2px 4px -1px rgba(0, 0, 0, .4);\n  -webkit-transition: all 400ms;\n  transition: all 400ms;\n}\n.pccPageListAboutModal * {\n  text-align: left;\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  -webkit-text-size-adjust: 100%;\n  -ms-text-size-adjust: 100%;\n  text-size-adjust: 100%;\n}\n.pccPageListAboutModal h3 {\n  margin: 10px 0;\n  font-size: 18px;\n  color: #fff;\n  font-weight: bold;\n}\n.pccPageListAboutModal p {\n  font-size: 12px;\n  color: #c2c5ce;\n}\n.pccPageListAboutModal p:last-child {\n  color: #c2c5ce;\n}\n.pccPageListAboutModal a {\n  color: #afc3eb;\n}\nhtml .pccPageListAboutModal button {\n  position: absolute;\n  top: 0;\n  right: 0;\n  font-size: 20px;\n  color: #fff;\n  background: none;\n  border: none;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  height: auto;\n}\n.pccPageListAboutModal.open {\n  visibility: visible;\n  opacity: 1;\n  top: 122px;\n}\n/* nag modal */\n.pccPageListNagModal {\n  background: #e7e9ef;\n  position: absolute;\n  top: -300px;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n  width: 480px;\n  padding: 10px;\n  visibility: hidden;\n  opacity: 0;\n  z-index: 5;\n  border-radius: 3px;\n  text-align: center;\n  -webkit-box-shadow: 0 6px 6px -1px rgba(0, 0, 0, .5);\n  box-shadow: 0 6px 6px -1px rgba(0, 0, 0, .5);\n  -webkit-transition: all 400ms;\n  transition: all 400ms;\n}\n.pccPageListNagModal * {\n  text-align: left;\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  -webkit-text-size-adjust: 100%;\n  -ms-text-size-adjust: 100%;\n  text-size-adjust: 100%;\n}\n.pccPageListNagModal h3 {\n  margin: 10px 0;\n  font-size: 18px;\n  color: #000000;\n  font-weight: bold;\n}\n.pccPageListNagModal p {\n  font-size: 12px;\n  color: #000000;\n}\n.pccPageListNagModal p:last-child {\n  color: #000000;\n}\n.pccPageListNagModal a {\n  color: #263fea;\n}\nhtml .pccPageListNagModal button {\n  position: absolute;\n  top: 0;\n  right: 0;\n  font-size: 20px;\n  color: #000000;\n  background: none;\n  border: none;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  height: auto;\n}\n.pccPageListNagModal.open {\n  visibility: visible;\n  opacity: 1;\n  top: 20px;\n}\n.pccEditMarkButton {\n  display: inline-block;\n  background: no-repeat url(../../../../src/img/EditTextMark.png);\n  border: none;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  height: 26px;\n  width: 26px;\n  -webkit-background-size: 26px 26px;\n  background-size: 26px;\n  cursor: pointer !important;\n}\n/* svg elements can have body tags inside them, so we protect styling of them */\n/* viewer marks that do not look correct can likely be affected by conflicting styles */\n.pccViewerControl body {\n  background-color: initial;\n  min-height: initial;\n  position: static;\n  height: 100%;\n}\n/* style for thumbnail views */\n.pccThumbnailWrapper {\n  position: relative;\n  display: block;\n  width: 100px;\n  height: 100px;\n  margin: 5px 0 2em 0;\n}\n.pccThumbnail {\n  width: 100%;\n  height: 100%;\n}\n.pccThumbnailView {\n  /* it's important not to edit these width and height\n     * they are depended upon in the actual size calculation */\n  height: 100%;\n  width: 100%;\n  margin: auto !important;\n}\n.pccThumbnailLabel {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  width: 100%;\n  text-align: center;\n}\n/* mark selection handles */\n.pccMarkHandleTopLeft,\n.pccMarkHandleTopCenter,\n.pccMarkHandleTopRight,\n.pccMarkHandleMidLeft,\n.pccMarkHandleMidRight,\n.pccMarkHandleBottomLeft,\n.pccMarkHandleBottomCenter,\n.pccMarkHandleBottomRight,\n.pccMarkHandlePoint,\n.pccMarkHandleTextSelectionStart,\n.pccMarkHandleTextSelectionEnd {\n  position: absolute;\n  width: 40px;\n  height: 40px;\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkMmJhOTYxOS02NDJjLTQzOTUtYTI2Mi1iZTQ5NzM5MDEzYjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDQ3M0M1RkFDMUM2MTFFNDlBMzZFODY3RUQwOTI4QjgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDQ3M0M1RjlDMUM2MTFFNDlBMzZFODY3RUQwOTI4QjgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowYzJmZjg5Ny1iMWRmLTQ4MGItOGRlNy01N2VkNGE0ZjJmZDgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ZDJiYTk2MTktNjQyYy00Mzk1LWEyNjItYmU0OTczOTAxM2IxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+SvzVDQAAAn9JREFUeNrsWMFr01AcTvvSNsnG1jQqOIeTTQ/z4EA9WFQQPYpn0epFL/4DiiBMFATRf0AvXtSJdwU9bHhY3UlBQQdThxVRUNN2wzVd26R+v/ILVA9r0iVQWR58zXuP9/3yNXnv9/tIrNlsSr3c4lKPt0hgJDASGAn8jwTKgAEMSAEHXU/TgRPAQWC0LV4dWADywDOg1O0NYn5K3ZEbc63riytZevKngTNAqgNtFXgATIHvMD+8J4jgGi7XgP3uXKVmi/xCMf3ll6XKIt4czihWdpe+pCWFzX/gPDAB7lWIrIT2BHnP3gb20qC0Uk/cnSmMTL8zh+q289d+Toi4c3S38e3CsZGC3peo8/Rr4CLghCXwLHCOOp9+VNRLj+YnzN81ZS2C0Z+s3jo1/mZsi2bx1D3gfhinOAPk+MnJlx/P7+kkjhqtobXE4akcxwpc4HH3QNyZLuz4uVxTvRJpLXF4mOJYgQs8RD/LVkOeeW8O+T1c4GxdWbUFDw8HLVDmPCfNfSyl/z0QXho44uWHYpqHo14ziNcbDboBv5qWInXZKA1xV3DMjVOLl4AGdYYNtdrtzbZvUt1UY3PMwASSuEXqHBjTy5SE/YoDx87u1Ms8XHT/cJCvON/ajJrcoArhVyA43/sV2ebhbBhp5gkXfonK1+aBpOWVSGvB+dxmHp6GIbAIPGx5LNTWmyfH31IZ60SiNbQWHPeVUgxzY5oF8oNst64D+9x5qhCzsFvIkRrslrMto1TpQPSlhN1GfwVMkt3y4we7NayCDWvOo2GdolcLvu3XsMbW+fHI4MK/luV/zvs3fMvvoV4PchIuBxU0Fn1+iwRGAiOBkcDebn8EGACEVf6TPnvOjAAAAABJRU5ErkJggg==);\n}\n@media screen and (-webkit-min-device-pixel-ratio: 2), \n       screen and (min-resolution: 2dppx),\n       screen and (min-resolution: 192dpi) {\n  .pccMarkHandleTopLeft,\n  .pccMarkHandleTopCenter,\n  .pccMarkHandleTopRight,\n  .pccMarkHandleMidLeft,\n  .pccMarkHandleMidRight,\n  .pccMarkHandleBottomLeft,\n  .pccMarkHandleBottomCenter,\n  .pccMarkHandleBottomRight,\n  .pccMarkHandlePoint,\n  .pccMarkHandleTextSelectionStart,\n  .pccMarkHandleTextSelectionEnd {\n    -webkit-background-size: 40px 40px;\n    background-size: 40px;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGsAAABrCAYAAABwv3wMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkMmJhOTYxOS02NDJjLTQzOTUtYTI2Mi1iZTQ5NzM5MDEzYjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0QwNDg4NENDNDAzMTFFNDgxM0JDREZDMUY0RTFFODIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0QwNDg4NEJDNDAzMTFFNDgxM0JDREZDMUY0RTFFODIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MjI3ZGMxZS0xNjg1LTQ2YTktOTI5Mi0wYzNkMTM4YjU3MWMiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2YWNjOTM4MC0wYzZkLTExNzgtYmZjOS1jNTk5OGE2MjYzNGUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4Xpv3rAAAGnklEQVR42uycXUxbZRjHT1u++gHjoxTWjTLYxpTBytxUEE3IdiHzxo8tzvmRyIwXRC+cNyaiJk42k11si0a9ME4v/LyYmTeCF1tIJo6YMCgwVMJnmQzKR7cWWr7a+jxyMLjsnNMWes7b0+ef/APJe9r3Of31fc97Tp/n1YRCIY4UH9LSR0CwSASLYJEIFolgESwSwSIRLIJFIlgkgkWwSASLRLAIFolgkQgWwSIRLBLBIlgkgkUiWASLxJ6SVHAOFvA28GZwFjgVbALPghfAbvAt8DDYRbDklRH8CHg/+AGwOYLXToGvg9vBreC5eDpxTRzluu8GPw1+lB896xWOuqvgS+AbBGtjZAfX8X9jJQf4S/4vwYpCOeB68EEZ+8SR9hE/XdJqMEwdAH8lMyjUY/wIO0ALjHuo5tS1//5vaajCL89r4GcUDAlXku/y18hPIL7gmvhoNch/ECnw5x3+2x2R3HNLyf0Tc/rhSb/BtxjQzS8FdGnJuoAhRRfYlqv37cgz+rOMyUsRvi1+YXIhrkYAtkgj6/+gToP3hfua7lGvqcnhynM4PVlj7nmT2JVXA7Zmpc3abRnuQ3bLRHlB+mwE0+JpiK8BgC3QAmPluvkBf+8kKoy02eEyf982Vjgy5U+PtsNCs977XKV1pNZumdKE95Lf+KkxmOiw8Bp1JJyRdLZpsGRo0pexUR0X5Ro8b9QW9cGIC2ek/Qj+OJFh4TTzPj9TCY6mCy3Ord9eG9seCIY0Gx2ATqsJPV9lHTheY7sZxps3gi8nIqwcfnluEjpgcTmofe9i3662fnderIN5aHumq/HIrj9TkrRiUx2OwJfB04l2n1UvBerNb3rL5ACF+n3gtuXE171l2K/Esr4+0W6K7WI3vDjWcUT13PRmyxnUjb+92divxFxzkIvtoy/mYNWJNcI1qkCuEXW3sN8voH+Jw44nCqxysW8mrvpgMVGk5KrnO+gfRrVJ5JA9/HmoHtZTYtPf+ebBnbDqU/SZJfZ/rmlwZyjK81ALLAO4Wqjx505X7oDLt4mFpyoYB8Yjckg1fz6qhSX6w+EPbWM2jiFJxJPKRfEcM55g7RdqcDg9Jud09I+QYiGMB+MSOWSfmmHtFWpo7prM4xhUk8OVH835xDssMyeS3NIxfCebRVidI54siXOyqBGW4L0L/h41cWfByCKscYgL4xM5pCihYPWNzxlYTtvB+ESaN6sRluA0Nzrt1zPMSiq+TDXCEpzmZueXdSzDkojPoEZYgvP+/FKQaVgS8aWoEZZgwkpasjbAMiyJ+BbVCEswr9yQmsQ0LFOaaHw+NcKaEWooNOv9LMMqyBGN77YaYY0KNZTkG30sw5KI71ZCwcIEzPxNqUyW30BcPokE0SE1wpriRBL+Kwoz3CzCgrhmJM7JpUZYqA6hhkN2yziLsCTi6pAzFrlhtQs1YKKlLUfvZQkUxiORANquZlhY/ySYM3600upkCZZEPKuVk6qFhauqVqHGJyosk8UWg4cFUBgHxiNySKuc91hKwEJdEmrA9OUTtcV9Oq1G0QIA7B/j0ER5HmqC1Q3uEmrEcpxjVdYhJWFh/xJlQV38eageFuqCWOMrNbbRyh1ZE0oEhv1i/+uJX22wsCr+sth0ePJwyV9lW9Nn5Axq95b0GexXYvq7wilU1a9kMuVn3EpVxj2F1RxnXyjtkWuEPVic6Tr3YmlPGFUknyr1gSkJC8tmznAribiCwD48et8fL1Vv6cc6qhgtJkL4/meO3d8rAQp1nlOo3OffGYeBysfXwYclVyWjXhOmVm9kxi4uz3HVF2aNccJXPq6O7rBrijGlGTNl15MQijXFzz5sdeJ9FNUURyDcB6OloQpTkU9xEWS4do540n/pnrR0OT3ZY+55YxjV+nN7bBkzj5fnuioKMyJ5rIUbc72N1fpK74PBBCzUevfBwHQx55RfP7ewrFtYDupSk7QBY2pSwGbW+/H3qCj2wVh9SnFydR8MgsXeDjNrr1FM7TDD6kZbWG3yFidScxxDzfKr1KusfSisbrT1K7dSFX9F5n4RUB2LoFgeWWtVAX4VXBrDPnrBn+O6heUPIp528sTymie5lYrDjdhzaplfQPzEyfyLb7SKpz1yO3in88D28kv9nAifmlznjaC8cXT+cTWyhHT37tNp3EpePWZLzXO0+zRTcsU7hHhfDZIIFsEiESwSwSJYJIJFIlgEi0SwSASLYJEIFolgESwSwSIRLIJFIlgkgkWwSASLYJEIFolgJbT+EWAAqiM7sRyeWSQAAAAASUVORK5CYII=);\n  }\n}\n.pccv input.no-ms-clear::-ms-clear {\n  display: none;\n}\n.pcc-image-stamp-img {\n  height: auto;\n  max-height: available;\n  width: 100%;\n  max-width: 100%;\n  position: relative;\n}\n.pccv .pcc-load,\n.pccv .pccPageListLoading,\n.pccv .pccPageListItemLoading {\n  -webkit-animation-duration: 1s;\n  animation-duration: 1s;\n  -webkit-animation-iteration-count: infinite;\n  animation-iteration-count: infinite;\n  -webkit-animation-timing-function: linear;\n  animation-timing-function: linear;\n  -webkit-animation-name: pcc-anim-load;\n  animation-name: pcc-anim-load;\n}\n@-webkit-keyframes pcc-anim-load {\n  0% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n\n  100% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n@keyframes pcc-anim-load {\n  0% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n\n  100% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.pccv .pccPageListLoading svg,\n.pccv .pccPageListItemLoading svg {\n  fill: #7d7f85;\n  height: 26px;\n  width: 26px;\n}\n.pccv .pccPageListLoading,\n.pccv .pccPageListItemLoading {\n  display: block;\n}\n@media print {\n  .no-clip-on-print {\n    clip-path: none !important;\n  }\n\n  .expand-on-print {\n    transform: scale(9999, 9999);\n  }\n}\n";(require("browserify-css").createStyle(css,{"href":"src\\css\\viewercontrol.css"},{"insertAt":"bottom"}));module.exports=css;},{"browserify-css":1}],12:[function(require,module,exports){var lj=function(){this.aX=false;this.K=false;this.bD=IPCC.aP.AddFreehandMark;};lj.prototype.mG=function(K){this.K=K;};lj.prototype.ed=function(){this.K=false;};lj.prototype.aB=function(){if(this.aX){this.T=null;this.nV=null;this.K.oq(null);this.aX=false;this.K.dN();}};lj.prototype.qE=function(){this.aB();};lj.prototype.jR=function(V){this.aB();if(V.domEvent.button===0){this.aX=true;this.T=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Polyline);this.T.get_points().addPoint(V.imagePoint);this.nV=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Freehand);this.K.oq(this.T,this.nV);this.T.set_lineWidth(this.nV.es);this.T.set_lineColor(this.nV.lz);this.T.set_opacity(this.nV.cZ);this.rZ=V.imagePoint;this.rN=V.windowPoint;this.K.dN();}};lj.prototype.jQ=function(V){if(V.domEvent.button!==0){this.aB();}if(this.aX){this.T.get_points().addPoint(V.imagePoint);this.K.dN();}};lj.prototype.zn=function(V){if(this.aX){this.aB();}};lj.prototype.jX=function(V){if(this.aX&&V.domEvent.button===0){this.T.get_points().addPoint(V.imagePoint);var alg=this.T.get_points();var bo=[];var hg=Number.MAX_VALUE,jg=0,_top=Number.MAX_VALUE,hK=0;var h=0;for(h=0;h<alg.get_length();h++){var te=alg.getPoint(h);if(te.x<hg){hg=te.x;}if(te.x>jg){jg=te.x;}if(te.y<_top){_top=te.y;}if(te.y>hK){hK=te.y;}bo.push({x:te.x,y:te.y});}var AA=3;var rW;var rH=(bo.length<AA)?bo:IPCC.F.filter(bo,function(bx){if(rW){var bv=bx.x-rW.x,cA=bx.y-rW.y,fD=bv*bv+cA*cA;if(Math.sqrt(fD)<4){return false;}}bx.x=bx.x-hg;bx.y=bx.y-_top;rW=bx;return true;});if(rH.length<AA){rH=[bo[0],bo[bo.length-1]];}var cT='';rW=undefined;if(rH.length<AA){cT+=this.PN(rH);}else{cT='M'+IPCC.F.bspline(rH);cT=cT.replace(/\d*\.?\d*/g,function(bH){var GE=bH.indexOf('.');if(bH.length&&GE>0){return bH.substr(0,GE+3);}else if(bH!==""){return bH;}else{return bH;}});}var aZ=jg-hg;var dk=hK-_top;if(dk===0&&aZ===0){this.aB();return;}var pN={clientX:V.domEvent.clientX,clientY:V.domEvent.clientY};this.nV.set_rectangle({x:hg,y:_top,width:aZ,height:dk});this.nV.set_pathString(cT);this.nV.set_pathWidth(aZ);this.nV.set_pathHeight(dk);this.K.oq(null);this.K.eh().addMark(this.nV,pN);this.K.dN();}this.aB();};lj.prototype.PN=function(yN,JU){var SC=(JU&&IPCC.F.CW)?'m':'M';var abJ=(JU&&IPCC.F.CW)?'l':'L';return IPCC.F.map(yN,function(bx,h){if(h===0){return SC+bx.x+','+bx.y;}else{return abJ+bx.x+','+bx.y;}}).join('');};lj.prototype.po=function(V){var bd=this.K.ee();if(V.windowPoint.x<=0||V.windowPoint.x>=bd.width-2){this.aB();}if(V.windowPoint.y<=0||V.windowPoint.y>=bd.height-2){this.aB();}};lj.prototype.ma=function(){this.aB();};module.exports=lj;},{}],13:[function(require,module,exports){var lN=function(){this.aX=false;this.K=false;this.bD=IPCC.aP.AddLineMark;};lN.prototype.mG=function(K){this.K=K;};lN.prototype.ed=function(){this.K=false;};lN.prototype.aB=function(){if(this.aX){this.T=null;this.K.oq(null);this.aX=false;this.K.dN();}};lN.prototype.qE=function(){this.aB();};lN.prototype.jR=function(V){this.aB();if(V.domEvent.button===0){this.aX=true;this.T=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Line);this.T.get_points().setPoint(0,V.imagePoint);this.T.get_points().setPoint(1,V.imagePoint);this.K.oq(this.T);this.rZ=V.imagePoint;this.rN=V.windowPoint;}};lN.prototype.jQ=function(V){if(V.domEvent.button!==0){this.aB();}if(this.aX){this.T.get_points().setPoint(1,V.imagePoint);this.K.dN();}};lN.prototype.jX=function(V){if(this.aX&&V.domEvent.button===0){var eY=V.windowPoint.x-this.rN.x;var hh=eY*eY;eY=V.windowPoint.y-this.rN.y;hh+=eY*eY;if(hh>25){var K=this.K;var pN={clientX:V.domEvent.clientX,clientY:V.domEvent.clientY};this.T.get_points().setPoint(1,V.imagePoint);this.K.oq(null);this.K.eh().addMark(this.T,pN);K.dN();}}this.aB();};lN.prototype.po=function(V){var bd=this.K.ee();if(V.windowPoint.x<=0||V.windowPoint.x>=bd.width-2){this.aB();}if(V.windowPoint.y<=0||V.windowPoint.y>=bd.height-2){this.aB();}};lN.prototype.ma=function(){this.aB();};module.exports=lN;},{}],14:[function(require,module,exports){var ln=function(aR){this.aX=false;this.K=false;this.aR=aR;switch(this.aR){case IPCC.Web.UI.MarkType.Polygon:this.bD=IPCC.aP.AddPolygonMark;break;case IPCC.Web.UI.MarkType.Polyline:this.bD=IPCC.aP.AddPolylineMark;this.Qv=false;break;}};ln.prototype.mG=function(K){this.K=K;};ln.prototype.ed=function(){this.K=false;};ln.prototype.aB=function(){if(this.aX){if(arguments[0]){if(arguments[0]===true){if(this.T&&this.Qv===false){this.K.eh().addMark(this.T);this.Qv=true;this.K.dN();}}}this.T=null;this.K.oq(null);this.aX=false;this.K.dN();}};ln.prototype.qE=function(){this.aB();};ln.prototype.jR=function(V){if(V.domEvent.button===0){if(!this.aX){this.aX=true;this.T=new IPCC.Web.UI.Mark(this.aR);this.T.get_points().addPoint(V.imagePoint);this.K.oq(this.T);}var bo=this.T.get_points();if(bo.get_length()>0){bo.setPoint(bo.get_length()-1,V.imagePoint);}bo.addPoint(V.imagePoint);this.rZ=V.imagePoint;this.rN=V.windowPoint;this.K.dN();}else{this.aB();}};ln.prototype.zn=function(V){if(this.aX&&V.domEvent.button===0){var bo=this.T.get_points(),ci=bo.get_length(),abU,abg;if(ci>2){var acE=true;while(acE){ci=bo.get_length();abU=bo.getPoint(ci-1);abg=bo.getPoint(ci-2);if(abU.x===abg.x&&abU.y===abg.y){bo.removePoint(ci-1);}else{acE=false;}}}if(bo.get_length()>0){bo.setPoint(bo.get_length()-1,V.imagePoint);}this.K.oq(null);var pN={clientX:V.domEvent.clientX,clientY:V.domEvent.clientY};this.K.eh().addMark(this.T,pN);this.Qv=true;this.K.dN();}this.aB();};ln.prototype.jQ=function(V){if(V.domEvent.button!==0){this.aB();}if(this.aX){var bo=this.T.get_points();if(bo.get_length()>0){bo.setPoint(bo.get_length()-1,V.imagePoint);}this.K.dN();}};ln.prototype.po=function(V){var bd=this.K.ee();if(V.windowPoint.x<=0||V.windowPoint.x>=bd.width-2){this.aB();}if(V.windowPoint.y<=0||V.windowPoint.y>=bd.height-2){this.aB();}};ln.prototype.ma=function(){this.aB();};module.exports=ln;},{}],15:[function(require,module,exports){var dX=function(aR){this.aX=false;this.K=false;this.aR=aR;switch(this.aR){case IPCC.Web.UI.MarkType.Rectangle:this.bD=IPCC.aP.AddRectangleMark;break;case IPCC.Web.UI.MarkType.Ellipse:this.bD=IPCC.aP.AddEllipseMark;break;case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:this.bD=IPCC.aP.AddTextMark;break;case IPCC.Web.UI.MarkType.Stamp:this.bD=IPCC.aP.AddStampMark;break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:this.bD=IPCC.aP.AddImageStampMark;break;case IPCC.Web.UI.MarkType.RectangleRedaction:this.bD=IPCC.aP.AddRectangleRedactionMark;break;case IPCC.Web.UI.MarkType.Highlight:case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.Strikethrough:this.bD=IPCC.aP.AddRectangleMark;break;}};dX.prototype.mG=function(K){this.K=K;};dX.prototype.ed=function(){this.K=false;};dX.prototype.aB=function(){if(this.aX){this.T=null;this.K.oq(null);this.aX=false;this.K.dN();}};dX.prototype.qE=function(){this.aB();};dX.prototype.jR=function(V){this.aB();if(V.domEvent.button===0){this.aX=true;this.T=new IPCC.Web.UI.Mark(this.aR);this.T.set_rectangle({x:V.imagePoint.x,y:V.imagePoint.y,width:0,height:0});this.K.oq(this.T);this.rZ=V.imagePoint;this.rN=V.windowPoint;}};dX.prototype.jQ=function(V){if(V.domEvent.button!==0){this.aB();}if(this.aX){var ko={x:Math.min(V.imagePoint.x,this.rZ.x),y:Math.min(V.imagePoint.y,this.rZ.y)};ko.width=Math.max(V.imagePoint.x,this.rZ.x)-ko.x;ko.height=Math.max(V.imagePoint.y,this.rZ.y)-ko.y;this.T.set_rectangle(ko);this.K.dN();}};dX.prototype.jX=function(V){if(this.aX&&V.domEvent.button===0){var eY=V.windowPoint.x-this.rN.x;var hh=eY*eY;eY=V.windowPoint.y-this.rN.y;hh+=eY*eY;if(hh>25){var ko={x:Math.min(V.imagePoint.x,this.rZ.x),y:Math.min(V.imagePoint.y,this.rZ.y)};ko.width=Math.max(V.imagePoint.x,this.rZ.x)-ko.x;ko.height=Math.max(V.imagePoint.y,this.rZ.y)-ko.y;this.K.oq(null);this.T.set_rectangle(ko);var aF=this.T;var K=this.K;var pN={clientX:V.domEvent.clientX,clientY:V.domEvent.clientY};this.K.eh().addMark(this.T,pN);if(aF.ik()===IPCC.Web.UI.MarkType.Text||aF.ik()===IPCC.Web.UI.MarkType.TextLine||aF.ik()===IPCC.Web.UI.MarkType.TextAreaSignature){K.vV(aF);}K.dN();}}this.aB();};dX.prototype.po=function(V){var bd=this.K.ee();if(V.windowPoint.x<=0||V.windowPoint.x>=bd.width-2){this.aB();}if(V.windowPoint.y<=0||V.windowPoint.y>=bd.height-2){this.aB();}};dX.prototype.ma=function(){this.aB();};module.exports=dX;},{}],16:[function(require,module,exports){var ce={};var arU=require('./ArtUIDirector');var MH=require('./ArtSVGUIDirector');ce.tM={JX:function(){var uM=IPCC.ce.tM;if(uM.um===null){
/*@cc_on@if(@_jscript)uM.um=document.documentMode>8;@else@*/ uM.um=true;/*@end@*/}return uM.um;},um:null};ce.Gi=1;ce.cr=arU;ce.MH=MH;module.exports=ce;},{"./ArtSVGUIDirector":17,"./ArtUIDirector":18}],17:[function(require,module,exports){var aho=function(){};aho.prototype={awg:function(K,ao,ai){this.K=K;this.ar=K.bC();this.ao=ao;this.fa=ai.width;this.eE=ai.height;this.Kh=ai.hf;this.aFb=ai.gn;ao.CR=this.dp('g');this.cV(ao.CR,{'fill-opacity':1});ao.Az.appendChild(ao.CR);},awT:function(G){var iL='',H,J=this;switch(G.T.get_type()){case IPCC.Web.UI.MarkType.Rectangle:G.be=this.dp('rect');if(G.T.lq()&&G.T.get_opacity()===255){G.be.addEventListener("mouseover",function(V){if(G.T.get_selected()===false&&G.be&&(V.which===0||V.buttons===0)){G.be.style.opacity=127/255;}},false);G.be.addEventListener("mouseout",function(V){if(G.be&&(V.which===0||V.buttons===0)){G.be.style.opacity=G.T.get_opacity()/255;}},false);}break;case IPCC.Web.UI.MarkType.HighlightText:iL="highlighttextannotation-"+G.T.jP();G.be=this.dp('g');G.iz=this.dp('g');G.be.appendChild(G.iz);G.jV=this.dp('g');G.jV.setAttribute('data-pcc-mark',iL);G.be.appendChild(G.jV);break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:iL="texthyperlinkannotation-"+G.T.jP();G.be=this.dp('g');G.be.style.cursor=IPCC.aP.fw(IPCC.aP.Link);G.iz=this.dp('g');G.be.appendChild(G.iz);G.jV=this.dp('g');G.jV.style.opacity=IPCC.ce.cr.agO();G.jV.style.fill="blue";G.jV.setAttribute('data-pcc-mark',iL);G.be.appendChild(G.jV);G.jG=this.dp('g');G.jG.style.stroke="blue";G.jG.style.opacity=IPCC.ce.cr.FC(false);G.jG.setAttribute('data-pcc-mark',iL);G.be.appendChild(G.jG);G.be.addEventListener("mouseover",function(V){if(G.jG){G.jG.style.opacity=IPCC.ce.cr.FC(true,G.T.get_selected());}},false);G.be.addEventListener("mouseout",function(V){if(G.jG){G.jG.style.opacity=IPCC.ce.cr.FC(false,G.T.get_selected());}},false);break;case IPCC.Web.UI.MarkType.DocumentHyperlink:iL="documenthyperlink-"+G.T.jP();G.be=this.dp('g');G.be.style.cursor=IPCC.aP.fw(IPCC.aP.Link);G.H=this.dp('rect');G.H.style['fill-opacity']=IPCC.ce.cr.agO();if(G.T.Sk!=='Underline'){G.H.style.stroke=G.T.lz;G.H.style['stroke-width']=G.T.es+'px';G.H.style['stroke-opacity']=(G.T.es===0)?0:G.T.pZ/255;if(G.T.Sk==='Dashed'){G.H.style['stroke-dasharray']=G.T.zP.join(', ');}G.H.setAttribute('rx',G.T.FV);G.H.setAttribute('ry',G.T.EO);}else{G.tU=this.dp('line');G.tU.style.stroke=G.T.lz;G.tU.style['stroke-opacity']=G.T.pZ/255;G.tU.style['stroke-width']=G.T.es+'px';G.be.appendChild(G.tU);}G.H.style.fill='transparent';G.H.setAttribute('data-pcc-mark',iL);G.be.appendChild(G.H);break;case IPCC.Web.UI.MarkType.RectangleRedaction:iL="textmark-"+G.T.jP();G.be=this.dp('g');G.fr=this.dp('rect');G.hb=this.dp('g');G.hb.setAttribute('data-pcc-mark',iL);if(IPCC.F.tX.atW){G.hb.style.cursor='pointer';}G.xe=document.createTextNode('');if(document.documentMode>8||IPCC.F.tX.AT){G.bW=this.dp('text');G.bW.setAttribute('data-pcc-mark',iL);G.bW.appendChild(G.xe);G.BL=this.dp('clipPath');G.CL=this.dp('rect');G.hb.appendChild(G.BL);G.BL.appendChild(G.CL);G.hb.appendChild(G.bW);G.HO="PCC"+IPCC.ce.Gi;IPCC.ce.Gi++;this.cV(G.BL,{id:G.HO,clipPathUnits:"userSpaceOnUse"});H=G.T.get_rectangle();this.cV(G.CL,{x:0,y:0,width:H.width,height:H.height,"data-pcc-mark":iL});var aaI=function(V){if(G.T.get_selected()===false&&G.fr&&(V.which===0||V.buttons===0)){if(J.K.mr()===false){G.be.style.opacity=0.5;G.bW.style.opacity=0;}}};G.be.addEventListener("mouseover",function(V){aaI(V);},false);G.hb.addEventListener("mouseover",function(V){aaI(V);},false);G.hb.addEventListener("mouseout",function(V){if(G.fr&&(V.which===0||V.buttons===0)){if(J.K.mr()===false){G.be.style.opacity=1;G.bW.style.opacity=1;}}},false);G.be.addEventListener("mouseout",function(V){if(G.fr&&(V.which===0||V.buttons===0)){if(J.K.mr()===false){G.be.style.opacity=1;G.bW.style.opacity=1;}}},false);}else{G.nv=document.createElement('div');this.cV(G.nv,{"data-pcc-mark":iL});G.nv.appendChild(G.xe);G.Om=document.createElement('div');this.cV(G.Om,{"data-pcc-mark":iL});G.Om.appendChild(G.nv);G.tI=document.createElement('body');this.cV(G.tI,{xmlns:'http://www.w3.org/1999/xhtml',style:'margin:0;overflow:hidden;background-color:transparent;white-space:pre-wrap;all:initial',"data-pcc-mark":iL});G.tI.appendChild(G.Om);G.Ff=this.dp('foreignObject');G.Ff.appendChild(G.tI);G.hb.appendChild(G.Ff);G.tI.addEventListener("mouseover",function(V){if(G.T.get_selected()===false&&G.fr&&(V.which===0||V.buttons===0)){G.fr.style.opacity=0.5;G.nv.style.opacity=0;}},false);G.tI.addEventListener("mouseout",function(V){if(G.fr&&(V.which===0||V.buttons===0)){if(J.K.mr()===false){G.fr.style.opacity=1;G.nv.style.opacity=1;}}},false);}G.be.appendChild(G.fr);break;case IPCC.Web.UI.MarkType.Ellipse:G.be=this.dp('ellipse');break;case IPCC.Web.UI.MarkType.Highlight:G.be=this.dp('rect');break;case IPCC.Web.UI.MarkType.TextSelectionRedaction:G.be=this.dp('g');G.iz=G.be;break;case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:G.be=this.dp('g');G.sB=this.dp('polyline');G.QT=this.dp('path');G.XR=this.dp('path');G.be.appendChild(G.sB);G.be.appendChild(G.QT);G.be.appendChild(G.XR);G.sB.setAttribute('stroke-linejoin','miter');G.sB.setAttribute('stroke-linecap','butt');G.sB.setAttribute('stroke-miterlimit','4');break;case IPCC.Web.UI.MarkType.Polygon:G.be=this.dp('polygon');break;case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.TextAreaSignature:iL="textmark-"+G.T.jP();G.be=this.dp('g');G.Ji=this.dp('polygon');G.sB=this.dp('path');G.XI=this.dp('path');G.hb=this.dp('g');G.be.appendChild(G.Ji);G.be.appendChild(G.sB);G.be.appendChild(G.XI);this.cV(G.Ji,{style:'stroke:none;'});G.hb.setAttribute('data-pcc-mark',iL);G.xe=document.createTextNode('');if(document.documentMode>8||IPCC.F.tX.AT){G.bW=this.dp('text');G.bW.setAttribute('data-pcc-mark',iL);G.bW.appendChild(G.xe);G.BL=this.dp('clipPath');G.CL=this.dp('rect');G.hb.appendChild(G.BL);G.BL.appendChild(G.CL);G.agQ=this.dp('g');G.hb.appendChild(G.agQ);G.hb.appendChild(G.bW);G.HO="PCC"+IPCC.ce.Gi;IPCC.ce.Gi++;this.cV(G.BL,{id:G.HO,clipPathUnits:"userSpaceOnUse"});H=G.T.get_rectangle();this.cV(G.CL,{x:0,y:0,width:H.width,height:H.height,"data-pcc-mark":iL});}else{G.nv=document.createElement('div');G.nv.appendChild(G.xe);G.tI=document.createElement('body');this.cV(G.tI,{xmlns:'http://www.w3.org/1999/xhtml',style:'margin:0;overflow:hidden;background-color:transparent;white-space:pre-wrap;all:initial',"data-pcc-mark":iL});G.tI.appendChild(G.nv);G.Ff=this.dp('foreignObject');G.Ff.appendChild(G.tI);G.hb.appendChild(G.Ff);}G.Ji.setAttribute('data-pcc-mark',iL);break;case IPCC.Web.UI.MarkType.Stamp:G.be=this.dp('g');G.uB=this.dp('rect');G.uB.style='fill:rgba(255, 255, 255, 0);stroke:none;';G.fr=this.dp('rect');G.Kd=this.Uc(G);G.be.appendChild(G.uB);G.be.appendChild(G.fr);G.be.appendChild(G.Kd);break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:G.be=this.dp('g');G.uB=this.dp('rect');G.uB.style='fill:rgba(255, 255, 255, 0);stroke:none;';G.fr=this.dp('rect');G.agN=this.awL(G);G.agN.setAttribute('data-pcc-mark',"mark-"+G.T.jP());G.be.appendChild(G.uB);G.be.appendChild(G.fr);G.be.appendChild(G.agN);break;case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.Freehand:var T=G.T;var aaO=T.cN();var aZ=aaO.width;var dk=aaO.height;var Jq=T.get_pathWidth();var GO=T.get_pathHeight();var vB=T.get_pathString();var fS=IPCC.F.zj.Path(vB,{width:aZ,height:dk,multiplier:100,thickness:T.get_lineWidth(),color:T.get_lineColor()});var fC=IPCC.F.zj.SVG('0 0 '+Jq+' '+GO,100);var al=IPCC.F.zj.Rect(Jq,GO,'fill:rgba(255, 255, 255, 0);stroke:none;');fC.appendChild(al);fC.appendChild(fS);G.be=fC;G.azC=fS;G.ado=al;this.adH(G.be,T.jC);break;case IPCC.Web.UI.MarkType.SignatureText:G.be=this.dp('g');G.fr=this.dp('rect');G.fr.style='fill:rgba(255, 255, 255, 0);stroke:none;';G.Kd=this.Uc(G);G.be.appendChild(G.fr);G.be.appendChild(G.Kd);G.T.hS=false;break;case IPCC.Web.UI.MarkType.TextLine:G.be=this.dp('g');G.fr=this.dp('rect');G.fr.style='fill:rgba(255, 255, 255, 0);stroke:none;';G.Kd=this.Uc(G);G.be.appendChild(G.fr);G.be.appendChild(G.Kd);break;case IPCC.Web.UI.MarkType.Strikethrough:iL="strikethroughannotation-"+G.T.jP();G.be=this.dp('g');G.iz=this.dp('g');G.be.appendChild(G.iz);G.jV=this.dp('g');G.jV.setAttribute('data-pcc-mark',iL);G.be.appendChild(G.jV);G.wM=this.dp('g');G.wM.setAttribute('data-pcc-mark',iL);G.be.appendChild(G.wM);break;}G.be.ImGearMarkRelation=G;G.be.setAttribute('data-pcc-mark',"mark-"+G.T.jP());this.ao.CR.appendChild(G.be);if(G.hb){G.hb.ImGearMarkRelation=G;this.ao.CR.appendChild(G.hb);}this.aiA(G);},Uc:function(G){var T=G.T;var Dg=T.aD;if(!Dg){Dg=T.dR[0];if(!Dg){if(T.get_type()===IPCC.Web.UI.MarkType.Stamp){Dg="APPROVED";}else{Dg="";}}}var H=T.cN();G.bW=this.dp('text');G.HO="PCC"+IPCC.ce.Gi;IPCC.ce.Gi++;var mO=document.createTextNode(Dg);G.bW.setAttribute("font-size","22px");if(T.get_type()===IPCC.Web.UI.MarkType.TextLine){G.bW.setAttribute("style",'white-space:pre;');}switch(G.T.jC){case IPCC.Web.UI.HorizontalAlignment.Left:G.bW.setAttribute('text-anchor','start');G.bW.setAttribute('x',H.x);break;case IPCC.Web.UI.HorizontalAlignment.Right:G.bW.setAttribute('text-anchor','end');G.bW.setAttribute("x",H.x+H.width);break;default:G.bW.setAttribute('text-anchor','middle');G.bW.setAttribute("x",H.x+(H.width/2));break;}G.bW.setAttribute('y',H.y+(H.height/2));G.bW.appendChild(mO);return G.bW;},awL:function(G){var T=G.T;G.agH=document.createElementNS('http://www.w3.org/2000/svg','svg');G.yW=document.createElementNS('http://www.w3.org/2000/svg','image');G.yW.setAttribute('id','childimg');G.yW.setAttributeNS('http://www.w3.org/1999/xlink','href',T.get_image());G.agH.appendChild(G.yW);return G.agH;},aws:function(G,jC){var T=G.T;var H=T.cN();var aD=T.aD;var Ht=aD.split('\n');var bW=G.bW;var Yu=0;var YU=0;var ZO=0;var wY=0;var ahA=0;var ajs=this.Kh/72;var ajY=T.cR*ajs;var yX=[];var avF=/(.*\s)(.*)/;var mO,ij,He,Ew,_parent,afi,Hb,FE,afx,zG,alZ,Co;afi=bW.childNodes.length;if(afi>=1){_parent=bW.parentNode;Hb=this.dp('text');Hb.setAttribute('data-pcc-mark',G.hb.getAttribute('data-pcc-mark'));Hb.setAttribute('width',G.hb.getAttribute('width')-G.T.es);_parent.replaceChild(Hb,bW);G.bW=Hb;G.bW.appendChild(G.xe);G.hb.appendChild(G.bW);bW={};bW=G.bW;}bW.style.fontSize=T.cR*this.Kh/72+'px';bW.style.fontFamily=T.ew;bW.width-=4;FE=(T.es/2);if(jC){switch(jC){case IPCC.Web.UI.HorizontalAlignment.Center:FE=(H.width/2)-(T.es/2);break;case IPCC.Web.UI.HorizontalAlignment.Right:FE=H.width-T.es;break;}}for(var h=0;h<Ht.length;h++){zG='';alZ=1;if(Ht[h].length>0){He=Ht[h].split('');ij=this.dp('tspan');ij.setAttributeNS(null,"x",FE);if(h>0){ij.setAttributeNS(null,"dy",ajY*(ZO+1));}mO=window.document.createTextNode(He[0]);ij.appendChild(mO);bW.appendChild(ij);for(var bz=1;bz<He.length;bz++){ahA=ij.firstChild.data.length;Ew=He[bz];ij.firstChild.data+=He[bz];zG+=Ew;afx=zG.length*(T.cR*ajs);Yu=ij.getComputedTextLength();if(Yu===0){YU=afx;}else{YU=Yu;}if(YU>=(H.width-T.es-2)){alZ++;zG='';Co=ij.firstChild.data.match(avF);if(Co){Ew=Co[2];}if(Co&&Co[1].length>0){ij.firstChild.data=Co[1];zG+=Ew;}else{ij.firstChild.data=ij.firstChild.data.slice(0,ahA);zG+=Ew;}if(zG.length>=1){yX.push({ad:wY,aeT:ij});ij=this.dp('tspan');ij.setAttributeNS(null,"x",FE);ij.setAttributeNS(null,"dy",ajY);mO=window.document.createTextNode(Ew);ij.appendChild(mO);bW.appendChild(ij);}}}if(ij.firstChild.data.length>0){yX.push({ad:wY,aeT:ij});}wY+=ij.firstChild.data.length+1;ZO=0;}else{ZO++;}}return yX;},arR:function(jI,afD,iz,wY){if(jI.length>0){var akv=afD.getNumberOfChars();if(jI[0].ad>wY+akv){return;}for(var h=Math.max(jI[0].ad-wY,0);h<akv;h++){var H=afD.getExtentOfChar(h);var al=this.dp('rect');this.cV(al,{x:H.x,y:H.y,width:H.width,height:H.height,fill:jI[0].Du});iz.appendChild(al);if(jI[0].dq===h+wY){jI.shift();if(jI.length===0){return;}h=jI[0].ad-wY-1;}}}},EG:function(cz,sQ,sf){var fS='M',h;for(h=0;h<sQ.length;h++){if(h>0){fS+=' L';}fS+=sQ[h].x+','+sQ[h].y;}if(sf){fS+='Z';}this.cV(cz,{d:fS});},ZF:function(cz,sQ,sf){var NT='',h;for(h=0;h<sQ.length;h++){if(h>0){NT+=' ';}NT+=sQ[h].x+','+sQ[h].y;}if(sf&&sQ.length>2){NT+=' '+sQ[0].x+','+sQ[0].y;}this.cV(cz,{points:NT});},aih:function(hd,kc,AU,rD,Ap,Ut,GP){var dE=this.awG(hd,kc,AU,rD,Ap);var fF='';fF+='stroke:'+Ut+';';switch(Ap){case IPCC.Web.UI.LineHeadType.None:fF='display:none;';break;case IPCC.Web.UI.LineHeadType.Pointer:this.EG(GP,[dE.CP,hd,dE.FO],false);break;case IPCC.Web.UI.LineHeadType.Solid:this.EG(GP,[dE.CP,hd,dE.FO],true);fF+='fill:'+Ut+';';break;case IPCC.Web.UI.LineHeadType.Open:this.EG(GP,[dE.CP,hd,dE.FO],true);break;case IPCC.Web.UI.LineHeadType.PointerSolid:this.EG(GP,[dE.CP,hd,dE.FO,dE.JJ],true);fF+='fill:'+Ut+';';break;}this.cV(GP,{style:fF});return dE;},arX:function(G){var T=G.T;var bo,gH,h,akV,aiY,ie='',DU;bo=T.get_points();gH=[];for(h=0;h<bo.get_length();h++){gH.push(bo.getPoint(h));}if(gH.length<2||T.sf){this.cV(G.QT,{style:'display:none;'});this.cV(G.XR,{style:'display:none;'});}else{T.AC=T.lz;DU=this.aii(gH,true);akV=this.aih(DU.hd,DU.kc,T.Jd,T.Gv,T.Fb,T.AC,G.QT);DU=this.aii(gH,false);aiY=this.aih(DU.hd,DU.kc,T.Iq,T.Hm,T.lO,T.AC,G.XR);gH[0]=akV.JJ;gH[gH.length-1]=aiY.JJ;}this.ZF(G.sB,gH,T.sf);var xL=this.Vb(T.ie);if(xL!==''){ie+='stroke-dasharray:'+xL+';';}this.cV(G.sB,{style:ie});},ajh:function(G){var BE=this.awN(G);this.ZF(G.Ji,BE.ahH,false);var agI='',ie='fill:none;',pF='fill:none;';if(BE.Wa){agI='stroke:none;';}if(BE.VO){this.EG(G.sB,BE.VO,false);}else{ie+='display:none;';}if(BE.Pi){this.EG(G.XI,BE.Pi,false);}else{pF+='display:none;';}var T=G.T;if(T.yY){pF+='stroke:'+T.BI+';stroke-width:'+T.Bz+';';var xL=this.Vb(T.pF);if(xL!==''){pF+='stroke-dasharray:'+xL+';';}}this.cV(G.sB,{style:ie});this.cV(G.XI,{style:pF});this.cV(G.Ji,{style:agI});},VA:function(G){var T=G.T,Cp;if(!T){return;}var H=T.cN();var Ep=T.cR*this.Kh/72;T.Ep=Ep;var pH=H.width,og=H.height,JF=false,eY;var fR,eA=0,ey=0;var tL=1;if(T.hS){tL+=T.es/2;}switch(T.xv){case IPCC.Web.UI.Orientation.TopLeft:fR='1,0,0,1';break;case IPCC.Web.UI.Orientation.TopRight:fR='-1,0,0,1';eA=pH-tL;break;case IPCC.Web.UI.Orientation.BottomRight:fR='-1,0,0,-1';eA=pH-tL;ey=og-tL;break;case IPCC.Web.UI.Orientation.BottomLeft:fR='1,0,0,-1';ey=og-tL;break;case IPCC.Web.UI.Orientation.LeftTop:fR='0,1,1,0';JF=true;break;case IPCC.Web.UI.Orientation.RightTop:fR='0,1,-1,0';eA=pH-tL;JF=true;break;case IPCC.Web.UI.Orientation.RightBottom:fR='0,-1,-1,0';eA=pH-tL;ey=og-tL;JF=true;break;case IPCC.Web.UI.Orientation.LeftBottom:fR='0,-1,1,0';ey=og-tL;JF=true;break;}if(T.cE==="#c0c0c0"){T.cE='#ffffff';}if(T.get_type()===IPCC.Web.UI.MarkType.Text){if(T.lq()===true){T.cE='#ffffff';}else{T.set_opacity(T.cZ);}}if(JF){eY=pH;pH=og;og=eY;}if(pH<0){pH=0;}if(og<0){og=0;}var YD='normal';var bZ='normal';var ow='';var sa;ow+='word-wrap:break-word;background-color:transparent;line-height:1;';var ze=0;if(T.qy.length===7&&T.qy.charAt(0)==='#'){ze=parseInt(T.qy.slice(1),16);}var cZ=Math.min(1,Math.max(0,T.yF/255));if(document.documentMode>8||IPCC.F.tX.AT){bZ='normal';if(T.bZ&IPCC.Web.UI.FontStyle.Italic){bZ='italic';}YD='normal';if(T.bZ&IPCC.Web.UI.FontStyle.Bold){YD='bold';}sa='none';if((T.bZ&IPCC.Web.UI.FontStyle.Underline)&&(T.bZ&IPCC.Web.UI.FontStyle.Strikeout)){sa='underline line-through';}else if(T.bZ&IPCC.Web.UI.FontStyle.Underline){sa='underline';}else if(T.bZ&IPCC.Web.UI.FontStyle.Strikeout){sa='line-through';}}else{ow+='color:rgba('+(ze>>16)+','+((ze>>8)&255)+','+(ze&255)+','+cZ+');';ow+='font-family:'+T.ew+';';ow+='font-size:'+Ep+'px;';if(T.bZ&IPCC.Web.UI.FontStyle.Italic){ow+='font-style:italic;';}if(T.bZ&IPCC.Web.UI.FontStyle.Bold){ow+='font-weight:bold;';}if((T.bZ&IPCC.Web.UI.FontStyle.Underline)&&(T.bZ&IPCC.Web.UI.FontStyle.Strikeout)){ow+='text-decoration:underline line-through;';}else if(T.bZ&IPCC.Web.UI.FontStyle.Underline){ow+='text-decoration:underline;';}else if(T.bZ&IPCC.Web.UI.FontStyle.Strikeout){ow+='text-decoration:line-through;';}}var El={x:2,anchor:'start'};switch(T.jC){case IPCC.Web.UI.HorizontalAlignment.Left:ow+='text-align:left;';break;case IPCC.Web.UI.HorizontalAlignment.Center:ow+='text-align:center;';El.x=(H.width/2)-3;El.anchor='middle';break;case IPCC.Web.UI.HorizontalAlignment.Right:ow+='text-align:right;';El.x=H.width-8;El.anchor='end';break;default:break;}if(typeof document.documentMode==='undefined'&& !IPCC.F.tX.AT){switch(T.yh){case IPCC.Web.UI.VerticalAlignment.Center:if(T.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction){this.cV(G.Om,{style:'display:table; width: 100%;'});ow+='display: table-cell; white-space: normal; vertical-align: middle; height:'+og+'px;';}break;case IPCC.Web.UI.VerticalAlignment.Bottom:break;default:break;}this.cV(G.nv,{style:ow+'padding:2px;'});this.cV(G.hb,{transform:'matrix('+fR+','+(eA+H.x+(T.es/2))+','+(ey+H.y+(T.es/2))+')',});this.cV(G.Ff,{x:0,y:0,width:pH>T.es?pH-T.es:pH,height:og>T.es?og-T.es:og,});this.arJ(G);}else{var yX=this.aws(G,T.jC);var ajN=yX.length;switch(T.yh){case IPCC.Web.UI.VerticalAlignment.Center:if(T.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction){Cp=(H.height/2)+(T.cR/4);if(ajN>1){Cp-=(ajN-1)*(T.cR/2);}if(Cp<0){Cp=T.cR;}}break;case IPCC.Web.UI.VerticalAlignment.Bottom:break;default:break;}this.cV(G.CL,{x:0,y:0,width:H.width-T.es,height:H.height-T.es});var ayc="url(#"+G.HO+")";var abC={x:El.x,y:(this.Kh/72)*T.cR,width:H.width-T.es,height:H.height-T.es,'font-family':T.ew,'font-size':Ep,fill:'rgba('+(ze>>16)+', '+((ze>>8)&255)+', '+(ze&255)+', '+cZ+')','font-weight':YD,'font-style':bZ,'text-decoration':sa,'text-anchor':El.anchor};if(typeof Cp!=='undefined'){delete abC.y;abC.dy=Cp;}this.cV(G.bW,abC);G.bW.style.opacity=cZ;this.cV(G.hb,{transform:'matrix('+fR+','+(eA+H.x+(T.es/2))+','+(ey+H.y+(T.es/2))+')','clip-path':ayc});var iz=G.agQ;while(iz&&iz.firstChild){iz.removeChild(iz.firstChild);}if(T.eR){var jI=this.acr(T.eR);for(var h=0;h<yX.length;h++){this.arR(jI,yX[h].aeT,iz,yX[h].ad);}}}},UH:function(G){var T=G.T;if(T.aA===null||T.aA===undefined){return;}if(T.aA.length===0&&T.db>0&&this.K.cd().nn()){T.aA=IPCC.F.Zf(this.K.cd().hB(),T.ad,T.ad+T.db-1);}if(!G.ad|| !G.db||G.ad!==T.ad||G.db!==T.db||T.dM===false||T.dM===true){while(G.jV.firstChild){G.jV.removeChild(G.jV.firstChild);}if(G.jG){while(G.jG.firstChild){G.jG.removeChild(G.jG.firstChild);}}if(G.wM){while(G.wM.firstChild){G.wM.removeChild(G.wM.firstChild);}}if(T.dM===false){return;}IPCC.F.forEach(G.T.aA,function(gm){var SG=this.dp('rect');G.jV.appendChild(SG);this.cV(SG,{x:gm.x,y:gm.y,width:gm.width,height:gm.height});if(G.jG){var tU=this.dp('line');this.cV(tU,{x1:gm.x,y1:gm.y+gm.height-1,x2:gm.x+gm.width,y2:gm.y+gm.height-1,"stroke-width":2});G.jG.appendChild(tU);}if(G.wM){SG.setAttribute('fill','transparent');var amV=this.dp('line');var strikethroughY=gm.y+(gm.height/2);this.cV(amV,{x1:gm.x,y1:strikethroughY,x2:gm.x+gm.width,y2:strikethroughY,stroke:G.T.lz,"stroke-width":G.T.es});G.wM.appendChild(amV);}},this);G.ad=T.ad;G.db=T.db;}},aiA:function(G){var T=G.T;if(!T){return;}var be=G.be;var H,fF='',bo,hS=true,oD,vq,wK,SY,uz,DR;var jJ=false;switch(T.get_type()){case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:jJ=true;this.arX(G);break;case IPCC.Web.UI.MarkType.Rectangle:H=T.get_rectangle();this.cV(be,{x:H.x,y:H.y,width:H.width,height:H.height});break;case IPCC.Web.UI.MarkType.HighlightText:this.UH(G);G.jV.style.fill=T.cE;G.jV.style.opacity=(T.cZ/255);this.Po(G);break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:this.UH(G);G.jV.style.fill=T.cE;G.jG.style.stroke=T.cE;if(G.T.get_selected()){G.jG.style.opacity=IPCC.ce.cr.FC(false,G.T.get_selected());}else{G.jG.style.opacity=IPCC.ce.cr.FC(false,G.T.get_selected());}this.Po(G);break;case IPCC.Web.UI.MarkType.DocumentHyperlink:H=T.get_rectangle();this.cV(G.H,{x:H.x,y:H.y,width:H.width,height:H.height});if(G.tU){this.cV(G.tU,{x1:H.x,y1:H.y+H.height,x2:H.x+H.width,y2:H.y+H.height});}break;case IPCC.Web.UI.MarkType.RectangleRedaction:if(typeof G.fr!=='undefined'){if(this.K.mr()===true){G.fr.style.opacity=0.5;if(typeof G.nv!=='undefined'){G.nv.style.opacity=0;}else{G.bW.style.opacity=0;}}else{G.fr.style.opacity=1;if(typeof G.nv!=='undefined'){G.nv.style.opacity=1;}}}H=T.get_rectangle();this.cV(be,{x:H.x,y:H.y,width:H.width,height:H.height});this.cV(G.fr,{x:H.x,y:H.y,width:H.width,height:H.height});if(this.K.mr()===false){this.VA(G);}break;case IPCC.Web.UI.MarkType.Ellipse:H=T.get_rectangle();this.cV(be,{cx:H.x+H.width/2,cy:H.y+H.height/2,rx:H.width/2,ry:H.height/2});break;case IPCC.Web.UI.MarkType.Polygon:bo=this.Xy(T);this.ZF(be,bo,false);fF+='fill-rule:evenodd;';break;case IPCC.Web.UI.MarkType.Text:this.ajh(G);this.VA(G);break;case IPCC.Web.UI.MarkType.TextAreaSignature:var dH=IPCC.F.afc();var qu=IPCC.F.aeL();qu.nodeValue=T.get_text();var il=T.il;var aq=this.K.mv().jE();H=T.get_rectangle();dH.style.width=(H.width-T.es/2)+'px';dH.style.height=(H.height-T.es/2)+'px';dH.style.fontFamily=T.ew;dH.style.padding='2px';dH.style.fontStyle=T.bZ;T.cR=IPCC.F.XG(dH,il,aq)*72/this.Kh;this.ajh(G);this.VA(G);break;case IPCC.Web.UI.MarkType.Stamp:H=T.get_rectangle();this.cV(be,{x:H.x,y:H.y,width:H.width,height:H.height});this.cV(G.uB,{x:H.x,y:H.y,width:H.width,height:H.height,'stroke':'none','fill':'rgba(255, 255, 255, 0)'});G.uB.style.opacity=1;this.cV(G.fr,{x:H.x,y:H.y,width:H.width,height:H.height,'stroke':T.cE,'stroke-width':'5','fill':'none','rx':10,'ry':10});var textFontSize=(H.width/6);if(textFontSize>H.height){textFontSize=(H.height-(H.height/6));}oD=G.T.get_text();if(!oD){oD='APPROVED';}G.bW.childNodes[0].data=oD;var sn=oD.length*textFontSize;if(sn>H.width){textFontSize=((H.width/oD.length));}DR=Math.round(textFontSize);T.stampSize=DR.toString();this.cV(G.bW,{x:H.x+(H.width/2),y:H.y+(H.height/2+(textFontSize/3)),'font-size':textFontSize,'stroke':T.cE,'font-family':"Arial"});break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:H=T.get_rectangle();this.cV(be,{x:H.x,y:H.y,width:H.width,height:H.height});this.cV(G.uB,{x:H.x,y:H.y,width:H.width,height:H.height,'stroke':'none','fill':'rgba(255, 255, 255, 0)'});G.uB.style.opacity=1;this.cV(G.fr,{x:H.x,y:H.y,width:H.width,height:H.height,'stroke':T.cE,'stroke-width':'0','fill':'none'});G.yW.setAttribute('height',H.height);G.yW.setAttribute('width',H.width);G.yW.setAttribute('x',H.x);G.yW.setAttribute('y',H.y);G.yW.setAttributeNS('http://www.w3.org/1999/xlink','href',T.get_image());break;case IPCC.Web.UI.MarkType.TextSelectionRedaction:this.Po(G);break;case IPCC.Web.UI.MarkType.Highlight:H=T.get_rectangle();if(H.x===0&&H.y===0){var hc=this.K.cd().hB();if(hc.eF()>0){var fb=hc.kk(T.ad);H=fb.bm;}T.ic='y';}this.cV(be,{x:H.x,y:H.y,width:H.width,height:H.height});break;case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.Freehand:H=T.get_rectangle();this.cV(be,{x:H.x,y:H.y,width:H.width,height:H.height});var Qp=G.azC;if(T.akn===true){T.akn=false;Qp.setAttribute("d",T.get_pathString());var Jq=T.get_pathWidth();var GO=T.get_pathHeight();be.setAttribute('viewBox','0 0 '+Jq+' '+GO);G.ado.setAttribute('width',Jq);G.ado.setAttribute('height',GO);}if(T.get_visible()){G.be.style.display='block';}else{G.be.style.display='none';}this.adH(G.be,T.jC);Qp.style.stroke=T.get_lineColor();Qp.style.strokeWidth=T.get_lineWidth()+'px';Qp.style.opacity=T.get_opacity()/255;break;case IPCC.Web.UI.MarkType.SignatureText:H=T.get_rectangle();this.cV(be,{x:H.x,y:H.y,width:H.width,height:H.height});this.cV(G.fr,{x:H.x,y:H.y,width:H.width,height:H.height,'stroke':'none','fill':'rgba(255, 255, 255, 0)'});G.fr.style.opacity=1;var arl=G.T.get_text()||"";G.bW.childNodes[0].data=arl;vq=12*H.width/(T.xV||1);wK=12*H.height/(T.xM||1);uz=Math.min(vq,wK);var apy=Math.floor(uz);T.stampSize=apy.toString();switch(T.jC){case IPCC.Web.UI.HorizontalAlignment.Left:G.bW.setAttribute('text-anchor','start');G.bW.setAttribute('x',H.x);break;case IPCC.Web.UI.HorizontalAlignment.Right:G.bW.setAttribute('text-anchor','end');G.bW.setAttribute("x",H.x+H.width);break;default:G.bW.setAttribute('text-anchor','middle');G.bW.setAttribute("x",H.x+(H.width/2));break;}this.cV(G.bW,{y:H.y+(H.height/2+(uz/3)),'font-size':uz,'stroke':"none",'fill':T.get_fillColor(),'font-family':T.get_fontName()});if(T.get_visible()){G.be.style.display='block';}else{G.be.style.display='none';}break;case IPCC.Web.UI.MarkType.TextLine:this.cV(be,{style:'fill:none;opacity:1;'+T.dM?'display:block;':'display:none;'});H=T.get_rectangle();this.cV(be,{x:H.x,y:H.y,width:H.width,height:H.height});fF='stroke:'+(T.hS?'black':'none')+';stroke-width:1;';this.cV(G.fr,{x:H.x,y:H.y,width:H.width,height:H.height,'stroke':T.hS?'black':'none','fill':'rgba(255, 255, 255, 0)','style':fF});G.bW.style.opacity=1;oD=G.T.get_text()||"";G.bW.childNodes[0].data=oD;SY=IPCC.F.afJ(oD,T.get_fontName(),H.width,H.height,{uT:"pre",fC:G.be});uz=SY.fontSize;T.Ep=uz;T.stampSize=uz;T.Ir=true;T.pf=SY;switch(T.jC){case IPCC.Web.UI.HorizontalAlignment.Center:G.bW.setAttribute('text-anchor','middle');G.bW.setAttribute("x",H.x+(H.width/2));break;case IPCC.Web.UI.HorizontalAlignment.Right:G.bW.setAttribute('text-anchor','end');G.bW.setAttribute("x",H.x+H.width);break;default:G.bW.setAttribute('text-anchor','start');G.bW.setAttribute('x',H.x);break;}this.cV(G.bW,{y:H.y+(H.height/2+(uz/3)),'font-size':uz,'stroke':"none",'fill':T.get_textColor(),'font-family':T.get_fontName(),'white-space':'pre'});break;case IPCC.Web.UI.MarkType.Strikethrough:this.UH(G);this.Po(G);break;default:throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('type',T.get_type());}if(T.get_type()!==IPCC.Web.UI.MarkType.SignaturePath&&T.get_type()!==IPCC.Web.UI.MarkType.Freehand&&T.get_type()!==IPCC.Web.UI.MarkType.SignatureText&&T.get_type()!==IPCC.Web.UI.MarkType.HighlightText&&T.get_type()!==IPCC.Web.UI.MarkType.TextHyperlinkAnnotation&&T.get_type()!==IPCC.Web.UI.MarkType.DocumentHyperlink&&T.get_type()!==IPCC.Web.UI.MarkType.Strikethrough&&T.get_type()!==IPCC.Web.UI.MarkType.TextSelectionRedaction){if(jJ){fF+='fill:none;';}else{if(T.Kk){fF+='fill:'+T.cE+';';}else{fF+='fill:none;';}hS=T.hS;var xL=this.Vb(T.ie);if(xL!==''){fF+='stroke-dasharray:'+xL+';';}}if(hS){fF+='stroke:'+T.get_lineColor()+';';fF+='stroke-width:'+T.es+';';}else{fF+='stroke:none;';}if(T.get_type()===IPCC.Web.UI.MarkType.SignatureText){fF+='opacity:'+1+';';}else{fF+='opacity:'+(T.cZ/255)+';';}if(!T.dM){fF+='display:none;';if(G.hb){G.hb.style.display='none';}}else{if(G.hb){G.hb.style.display='block';}}this.cV(be,{style:fF});}if(T.get_type()===IPCC.Web.UI.MarkType.Freehand){if(!T.dM){fF+='display:none;';}else{fF+='display:block;';}this.cV(be,{style:fF});}var bD;if(!this.K.get_areMarksEditable()){bD=this.K.get_cursor();}else if(T.mu===IPCC.Web.UI.MarkInteractionMode.SelectionDisabled&&T.get_type()!==IPCC.Web.UI.MarkType.TextHyperlinkAnnotation&&T.get_type()!==IPCC.Web.UI.MarkType.DocumentHyperlink){bD='default';}else if(T.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||T.get_type()===IPCC.Web.UI.MarkType.DocumentHyperlink){bD=IPCC.aP.Link;}else if(T.get_type()!==IPCC.Web.UI.MarkType.Highlight&&T.get_type()!==IPCC.Web.UI.MarkType.HighlightText&&T.get_type()!==IPCC.Web.UI.MarkType.Strikethrough&&T.get_type()!==IPCC.Web.UI.MarkType.TextSelectionRedaction&& !(T.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&T.bS)){bD=IPCC.aP.Move;}else{bD=IPCC.aP.Arrow;}be.style.cursor=IPCC.aP.fw(bD);if(G.hb){G.hb.style.cursor=IPCC.aP.fw(bD);}},adH:function(be,HZ){switch(HZ){case IPCC.Web.UI.HorizontalAlignment.Left:be.setAttribute('preserveAspectRatio','xMinYMid');break;case IPCC.Web.UI.HorizontalAlignment.Center:be.setAttribute('preserveAspectRatio','xMidYMid');break;case IPCC.Web.UI.HorizontalAlignment.Right:be.setAttribute('preserveAspectRatio','xMaxYMid');break;}},Po:function(G){var T=G.T,awh=T.get_visible();var H=T.get_rectangle();if(H.x===0&&H.y===0){return;}var iz=G.iz;while(iz.firstChild){iz.removeChild(iz.firstChild);}var ib;for(var h=0;h<T.eR.length;h++){for(var bz=0;bz<T.eR[h].length;bz++){var afG=this.K.cd().hB();if(afG.eF()>0){var ayQ=afG.kk(T.eR[h].startIndex+bz);ib=ayQ.bm;}var al=this.dp('rect');this.cV(al,{x:ib.x,y:ib.y,width:ib.width,height:ib.height,fill:T.eR[h].color,display:(awh)?'block':'none'});al.style.opacity=(T.eR[h].opacity)?(T.eR[h].opacity)/255.0:0.5;iz.appendChild(al);}}},Vb:function(ie){switch(ie){case IPCC.Web.UI.LineStyle.Dash:return '7,7';case IPCC.Web.UI.LineStyle.Dot:return '1,7';case IPCC.Web.UI.LineStyle.DashDot:return '7,7,1,7';case IPCC.Web.UI.LineStyle.DashDotDot:return '7,7,1,7,1,7';default:break;}return '';},LU:function(G){if(G.be){this.ao.CR.removeChild(G.be);}if(G.hb){this.ao.CR.removeChild(G.hb);}delete G.be;},aIs:function(){},awf:function(){this.ao=undefined;},dp:function(aT){return document.createElementNS('http://www.w3.org/2000/svg',aT);},cV:function(be,au){var h;for(h in au){if(au.hasOwnProperty(h)){var attr=au[h];be.setAttribute(h,attr!==undefined&&attr!==null?attr.toString():'');}}}};module.exports=aho;},{}],18:[function(require,module,exports){var MH=require('./ArtSVGUIDirector');var cr=MH;cr.FC=function(isMouseOver,isSelected){return(isSelected?127:(isMouseOver?127:63))/255;};cr.agO=function(){return 39/255;};cr.aFO=function(isSelected){return isSelected?"purple":"blue";};cr.prototype.awG=function(hd,kc,AU,rD,Ap){var dE={hd:hd,kc:kc,AU:AU,rD:rD,Ap:Ap};if(hd.x===kc.x&&hd.y===kc.y){dE.Ap=IPCC.Web.UI.LineHeadType.None;}var LP=Math.atan2(hd.x-kc.x,-(hd.y-kc.y))+Math.PI/2;AU*=Math.PI/180;var iM=LP+AU;dE.CP={x:hd.x+Math.cos(iM)*rD,y:hd.y+Math.sin(iM)*rD};iM=LP-AU;dE.FO={x:hd.x+Math.cos(iM)*rD,y:hd.y+Math.sin(iM)*rD};switch(dE.Ap){case IPCC.Web.UI.LineHeadType.Solid:case IPCC.Web.UI.LineHeadType.Open:dE.JJ={x:(dE.CP.x+dE.FO.x)/2,y:(dE.CP.y+dE.FO.y)/2};break;case IPCC.Web.UI.LineHeadType.PointerSolid:dE.JJ={x:hd.x+Math.cos(LP)*rD/2,y:hd.y+Math.sin(LP)*rD/2};break;default:dE.JJ=hd;break;}return dE;};cr.prototype.awN=function(G){var T=G.T;var H=T.get_rectangle();var Jl={x:T.mY.x+H.x+0.00001,y:T.mY.y+H.y+0.00001};var aj={};var gM=[{x:H.x,y:H.y},{x:H.x+H.width,y:H.y},{x:H.x+H.width,y:H.y+H.height},{x:H.x,y:H.y+H.height}];if(!T.wC){aj.ahH=gM;aj.Wa= !T.hS;return aj;}var h,aaK=[];for(h=0;h<4;h++){aaK.push({x:(gM[h].x+gM[(h+3)%4].x)/2,y:(gM[h].y+gM[(h+3)%4].y)/2,aBy:true});}for(h=3;h>=0;h--){gM.splice(h,0,aaK[h]);}function aak(MX){var wO,aly;wO=(Jl.x-(gM[MX].x+gM[(MX+1)%8].x)/2)*H.height;aly=wO*wO;wO=(Jl.y-(gM[MX].y+gM[(MX+1)%8].y)/2)*H.width;return aly+wO*wO;};var Ug=0,alx=aak(0),hh;for(h=1;h<8;h++){hh=aak(h);if(hh<alx){alx=hh;Ug=h;}}gM=gM.slice(Ug+1).concat(gM.slice(0,Ug+1));var EK=gM[0],Ee=gM[7];for(h=gM.length-1;h>=0;h--){if(gM[h].aBy){gM.splice(h,1);}}switch(T.Bw){case IPCC.Web.UI.CalloutType.Triangle:gM.splice(0,0,{x:(EK.x*3+Ee.x)/4,y:(EK.y*3+Ee.y)/4});gM.push({x:(EK.x+Ee.x*3)/4,y:(EK.y+Ee.y*3)/4});if(T.yY){aj.Wa=true;aj.VO=[].concat(gM);aj.Pi=[gM[0],Jl,gM[gM.length-1]];}gM.push(Jl);break;default:case IPCC.Web.UI.CalloutType.Line:aj.Pi=[{x:(EK.x+Ee.x)/2,y:(EK.y+Ee.y)/2},Jl];break;}aj.ahH=gM;if(!T.hS){aj.Wa=true;delete aj.VO;delete aj.Pi;}return aj;};cr.prototype.Xy=function(T){var bo=T.get_points();var gH=[],h;for(h=0;h<bo.get_length();h++){gH.push(bo.getPoint(h));}return gH;};cr.prototype.aii=function(gH,arM){var af=0,Mg=1,adw=gH.length-2,hd,kc;if(!arM){af=gH.length-1;Mg= -1;}hd=gH[af];af+=Mg;kc=gH[af];af+=Mg;while(hd.x===kc.x&&hd.y===kc.y&&adw>0){kc=gH[af];af+=Mg;adw--;}return{hd:hd,kc:kc};};cr.prototype.ahP=function(K,ao,bE,jM){if(IPCC.F.YZ){return;}if(!ao.mq){ao.mq=[];}var mq=ao.mq;if(bE.length<1&&mq.length<1){if(ao.zp.firstChild){ao.zp.innerHTML='';}return;}var am=K.eh();var fq=am.zQ();if(this.gL===undefined){this.gL=40;var Am=document.createElement("div");Am.className='pccMarkHandleTopLeft';Am.visibility='hidden';document.body.appendChild(Am);if(Am.currentStyle){this.gL=parseInt(Am.currentStyle.width,10)||0;}else if(document.defaultView&&document.defaultView.getComputedStyle){var arS=document.defaultView.getComputedStyle(Am);this.gL=parseInt(arS.width,10)||0;}document.body.removeChild(Am);}var h,JP=[];for(h=0;h<bE.length;h++){if(bE[h].get_visible()===true){if(fq.FN(bE[h])>=0||(bE[h].get_selected()===true&&(bE[h].kd===true||bE[h].lk===true))||bE[h].xj===true){JP.push(bE[h]);}}}for(h=0;h<mq.length;h++){while(h<mq.length&&(h>=JP.length||mq[h].T!==JP[h])){ao.zp.removeChild(mq[h].gb);mq.splice(h,1);}if(h<mq.length){this.ajg(mq[h],jM);}}for(h=mq.length;h<JP.length;h++){mq[h]={T:JP[h]};this.awe(ao.zp,mq[h]);this.ajg(mq[h],jM);}};cr.prototype.uZ=function(gb,awJ,Df,tK,aAF,bD,dJ){var dI=[],h,ba;if(dJ===undefined){dJ='handle';}for(h=0;h<awJ;h++){ba={be:document.createElement('div')};ba.be.ImGearMarkHandle=ba;ba.bD=bD;ba.aT=tK;ba.af=aAF+h;gb.appendChild(ba.be);ba.be.setAttribute('data-pcc-mark',dJ+'-'+gb.ImGearMarkRelation.T.jP());dI.push(ba);}return dI;};cr.prototype.asp=function(aK){if(aK.dI===undefined||this.K.get_areMarksEditable()===false){return;}var h;for(h=0;h<aK.dI.length;h++){var ba=aK.dI[h];ba.be.style.cursor=IPCC.aP.fw(ba.bD);}};cr.prototype.awe=function(zp,aK){aK.gb=document.createElement('div');aK.gb.style.width='0px';aK.gb.style.height='0px';aK.gb.style.left='0px';aK.gb.style.top='0px';aK.gb.style.zIndex='1';var h,T=aK.T,ba;aK.gb.ImGearMarkRelation=aK;switch(T.get_type()){case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:aK.dI=this.uZ(aK.gb,2,this.gL,this.Ia,0,IPCC.aP.Move);aK.dI=aK.dI.concat(this.uZ(aK.gb,2,this.gL,this.Ic,0,IPCC.aP.Move));break;case IPCC.Web.UI.MarkType.Polygon:aK.dI=[];break;case IPCC.Web.UI.MarkType.Freehand:aK.dI=[];aK.jt=document.createElement('div');aK.jt.style.border='1px solid gray';aK.jt.style.position='absolute';aK.gb.appendChild(aK.jt);break;case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.SignatureText:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Ellipse:case IPCC.Web.UI.MarkType.Highlight:case IPCC.Web.UI.MarkType.Stamp:case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:if(T.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&T.bS!==undefined){break;}aK.jt=document.createElement('div');aK.jt.style.border='1px solid gray';aK.jt.style.position='absolute';aK.gb.appendChild(aK.jt);aK.dI=this.uZ(aK.gb,4,this.gL,this.ZX,0,-1);aK.dI=aK.dI.concat(this.uZ(aK.gb,4,this.gL,this.YY,0,-1));for(h=4;h<8;h++){ba=aK.dI[h];ba.avN=aK.dI[h-4];ba.avK=aK.dI[(h+1)%4];}if(T.get_type()===IPCC.Web.UI.MarkType.Text){aK.dI=aK.dI.concat(this.uZ(aK.gb,1,this.gL,this.US,0,IPCC.aP.Move));}break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.Strikethrough:aK.dI=this.uZ(aK.gb,1,this.gL,this.Ia,0,IPCC.aP.Move,'texthandlestart');aK.dI=aK.dI.concat(this.uZ(aK.gb,1,this.gL,this.Ia,1,IPCC.aP.Move,'texthandleend'));break;}if(T.ik()===IPCC.Web.UI.MarkType.Text||T.ik()===IPCC.Web.UI.MarkType.TextLine||T.ik()===IPCC.Web.UI.MarkType.TextAreaSignature){var om=document.createElement('div');om.className='pccEditMarkButton';om.setAttribute('data-pcc-mark','edit-'+T.jP());om.onclick=function(aI){aI=aI||{};aI.stopPropagation?aI.stopPropagation():aI.cancelBubble=true;aI.preventDefault?aI.preventDefault():aI.returnValue=false;var qi;var vb=aK.gb;while(vb&&(vb.parentNode||vb.ownerSVGElement)){if(vb.parentNode.id&&vb.parentNode.id.indexOf("__pViewId")!== -1){qi=vb.parentNode;}vb=vb.ownerSVGElement||vb.parentNode;}qi&&qi.aQ.aAD(aI,T);};aK.gb.appendChild(om);var ava={be:om};aK.dI.push(ava);}zp.appendChild(aK.gb);};cr.jO={TopLeft:0,TopRight:1,BottomLeft:2,BottomRight:3,TopCenter:4,MidRight:5,BottomCenter:6,MidLeft:7,Point:8,TextSelectionStart:9,TextSelectionEnd:10,Callout:11};cr.prototype.ZX=0;cr.prototype.YY=1;cr.prototype.Ic=2;cr.prototype.Ia=3;cr.prototype.US=4;cr.prototype.adD=function(ba,arV){switch(arV){case IPCC.ce.cr.jO.TopLeft:ba.be.className='pccMarkHandleTopLeft';break;case IPCC.ce.cr.jO.TopCenter:ba.be.className='pccMarkHandleTopCenter';break;case IPCC.ce.cr.jO.TopRight:ba.be.className='pccMarkHandleTopRight';break;case IPCC.ce.cr.jO.MidLeft:ba.be.className='pccMarkHandleMidLeft';break;case IPCC.ce.cr.jO.MidRight:ba.be.className='pccMarkHandleMidRight';break;case IPCC.ce.cr.jO.BottomLeft:ba.be.className='pccMarkHandleBottomLeft';break;case IPCC.ce.cr.jO.BottomCenter:ba.be.className='pccMarkHandleBottomCenter';break;case IPCC.ce.cr.jO.BottomRight:ba.be.className='pccMarkHandleBottomRight';break;case IPCC.ce.cr.jO.Point:ba.be.className='pccMarkHandlePoint';break;case IPCC.ce.cr.jO.TextSelectionStart:ba.be.className='pccMarkHandleTextSelectionStart';break;case IPCC.ce.cr.jO.TextSelectionEnd:ba.be.className='pccMarkHandleTextSelectionEnd';break;default:ba.be.className='pccMarkHandlePoint';break;}};cr.prototype.zt=function(ba,aCT,jM,Df,mN){ba.bL=jM.transform(aCT);ba.be.style.left=(ba.bL.x-Df/2)+'px';ba.be.style.top=(ba.bL.y-Df/2)+'px';ba.be.style.display='block';ba.be.style.zIndex='1';this.adD(ba,mN);};cr.prototype.aba=function(ba,Df,mN){ba.be.style.left=(ba.bL.x-Df/2)+'px';ba.be.style.top=(ba.bL.y-Df/2)+'px';ba.be.style.display='block';ba.be.style.zIndex='1';this.adD(ba,mN);};cr.prototype.rI=function(ba){ba.be.style.display='none';};cr.prototype.ajg=function(aK,jM){if(this.K.get_areMarksEditable()===true){aK.gb.style.cursor='move';}var h,T=aK.T,dI=aK.dI,ba;var gH,H,qI,lE,tK,ek;var hh,Dk,eA,ey,Pv;switch(T.get_type()){case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:gH=this.Xy(T);Dk=gH.length+2-dI.length;if(Dk>0){aK.dI=aK.dI.concat(this.uZ(aK.gb,Dk,this.gL,this.Ic,dI.length-2,IPCC.aP.Move));dI=aK.dI;}for(h=0;h<gH.length;h++){this.zt(dI[h+2],gH[h],jM,this.gL,IPCC.ce.cr.jO.Point);}for(h=gH.length+2;h<dI.length;h++){this.rI(dI[h+2]);}break;case IPCC.Web.UI.MarkType.Polygon:gH=this.Xy(T);Dk=gH.length-dI.length;if(Dk>0){aK.dI=aK.dI.concat(this.uZ(aK.gb,Dk,this.gL,this.Ic,dI.length,IPCC.aP.Move));dI=aK.dI;}for(h=0;h<gH.length;h++){this.zt(dI[h],gH[h],jM,this.gL,IPCC.ce.cr.jO.Point);}for(h=gH.length;h<dI.length;h++){this.rI(dI[h]);}break;case IPCC.Web.UI.MarkType.Freehand:H=T.cN();qI=jM.transform({x:H.x,y:H.y});lE=jM.transform({x:H.x+H.width,y:H.y+H.height});ek={x:Math.min(qI.x,lE.x),y:Math.min(qI.y,lE.y)};ek.width=Math.max(qI.x,lE.x)-ek.x;ek.height=Math.max(qI.y,lE.y)-ek.y;aK.jt.style.left=ek.x+'px';aK.jt.style.top=ek.y+'px';aK.jt.style.width=ek.width+'px';aK.jt.style.height=ek.height+'px';aK.jt.setAttribute('data-pcc-mark','outline-'+T.jP());break;case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Ellipse:case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.Stamp:case IPCC.Web.UI.MarkType.SignatureText:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:if(T.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&T.bS!==undefined){break;}H=T.cN();dI[0].bL=jM.transform({x:H.x,y:H.y});dI[1].bL=jM.transform({x:H.x+H.width,y:H.y});dI[2].bL=jM.transform({x:H.x+H.width,y:H.y+H.height});dI[3].bL=jM.transform({x:H.x,y:H.y+H.height});ek={x:Math.min(dI[0].bL.x,dI[2].bL.x),y:Math.min(dI[0].bL.y,dI[2].bL.y)};ek.width=Math.max(dI[0].bL.x,dI[2].bL.x)-ek.x;ek.height=Math.max(dI[0].bL.y,dI[2].bL.y)-ek.y;Pv={x:ek.x+ek.width/2,y:ek.y+ek.height/2};for(h=0;h<4;h++){ba=dI[h];tK=(ba.bL.x<Pv.x)?((ba.bL.y<Pv.y)?0:2):((ba.bL.y<Pv.y)?1:3);this.aba(ba,this.gL,tK);switch(tK){case 0:ba.bD=IPCC.aP.ResizeNW;break;case 1:ba.bD=IPCC.aP.ResizeNE;break;case 2:ba.bD=IPCC.aP.ResizeSW;break;case 3:ba.bD=IPCC.aP.ResizeSE;break;}}aK.jt.style.left=ek.x+'px';aK.jt.style.top=ek.y+'px';aK.jt.style.width=ek.width+'px';aK.jt.style.height=ek.height+'px';aK.jt.setAttribute('data-pcc-mark','outline-'+T.jP());var aDN=ek.x+ek.width/4;var anz=ek.x+ek.width*3/4;var aGH=ek.y+ek.height/4;var aoO=ek.y+ek.height*3/4;if(this.ar.zV()===IPCC.Web.UI.MarkHandleMode.HideCornerHandlesWhenClose){qI=dI[0].bL;lE=dI[1].bL;var aBP=dI[2].bL;eA=qI.x-lE.x;ey=lE.y-aBP.y;var aqi=eA*eA;var apC=ey*ey;if(Math.min(aqi,apC)<this.gL*this.gL*5){this.rI(dI[0]);this.rI(dI[1]);this.rI(dI[2]);this.rI(dI[3]);}}for(h=4;h<8;h++){ba=dI[h];qI=ba.avN.bL;lE=ba.avK.bL;eA=qI.x-lE.x;ey=qI.y-lE.y;hh=eA*eA+ey*ey;if(this.ar.zV()===IPCC.Web.UI.MarkHandleMode.HideSideHandlesWhenClose&&hh<this.gL*this.gL*5){this.rI(ba);}else{ba.bL={x:(qI.x+lE.x)/2,y:(qI.y+lE.y)/2};this.aba(ba,this.gL,h);if(ba.bL.x<aDN){ba.bD=IPCC.aP.ResizeW;}else if(ba.bL.x>anz){ba.bD=IPCC.aP.ResizeE;}else if(ba.bL.y<aGH){ba.bD=IPCC.aP.ResizeN;}else if(ba.bL.y>aoO){ba.bD=IPCC.aP.ResizeS;}}}if(T.get_type()===IPCC.Web.UI.MarkType.Text){if(T.wC){this.zt(dI[8],{x:H.x+T.mY.x,y:H.y+T.mY.y},jM,this.gL,IPCC.ce.cr.jO.Callout);}else{this.rI(dI[8]);}}break;case IPCC.Web.UI.MarkType.DocumentHyperlink:return;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.Strikethrough:aK.gb.style.cursor='move';var fb,ib,xJ;var FL=this.K.cd();var hc=FL.hB();if(T.kd===true){xJ=T.ad;if(xJ>=hc.eF()){fb=hc.kk(hc.eF()-1);ib=fb.tx();this.zt(dI[0],new IPCC.Web.UI.Point(ib.x+ib.width,ib.y),jM,this.gL,IPCC.ce.cr.jO.TextSelectionStart);break;}fb=hc.kk(T.ad);ib=fb.tx();this.zt(dI[0],new IPCC.Web.UI.Point(ib.x,ib.y),jM,this.gL,IPCC.ce.cr.jO.TextSelectionStart);}else{this.rI(dI[0]);}if(T.lk===true){xJ=T.ad+T.db-1;if(xJ<0){fb=hc.kk(0);ib=fb.tx();this.zt(dI[1],new IPCC.Web.UI.Point(ib.x,ib.y+ib.height),jM,this.gL,IPCC.ce.cr.jO.TextSelectionEnd);break;}fb=hc.kk(xJ);ib=fb.tx();this.zt(dI[1],new IPCC.Web.UI.Point(ib.x+ib.width,ib.y+ib.height),jM,this.gL,IPCC.ce.cr.jO.TextSelectionEnd);}else{this.rI(dI[1]);}break;}if(T.get_type()===IPCC.Web.UI.MarkType.Text||T.get_type()===IPCC.Web.UI.MarkType.TextLine||T.get_type()===IPCC.Web.UI.MarkType.TextAreaSignature){var ty=dI[dI.length-1];if(ty.be.className.match(/pcc/)){var QS=aK.jt.clientHeight;var Sa=aK.jt.clientWidth;var akL=aK.jt.offsetTop;var ako=aK.jt.offsetLeft;var ajp=ty.be.clientHeight;var VH=ty.be.clientWidth;ty.be.style.position='absolute';ty.be.style.zIndex='2';if(QS>ajp+10&&Sa>VH+10){ty.be.style.top=(QS-ajp)/2+akL+'px';ty.be.style.left=(Sa-VH)/2+ako+'px';}else{ty.be.style.top=QS+akL+10+'px';ty.be.style.left=(Sa-VH)/2+ako+'px';}}}this.asp(aK);};cr.prototype.acr=function(fU,uy){var azB=IPCC.F.acW(fU,uy||'#ffffff'),aEJ=IPCC.F.map(azB,function(bx){return{ad:bx.startIndex,dq:bx.endIndex,Du:bx.color};});return aEJ;};cr.prototype.arJ=function(G){var T=G.T;if(T.eR){var jI=this.acr(T.eR);var Ct=T.aD;var xW='';for(var h=jI.length-1;h>=0;h--){var Xk=jI[h];var ad=Xk.ad;var dq=Xk.dq;var dB=Xk.Du;var cC=IPCC.F.If(Ct.substr(ad,dq-ad+1));var aqA=IPCC.F.If(Ct.substr(dq+1,Ct.length-dq+1));Ct=Ct.substr(0,ad);xW="<span style='background-color:"+dB+";'>"+cC+'</span>'+aqA+xW;}xW=IPCC.F.If(Ct)+xW;xW=xW.replace(/\n/g,'<br/>');G.nv.innerHTML=xW;}else{G.xe.data=T.aD;}};module.exports=cr;},{"./ArtSVGUIDirector":17}],19:[function(require,module,exports){var tM={JX:function(){var uM=IPCC.tM;if(uM.um===null){
/*@cc_on@if(@_jscript)uM.um=document.documentMode>8;@else@*/ uM.um=true;/*@end@*/}return uM.um;},um:null};module.exports=tM;},{}],20:[function(require,module,exports){var fJ=function(ZT,aEz){this.K=false;this.ZT=ZT;var ke=IPCC.Web.UI;var bk=aEz;if(!bk||bk===null){bk=IPCC.aiq;}this.bk=bk;var apK={aD:bk.zoomInMenuItem,hn:IPCC.dV.abH,L:1.25};var asN={aD:bk.zoomOutMenuItem,hn:IPCC.dV.acT,L:1.25};var axo={aD:bk.fullImageMenuItem,L:ke.FitType.FullImage};var ayB={aD:bk.fullWidthMenuItem,L:ke.FitType.FullWidth};var axZ={aD:bk.fullHeightMenuItem,L:ke.FitType.FullHeight};var aEm={aD:bk.oneToOneRatioMenuItem,L:ke.FitType.OneToOne};var aEB={aD:bk.actualSizeMenuItem,L:ke.FitType.ActualSize};var aCP={aD:bk.rotateRightMenuItem,hn:IPCC.dV.WN,L:90};var aBs={aD:bk.rotateLeftMenuItem,hn:IPCC.dV.WN,L: -90};var aEH={aD:bk.mirrorHorizontalMenuItem,hn:IPCC.dV.agJ};var aDR={aD:bk.mirrorVerticalMenuItem,hn:IPCC.dV.akS};var Sv={aD:bk.panToolMenuItem,L:ke.MouseTool.HandPan};var Zd={aD:bk.areaSelectionToolMenuItem,L:ke.MouseTool.Select};var VI={aD:bk.zoomRectangleToolMenuItem,L:ke.MouseTool.RectangleZoom};var YX={aD:bk.flyingMagnifierToolMenuItem,L:ke.MouseTool.Magnifier};var avp={aD:bk.createTextMarkToolMenuItem,L:ke.MouseTool.CreateTextMark};var awr={aD:bk.createLineMarkToolMenuItem,L:ke.MouseTool.CreateLineMark};var avo={aD:bk.createRectangleMarkToolMenuItem,L:ke.MouseTool.CreateRectangleMark};var avE={aD:bk.createEllipseMarkToolMenuItem,L:ke.MouseTool.CreateEllipseMark};var avr={aD:bk.editMarksToolMenuItem,L:ke.MouseTool.EditMarks};var awO={aD:bk.createStampMarkToolMenuItem,L:ke.MouseTool.CreateStampMark};var avV={aD:bk.createHighlightMarkToolMenuItem,L:ke.MouseTool.CreateHighlightTextMark};var agk={aZ:55,ca:[{aD:bk.thicknessMenu.item1,L:1},{aD:bk.thicknessMenu.item2,L:2},{aD:bk.thicknessMenu.item3,L:3},{aD:bk.thicknessMenu.item4,L:4},{aD:bk.thicknessMenu.item5,L:5},{aD:bk.thicknessMenu.item6,L:6},{aD:bk.thicknessMenu.item7,L:7},{aD:bk.thicknessMenu.item8,L:8}]};var aDI={aZ:145,ca:[{aD:bk.opacityMenu.translucent,L:127},{aD:bk.opacityMenu.opaque,L:255}]};var QC={aD:bk.borderThicknessMenuItem,hn:IPCC.dV.IK,an:'lineWidth',mL:agk};var Rz={aD:bk.borderColorMenuItem,hn:IPCC.dV.Ln,an:'lineColor'};var Kb={aD:bk.fillColorMenuItem,hn:IPCC.dV.Ln,an:'fillColor'};var alO={aD:bk.lineThicknessMenuItem,hn:IPCC.dV.IK,an:'lineWidth',mL:agk};var amm={aD:bk.lineColorMenuItem,hn:IPCC.dV.Ln,an:'lineColor'};var axY={aD:bk.fontMenuItem,hn:IPCC.dV.akO};var Nv={aD:bk.opacityMenuItem,hn:IPCC.dV.IK,an:'opacity',mL:aDI};var aGg={aD:bk.moveToBackMenuItem,hn:IPCC.dV.akw};var aEc={aD:bk.moveBackwardMenuItem,hn:IPCC.dV.ahW};var aDz={aD:bk.moveForwardMenuItem,hn:IPCC.dV.ajK};var aEP={aD:bk.moveToFrontMenuItem,hn:IPCC.dV.alq};var uk={aD:bk.deleteMarkMenuItem,hn:IPCC.dV.aeH};var alN={aZ:180,ca:[axo,ayB,axZ,aEm,aEB]};var anw={aD:bk.zoomToFitMenuItem,hn:IPCC.dV.adn,mL:alN};var aDp={aZ:200,ca:[aCP,aBs,aEH,aDR]};var aCV={aD:bk.orientationMenuItem,mL:aDp};var OX;if(IPCC.ce){if(IPCC.gB===false){OX={aZ:180,ca:[Sv,VI,YX,Zd,null]};}else{OX={aZ:180,ca:[Sv,VI,YX,Zd,null,avr,avp,awr,avo,avE,awO,avV]};}}else{OX={aZ:180,ca:[Sv,VI,YX,Zd]};}var aEw={aD:bk.mouseToolsMenuItem,hn:IPCC.dV.acJ,mL:OX};var azX={aZ:150,ca:[Kb,QC,Rz,null,Nv]};var axg={aZ:150,ca:[Kb,QC,Rz,null,null]};var aAy={aZ:150,aD:bk.rectangleMarkPropertiesMenuItem,mL:azX};var ayz={aZ:150,aD:bk.rectangleMarkPropertiesMenuItem,mL:axg};var anS={aZ:150,ca:[axY,Kb,QC,Rz,null,null,null,Nv]};var aon={aD:bk.textMarkPropertiesMenuItem,mL:anS};var aCj={aZ:150,ca:[Kb,QC,Rz,null,Nv]};var aCn={aD:bk.polygonMarkPropertiesMenuItem,mL:aCj};var aCE={aZ:140,ca:[alO,amm,null,Nv]};var aBT={aD:bk.polylineMarkPropertiesMenuItem,mL:aCE};var atn={aZ:140,ca:[alO,amm,null,null]};var auv={aD:bk.lineMarkPropertiesMenuItem,mL:atn};var ats={aZ:140,ca:[aEP,aDz,aEc,aGg]};var yR={aD:bk.markOrderingMenuItem,mL:ats};var aoP={aZ:150,ca:[Kb]};var acP={aD:bk.stampMarkPropertiesMenuItem,mL:aoP};this.aoy={aZ:180,ca:[apK,asN,anw,aCV,aEw]};this.aoj={aZ:140,ca:[aon,yR,uk]};this.azV={aZ:140,ca:[aAy,yR,uk]};this.apc={aZ:140,ca:[acP,yR,uk]};this.amG={aZ:140,ca:[null,yR,uk]};this.axG={aZ:140,ca:[ayz,yR,uk]};this.aAW={aZ:140,ca:[aCn,yR,uk]};this.aCb={aZ:140,ca:[aBT,yR,uk]};this.atH={aZ:140,ca:[auv,yR,uk]};this.asu={aZ:140,ca:[acP,null,uk]};};fJ.prototype.mG=function(K){this.K=K;};fJ.prototype.ed=function(){this.K=false;};fJ.prototype.aB=function(){};fJ.prototype.Ta=function(V){var fP;if(V.mark&&this.ZT){var MQ=V.mark.lq();switch(V.mark.get_type()){case IPCC.Web.UI.MarkType.Line:fP=this.atH;break;case IPCC.Web.UI.MarkType.Polyline:fP=this.aCb;break;case IPCC.Web.UI.MarkType.Rectangle:fP=this.azV;break;case IPCC.Web.UI.MarkType.Ellipse:fP=this.axG;break;case IPCC.Web.UI.MarkType.Polygon:fP=this.aAW;break;case IPCC.Web.UI.MarkType.Text:fP=this.aoj;break;case IPCC.Web.UI.MarkType.Stamp:if(MQ===true){fP=this.amG;}else{fP=this.apc;}break;case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.Highlight:if(V.mark.ic==='y'){fP=this.asu;}break;}}if(!fP){fP=this.aoy;}var vr=document.documentElement.scrollLeft-document.documentElement.clientLeft+document.body.scrollLeft-document.body.clientLeft;var vC=document.documentElement.scrollTop-document.documentElement.clientTop+document.body.scrollTop-document.body.clientTop;var ajF=new IPCC.Web.UI.Point(V.domEvent.clientX+vr,V.domEvent.clientY+vC);var J=this;function vF(bU){if(sH){var bw=bU.target;if(bw&&bw===null){return;}var DF,alv;while(bw&&bw!==document.body&&bw.parentNode!==null){if(bw&&bw!==null){if(bw===sH){alv=true;}if(!DF&&bw.ImGearCommand){DF=bw.ImGearCommand;}bw=bw.parentNode;}}if(!alv||DF){IPCC.Web.UI.as.removeHandler(document.body,'mousedown',vF);IPCC.Web.UI.as.removeHandler(document.body,'mousemove',abe);document.body.removeChild(sH);sH=null;if(DF){DF.RW=V;J.aya(DF);}}}};function Za(Fc,zg,zM,Hl){var dM=false,h,bw;for(h=0;h<zg.length;h++){if(Fc===zg[h]){dM=true;}}if(!dM&&Fc.ImGearType==='menu'){Fc.style.display='none';}else{Fc.style.display='block';}bw=Fc.firstChild;while(bw){if(bw.ImGearType==='menuItemHighlight'){if(bw===Hl){bw.style.display='block';}else{bw.style.display='none';}}if(bw.firstChild){Za(bw,zg,zM,Hl);}bw=bw.nextSibling;}};function abe(bU){if(sH){var bw=bU.target;if(bw&&bw===null){return;}var zg=[sH],zM,Hl;while(bw&&bw!==document.body&&bw.parentNode!==null){if(!zM&&bw.ImGearType==='menuItem'){zM=bw;}if(bw.ImGearType==='menu'){zg.push(bw);}bw=bw.parentNode;}if(zM){bw=zM.firstChild;while(bw){if(bw.ImGearType==='menuItemHighlight'){Hl=bw;}else if(bw.ImGearType==='menu'){zg.push(bw);}bw=bw.nextSibling;}}Za(sH,zg,zM,Hl);}};var bm;if(window.innerWidth){bm={x:window.pageXOffset,y:window.pageYOffset,width:window.innerWidth,height:window.innerHeight};}else if(document.documentElement.clientWidth){bm={x:vr,y:vC,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};}else{bm={x:vr,y:vC,width:document.body.clientWidth,height:document.body.clientHeight};}var sH=this.anc(fP,false,false,ajF,ajF,true,bm,document.body,V.mark);Za(sH,[sH],null,null);document.body.appendChild(sH);IPCC.Web.UI.as.addHandler(document.body,'mousedown',vF);IPCC.Web.UI.as.addHandler(document.body,'mousemove',abe);};fJ.prototype.anc=function(fP,hn,an,Ze,Ui,Fs,bm,aAA,T){var akT=24,abj=1;var h,TS=0;for(h=0;h<fP.ca.length;h++){var auq=fP.ca[h];if(auq){TS+=akT;}else{TS+=abj;}}var OH;if(Fs){OH=Ui.x+fP.aZ;if(OH>bm.x+bm.width){Fs=false;}}if(!Fs){OH=Ze.x-fP.aZ;if(OH<bm.x){Fs=true;}}var pL={x:Ui.x,y:Ui.y};if(!Fs){pL={x:Ze.x-fP.aZ-2,y:Ze.y-2};}var aeP=bm.y+bm.height-TS-8;if(pL.y>aeP){pL.y=aeP;}if(pL.y<bm.y+2){pL.y=bm.y+2;}function gk(pI){var vN=document.createElement('div');var h;for(h in pI){if(pI.hasOwnProperty(h)){vN.style[h]=pI[h];}}return vN;};var LO=gk({zIndex:2,width:fP.aZ+'px',left:pL.x+'px',top:pL.y+'px',margin:'0px',padding:'0px',border:'1px solid #C0C0C0',position:'absolute',backgroundColor:'#F0F0F0',color:'Black',fontSize:'11px',fontFamily:'Arial, Helvetica, sans-serif',fontWeight:'bold',boxShadow:'0 2px 3px rgba(0,0,0,.2)'});LO.ImGearType='menu';for(h=0;h<fP.ca.length;h++){var yI=fP.ca[h];var uw;if(yI){uw=gk({position:'relative',height:'24px'});uw.ImGearType='menuItem';var Aa=gk({position:'absolute',width:'24px',overflow:'hidden',borderRight:'1px solid #E0E0E0',height:'24px',textAlign:'center'});uw.appendChild(Aa);var alf=gk({textOverflow:'ellipsis',whiteSpace:'nowrap',width:fP.aZ-44+'px',position:'absolute',left:'25px',padding:'0 0 0 4px',overflow:'hidden',borderLeft:'1px solid #FFFFFF',height:'24px',lineHeight:'24px'});uw.appendChild(alf);var alA=gk({display:'none',position:'absolute',height:'24px',width:fP.aZ+'px',backgroundColor:'#00C0E0',filter:'progid:DXImageTransform.Microsoft.Alpha(opacity=30)',opacity:'.3'});alA.ImGearType='menuItemHighlight';uw.appendChild(alA);alf.appendChild(document.createTextNode(yI.aD));var MW=yI.hn||hn;var JS=yI.an||an;if(JS){if(MW===IPCC.dV.IK){var aDU=T['get_'+JS]();if(aDU===yI.L){if(this.K.uY()){Aa.style.backgroundImage='url(\''+this.K.uY()+'/MenuIcons.png'+'\')';}else{Aa.style.backgroundImage='url(\''+'<%=WebResource("IPCC.Web.UI.MenuIcons.png")%>'+'\')';}Aa.style.backgroundPosition='0px';}}else if(MW===IPCC.dV.ajV){var aDX=T['get_'+JS]();if(aDX){if(this.K.uY()){Aa.style.backgroundImage='url(\''+this.K.uY()+'/MenuIcons.png'+'\')';}else{Aa.style.backgroundImage='url(\''+'<%=WebResource("IPCC.Web.UI.MenuIcons.png")%>'+'\')';}Aa.style.backgroundPosition='24px 0px';}}}if(!yI.mL){uw.ImGearCommand={hn:MW,an:JS,L:yI.L};}else{var aEO={x:bm.x-pL.x,y:bm.y-pL.y,width:bm.width,height:bm.height};this.anc(yI.mL,MW,JS,{x:0,y: -1},{x:fP.aZ,y: -1},Fs,aEO,uw,T);}pL.y+=akT;}else{uw=gk({height:'1px',overflow:'hidden',backgroundColor:'#E0E0E0'});pL.y+=abj;}LO.appendChild(uw);}aAA.appendChild(LO);return LO;};fJ.prototype.avn=function(T,dg,K){var vr=document.documentElement.scrollLeft-document.documentElement.clientLeft+document.body.scrollLeft-document.body.clientLeft;var vC=document.documentElement.scrollTop-document.documentElement.clientTop+document.body.scrollTop-document.body.clientTop;var bm;if(window.innerWidth){bm={x:window.pageXOffset,y:window.pageYOffset,width:window.innerWidth,height:window.innerHeight};}else if(document.documentElement.clientWidth){bm={x:vr,y:vC,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};}else{bm={x:vr,y:vC,width:document.body.clientWidth,height:document.body.clientHeight};}var nh=bm.x+bm.width/2;var nu=bm.y+bm.height/2;var jq=document.createElement('div');jq.innerHTML='	<div style="z-index:2;border:1px solid #000000;font-size:12px;font-family:Arial, Helvetica, sans-serif;font-weight:normal;font-variant:normal;'+'background-color:#F0F0F0;position:absolute;top:'+(nu-85)+'px;left:'+(nh-80)+'px;width:160px;height:170px;">'+'<div style="padding:4px;background-color:#666666;color:#FFFFFF;font-size:14px;">'+this.bk.selectColor+'</div>'+'<div style="position:relative;">'+'<div style="position:absolute;left:8px;top:10px;width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7">'+this.bk.red+':</div>'+'<input id="ImGearColorRed" type="text" style="position:absolute;left:80px;top:8px;width:52px;" />'+'<div style="position:absolute;left:8px;top:40px;width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7">'+this.bk.green+':</div>'+'<input id="ImGearColorGreen" style="position:absolute;left:80px;top:38px;width:52px" type="text" />'+'<div style="position:absolute;left:8px;top:70px;width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7">'+this.bk.blue+':</div>'+'<input id="ImGearColorBlue" style="position:absolute;left:80px;top:68px;width:52px" type="text" />'+'<button id="ImGearColorOKButton" style="font-size:12px;position:absolute;left:9px;top:108px;width:65px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.bk.ok+'</button>'+'<button id="ImGearColorCancelButton" style="font-size:12px;position:absolute;left:81px;top:108px;width:71px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.bk.cancel+'</button>'+'</div>'+'</div>';document.body.appendChild(jq);var abh=document.getElementById('ImGearColorRed');var afF=document.getElementById('ImGearColorGreen');var aek=document.getElementById('ImGearColorBlue');var JO=document.getElementById('ImGearColorOKButton');var GK=document.getElementById('ImGearColorCancelButton');var QY=T['get_'+dg]();var ML;if(QY.length===7&&QY.charAt(0)==='#'){ML=parseInt(QY.slice(1),16);}abh.value=(ML>>16);afF.value=((ML>>8)&255);aek.value=(ML&255);function YA(ZD){var L=Math.floor(+(ZD.value));if(!isFinite(L)){L=0;}if(L<0){L=0;}if(L>255){L=255;}return L;};function AF(){IPCC.Web.UI.as.removeHandler(JO,'click',Ig);IPCC.Web.UI.as.removeHandler(GK,'click',JW);IPCC.Web.UI.as.removeHandler(document.body,'mousedown',vF);};function Ig(){var dB=YA(abh)*65536+YA(afF)*256+YA(aek);T['set_'+dg]('#'+(0x1000000+dB).toString(16).slice(1));AF();document.body.removeChild(jq);jq=null;K.dN();};function JW(){AF();document.body.removeChild(jq);jq=null;};function vF(bU){if(jq){var bw=bU.target;var Hd;while(bw!==document.body){if(bw===jq){Hd=true;}bw=bw.parentNode;}if(!Hd){AF();document.body.removeChild(jq);jq=null;}}};IPCC.Web.UI.as.addHandler(JO,'click',Ig);IPCC.Web.UI.as.addHandler(GK,'click',JW);IPCC.Web.UI.as.addHandler(document.body,'mousedown',vF);abh.focus();};fJ.prototype.awv=function(T,K){var vr=document.documentElement.scrollLeft-document.documentElement.clientLeft+document.body.scrollLeft-document.body.clientLeft;var vC=document.documentElement.scrollTop-document.documentElement.clientTop+document.body.scrollTop-document.body.clientTop;var bm;if(window.innerWidth){bm={x:window.pageXOffset,y:window.pageYOffset,width:window.innerWidth,height:window.innerHeight};}else if(document.documentElement.clientWidth){bm={x:vr,y:vC,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};}else{bm={x:vr,y:vC,width:document.body.clientWidth,height:document.body.clientHeight};}var nh=bm.x+bm.width/2;var nu=bm.y+bm.height/2;var jq=document.createElement('div');jq.innerHTML='<div style="z-index:2;border:1px solid #000000;font-size:12px;font-family:Arial, Helvetica, sans-serif;font-weight:normal;font-variant:normal;'+'background-color:#F0F0F0;position:absolute;top:'+(nu-85)+'px;left:'+(nh-200)+'px;width:400px;height:170px;z-index:2">'+'<div style="padding:4px;background-color:#666666;color:#FFFFFF;font-size:14px;">'+this.bk.selectFont+'</div>'+'<div style="position:relative;">'+'<div style="position:absolute;left:8px;top:10px;width:90px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.bk.font+':</div>'+'<input id="ImGearFontFamily" style="position:absolute;left:100px;top:8px;width:280px" type="text" />'+'<div style="position:absolute;left:8px;top:40px;width:90px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.bk.size+':</div>'+'<input id="ImGearFontSize" style="position:absolute;left:100px;top:38px;width:54px" type="text" />'+'<div style="position:absolute;left:8px;top:70px;"><input id="ImGearFontItalic" type="checkbox" style="float:left"><div style="width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7;">'+this.bk.italic+'</div></div>'+'<div style="position:absolute;left:100px;top:70px;"><input id="ImGearFontBold" type="checkbox" style="float:left"><div style="width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7;">'+this.bk.bold+'</div></div>'+'<div style="position:absolute;left:200px;top:70px;"><input id="ImGearFontUnderline" type="checkbox" style="float:left"><div style="width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7;">'+this.bk.underline+'</div></div>'+'<div style="position:absolute;left:300px;top:70px;"><input id="ImGearFontStrikeout" type="checkbox" style="float:left"><div style="width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7;">'+this.bk.strikeout+'</div></div>'+'<button id="ImGearFontOKButton" style="font-size:12px;position:absolute;left:240px;top:108px;width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.bk.ok+'</button>'+'<button id="ImGearFontCancelButton" style="font-size:12px;position:absolute;left:315px;top:108px;width:71px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.bk.cancel+'</button>'+'</div>'+'</div>';document.body.appendChild(jq);var Yf=document.getElementById('ImGearFontFamily');var aiU=document.getElementById('ImGearFontSize');var agl=document.getElementById('ImGearFontItalic');var ahC=document.getElementById('ImGearFontBold');var ajk=document.getElementById('ImGearFontUnderline');var ajb=document.getElementById('ImGearFontStrikeout');var JO=document.getElementById('ImGearFontOKButton');var GK=document.getElementById('ImGearFontCancelButton');var aDD=T.get_fontName();var aDm=T.get_fontSize();var rO=T.get_fontStyle();Yf.value=aDD;aiU.value=aDm;agl.checked=rO&IPCC.Web.UI.FontStyle.Italic;ahC.checked=rO&IPCC.Web.UI.FontStyle.Bold;ajk.checked=rO&IPCC.Web.UI.FontStyle.Underline;ajb.checked=rO&IPCC.Web.UI.FontStyle.Strikeout;function azv(ZD){var L=Math.floor(+(ZD.value));if(!isFinite(L)){L=12;}if(L<0.1){L=0.1;}if(L>288){L=288;}return L;};function AF(){IPCC.Web.UI.as.removeHandler(JO,'click',Ig);IPCC.Web.UI.as.removeHandler(GK,'click',JW);IPCC.Web.UI.as.removeHandler(document.body,'mousedown',vF);};function Ig(){T.set_fontName(Yf.value);var cR=azv(aiU);T.set_fontSize(cR);var fF=0;if(agl.checked){fF|=IPCC.Web.UI.FontStyle.Italic;}if(ahC.checked){fF|=IPCC.Web.UI.FontStyle.Bold;}if(ajk.checked){fF|=IPCC.Web.UI.FontStyle.Underline;}if(ajb.checked){fF|=IPCC.Web.UI.FontStyle.Strikeout;}T.set_fontStyle(fF);AF();document.body.removeChild(jq);jq=null;K.dN();};function JW(){AF();document.body.removeChild(jq);jq=null;};function vF(bU){if(jq){var bw=bU.target;var Hd;while(bw!==document.body){if(bw===jq){Hd=true;}bw=bw.parentNode;}if(!Hd){AF();document.body.removeChild(jq);jq=null;}}};IPCC.Web.UI.as.addHandler(JO,'click',Ig);IPCC.Web.UI.as.addHandler(GK,'click',JW);IPCC.Web.UI.as.addHandler(document.body,'mousedown',vF);Yf.focus();};fJ.prototype.aya=function(V){var T=V.RW.mark;switch(V.hn){case IPCC.dV.IK:T['set_'+V.an](V.L);this.K.dN();break;case IPCC.dV.Ln:this.avn(T,V.an,this.K);break;case IPCC.dV.akO:this.awv(T,this.K);break;case IPCC.dV.ajV:T['set_'+V.an](!T['get_'+V.an]());this.K.dN();break;case IPCC.dV.akw:T.moveToBack();this.K.dN();break;case IPCC.dV.ahW:T.moveBackward();this.K.dN();break;case IPCC.dV.ajK:T.moveForward();this.K.dN();break;case IPCC.dV.alq:T.moveToFront();this.K.dN();break;case IPCC.dV.aeH:T.removeFromPage();this.K.dN();break;default:this.K.azE(V);break;}};module.exports=fJ;},{}],21:[function(require,module,exports){var aP={Default:0,Arrow:1,Crosshair:2,Link:3,HandOpen:4,HandClosed:5,Magnifier:6,None:7,RectangleZoom:8,AddRectangleMark:9,AddEllipseMark:10,AddLineMark:11,AddFreehandLineMark:12,AddPolygonMark:13,AddPolylineMark:14,AddTextMark:15,Move:16,ResizeN:17,ResizeE:18,ResizeS:19,ResizeW:20,ResizeNW:21,ResizeNE:22,ResizeSE:23,ResizeSW:24,EditMarks:25,RunMarks:26,Text:27,AddStampMark:28,AddRectangleRedactionMark:29,AddImageStampMark:30,fw:function(bD){if(typeof bD==='string'){return bD;}switch(bD){case IPCC.aP.Default:case IPCC.aP.Magnifier:case IPCC.aP.None:case IPCC.aP.RunMarks:return 'auto';case IPCC.aP.Arrow:case IPCC.aP.EditMarks:return 'default';case IPCC.aP.Crosshair:case IPCC.aP.RectangleZoom:case IPCC.aP.AddRectangleMark:case IPCC.aP.AddEllipseMark:case IPCC.aP.AddLineMark:case IPCC.aP.AddFreehandLineMark:case IPCC.aP.AddPolygonMark:case IPCC.aP.AddPolylineMark:case IPCC.aP.AddTextMark:case IPCC.aP.AddRectangleRedactionMark:case IPCC.aP.AddImageStampMark:case IPCC.aP.AddStampMark:return 'crosshair';case IPCC.aP.Link:return 'pointer';case IPCC.aP.HandOpen:case IPCC.aP.HandClosed:case IPCC.aP.Move:return 'move';case IPCC.aP.ResizeN:return 'n-resize';case IPCC.aP.ResizeE:return 'e-resize';case IPCC.aP.ResizeS:return 's-resize';case IPCC.aP.ResizeW:return 'w-resize';case IPCC.aP.ResizeNW:return 'nw-resize';case IPCC.aP.ResizeNE:return 'ne-resize';case IPCC.aP.ResizeSE:return 'se-resize';case IPCC.aP.ResizeSW:return 'sw-resize';case IPCC.aP.Text:return 'text';}return 'auto';}};module.exports=aP;},{}],22:[function(require,module,exports){var jx={qU:function(hN,Od){var aT,cT,fA;if(hN===null){return 'null';}if(!Od){Od=0;}aT=typeof(hN);if(aT==='undefined'){return 'undefined';}else if(aT==='number'||aT==='boolean'){return hN.toString();}else if(aT==='string'){return '\''+hN+'\'';}else if(aT==='function'){return 'function';}else{if(Od<0){return 'hN';}cT='{';for(fA in hN){if(hN.hasOwnProperty(fA)){if(cT.length>2){cT+=', ';}cT+=fA;cT+=': ';cT+=IPCC.jx.qU(hN[fA],Od-1);}}cT+='}';return cT;}},RJ:function(aD){var traceElement=document.getElementById('TraceConsole');if(traceElement&&(traceElement.tagName.toUpperCase()==='TEXTAREA')){traceElement.value+=aD+'\n';}},aIq:function(){var traceElement=document.getElementById('TraceConsole');if(traceElement&&(traceElement.tagName.toUpperCase()==='TEXTAREA')){traceElement.value='';}},mn:function(kS,Jh,bM,FQ,zX){var aD="PCC Controls - ";aD+=(FQ)?FQ:" ";aD+=" parent Div id = ";aD+=(zX)?zX:" ";if(Jh){switch(Jh){case 0:aD+=" FunctionCall ";break;case 1:aD+=" Exception ";break;case 2:aD+=" Custom ";break;case 3:aD+=" UserAction ";break;case 4:aD+=" Warning ";break;default:aD+=" unknown ";}}aD+=" - "+kS;if((typeof(Debug)!=='undefined')&&Debug.writeln){Debug.writeln(aD);}if(window.console&&window.console.log){window.console.log(aD);}if(window.opera){window.opera.postError(aD);}if(window.debugService){window.debugService.trace(aD);}var traceElement=document.getElementById('TraceConsole');if(traceElement&&(traceElement.tagName.toUpperCase()==='TEXTAREA')){traceElement.value+=aD+'\n';}var KG;try{KG=onPCCItemLogged;}catch(ex){}if(KG&&(typeof(KG)).toLowerCase()==='function'){var co=new IPCC.Web.UI.LogItemEventArgs();co.message=kS;co.cause=Jh;co.level=bM;co.id=zX;KG(co);}}};module.exports=jx;},{}],23:[function(require,module,exports){var lY=function(){this.aX=false;this.K=false;};lY.prototype.mG=function(K){this.K=K;this.K.acD(true);this.ar=K.bC();};lY.prototype.ed=function(){if(arguments[0]){if(arguments[0]===true){this.K=false;return;}}this.K.acD(false);this.K=false;};lY.prototype.aB=function(){if(this.aX){this.K.Bp(true);this.ar.pn();this.aX=false;this.K.dN();}};lY.prototype.zn=function(V){this.aB();var T=V.mark;if(T&&T.ik()===IPCC.Web.UI.MarkType.Text){this.K.vV(T);this.K.dN();}};lY.prototype.jR=function(V){this.aB();var jD=V.domEvent;if(jD.button===0){var da=jD.target;this.ba=da.ImGearMarkHandle;if(this.ba){this.tK=this.ba.aT;this.mN=this.ba.af;}else{this.tK=null;this.mN=null;}while(!(da.ImGearMarkRelation)&&da.parentNode&&da!==document.body){da=da.parentNode;}this.G=da.ImGearMarkRelation;if(this.G){this.T=this.G.T;}else{this.T=null;}this.aX=true;this.KD=V.imagePoint;this.Et=V.imagePoint;var T=this.T;if(!T||T.get_interactionMode()===IPCC.Web.UI.MarkInteractionMode.SelectionDisabled){if(!jD.shiftKey){this.K.eh().zQ().removeAllMarks();}this.ar.Ca(V.imagePoint);}else{var gE,H;switch(this.tK){case IPCC.ce.cr.prototype.ZX:this.jk=T.cN();this.Zm=Math.abs(this.jk.width);this.Gh=Math.abs(this.jk.height);gE={x:this.jk.x,y:this.jk.y};this.Lu={x:this.jk.x+this.jk.width,y:this.jk.y+this.jk.height};if(this.mN>0&&this.mN<3){gE.x+=this.jk.width;this.Lu.x-=this.jk.width;}if(this.mN>1){gE.y+=this.jk.height;this.Lu.y-=this.jk.height;}this.aHS=gE;break;case IPCC.ce.cr.prototype.YY:H=T.cN();this.jk=H;gE={x:H.x+H.width/2,y:H.y+H.height/2};switch(this.mN){case 0:this.yL=H.y+H.height;gE.y=H.y;break;case 1:this.yL=H.x;gE.x=H.x+H.width;break;case 2:this.yL=H.y;gE.y=H.y+H.height;break;case 3:this.yL=H.x+H.width;gE.x=H.x;break;}break;case IPCC.ce.cr.prototype.Ic:this.bo=T.qc();if(this.mN<0||this.mN>this.bo.eF()){this.aB();}gE=this.bo.getPoint(this.mN);break;case IPCC.ce.cr.prototype.Ia:break;case IPCC.ce.cr.prototype.US:H=T.cN();gE={x:H.x+T.mY.x,y:H.y+T.mY.y};break;default:var yV=T.get_selected();if(jD.ctrlKey||jD.shiftKey){yV= !yV;T.set_selected(yV);}else{if(!yV){yV=true;this.K.eh().zQ().removeAllMarks();if(T.get_type()===IPCC.Web.UI.MarkType.Highlight){for(var h=0;h<this.K.eh().get_markCount();h++){var SA=this.K.eh().getMark(h);if(SA.ik()===608&&SA.bS===T.bS){SA.set_selected(yV);}}}else{T.set_selected(yV);}}}if(!yV){this.aB();}break;}if(this.aX&&gE){this.axa=gE.x-this.KD.x;this.awI=gE.y-this.KD.y;if(this.ba){this.ar.ath(this.ba.bD);}}}if(this.aX){this.K.Bp(false);}}this.K.dN();};lY.prototype.jQ=function(V){var jD=V.domEvent;var Et;function aCG(aBq){aBq.FP(V.imagePoint.x-Et.x,V.imagePoint.y-Et.y);};if(jD.button!==0){this.aB();}if(this.aX){var T=this.T;if(!T||T.get_interactionMode()===IPCC.Web.UI.MarkInteractionMode.SelectionDisabled){this.ar.xO(V.imagePoint);}else{var gE={x:V.imagePoint.x+this.axa,y:V.imagePoint.y+this.awI};var H;switch(this.tK){case IPCC.ce.cr.prototype.ZX:var nB={x:gE.x,y:gE.y};var lm={x:this.Lu.x,y:this.Lu.y};if(jD.ctrlKey){lm.x=this.jk.x+this.jk.width/2;lm.y=this.jk.y+this.jk.height/2;}if(jD.shiftKey){var tk=Math.abs(nB.x-lm.x);var sl=Math.abs(nB.y-lm.y);if(tk*this.Gh<sl*this.Zm){if(this.Gh>0.001){tk=sl*this.Zm/this.Gh;}}else{if(this.Gh>0.001){sl=tk*this.Gh/this.Zm;}}if(nB.x<lm.x){tk= -tk;}if(nB.y<lm.y){sl= -sl;}nB.x=lm.x+tk;nB.y=lm.y+sl;}if(jD.ctrlKey){lm={x:lm.x-(nB.x-lm.x),y:lm.y-(nB.y-lm.y)};}H={};H.x=Math.min(lm.x,nB.x);H.width=Math.max(lm.x,nB.x)-H.x;H.y=Math.min(lm.y,nB.y);H.height=Math.max(lm.y,nB.y)-H.y;T.set_rectangle(H);break;case IPCC.ce.cr.prototype.YY:H=T.cN();var Dw;if(this.mN&1){if(jD.ctrlKey){Dw=this.jk.x+this.jk.width/2;H.width=Math.abs(gE.x-Dw)*2;H.x=Dw-H.width/2;}else{H.x=Math.min(gE.x,this.yL);H.width=Math.max(gE.x,this.yL)-H.x;}}else{if(jD.ctrlKey){Dw=this.jk.y+this.jk.height/2;H.height=Math.abs(gE.y-Dw)*2;H.y=Dw-H.height/2;}else{H.y=Math.min(gE.y,this.yL);H.height=Math.max(gE.y,this.yL)-H.y;}}T.set_rectangle(H);break;case IPCC.ce.cr.prototype.Ic:this.bo=T.qc();gE=this.bo.setPoint(this.mN,gE);break;case IPCC.ce.cr.prototype.Ia:break;case IPCC.ce.cr.prototype.US:H=T.cN();T.set_calloutPoint({x:gE.x-H.x,y:gE.y-H.y});break;default:Et=this.Et;this.Et=V.imagePoint;this.K.eh().zQ().jL(aCG);break;}}this.K.dN();}};lY.prototype.jX=function(){function azz(T){var Ho=T.aju();if(aah.contains(Ho)&&aah.contains({x:Ho.x+Ho.width,y:Ho.y+Ho.height})){T.set_selected(true);}};if(this.aX){if(!this.T){var aah=this.ar.wN();this.K.eh().Fp(azz);this.ar.pn();}this.aB();}};lY.prototype.po=function(V){var bd=this.K.ee();if(V.windowPoint.x<=0||V.windowPoint.x>=bd.width-2){this.aB();}if(V.windowPoint.y<=0||V.windowPoint.y>=bd.height-2){this.aB();}};lY.prototype.ma=function(){this.aB();};module.exports=lY;},{}],24:[function(require,module,exports){var cs=require('./IPCC.Util').regClass;var NH=function(){return this;};NH.registerClass=cs;NH.prototype={};NH.registerClass('IPCC.ExceptionEventArgs');module.exports=NH;},{"./IPCC.Util":28}],25:[function(require,module,exports){var ec=require('./IPCC.Util').regEnum;var nG=function(){};nG.registerEnum=ec;nG.prototype={FitToWidth:0,ShrinkToWidth:1,ActualSize:2,FitToHeight:3,BestFit:4};nG.registerEnum('IPCC.FitType',false);module.exports=nG;},{"./IPCC.Util":28}],26:[function(require,module,exports){var vH=function(){function DM(){return Math.floor((Math.random()*10)).toString();};var ja=new Date();return DM()+DM()+'_'+ja.getTime()+"_"+DM()+DM()+DM()+DM();};module.exports=vH;},{}],27:[function(require,module,exports){var oO=function(){this.aX=false;this.K=false;};oO.prototype.mG=function(K){this.K=K;};oO.prototype.ed=function(){this.K=false;};oO.prototype.aB=function(){if(this.aX){this.aX=false;}};oO.prototype.qE=function(){this.aB();};oO.prototype.jR=function(V){this.aB();if(V.domEvent.button===0){this.aX=true;this.KD=V.imagePoint;}};oO.prototype.jQ=function(V){if(V.domEvent.button!==0){this.aB();}if(this.aX){var K=this.K;var ar=K.bC();var aL=ar.fB();var bd=K.ee();aL.UV(this.KD,V.windowPoint);aL.la(K.dj(),bd);K.ay('userModifiedViewState',{});ar.io(aL);K.dN();}};oO.prototype.jX=function(){this.aB();};oO.prototype.po=function(V){var bd=this.K.ee();if(V.windowPoint.x<=0||V.windowPoint.x>=bd.width-2){this.aB();}if(V.windowPoint.y<=0||V.windowPoint.y>=bd.height-2){this.aB();}};oO.prototype.ma=function(){this.aB();};module.exports=oO;},{}],28:[function(require,module,exports){var F={};F.aaq=(function(){var ks={};var An=[];ks.get=function aGw(rz){if(An.length===0){return;}for(var i=0;i<rz.length;i++){if(An[i]&&An[i].rz===rz){return An[i].jn;}}};ks.set=function aHG(rz,jn){An.push({rz:rz,jn:jn});if(An.length>10){An.shift();}};ks.contains=function iS(rz){return ks.get(rz)!==undefined;};ks.cacheReponse=function aHJ(rz,jn){if(jn.readyState===4){ks.set(rz,jn);}else{var avf=jn.onreadystatechange;jn.onreadystatechange=function(){if(jn.readyState===XMLHttpRequest.DONE&&jn.status===200){ks.set(rz,jn);}avf();};}};return ks;})();F.YZ=false;F.Lw=(function(){var Lw=false;var tf=navigator.userAgent,ZM=((tf.indexOf('Mozilla/5.0')> -1&&tf.indexOf('Android ')> -1&&tf.indexOf('AppleWebKit')> -1)&& !(tf.indexOf('Chrome')> -1)),acA=new RegExp(/AppleWebKit\/([\d.]+)/),aCa=acA.exec(tf),amK=(aCa===null?null:parseFloat(acA.exec(tf)[1]));Lw=ZM&&amK!==null&&amK<537;return Lw;})();F.awY=(function(){var ags=false;var tf=navigator.userAgent,ZM=/Android/i.test(tf),atx=/iPhone|iPad|iPod/i.test(tf),atK=/IEMobile/i.test(tf);ags=(ZM||atx||atK);return ags;})();F.BM=(function(){var BM=false;if(document.documentMode===8||document.documentMode===9||document.documentMode===10){BM=true;}return BM;})();F.As=(function(){var aqB=navigator.userAgent;if(document.documentMode===10||F.Lw){return 'svg';}else if(document.documentMode===9){return 'svga';}else if(/Apple Computer/.test(navigator.vendor||'')&&/Mac OS X.*?Version\/9\..*?Safari/i.test(aqB)&& !F.awY){return 'svga';}else{return 'svgb';}})();F.CW=(function(){if(document.documentMode===8){document.namespaces.add('v','urn:schemas-microsoft-com:vml');document.createStyleSheet().addRule("v\\: *","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:roundrect","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:oval","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:roundrect","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:fill","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:line","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:shape","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:polyline","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:stroke","behavior:url(#default#VML); position:absolute");return true;}return false;})();F.Eo=(function(){return window.navigator.pointerEnabled||window.navigator.msPointerEnabled;})();F.FD=F.Eo||(function(){return('ontouchstart'in document.documentElement);})();F.awk=(function(){return(navigator.platform)? ! !navigator.platform.match(/iPad|iPhone|iPod/g):false;})();F.adW=function(){return F.arP.btoa((Math.random().toString(36).slice(-4))+'_'+F.tZ(new Date())+'_'+(Math.random().toString(36).slice(-6)));};F.inArray=function(cP,ck){for(var i=0,l=cP.length;i<l;i++){if(cP[i]===ck){return true;}}return false;};F.forEach=function(bp,bh,du){var pz=[].forEach,arL=Object.prototype.hasOwnProperty;if(pz&&bp.forEach===pz){bh&&bp.forEach(bh,du);}else if(bp.length=== +bp.length){for(var i=0,length=bp.length;i<length;i++){bh&&bh.call(du,bp[i],i,bp);}}else{for(var an in bp){if(arL.call(bp,an)){bh&&bh.call(du,bp[an],an,bp);}}}};F.map=function(cP,bh,du){var pz=[].map,tN=[];if(pz&&cP.map===pz){tN=cP.map(bh,du);}else{F.forEach(cP,function(el,i){tN.push(bh.call(du,el,i,cP));});}return tN;};F.filter=function(cP,bh,du){var pz=[].filter,tN=[],acu=false;if(pz&&cP.filter===pz){tN=cP.filter(bh,du);}else{F.forEach(cP,function(bx,i){acu=bh.call(du,bx,i,cP);if(acu){tN.push(bx);}});}return tN;};F.find=function(obj,cb,context){var hasProp=Object.prototype.hasOwnProperty;cb=(typeof cb==='function')?cb:function(){};if(obj.length=== +obj.length){for(var i=0,length=obj.length;i<length;i++){if(! !cb.call(context,obj[i],i,obj)){return obj[i];}}}else{for(var name in obj){if(hasProp.call(obj,name)){if(! !cb.call(context,obj[name],name,obj)){return obj[name];}}}}return undefined;};F.remove=function(cP,bh,du){var UK=[];var apR=F.filter(cP,bh,du);F.forEach(apR,function(ck){var af=F.indexOf(cP,ck);if(af=== -1){return;}UK=UK.concat(cP.splice(af,1));});return UK;};F.keys=function(bp){if(Object&&Object.keys){return Object.keys(bp);}else{var mT=[];for(var h in bp){if(bp.hasOwnProperty&&bp.hasOwnProperty(h)){mT.push(h);}}return mT;}};F.indexOf=function(cP,abc,ajA){if(Array.prototype.indexOf){return cP.indexOf(abc,ajA);}var k;if(cP==null){throw new TypeError('"cP" is null or not defined');}var O=Object(cP);var len=O.length>>>0;if(len===0){return-1;}var n= +ajA||0;if(Math.abs(n)===Infinity){n=0;}if(n>=len){return-1;}k=Math.max(n>=0?n:len-Math.abs(n),0);while(k<len){if(k in O&&O[k]===abc){return k;}k++;}return-1;};F.reduce=function(cP,bh,er,du){var pz=[].reduce;var Kj=(arguments.length===2)?undefined:er;if(pz&&typeof pz==='function'&&cP.reduce===pz&&du===undefined){if(er!==undefined){return cP.reduce(bh,er,du);}return cP.reduce(bh);}IPCC.F.forEach(cP,function(bH,aU){if(Kj===undefined){Kj=bH;return;}Kj=bh.call(du,Kj,bH,aU,cP);});return Kj;};F.reduceLeft=function(cP,bh,er,du){var tN=cP.reverse();return F.reduce.call(undefined,tN,bh,er,du);};F.contains=function(cP,bH){var cG=cP.length;while(cG--){if(cP[cG]===bH){return true;}}return false;};F.awA=function(ZV,ahy){if(ZV.length!==ahy.length){return false;}for(var i=0,l=ZV.length;i<l;i++){if(ZV[i]!==ahy[i]){return false;}}return true;};F.extend=function(target){"use strict";var source;if(!target){throw new IPCC.Web.UI.ImGearArgumentException("target","target must be defined.");}else if(typeof target!=='object'){throw new IPCC.Web.UI.ImGearArgumentException("target","typeof target must be 'object'");}else{for(var i=1;i<arguments.length;i++){source=arguments[i];for(var property in source){if(source.hasOwnProperty(property)){target[property]=source[property];}}}}return target;};F.trim=function(cT){if(String.prototype.trim){return cT.trim();}return cT.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,'');};F.getPageFromPoint=function(bv,cA,du){var avW=function(gh){return gh.left<=bv&&bv<=gh.right&&gh.top<=cA&&cA<=gh.bottom;};var awp=function(){return F.filter(du.querySelectorAll('[id*=__pViewId]:not(.pccPreviousPage):not(.pccNextPage)'),function(iK){return avW(iK.getBoundingClientRect());});};if(!du){du=document;}return awp(bv,cA)[0];};F.regEnum=function(name,flags){for(var i in this.prototype){if(this.prototype.hasOwnProperty(i)){this[i]=this.prototype[i];}}this.__typeName=name;this.__flags=flags;this.__enum=true;};F.regClass=function(typeName,baseType,interfaceTypes){this.prototype.constructor=this;this.__typeName=typeName;this.__class=true;if(baseType){this.__baseType=baseType;for(var Lq in baseType.prototype){if(baseType.prototype.hasOwnProperty(Lq)){var atL=baseType.prototype[Lq];if(!this.prototype[Lq]){this.prototype[Lq]=atL;}}}}return this;};F.agu=function(YG,abM,aea){if(abM){if(!aea){abM.apply(YG);}else{abM.apply(YG,aea);}}return YG;};F.agm=function agm(wq,anX,aga){var qL;return function(){var du=this,co=arguments;var awm=function(){qL=undefined;if(!aga){wq.apply(du,co);}};var ayY=aga&& !qL;clearTimeout(qL);qL=setTimeout(awm,anX);if(ayY){wq.apply(du,co);}};};F.abZ=function abZ(cD,sh){if(cD.classList){cD.classList.add(sh);}else{cD.className+=' '+sh;}};F.acU=function acU(cD,sh){if(cD.classList){cD.classList.remove(sh);}else{cD.className=cD.className.replace(sh,'');}};F.Sd=function(ip){return{width:ip.width||(ip.right-ip.left),height:ip.height||(ip.bottom-ip.top),top:ip.top,bottom:ip.bottom,left:ip.left,right:ip.right};};F.aiD=function(alphabet,size){var sG='';for(var h=0;h<size;h++){sG+=alphabet[Math.floor(Math.random()*1000)%alphabet.length];}return sG;};F.axR=function(){var asz='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';var avt='AQgw';return F.aiD(asz,21)+F.aiD(avt,1);};F.aew=function(){var iu={'Accusoft-Gid':F.axR(),'Accusoft-Parent-Name':'ViewerControl','Accusoft-Parent-Pid':0,'Accusoft-Parent-Taskid':0};return iu;};F.nK=function(ac){if(ac instanceof F.nK){return ac;}this.iu=F.reduce(ac.headers||{},function(oM,bH,bf){bf=bf.toLowerCase();if(oM[bf]){oM[bf]+=', '+bH;}else{oM[bf]=bH;}return oM;},{});this.status=ac.status;this.statusText=ac.statusText;this.responseText=ac.responseText;if(typeof ac.responseBody!=='undefined'){this.responseBody=ac.responseBody;}return this;};F.nK.prototype.getResponseHeader=function(EA){var ac=this.iu[EA.toLowerCase()];return ac!==undefined?ac:null;};F.me=(function(){var yE={};yE.iu={};yE.Nm=undefined;function acx(aeN){if(!aeN){return{};}return aeN.split('\r\n').reduce(function(ND,mz){var af=mz.indexOf(': ');if(af>0){var bf=mz.slice(0,af);var L=mz.slice(af+2);if(ND[bf]){L=ND[bf]+', '+L;}ND[bf]=L;}return ND;},{});};yE.eg=function(aGp){var Ah={method:'GET',url:null,headers:{},body:null,timeout:null,mimeType:null,cache:false},lb=PCCViewer.Deferred(),dC=lb.getPromise(),sP;var bB=F.extend({},Ah,aGp);bB.headers=F.extend({},yE.iu,bB.headers);if(typeof yE.Nm==='function'){sP=yE.Nm(bB);if(typeof sP==='object'&&typeof sP.then==='function'){sP.then(function(aj){lb.resolve(aj);},function(aj){lb.reject(aj);});return dC;}}if(bB.cache&&F.aaq.contains(bB.url)){var jn=F.aaq.get(bB.url);var ac,vO={};vO={status:jn.status,headers:acx(jn.getAllResponseHeaders())};try{vO.responseText=jn.responseText;}catch(e){}if(typeof jn.responseBody!=='undefined'){vO.responseBody=jn.responseBody;}ac=new F.nK(vO);if(jn.status>=200&&jn.status<300||status===304){lb.resolve(ac);}else{lb.reject({response:ac,error:new PCCViewer.Error("Error","An AJAX problem occurred: "+jn.status+" "+jn.statusText)});}return dC;}var iR,qL;try{iR=new XMLHttpRequest();}catch(e){lb.reject(new PCCViewer.Error("Error",e.message));}if(iR){iR.open(bB.method,bB.url,true);if(bB.timeout){qL=window.setTimeout(function(){iR.abort();lb.reject({error:new PCCViewer.Error("Error","Request timed out")});},bB.timeout);}iR.onreadystatechange=function(){var ac,vO={};if(iR.readyState===4){if(qL){window.clearTimeout(qL);}vO={status:iR.status,headers:acx(iR.getAllResponseHeaders())};try{vO.responseText=iR.responseText;}catch(e){}if(typeof iR.responseBody!=='undefined'){vO.responseBody=iR.responseBody;}ac=new F.nK(vO);if(iR.status>=200&&iR.status<300||status===304){lb.resolve(ac);}else{lb.reject({response:ac,error:new PCCViewer.Error("Error","An AJAX problem occurred: "+iR.status+" "+iR.statusText)});}}};var Vw=F.extend({},bB.headers,F.aew());for(var bf in Vw){if(Vw.hasOwnProperty(bf)){iR.setRequestHeader(bf,Vw[bf]);}}if(typeof bB.mimeType==='string'&&typeof iR.overrideMimeType==='function'){iR.overrideMimeType(bB.mimeType);}if(bB.cache){F.aaq.cacheReponse(bB.url,iR);}iR.send(bB.body);}return dC;};return yE;})();F.Zf=function(hc,jA,ed){var hy=[],rG=null,uD=null,bz;var awD=function(uD,rG){if(!rG){return false;}else{return Math.abs(uD.y-rG.y)<1&&Math.abs(uD.height-rG.height)<1&&uD.x+uD.width>=rG.x+rG.width;}};for(bz=jA;bz<ed+1;bz++){uD=hc.kk(bz).bm;if(awD(uD,rG)){rG.union(uD);}else{rG=uD.clone();hy.push(rG);}}return hy;};F.addEvent=function addEvent(obj,event,handler){if(obj.addEventListener){obj.addEventListener(event,handler,false);}else if(obj.attachEvent){obj.attachEvent('on'+event,handler);}};F.removeEvent=function(obj,event,handler){if(obj.removeEventListener){obj.removeEventListener(event,handler,false);}else if(obj.detachEvent){obj.detachEvent('on'+event,handler);}};F.bspline=(function(){var d3_svg_lineBasisBezier1=[0,2/3,1/3,0],d3_svg_lineBasisBezier2=[0,1/3,2/3,0],d3_svg_lineBasisBezier3=[0,1/6,2/3,1/6];function d3_svg_lineLinear(points){return points.join("L");};function d3_svg_lineDot4(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];};function d3_svg_lineBasisBezier(path,x,y){path.push("C",d3_svg_lineDot4(d3_svg_lineBasisBezier1,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier1,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,y));};function d3_svg_lineBasis(points){if(points.length<3){return d3_svg_lineLinear(points);}var i=1,n=points.length,pi=points[0],x0=pi[0],y0=pi[1],px=[x0,x0,x0,(pi=points[1])[0]],py=[y0,y0,y0,pi[1]],path=[x0,",",y0,"L",d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)];points.push(points[n-1]);while(++i<=n){pi=points[i];px.shift();px.push(pi[0]);py.shift();py.push(pi[1]);d3_svg_lineBasisBezier(path,px,py);}points.pop();path.push("L",pi);return path.join("");};return function(bo){var awy=F.map(bo,function(bx){return[bx.x,bx.y];});return d3_svg_lineBasis(awy);};})();F.aHU=function(cT){if(cT.match(/[^a-zA-Z0-9\s\,\.]/)){throw new Error('The path data attribute is not valid. It cannot be parsed.');}var auD=F.filter(cT.replace(/[Mm]/g,'|').split('|'),function(g){return! !g.length;});var awd=F.map(auD,function(el){var avP=el.replace(/[a-zA-Z]/g,'|').split('|');return F.map(avP,function(hn){var agM=hn.split(',');return{x: +agM[0],y: +agM[1]};});});return awd;};F.afJ=function(cT,iI,jB,kQ,bB){bB.cR="12px";var iq=F.uo(cT,iI,bB),vq=12*jB/(iq.width||1),wK=12*kQ/(iq.height||1),anP=Math.min(vq,wK);bB.cR=anP;return F.aeB(cT,iI,jB,kQ,bB);};F.aeB=function(cT,iI,jB,kQ,bB,Pe){Pe=Pe||1;var lX={},iq=F.uo(cT,iI,bB),cR=bB.cR;lX.width=iq.width;lX.height=iq.height;lX.fontSize=cR;if(Pe>3){return lX;}if((iq.width<jB+1)&&(iq.height<kQ+1)){return lX;}else{var vq=cR*jB/(iq.width||1),wK=cR*kQ/(iq.height||1),Af=Math.min(vq,wK);if(Af>=bB.cR){return lX;}else{bB.cR=Af;return F.aeB(cT,iI,jB,kQ,bB,Pe+1);}}};F.uo=function(cT,iI,bB){bB=bB||{};if(document.createElementNS){return F.auy(cT,iI,bB);}else{return F.adY(cT,iI,bB);}};F.auy=function(cT,iI,bB){var svg,aio=false;if(bB.fC){svg=bB.fC;}else{svg=document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttribute('style','border: 1px solid black');svg.setAttribute('width','600');svg.setAttribute('height','600');aio=true;document.body.appendChild(svg);}var cR=bB.cR||"12px";if(typeof cR==="number"){cR=cR+"px";}var bW=document.createElementNS("http://www.w3.org/2000/svg","text");F.forEach({x:0,y:0,'font-size':cR,'stroke':"none",'fill':"#000000",'font-family':iI},function(value,name){bW.setAttribute(name,value);});if(bB.uT){bW.setAttribute('style','white-space:'+bB.uT);}var mO=document.createTextNode(cT);bW.appendChild(mO);svg.appendChild(bW);var uI=bW.getBBox(),GA=uI.width,GG=uI.height;svg.removeChild(bW);if(aio){document.body.removeChild(svg);}if(GA===0&&GG===0&&cT!=="M"){return F.uo("M",iI,bB);}else{return{width:GA,height:GG};}};F.adY=function(cT,iI,bB){var mO=document.createTextNode(cT),Bm=document.createElement('div');var cR=bB.cR||"12px";if(typeof cR==="number"){cR=cR+"px";}F.forEach({position:'absolute',display:'inline-block',top:0,left:0,visibility:'hidden',fontSize:cR,fontFamily:iI},function(value,name){Bm.style[name]=value;});if(bB.uT){Bm.style.whiteSpace=bB.uT;}Bm.appendChild(mO);document.body.appendChild(Bm);var uI=Bm.getBoundingClientRect(),GA=uI.width||uI.right-uI.left,GG=uI.height||uI.bottom-uI.top;document.body.removeChild(Bm);if(GA===0&&GG===0&&cT!=="M"){return F.adY("M",iI,cR);}else{return{width:GA,height:GG};}};F.XB=function(svgPath){var regexp=/[\s,]*(M)[\s,]*([\d\.]+)[\s,]+([\d\.]+)|[\s,]*(C)[\s,]?([\d\.]+)[\s,]+([\d\.]+)[\s,]+([\d\.]+)[\s,]+([\d\.]+)[\s,]+([\d\.]+)[\s,]+([\d\.]+)|[\s,]*(L)[\s,]*([\d\.]+)[\s,]+([\d\.]+)/g;var match=regexp.exec(svgPath);var xArr=[],yArr=[];function updateBounds(x,y){xArr.push(Number(x));yArr.push(Number(y));};while(match!==null){if(match[1]){updateBounds(match[2],match[3]);}else if(match[4]){updateBounds(match[5],match[6]);updateBounds(match[7],match[8]);updateBounds(match[9],match[10]);}else if(match[11]){updateBounds(match[12],match[13]);}match=regexp.exec(svgPath);}return{width:Math.max.apply(Math,xArr),height:Math.max.apply(Math,yArr)};};F.zj={SVG:function SVG(ans){var fC=document.createElementNS("http://www.w3.org/2000/svg","svg");fC.setAttribute('viewBox',ans);return fC;},Path:function Path(vW,kJ){var fS=document.createElementNS("http://www.w3.org/2000/svg","path");fS.style.fill='none';fS.style.stroke=kJ.color||'#000000';fS.style.strokeWidth=kJ.thickness||4;if(vW){fS.setAttribute('d',vW.toString().trim());}return fS;},Rect:function Rect(aZ,dk,fF){var al=document.createElementNS("http://www.w3.org/2000/svg","rect");al.setAttribute('width',aZ||0);al.setAttribute('height',dk||0);if(fF){al.setAttribute('style',fF);}return al;}};F.Fh=function Fh(kZ){var regexIso8601=/^(\d{4}|\+\d{6})(?:-(\d{2})(?:-(\d{2})(?:T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,3}))?(?:Z|([\-+])(\d{2}):(\d{2}))?)?)?)?$/;var m=regexIso8601.exec(kZ);if(m){return Date.UTC(m[1],(m[2]||1)-1,m[3]||1,m[4]-(m[8]?m[8]+m[9]:0)||0,m[5]-(m[8]?m[8]+m[10]:0)||0,m[6]||0,((m[7]||0)+'00').substr(0,3));}else{return new Error(kZ+' cannot be parsed as an ISO 8601 date.');}};F.tZ=function aGq(ja){if(ja.toISOString&&typeof ja.toISOString==='function'){return ja.toISOString();}else{return new Error(ja+' is not a Date object.');}};F.vU=function vU(o){return(!o?false:typeof Node==="object"?o instanceof Node:o&&typeof o==="object"&&typeof o.nodeType==="number"&&typeof o.nodeName==="string");};F.KU=function KU(o){if(F.vU(o)){while(o.firstChild){o.removeChild(o.firstChild);}}};F.SS=function sync(funcs,done){var counter=funcs.length;var idx=0;var next=function(err){if(err){done(err);}else if(--counter===0){done();}else{funcs[idx++](next);}};funcs[idx++](next);};F.afI=function(bH){bH=String(bH).replace(/[^0-9a-f]/gi,"");if(bH.length<6){bH=bH[0]+bH[0]+bH[1]+bH[1]+bH[2]+bH[2];}var Zz=function(cT){return parseInt(cT,16);};var r=Zz(bH.substring(0,2));var g=Zz(bH.substring(2,4));var b=Zz(bH.substring(4,6));return{r:r,g:g,b:b};};F.aBb=function(bH){var RH="";var MO=function(n){while(n.length<2){n='0'+n;}return n;};var aaZ=function(n){return MO(n.toString(16));};RH+=aaZ(Math.floor(bH.r));RH+=aaZ(Math.floor(bH.g));RH+=aaZ(Math.floor(bH.b));return '#'+RH;};F.aql=function(awM,axN,avI){var BD=avI,XN=F.afI(awM),pj=F.afI(axN);pj.r=(1-BD)*pj.r+(XN.r*BD);pj.g=(1-BD)*pj.g+(XN.g*BD);pj.b=(1-BD)*pj.b+(XN.b*BD);pj.r=Math.floor(pj.r);pj.g=Math.floor(pj.g);pj.b=Math.floor(pj.b);return F.aBb(pj);};F.amX=function(avU,uy){var aAr=F.reduceLeft(avU,function(er,dB){if(dB.opacity===undefined){dB.opacity=127;}var aED=dB.opacity/255;return F.aql(dB.color,er,aED);},uy);return aAr;};F.acW=function(fU){if(fU.length===0){return fU;}var eR=fU.slice(0);eR.sort(function(a,b){return a.startIndex-b.startIndex;});var abD=null;var jI=[];var Xq=0,QN=[];var h=eR[0].startIndex;while(eR.length>0){Xq=0;QN=null;QN=[];var bz=0;while(bz<eR.length&&eR[bz].startIndex<=h){if(h<=eR[bz].startIndex+eR[bz].length-1){Xq++;QN.push(eR[bz]);bz++;}else{eR.splice(bz,1);}}if(Xq>0){var Du=F.amX(QN,'#ffffff');if(Du===abD){jI[jI.length-1].endIndex=h;}else{jI.push({startIndex:h,endIndex:h,color:Du});}abD=Du;h++;}else{if(eR.length>0){h=eR[0].startIndex;}abD=null;}}return jI;};F.If=function(Uo){return Uo.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");};F.ama=function(bQ){var blackListPattern=/^\s*(file|data|javascript|[a-z]):.*$/i;return blackListPattern.test(bQ);};F.MO=function(gG,cG){var cT=""+gG;while(cT.length<cG){cT='0'+cT;}return cT;};F.aHQ=function(fD){var ht=fD.getTimezoneOffset();ht=((ht<0?'+':'-')+F.MO(parseInt(Math.abs(ht/60),10),2)+F.MO(Math.abs(ht%60),2));return ht;};F.ahz=['Sun','Mon','Tue','Wed','Thurs','Fri','Sat'];F.SN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];F.acd=function(ZL){var aBQ=/^\s*\w+\s+(\w+)\s+(\d+)\s+(\d+):(\d+):(\d+)\s+GMT[+-]?\d+\s+(\d+)\s*$/i,aj=aBQ.exec(ZL),alo,GF,agV,agy,akX,vs,ake;if(!aj){return null;}else{alo=aj[1].toLowerCase();agV=aj[2];agy=aj[3];akX=aj[4];vs=aj[5];ake=aj[6];for(GF=0;GF<12;GF++){if(F.SN[GF].toLowerCase()===alo){break;}}if(GF>=12){return null;}return new Date(Date.UTC(ake,GF,agV,agy,akX,vs));}};F.afo=function(fD){return(F.ahz[fD.getUTCDay()]+" "+F.SN[fD.getUTCMonth()]+" "+fD.getUTCDate()+" "+fD.getUTCHours()+':'+fD.getUTCMinutes()+':'+fD.getUTCSeconds()+" "+"GMT+0000 "+fD.getUTCFullYear());};F.atC=function(fD){return(F.ahz[fD.getUTCDay()]+" "+F.SN[fD.getUTCMonth()]+" "+fD.getUTCDate()+" "+fD.getUTCFullYear());};F.auE=function(fD){return(fD.getUTCHours()+':'+fD.getUTCMinutes()+':'+fD.getUTCSeconds()+" "+"GMT+0000");};F.pD=function(text){return text.replace(/[&<>\"\']/g,function(char){switch(char){case "&":return "&amp;";case "<":return "&lt;";case ">":return "&gt;";case "\"":return "&quot;";case "'":return "&apos;";default:throw new Error("Did not find a replacement character.");}});};F.ya=function(text){return text.replace(/&amp;/g,'&').replace(/&gt;/g,'>').replace(/&lt;/g,'<').replace(/&quot;/g,'"').replace(/&apos;/g,'\'');};F.arP=(function(chars){chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';function InvalidCharacterError(message){this.message=message;};InvalidCharacterError.prototype=new Error;InvalidCharacterError.prototype.name='InvalidCharacterError';function btoa(input){var str=String(input);for(var block,charCode,idx=0,map=chars,output='';str.charAt(idx|0)||(map='=',idx%1);output+=map.charAt(63&block>>8-idx%1*8)){charCode=str.charCodeAt(idx+=3/4);if(charCode>0xFF){throw new InvalidCharacterError("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");}block=block<<8|charCode;}return output;};function atob(input){var str=String(input).replace(/=+$/,'');if(str.length%4==1){throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.");}for(var bc=0,bs,buffer,idx=0,output='';buffer=str.charAt(idx++);~buffer&&(bs=bc%4?bs*64+buffer:buffer,bc++ %4)?output+=String.fromCharCode(255&bs>>(-2*bc&6)):0){buffer=chars.indexOf(buffer);}return output;};return{btoa:btoa,atob:atob};})();F.od=(function(){var od=['down','enter','leave','move','out','over','up'];if(window.navigator.pointerEnabled){var aaA={};od.forEach(function(aaL){aaA[aaL]='pointer'+aaL;});return aaA;}if(window.navigator.msPointerEnabled){var akg={};for(var h=0;h<od.length;h++){var SK=od[h];var aFq='MSPointer'+SK.charAt(0).toUpperCase()+SK.slice(1);akg[SK]=aFq;}return akg;}return{};})();F.tX=(function(){return{AT: ! !navigator.userAgent.match('Edge'),aFF:document.documentMode!==undefined,aGe:document.documentMode===8,aHX:document.documentMode===9,aGx:document.documentMode===10,aFP:document.documentMode===11,atW:(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)),aBU:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)};})();F.Og=(function(pa){if(!pa|| !IPCC.F.trim(pa)){return 'regular';}return IPCC.F.trim(pa).toLowerCase();});F.aFo=function(arg,value){return typeof arg!=='undefined'?arg:value;};F.RQ=function(value){return Number(value.replace(/[a-z]+$/,''));};F.QV=function(elem,propertyName){if(elem.currentStyle){return elem.currentStyle[propertyName];}else{return window.getComputedStyle(elem,null).getPropertyValue(propertyName);}};F.aeL=function(){if(this.qu===undefined){this.qu=document.createTextNode('');}return this.qu;};F.afc=function(){if(this.dH===undefined){this.dH=document.createElement('textarea');this.qu=document.createTextNode('');this.dH.appendChild(F.qu);this.dH.style.position='absolute';this.dH.style.overflow='hidden';this.dH.style.width='80px';this.dH.style.height='80px';this.dH.style.resize='none';this.dH.style.top='-9999px';this.dH.style.left='-9999px';this.dH.style.whiteSpace='pre-wrap';this.dH.style.border=0;this.dH.style.padding='2px';document.body.appendChild(this.dH);}return this.dH;};F.XG=function(dH,Ef,aq){var aan=0.1;var Fv;if(Ef===0||Ef>aq){Ef=aq;}while(aan<=Ef){Fv=(aan+Ef)/2;dH.style.fontSize=Fv+'px';if(dH.scrollHeight<=dH.offsetHeight){aan=Fv+0.1;}else{Ef=Fv-0.1;}}var ahI=(Fv-0.5)*0.95;dH.style.fontSize=ahI+'px';return ahI;};F.MR=function(wq,nC,aal,sP){if(wq(nC,aal)!==aal){return typeof(sP)==='number'?sP:aal;}return nC;};F.Me=function(nC,aur,sP){return F.MR(Math.min,nC,aur,sP);};F.Nq=function(nC,att,sP){return F.MR(Math.max,nC,att,sP);};F.apk=(function(){var Je;return function(amF,kr,awV){if(Je!==undefined&& !awV){setTimeout(kr.bind(null,Je),0);return;}anV(amF,function(sG){Je=sG;kr(sG);});};function anV(Qa,kr){var iI='jctqxvjmncyjagibfltptfzhknc';var ig='@font-face {font-family:'+iI+';src:url(data:application/x-font-woff;charset=utf-8;base64,d09GRk9UVE8AAAQoAAkAAAAAA+QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAAC+AAAARkAAAEZ9R5YPk9TLzIAAAFEAAAAYAAAAGBKDUcOY21hcAAAAqwAAAAsAAAALAAMAFZoZWFkAAAA4AAAADYAAAA2+UdJt2hoZWEAAAEYAAAAJAAAACQIOgMbaG10eAAABBQAAAAUAAAAFAhtAW5tYXhwAAABPAAAAAYAAAAGAAVQAG5hbWUAAAGkAAABBQAAAQVCmPyecG9zdAAAAtgAAAAgAAAAIAADAAAAAQAAAAEAAM9NZw1fDzz1AAAD6AAAAADLUgMfAAAAAMtSAx8Ac//5AxwCmwAAAAgAAgAAAAAAAAABAAACm//5Ag4DHABzAAADHAABAAAAAAAAAAAAAAAAAAAABQAAUAAABQAAAAQCzwGQAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEFDQ1UAQAAfACMCm//5AkACmwAHAAAAAQAAAAAAAAAAAAAAIAAAAAAABgBOAAEAAAAAAAEAGwAAAAEAAAAAAAIABwBRAAEAAAAAAAYAGwBmAAMAAQQJAAEANgAbAAMAAQQJAAIADgBYAAMAAQQJAAYANgCBamN0cXh2am1uY3lqYWdpYmZsdHB0Znpoa25jAGoAYwB0AHEAeAB2AGoAbQBuAGMAeQBqAGEAZwBpAGIAZgBsAHQAcAB0AGYAegBoAGsAbgBjUmVndWxhcgBSAGUAZwB1AGwAYQByamN0cXh2am1uY3lqYWdpYmZsdHB0Znpoa25jAGoAYwB0AHEAeAB2AGoAbQBuAGMAeQBqAGEAZwBpAGIAZgBsAHQAcAB0AGYAegBoAGsAbgBjAAAAAAAAAQADAAEAAAAMAAQAIAAAAAQABAABAAAAI///AAAAIP///+EAAQAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEABAQAAQEBHGpjdHF4dmptbmN5amFnaWJmbHRwdGZ6aGtuYwABAQEq+Bv4HIsMHvgdAvgdA/cHhPmw+S8FiwwfkAwi95sMJPc5DCX3NA/3QREABAEBBg8qRUFkb2JlSWRlbnRpdHkwamN0cXh2am1uY3lqYWdpYmZsdHB0Znpoa25jamN0cXh2am1uY3lqYWdpYmZsdHB0Znpoa25jAAACAAEAAwMAAQAAAAAFAAUBAQIDFDNSDg7Q9xX5JxX5J4uL/Sf9J4sFDtj3LvkOFYv89fj1i4v49QWs/RUV/TaLi/k2+TaLBQ77JvcHixWL+NH4XouL/NEF/FCZFfhCi4v4tfxCiwUOAAEBAQn4HgwmkPeoEosU+WMVAAAAAAAAAAAAAAADFACBAxwAegI9AHM=)}';var fF;var oG;var agX;var acg,adE;azQ();aoC(function(sG){apx();kr(sG);});function azQ(){fF=document.createElement('style');fF.innerText=ig;Qa.appendChild(fF);oG=document.createElement('div');oG.style.cssText='position: absolute;width: 100%;top:-9999px;left: -9999px;visibility: hidden;pointer-events: none;';acg=agf(oG,'monospace');adE=agf(oG,'arial');Qa.appendChild(oG);};function apx(){clearInterval(agX);Qa.removeChild(oG);Qa.removeChild(fF);};function aoC(bh){var asT=Date.now();var qL=500;var atZ=25;agX=setInterval(function(){var ahQ=acg.offsetWidth===adE.offsetWidth;if(ahQ||Date.now()-asT>qL){bh(ahQ);}},atZ);};function agf(oG,ig){var ayO='!!';var adl=document.createElement('div');var FB=document.createElement('span');FB.style.cssText='font-size: 30px; font-weight: normal; font-style: normal; letter-spacing: 0px; white-space: nowrap;';FB.innerText=ayO;FB.style.fontFamily=iI+', '+ig;adl.appendChild(FB);oG.appendChild(adl);return FB;}}})();F.avj=function(fV,ym,nI){var tO=document.createElement('div');if(!IPCC.F.tX.aBU){fV=fV.replace(/href="#/g,'href="#'+nI);fV=fV.replace(/url\("?#(.+?)"?\)/g,'url(#'+nI+'$1)');fV=fV.replace(/ id="/g,' id="'+nI);tO.innerHTML=fV;return tO;}tO.innerHTML=fV;var auz=tO.querySelectorAll('[id]');var auM=tO.querySelectorAll("*");var ayT=ym.replace(/"/g,'\\$&');var auc=['href','xlink:href'];var aqv=['fill','filter','clip-path','mask','marker-start','marker-mid','marker-end'];IPCC.F.forEach(auz,function(bx){bx.id=nI+bx.id;});IPCC.F.forEach(auM,function(bx){IPCC.F.forEach(auc,function(oV){if(bx.hasAttribute(oV)&&bx.getAttribute(oV).indexOf('#')===0){bx.setAttribute(oV,bx.getAttribute(oV).replace('#',ym+'#'+nI));}});IPCC.F.forEach(aqv,function(oV){if(bx.hasAttribute(oV)&&bx.getAttribute(oV).match(/^url\("?#/)){bx.setAttribute(oV,bx.getAttribute(oV).replace(/^url\("?#(.+?)\"?\)$/,'url("'+ym+'#'+nI+'$1")'));}});if(bx.hasAttribute('style')){var CY=bx.style.cssText;CY=CY.replace(/url\("?#(.+?)"?\)/g,'url("'+ayT+'#'+nI+'$1")');bx.style.cssText=CY;}});return tO;};module.exports=F;},{}],29:[function(require,module,exports){var At=require('./Type');At.registerNamespace('IPCC');module.exports={Pagecounter:1,gB:true,aiq:null,initializePageViewPlugin:require('./initializePageViewPlugin'),initializePageListPlugin:require('./initializePageListPlugin'),qe:require('./predefinedContextMenu'),ZS:require('./indexOf'),KR:require('./setProperties'),bG:require('./PageItem'),vH:require('./GetUniqueID'),WZ:require('./ViewerState'),tM:require('./Configuration'),aP:require('./Cursor'),kK:require('./Res'),bO:require('./Validate'),jx:require('./Debug'),dV:require('./MenuCommand'),PageLayout:require('./PageLayout'),ViewMode:require('./ViewMode'),FitType:require('./FitType'),ScaleTrigger:require('./ScaleTrigger'),PageEventArgs:require('./PageEventArgs'),ExceptionEventArgs:require('./ExceptionEventArgs'),OpenPageEventArgs:require('./OpenPageEventArgs'),PageList:require('./PageList'),Web:require('./Web/Web'),Type:At,F:require('./IPCC.Util'),ce:require('./Art'),ky:require('./SelectTextController'),fN:require('./Matrix'),WT:require('./ViewerModel'),fJ:require('./ContextMenuController'),dU:require('./SvgUIDirector'),pE:require('./PropertyChangedEventArgs'),yb:require('./StringBuilder'),dF:require('./MultiTouchController'),rF:require('./ImagePyramid'),dK:require('./SingleTouchController'),ln:require('./AddPolyMarkController'),nA:require('./SelectController'),dX:require('./AddRectangularMarkController'),lj:require('./AddFreehandMarkController'),lN:require('./AddLineMarkController'),dc:require('./MouseWheelController'),oO:require('./HandPanController'),mj:require('./RectangleZoomController'),oP:require('./MagnifierController'),lY:require('./EditMarksController'),xF:require('./RunMarksController'),DB:require('./Space'),gI:require('./Image'),Qj:require('./ImagePool'),By:require('./PyramidLevel'),xE:require('./PyramidTile'),};},{"./AddFreehandMarkController":12,"./AddLineMarkController":13,"./AddPolyMarkController":14,"./AddRectangularMarkController":15,"./Art":16,"./Configuration":19,"./ContextMenuController":20,"./Cursor":21,"./Debug":22,"./EditMarksController":23,"./ExceptionEventArgs":24,"./FitType":25,"./GetUniqueID":26,"./HandPanController":27,"./IPCC.Util":28,"./Image":30,"./ImagePool":31,"./ImagePyramid":32,"./MagnifierController":33,"./Matrix":34,"./MenuCommand":35,"./MouseWheelController":36,"./MultiTouchController":37,"./OpenPageEventArgs":38,"./PageEventArgs":39,"./PageItem":40,"./PageLayout":41,"./PageList":42,"./PropertyChangedEventArgs":43,"./PyramidLevel":44,"./PyramidTile":45,"./RectangleZoomController":46,"./Res":47,"./RunMarksController":48,"./ScaleTrigger":49,"./SelectController":50,"./SelectTextController":51,"./SingleTouchController":52,"./Space":53,"./StringBuilder":54,"./SvgUIDirector":55,"./Type":56,"./Validate":57,"./ViewMode":58,"./ViewerModel":59,"./ViewerState":60,"./Web/Web":124,"./indexOf":125,"./initializePageListPlugin":126,"./initializePageViewPlugin":127,"./predefinedContextMenu":128,"./setProperties":129}],30:[function(require,module,exports){var gI=function(lA,ae,aZ,dk,hf,gn){IPCC.DB.call(this,0,0,0,0);this.width=aZ;this.height=dk;this.hf=hf;this.gn=gn;this.ae=ae||0;this.fG=0;this.qZ=true;this.art={};this.zA=false;var J=this;this.ae=ae;this.get_url=function(hs,ff,ah){ff=ff||'Image';ah=ah||'';var Bs=gI.Fx(lA);var Bq=false;if(/^[\x00-\x7F]*$/.test(Bs)){Bq=true;}if(ah===null||ah===''){if(ff==='Attributes'){var us='';if(!IPCC.tM.JX()){us='&ContentType=png';}if(!Bq){return hs+'/Page/q/'+ae.toString()+'/'+ff+'?DocumentID=e'+lA+us;}else{return hs+'/Page/q/'+ae.toString()+'/'+ff+'?DocumentID=u'+encodeURIComponent(Bs)+us;}}else{if(ff==='SvgImage'){if(!Bq){return hs+'/Page/q/'+ae.toString()+'?DocumentID=e'+lA+'&'+ah;}else{return hs+'/Page/q/'+ae.toString()+'?DocumentID=u'+encodeURIComponent(Bs)+'&'+ah;}}if(!Bq){return hs+'/Page/q/'+ae.toString()+'/'+ff+'?DocumentID=e'+lA+'&'+ah;}else{return hs+'/Page/q/'+ae.toString()+'/'+ff+'?DocumentID=u'+encodeURIComponent(Bs)+'&'+ah;}}}else{if(ff==='SvgImage'){if(!Bq){return hs+'/Page/q/'+ae.toString()+'?DocumentID=e'+lA+'&'+ah;}else{return hs+'/Page/q/'+ae.toString()+'?DocumentID=u'+encodeURIComponent(Bs)+'&'+ah;}}if(!Bq){return hs+'/Page/q/'+ae.toString()+'/'+ff+'?DocumentID=e'+lA+'&'+ah;}else{return hs+'/Page/q/'+ae.toString()+'/'+ff+'?DocumentID=u'+encodeURIComponent(Bs)+'&'+ah;}}};this.get_urlArt=function(hs,ff,ah){ff=ff||'Art';ah=ah||'';if(ah===null||ah===''){if(ff==='Art'){return hs+'/Page/q/'+ae.toString()+'/'+ff+'?DocumentID=e'+lA;}}else{return hs+'/Page/q/'+ae.toString()+'/'+ff+'?DocumentID=e'+lA+'&'+ah;}};this.get_identifier=function(){return IPCC.gI.Fx(lA);};this.get_encodedIdentifier=function(){return lA;};this.toString=function(){return 'Image("'+lA+'", '+this.ae+', '+this.width+' x '+this.height+', '+this.hf+', '+this.gn+')';};function ahg(aqe,K){if(K.UE()){J.qZ=true;J.zA=false;return;}var WY=aqe.split(',');var mH=false;for(var aC=0;aC<WY.length;aC++){if(WY[aC]==="SVG"||WY[aC]==="svg"){if(IPCC.tM.JX()){J.zA=true;J.qZ=false;}else{J.zA=false;}mH=true;break;}}if(!mH){J.zA=false;J.qZ=true;}if(K){if(K.PE){K.PE(J.zA);}}};this.SQ=function(hs,K,Au){K.ae=this.ae;var mJ=0;var mX=K.zz();if(mX){if(document.documentMode<9){mX=false;}}var rv=true;if(K.jS()===0){rv=false;}var oi=function(fz,ac){try{if(fz===null){throw new IPCC.Web.UI.ImGearArgumentException(null,'Unable to load the specified image. Failed to obtain Image attributes. Returned JSON from the server is null');}if(fz.errorCode){if(fz.errorCode==='SvgNotAvailable'){mX=false;J.width= +(fz.pageAttributes.imageWidth);J.height= +(fz.pageAttributes.imageHeight);J.hf= +(fz.pageAttributes.imageXResolution);if(J.hf<=0){J.hf=72;}J.gn= +(fz.pageAttributes.imageYResolution);if(J.gn<=0){J.gn=72;}J.fG= +(fz.pageAttributes.pageCount);J.qZ=fz.pageAttributes.isRaster!=='false';ahg(fz.pageAttributes.contentType,K);}}else{J.width= +(fz.imageWidth);J.height= +(fz.imageHeight);J.hf= +(fz.imageXResolution);if(J.hf<=0){J.hf=72;}J.gn= +(fz.imageYResolution);if(J.gn<=0){J.gn=72;}J.fG= +(fz.pageCount);J.qZ=fz.isRaster!=='false';ahg(fz.contentType,K);}var oz=ac.getResponseHeader("Accusoft-Data-Encrypted");var Ft=false;if(oz==="true"){Ft=true;}K.aeF(Ft);if(Au){Au();}}catch(e){K.ag('openPage',e);if(typeof(K.ay)==='function'){var dw=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dw.exception=e;dw.pageNumber=K.ae;K.ay('pageOpenFailed',dw);}}};function Nz(){mX=false;if(mJ<1){var gD={method:'GET',url:J.get_url(hs,'Attributes'),headers:{'Content-Type':'application/json'}};if(rv===true){gD.timeout=K.jS();}IPCC.F.me.eg(gD).then(fl,eG);mJ++;}};var aAd=function(fV,ac){var aZ;var dk;function aqg(){var Us;try{Us=JSON.parse(fV);}catch(bU){Us=undefined;mX=true;}return Us;};try{aZ=fV.match(/width=\"([0-9.]+)\"/);dk=fV.match(/height=\"([0-9.]+)\"/);if(aZ&&dk){aZ=Number(aZ[1]);dk=Number(dk[1]);}else{throw "error";}if(isNaN(aZ)||isNaN(dk)){throw "error";}J.width=aZ;J.height=dk;J.hf=72;J.gn=72;J.zA=true;J.qZ=false;if(K){if(typeof(K.PE==='function')){K.PE(J.zA);}}if(Au){Au();}}catch(e){var aj=aqg();if(aj){oi(aj,ac);return;}if(mX){if(mJ<1){mX=false;setTimeout(Nz,10);return;}}K.ag('openPage',e);if(typeof(K.ay)==='function'){var dw=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dw.exception=e;dw.pageNumber=K.ae;K.ay('pageOpenFailed',dw);}}};function fl(ac){var aj=null,cF;try{if(!mX){aj=JSON.parse(ac.responseText);oi(aj,ac);}else{var mE;var oz=ac.getResponseHeader("Accusoft-Data-Encrypted");if(oz==='true'&&K.iP()===true){var vf=IPCC.Web.hG.rc.uG(ac.getResponseHeader("Accusoft-Data-SK"));var bf=IPCC.Web.JN(vf,ii);var fm=IPCC.Web.Kw(ac);var tY=IPCC.Web.DP(fm,bf,ii);mE=IPCC.Web.hG.Hw.mb(tY);}else{mE=ac.responseText;}var RY;if(mE.length>=1000){RY=mE.substring(0,1000);}else{RY=mE.substring(0,mE.length);}aAd(RY,ac);}}catch(ex){if(mX){mX=false;if(mJ<1){setTimeout(Nz,10);return;}}cF="Attributes parsing error, Error message = "+ex.message;throw new IPCC.Web.UI.ImGearArgumentException(null,cF);}};function eG(aj){try{var cF,lK,mh;if(!aj.response){throw new IPCC.Web.UI.ImGearHttpException(aj.response.status,"Client timed out on load");}if(aj.response.status===403){mJ++;if(aj.response.statusText&&aj.response.statusText!==""){cF="Expired viewer session ID, error message from the server: "+aj.response.statusText;}else{cF="Expired viewer session ID. Np error text message was received from the server:";}throw new IPCC.Web.UI.ImGearHttpException(aj.response.status,cF);}if(mX){mX=false;if(mJ<1){setTimeout(Nz,10);return;}}mh=aj.response.getResponseHeader('Accusoft-Status-Message');if(mh){var qQ;lK=aj.response.getResponseHeader('Accusoft-Status-Number');if(IPCC.Web.yB(lK)){qQ=parseInt(lK,10);}throw new IPCC.Web.UI.ImGearHttpException(aj.response.status,mh,qQ);}else{if(aj.response.statusText&&aj.response.statusText!==""){cF="Error message from the service: "+aj.response.statusText;}else{cF="HTTP Error was received from the image server but the server did not provide any error description.";}throw new IPCC.Web.UI.ImGearHttpException(aj.response.status,cF);}}catch(e){if(mX){mX=false;if(mJ<1){setTimeout(Nz,10);return;}}K.ag('openPage',e);if(typeof(K.ay)==='function'){var dw=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dw.exception=e;dw.pageNumber=K.ae;K.ay('pageOpenFailed',dw);}}};var ii=IPCC.Web.JR.aep(4,IPCC.Web.Nc());var nR=IPCC.Web.hG.HF.mb(ii);var gD={method:'GET',cache:true};if(!mX){gD.url=this.get_url(hs,'Attributes');gD.headers={'Content-Type':'application/json'};}else{var bQ;if(K.iP()===true){ii=IPCC.Web.JR.VZ(4,IPCC.Web.Nc());nR=IPCC.Web.hG.HF.mb(ii);bQ=this.get_url(hs,'SvgImage','Scale=1&ContentType='+IPCC.F.As+'&iv='+nR);}else{bQ=this.get_url(hs,'SvgImage','Scale=1&ContentType='+IPCC.F.As);}gD.url=bQ;}IPCC.F.me.eg(gD).then(fl,eG);};this.aCY=function(hs,K,Au){K.ae=this.ae;var mJ=0;var rv=true;if(K.jS()===0){rv=false;}var oi=function(fz,ac){try{if(fz===null){throw new IPCC.Web.UI.ImGearArgumentException(null,'Unable to load the specified image. Failed to obtain Image attributes. Returned JSON from the server is null');}J.width= +(fz.imageWidth);J.height= +(fz.imageHeight);J.hf= +(fz.imageXResolution);if(J.hf<=0){J.hf=72;}J.gn= +(fz.imageYResolution);if(J.gn<=0){J.gn=72;}J.fG= +(fz.pageCount);J.qZ=true;var oz=ac.getResponseHeader("Accusoft-Data-Encrypted");var Ft=false;if(oz==="true"){Ft=true;}K.aeF(Ft);if(Au){Au();}}catch(e){K.ag('openPage',e);if(typeof(K.ay)==='function'){var dw=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dw.exception=e;dw.pageNumber=K.ae;K.ay('pageOpenFailed',dw);}}};function fl(ac){try{var hJ=ac.status,aj,cF;if(hJ===200){aj=null;try{aj=JSON.parse(ac.responseText);oi(aj,ac);}catch(ex){cF="Attributes parsing error, Error meesage = "+ex.message;throw new IPCC.Web.UI.ImGearArgumentException(null,cF);}}}catch(e){K.ag('openPageForRaster',e);if(typeof(K.ay)==='function'){var dw=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dw.exception=e;dw.pageNumber=K.ae;K.ay('pageOpenFailed',dw);}}};function eG(aj){try{var hJ=aj.response.status,cF,mh,lK;if(!aj.response){throw new IPCC.Web.UI.ImGearHttpException(hJ,"Client timed out on load");}if(hJ===403){mJ++;if(aj.response.statusText&&aj.response.statusText!==""){cF="Expired viewer session ID, error message from the server: "+aj.response.statusText;}else{cF="Expired viewer session ID. No error text message was received from the server:";}throw new IPCC.Web.UI.ImGearHttpException(hJ,cF);}mh=aj.response.getResponseHeader('Accusoft-Status-Message');if(mh){var qQ;lK=aj.response.getResponseHeader('Accusoft-Status-Number');if(IPCC.Web.yB(lK)){qQ=parseInt(lK,10);}throw new IPCC.Web.UI.ImGearHttpException(hJ,mh,qQ);}else{if(aj.response.statusText&&aj.response.statusText!==""){cF="Error message from the service: "+aj.response.statusText;}else{cF="HTTP Error was received from the image server but the server did not provide any error description.";}throw new IPCC.Web.UI.ImGearHttpException(hJ,cF);}}catch(e){K.ag('openPageForRaster',e);if(typeof(K.ay)==='function'){var dw=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dw.exception=e;dw.pageNumber=K.ae;K.ay('pageOpenFailed',dw);}}};var aeV={method:'GET',url:this.get_url(hs,'Attributes'),headers:{'Content-Type':'application/json'}};if(rv===true){aeV.timeout=K.jS();}IPCC.F.me.eg(aeV).then(fl,eG);};return this;};gI.prototype.clone=function(){var Ts=new gI(this.get_encodedIdentifier(),this.ae,this.width,this.height,this.hf,this.gn);Ts.fG=this.fG;Ts.qZ=this.qZ;return Ts;};gI.prototype.equals=function(L){if(this.get_encodedIdentifier()!==L.get_encodedIdentifier()){return false;}if(this.ae!==L.ae){return false;}return true;};gI.prototype.rq=8;gI.prototype.rA=0.000001;gI.ale=function(ah){var GJ=ah.referenceDocumentIdentifier;var acn=gI.sV(GJ);var ha=ah.encodedDocumentIdentifier;var jd=ah.documentIdentifier;var eY;if(ha===''){ha=undefined;}if(jd===''){jd=undefined;}if(GJ&&GJ!==''){if(ha===acn){ha=undefined;}if(jd===GJ){jd=undefined;}}if(jd){eY=IPCC.gI.sV(jd);if(ha){if(ha!==eY){throw new IPCC.Web.UI.ImGearArgumentException('documentIdentifier','When both are specified, documentIdentifier and encodedDocumentIdentifier must reference the same document (and encodedDocumentIdentifier must be base64-encoded).');}}else{ha=eY;}}else{if(ha){jd=IPCC.gI.Fx(ha);}}if(!ha){jd=GJ;ha=acn;}var ak=ah.pageNumber;var adh=ah.referencePageNumber;if(ak===adh){ak=undefined;}if(ak!==0&& !ak){ak=adh;}ah.encodedDocumentIdentifier=ha;ah.documentIdentifier=jd;ah.pageNumber=ak;};gI.sV=function(iH){if(!iH||iH===''){return '';}var lP=[];var h;for(h=0;h<iH.length;h++){lP.push(iH.charCodeAt(h)%256);lP.push(Math.floor(iH.charCodeAt(h)/256));}lP.push(0);lP.push(0);var Pr='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_';var nS=[],sM;for(h=0;h<lP.length-1;h+=3){sM=lP[h]*0x10000+lP[h+1]*0x100+lP[h+2];nS.push(Pr.charAt(Math.floor(sM/0x40000)));nS.push(Pr.charAt(Math.floor(sM/0x1000)%0x40));nS.push(Pr.charAt(Math.floor(sM/0x40)%0x40));nS.push(Pr.charAt(sM%0x40));}var Yq=Math.ceil(iH.length*16/6);while(nS.length>Yq){nS.pop();}if((nS.length%4)===3){nS.push('1');}else if((nS.length%4)===2){nS.push('2');}else if((nS.length%4)===0){nS.push('0');}return nS.join('');};gI.Fx=function(lA){if(!lA||lA===''){return '';}var ahR=lA.length-1;var KC=[],sM;var ro,lP=[],oT=[];var h;for(h=0;h<ahR;h++){ro=lA.charCodeAt(h);if(ro>64&&ro<91){oT.push(ro-65);}else if(ro>96&&ro<123){oT.push(ro-97+26);}else if(ro>47&&ro<58){oT.push(ro-48+52);}else if(ro===45){oT.push(62);}else if(ro===95){oT.push(63);}else{return '';}}oT.push(0);oT.push(0);oT.push(0);for(h=0;h<oT.length-3;h+=4){sM=oT[h]*0x40000+oT[h+1]*0x1000+oT[h+2]*0x40+oT[h+3];lP.push(Math.floor(sM/0x10000));lP.push(Math.floor(sM/0x100)%256);lP.push(sM%256);}for(h=0;h<lP.length-1;h+=2){KC.push(String.fromCharCode(lP[h]+lP[h+1]*0x100));}var Yq=Math.floor(ahR*6/16);while(KC.length>Yq){KC.pop();}return KC.join('');};module.exports=gI;},{}],31:[function(require,module,exports){var Qj=function(){this.ca=[];this.parentElementID='';this.lockTile=function(eN){var ck,h,aaE,Zo;if(this.UO(eN)){return;}aaE=0;for(h=this.ca.length-1;h>=0;h--){if(!(this.ca[h].locked)){aaE++;Zo=h;}}if(aaE>4){ck=this.ca[Zo];this.uiDirector.ahU(ck);this.ca.splice(Zo,1);}ck=new asg();ck.pool=this;this.uiDirector.arA(ck);this.ca.push(ck);ck.locked=true;ck.tile=eN;eN.poolItem=ck;return;};this.UO=function(eN){var ck,h;if(this.locked){return true;}for(h=0;h<this.ca.length;h++){if(this.ca[h].tile===eN){ck=this.ca[h];ck.locked=true;eN.poolItem=ck;return true;}}return false;};this.aim=function(eN){var ix,h;ix=eN.poolItem;if(ix!==undefined&&ix.locked){this.uiDirector.asd(ix);ix.locked=false;eN.poolItem=undefined;for(h=0;h<this.ca.length;h++){if(this.ca[h]===ix){this.ca.splice(h,1);this.ca.push(ix);return;}}}};return this;};Qj.prototype.awx=function(){var h;for(h=0;h<this.ca.length;h++){if(!this.ca[h].locked){this.uiDirector.ahU(this.ca[h]);}}};var asg=function(){this.locked=false;this.loaded=false;this.tile=undefined;this.pool=undefined;this.elementID='';return this;};module.exports=Qj;},{}],32:[function(require,module,exports){var rF=function(){this.eH=[];return this;};rF.prototype.aBK=function(de,dQ){var dG=de.pM();var h,mF,oE;var cZ=1;var adr;var yr=[];var tS=[];var yH=[];var Di,Mt;oE=this.eH.length;for(h=0;h<this.eH.length;h++){if(this.eH[h].dG>dG){oE=h;break;}}mF=oE-1;if(mF<0){mF=0;}if(oE>=this.eH.length){oE=this.eH.length-1;}if(mF!==oE){adr=(dG-this.eH[mF].dG)/(this.eH[oE].dG-this.eH[mF].dG);cZ=adr*1.0;if(cZ>=0.15){cZ=1;mF=oE;}if(cZ<=0.15){cZ=1;oE=mF;}}tS=this.eH[mF].ME(dQ);yH=this.eH[oE].ME(dQ);var RZ=function(pb){var h;for(h=0;h<pb.length;h++){pb[h].level.pool.UO(pb[h]);}};var Uk=function(pb){var ajG=[];var h;for(h=0;h<pb.length;h++){if(!pb[h].get_isLockedAndLoaded()){ajG.push(pb[h]);}}return ajG;};var adS=function(pb){var alH=[];var h;for(h=0;h<pb.length;h++){if(pb[h].get_isLockedAndLoaded()){alH.push(pb[h]);}}return alH;};if(mF>0&&mF===oE&&this.eH[oE].tiles.length>1){mF=oE-1;tS=this.eH[mF].ME(dQ);}RZ(tS);yr=Uk(tS);if(yr.length>0){for(Di=mF-1;Di>=0;Di--){Mt=this.eH[Di].ME(dQ);RZ(Mt);if(Uk(Mt).length<1){break;}}if(Di<0){tS=adS(tS);}else{mF=Di;tS=Mt;cZ=1;}}else{RZ(yH);yr=Uk(yH);}RZ(yH);yH=adS(yH);if(yr.length>3){yr.splice(3,yr.length-3);}function aom(){var aj;function Xg(DS){var aj='',h,bM;if(DS.length<1){return '';}bM=DS[0].level;aj+='level '+bM.id.toString()+' - ';for(h=0;h<DS.length;h++){if(h>0){aj+=', ';}aj+='('+(DS[h].x/bM.na).toString()+','+(DS[h].y/bM.AY).toString()+')';if(DS[h].get_isLockedAndLoaded()){aj+='*';}}return aj;};aj='tilesToRequest: '+Xg(yr)+'<br/>';aj+='opaqueTiles: '+Xg(tS)+'<br/>';aj+='translucentTiles: '+Xg(yH)+'<br/>';aj+='opacity: '+cZ.toString()+'<br/>';aj+='asP: '+dG.toString()+'<br/>';aj+='de: '+de.toString()+'<br/>';return aj;};return{opaqueTiles:tS,translucentTiles:yH,opacity:cZ,tilesToRequest:yr,toString:aom,asP:dG,de:de.toString()};};rF.prototype.atP=function(qY){var Ek=[];var rw=[];var h,j;var bM,tile;for(h=0;h<this.eH.length;h++){bM=this.eH[h];for(j=0;j<bM.tiles.length;j++){tile=bM.tiles[j];if(tile.poolItem!==undefined){Ek.push(tile);}}}var amq=function(Te,akW){var h,j,ZC,ZU;for(h=0;h<akW.length;h++){ZC=akW[h];ZU=true;for(j=0;j<Te.length;j++){if(ZC===Te[j]){ZU=false;break;}}if(ZU){Te.push(ZC);}}};rw=qY.tilesToRequest.concat();amq(rw,qY.opaqueTiles);amq(rw,qY.translucentTiles);for(h=Ek.length-1;h>=0;h--){var ayX=Ek[h];for(j=0;j<rw.length;j++){if(rw[j]===ayX){Ek.splice(h,1);break;}}}for(h=0;h<Ek.length;h++){Ek[h].unlock();}for(h=0;h<rw.length;h++){rw[h].relock();}for(h=0;h<rw.length;h++){if(rw[h].poolItem===undefined){rw[h].lock();}}};rF.prototype.unlockAllItems=function(){var h,j,bM;for(h=0;h<this.eH.length;h++){bM=this.eH[h];for(j=0;j<bM.tiles.length;j++){if(bM.tiles[j].poolItem!==undefined){bM.pool.aim(bM.tiles[j]);}}}};rF.prototype.aFT=function(){var h;for(h=0;h<this.eH.length;h++){this.eH[h].pool.awx();}};rF.prototype.toString=function(){var aj='',h,j,bM;for(h=0;h<this.eH.length;h++){bM=this.eH[h];aj+='Level '+h.toString()+':   scaleFactor='+bM.dG.toString()+'  image='+bM.width.toString()+'x'+bM.height.toString()+'  tile='+bM.na.toString()+'x'+bM.AY.toString()+'\n';for(j=0;j<bM.tiles.length;j++){if(j>0){aj+=', ';}aj+='('+bM.tiles[j].x.toString()+', '+bM.tiles[j].y.toString()+')';}aj+='\n';}return aj;};rF.prototype.expandTile=function(eN,QI,Rk,akP,alc,bM){eN.x=IPCC.F.Me(QI-eN.vA,0,QI,QI-eN.vA);eN.y=IPCC.F.Me(Rk-eN.wa,0,Rk,Rk-eN.wa);eN.aZ=IPCC.F.Nq(akP+(2*eN.vA),bM.width,akP);eN.dk=IPCC.F.Nq(alc+(2*eN.wa),bM.height,alc);if(eN.x+eN.aZ>bM.width){eN.x=eN.x-eN.vA;eN.aZ=bM.width-eN.x;eN.vA=0;}if(eN.y+eN.dk>bM.height){eN.y=eN.y-eN.wa;eN.wa=0;eN.dk=bM.height-eN.y;}return eN;};rF.prototype.createPyramid=function(ly,K){var atM=6000000;var akN=5000;var na=1024;var aut=na*na*3*150;var aeO=0.5;var aui=2;var av=K.dj();var zY=av.width*av.height*3;var yS;var bM;var dG;var h;var bv,cA;var tile;var Ey,De;this.eH=[];if(av.qZ){dG=1.0;yS=zY*dG*dG;while(this.eH.length<aui||yS>akN){bM=new IPCC.By();bM.dG=dG;this.eH.unshift(bM);dG*=aeO;yS=zY*dG*dG;}}else{if(K.qg()===true){zY=av.width*av.height;}dG=Math.sqrt(akN/zY);var aBH=dG*av.hf;dG=Math.ceil(aBH)/av.hf;yS=zY*dG*dG;if(K.qg()===false){while(yS<aut){bM=new IPCC.By();bM.dG=dG;this.eH.push(bM);dG/=aeO;yS=zY*dG*dG;}}else{bM=new IPCC.By();bM.dG=1;this.eH.push(bM);}}av.rq=this.eH[this.eH.length-1].dG*8;for(h=0;h<this.eH.length;h++){bM=this.eH[h];bM.NL=85;if(h===this.eH.length-1){bM.NL=100;}bM.pyramid=this;bM.id=h;bM.pool=new IPCC.Qj();bM.pool.uiDirector=ly;yS=zY*bM.dG*bM.dG;bM.width=Math.round(av.width*bM.dG);bM.height=Math.round(av.height*bM.dG);bM.na=bM.width;bM.AY=bM.height;if(h>2&&h>this.eH.length-2){bM.na=Math.min(na/2,bM.width);bM.AY=Math.min(na/2,bM.height);}if(yS>atM){bM.na=Math.min(na,bM.width);bM.AY=Math.min(na,bM.height);}bM.tiles=[];Ey=bM.na;for(bv=0;bv<bM.width;bv+=Ey){Ey=bM.na;if(bv+Ey*1.25>bM.width){Ey=bM.width-bv;}De=bM.AY;for(cA=0;cA<bM.height;cA+=De){De=bM.AY;if(cA+De*1.25>bM.height){De=bM.height-cA;}tile=new IPCC.xE();tile.level=bM;if(K.qg()===false){var KT='jpeg';if(bM.NL>=100){KT='png';}tile.contentType=KT;tile.wa=2;tile.vA=2;tile=this.expandTile(tile,bv,cA,Ey,De,bM);if(tile.aZ!==bM.width||tile.dk!==bM.height){tile.url=K.Uz('Tile/'+tile.x.toString()+'/'+tile.y.toString()+'/'+tile.aZ.toString()+'/'+tile.dk.toString(),'Scale='+bM.dG.toString()+'&Quality='+bM.NL+'&ContentType='+KT);}else{tile.url=K.Uz('','Scale='+bM.dG.toString()+'&Quality='+bM.NL+'&ContentType='+KT);}}else{tile.url=K.Uz('','Scale='+bM.dG.toString()+'&ContentType='+IPCC.F.As);tile.aFg=ly.akf();}tile.right=tile.x+tile.aZ;tile.bottom=tile.y+tile.dk;bM.tiles.push(tile);}}}};module.exports=rF;},{}],33:[function(require,module,exports){var oP=function(){this.aX=false;this.K=false;};oP.prototype.mG=function(K){this.K=K;};oP.prototype.ed=function(){this.K=false;};oP.prototype.aB=function(){if(this.aX){this.K.bC().hideMagnifier();this.aX=false;}};oP.prototype.qE=function(){this.aB();};oP.prototype.jR=function(V){this.aB();if(V.domEvent.button===0){this.aX=true;this.K.bC().showMagnifier(V.windowPoint);this.K.dN();}};oP.prototype.jQ=function(V){if(V.domEvent.button!==0){this.aB();}if(this.aX){this.K.bC().showMagnifier(V.windowPoint);this.K.dN();}};oP.prototype.jX=function(){this.aB();this.K.dN();};oP.prototype.po=function(V){var bd=this.K.ee();if(V.windowPoint.x<=0||V.windowPoint.x>=bd.width-2){this.aB();}if(V.windowPoint.y<=0||V.windowPoint.y>=bd.height-2){this.aB();}};module.exports=oP;},{}],34:[function(require,module,exports){var fN=function(hz,ih,ji,hF,eT,ef){if(arguments.length===0){hz=hF=1;ih=ji=eT=ef=0;}this.aiV=function(){return hz*hF-ih*ji;};this.aFC=function(){return hz===1&&ih===0&&ji===0&&hF===1&&eT===0&&ef===0;};this.rh=function(){return hz;};this.qH=function(){return ih;};this.pY=function(){return ji;};this.sm=function(){return hF;};this.wE=function(){return eT;};this.we=function(){return ef;};this.append=function(de){var Ge=hz*de.rh()+ih*de.pY();var FI=hz*de.qH()+ih*de.sm();var EP=ji*de.rh()+hF*de.pY();var ES=ji*de.qH()+hF*de.sm();var HS=eT*de.rh()+ef*de.pY()+de.wE();var GT=eT*de.qH()+ef*de.sm()+de.we();hz=Ge;ih=FI;ji=EP;hF=ES;eT=HS;ef=GT;};this.equals=function(L){if(hz!==L.rh()){return false;}if(ih!==L.qH()){return false;}if(ji!==L.pY()){return false;}if(hF!==L.sm()){return false;}if(eT!==L.wE()){return false;}if(ef!==L.we()){return false;}return true;};this.ye=function(){if(!this.aiB()){throw new IPCC.Web.UI.ImGearArgumentException(null,'Matrix has no inverse');}var DJ=this.aiV();var Ge=hF/DJ;var FI= -ih/DJ;var EP= -ji/DJ;var ES=hz/DJ;var HS=(ji*ef-hF*eT)/DJ;var GT=(ih*eT-hz*ef)/DJ;hz=Ge;ih=FI;ji=EP;hF=ES;eT=HS;ef=GT;};this.Jn=function(de){var Ge=de.rh()*hz+de.qH()*ji;var FI=de.rh()*ih+de.qH()*hF;var EP=de.pY()*hz+de.sm()*ji;var ES=de.pY()*ih+de.sm()*hF;var HS=de.wE()*hz+de.we()*ji+eT;var GT=de.wE()*ih+de.we()*hF+ef;hz=Ge;ih=FI;ji=EP;hF=ES;eT=HS;ef=GT;};this.vk=function(jw,qo,nh,nu){eT-=nh;ef-=nu;this.scale(jw,qo);eT+=nh;ef+=nu;};this.aqb=function(){hz=hF=1;ih=ji=eT=ef=0;};this.transform=function(bL){var bv=bL.x*hz+bL.y*ji+eT;var cA=bL.y*hF+bL.x*ih+ef;return new IPCC.Web.UI.Point(bv,cA);};this.ng=function(Sr,UF){eT+=Sr;ef+=UF;};this.aFz=function(L){if(Math.abs(hz-L.rh())>1e-8){return false;}if(Math.abs(ih-L.qH())>1e-8){return false;}if(Math.abs(ji-L.pY())>1e-8){return false;}if(Math.abs(hF-L.sm())>1e-8){return false;}if(Math.abs(eT-L.wE())>1e-8){return false;}if(Math.abs(ef-L.we())>1e-8){return false;}return true;};this.toString=function(){return '{'+hz.toFixed(6)+', '+ih.toFixed(6)+', '+ji.toFixed(6)+', '+hF.toFixed(6)+', '+eT.toFixed(3)+', '+ef.toFixed(3)+'}';};this.parse=function(){};this.clone=function(){return new IPCC.fN(hz,ih,ji,hF,eT,ef);};this.PQ=function(gf){hz=gf.rh();ih=gf.qH();ji=gf.pY();hF=gf.sm();eT=gf.wE();ef=gf.we();};this.aoN=function(ai,bd){hz=1;hF=bd.gn*ai.hf/(ai.gn*bd.hf);ih=ji=eT=ef=0;};this.Wg=function(aT,ai,bd){switch(aT){case IPCC.Web.UI.FitType.FullImage:this.aqx(ai,bd);break;case IPCC.Web.UI.FitType.FullWidth:this.aiu(ai,bd);break;case IPCC.Web.UI.FitType.FullHeight:this.ail(ai,bd);break;case IPCC.Web.UI.FitType.ActualSize:this.aje(ai,bd);break;case IPCC.Web.UI.FitType.OneToOne:if(!(ai.qZ)){this.aje(ai,bd);}else{this.aqa(ai,bd);}break;}};this.aiu=function(ai,bd){var mD=this.pO(ai);var Ag=bd.width-2;if(Ag<1){Ag=1;}var bK=Ag/mD.width;this.scale(bK,bK);mD=this.pO(ai);if(mD.y<0){this.ng(0,-mD.y);}};this.ail=function(ai,bd){var mD=this.pO(ai);var Ag=bd.height-2;if(Ag<1){Ag=1;}var bK=Ag/mD.height;this.scale(bK,bK);mD=this.pO(ai);if(mD.x<0){this.ng(-mD.x,0);}};this.aqx=function(ai,bd){var lL=this.clone();lL.aiu(ai,bd);this.ail(ai,bd);if(Math.max(Math.abs(hz),Math.abs(ih))>Math.max(Math.abs(lL.rh()),Math.abs(lL.qH()))){this.PQ(lL);}};this.aje=function(ai,bd){var mD=this.pO({x:0,y:0,width:ai.hf,height:ai.gn});var bK=bd.hf/mD.width;this.scale(bK,bK);};this.aqa=function(ai,bd){var mD=this.pO({x:0,y:0,width:1,height:1});var bK=1/Math.min(mD.width,mD.height);this.scale(bK,bK);if(Math.abs(hz-1)<0.0001){hz=1;}if(Math.abs(hF-1)<0.0001){hF=1;}};return this;};fN.prototype.aiB=function(){return Math.abs(this.aiV())>1e-14;};fN.prototype.rotate=function(Ab){this.adc(Ab,0,0);};fN.prototype.adc=function(Ab,nh,nu){var Kr=Ab*Math.PI*2/360;var gy=Math.sin(Kr);var fc=Math.cos(Kr);var de=new IPCC.fN(fc,gy,-gy,fc,nh*(1-fc)+nu*gy,nu*(1-fc)-nh*gy);this.append(de);};fN.prototype.aBD=function(Ab,nh,nu){var Kr=Ab*Math.PI*2/360;var gy=Math.sin(Kr);var fc=Math.cos(Kr);var de=new IPCC.fN(fc,gy,-gy,fc,nh*(1-fc)+nu*gy,nu*(1-fc)-nh*gy);this.Jn(de);};fN.prototype.aFX=function(Ab){this.aBD(Ab,0,0);};fN.prototype.scale=function(jw,qo){var de=new IPCC.fN(jw,0,0,qo,0,0);this.append(de);};fN.prototype.aEU=function(jw,qo,nh,nu){var de=new IPCC.fN(jw,0,0,qo,nh*(1-jw),nu*(1-qo));this.Jn(de);};fN.prototype.aGB=function(jw,qo){var de=new IPCC.fN(jw,0,0,qo,0,0);this.Jn(de);};fN.prototype.skew=function(nN,oW){var de=new IPCC.fN(1,Math.tan(oW*Math.PI*2/360),Math.tan(nN*Math.PI*2/360),1,0,0);this.append(de);};fN.prototype.aHP=function(nN,oW){var de=new IPCC.fN(1,Math.tan(oW*Math.PI*2/360),Math.tan(nN*Math.PI*2/360),1,0,0);this.Jn(de);};fN.prototype.aGX=function(Sr,UF){var de=new IPCC.fN(1,0,0,1,Sr,UF);this.Jn(de);};fN.prototype.AJ=function(H){var fA=this.transform({x:H.x,y:H.y});var kI=fA.x;var mw=fA.x;var kq=fA.y;var mK=fA.y;fA=this.transform({x:H.x+H.width,y:H.y});kI=Math.min(kI,fA.x);mw=Math.max(mw,fA.x);kq=Math.min(kq,fA.y);mK=Math.max(mK,fA.y);fA=this.transform({x:H.x+H.width,y:H.y+H.height});kI=Math.min(kI,fA.x);mw=Math.max(mw,fA.x);kq=Math.min(kq,fA.y);mK=Math.max(mK,fA.y);fA=this.transform({x:H.x,y:H.y+H.height});kI=Math.min(kI,fA.x);mw=Math.max(mw,fA.x);kq=Math.min(kq,fA.y);mK=Math.max(mK,fA.y);return new IPCC.Web.UI.Rectangle(kI,kq,mw-kI,mK-kq);};fN.prototype.atj=function(ai,bd,ek){var agC=this.clone();agC.ye();var aFu=agC.transform({x:ek.x+ek.width/2,y:ek.y+ek.height/2});var bK=Math.min(bd.width/ek.width,bd.height/ek.height);bK-=1e-10;var lu=this.pM();if(lu*bK>ai.rq){bK=ai.rq/lu;}if(lu*bK<ai.rA){bK=ai.rA/lu;}this.scale(bK,bK);this.ahO(bd,aFu);};fN.prototype.Nb=function(ai,bd,dQ){this.atj(ai,bd,this.AJ(dQ));};fN.prototype.aGD=function(bd){this.vk(1,-1,bd.width/2,bd.height/2);};fN.prototype.aqO=function(bd){this.vk(-1,1,bd.width/2,bd.height/2);};fN.prototype.UV=function(ash,alG){var akh=this.transform(ash);this.ng(alG.x-akh.x,alG.y-akh.y);};fN.prototype.ahO=function(bd,cO){var ahr=this.transform(cO);this.ng(bd.width/2-ahr.x,bd.height/2-ahr.y);};fN.prototype.la=function(av,bd){var bv=0,cA=0,end;var nJ=this.pO(av);if(nJ.width<bd.width){bv=(bd.width-nJ.width)/2-nJ.x;}else{end=nJ.x+nJ.width;if(end<bd.width){bv=bd.width-end;}if(nJ.x>0){bv= -nJ.x;}}if(nJ.height<bd.height){cA=(bd.height-nJ.height)/2-nJ.y;}else{end=nJ.y+nJ.height;if(end<bd.height){cA=bd.height-end;}if(nJ.y>0){cA= -nJ.y;}}this.ng(bv,cA);};fN.prototype.pO=function(av){return this.AJ({x:0,y:0,width:av.width,height:av.height});};fN.prototype.ayS=function(){var fY,zW,jg,wu,adi,iM;fY=this.transform({x:0,y:0});zW=this.transform({x:0,y:1});jg=this.transform({x:1,y:0});wu=Math.atan2(zW.y-fY.y,zW.x-fY.x);adi=Math.atan2(jg.y-fY.y,jg.x-fY.x);iM=wu-adi;if(iM>Math.PI){iM=iM-2*Math.PI;}if(iM< -Math.PI){iM=iM+2*Math.PI;}return iM<0;};fN.prototype.aei=function(){var fY,zW,wu;fY=this.transform({x:0,y:0});zW=this.transform({x:0,y:1});wu=Math.atan2(zW.y-fY.y,zW.x-fY.x)-Math.PI/2;if(wu<0){wu=wu+2*Math.PI;}return wu*360/(Math.PI*2);};fN.prototype.pM=function(){var hh;var fY,ou;var eA,ey,dG;fY=this.transform({x:0,y:0});ou=this.transform({x:1,y:0});eA=ou.x-fY.x;ey=ou.y-fY.y;hh=eA*eA+ey*ey;ou=this.transform({x:0,y:1});eA=ou.x-fY.x;ey=ou.y-fY.y;dG=Math.min(hh,eA*eA+ey*ey);ou=this.transform({x:1,y:1});eA=ou.x-fY.x;ey=ou.y-fY.y;dG=Math.min(hh,eA*eA+ey*ey);ou=this.transform({x:1,y: -1});eA=ou.x-fY.x;ey=ou.y-fY.y;dG=Math.min(hh,eA*eA+ey*ey);return Math.sqrt(hh);};fN.aFn=function(){return new IPCC.fN(1,0,0,1,0,0);};module.exports=fN;},{}],35:[function(require,module,exports){var dV={abH:1,acT:2,WN:3,agJ:4,akS:5,IK:6,Ln:7,akO:8,ajV:9,akw:10,ahW:11,ajK:12,alq:13,aeH:14,adn:15,acJ:16};module.exports=dV;},{}],36:[function(require,module,exports){var dc=function(){this.K=false;this.awc=1.5;};dc.prototype.mG=function(K){this.K=K;};dc.prototype.ed=function(){this.K=false;};dc.prototype.aB=function(){};dc.prototype.ma=function(V){var ar=this.K.bC();var ai=this.K.dj();var bd=this.K.ee();var aL=ar.fB();var JK=V.wheelDelta/120;if(V.domEvent.ctrlKey){V.domEvent.preventDefault();var bK=((this.awc-1)/2)+1;if(JK<0){bK=1/bK;}var lu=aL.pM();if(lu*bK>ai.rq){bK=ai.rq/lu;}if(lu*bK<ai.rA){bK=ai.rA/lu;}aL.vk(bK,bK,V.windowPoint.x,V.windowPoint.y);aL.la(ai,bd);this.K.ay('userModifiedViewState',{});ar.io(aL);}else{var aeK=aL.transform({x:0,y:0});aL.ng(0,JK*bd.gn);aL.la(ai,bd);var aeE=aL.transform({x:0,y:0});if(Math.abs(aeK.x-aeE.x)>0.001||Math.abs(aeK.y-aeE.y)>0.001){V.domEvent.preventDefault();this.K.ay('userModifiedViewState',{});ar.io(aL);}}this.K.dN();};module.exports=dc;},{}],37:[function(require,module,exports){var dF=function(alD){this.alD=alD;this.SR=0;this.RI=1;this.Qy=2;this.TF=3;this.SU=4;this.cw=this.SR;this.K=false;this.nI=0;};dF.prototype.mG=function(K){this.K=K;this.ar=K.bC();};dF.prototype.ed=function(){this.K=false;};dF.prototype.aB=function(){if(this.cw===this.Qy){this.K.bC().hideMagnifier();}this.cw=this.SR;};dF.prototype.Qi=function(V){var bU=V.domEvent.rawEvent;switch(this.cw){case this.SR:if(bU.touches.length===1){this.axz(V);}else if(bU.touches.length===2){this.aiv(V);}else if(bU.touches.length===3){this.XF(V);}else{this.aB();}break;case this.RI:if(bU.touches.length===2){this.aiv(V);}else if(bU.touches.length===3){this.XF(V);}else{this.aB();}break;case this.SU:if(bU.touches.length!==3){this.aB();}break;case this.Qy:this.aB();break;case this.TF:if(bU.touches.length===3){this.XF(V);}else if(bU.touches.length!==2){this.aB();}break;}};dF.prototype.Qd=function(V){switch(this.cw){case this.RI:this.nI++;break;case this.Qy:this.ady(V);break;case this.TF:this.azu(V);break;case this.SU:this.avC(V);break;}};dF.prototype.OT=function(){this.aB();};dF.prototype.Iy=function(){this.aB();};dF.prototype.axz=function(V){this.cw=this.RI;this.nI++;var aEj=this.nI;var J=this;function aFZ(){if(J.cw===this.RI&&aEj===J.nI){J.axA(V);}};setTimeout(aFZ,1000);};dF.prototype.axA=function(V){this.K.gg('qE',V);this.ady(V);this.cw=this.Qy;};dF.prototype.XF=function(V){var bU=V.domEvent.rawEvent;if(bU.touches.length!==3){this.aB();return;}var hj=bU.touches[0];var bY={x:hj.screenX,y:hj.screenY};var de=this.ar.fB();de.ye();this.KO=bY;this.aza=bY;this.Yb=de.transform(bY);this.cw=this.SU;this.aHC=this.ar.fB();this.agw=true;this.agY=true;};dF.prototype.avC=function(V){var bU=V.domEvent.rawEvent;if(bU.touches.length!==3){this.aB();return;}var hj=bU.touches[0];var bY={x:hj.screenX,y:hj.screenY};var aFk=Math.abs(bY.x-this.KO.x);var aEd=Math.abs(bY.y-this.KO.y);if(aFk>35){this.agY=false;}if(aEd>35){this.agw=false;}if(this.agw){bY.y=this.KO.y;}if(this.agY){bY.x=this.KO.x;}this.aza=bY;var aL=this.ar.fB();var bd=this.K.ee();var ai=this.K.dj();aL.UV(this.Yb,bY);aL.la(ai,bd);this.ar.io(aL);};dF.prototype.aHy=function(){};dF.prototype.aes=function(V){var bU=V.domEvent.rawEvent;if(bU.touches.length!==2){this.aB();return{};}var Si=bU.touches[0];var Qq=bU.touches[1];var eA=Si.screenX-Qq.screenX;var ey=Si.screenY-Qq.screenY;var xq=Math.sqrt(eA*eA+ey*ey);var iM=Math.atan2(eA,ey)*180/Math.PI;var bL={x:(Si.screenX+Qq.screenX)/2,y:(Si.screenY+Qq.screenY)/2};return{xq:xq,iM:iM,ajP:bL};};dF.prototype.aiv=function(V){this.cw=this.TF;this.atw=this.aes(V);this.Mj=this.atw;var de=this.ar.fB();de.ye();this.Yb=de.transform(this.Mj.ajP);this.Hv=this.Mj.iM;};dF.prototype.ady=function(V){var bU=V.domEvent.rawEvent;var hj=bU.touches[0];var bY={x:hj.screenX,y:hj.screenY};this.ar.showMagnifier(bY);};dF.prototype.azu=function(V){var wS=this.aes(V);var dG=wS.xq/this.Mj.xq;var aL=this.ar.fB();var bd=this.K.ee();var ai=this.K.dj();aL.scale(dG,dG);var Gk=this.Hv-wS.iM;var aeb=this.Hv-wS.iM-360;var afy=this.Hv-wS.iM+360;if(Math.abs(Gk)>Math.abs(aeb)){Gk=aeb;}if(Math.abs(Gk)>Math.abs(afy)){Gk=afy;}if(Gk< -40){aL.rotate(-90);this.Hv=wS.iM;}else if(Gk>40){aL.rotate(90);this.Hv=wS.iM;}aL.UV(this.Yb,wS.ajP);aL.la(ai,bd);this.ar.io(aL);this.Mj=wS;};dF.prototype.aIp=function(V){var aL=this.ar.fB();var bd=this.K.ee();var ai=this.K.dj();aL.Wg(IPCC.Web.UI.FitType.FullImage,ai,bd);aL.la(ai,bd);this.ar.io(aL);};dF.prototype.ma=function(){this.aB();};module.exports=dF;},{}],38:[function(require,module,exports){var cs=require('./IPCC.Util').regClass;var QU=function(){return this;};QU.registerClass=cs;QU.prototype={};QU.registerClass('IPCC.OpenPageEventArgs');module.exports=QU;},{"./IPCC.Util":28}],39:[function(require,module,exports){var cs=require('./IPCC.Util').regClass;var Qf=function(){return this;};Qf.registerClass=cs;Qf.prototype={};Qf.registerClass('IPCC.PageEventArgs');module.exports=Qf;},{"./IPCC.Util":28}],40:[function(require,module,exports){var bG=function(ah){this.eD=ah.page;this.aS=0;this.aq=0;this.gi=0;this.ge=0;var aN=new IPCC.Web.UI.ir();this.ajB=undefined;this.gv=false;this.avg=false;this.Fa=0;this.aFi=undefined;this.Ak=false;this.yj=false;this.CV=false;this.fQ=0;this.Do=0;this.EF=false;this.JD=false;this.am=new IPCC.Web.UI.ArtPage();this.fu=new IPCC.Web.UI.ArtPage();this.cK=this.eD.get_pageNumber();this.bN=this.eD.bi.Rd+'_'+this.cK+'__pViewId';this.bi=this.eD.bi;this.cg=function(dg){var R=aN.getHandler('propertyChanged');if(R){R(this,new IPCC.pE(dg));}};return this;};bG.prototype.kp=function(){if(this.eD){return this.eD.ki()||this.aS;}return this.aS;};bG.prototype.qB=function(){if(this.eD){return this.eD.jE()||this.aq;}return this.aq;};bG.prototype.Yh=function(bool){bool= ! !bool;if(this.eD){this.eD.EF=bool;}this.EF=bool;};bG.prototype.afz=function(){if(this.eD){return this.eD.EF||this.EF;}return this.EF;};module.exports=bG;},{}],41:[function(require,module,exports){var ec=require('./IPCC.Util').regEnum;var Bk=function(){};Bk.registerEnum=ec;Bk.prototype={VerticalScrollDirection:0,HorizontalScrollDirection:1};Bk.registerEnum('IPCC.PageLayout',false);module.exports=Bk;},{"./IPCC.Util":28}],42:[function(require,module,exports){var cs=require('./IPCC.Util').regClass;var avR=function(){this.ct=undefined;return this;};var QJ=function(element){var J=this;var Gn=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(func){return setTimeout(func,16);};var ayk=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||function(id){return clearTimeout(id);};var aN=new IPCC.Web.UI.ir();var aJ=[];var aqc;var aG='';var Cg='';var bP='';var kT='';var IE='';var Gm=0;this.Ax=new IPCC.Web.UI.ImGearDocumentCollection();var GZ=[];this.aFV=0;this.aGE={x:0,y:0};var ll=0;var oy=IPCC.Web.UI.DebugErrorLevel.Production;var _debug=false;var nQ=false;var di=0;var uE=false;var OS=[];var Hf='';var dA=1;var rk=0;var kh=1;var qv=1;var aV=IPCC.Web.UI.MouseTool.None;var zl=false;var sX=true;var bD=IPCC.aP.None;var iJ;var hm=0;var jy=0;var afY=0;var fp=0;var eL=15;var iW=0;var gp=15;var pg=0;var np=0;var pd=0;var pp=0;var azi=0;var fT=0;var fO=0;var oB=1;var eZ=IPCC.PageLayout.VerticalScrollDirection;var dh=IPCC.ViewMode.Document;var mg=null;var Tu=null;var Lb=0;var Tq=0;var xr=0;var zo=false;var lx=null;var HT=0;var KB='';var BA='';var su=[];var DG=0;var uU=3;var Qr=0.5;var Iu=true;var Ql=false;var Pf=false;var YO;var rU=IPCC.Web.UI.MarkHandleMode.HideSideHandlesWhenClose;var wo=true;var kC;var dm={};var sD=false;var mt=function(){return null;};var iE=null;var ajj="font-size:11px;color:#888;text-align:center;cursor:pointer;";var aAh=ajj+"padding:18px 0 20px;display:table-caption;caption-side:bottom;";var aye=ajj+"white-space:nowrap;line-height:50px;display:table-cell;vertical-align:middle;padding-right:10px;";var cv=96;var aY;function lQ(Gd){if(!_debug){return false;}return oy>=Gd;};this.ag=function(iZ,iO){if(!lQ(IPCC.Web.UI.DebugErrorLevel.Production)){return;}var cI=iZ+'() threw an exception ('+iO.name+'), "'+iO.message+'"';cI=cI.replace(/\n/g," ");IPCC.jx.mn(cI,IPCC.Web.UI.DebugItemCause.Exception,IPCC.Web.UI.DebugErrorLevel.Production,'PageList',this.nk().id);var nt=new IPCC.ExceptionEventArgs();nt.functionName=iZ;nt.exception=iO;this.ay('exceptionThrown',nt);};this.bn=function(iZ,kR,qM){if(!lQ(IPCC.Web.UI.DebugErrorLevel.Development)){return;}var cI=iZ+'(';var h;for(h=0;h<kR.length;h++){if(h>0){cI+=', ';}cI+=IPCC.jx.qU(kR[h],(qM?qM:0));}cI+=')';this.va(cI,IPCC.Web.UI.DebugErrorLevel.Development);};this.DX=function(iZ,kR,lX,qM){if(!lQ(IPCC.Web.UI.DebugErrorLevel.Development)){return;}var cI=iZ+'(';var h;for(h=0;h<kR.length;h++){if(h>0){cI+=', ';}cI+=IPCC.jx.qU(kR[h],(qM?qM:0));}cI+=') = ';cI+=IPCC.jx.qU(lX,1);this.va(cI,IPCC.Web.UI.DebugErrorLevel.Development);};this.dn=function(iZ,kR,lX){if(!lQ(IPCC.Web.UI.DebugErrorLevel.Detailed)){return;}var cI=iZ+'(';var h;for(h=0;h<kR.length;h++){if(h>0){cI+=', ';}cI+=IPCC.jx.qU(kR[h],0);}cI+=') = ';cI+=IPCC.jx.qU(lX,1);this.va(cI,IPCC.Web.UI.DebugErrorLevel.Detailed);};this.va=function(kS,bM){IPCC.jx.mn(kS,IPCC.Web.UI.DebugItemCause.FunctionCall,bM,'PageList',this.nk().id);};this.mn=function(kS){IPCC.jx.mn(kS,IPCC.Web.UI.DebugItemCause.Custom,IPCC.Web.UI.DebugErrorLevel.Production,'PageList',this.nk().id);};this.Jw=function(){return _debug;};this.XL=function(L){var Fz= ! !L;if(_debug===Fz){return;}_debug=Fz;var dr=iw();var cn=[];if(dr){cn=qC(dr);}var h=0;for(h=0;h<cn.length;h++){var aw;if(aJ[cn[h]].bN){aw=document.getElementById(aJ[cn[h]].bN).aQ;}if(aw){aw.set_debug(_debug);}}this.cg('debug');};this.xf=function(){return oy;};this.GV=function(L){IPCC.bO.le(L,'value',IPCC.Web.UI.DebugErrorLevel);if(oy===L){return;}oy=L;var dr=iw();var cn=[];if(dr){cn=qC(dr);}var h=0;for(h=0;h<cn.length;h++){var aw;if(aJ[cn[h]].bN){aw=document.getElementById(aJ[cn[h]].bN).aQ;}if(aw){aw.set_debugErrorLevel(oy);}}this.cg('debugErrorLevel');};function dO(cY,R){aN.addHandler(cY,R);};function cB(cY,R){aN.removeHandler(cY,R);};this.PA=function(R){dO('mouseDown',R);};this.Wh=function(R){cB('mouseDown',R);};this.PO=function(R){dO('mouseMove',R);};this.Wm=function(R){cB('mouseMove',R);};this.PH=function(R){dO('mouseUp',R);};this.Xi=function(R){cB('mouseUp',R);};this.Sq=function(R){dO('selectTextMouseToolCompleted',R);};this.WO=function(R){cB('selectTextMouseToolCompleted',R);};this.AO=function(R){dO('textPageReady',R);};this.EC=function(R){cB('textPageReady',R);};this.Ud=function(R){dO('hyperlinkPageReady',R);};this.acL=function(R){cB('hyperlinkPageReady',R);};this.aEl=function(R){dO('allPagesAdded',R);};this.aCR=function(R){cB('allPagesAdded',R);};this.Ue=function(R){dO('pageOpening',R);};this.XE=function(R){cB('pageOpening',R);};this.ST=function(R){dO('pageOpened',R);};this.XH=function(R){cB('pageOpened',R);};this.Gb=function(R){dO('pageOpenFailed',R);};this.HD=function(R){cB('pageOpenFailed',R);};this.SZ=function(R){dO('pageDisplayed',R);};this.Wp=function(R){cB('pageDisplayed',R);};this.kf=function(R){dO('propertyChanged',R);};this.mo=function(R){cB('propertyChanged',R);};this.TK=function(R){dO('exceptionThrown',R);};this.Un=function(R){cB('exceptionThrown',R);};this.Ac=function(R){dO('textExtractionFailed',R);};this.Dr=function(R){cB('textExtractionFailed',R);};this.Al=function(R){dO('markAdded',R);};this.zh=function(R){cB('markAdded',R);};this.SM=function(R){dO('markCreating',R);};this.XA=function(R){cB('markCreating',R);};this.HN=function(R){dO('markChanged',R);};this.FA=function(R){cB('markChanged',R);};this.FH=function(R){dO('markReordered',R);};this.Fy=function(R){cB('markReordered',R);};this.FX=function(R){dO('markSelectionChanged',R);};this.GC=function(R){cB('markSelectionChanged',R);};this.IY=function(R){dO('markTextSelectionChanged',R);};this.FW=function(R){cB('markTextSelectionChanged',R);};this.zd=function(R){dO('markRemoved',R);};this.AK=function(R){cB('markRemoved',R);};this.aDJ=function(R){dO('commentAdding',R);};this.aBg=function(R){cB('commentAdding',R);};this.vv=function(R){dO('commentAdded',R);};this.CT=function(R){cB('commentAdded',R);};this.vG=function(R){dO('commentRemoved',R);};this.Dh=function(R){cB('commentRemoved',R);};this.uu=function(R){dO('commentChanged',R);};this.vR=function(R){cB('commentChanged',R);};this.SF=function(R){dO('scaleChanged',R);};this.Wj=function(R){cB('scaleChanged',R);};this.OG=function(){var aQ=document.getElementById(aJ[di].bN).aQ;if(aQ){return aQ.get_currentState();}else{return null;}};this.ahY=function(){var aO=IPCC.F.find(aJ,function(fA){return fA.cK===di;});if(!aO){return;}return aO.eD;};this.arE=function(ae){var aO=IPCC.F.find(aJ,function(fA){return fA.cK===di;});if(!aO){return;}return aO.bN;};this.pM=function(){return dA;};this.ard=function(dG){lf(dG,undefined,undefined,undefined,undefined,undefined,IPCC.ScaleTrigger.Zoom);};this.KJ=function(bK,sU,QB,eK){eK=eK||IPCC.ScaleTrigger.Zoom;lf(dA*bK,QB,undefined,undefined,undefined,sU,eK);};this.asF=function(bK,bv,cA,Bh,eK){eK=eK||IPCC.ScaleTrigger.Zoom;if(dA*bK<8){lf(dA*bK,false,bv,cA,Bh,undefined,eK);}else{lf(8,false,bv,cA,Bh);}};this.aas=function(bK,eK){eK=eK||IPCC.ScaleTrigger.Zoom;lf(dA/bK,false,undefined,undefined,undefined,undefined,eK);};this.auf=function(){return Wd();};this.aam=function(eK,eV,VN){var GR,HE,aS,aq;var XT=0;var h=0;for(h=0;h<aJ.length;h++){aS=aJ[h].kp();aq=aJ[h].qB();if(iY(aJ[h].fQ)===true){var Fl=aS;aS=aq;aq=Fl;}if(aS>0&&aq>0){var Hs=aS/aq;if(Hs>XT){XT=Hs;GR=aq;HE=aS;}}}if(XT>0){var anM=(aG.offsetWidth-IPCC.Web.nL()-uN()-(eL+gp+np+pp));var apj=anM/(HE*cv/aJ[0].gi);var fo=hm;var ft=jy;if(iY(aJ[0].fQ)===true){fo=jy;ft=hm;}var ame=GR/ft*apj;var kn=(aG.clientHeight-(fp+iW+pg+pd))/(ft*cv/aJ[0].ge);var Iv=ame;if(VN===true&&ame>kn){Iv=kn;}lf(Iv,true,undefined,undefined,undefined,undefined,eK,eV);}};this.aaG=function(eK,eV,VN){var GR,HE,aS,aq;var WR=0;var h=0;for(h=0;h<aJ.length;h++){aS=aJ[h].kp();aq=aJ[h].qB();if(iY(aJ[h].fQ)===true){var Fl=aS;aS=aq;aq=Fl;}if(aS>0&&aq>0){var Hs=aq/aS;if(Hs>WR){WR=Hs;GR=aq;HE=aS;}}}if(WR>0){var aoH=(aG.offsetHeight-IPCC.Web.nL()-(fp+iW+pg+pd));var aoL=aoH/(GR*cv/aJ[0].ge);var fo=hm;var ft=jy;if(iY(aJ[0].fQ)===true){fo=jy;ft=hm;}var alI=HE/fo*aoL;var kn=(aG.clientWidth-uN()-(eL+gp+np+pp))/(fo*cv/aJ[0].gi);var Iv=alI;if(VN===true&&alI>kn){Iv=kn;}lf(Iv,true,undefined,undefined,undefined,undefined,eK,eV);}};this.axw=function(eV,eK){if(J.wm&&typeof J.wm==='function'){J.wm();}var aS;var aq;var fK;var kY=1;eK=eK||IPCC.ScaleTrigger.Fit;if(eV===IPCC.FitType.FitToWidth){if(dh===IPCC.ViewMode.Document){kY=(aG.offsetWidth-IPCC.Web.nL()-uN()-(eL+gp+np+pp))/(fT/dA);lf(kY,true,undefined,undefined,undefined,undefined,eK,eV);}else if(dh===IPCC.ViewMode.SinglePage){if(iY(aJ[di].fQ)===true){aS=aJ[di].qB();fK=cv/aJ[di].ge;}else{aS=aJ[di].kp();fK=cv/aJ[di].gi;}kY=(aG.offsetWidth-IPCC.Web.nL()-uN()-(eL+gp+np+pp))/(aS*fK);lf(kY,true,undefined,undefined,undefined,undefined,eK,eV);}else{if(eZ===IPCC.PageLayout.VerticalScrollDirection){WX(eK,eV);}else{J.aam(eK,eV);}}}else if(eV===IPCC.FitType.ShrinkToWidth){var aqU=aG.clientWidth-uN();var aqy=20;var Uy=aqU-aqy;if(dh===IPCC.ViewMode.SinglePage){if(iY(aJ[di].fQ)===true){aS=aJ[di].qB();fK=cv/aJ[di].ge;}else{aS=aJ[di].kp();fK=cv/aJ[di].gi;}if(Uy<dA*aS*fK){kY=(aG.offsetWidth-IPCC.Web.nL()-uN()-(eL+gp+np+pp))/(aS*fK);lf(kY,true,undefined,undefined,undefined,undefined,eK,eV);}}else{if(Uy<fT){lf(dA*Uy/fT,true,undefined,undefined,undefined,undefined,eK,eV);}}}else if(eV===IPCC.FitType.ActualSize){if(dh===IPCC.ViewMode.Document||dh===IPCC.ViewMode.SinglePage){lf(1,true,undefined,undefined,undefined,undefined,eK,eV);}}else if(eV===IPCC.FitType.FitToHeight){if(dh===IPCC.ViewMode.Document){kY=(aG.offsetHeight-IPCC.Web.nL()-(fp+iW+pg+pd))/(fO/dA);lf(kY,true,undefined,undefined,undefined,undefined,eK,eV);}else if(dh===IPCC.ViewMode.SinglePage){if(iY(aJ[di].fQ)===true){aq=aJ[di].kp();fK=cv/aJ[di].gi;}else{aq=aJ[di].qB();fK=cv/aJ[di].ge;}kY=(aG.offsetHeight-IPCC.Web.nL()-(fp+iW+pg+pd))/(aq*fK);lf(kY,true,undefined,undefined,undefined,undefined,eK,eV);}else{if(eZ===IPCC.PageLayout.HorizontalScrollDirection){WX(eK,eV);}else{J.aaG(eK,eV);}}}else if(eV===IPCC.FitType.BestFit){var Ea;if(dh===IPCC.ViewMode.Document){kY=(aG.offsetWidth-IPCC.Web.nL()-(eL+gp+np+pp))/(fT/dA);Ea=(aG.offsetHeight-IPCC.Web.nL()-(fp+iW+pg+pd))/(fO/dA);if(Ea<kY){kY=Ea;}lf(kY,true,undefined,undefined,undefined,undefined,eK,eV);}else if(dh===IPCC.ViewMode.SinglePage){if(iY(aJ[di].fQ)===true){aS=aJ[di].qB();aq=aJ[di].kp();fK=cv/aJ[di].gi;}else{aS=aJ[di].kp();aq=aJ[di].qB();fK=cv/aJ[di].ge;}kY=(aG.offsetWidth-IPCC.Web.nL()-uN()-(eL+gp+np+pp))/(aS*fK);Ea=(aG.offsetHeight-IPCC.Web.nL()-(fp+iW+pg+pd))/(aq*fK);if(Ea<kY){kY=Ea;}lf(kY,true,undefined,undefined,undefined,undefined,eK,eV);}else{if(eZ===IPCC.PageLayout.HorizontalScrollDirection){J.aam(eK,eV,true);}else{J.aaG(eK,eV,true);}}}};this.auL=function(ak,bo){var aO=aJ[ak-1];var bV=document.getElementById(aO.bN);var BC=[];if(bV){var ei,BK,bL;try{ei=Tl(bV);}catch(e){return null;}BC=IPCC.F.map(bo,function(fA){BK=bV.aQ.transformPagePointToWindow(new IPCC.Web.UI.Point(fA.x,fA.y),true);bL=acC(bV,BK.x,BK.y,ei);return{clientX:bL.x,clientY:bL.y};});return BC;}else{return null;}};this.awX=function(){var h=0;for(h=0;h<aJ.length;h++){J.dN(h);}iw();pl();};this.dN=function(ae){var bJ;if(aJ[ae].bN){bJ=document.getElementById(aJ[ae].bN);}J.wZ(bJ,ae);};this.GW=function(ae){var bJ;if(aJ[ae].bN){bJ=document.getElementById(aJ[ae].bN);}if(bJ){var aw=bJ.aQ;aw.GW();}};this.wZ=function(bJ,ae){if(bJ&&bJ.aQ&&bJ.aQ.fH()===true){var aw=bJ.aQ;aw.display();aJ[ae].gv=true;if(dh===IPCC.ViewMode.SinglePage){var lD= -1;if(Array.prototype.indexOf){lD=su.indexOf(ae);}else{lD=IPCC.Web.iG(su,ae);}if(lD!== -1){su.splice(lD,1);}}}};function aco(cn){var bJ;for(var h=0;h<cn.get_length();h++){var aO=cn.getPage(h);var ae=aO.get_pageNumber();if(aJ[ae].bN){bJ=document.getElementById(aJ[ae].bN);}if(bJ&&bJ.aQ&&bJ.aQ.Ce()!==null){return bJ.aQ;}}return null;};this.Is=function(){var cn=this.get_displayedPages();var NI=aco(cn);NI.Is();};this.Fk=function(bK){var hk=0;var hv=aJ.length-1;for(var aC=hk;aC<=hv;aC++){var aw;var bJ=document.getElementById(aJ[aC].bN);if(bJ){aw=bJ.aQ;}else{continue;}aw.set_sharpening(bK);if(aw&&aJ[aC].gv===true&&aw.fH()===true){aw.display();}}rk=bK;};this.auK=function(){return rk;};this.Cb=function(bK){var hk=0;var hv=aJ.length-1;for(var aC=hk;aC<=hv;aC++){var aw;var bJ=document.getElementById(aJ[aC].bN);if(bJ){aw=bJ.aQ;}else{continue;}aw.set_gamma(bK);if(aw&&aJ[aC].gv===true&&aw.fH()===true){aw.display();}}qv=bK;};this.auo=function(){return qv;};this.Ga=function(bK){var hk=0;var hv=aJ.length-1;for(var aC=hk;aC<=hv;aC++){var aw;var bJ=document.getElementById(aJ[aC].bN);if(bJ){aw=bJ.aQ;}else{continue;}aw.set_svgLineWidthMultiplier(bK);if(aw&&aJ[aC].gv===true&&aw.fH()===true){aw.display();}}kh=bK;};this.auj=function(){return kh;};this.Ce=function(){var cn=this.get_displayedPages();var NI=aco(cn);if(NI){return NI.Ce();}return null;};this.vV=function(ae,T){var bJ;if(aJ[ae].bN){bJ=document.getElementById(aJ[ae].bN);}if(bJ&&bJ.aQ){bJ.aQ.vV(T);}};this.qA=function(ae){var bJ;if(aJ[ae].bN){bJ=document.getElementById(aJ[ae].bN);}if(bJ&&bJ.aQ){bJ.aQ.qA();}};var tz='';this.vS=function(L){tz=L;};this.nk=function(){return tz;};this.ay=function(cY,V){try{var R=aN.getHandler(cY);if(R!==null){R(J,V);}}catch(e){J.ag(cY+'Event',e);}};this.cg=function(dg){var R=aN.getHandler('propertyChanged');if(R){R(this,new IPCC.pE(dg));}};this.aGa=function(R){aN.addHandler('currentPageChanged',R);};this.aCv=function(R){aN.removeHandler('currentPageChanged',R);};this.Ao=function(cz,L){cz.style.cursor='move';cz.style.cursor='-webkit-'+L;cz.style.cursor='-moz-'+L;cz.style.cursor=L;};this.ahX=function(){return bP.style.cursor||'auto';};this.aqY=function(L){bP.style.cursor=L||'auto';var h=0;for(h=0;h<aJ.length;h++){if(aJ[h].bN){var bJ=document.getElementById(aJ[h].bN);if(bJ){var aw=bJ.aQ;bJ.style.cursor=L;if(aw){aw.set_cursor(L);if(aJ[h].gv===true&&aw.fH()===true){aw.display();}}}}}};this.Vo=function(){return aV;};this.Gf=function(L){IPCC.bO.le(L,'value',IPCC.Web.UI.MouseTool);var lG=false;if(aV!==L){iJ=null;aV=L;switch(aV){case IPCC.Web.UI.MouseTool.HandPan:bD='grab';J.Ao(bP,'grab');break;case IPCC.Web.UI.MouseTool.SelectText:J.ug();bD=IPCC.aP.Text;bP.style.cursor=IPCC.aP.fw(bD);break;case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:J.ug();bD=IPCC.aP.Text;bP.style.cursor=IPCC.aP.fw(bD);break;case IPCC.Web.UI.MouseTool.None:bD=IPCC.aP.None;bP.style.cursor=IPCC.aP.fw(bD);break;case IPCC.Web.UI.MouseTool.Magnifier:bD=IPCC.aP.Magnifier;bP.style.cursor=IPCC.aP.fw(bD);break;case IPCC.Web.UI.MouseTool.RectangleZoom:bD=IPCC.aP.RectangleZoom;bP.style.cursor=IPCC.aP.fw(bD);break;case IPCC.Web.UI.MouseTool.CreateRectangleMark:bD=IPCC.aP.AddRectangleMark;bP.style.cursor=IPCC.aP.fw(bD);lG=true;iJ=function(){return[new IPCC.dX(IPCC.Web.UI.MarkType.Rectangle)];};break;case IPCC.Web.UI.MouseTool.CreateRectangleRedactionMark:bD=IPCC.aP.AddRectangleRedactionMark;bP.style.cursor=IPCC.aP.fw(bD);lG=true;iJ=function(){return[new IPCC.dX(IPCC.Web.UI.MarkType.RectangleRedaction)];};break;case IPCC.Web.UI.MouseTool.CreateEllipseMark:bD=IPCC.aP.AddEllipseMark;bP.style.cursor=IPCC.aP.fw(bD);lG=true;iJ=function(){return[new IPCC.dX(IPCC.Web.UI.MarkType.Ellipse)];};break;case IPCC.Web.UI.MouseTool.CreateLineMark:bD=IPCC.aP.AddLineMark;bP.style.cursor=IPCC.aP.fw(bD);lG=true;iJ=function(){return[new IPCC.lN()];};break;case IPCC.Web.UI.MouseTool.CreateStampMark:bD=IPCC.aP.AddStampMark;bP.style.cursor=IPCC.aP.fw(bD);lG=true;iJ=function(){return[new IPCC.dX(IPCC.Web.UI.MarkType.Stamp)];};break;case IPCC.Web.UI.MouseTool.CreateImageStampAnnotationMark:bD=IPCC.aP.AddImageStampMark;bP.style.cursor=IPCC.aP.fw(bD);lG=true;iJ=function(){return[new IPCC.dX(IPCC.Web.UI.MarkType.ImageStampAnnotation)];};break;case IPCC.Web.UI.MouseTool.CreateImageStampRedactionMark:bD=IPCC.aP.AddImageStampMark;bP.style.cursor=IPCC.aP.fw(bD);lG=true;iJ=function(){return[new IPCC.dX(IPCC.Web.UI.MarkType.ImageStampRedaction)];};break;case IPCC.Web.UI.MouseTool.CreateTextMark:bD=IPCC.aP.AddTextMark;bP.style.cursor=IPCC.aP.fw(bD);lG=true;iJ=function(){return[new IPCC.dX(IPCC.Web.UI.MarkType.Text)];};break;case IPCC.Web.UI.MouseTool.CreateTextInputSignatureMark:bD=IPCC.aP.AddTextMark;bP.style.cursor=IPCC.aP.fw(bD);lG=true;iJ=function(){return[new IPCC.dX(IPCC.Web.UI.MarkType.TextLine)];};break;case IPCC.Web.UI.MouseTool.CreateTextAreaSignatureMark:bD=IPCC.aP.AddTextMark;bP.style.cursor=IPCC.aP.fw(bD);lG=true;iJ=function(){return[new IPCC.dX(IPCC.Web.UI.MarkType.TextAreaSignature)];};break;case IPCC.Web.UI.MouseTool.CreateFreehandMark:bD=IPCC.aP.AddFreehandLineMark;bP.style.cursor=IPCC.aP.fw(bD);lG=true;iJ=function(){return[new IPCC.lj()];};break;case IPCC.Web.UI.MouseTool.CreatePolylineMark:bD=IPCC.aP.AddPolylineMark;bP.style.cursor=IPCC.aP.fw(bD);lG=true;iJ=function(){return[new IPCC.ln(IPCC.Web.UI.MarkType.Polyline)];};break;case IPCC.Web.UI.MouseTool.EditMarks:bD=IPCC.aP.EditMarks;bP.style.cursor=IPCC.aP.fw(bD);lG=true;iJ=function(){return[new IPCC.lY(IPCC.Web.UI.MarkType.Text)];};break;default:bD=IPCC.aP.None;bP.style.cursor=IPCC.aP.fw(bD);break;}var h=0;for(h=0;h<aJ.length;h++){if(aJ[h].bN){var bJ=document.getElementById(aJ[h].bN);if(bJ){var aw=bJ.aQ;if(bD==='grab'){J.Ao(bJ,'grab');}else{bJ.style.cursor=IPCC.aP.fw(bD);}if(aw){aw.set_cursor(bD);aw.OM(aV===IPCC.Web.UI.MouseTool.HandPan||aV===IPCC.Web.UI.MouseTool.EditMarks);if(lG===true){aw.Fe(iJ());}else{aw.set_mouseTool(IPCC.Web.UI.MouseTool.None);}if(aJ[h].gv===true&&aw.fH()===true){aw.display();}}}}}this.cg('mouseTool');}};this.ayq=function(){return zl;};this.aor=function(bool){zl= ! !bool;};this.zV=function(){return rU;};this.Kg=function(L){if(rU!==L){rU=L;var dr=iw();var cn=[];if(dr){cn=qC(dr);}var h=0;for(h=0;h<cn.length;h++){var bJ;var aw;bJ=document.getElementById(aJ[cn[h]].bN);aw=bJ.aQ;if(aw){aw.set_markHandleMode(rU);this.wZ(bJ,h);}}this.cg('markHandleMode');}};this.kH=function(){return sX;};this.FK=function(L){if(sX!==L){sX=L;var dr=iw();var cn=[];if(dr){cn=qC(dr);}var h=0;for(h=0;h<cn.length;h++){var aw;if(aJ[cn[h]].bN){aw=document.getElementById(aJ[cn[h]].bN).aQ;}if(aw){aw.set_textRequired(sX);}}this.cg('textRequired');}};this.ayZ=function(){return uU;};this.apu=function(L){if(L<0){L=0;}if(uU!==L){uU=L;this.cg('maxPrefetch');}};this.axm=function(){return Iu;};this.apf=function(L){if(Iu!==L){Iu=L;this.cg('displayPagesWhenScrolling');}};this.ayu=function(){return DG;};this.apT=function(L){if(L<0){L=0;}if(DG!==L){DG=L;this.cg('maxOutOfViewDisplay');}};this.ayK=function(){return Ql;};this.aoK=function(L){if(Ql!==L){Ql= ! !L;this.cg('discardOutOfViewText');}};this.auF=function(){return Pf;};this.aqX=function(L){if(Pf!==L){Pf= ! !L;this.cg('retainPageText');}};this.arW=function(){return Qr;};this.apz=function(L){if(L<0){L=0;}if(Qr!==L){Qr=L;this.cg('scrollDisplayThreshold');}};this.auB=function(){return eZ;};this.apM=function(L){if(eZ===L){return;}eZ=L;if(aG===''||aG.clientHeight<=0||dh===IPCC.ViewMode.SinglePage){this.cg('pageLayout');return;}var uQ=di;var Ii=dh;if(dh===IPCC.ViewMode.EqualWidthPages||dh===IPCC.ViewMode.EqualFitPages){J.Rm(IPCC.ViewMode.Document);}aG.scrollLeft=0;aG.scrollTop=0;var h=0;var bJ;if(eZ===IPCC.PageLayout.VerticalScrollDirection){if(IE){IE.setAttribute('style',aAh);}Cg.insertBefore(kT,IE);for(h=0;h<aJ.length;h++){bJ=document.getElementById(aJ[h].bN);bJ.style.display='block';if(hm>0){bJ.style.margin=fp+'px auto '+iW+'px auto';}}bP.style.margin='0px '+eL+'px 0px '+gp+'px';aG.scrollLeft=(fT-aG.clientWidth)/2+eL+np;}else{if(IE){IE.setAttribute('style',aye);}Cg.removeChild(kT);for(h=0;h<aJ.length;h++){bJ=document.getElementById(aJ[h].bN);if(bJ){bJ.style.display='inline-block';if(hm>0){bJ.style.margin=fp+'px '+eL+'px '+iW+'px '+gp+'px';}}}bP.style.margin='0px';aG.scrollTop=(fO-aG.clientHeight)/2+fp+pg;}if(Ii===IPCC.ViewMode.EqualWidthPages){J.Rm(IPCC.ViewMode.EqualWidthPages);}else if(Ii===IPCC.ViewMode.EqualFitPages){J.Rm(IPCC.ViewMode.EqualFitPages);}this.qD(uQ);pl();this.cg('layout');};this.ass=function(){return dh;};this.Rm=function(L,eK){eK=eK||IPCC.ScaleTrigger.ViewMode;if(dh===L){return;}dh=L;if(aG===''||aG.clientHeight<=0){this.cg('viewMode');return;}var uQ=di;this.qD(uQ);if(dh===IPCC.ViewMode.Document){var kn=1;var aS=hm;var aq=jy;if(iY(qS)===true){aS=jy;aq=hm;}if(eZ===IPCC.PageLayout.VerticalScrollDirection){kn=(aG.clientWidth-(eL+gp+np+pp))/aS;}else{kn=(aG.clientHeight-(fp+iW+pg+pd))/aq;}lf(kn,true,undefined,undefined,undefined,undefined,eK);}else{WX(eK);}this.qD(uQ);this.cg('viewMode');yQ(dm,true);nq(dm,true);};var qS=0;this.asW=function(){return qS;};this.anU=function(L){if(qS!==L){qS=L;var h=0;for(h=0;h<aJ.length;h++){if(aJ[h].Do===0){aJ[h].fQ=qS;}}this.cg('pageRotation');}};this.Wn=function(ak){var cK;if(arguments.length>0){if(!isNaN(ak)){cK=ak;}else{cK=di;}}else{cK=di;}for(var h=0;h<aJ.length;h++){if(cK===h){return aJ[h].fQ;}}return 0;};var oQ=false;this.iP=function(){return oQ;};this.oR=function(L){if(typeof L!=="boolean"){return;}if(L===oQ){return;}oQ=L;};this.ayR=function(){return YO;};this.aoh=function(L,pP,vt,tG){if(YO!==L){YO=L;for(var h=0;h<aJ.length;h++){aJ[h].am.atr(L,h,aJ[h].kp(),aJ[h].qB(),aJ[h].eD,pP,vt,tG);var aFr= !aJ[h].kp();aJ[h].Yh(aFr);}this.cg('annotationXmlDom');}};var rE;this.Gx=function(L){rE=L;};this.uY=function(){return rE;};var qj=false;this.mr=function(){return qj;};this.qa=function(L){if(typeof L!=="boolean"){return;}if(L===qj){return;}qj=L;IPCC.F.forEach(aJ,function(bG,h){var aw;if(aJ[h].bN){var bJ=document.getElementById(aJ[h].bN);if(bJ){aw=bJ.aQ;}}if(aw){aw.qa(qj);aw=undefined;}});};this.arY=function(L){if(Hf!==L){Hf=L;this.cg('loadingContent');}};this.ayl=function(){return Hf;};this.axx=function(){var dr=iw();var cn=[];if(dr){cn=qC(dr);}var ahD=new IPCC.Web.UI.ImGearPageCollection();var h=0;for(h=0;h<cn.length;h++){ahD.alz(aJ[cn[h]].eD);}return ahD;};this.aty=function(ae){if(aJ[ae]){return aJ[ae].bN;}};this.zz=function(){return wo;};this.Gl=function(L){wo=L;};this.jS=function(){return kC;};this.wR=function(L){kC=L;};this.Na=function(aO,xk,xs){var J=this;if(aO.ki()>0||aO.jE()>0){xk(aO.ki(),aO.jE());return;}aO.requestPageAttributes(function(aZ,dk){if(aJ[aO.get_pageNumber()].afz()===true){var hI=aZ/aO.aiX();if(hI!==1){var am=J.gC(aO);if(am){ajQ(am,hI);}}}aJ[aO.get_pageNumber()].Yh(false);xk(aZ,dk);},function(fj){xs(fj);});};this.aDB=function(){if(sD===true){return;}sD=true;this.fe(kT,'pccHidden');yQ(dm,true);nq(dm,true);};this.awF=function(){if(sD===false){return;}sD=false;this.hL(kT,'pccHidden');};this.ayC=function(){return sD;};this.hL=function(cz,sh){var FJ=new RegExp('(?:^|\\s)'+sh+'(?!\\S)','g');if(cz.className.match(FJ)===null){cz.className=cz.className+' '+sh;}};this.fe=function(cz,sh){var FJ=new RegExp('(?:^|\\s)'+sh+'(?!\\S)','g');cz.className=cz.className.replace(FJ,'');};this.axe=function(){return mt;};this.apg=function(L){mt=L;};this.asR=function(){return iE;};this.arb=function(L){if(iE===L){return;}var T,ct,ve;if(iE){T=iE.get_mark();ve=dm[T.get_markID()];ct=mt(T,{isSelected:true},(ve)?ve.ct:undefined);if(ve){Gw(T,dm,ct);}}T=ct=ve=undefined;iE=L;if(iE){T=iE.get_mark();ve=dm[T.get_markID()];ct=mt(T,{isSelected:true},(ve)?ve.ct:undefined);if(ve){Gw(T,dm,ct);}}nq(dm,true);};this.aCt=function(Ss){var jp=xD();IPCC.F.forEach(Ss,function(LD){var ck=dm[LD];if(ck){var kB=mt(ck.T,{isSelected:(ck.T.get_conversation()===iE)},ck.ct);if(!IPCC.F.vU(kB)){throw new Error(kB+' is not a valid HTMLElement');}if(kB!==ck.ct){Gw(ck.T,dm,kB);}}});nq(dm,false,jp);};this.initialize=function(){var cu=this.nk();var h;for(h=cu.childNodes.length-1;h>=0;h--){if(cu.childNodes[h].tagName!=='INPUT'){cu.removeChild(cu.childNodes[h]);}}this.Ax.add_documentAdded(aBl);this.Ax.add_pageAdded(UZ);this.Ax.add_pageRemoved(Vr);this.adB(true);cu.aQ=this;anm();var Ww='webkit moz o'.split(' '),Eq='';if(bP.style.animationName!==undefined){KB='animationend';BA='transitionend';return;}for(h=0;h<Ww.length;h++){if(bP.style[Ww[h]+'Animation']!==undefined){Eq=Ww[h];KB=Eq+'AnimationEnd';BA=Eq+'TransitionEnd';break;}}};this.ayr=function(){return nQ;};this.adB=function(L){nQ=L;this.cg('enabled');};this.aCe=function(){if(di+1<aJ.length){J.qD(di+1);}};this.aCc=function(){var Tc=di-1;if(Tc<0){Tc=0;}J.qD(Tc);};function BG(V){IPCC.Web.UI.as.removeHandler(V.target,KB,BG);IPCC.Web.UI.as.removeHandler(V.target,BA,BG);if(HT>di){J.fe(V.target,'pccNextPageIn');J.fe(V.target,'pccPreviousPageIn');J.fe(V.target,'pccCurrentPage');J.fe(V.target,'pccPageBack');J.fe(V.target,'pccPageForward');J.hL(V.target,'pccNextPage');}else if(HT<di){J.fe(V.target,'pccNextPageIn');J.fe(V.target,'pccPreviousPageIn');J.fe(V.target,'pccCurrentPage');J.fe(V.target,'pccPageBack');J.fe(V.target,'pccPageForward');J.hL(V.target,'pccPreviousPage');}J.fe(bP,'pccPageListContainerPageChanging');aG.style.overflow='auto';lx=null;bP.style.overflow='hidden';var lp=IPCC.F.filter(dm,function(bx){return bx.ak===di+1;});NC(lp);setTimeout(function(){pl();},60);};this.qD=function aGL(ae){var Jy=di;var lp;if(dh===IPCC.ViewMode.SinglePage){lp=IPCC.F.filter(dm,function(bx){return bx.ak!==ae+1;});Kq(lp);}else{uE=true;var aaa=ajt(ae);if(eZ===IPCC.PageLayout.VerticalScrollDirection){aG.scrollTop=aaa;}else{aG.scrollLeft=aaa;}}var zD=[];if(di!==ae){di=ae;var bG=aJ[di];var V=new IPCC.PageEventArgs();V.imGearPage=J.get_currentPage();V.pageIndex=di;V.pageNodeID=bG.bN;J.ay('currentPageChanged',V);if(dh===IPCC.ViewMode.SinglePage){var gZ=document.getElementById(aJ[di].bN);var qq=document.getElementById(aJ[Jy].bN);if(gZ===null){gZ=Ku(aJ[di].eD);zD.push(aJ[di]);gZ.className='pccPageListItem pccCurrentPage';su.push(di);if(hm>0){var kJ=WL(aJ[di]);gZ.style.width=kJ.aZ+'px';gZ.style.height=kJ.dk+'px';}else{gZ.style.width=bP.clientWidth-eL-gp+'px';gZ.style.height=bP.clientWidth*0.8+'px';}gZ.style.display='block';gZ.setAttribute('id',aJ[di].bN);bP.appendChild(gZ);}if(BA.length>0){aG.style.overflow='hidden';bP.style.width=gZ.style.width;bP.style.height=gZ.style.height;bP.style.overflow='visible';if(lx!==null){IPCC.Web.UI.as.removeHandler(lx,KB,BG);IPCC.Web.UI.as.removeHandler(lx,BA,BG);if(HT>di){this.fe(lx,'pccNextPageIn');this.fe(lx,'pccPreviousPageIn');this.fe(lx,'pccCurrentPage');this.fe(lx,'pccPageForward');this.fe(lx,'pccPageBack');this.hL(lx,'pccNextPage');}else if(HT<di){this.fe(lx,'pccNextPageIn');this.fe(lx,'pccPreviousPageIn');this.fe(lx,'pccCurrentPage');this.fe(lx,'pccPageForward');this.fe(lx,'pccPageBack');this.hL(lx,'pccPreviousPage');}}IPCC.Web.UI.as.addHandler(qq,KB,BG);IPCC.Web.UI.as.addHandler(qq,BA,BG);lx=qq;HT=Jy;this.hL(bP,'pccPageListContainerPageChanging');if(di>Jy){this.hL(qq,'pccPageForward');this.fe(gZ,'pccPageBack');this.fe(gZ,'pccPreviousPage');this.fe(gZ,'pccPreviousPageIn');this.fe(gZ,'pccNextPage');this.hL(gZ,'pccCurrentPage');this.hL(gZ,'pccNextPageIn');}else{this.hL(qq,'pccPageBack');this.fe(gZ,'pccPageForward');this.fe(gZ,'pccPreviousPage');this.fe(gZ,'pccNextPage');this.fe(gZ,'pccNextPageIn');this.hL(gZ,'pccCurrentPage');this.hL(gZ,'pccPreviousPageIn');}}else{bP.style.width=gZ.style.width;bP.style.height=gZ.style.height;if(di>Jy){this.fe(qq,'pccNextPage');this.fe(qq,'pccCurrentPage');this.hL(qq,'pccPreviousPage');}else{this.fe(qq,'pccPreviousPage');this.fe(qq,'pccCurrentPage');this.hL(qq,'pccNextPage');}this.fe(gZ,'pccPreviousPage');this.fe(gZ,'pccNextPage');this.hL(gZ,'pccCurrentPage');lp=IPCC.F.filter(dm,function(el){return el.ak===ae+1;});NC(lp);setTimeout(function(){pl();},60);}IPCC.F.forEach(zD,agv);}}};this.aBC=function(){if(aJ.length>0){J.qD(0);}};this.aCK=function(){if(di<aJ.length-1){J.qD(aJ.length-1);}};this.aCr=function(cl){if(sD===false){return "CommentsPanelClosed";}var eu=dm[cl.get_mark().get_markID()];if(!eu){return "ConversationDivDoesNotExist";}if(dh===IPCC.ViewMode.SinglePage&&eu.ak-1!==di){return "SinglePageModePageNotShown";}var aO=document.getElementById(aJ[eu.ak-1].bN);if(aJ[eu.ak-1].gv===false||aO===undefined||aO.aQ===undefined||aO.aQ===null||aO.aQ.fH()===false){return "PageOutOfView";}var H=cl.get_mark().get_boundingRectangle();var pR=aO.aQ.transformPagePointToWindow(new IPCC.Web.UI.Point(H.x,H.y),true);var BN=aO.aQ.transformPagePointToWindow(new IPCC.Web.UI.Point(H.x+H.width,H.y),true);pR.x=bP.offsetWidth;BN.x=bP.offsetWidth+uN();J.abi(aO.offsetTop,aO.offsetLeft,pR,BN);return "Success";};this.aBJ=function(ae,H){if(dh===IPCC.ViewMode.SinglePage&&ae!==di){return true;}var aO=document.getElementById(aJ[ae].bN);if(aJ[ae].gv===false||aO===undefined||aO.aQ===undefined||aO.aQ===null||aO.aQ.fH()===false){return false;}var pR=aO.aQ.transformPagePointToWindow(new IPCC.Web.UI.Point(H.x,H.y),true);var BN=aO.aQ.transformPagePointToWindow(new IPCC.Web.UI.Point(H.x+H.width,H.y+H.height),true);J.abi(aO.offsetTop,aO.offsetLeft,pR,BN);return true;};this.aBY=function(aqf,aoB){aG.scrollTop+=Math.round(aoB);aG.scrollLeft+=Math.round(aqf);};this.abi=function(aFa,aFm,pR,BN){var ahM=BN.x-pR.x;var aig=BN.y-pR.y;var bY=new IPCC.Web.UI.Point(0,0);if(ahM>aG.clientWidth){bY.x=pR.x;}else{bY.x=pR.x+(ahM/2);}if(aig>aG.clientHeight){bY.y=pR.y;}else{bY.y=pR.y+(aig/2);}if(eZ===IPCC.PageLayout.VerticalScrollDirection){aG.scrollTop=aFa+bY.y-aG.clientHeight/2;aG.scrollLeft=bY.x-aG.clientWidth/2;}else{aG.scrollLeft=aFm+bY.x-aG.clientWidth/2;aG.scrollTop=bY.y-aG.clientHeight/2;}};this.aww=function(){var h=0;for(h=0;h<aJ.length;h++){BP(h,true);}};this.awK=function(){var dr=iw();var cn=[];if(dr){cn=qC(dr);}var h=0;for(h=0;h<cn.length;h++){BP(cn[h]);}if(J.Ax.get_length()>0){J.Ax.removeAllDocuments();}};this.Xu=function(ae,ad,dq,dB){if(aJ[ae]&&aJ[ae].gv===true){var bJ=document.getElementById(aJ[ae].bN);if(bJ&&bJ.aQ&&bJ.aQ.fH()===true){if(dB){IPCC.bO.dB(dB,"selectText");var ho=bJ.aQ.Cj();var aDu=ho.lz;var aDv=ho.cE;ho.lz=dB;ho.cE=dB;bJ.aQ.showTextSelection(ad,dq);ho.lz=aDu;ho.cE=aDv;}else{bJ.aQ.showTextSelection(ad,dq);}}}};this.axh=function(){var dr=iw();var cn=[];if(dr){cn=qC(dr);}var h;for(h=0;h<cn.length;h++){if(aJ[cn[h]].gv===true){var fL=document.getElementById(aJ[cn[h]].bN),aQ=fL?fL.aQ:undefined;if(aQ&&aQ.fH()===true){aQ.showEmptyTextSelection(0);aQ.extendTextSelection(undefined);aQ.display();}}}};this.ayU=function(ae){if(aJ[ae]&&aJ[ae].gv===true){var fL=document.getElementById(aJ[ae].bN),aQ=fL?fL.aQ:undefined;if(aQ&&aQ.fH()===true){aQ.showEmptyTextSelection(0);aQ.extendTextSelection(undefined);aQ.display();}}};this.ug=function(){var aO,cD,aQ;aY=null;IPCC.F.forEach(OS,function(h){aO=aJ[h];cD=document.getElementById(aO.bN);if(cD){aQ=cD.aQ;}if(aQ){if(aQ.fH()&&aQ.Ei()){aQ.showEmptyTextSelection(0);aQ.extendTextSelection(undefined);if(aO.gv){aQ.display();}}}aO=cD=aQ=undefined;});};this.vQ=function(ae,tg){var bJ;var aw;var acM=function(avJ,aCZ){return(avJ+aCZ)%360;};aJ[ae].fQ=acM(aJ[ae].fQ,tg);if(aJ[ae].bN){bJ=document.getElementById(aJ[ae].bN);}if(bJ===undefined||bJ===null){return;}aw=bJ.aQ;if(aw&&aw.fH()===false){aJ[ae].Do=acM(aJ[ae].Do,tg);return;}uE=true;if(aw&&aw.fH()===true){aw.rotate(tg);}var aS=0;var aq=0;var fo=hm;var ft=jy;if(iY(qS)===true){fo=jy;ft=hm;}if(iY(aJ[ae].fQ)===true){if(aw&&aw.fH()===true){aS=aw.get_pageHeight();aq=aw.get_pageWidth();}else{aS=jy;aq=hm;}}else{if(aw&&aw.fH()===true){aS=aw.get_pageWidth();aq=aw.get_pageHeight();}else{aS=hm;aq=jy;}}uE=true;if(dh===IPCC.ViewMode.SinglePage){bJ.style.width=aS*dA*cv/aJ[ae].gi+'px';bJ.style.height=aq*dA*cv/aJ[ae].ge+'px';if(ae===di){bP.style.width=aS*dA*cv/aJ[ae].gi+'px';bP.style.height=aq*dA*cv/aJ[ae].ge+'px';}}else if(dh===IPCC.ViewMode.Document){bJ.style.width=aS*dA*cv/aJ[ae].gi+'px';bJ.style.height=aq*dA*cv/aJ[ae].ge+'px';var h=0;if(eZ===IPCC.PageLayout.VerticalScrollDirection){if(aS*dA*cv/aJ[ae].gi>fT){fT=aS*dA*cv/aJ[ae].gi;}else if(bJ.clientHeight>=fT-10){fT=0;for(h=0;h<aJ.length;h++){bJ=document.getElementById(aJ[h].bN);if(bJ&&bJ.clientWidth>fT){fT=bJ.clientWidth;}}}if(aq*dA*cv/aJ[ae].ge>fO){fO=aq*dA*cv/aJ[ae].ge;}}else{if(aq*dA*cv/aJ[ae].ge>fO){fO=aq*dA*cv/aJ[ae].ge;}else if(bJ.clientWidth>=fO-10){fO=0;for(h=0;h<aJ.length;h++){bJ=document.getElementById(aJ[h].bN);if(bJ&&bJ.clientHeight>fO){fO=bJ.clientHeight;}}}if(aS*dA*cv/aJ[ae].gi>fT){fT=aS*dA*cv/aJ[ae].gi;}}}else{var hw;if(eZ===IPCC.PageLayout.VerticalScrollDirection){hw=fo/aS*dA*cv/aJ[ae].ge;if(aw&&aw.fH()===true){aw.zoom(hw);}uE=true;bJ.style.width=fo*dA*cv/aJ[ae].gi+'px';bJ.style.height=hw*aq+'px';}else{hw=ft/aq*dA*cv/aJ[ae].ge;if(aw&&aw.fH()===true){aw.zoom(hw);}uE=true;bJ.style.height=ft*dA*cv/aJ[ae].ge+'px';bJ.style.width=hw*aS+'px';}if(fo*dA*cv/aJ[ae].gi>fT){fT=fo*dA*cv/aJ[ae].gi;}if(ft*dA*cv/aJ[ae].ge>fO){fO=ft*dA*cv/aJ[ae].ge;}}if(aw&&aw.fH()===true){uE=true;this.wZ(bJ,ae);setTimeout(function(){if(sD===false){return;}var jp=xD();var lp=IPCC.F.filter(dm,function(el){return ae===el.ak-1;});yQ(lp);nq(lp,true,jp);},0);}};this.aBm=function(tg){var uQ=di;this.vQ(di,tg);if(dh!==IPCC.ViewMode.SinglePage){var J=this;setTimeout(function(){J.qD(uQ);},10);}};this.adx=function(tg){var uQ=di;var dr=iw();if(dh!==IPCC.ViewMode.SinglePage){this.qD(uQ);}var hk=0;var hv=aJ.length-1;var h;for(h=hk;h<=hv;h++){this.vQ(h,tg);}if(dh!==IPCC.ViewMode.SinglePage){var J=this;setTimeout(function(){aaV(dr);J.qD(uQ);},10);}};function adj(zm,nx){var nr=0;var rm=0;var Dn=false;uE=true;var dr=iw();if(dr){IPCC.F.forEach(dr.Fq,function(bH){var ht=eZ===IPCC.PageLayout.VerticalScrollDirection?bH.dk+fp:bH.aZ+eL+gp;var azH=zm.Fq[bH.aU];if(azH.vX){Dn=true;return;}if(nx&&bH.aU>=nx.jZ&&bH.aU<=nx.hW){var bJ=document.getElementById(aJ[bH.aU].bN);if(bJ){return;}}if(Dn){rm+=ht;}else{nr+=ht;}});}return{rm:rm,nr:nr};};function aaV(zm){if(dh===IPCC.ViewMode.SinglePage){return;}var nx=OD(zm);var rY=adj(zm,nx);if(eZ===IPCC.PageLayout.VerticalScrollDirection){bP.style.paddingTop=rY.nr+'px';bP.style.paddingBottom=rY.rm+'px';}else{bP.style.paddingLeft=rY.nr+'px';bP.style.paddingRight=rY.rm+'px';}};function azR(zm){if(dh===IPCC.ViewMode.SinglePage){return;}var LL;var nx;if(eZ===IPCC.PageLayout.VerticalScrollDirection){LL=parseInt(window.getComputedStyle(bP,null).getPropertyValue('padding-top'),10);}else{LL=parseInt(window.getComputedStyle(bP,null).getPropertyValue('padding-left'),10);}nx=OD(zm);var rY=adj(zm,nx);if(eZ===IPCC.PageLayout.VerticalScrollDirection){bP.style.paddingTop=rY.nr+'px';bP.style.paddingBottom=rY.rm+'px';aG.scrollTop=aG.scrollTop+rY.nr-LL;}else{bP.style.paddingLeft=rY.nr+'px';bP.style.paddingRight=rY.rm+'px';aG.scrollLeft=aG.scrollLeft+rY.nr-LL;}};this.Nl=function(ae){IPCC.bO.kb(ae,'pageIndex',0,aJ.length-1);var aO=aJ[ae];if(aO&&aO.bN&&(aO.CV===true||aO.yj===false)){var bA;var bJ=document.getElementById(aO.bN);if(bJ.aQ){bJ.aQ.dispose();}aby(bJ);bA=new IPCC.Web.UI.PageView(bJ,false,aG);if(bA){bA.set_autoUpdate(false);bA.vS(bJ);bA.initialize();bA.set_imageHandlerUrl(aO.bi.ta);bA.set_requireRequestsOptimize(wo);if(kC!==undefined){bA.set_serviceResponseTimeout(kC);}bA.set_scrollBars(IPCC.Web.UI.ScrollBars.None);bA.OM(aV===IPCC.Web.UI.MouseTool.HandPan||aV===IPCC.Web.UI.MouseTool.EditMarks);WI(bA,aO);abt(bA);WM(bA);WD(bA);UQ(bA);}bA.set_textRequired(sX);bA.set_markHandleMode(rU);bA.set_debug(_debug);bA.set_gamma(qv);bA.set_sharpening(rk);bA.set_svgLineWidthMultiplier(kh);bA.set_debugErrorLevel(oy);bA.oR(J.iP());if(rE){bA.set_resourcePath(rE);}if(iJ){bA.Fe(iJ());}else{bA.set_mouseTool(IPCC.Web.UI.MouseTool.None);}bA.qa(J.mr());aO.CV=false;aO.Ak=false;var xg={encodedDocumentIdentifier:aO.bi.get_encodedDocumentIdentifier(),pageNumber:ae,artServiceOption:0,documentArtPage:aO.fu,viewRotationDegreesClockwise:aO.fQ};if(aO.am){xg.artPage=aO.am;}if(aO.fu){xg.documentArtPage=aO.fu;}bA.openPage(xg);aO.yj=true;ll++;}};function WX(eK,eV){if(hm<=0){return;}var fo=hm;var ft=jy;var fK=cv/aJ[0].gi;if(iY(qS)===true){fo=jy;ft=hm;fK=cv/aJ[0].ge;}var kn=1;if(eZ===IPCC.PageLayout.VerticalScrollDirection){kn=(aG.clientWidth-uN()-(eL+gp+np+pp))/(fo*fK);}else{kn=(aG.clientHeight-(fp+iW+pg+pd))/(ft*fK);}var uH;if(dA<=kn){uH=false;}else if(dA>kn){uH=true;}if(isNaN(kn)||kn<=0||Math.abs(kn)===Infinity){return;}dA=kn;fT=0;fO=0;var hk=0;var hv=aJ.length-1;var aC=0;var aw;for(aC=hk;aC<=hv;aC++,aw=undefined){var bJ=document.getElementById(aJ[aC].bN);if(bJ){aw=bJ.aQ;}if(aw===undefined){continue;}var aS=fo;var aq=ft;if(aJ[aC].kp()>0){if(iY(aJ[aC].fQ)===true){aS=aJ[aC].qB();aq=aJ[aC].kp();}else{aS=aJ[aC].kp();aq=aJ[aC].qB();}}var hw=1;if(eZ===IPCC.PageLayout.VerticalScrollDirection){hw=fo/aS*dA*fK;bJ.style.width=fo*dA*fK+'px';bJ.style.height=aq*hw+'px';if(fo*dA*fK>fT){fT=fo*dA*fK;}if(aq*hw*cv/aJ[aC].ge>fO){fO=aq*hw*fK;}}else{hw=ft/aq*dA;bJ.style.height=ft*dA*fK+'px';bJ.style.width=aS*hw*fK+'px';if(aS*dA*cv/aJ[aC].gi>fT){fT=aS*dA*fK;}if(ft*hw*fK>fO){fO=ft*hw*fK;}}if(aw&&aJ[aC].gv===true&&aw.fH()===true){aw.zoom(hw);}if(aw&&aJ[aC].gv===true&&aw.fH()===true){aw.display();}aw=undefined;}iw();pl();setTimeout(function(){yQ(dm);nq(dm);},0);J.ay('scaleChanged',{scaleType:(uH)?"scaledDown":"scaledUp",scaleTrigger:eK,fitType:eV,scaleFactor:dA});};function iY(ea){switch(ea){case 90:case 270:case-90:case-270:return true;default:return false;}};function gk(pI){var vN=document.createElement('div');var h;for(h in pI){if(pI.hasOwnProperty(h)){vN.style[h]=pI[h];}}return vN;};this.awu=function(){if(Gm===undefined||Gm===null){Gm=1;}var dJ=this.nk().id.toString()+'_'+Gm.toString();Gm++;return dJ;};this.WQ=function(){return this.Ax;};this.gC=function(asr){for(var pG=0;pG<aJ.length;pG++){var aqr=aJ[pG];if(asr===aqr.eD){return aJ[pG].am;}}return null;};this.aHq=function(iy){var bJ=document.getElementById(aJ[iy.get_pageNumber()].bN);if(bJ){return bJ.aQ.mp();}return null;};function aBl(bu,V){Sz(V);};function Sz(ah){var gA=ah.imGearDocument;var avq=J.awu();gA.Rd=avq;var cQ=gA.get_pages();var ci=cQ.get_length();if(ci>0){var Ro=document.createDocumentFragment();for(var aC=0;aC<ci;aC++){var aO=cQ.getPage(aC);if(!aO.bi){aO.bi=gA;}Ku(aO,aO.get_pageNumber()===0?null:Ro);}bP.appendChild(Ro);}};var awC=IPCC.F.agm(function(){if(GZ.length>0&&nQ){var cK;var Hy;var Hq=0;IPCC.F.forEach(GZ,ahT);var abE=iw();if(!abE){return;}var kJ=abE.Fq;IPCC.F.forEach(GZ,function(aO,aU){cK=aO.nT();Hy=kJ[cK];if(eZ===IPCC.PageLayout.VerticalScrollDirection){Hq+=Hy.dk+fp;}else{Hq+=Hy.aZ+eL;}});if(Hq&&dh!==IPCC.ViewMode.SinglePage){if(eZ===IPCC.PageLayout.VerticalScrollDirection){bP.style.paddingBottom=Hq+'px';}else{bP.style.paddingRight=Hq+'px';}}yQ(dm,true);nq(dm,true);if(J.Ax.NY(0).fG===aJ.length){J.ay('allPagesAdded');}pl();}GZ=[];},10);function UZ(bu,V){if(V.imGearPage.get_pageNumber()===0){Ku(V.imGearPage);return;}GZ.push(V.imGearPage);awC();};function Vr(bu,V){var cK=V.imGearPage.get_pageNumber();var XU=V.imGearPage.bi.get_documentIdentifier();for(var aC=0;aC<aJ.length;aC++){if(aJ[aC].eD.get_pageNumber()===cK&&aJ[aC].eD.bi.get_documentIdentifier()===XU){var bJ=document.getElementById(aJ[aC].bN);if(bJ){bP.removeChild(bJ);if(bJ.aQ){bJ.aQ.dispose();var lp=IPCC.F.filter(dm,function(el){return el.ak===aJ[aC].cK+1;});Kq(lp);}}aJ.splice(aC,1);}}};function ahT(iy){if(!IPCC.F.contains(aJ,iy)){var bG=new IPCC.bG({page:iy});if(qS){bG.fQ=qS;}if(!bG.bi){bG.bi=iy.bi;}aJ.push(bG);IPCC.Pagecounter++;aJ=aJ.sort(function(cW,eS){return cW.cK-eS.cK;});aoT(iy);apq(iy);amL(iy);bG.avg=false;bG.Ak=false;aoM(bG);ars(bG);VB(bG);anE(bG);anO(bG);aol(bG);anI(bG);aoe(bG);apY(bG);atc(bG);return bG;}};function Ku(aO,Ro){var Mh=aO.get_pageNumber();var cu=J.nk();var gA=null;var XO;var ci=J.get_documents().get_length();for(var bz=0;bz<ci;bz++){gA=J.get_documents().getDocument(bz);if(gA!==null){XO=gA.Rd;if(XO===aO.bi.Rd){break;}}}var gj=IPCC.F.find(aJ,function(bG){return bG.eD&&bG.eD===aO;});if(!gj){gj=ahT(aO);}gj.JD=true;var aef=gj.bN;if(gj.Fa===1){return document.getElementById(aef);}gj.Fa=1;if(bP===''){anm();}var mk=(function(){var bw;if(dh!==IPCC.ViewMode.SinglePage){bw=gk({overflow:'hidden',position:'relative'});}else{bw=gk({overflow:'hidden',position:'absolute',margin:'0px'});if(gj.cK>di){J.hL(bw,'pccNextPage');}else if(gj.cK<di){J.hL(bw,'pccPreviousPage');}else{J.hL(bw,'pccCurrentPage');}}su.push(aO.cK);J.hL(bw,'pccPageListItem');aby(bw);var Eu=WL(gj);bw.style.width=Eu.aZ+'px';bw.style.height=Eu.dk+'px';var dr=iw();var Ot;if(eZ===IPCC.PageLayout.VerticalScrollDirection||dh===IPCC.ViewMode.SinglePage){bw.style.display='block';if(hm>0){bw.style.margin=fp+'px auto '+iW+'px auto';}if(dr.dM.length>0&&dh!==IPCC.ViewMode.SinglePage){Ot=dr.dM[0];if(Mh<Ot.aU){var axn=IPCC.F.QV(bP,'padding-top');var axB=IPCC.F.RQ(axn);var Vt=axB-Eu.dk-fp;if(Vt<0){Vt=0;}bP.style.paddingTop=Vt+'px';}else{var axk=IPCC.F.QV(bP,'padding-bottom');var ayv=IPCC.F.RQ(axk);var VV=ayv-Eu.dk-fp;if(VV<0){VV=0;}bP.style.paddingBottom=VV+'px';}}}else{bw.style.display='inline-block';if(hm>0){bw.style.margin=fp+'px '+eL+'px '+iW+'px '+gp+'px';}if(dr.dM.length>0&&dh!==IPCC.ViewMode.SinglePage){Ot=dr.dM[0];if(Mh<Ot.aU){var axK=IPCC.F.QV(bP,'padding-left');var avu=IPCC.F.RQ(axK);var VR=avu-Eu.aZ-eL;if(VR<0){VR=0;}bP.style.paddingLeft=VR+'px';}else{var axl=IPCC.F.QV(bP,'padding-right');var ayj=IPCC.F.RQ(axl);var VU=ayj-Eu.aZ-eL;if(VU<0){VU=0;}bP.style.paddingRight=VU+'px';}}}bw.setAttribute('id',aef);return bw;}());gj.eD=gj.eD||aO;gj.ajB=gj.ajB||XO;gj.fQ=gj.fQ!==undefined?gj.fQ:qS;gj.gv=false;function arh(fL){var Xf=fL.childNodes;var avh=IPCC.F.find(aJ,function(bG){if(bG.cK<=Mh){return;}var iK=IPCC.F.find(Xf,function(iK){return iK.id&&iK.id===bG.bN;});if(!iK){return;}if(bG.cK>Mh){iK.parentElement.insertBefore(mk,iK);return true;}});if(!avh){fL.appendChild(mk);}}(function aGk(){if(aJ.length===1){bP.appendChild(mk);}else{return arh(Ro||bP);}}());var asv=false;if(mk&&cu.clientWidth>0){var awq=cu.clientWidth/(mk.clientWidth+(mk.clientLeft*2));var aBA=cu.clientHeight/(mk.clientHeight+(mk.clientTop*2));if(aJ.length<(awq*aBA)){asv=true;}}if(aJ.length<2){var bA=new IPCC.Web.UI.PageView(mk,false,aG);if(bA){bA.set_autoUpdate(false);bA.vS(mk);bA.initialize();bA.set_imageHandlerUrl(aO.bi.ta);bA.set_imGearPage(gj.eD);bA.set_artPage(gj.am);bA.set_documentArtPage(gj.fu);bA.set_requireRequestsOptimize(wo);if(kC!==undefined){bA.set_serviceResponseTimeout(kC);}bA.set_scrollBars(IPCC.Web.UI.ScrollBars.None);bA.set_textRequired(sX);bA.set_markHandleMode(rU);bA.set_debug(_debug);bA.set_gamma(qv);bA.set_sharpening(rk);bA.set_svgLineWidthMultiplier(kh);bA.set_debugErrorLevel(oy);bA.oR(J.iP());if(rE){bA.set_resourcePath(rE);}if(iJ){bA.Fe(iJ());}else{bA.set_mouseTool(IPCC.Web.UI.MouseTool.None);}bA.qa(J.mr());bA.OM(aV===IPCC.Web.UI.MouseTool.HandPan||aV===IPCC.Web.UI.MouseTool.EditMarks);}WI(bA,gj);WM(bA);WD(bA);abt(bA);UQ(bA);bA.openPage({encodedDocumentIdentifier:aO.bi.get_encodedDocumentIdentifier(),pageNumber:aO.get_pageNumber(),artServiceOption:0,imGearPage:gj.eD,artPage:gj.am,documentArtPage:gj.fu,viewRotationDegreesClockwise:gj.fQ});gj.yj=true;ll++;}return mk;};function aar(bG){return bG.JD;};function pl(){if(ll>0||nQ===false||lx!==null){return;}if(zo){return;}var dr=iw();if(!dr){return;}aJ.forEach(function(aO,aU){if(!aO.gv){return;}J.GW(aU);});var zD=apa(dr);IPCC.F.forEach(zD||[],function(aU){var aO=aJ[aU];if(aO){agv(aO);}});IPCC.F.forEach(dr.dM,function(Hy){var bG=aJ[Hy.aU];if(aar(bG)&& !bG.gv&&bG.Fa){MC(bG);}});var nx=OD(dr);for(var aU=nx.jZ;aU<=nx.hW;aU++){var bG=aJ[aU];if(!aar(bG)){bG.JD=true;var XK=J.WQ();var gA=XK.NY(0);var iy=gA.cQ.jF(aU);Ku(iy);amO(bG,false);}}apl();};function apa(dr){var atB=qC(dr);var zD=[];IPCC.F.forEach(atB,function(aU){var aO=aJ[aU];if(aO&&aO.Fa===0){var XK=J.WQ();var gA=XK.NY(0);var iy=gA.cQ.jF(aU);Ku(iy);zD.push(aU);}});return zD;};function apl(){var wf=aG.scrollTop;var vp=aG.scrollLeft;var uq=aG.clientHeight;var tC=aG.clientWidth;var wz=aG.scrollWidth;var wW=aG.scrollHeight;var dr=Xv({wf:wf,vp:vp,uq:uq,tC:tC,wz:wz,wW:wW});var nx=OD(dr);var agx=aoq(dr);var nr=0;var rm=0;var Dn=false;IPCC.F.forEach(dr.Fq,function(bH){var ht=eZ===IPCC.PageLayout.VerticalScrollDirection?bH.dk+fp:bH.aZ+eL+gp;var aU= +bH.aU;if(bH.vX||(dh===IPCC.ViewMode.SinglePage&&aU===di)){Dn=true;return;}if(aU>=nx.jZ&&aU<=nx.hW){if(aU>=agx.jZ&&aU<=agx.hW){return;}if(Dn){if(BP(aU,true)> -1){rm+=ht;}}else{if(BP(aU,true)> -1){nr+=ht;}}return;}if(Dn){rm+=ht;BP(aU);}else{nr+=ht;BP(aU);}});if(dh===IPCC.ViewMode.SinglePage){return;}if(eZ===IPCC.PageLayout.VerticalScrollDirection){bP.style.paddingTop=nr+'px';bP.style.paddingBottom=rm+'px';}else{bP.style.paddingLeft=nr+'px';bP.style.paddingRight=rm+'px';}};function BP(aC,aEE){var aO=aJ[aC];if(!aO){return-1;}var cK=aO.cK;if(aEE===true&& !aO.gv){return-1;}aO.Ak=false;aO.yj=false;aO.gv=false;aO.Fa=0;aO.JD=false;if(Ql&& !aO.eD.cd().ayM()&&Pf!==true){aO.eD.aif();}var AI=document.getElementById(aO.bN);if(!AI){return-1;}if(AI.aQ){AI.aQ.dispose();var lp=IPCC.F.filter(dm,function(el){return el.ak===cK+1;});Kq(lp);AI.parentElement.removeChild(AI);return aC;}else{AI.parentElement.removeChild(AI);}return-1;};function MC(bG){var bw=document.getElementById(bG.bN);J.wZ(bw,bG.cK);};function agv(bG){amO(bG,true);MC(bG);};function amO(aO,aDg){var bw=document.getElementById(aO.bN);if(bw===null){return;}var bA=new IPCC.Web.UI.PageView(bw,false,aG);bA.set_autoUpdate(false);bA.vS(document.getElementById(aO.bN));bA.initialize();bA.set_imageHandlerUrl(aO.bi.ta);bA.set_imGearPage(aO.eD);bA.set_artPage(aO.am);bA.set_requireRequestsOptimize(wo);if(kC!==undefined){bA.set_serviceResponseTimeout(kC);}bA.set_scrollBars(IPCC.Web.UI.ScrollBars.None);bA.set_textRequired(sX);bA.set_markHandleMode(rU);bA.set_debug(_debug);bA.set_gamma(qv);bA.set_sharpening(rk);bA.set_svgLineWidthMultiplier(kh);bA.set_debugErrorLevel(oy);bA.oR(J.iP());if(rE){bA.set_resourcePath(rE);}if(iJ){bA.Fe(iJ());}else{bA.set_mouseTool(IPCC.Web.UI.MouseTool.None);}bA.qa(J.mr());bA.OM(aV===IPCC.Web.UI.MouseTool.HandPan||aV===IPCC.Web.UI.MouseTool.EditMarks);WI(bA,aO);WM(bA);WD(bA);abt(bA);UQ(bA);if(aDg===true){bA.add_pageOpened(function aIo(aI){J.wZ(bw,aO.cK);});}if(aO.Ak===false&&aO.eD){aO.JD=true;var xg={encodedDocumentIdentifier:aO.eD.bi.get_encodedDocumentIdentifier(),pageNumber:aO.eD.get_pageNumber(),imGearPage:aO.eD,viewRotationDegreesClockwise:aO.fQ};if(aO.am){xg.artPage=aO.am;}if(aO.fu){xg.documentArtPage=aO.fu;}bA.openPage(xg);aO.yj=true;ll++;}};function ajQ(am,hI){var al;am.forEachMark(function(T){switch(T.get_type()){case IPCC.Web.UI.MarkType.Line:var bo=T.get_points();var bL=bo.zq(0);var lE=bo.zq(1);bo.setPoint(0,new IPCC.Web.UI.Point(bL.x*hI,bL.y*hI));bo.setPoint(1,new IPCC.Web.UI.Point(lE.x*hI,lE.y*hI));break;case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Ellipse:case IPCC.Web.UI.MarkType.Stamp:case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Freehand:case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.SignatureText:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:case IPCC.Web.UI.MarkType.TextSelectionRedaction:al=T.get_rectangle();T.set_rectangle({x:al.x*hI,y:al.y*hI,width:al.width*hI,height:al.height*hI});break;case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.Strikethrough:al=T.get_rectangle();T.set_rectangle({x:al.x*hI,y:al.y*hI,width:al.width*hI,height:al.height*hI});var aA=T.aA,gm;for(var i=0;i<aA.length;i++){gm=aA[i];gm.x=gm.x*hI;gm.y=gm.y*hI;gm.width=gm.width*hI;gm.height=gm.height*hI;}break;default:break;}});};function WI(bA,aO){function aCi(sender,evnt){var acV=function(aZ,dk,ak){var Rc={'width':aZ,'height':dk,'pageNumber':ak};J.ay('pageOpening',Rc);};var cK=evnt.pageNumber;var XU=evnt.documentIdentifier;aO.aS=bA.get_pageWidth();aO.aq=bA.get_pageHeight();var hf=bA.get_pageXResolution();var gn=bA.get_pageYResolution();if(!isNaN(parseFloat(hf))&&isFinite(hf)){aO.gi=hf;}if(!isNaN(parseFloat(gn))&&isFinite(gn)){aO.ge=gn;}bA=null;for(var aC=0;aC<aJ.length;aC++){if(nQ&&aJ[aC].eD.get_pageNumber()===cK&&aJ[aC].eD.bi.get_documentIdentifier()===XU){aJ[aC].yj=false;aJ[aC].Ak=true;aJ[aC].CV=false;if(dh===IPCC.ViewMode.SinglePage){var lD= -1;if(Array.prototype.indexOf){lD=su.indexOf(aC);}else{lD=IPCC.Web.iG(su,aC);}if(lD!== -1){su.splice(lD,1);}}var alW=false;for(var bz=0;bz<OS.length;bz++){if(OS[bz]===aC){alW=true;}}if(alW===false){OS.push(aC);}var kl=0;var kv=0;var bJ=document.getElementById(aJ[aC].bN);var aw=bJ.aQ;var fo;var ft;var XM;if(hm===0&&(aC===0||aJ[0].CV===true)){if(bJ.currentStyle){pg=parseInt(bJ.currentStyle.borderTopWidth,10)||0;fp=parseInt(bJ.currentStyle.marginTop,10)||0;np=parseInt(bJ.currentStyle.borderLeftWidth,10)||0;eL=parseInt(bJ.currentStyle.marginLeft,10)||0;pd=parseInt(bJ.currentStyle.borderBottomWidth,10)||0;iW=parseInt(bJ.currentStyle.marginBottom,10)||0;pp=parseInt(bJ.currentStyle.borderRightWidth,10)||0;gp=parseInt(bJ.currentStyle.marginRight,10)||0;}else if(document.defaultView&&document.defaultView.getComputedStyle){var xQ=document.defaultView.getComputedStyle(bJ);pg=parseInt(xQ.borderTopWidth,10)||0;fp=parseInt(xQ.marginTop,10)||0;np=parseInt(xQ.borderLeftWidth,10)||0;eL=parseInt(xQ.marginLeft,10)||0;pd=parseInt(xQ.borderBottomWidth,10)||0;iW=parseInt(xQ.marginBottom,10)||0;pp=parseInt(xQ.borderRightWidth,10)||0;gp=parseInt(xQ.marginRight,10)||0;}if(dh===IPCC.ViewMode.SinglePage){bJ.style.margin=fp+'px 0px '+iW+'px 0px';bP.style.margin="0px auto";}else{if(eZ===IPCC.PageLayout.VerticalScrollDirection){bJ.style.margin=fp+'px auto '+iW+'px auto';}else{bJ.style.margin=fp+'px '+gp+'px '+iW+'px '+eL+'px';bP.style.margin='0px '+gp+'px 0px '+eL+'px';}}hm=aw.get_pageWidth();jy=aw.get_pageHeight();afY=hf;fo=hm;ft=jy;var fK=cv/aJ[aC].gi;if(iY(aJ[aC].fQ)===true){ft=hm;fo=jy;fK=cv/aJ[aC].ge;}if(dh===IPCC.ViewMode.SinglePage){var ann=(aG.offsetWidth-(eL+gp+np+pp));var aof=(aG.offsetHeight-(fp+iW+pg+pd+azi));oB=ann/(fo*fK);XM=aof/(ft*fK);if(XM<oB){oB=XM;}aw.zoom(oB*fK);}else if(eZ===IPCC.PageLayout.VerticalScrollDirection){oB=(aG.offsetWidth-IPCC.Web.nL()-(eL+gp+np+pp))/(fo*fK);aw.zoom(oB*fK);}else{oB=(aG.offsetHeight-IPCC.Web.nL()-(fp+iW+pg+pd))/(ft*fK);aw.zoom(oB*fK);}kl=fo*oB*fK;kv=ft*oB*fK;bJ.style.width=kl+'px';bJ.style.height=kv+'px';if(dh===IPCC.ViewMode.SinglePage){bP.style.width=kl+'px';bP.style.height=kv+'px';}if(dh!==IPCC.ViewMode.SinglePage){for(var pG=0;pG<aJ.length;pG++){if(aJ[pG].gv===false&&pG!==aC){if(aJ[pG].bN){bJ=document.getElementById(aJ[pG].bN);bJ.style.width=fo*oB+'px';bJ.style.height=ft*oB+'px';if(eZ===IPCC.PageLayout.VerticalScrollDirection){bJ.style.margin=fp+'px auto '+iW+'px auto';}else{bJ.style.margin=fp+'px '+gp+'px '+iW+'px '+eL+'px';}}}}}dA=oB;acV(aO.aS,aO.aq,cK+1);bJ.aQ.display();}else{if(dh===IPCC.ViewMode.Document||dh===IPCC.ViewMode.SinglePage){if(iY(aJ[aC].fQ)===true){kl=aw.get_pageHeight()*dA*cv/aJ[aC].gi;kv=aw.get_pageWidth()*dA*cv/aJ[aC].ge;}else{kl=aw.get_pageWidth()*dA*cv/aJ[aC].gi;kv=aw.get_pageHeight()*dA*cv/aJ[aC].ge;}}else{var hw;var aS=aw.get_pageWidth();var aq=aw.get_pageHeight();fo=hm;ft=jy;if(iY(qS)===true){fo=jy;ft=hm;}if(iY(aJ[aC].fQ)===true){aS=aw.get_pageHeight();aq=aw.get_pageWidth();}if(eZ===IPCC.PageLayout.VerticalScrollDirection){hw=fo/aS*dA*cv/aJ[0].ge;kl=fo*dA*cv/aJ[0].gi;kv=aq*hw;}else{hw=ft/aq*dA*cv/aJ[0].gi;kv=ft*dA*cv/aJ[0].ge;kl=aS*hw;}}if(kl!==Math.round(kl)){kl=Math.floor(kl*100)/100;}if(kv!==Math.round(kv)){kv=Math.floor(kv*100)/100;}if(bJ.style.width!==kl+'px'||bJ.style.height!==kv+'px'){if(eZ===IPCC.PageLayout.VerticalScrollDirection){bJ.style.width=kl+'px';bJ.style.height=kv+'px';}else{bJ.style.width=kl+'px';bJ.style.height=kv+'px';}yQ(dm,true);nq(dm,true);}acV(aO.aS,aO.aq,cK+1);}if(kl>fT){fT=kl;if(eZ===IPCC.PageLayout.VerticalScrollDirection){aG.scrollLeft=(fT-aG.clientWidth)/2;}}if(kv>fO){fO=kv;if(eZ===IPCC.PageLayout.HorizontalScrollDirection){aG.scrollTop=(fO-aG.clientHeight)/2;}}if(aJ[aC].Do>0){var YM=document.getElementById(aJ[aC].bN).aQ;if(YM){YM.rotate(aJ[aC].Do);YM.display();aJ[aC].Do=0;}}if(ll>0){ll=ll-1;}if(aJ[aC].afz()===true){var iy=aJ[aC].eD;var hI=aJ[aC].kp()/iy.aiX();if(hI!==1){var am=J.gC(iy);if(am){ajQ(am,hI);}}}aJ[aC].Yh(false);iw();var Ih=new IPCC.OpenPageEventArgs();Ih.pageIndex=evnt.pageNumber;Ih.imGearPage=evnt.imGearPage;Ih.viewRotationDegreesClockwise=evnt.viewRotationDegreesClockwise;Ih.pageNodeID=aJ[aC].bN;J.ay('pageOpened',Ih);break;}}if(ll===0&&mg===null&&lx===null){setTimeout(function(){pl();},60);}};bA.add_pageOpened(aCi);};function WM(bA){function aBu(bu,aE){if(nQ===false){return;}var vI;if(aE.pageNumber>=0){if(aJ[aE.pageNumber].bN){vI=aJ[aE.pageNumber].bN;}}aJ[aE.pageNumber].CV=true;aJ[aE.pageNumber].yj=false;aJ[aE.pageNumber].Ak=false;aJ[aE.pageNumber].gv=false;var nt=new IPCC.ExceptionEventArgs();nt.exception=aE.exception;nt.pageIndex=aE.pageNumber;nt.pageNodeID=vI;J.ay('pageOpenFailed',nt);if(ll>0){ll=ll-1;if(ll===0){setTimeout(function(){pl();},60);}}};bA.add_pageOpenFailed(aBu);};function WD(bA){function aCp(bu,aE){if(nQ===false){return;}var V=new IPCC.PageEventArgs();V.pageIndex=aE.ak;V.imGearPage=aJ[aE.ak].eD;V.pageNodeID=aJ[aE.ak].bN;aJ[aE.ak].gv=true;if(dh===IPCC.ViewMode.SinglePage){var lD= -1;if(Array.prototype.indexOf){lD=su.indexOf(aE.ak);}else{lD=IPCC.Web.iG(su,aE.ak);}if(lD!== -1){su.splice(lD,1);}}J.ay('pageDisplayed',V);setTimeout(function(){var lp=IPCC.F.filter(dm,function(el){if(dh===IPCC.ViewMode.SinglePage){return aE.ak===el.ak-1&&el.ak-1===di;}else{return aE.ak===el.ak-1;}});yQ(lp);nq(lp);},0);};bA.add_pageDisplayed(aCp);};function apq(aO){function Jc(bu,aE){if(nQ===false){return;}J.ay('textPageReady',{pageIndex:aE.pageNumber,containsText:aE.containsText});var dr=iw();var cn=[];if(dr){cn=qC(dr);}if(aE.containsText===true&&aE.pageNumber>=cn[0]&&aE.pageNumber<=cn[cn.length-1]){if(aJ[aE.pageNumber].am&&aJ[aE.pageNumber].am.get_markCount()>0){var bJ=document.getElementById(aJ[aE.pageNumber].bN);J.wZ(bJ,aE.pageNumber);}}};aO.AO(Jc);};function amL(aO){function aCz(bu,aE){if(nQ===false){return;}var fu=aJ[aE.pageNumber].fu;aO.ait().IH().jL(function(jz){var T=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.DocumentHyperlink),al=jz.cN();T.set_rectangle(new IPCC.Web.UI.Rectangle(al.x,al.y,al.width,al.height));T.set_href(jz.ahN());T.set_lineColor(jz.ayo());T.set_lineWidth(jz.axF());T.set_borderPattern(jz.aym());T.set_borderType(jz.ayx());T.set_borderHorizontalRadius(jz.axS());T.set_borderVerticalRadius(jz.axE());T.set_borderOpacity(jz.axO());fu.addMark(T);jz.arN(T);});J.ay('hyperlinkPageReady',{pageIndex:aE.pageNumber});var dr=iw();var cn=[];if(dr){cn=qC(dr);}if(aE.pageNumber>=cn[0]&&aE.pageNumber<=cn[cn.length-1]){var bJ=document.getElementById(aJ[aE.pageNumber].bN);J.wZ(bJ,aE.pageNumber);}};aO.Ud(aCz);};function aoT(aO){function JE(bu,aE){if(nQ===false){return;}var vI;if(aE.pageNumber>=0){if(aJ[aE.pageNumber].bN){vI=aJ[aE.pageNumber].bN;}}J.ay('textExtractionFailed',{'exception':aE.exception,'pageIndex':aE.pageNumber,'pageNodeID':vI});};aO.Ac(JE);};function abt(bA){function aBZ(bu,aE){if(nQ===false){return;}var vI;if(isNaN(aE.pageNumber)===false){if(aE.pageNumber>=0){if(aJ[aE.pageNumber].bN){vI=aJ[aE.pageNumber].bN;}}aJ[aE.pageNumber].CV=true;aJ[aE.pageNumber].yj=false;aJ[aE.pageNumber].Ak=false;aJ[aE.pageNumber].gv=false;}var nt=new IPCC.ExceptionEventArgs();nt.functionName=aE.function_name;nt.exception=aE.exception;nt.pageIndex=aE.pageNumber;nt.pageNodeID=vI;J.ay('exceptionThrown',nt);if(ll>0){ll=ll-1;if(ll===0){setTimeout(function(){pl();},60);}}};bA.add_exceptionThrown(aBZ);};function UQ(bA){function KA(bu,aE){J.ay('markCreating',aE);};bA.add_markCreating(KA);};function aoM(bG){function aeh(){if(nQ===false){return;}var dr=iw();var cn=[];if(dr){cn=qC(dr);}if(bG.cK>=cn[0]&&bG.cK<=cn[cn.length-1]){var bJ=document.getElementById(bG.bN);J.wZ(bJ,bG.cK);}var V=new IPCC.Web.UI.MarkEventArgs();V.pageIndex=bG.cK;J.ay('marksLoaded',V);};bG.am.add_marksLoaded(aeh);};function ars(bG){function ju(bu,aE){var V=new IPCC.Web.UI.MarkEventArgs();V.pageIndex=bG.cK;V.mark=aE.mark;V.zIndex=aE.zIndex;V.clientX=aE.clientX;V.clientY=aE.clientY;J.ay('markAdded',V);};bG.am.add_markAdded(ju);};function VB(bG){var Wk,rf=false,ZR,YT;function ER(C,eu){if(sD===false){return;}var jp=xD();ajH(C,eu,jp);nq(dm,true,jp);};function azA(C,eu){ZR=C;YT=eu;if(rf&& !Wk){Wk=Gn(function(){rf=false;Wk=undefined;if(ZR&&YT){ER(ZR,YT);}else{ER(C,eu);}});}};function oj(bu,aE){if(aE.mark.xj===true){return;}var V=new IPCC.Web.UI.MarkEventArgs();V.pageIndex=bG.cK;V.mark=aE.mark;V.zIndex=aE.zIndex;V.propertyName=aE.propertyName;J.ay('markChanged',V);var eu=dm[aE.mark.get_markID()];if(eu&&(aE.propertyName==='rectangle'||aE.propertyName==='points'||aE.propertyName==='startPoint'||aE.propertyName==='endPoint')){rf=true;azA(aE.mark,eu);}else if(eu&&aE.propertyName==='visible'){var awj=aE.mark.get_visible();var Xl=(function(ck){return IPCC.F.inArray(NV(),ck.ak-1);})(eu);if(awj&&Xl){NC([eu]);nq(dm,true,xD());}else{Kq([eu]);}}};bG.am.add_markChanged(oj);};function anE(bG){function aeo(bu,aE){var V=new IPCC.Web.UI.MarkEventArgs();V.pageIndex=bG.cK;V.mark=aE.mark;V.zIndex=aE.zIndex;V.oldZIndex=aE.oldZIndex;J.ay('markReordered',V);};bG.am.add_markReordered(aeo);};function anO(bG){function Ec(bu,aE){if(aE.mark.xj===true){return;}var V=new IPCC.Web.UI.MarkEventArgs();V.pageIndex=bG.cK;V.mark=aE.mark;V.zIndex=aE.zIndex;J.ay('markSelectionChanged',V);};bG.am.add_markSelectionChanged(Ec);};function anI(bG){function Ed(bu,aE){if(aE.mark){var V=new IPCC.Web.UI.MarkEventArgs();V.pageIndex=bG.cK;V.mark=aE.mark;V.zIndex=aE.zIndex;J.ay('markRemoved',V);var eu=dm[aE.mark.get_markID()];if(eu){if(aE.mark.get_conversation()===iE){iE=null;}eu.ct.parentElement.removeChild(eu.ct);delete dm[aE.mark.get_markID()];nq(dm,true);}}};bG.am.add_markRemoved(Ed);};function aol(bG){function AS(bu,aE){var V=new IPCC.Web.UI.MarkEventArgs();V.pageIndex=bG.cK;V.mark=aE.mark;V.zIndex=aE.zIndex;J.ay('markTextSelectionChanged',V);};bG.am.add_markTextSelectionChanged(AS);};function ajH(C,eu,Md){var bG=aJ[eu.ak-1],aO=document.getElementById(bG.bN),Es=WA(C,bG.cK+1);if(aO.aQ){var bY=aO.aQ.transformPagePointToWindow(new IPCC.Web.UI.Point(Es.x,Es.y),true);var re=(fp*bG.cK);var Js=(aO.offsetTop-re+bY.y)/(Md-(fp*aJ.length));eu.al=Es;eu.SH=Js;}};function Kq(hO,ak){var asU=typeof ak==='undefined';IPCC.F.forEach(hO,function(bx){if(bx&&(asU||bx.pageNumber===ak)){bx.ct.style.display='none';bx.vX=false;}});};function uN(){if(kT.currentStyle&&kT.currentStyle.display==='none'){return 0;}return kT.clientWidth;};function xD(){if(kT.currentStyle&&kT.currentStyle.display==='none'){return 0;}return kT.offsetHeight;};function NC(hO,ak){var anN=typeof ak==='undefined';IPCC.F.forEach(hO,function(el){if(anN||el.pageNumber===ak){el.ct.style.display='';el.vX=true;if(el&&el.T&&el.T.get_visible()===false){el.ct.style.display='none';el.vX=false;}}});};function yQ(hO,Yr){if(sD===false){return;}var RD=(! !Yr)?IPCC.F.filter(dm,function(ck){return IPCC.F.contains(NV(),ck.ak-1);}):hO;var jp=xD();IPCC.F.forEach(RD,function(el){ajH(el.T,el,jp);});};function aDf(a,b){return(a.al.y!==b.al.y)?(a.al.y-b.al.y):(a.al.x!==b.al.x)?(a.al.x-b.al.x):(a.yJ-b.yJ);};function aDY(a,b){return(a.al.x!==b.al.x)?(a.al.x-b.al.x):(a.al.y!==b.al.y)?(b.al.y-a.al.y):(a.yJ-b.yJ);};function aDq(a,b){return(a.al.y!==b.al.y)?(b.al.y-a.al.y):(a.al.x!==b.al.x)?(b.al.x-a.al.x):(a.yJ-b.yJ);};function aEk(a,b){return(a.al.x!==b.al.x)?(b.al.x-a.al.x):(a.al.y!==b.al.y)?(a.al.y-b.al.y):(a.yJ-b.yJ);};function aAl(Sn,jp,Ad){Ad=Ad||0;var _top,akY,GM,VY=(fp*aJ.length),VL=jp-VY;IPCC.F.forEach(Sn,function(ck){GM=(fp*(ck.ak-1));akY=(ck.SH*VL)+GM;_top=Math.max(Ad+5,akY);if(ck.ct.style.top!==_top+'px'){ck.ct.style.top=_top+'px';}Ad=_top+ck.Ym;});};function aAm(Sn,jp){var Ma,_top,Mn,GM,ami,VY=(fp*aJ.length),VL=jp-VY;IPCC.F.forEach(Sn,function(ck){GM=(fp*(ck.ak-1));Mn=(ck.SH*VL)+GM;if(Ma===undefined){Ma=Mn;}if(ck.T.get_conversation()===iE){_top=Mn;ami=_top+ck.Ym;}else{_top=Math.min(Ma-5-ck.Ym,Mn);}if(ck.ct.style.top!==_top+'px'){ck.ct.style.top=_top+'px';}Ma=_top;});return ami;};function nq(hO,Yr,jp){if(sD===false){return;}if(!jp){jp=xD();}var aqu=function(a,b){if(a.ak!==b.ak){return(a.ak-b.ak);}var aO=aJ[a.ak-1],ea=aO.fQ;switch(ea){case 90:return aDY(a,b);case 180:return aDq(a,b);case 270:return aEk(a,b);default:return aDf(a,b);}};var RD=(! !Yr)?IPCC.F.filter(dm,function(ck){return IPCC.F.inArray(NV(),ck.ak-1);}):hO;NC(RD);var arO=IPCC.F.map(RD,function(ck,bf){ck.Ym=ck.ct.offsetHeight;return ck;});var TX=arO.sort(aqu);var PZ=[],WE=[],Xd=false;if(iE){var aCF=dm[iE.get_mark().get_markID()];if(!IPCC.F.inArray(TX,aCF)){Xd=true;}IPCC.F.forEach(TX,function(ck){if(Xd){WE.push(ck);}else if(ck.T.get_conversation()===iE){PZ.unshift(ck);Xd=true;}else{PZ.unshift(ck);}});}else{WE=TX;}var Ad=0;if(PZ.length){Ad=aAm(PZ,jp);}aAl(WE,jp,Ad);};function aDj(hO,C,cK){var ck=hO[C.jP()];ck.ak=cK;ck.T=C;ck.al=WA(C,cK);ck.yJ=C.eh().ov(C);};function Gw(C,hO,kB){var eu=hO[C.get_markID()];if(eu){eu.ct.parentElement.replaceChild(kB,eu.ct);eu.ct=kB;}return eu;};function aqp(C,hO,kB,aAc,aGF,Js,cK){var eu=new avR();eu.ct=kB;dm[C.get_markID()]=eu;aDj(dm,C,cK);eu.SH=Js;aAc.appendChild(kB);return eu;};function WA(C,ak){var al=(C.get_boundingRectangle)?C.get_boundingRectangle():{},ea=aJ[ak-1].fQ;switch(ea){case 90:return{x:al.x,y:al.y+(al.height||0)};case 180:return{x:al.x+(al.width||0),y:al.y+(al.height||0)};case 270:return{x:al.x+(al.width||0),y:al.y};default:return{x:al.x,y:al.y};}};function aoe(bG){function Qc(bu,aE){var V=new IPCC.Web.UI.CommentEventArgs();V.pageIndex=bG.cK;V.mark=aE.mark;V.index=aE.index;V.comment=aE.comment;var aO=document.getElementById(bG.bN);J.ay('commentAdding',V);setTimeout(function(){var Md=xD(),eu,ct;if(aE.index===0){ct=mt(aE.mark,{isSelected:false},null);if(!ct){return;}else if(!IPCC.F.vU(ct)){throw new Error(ct+' is not a valid HTMLElement');}var Es=WA(aE.mark,bG.cK+1),aFe=Es.x,aEh=Es.y;var bY;if(aO&&aO.aQ){bY=aO.aQ.transformPagePointToWindow(new IPCC.Web.UI.Point(aFe,aEh),true);}else{bY=new IPCC.Web.UI.Point(0,0);}var re=(fp*(bG.cK));var Js=(ajt(bG.cK)-re+bY.y)/(Md-(fp*aJ.length));eu=aqp(aE.mark,dm,ct,kT,bY,Js,bG.cK+1);}else{var JV=aE.mark.get_conversation()===iE;var currentConversationDiv=dm[aE.mark.get_markID()];if(!currentConversationDiv){return;}ct=mt(aE.mark,{isSelected:JV},currentConversationDiv.ct);if(!ct){return;}else if(!IPCC.F.vU(ct)){throw new Error(ct+' is not a valid HTMLElement');}eu=Gw(aE.mark,dm,ct);}if(IPCC.F.contains(NV(),bG.cK)){nq(dm,true,Md);}else{Kq([eu]);}J.ay('commentAdded',V);},0);};bG.am.add_commentAdded(Qc);};function apY(bG){function NG(bu,aE){var ct=null;if(dm[aE.mark.get_markID()]){ct=dm[aE.mark.get_markID()].ct;var JV=aE.mark.get_conversation()===iE;ct=mt(aE.mark,{isSelected:JV},ct);}if(!ct){J.ay('commentChanged',aE);return;}else if(!IPCC.F.vU(ct)){throw new Error(ct+' is not a valid HTMLElement');}if(ct){var jp=xD();Gw(aE.mark,dm,ct);nq(dm,true,jp);}J.ay('commentChanged',aE);};bG.am.add_commentChanged(NG);};function atc(bG){function MZ(bu,aE){var ct=null;if(dm[aE.mark.get_markID()]){ct=dm[aE.mark.get_markID()].ct;}var JV=aE.mark.get_conversation()===iE;ct=mt(aE.mark,{isSelected:JV},ct);if(IPCC.F.vU(ct)){Gw(aE.mark,dm,ct);}else{var eu=dm[aE.mark.get_markID()];if(eu){if(aE.mark.get_conversation()===iE){iE=null;}eu.ct.parentElement.removeChild(eu.ct);delete dm[aE.mark.get_markID()];}}nq(dm,true);J.ay('commentRemoved',aE);};bG.am.add_commentRemoved(MZ);};function Wd(){var dk=jy;var aZ=hm;var aop=function(ip){return{width:ip.width||(ip.right-ip.left),height:ip.height||(ip.bottom-ip.top),top:ip.top,bottom:ip.bottom,left:ip.left,right:ip.right};};var aiM=aop(aG.getBoundingClientRect());var ny={height:aiM.height/2};ny.width=ny.height*aZ/dk;if(ny.width>aZ/2){ny.width=aZ/2;}if(ny.height>dk/2){ny.height=dk/2;}var Zj=8;var ajM={height:dk*Zj,width:aZ*Zj};var arq=aZ*dA<ny.width+5;var asQ=aZ*dA>ajM.width-5;return{min:ny,max:ajM,page:{width:aZ,height:dk},viewport:aiM,atMin:arq,atMax:asQ,maxFactor:Zj,minFactor:ny.width/aZ};};function lf(bK,QB){if(QB){adF.apply(this,arguments);return;}var uH=(bK<dA)?true:false;var or=Wd();if((or.atMin&&uH)||(or.atMax&& !uH)){return;}if(bK>or.maxFactor){bK=or.maxFactor;}else if(bK<or.minFactor){bK=or.minFactor;}if(!or.atMax|| !or.atMin){adF.apply(this,arguments);}};function adF(bK,aEV,bv,cA,Bh,sU,eK,eV){if(isNaN(bK)||bK<=0||Math.abs(bK)===Infinity){return;}var RS=di;var dr=iw();var uH=(bK<dA)?true:false;var hk=0;var hv=aJ.length-1;if(dh===IPCC.ViewMode.SinglePage){if(di-uU>=0){hk=di-uU;}if(di+uU<aJ.length-1){hv=di+uU;}}var Lp=bK/dA;dA=bK;var En=aG.getBoundingClientRect();var agb=(sU&&sU.x!==undefined)?sU.x:aG.scrollLeft+(En.width/2);var alp=(sU&&sU.y!==undefined)?sU.y:aG.scrollTop+(En.height/2);var atU=sU&&sU.x!==undefined&&sU.y!==undefined;fT=0;fO=0;for(var aC=hk;aC<=hv;aC++){var aw;var bJ=document.getElementById(aJ[aC].bN);if(bJ){aw=bJ.aQ;}else{continue;}if(aC===RS){var MB=bJ.getBoundingClientRect();if(!atU){if(eZ===IPCC.PageLayout.HorizontalScrollDirection&&En.height>MB.height){alp-=((En.height-MB.height)/2);}else if(eZ===IPCC.PageLayout.VerticalScrollDirection&&En.width>MB.width){agb-=((En.width-MB.width)/2);}}}var he=bK*cv/aJ[aC].gi;var aS=hm;var aq=jy;var fo=hm;var ft=jy;if(iY(qS)===true){fo=jy;ft=hm;}if(aJ[aC].kp()>0){if(iY(aJ[aC].fQ)===true){aS=aJ[aC].qB();aq=aJ[aC].kp();}else{aS=aJ[aC].kp();aq=aJ[aC].qB();}}else{he=bK*cv/aJ[0].gi;if(iY(aJ[aC].fQ)===true){var Fl=aS;aS=aq;aq=Fl;he=bK*cv/aJ[0].ge;}}var FM,Ju,hw;if(dh===IPCC.ViewMode.SinglePage){Ju=aS*he;FM=aq*he;bJ.style.width=Ju+'px';bJ.style.height=FM+'px';if(aC===di){bP.style.width=Ju+'px';bP.style.height=FM+'px';}if(aw&&aJ[aC].gv===true&&aw.fH()===true){aw.zoom(he);}}else if(dh===IPCC.ViewMode.Document){Ju=aS*he;FM=aq*he;bJ.style.width=Ju+'px';bJ.style.height=FM+'px';if(aw&&aJ[aC].gv===true&&aw.fH()===true){aw.zoom(he);}if(aS*he>fT){fT=aS*he;}if(aq*he>fO){fO=aq*he;}}else{he=bK*cv/aJ[0].gi;if(eZ===IPCC.PageLayout.VerticalScrollDirection){hw=fo/aS*he;bJ.style.width=fo*he+'px';bJ.style.height=aq*hw+'px';if(fo*he>fT){fT=fo*he;}if(aq*he>fO){fO=aq*he;}}else{hw=ft/aq*he;bJ.style.height=ft*he+'px';bJ.style.width=aS*hw+'px';if(aS*he>fT){fT=aS*he;}if(ft*he>fO){fO=ft*he;}}if(aw&&aJ[aC].gv===true&&aw.fH()===true){aw.zoom(hw);}}if(aw&&aJ[aC].gv===true&&aw.fH()===true){aw.display();if(IPCC.F.tX.AT){var aEI=aG.style.display;aG.style.display='none';aG.style.display=aEI;apA();}}}if(eZ===IPCC.PageLayout.VerticalScrollDirection){Lb=aG.scrollTop;}else{Lb=aG.scrollLeft;}var Pu,PD,Lf=0,Ld=0;if(Bh){Pu=Bh.offsetLeft+Lp*bv;PD=Bh.offsetTop+Lp*cA;aG.scrollLeft=Pu-(aG.clientWidth/2)+Lf;aG.scrollTop=PD-(aG.clientHeight/2)+Ld;azR(dr);}else{if(eZ===IPCC.PageLayout.VerticalScrollDirection){Ld=fp*(RS+1);}else{Lf=gp+((eL+gp)*(RS+1));}Pu=Lp*(agb-Lf);PD=Lp*(alp-Ld);aaV(dr);aG.scrollLeft=Pu-(aG.clientWidth/2)+Lf;aG.scrollTop=PD-(aG.clientHeight/2)+Ld;}if(dh!==IPCC.ViewMode.SinglePage&&(eK===IPCC.ScaleTrigger.Pinch||uH===true)){pl();}nq(dm,true);J.ay('scaleChanged',{scaleType:(uH)?"scaledDown":"scaledUp",scaleTrigger:eK,fitType:eV,scaleFactor:dA});};function apA(){var dummy=document.createElement('div');setTimeout(function(){aG.appendChild(dummy);aG.removeChild(dummy);},0);};function acC(bV,eB,fk,ei){var gY=bV.igElements;ei=ei||Tl(bV);if(ei&&(ei.right-ei.left)>0&&(ei.bottom-ei.top)>0){return new IPCC.Web.UI.Point(eB+ei.left+gY.nd.scrollLeft,fk+ei.top+gY.nd.scrollTop);}else{return;}};function Tl(bV){var gY=bV.igElements;var ei=null;if(!bV|| !gY|| !gY.oa){return null;}if(gY.oa.getBoundingClientRect){try{ei=gY.oa.getBoundingClientRect();}catch(bU){return;}}else{var fL=gY.oa;var vh=document.documentElement;ei={left:vh.clientLeft-vh.scrollLeft,top:vh.clientTop-vh.scrollTop};fL=fL.offsetParent;while(fL){ei.top+=fL.offsetTop-fL.scrollTop;ei.left+=fL.offsetLeft-fL.scrollLeft;fL=fL.offsetParent;}}return ei;};function anm(){var cu=J.nk();var LW=cu.id;var vJ;var vK;var mi;var WH;var Xp;var aX=false;var bV;var oK=[];var ud= -1;var gr=0;var ot;var DY;var xC;var lh=0;var bX=0;var sZ=null;var uW=null;if(bP===''){aG=gk({width:'100%',height:'100%',position:'relative',margin:'0px',overflow:'auto',textAlign:'center'});aG.className='pccPageListContainerWrapper';aG.tabIndex=2;var Ve=function(eB,fk){return IPCC.F.getPageFromPoint(eB,fk,aG)||false;};var Xo=function(bV,eB,fk){var gY=bV.igElements;var ei=Tl(bV);if(ei&&(ei.right-ei.left)>0&&(ei.bottom-ei.top)>0){return new IPCC.Web.UI.Point(eB-ei.left-gY.nd.scrollLeft,fk-ei.top-gY.nd.scrollTop);}else{return;}};var anZ=function(qi){qi.Fe([new IPCC.lY(IPCC.Web.UI.MarkType.Text)]);};var ape=function(qi){qi.set_mouseTool(IPCC.Web.UI.MouseTool.None);};var NQ=false,atI="";var akm=function aIi(bU,jv,aO){if(jv.match(/edit/)){NQ=true;return;}anZ(aO.aQ);NQ=true;atI=jv;aO.aQ.JQ("touchstart",bU);};var ajR=function(aO){NQ=false;ape(aO.aQ);};var UJ=function(bU){if(bU.target&&bU.target.attributes&&bU.target.getAttribute('data-pcc-mark')){return bU.target;}else if(bU.target.parentElement&&bU.target.parentElement.attributes&&bU.target.parentElement.getAttribute('data-pcc-mark')){return bU.target.parentElement;}else if(bU.target.parentNode&&bU.target.parentNode.attributes&&bU.target.parentNode.getAttribute('data-pcc-mark')){return bU.target.parentNode;}else{return undefined;}};var Wc=function(bU){var cz=UJ(bU);if(cz){return cz.getAttribute('data-pcc-mark');}return undefined;};var aeD=function(qi){if(qi&&qi.eh()){qi.eh().Fp(function(T){T.set_selected(false);});qi.display();}};var PV,WW=false;var Oo=function(bU,V){var mZ={da:undefined,T:undefined,ae:null};var jU=UJ(bU);if(jU){if(typeof bV!=='undefined'&&bV!==false&&bV.aQ&&bV.igElements&&bV.aQ.fH()===true){mZ.ae=bV.aQ.nT();}if(jU.ImGearMarkRelation){mZ.da='mark';mZ.T=jU.ImGearMarkRelation.T;mZ.abV=mZ.T.get_selected();return mZ;}else{while(!(jU.ImGearMarkRelation)&&jU.parentNode&&jU!==document.body){jU=jU.parentNode;if(jU.ImGearMarkRelation){mZ.da='mark';mZ.T=jU.ImGearMarkRelation.T;mZ.abV=mZ.T.get_selected();return mZ;}}}}if(typeof bV!=='undefined'&&bV!==false&&bV.aQ&&bV.igElements&&bV.aQ.fH()===true){mZ.ae=bV.aQ.nT();var ae=0;for(ae=0;ae<aJ.length;ae++){if(aJ[ae].bN===bV.id){if(typeof V.targetType==='undefined'||V.targetType===null){mZ.da='page';return mZ;}break;}}}return mZ;};var NS=function(ae,ss,iF,aCu){if(aY===null||aY===undefined){return;}var VW=false;if(ss===undefined){ss=aY.ss;VW=true;}if(iF===undefined){iF=aY.iF;VW=true;}var T;var aO=document.getElementById(aJ[ae].bN);if(aCu===true){T=aY.xK;}else{T=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.HighlightText);T.set_rectangle({x:0,y:0,width:0,height:0});T.cZ=127;T.cE='#3366CC';T.aA=null;aO.aQ.mp().addMark(T);}T.set_selected(true);if(VW===true){if(aY.hk===aY.hv){T.ad=gr;T.db=iF-gr+1;T.kd=true;T.lk=true;aO.aQ.display();}else if(ae===aY.hk){T.ad=gr;T.db=aO.aQ.cd().hB().eF()-1-ss;T.kd=true;T.lk=false;aO.aQ.display();}else if(ae===aY.hv){T.ad=0;T.db=iF+1;T.kd=false;T.lk=true;aO.aQ.display();}else{T.ad=0;T.db=aO.aQ.cd().hB().eF()-1-gr;T.kd=false;T.lk=false;}}else{if(aY.hk===aY.hv){T.kd=true;T.lk=true;}else if(ae===aY.hk){T.kd=true;T.lk=false;}else if(ae===aY.hv){T.kd=false;T.lk=true;}else{T.kd=false;T.lk=false;}}aY.fd[ae]=T;};var ahE=function(cz,bv,cA,Lm){if(cz){var Rn=cz.getBoundingClientRect();bv=IPCC.F.Me(bv,Rn.left+Lm);bv=IPCC.F.Nq(bv,Rn.right-Lm);cA=IPCC.F.Me(cA,Rn.top+Lm);cA=IPCC.F.Nq(cA,Rn.bottom-Lm);}return{x:bv,y:cA};};var jR=function(bU){if(xC){if(xC.clientX===bU.clientX&&xC.clientY===bU.clientY){if(bU.rawEvent.preventDefault){bU.rawEvent.preventDefault();}else if(bU.preventDefault){bU.preventDefault();}if(bU.rawEvent.stopPropagation){bU.rawEvent.stopPropagation();}else if(bU.stopPropagation){bU.stopPropagation();}WW=true;xC=undefined;return false;}}PV=bU;adT(bU,bU.clientX,bU.clientY,bU.button);};var afu=function(bU,V){mi=Oo(bU,V);};var adT=function(bU,eB,fk,om){var V=new IPCC.Web.UI.MouseEventArgs();bV=Ve(eB,fk);afu(bU,V);var jv;var jU=UJ(bU);if(jU){jv=jU.getAttribute('data-pcc-mark');}var Wl=false;var KH=jv&&jv.substring(0,10);if(jv&&KH==='texthandle'){DY=true;Wl=true;KH=jv.substring(10,13);var T=jU.parentNode.ImGearMarkRelation.T;if(aY&&T.aA===null){oK=aY.qN.slice();oK[V.pageIndex]=undefined;}else{aY=null;oK=[];J.ug();}var adU=function(aCf){gr=aY.ss;var h;for(h=aY.hv;h>=aY.hk;h--){var aO=document.getElementById(aJ[h].bN);if(aO.aQ===undefined||aO.aQ===null){continue;}var yA=gr;if(h!==aY.hk){yA=0;}var qK;if(h===aY.hv){qK=aY.iF;}else{qK=aO.aQ.get_textPage().hB().eF()-1;}aCf(aO,yA,qK);if(h!==aY.pm){NS(h);}}sZ=aV;aV=IPCC.Web.UI.MouseTool.SelectText;aX=true;};var h,ae,am,KQ,dS,sN,cC;if(KH==='sta'){if(aY===null||aY===undefined){ae=T.ae;aY={};aY.fd=[];aY.hk=ae;aY.ss=T.ad;gr=T.ad;while(ae<aJ.length){am=aJ[ae].am;KQ=am.get_markCount();for(h=0;h<KQ;h++){dS=am.getMark(h);if(T.bS===dS.bS&&dS.get_type()===T.get_type()){aY.fd[ae]=dS;for(sN=dS.aA.length-1;sN>=0;sN--){if(dS.aA[sN].set_visible){dS.aA[sN].set_visible(false);}else{dS.set_visible(false);break;}}if(ae===T.ae){uW=dS;}else{oK[ae]=cC.substring(dS.ad,dS.db);dS.set_selected(false);}cC=dS.cC.substring(dS.db);if(dS.lk===true){aY.iF=dS.ad+dS.db-1;aY.hv=ae;break;}}}ae++;}}ot=aY.iF+1;lh=aY.hv;var aBW=function(aO,yA,qK){aO.aQ.showEmptyTextSelection(qK+1);aO.aQ.extendTextSelection(undefined);aO.aQ.extendTextSelection(qK);aO.aQ.extendTextSelection(yA);};aY.fd[aY.hk].xj=true;aY.pm=aY.hk;aY.xK=aY.fd[aY.hk];adU(aBW);}else if(KH==='end'){if(aY===null||aY===undefined){ae=T.ae;aY={};aY.fd=[];aY.hv=ae;aY.iF=T.ad+T.db-1;while(ae>=0){am=aJ[ae].am;KQ=am.get_markCount();for(h=0;h<KQ;h++){dS=am.getMark(h);if(T.bS===dS.bS&&dS.get_type()===T.get_type()){aY.fd[ae]=dS;for(sN=dS.aA.length-1;sN>=0;sN--){if(dS.aA[sN].set_visible){dS.aA[sN].set_visible(false);}else{dS.set_visible(false);break;}}if(ae===T.ae){cC=dS.cC;}else{oK[ae]=cC.substring(cC.length-dS.db);dS.set_selected(false);}cC=dS.cC.substring(0,cC.length-dS.db);if(dS.kd===true){aY.ss=dS.ad;gr=dS.ad;aY.hk=ae;uW=dS;break;}}}ae--;}}ot=aY.ss;lh=aY.hk;var aBI=function(aO,yA,qK){aO.aQ.showEmptyTextSelection(yA);aO.aQ.extendTextSelection(undefined);aO.aQ.extendTextSelection(yA);aO.aQ.extendTextSelection(qK);};aY.fd[aY.hv].xj=true;aY.pm=aY.hv;aY.xK=aY.fd[aY.hv];adU(aBI);}if(uW){bV.aQ.display();}}var Ae=bU.target.tagName&&bU.target.tagName.toLowerCase()==='textarea';if(Ae){return;}var zx=bU.target.tagName&&bU.target.tagName.toLowerCase()==='input'&&bU.target.type&&bU.target.type.toLowerCase()==='text';if(zx){return;}if(aV===IPCC.Web.UI.MouseTool.HandPan&&zl&&jv&&Wl===false){if(!mi||mi.T.get_interactionMode()!==IPCC.Web.UI.MarkInteractionMode.SelectionDisabled){akm(bU,jv,bV);return;}}var cO;var et;if(bV!==false&&bV.aQ&&bV.igElements&&bV.aQ.fH()===true){var af=0;for(af=0;af<aJ.length;af++){if(aJ[af].bN===bV.id){V.pageIndex=af;break;}}V.pointLiesWithinImage=true;et=Xo(bV,eB,fk);if(et){cO=bV.aQ.RE(et,false);V.imagePoint=cO;V.constrainedImagePoint=cO;}else{V.pointLiesWithinImage=false;}}else{V.pointLiesWithinImage=false;}V.domEvent=bU;V.windowPoint=new IPCC.Web.UI.Point(eB,fk);if(Wl===true){ud= -1;bX=V.pageIndex;bU.preventDefault();J.ay('mouseDown',V);return;}switch(aV){case IPCC.Web.UI.MouseTool.None:bU.preventDefault();break;case IPCC.Web.UI.MouseTool.HandPan:bU.preventDefault();vJ=fk;vK=eB;WH=aG.scrollTop;Xp=aG.scrollLeft;aX=true;J.Ao(bP,'grabbing');if(bV&&bV.aQ){J.Ao(bV,'grabbing');bV.aQ.set_cursor('grabbing');bV.aQ.display();}break;case IPCC.Web.UI.MouseTool.SelectText:case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:bU.preventDefault();if(om===0&&bV&&bV.aQ&&cO){J.ug();oK=[];ud= -1;DY=undefined;var cU=bV.aQ.transformPagePointToTextIndex(cO);gr=cU;ot=cU;aX=true;if(cU===undefined){J.ay('mouseDown',V);return;}bV.aQ.showEmptyTextSelection(cU);bV.aQ.extendTextSelection(undefined);bV.aQ.extendTextSelection(cU);bV.aQ.display();lh=V.pageIndex;bX=V.pageIndex;}break;case IPCC.Web.UI.MouseTool.Magnifier:bU.preventDefault();if(om===0&&bV&&bV.aQ&&et){var kj=IPCC.aP.fw(IPCC.aP.None);bP.style.cursor=kj;bV.aQ.showMagnifier(et);bV.aQ.display();}aX=true;break;case IPCC.Web.UI.MouseTool.RectangleZoom:bU.preventDefault();if(om===0&&bV&&bV.aQ&&cO){aX=true;vJ=et.y;vK=et.x;bV.aQ.showEmptySelection(cO);bV.aQ.display();}break;}J.ay('mouseDown',V);};var jQ=function(bU){afj(bU,bU.clientX,bU.clientY,bU.button);};var aet=function(V,eB,fk,dv){V.windowPoint=new IPCC.Web.UI.Point(eB,fk);dv=Ve(eB,fk);var cO,et;if(dv!==false&&dv.aQ&&dv.igElements&&dv.aQ.fH()===true){V.pointLiesWithinImage=true;et=Xo(dv,eB,fk);if(et){cO=dv.aQ.RE(et,false);V.imagePoint=cO;V.constrainedImagePoint=cO;}else{V.pointLiesWithinImage=false;}}else{V.pointLiesWithinImage=false;}return{V:V,eB:eB,fk:fk,dv:dv,cO:cO,et:et};};var afj=function(bU,eB,fk,om){var Ae=bU.target.tagName&&bU.target.tagName.toLowerCase()==='textarea';if(Ae){return;}var zx=bU.target.tagName&&bU.target.tagName.toLowerCase()==='input'&&bU.target.type&&bU.target.type.toLowerCase()==='text';if(zx){return;}var V=new IPCC.Web.UI.MouseEventArgs();var cO,et,dv;var HU=function(eB,fk){var oX=aet(V,eB,fk,dv);V=oX.V;V.domEvent=bU;eB=oX.eB;fk=oX.fk;dv=oX.dv;cO=oX.cO;et=oX.et;};HU(eB,fk);var jU=Oo(bU,V);if(jU&&jU.T){V.mark=jU.T;}var kj;switch(aV){case IPCC.Web.UI.MouseTool.None:bU.preventDefault();break;case IPCC.Web.UI.MouseTool.HandPan:bU.preventDefault();if(aX){var ayD=fk;var axp=eB;var aAC=vJ-ayD;var azN=vK-axp;aG.scrollTop=WH+aAC;aG.scrollLeft=Xp+azN;}break;case IPCC.Web.UI.MouseTool.SelectText:case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:bU.preventDefault();if(aX){if(om!==0){EY();}var gU;if(!dv){J.ay('mouseMove',V);return;}if(gr===undefined){bV=dv;}else if(dv!==bV&&dv.aQ&&et){ud= -1;var jm=0;var h=0;for(h=0;h<aJ.length;h++){if(aJ[h].bN===dv.id){jm=h;break;}}if(jm>bX){if(jm>lh){gU=bV.aQ.get_textPage().hB().eF()-1;if(gU<0){EY();J.ay('mouseMove',V);return;}bV.aQ.extendTextSelection(gU);if(aY){gU=bV.aQ.get_textPage().hB().eF()-1;aY.fd[bX].set_startIndex(bV.aQ.Nh());aY.fd[bX].set_textLength(bV.aQ.Cd());aY.hv=jm;gr=bV.aQ.Nh();}oK[bX]=bV.aQ.getSelectedText();dv.aQ.showEmptyTextSelection(0);dv.aQ.extendTextSelection(undefined);ud=0;bV.aQ.display();bV=dv;}else{gr=0;oK[bX]=undefined;oK[jm]=undefined;bV.aQ.showEmptyTextSelection(0);bV.aQ.extendTextSelection(undefined);if(aY&&aY.fd[bX]){aY.fd[bX].kd=false;}bV.aQ.display();bV=dv;if(aY&&aY.fd[bX]){aY.fd[bX]=undefined;aY.hk=jm;aY.fd[jm].set_startIndex(0);aY.fd[jm].set_textLength(aY.fd[jm].get_startIndex()+aY.fd[jm].get_textLength());aY.fd[jm].kd=true;bV.aQ.display();}}}else if(jm<bX){if(jm<lh){gU=bV.aQ.get_currentTextIndex();if(gU!==0){bV.aQ.extendTextSelection(0);}if(aY){aY.fd[bX].set_startIndex(bV.aQ.Nh());aY.fd[bX].set_textLength(bV.aQ.Cd());aY.hk=jm;}oK[bX]=bV.aQ.getSelectedText();bV.aQ.display();gU=dv.aQ.cd().hB().eF()-1;ud=gU;gr=0;dv.aQ.showEmptyTextSelection(gU+1);dv.aQ.extendTextSelection(undefined);bV=dv;bV.aQ.display();}else{oK[bX]=undefined;oK[jm]=undefined;bV.aQ.showEmptyTextSelection(0);bV.aQ.extendTextSelection(undefined);if(aY&&aY.fd[bX]){aY.fd[bX].lk=false;}bV.aQ.display();bV=dv;if(aY&&aY.fd[bX]){aY.fd[bX]=undefined;aY.hv=jm;gU=bV.aQ.cd().hB().eF()-1;aY.fd[jm].set_textLength(dv.aQ.Cd());aY.fd[jm].lk=true;bV.aQ.display();}}}bX=jm;}var aAf=(bX<lh),aAS=(bX>lh);if(bV&&bV.aQ&&bV.aQ.fH()===true&&et){et=Xo(bV,eB,fk);cO=bV.aQ.RE(et,false);var cU=bV.aQ.transformPagePointToTextIndex(cO);if(gr===undefined){gr=cU;ot=cU;if(cU===undefined){J.ay('mouseMove',V);return;}bV.aQ.showEmptyTextSelection(cU);bV.aQ.extendTextSelection(undefined);bV.aQ.extendTextSelection(cU);bV.aQ.display();var bz=0;for(bz=0;bz<aJ.length;bz++){if(aJ[bz].bN===bV.id){lh=bz;bX=bz;break;}}}else{if(gr=== +gr&&cU=== +cU){if(aAf){gr=cU;}else if(!aAS){gr=Math.min(ot,cU);}}}gU=bV.aQ.get_currentTextIndex();if(gU===cU||cU===undefined){J.ay('mouseMove',V);return;}if(ud!== -1){if(cU!==ud){bV.aQ.extendTextSelection(ud);}ud= -1;}if((cU>ot&&bX===lh)||bX>lh){if(aY){if(aY.fd[bX]===undefined||aY.fd[bX]===null){NS(bX,0,0,bX===aY.pm);if(bX-1>=0&&aY.fd[bX-1]){aY.fd[bX-1].lk=false;document.getElementById(aJ[bX-1].bN).aQ.display();}}aY.fd[bX].lk=true;}if(DY===undefined){DY=false;}}else if(cU<ot||bX<lh){if(aY){if(aY.fd[bX]===undefined||aY.fd[bX]===null){NS(bX,bV.aQ.cd().hB().eF()-1,0,bX===aY.pm);if(aY.fd[bX+1]){aY.fd[bX+1].kd=false;document.getElementById(aJ[bX+1].bN).aQ.display();}}aY.fd[bX].kd=true;}if(DY===undefined){DY=true;ot++;bV.aQ.showEmptyTextSelection(ot);bV.aQ.extendTextSelection(undefined);var qK=bV.aQ.cd().hB().eF();if(ot>=qK){bV.aQ.extendTextSelection(qK-1);}else{bV.aQ.extendTextSelection(ot);}}}bV.aQ.extendTextSelection(cU);if(aY&&aY.fd[bX]){aY.fd[bX].set_startIndex(bV.aQ.Nh());aY.fd[bX].set_textLength(bV.aQ.Cd());}bV.aQ.display();}}break;case IPCC.Web.UI.MouseTool.Magnifier:bU.preventDefault();if(aX){if(om!==0||(bV&&bV.aQ&&bV!==dv)){bV.aQ.hideMagnifier();kj=IPCC.aP.fw(IPCC.aP.Magnifier);bP.style.cursor=kj;bV.aQ.display();}if(dv&&dv.aQ&&et){bV=dv;kj=IPCC.aP.fw(IPCC.aP.None);bP.style.cursor=kj;dv.aQ.showMagnifier(et);dv.aQ.display();}}break;case IPCC.Web.UI.MouseTool.RectangleZoom:bU.preventDefault();if(aX){var Jo=ahE(bV,eB,fk,1);HU(Jo.x,Jo.y);if(dv&&dv.aQ&&cO&&dv===bV){if(om!==0){dv.aQ.hideSelection();dv.aQ.display();aX=false;}else{dv.aQ.extendSelection(cO);dv.aQ.display();}}}break;}J.ay('mouseMove',V);};var jX=function(bU){if(WW!==true){Vh(bU,bU.clientX,bU.clientY);}else{WW=false;}};var aem=function(bU,V){V.upTargetType=null;var Fr=Oo(bU,V);V.originalEvent=bU.rawEvent;V.clientX=bU.clientX;V.clientY=bU.clientY;V.downTarget={type:undefined,pageIndex:undefined};if(typeof mi!=='undefined'&&typeof mi.da!=='undefined'){V.downTarget.type=mi.da;}if(typeof mi!=='undefined'&&typeof mi.ae!=='undefined'){V.downTarget.pageIndex=mi.ae;}if(typeof mi!=='undefined'&&typeof mi.abV!=='undefined'){V.downTarget.alreadySelected=mi.abV;}V.downMark=(typeof mi!=='undefined')?mi.T:undefined;V.upMark=Fr.T;switch(Fr.da){case 'page':case 'mark':V.upTarget={type:Fr.da,pageIndex:Fr.ae};break;}if(V.pointLiesWithinImage===false&&Fr.da==='page'){Fr.ae= -1;}};var Vh=function(bU,eB,fk){var V=new IPCC.Web.UI.MouseEventArgs();var dv;var cO;var et;var HU=function(eB,fk){var oX=aet(V,eB,fk,dv);V=oX.V;V.domEvent=bU;eB=oX.eB;fk=oX.fk;dv=oX.dv;cO=oX.cO;et=oX.et;};HU(eB,fk);if(bU){aem(bU,V);J.ay('mouseUp',V);}mi=undefined;var kj;switch(aV){case IPCC.Web.UI.MouseTool.None:bU.preventDefault();break;case IPCC.Web.UI.MouseTool.HandPan:bU.preventDefault();if(aX){vK=undefined;vJ=undefined;WH=undefined;Xp=undefined;aX=false;kj='move';J.Ao(bP,'grab');if(bV&&bV.aQ){J.Ao(bV,'grab');bV.aQ.set_cursor('grab');bV.aQ.display();}}break;case IPCC.Web.UI.MouseTool.SelectText:case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:if(bU){bU.preventDefault();}if(aX){var oJ=new IPCC.Web.UI.TextSelectedEventArgs(),kx=[],h,xo,Bv;var iF;var Ha=bV.aQ.getSelectedText();var qN=oK.slice();if(Ha.length>0){qN[bX]=bV.aQ.getSelectedText();}else{if(bX>lh){bX--;bV=document.getElementById(aJ[bX].bN);if(qN[bX]){Ha=qN[bX];}}else if(bX<lh){bX++;bV=document.getElementById(aJ[bX].bN);if(qN[bX]){Ha=qN[bX];}}}oJ.text=qN.join('');var Tp=true;if(bX>=lh){if(bX===lh){if(bV.aQ.get_currentTextIndex()>=ot){Tp=false;}iF=gr+Ha.length-1;}else{iF=Ha.length-1;}if(iF<0){iF=0;}xo=lh;Bv=bX;}else{Tp=false;iF=ot-1;xo=bX;Bv=lh;}for(h=xo;h<=Bv;h++){kx.push(h);}if(oJ.text.length===0){EY();kx=[];}oJ.pageNumbers=kx;oJ.clientX=eB;oJ.clientY=fk;if(gr!==undefined){if(aV===IPCC.Web.UI.MouseTool.SelectText){var auA=function(aO,xJ){var FL=aO.aQ.cd();var hc=FL.hB();var fb=hc.kk(xJ);return fb.tx();};var gU=bV.aQ.get_currentTextIndex();var OE=auA(bV,gU);var eT=0,ef=0;if(Tp===false){eT=OE.width;ef=OE.height;}var BK=bV.aQ.transformPagePointToWindow(new IPCC.Web.UI.Point(OE.x+eT,OE.y+ef),true);var bY=acC(bV,BK.x,BK.y);oJ.handleClientX=bY.x;oJ.handleClientY=bY.y;}var atS=aY===undefined||aY===null;if(uW){oJ.previousFirstMark=uW;oJ.firstMark=aY.fd[xo];if(aY.pm<xo||aY.pm>Bv){var Gc=document.getElementById(aJ[aY.pm].bN);if(Gc.aQ){Gc.aQ.mp().removeMark(aY.xK);}}aY.xK.xj=false;J.ug();if(sZ!==null){aV=sZ;}sZ=null;}else if(atS===true){if(aV===IPCC.Web.UI.MouseTool.SelectText){aY={hk:xo,ss:gr,hv:Bv,iF:iF,qN:qN.slice(),fd:[]};for(h=0;h<kx.length;h++){NS(kx[h]);}}else{J.ug();}}else{if(aY.pm<xo||aY.pm>Bv){var agL=document.getElementById(aJ[aY.pm].bN);if(agL.aQ){agL.aQ.mp().removeMark(aY.xK);}}aY.xK.xj=false;aY.hk=xo;aY.ss=gr;aY.hv=Bv;aY.iF=iF;aY.qN=qN.slice();if(sZ!==null){aV=sZ;}sZ=null;}oJ.mouseTool=aV;oJ.startIndex=gr;J.ay('selectTextMouseToolCompleted',oJ);if(uW){uW=null;aY=null;}}aX=false;}break;case IPCC.Web.UI.MouseTool.Magnifier:bU.preventDefault();if(dv&&dv.aQ){dv.aQ.hideMagnifier();kj=IPCC.aP.fw(IPCC.aP.Magnifier);bP.style.cursor=kj;dv.aQ.display();}aX=false;break;case IPCC.Web.UI.MouseTool.RectangleZoom:bU.preventDefault();var Jo=ahE(bV,eB,fk,1);HU(Jo.x,Jo.y);if(aX&&et){var Bb=0;var DO=0;var Xm=0;var XC=0;if(et.x<vK){Bb=vK-et.x;Xm=et.x+Bb/2;}else{Bb=et.x-vK;Xm=vK+Bb/2;}if(et.y<vJ){DO=vJ-et.y;XC=et.y+DO/2;}else{DO=et.y-vJ;XC=vJ+DO/2;}var aia=aG.clientWidth/Bb;var ajy=aG.clientHeight/DO;var rj=aia;if(aia>ajy){rj=ajy;}if(dv&&dv.aQ){dv.aQ.pn();dv.aQ.display();}aX=false;if(Bb*2+DO*2>25){J.asF(rj,Xm,XC,dv);}}break;}var Ae=false;var zx=false;if(bU){Ae=bU.target.tagName&&bU.target.tagName.toLowerCase()==='textarea';zx=bU.target.tagName&&bU.target.tagName.toLowerCase()==='input'&&bU.target.type&&bU.target.type.toLowerCase()==='text';}if(NQ&& !Ae&& !zx){ajR(bV);}else if(aV===IPCC.Web.UI.MouseTool.HandPan&&PV&& !Ae&& !zx&&bU&&PV.clientX===bU.clientX&&PV.clientY===bU.clientY&&bU.shiftKey!==true&&bU.ctrlKey!==true){aeD(bV.aQ);}};var asa=function(){var kj;switch(aV){case IPCC.Web.UI.MouseTool.None:break;case IPCC.Web.UI.MouseTool.HandPan:J.Ao(bP,'grab');aX=false;break;case IPCC.Web.UI.MouseTool.SelectText:EY();break;case IPCC.Web.UI.MouseTool.Magnifier:if(bV&&bV.aQ){bV.aQ.hideMagnifier();kj=IPCC.aP.fw(IPCC.aP.Magnifier);bP.style.cursor=kj;bV.aQ.display();}aX=false;break;case IPCC.Web.UI.MouseTool.RectangleZoom:if(bV&&bV.aQ){bV.aQ.hideSelection();bV.aQ.display();aX=false;}break;}};var aEA=function(){asa();};var aEt=function(){if(aV===IPCC.Web.UI.MouseTool.Magnifier){if(bV&&bV.aQ){bV.aQ.hideMagnifier();var kj=IPCC.aP.fw(IPCC.aP.Magnifier);bP.style.cursor=kj;bV.aQ.display();}aX=false;}else if(aV===IPCC.Web.UI.MouseTool.RectangleZoom){if(bV&&bV.aQ){bV.aQ.hideSelection();bV.aQ.display();aX=false;}}else if(aV===IPCC.Web.UI.MouseTool.SelectText){EY();}};var ma=function(bU){if(bU.ctrlKey){switch(aV){case IPCC.Web.UI.MouseTool.None:break;case IPCC.Web.UI.MouseTool.SelectText:break;default:break;case IPCC.Web.UI.MouseTool.HandPan:var JK=bU.rawEvent.wheelDelta;bU.preventDefault();if(JK<0){J.zoomOut(1.5);}else{J.zoomIn(1.5);}break;}}else{bU.preventDefault();aG.scrollTop-=bU.rawEvent.wheelDelta*0.72;}if(aV===IPCC.Web.UI.MouseTool.Magnifier){if(bV&&bV.aQ){bV.aQ.hideMagnifier();var kj=IPCC.aP.fw(IPCC.aP.Magnifier);bP.style.cursor=kj;bV.aQ.display();}aX=false;}else if(aV===IPCC.Web.UI.MouseTool.RectangleZoom){if(bV&&bV.aQ){bV.aQ.hideSelection();bV.aQ.display();aX=false;}}else if(aV===IPCC.Web.UI.MouseTool.SelectText){EY();}};var asj=function(aI){var V=new IPCC.Web.UI.MouseEventArgs();V.upTarget={type:'comments',element:aI.target};V.downTarget={type:'comments',element:aI.target};V.originalEvent=aI.rawEvent;V.clientX=aI.clientX;V.clientY=aI.clientY;V.pageIndex=undefined;J.ay('mouseUp',V);};var EY=function(){if(aX===true){if(aY&&aY.pm!==undefined){if(uW){Vh(null,0,0);return;}else{var Gc=document.getElementById(aJ[aY.pm].bN);if(Gc.aQ){Gc.aQ.mp().removeMark(aY.xK);}aY.xK.xj=false;}}J.ug();uW=null;aX=false;if(sZ!==null){aV=sZ;}sZ=null;}};Cg=gk({position:'relative',width:'auto',height:'auto',display:'table',tableLayout:'fixed',borderSpacing:'0px',margin:'0px auto',clear:'both',boxSizing:'border-box'});if(dh===IPCC.ViewMode.SinglePage){bP=gk({position:'relative',whiteSpace:'nowrap',width:'auto',height:'auto',overflow:'hidden'});bP.className='pccPageListContainer pccSinglePageView';}else{bP=gk({position:'relative',whiteSpace:'nowrap',width:'auto',height:'auto',display:'table-cell',verticalAlign:'top'});bP.className='pccPageListContainer';}IPCC.Web.UI.as.addHandler(aG,"mousedown",jR);IPCC.Web.UI.as.addHandler(aG,"mouseup",jX);IPCC.Web.UI.as.addHandler(aG,"mousemove",jQ);IPCC.Web.UI.as.addHandler(aG,"mouseleave",aEA);IPCC.Web.UI.as.addHandler(aG,"mousewheel",ma);IPCC.Web.UI.as.addHandler(aG,"DOMMouseScroll",aEt);aG.onscroll=(! !Gn)?aCL:aCd;bP.setAttribute('id',LW+'_ListContainer');aG.setAttribute('id',LW+'_ListWrapper');aqc=LW+'_ListWrapper';kT=gk();kT.className='pccPageListComments pccHidden';kT.setAttribute('id',LW+'_CommentsPanel');var Uq=[];if(IPCC.F.awk){Uq.push('touchend');}else{Uq.push('click');}IPCC.F.forEach(Uq,function(evName){IPCC.Web.UI.as.addHandler(kT,evName,asj);});Cg.appendChild(bP);Cg.appendChild(kT);aG.appendChild(Cg);cu.appendChild(aG);if(navigator.userAgent.match('MSIE 10')&&document.documentMode===10){var aZ='',dk='',tk='',sl='',pW;var wm=function(){pW=getComputedStyle(cu);tk=pW.getPropertyValue('width');sl=pW.getPropertyValue('height');if(tk!==aZ||sl!==dk){aZ=tk;dk=sl;aG.style.width=aZ;aG.style.height=dk;}};setInterval(wm,1000);window.addEventListener('resize',wm);wm();J.wm=wm;}var asH=IPCC.F.FD;if(document.documentElement.getBoundingClientRect&&Array.prototype.forEach&&asH&&window.addEventListener&&document.querySelector){anR(aG);}var arv=function(bP,aES){var lo;var RU=function(aI){var cY=aI.rawEvent,hj=cY.touches[0]||cY.changedTouches[0];aI.clientX=hj.clientX;aI.clientY=hj.clientY;aI.preventDefault=function(){cY.preventDefault();};aI.stopPropagation=function(){cY.stopPropagation();};return aI;};var DH=function(iV,aI){var V=new IPCC.Web.UI.MouseEventArgs(),DW=(iV==='touchstart')?'mouseDown':(iV==='touchend')?'mouseUp':null;var Cv=(iV==='touchstart')?adT:(iV==='touchmove')?afj:(iV==='touchend')?Vh:null;lo=Ve(aI.clientX,aI.clientY);if(iV==='doubleTap'){lo&&lo.aQ&&lo.aQ.JQ(iV,aI);}var jv;jv=Wc(aI);if(jv){if(jv.substring(0,5)==='texth'){aI.preventDefault();aI.stopPropagation();if(iV==='touchstart'){xC=aI;}Cv&&Cv(aI,aI.clientX,aI.clientY,0);return;}}switch(aV){case IPCC.Web.UI.MouseTool.CreateLineMark:case IPCC.Web.UI.MouseTool.CreatePolylineMark:case IPCC.Web.UI.MouseTool.CreateRectangleMark:case IPCC.Web.UI.MouseTool.CreateRectangleRedactionMark:case IPCC.Web.UI.MouseTool.CreateEllipseMark:case IPCC.Web.UI.MouseTool.CreateTextMark:case IPCC.Web.UI.MouseTool.CreateTextInputSignatureMark:case IPCC.Web.UI.MouseTool.CreateTextAreaSignatureMark:case IPCC.Web.UI.MouseTool.CreateStampMark:case IPCC.Web.UI.MouseTool.CreateFreehandMark:case IPCC.Web.UI.MouseTool.EditMarks:case IPCC.Web.UI.MouseTool.CreateImageStampAnnotationMark:case IPCC.Web.UI.MouseTool.CreateImageStampRedactionMark:lo&&lo.aQ&&lo.aQ.JQ(iV,aI);if(DW==='mouseUp'){aem(aI,V);}else if(DW==='mouseDown'){afu(aI,V);}J.ay(iV,V);break;case IPCC.Web.UI.MouseTool.SelectText:case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:aI.preventDefault();aI.stopPropagation();if(iV==='touchstart'){xC=aI;if(jv){J.ug();break;}}Cv&&Cv(aI,aI.clientX,aI.clientY,0);break;case IPCC.Web.UI.MouseTool.Magnifier:case IPCC.Web.UI.MouseTool.RectangleZoom:aI.preventDefault();aI.stopPropagation();if(iV==='touchstart'){xC=aI;}Cv&&Cv(aI,aI.clientX,aI.clientY,0);break;case IPCC.Web.UI.MouseTool.HandPan:if(jv===undefined){jv=Wc(aI);}var G=Oo(aI,{});if(jv&&zl){if(!G||G.T.get_interactionMode()!==IPCC.Web.UI.MarkInteractionMode.SelectionDisabled){if(iV==='touchstart'){akm(aI,jv,lo);}else if(iV==='touchmove'){lo&&lo.aQ&&lo.aQ.JQ(iV,aI);}else if(iV==='touchend'){lo&&lo.aQ&&lo.aQ.JQ(iV,aI);ajR(lo);}}}break;}};var CK,Bi,vx;var aru=function(aI){if(aI.rawEvent.touches.length>1){clearTimeout(vx);vx=Bi=CK=undefined;return;}aI=RU(aI);CK=aI;if(aV===IPCC.Web.UI.MouseTool.CreatePolylineMark){aI.preventDefault();}Bi=function(){DH('touchstart',aI);vx=Bi=CK=undefined;};vx=setTimeout(function(){Bi();},200);};var Ja,Cs;var asI=function(aI){aI=RU(aI);rf=false;var axy=function(){if(!Cs){return false;}var eA=Cs.clientX-aI.clientX;var ey=Cs.clientY-aI.clientY;var hh=eA*eA+ey*ey;return hh<2500;};var acm=function(){Ja=Cs=undefined;var jv=Wc(aI);if(!jv&&aV===IPCC.Web.UI.MouseTool.HandPan&&zl&&lo){aeD(lo.aQ);}};var aoo=function(){var aab=Bi;if(Ja&&axy()){clearTimeout(Ja);Cs=Ja=undefined;aab();DH('touchend',aI);DH('doubleTap',aI);}else{Ja=setTimeout(function(){aab();DH('touchend',aI);acm();},300);Cs=aI;}};if(CK&&vx){clearTimeout(vx);if(aV===IPCC.Web.UI.MouseTool.CreatePolylineMark){aoo();}else{acm();}vx=Bi=CK=undefined;return;}DH('touchend',aI);};var alE,rf=false;var arw=function(aI){if(aI.rawEvent.touches.length>1){return;}alE=aI;if(CK&&vx){clearTimeout(vx);Bi();}azl();};function azl(){var aI=RU(alE);DH('touchmove',aI);};IPCC.Web.UI.as.addHandler(bP,"touchstart",aru);IPCC.Web.UI.as.addHandler(bP,"touchmove",arw);IPCC.Web.UI.as.addHandler(bP,"touchend",asI);};arv(bP,kT);}};function anR(gq){var amv=function(){},dG=1;function aaU(adq,abx,fY,aFW){gq.style['-ms-transform']=adq;gq.style['-moz-transform']=adq;gq.style['-webkit-transform']=abx;gq.style['transform']=abx;gq.style['-ms-transform-origin']=fY;gq.style['-moz-transform-origin']=fY;gq.style['-webkit-transform-origin']=fY;gq.style['transform-origin']=fY;gq.style.overflow=aFW||'';};function aee(){aaU('scale(1,1) translate(0px,0px)','scale3d(1,1,1) translate3d(0px,0px,0px)','0% 0%','auto');};aee();function aAb(rj,ht,Qg,wd,akR){var eT=(-ht.x/rj)-Qg.x,ef=(-ht.y/rj)-Qg.y,aBx="scale3d("+rj+","+rj+",1) translate3d("+eT+"px,"+ef+"px,0px)",aCO="scale("+rj+", "+rj+") translate("+eT+"px,"+ef+"px)";var aqF=akR.x+'px '+akR.y+'px';aaU(aCO,aBx,aqF,'visible');amv=function(){var bm=gq.getBoundingClientRect();var TJ={x:(gq.clientWidth/2+ -bm.left+wd.left)/rj,y:(gq.clientHeight/2+ -bm.top+wd.top)/rj};if(eZ===IPCC.PageLayout.VerticalScrollDirection&&wd.aji){TJ.x=TJ.x-(wd.aji/2);}aee();J.KJ(rj,TJ,undefined,IPCC.ScaleTrigger.Pinch);zo=false;};return gq;};function aiI(x,y,x0,y0){return Math.sqrt((x-=x0)*x+(y-=y0)*y);};function ajq(x,y,x0,y0){return{x:(x+x0)/2,y:(y+y0)/2};};function anQ(alX,FP){return{x:alX.x-FP.x,y:alX.y-FP.y};};var Sx=false;gq.addEventListener('touchstart',function(ev){if(zo){return;}if(!Sx&&ev.touches.length===2){adv(ev);}});var standardizeMSTouch=function(ev){var event={};event.identifier=ev.pointerId;event.x=event.clientX=ev.clientX;event.y=event.clientY=ev.clientY;event.preventDefault=ev.preventDefault;event.stopPropagation=ev.stopPropagation;event.rawEvent=ev;event.touches=[event];event.changedTouches=[event];return event;};var zE,Zp=false,zO={};PCCViewer.EventEmitter.extend(zO);gq.addEventListener(IPCC.F.od['down'],function(aI){Zp=true;aI=standardizeMSTouch(aI);if(zE){var cY={};cY.touches=[zE,aI];cY.changedTouches=[zE,aI];cY.preventDefault=function(){zE.rawEvent.preventDefault();aI.rawEvent.preventDefault();};cY.stopPropagation=function(){zE.rawEvent.stopPropagation();aI.rawEvent.stopPropagation();};adv(cY);}else{zE=aI;}});gq.addEventListener(IPCC.F.od['move'],function(aI){zO.trigger('touchmove',{rawEvent:aI});});gq.addEventListener(IPCC.F.od['up'],function(aI){zO.trigger('touchend',{rawEvent:aI});zE=undefined;});function adv(ev){zo=true;var Qg={x:gq.scrollLeft,y:gq.scrollTop};var wd=gq.getBoundingClientRect();var or=Wd();var Kf=gq.querySelector('.pccPageListItem');if(eZ===IPCC.PageLayout.VerticalScrollDirection&&Kf.clientWidth<wd.width-30){wd.aji=wd.width-Kf.clientWidth;}var ht={x:0,y:0,set:function(amI){this.x=amI.x;this.y=amI.y;return this;}};var rf=false;Sx=true;ev.preventDefault();ev.stopPropagation();function LZ(hj){hj.x=hj.clientX||hj.pageX||hj.screenX;hj.y=hj.clientY||hj.pageY||hj.screenY;return hj;};var jZ=LZ(ev.touches[0]);var vs=LZ(ev.touches[1]);var xq=aiI(jZ.x,jZ.y,vs.x,vs.y);var akx=ajq(jZ.x,jZ.y,vs.x,vs.y);var zR,Bn;function Ru(aI){aI.preventDefault();[].forEach.call(aI.changedTouches,function(t){if(t.identifier===jZ.identifier){zR=LZ(t);}else if(t.identifier===vs.identifier){Bn=LZ(t);}});if(!zR|| !Bn){return;}var aDy=aiI(zR.x,zR.y,Bn.x,Bn.y);var aCW=ajq(zR.x,zR.y,Bn.x,Bn.y);dG=aDy/xq;if((dA*dG)<or.minFactor){dG=or.minFactor/dA;}else if((dA*dG)>or.maxFactor){dG=or.maxFactor/dA;}ht.set(anQ(akx,aCW));if(!rf){rf=true;ER();}};function Sl(){Sx=false;rf=false;gq.removeEventListener('touchmove',Ru);gq.removeEventListener('touchend',Sl);if(Zp){zO.off('touchmove',ajO);zO.off('touchend',ajW);}if(!zR|| !Bn){zo=false;return;}Gn(amv);};var ajO=function(aI){var aaB=standardizeMSTouch(aI.rawEvent);aaB.preventDefault=function(){};Ru(aaB);};var ajW=function(aI){Sl(standardizeMSTouch(aI.rawEvent));};gq.addEventListener('touchmove',Ru);gq.addEventListener('touchend',Sl);if(Zp){zO.on('touchmove',ajO);zO.on('touchend',ajW);}function ER(){if(rf){Gn(function(){if(!rf){return;}aAb(dG,ht,Qg,wd,akx);ER();});}}}};function aCL(){if(dh===IPCC.ViewMode.SinglePage){return;}if(zo){return;}if(mg){clearTimeout(mg);}if(Tu){ayk(Tu);}aDP();mg=setTimeout(function(){mg=null;Tu=Gn(function aIB(){if(zo){return;}pl();});},40);};function aCd(){if(nQ===false||dh===IPCC.ViewMode.SinglePage){return;}iw(true);if(mg!==null){clearTimeout(mg);}var asS=aG.scrollHeight/aJ.length;var Mp=0;if(eZ===IPCC.PageLayout.VerticalScrollDirection){Mp=aG.scrollTop;}else{Mp=aG.scrollLeft;}var aBo=Mp-Lb;Lb=Mp;var axd=new Date().getTime();var aai=axd-xr;if(aai>1000){aai=1000;}Tq=aBo/asS*1000/aai;mg=setTimeout(function(){mg=null;xr=0;xr=new Date().getTime();pl();},1000);xr=new Date().getTime();if(Tq!==0&&Math.abs(Tq)<Qr){if(Iu&&mg!==null){clearTimeout(mg);mg=null;}xr=0;xr=new Date().getTime();setTimeout(function(){if(Iu&&mg!==null){clearTimeout(mg);mg=null;}xr=0;xr=new Date().getTime();pl();},40);}};function asb(){function xt(avi,awP,bq,cZ){var HA=document.createElementNS('http://www.w3.org/2000/svg','circle');HA.setAttribute('cx',avi);HA.setAttribute('cy',awP);HA.setAttribute('r',bq);HA.setAttribute('opacity',cZ);return HA;};var rd=document.createElementNS('http://www.w3.org/2000/svg','svg');rd.setAttribute('viewBox','0 0 52 52');rd.appendChild(xt(26,13.813,2.813,1));rd.appendChild(xt(24,38.188,2.813,0.4));rd.appendChild(xt(13.813,26,2.813,0.1));rd.appendChild(xt(38.188,26,2.813,0.7));rd.appendChild(xt(34.618,34.618,2.813,0.55));rd.appendChild(xt(17.382,34.618,2.813,0.25));rd.appendChild(xt(34.618,17.382,2.813,0.85));return rd;};function aby(mk){var bz=0;var afE=false;var Lj;var Hc;var rd;for(bz=0;bz<mk.childNodes.length;bz++){if(mk.childNodes[bz].className==="pccPageListItemLoading"){afE=true;}}if(afE===false){Hc=document.createElement('div');Hc.className='pccPageListItemLoading';rd=asb();mk.innerHTML="";mk.appendChild(Hc);Hc.appendChild(rd);if(Hf.length>0){Lj=document.createElement('div');Lj.className='pccPageListItemLoadingContent';Lj.innerHTML=Hf;Hc.appendChild(Lj);}}};function aDP(){var wf=aG.scrollTop;var vp=aG.scrollLeft;var uq=aG.clientHeight;var tC=aG.clientWidth;var wz=aG.scrollWidth;var wW=aG.scrollHeight;var dr=Xv({wf:wf,vp:vp,uq:uq,tC:tC,wz:wz,wW:wW});var h=dr.alu;if(nQ&&uE===false&&di!==h&&h>=0){di=h;var V=new IPCC.PageEventArgs();V.imGearPage=J.get_currentPage();V.pageIndex=di;V.pageNodeID=aJ[di].bN;J.ay('currentPageChanged',V);}};function WL(bG){var aZ=bG.aS||hm;var dk=bG.aq||jy;if(bG.fQ%180){var pQ=aZ;aZ=dk;dk=pQ;}var sG=bG.gi||afY;return{aZ:aZ*(dA*cv/sG),dk:dk*(dA*cv/sG),aFL:sG,aU:bG.cK};};function Xz(aFt){return IPCC.F.reduce(aFt,function(er,bH,aU){er[aU]=WL(bH);return er;},{});};function ajt(ae){var xd,Dj,zF,vE,re;if(eZ===IPCC.PageLayout.VerticalScrollDirection){xd=aG.scrollTop;Dj=aG.scrollHeight;zF=aG.clientHeight;vE='dk';re=fp;}else{xd=aG.scrollLeft;Dj=aG.scrollWidth;zF=aG.clientWidth;vE='aZ';re=eL+gp;}var kJ=Xz(aJ);var EZ=eZ===IPCC.PageLayout.VerticalScrollDirection?fp:eL;var adA=false;IPCC.F.forEach(kJ,function(bH,aU){if(bH.aU===ae){adA=true;}if(adA){return;}EZ+=bH[vE]+re;});return EZ-(re/2);};function qC(dr){var Cy=IPCC.F.map(dr.dM,function(bH){return+bH.aU;}).sort();var jZ=Cy[0];var hW=Cy[Cy.length-1];var fG=aJ.length;for(var h=DG;h;h--){jZ-=1;hW+=1;if(jZ>=0){Cy.unshift(jZ);}if(hW<fG){Cy.push(hW);}}return Cy.sort();};function OD(dr){var jZ=Math.max(dr.dM[0].aU-uU,0);var hW=Math.min(dr.dM[dr.dM.length-1].aU+uU,aJ.length-1);return{jZ:jZ,hW:hW};};function aoq(dr){var jZ=Math.max(dr.dM[0].aU-DG,0);var hW=Math.min(dr.dM[dr.dM.length-1].aU+DG,aJ.length-1);return{jZ:jZ,hW:hW};};function Xv(bg){if(dh===IPCC.ViewMode.SinglePage){return ahK();}var xd,Dj,zF,vE,re;if(eZ===IPCC.PageLayout.VerticalScrollDirection){xd=bg.wf;Dj=bg.wW;zF=bg.uq;vE='dk';re=fp;}else{xd=bg.vp;Dj=bg.wz;zF=bg.tC;vE='aZ';re=eL+gp;}var aos=xd;var anC=xd+zF;var kJ=Xz(aJ);var EZ=eZ===IPCC.PageLayout.VerticalScrollDirection?fp:eL;var aCJ=xd/Dj;var PK=(aCJ*zF)+xd;var UB=Number.MAX_VALUE;var mz= -1;var dM=[];IPCC.F.forEach(kJ,function(bH,aU){var jA=EZ;var ed=jA+bH[vE];if(jA<anC&&ed>aos){bH.vX=true;dM.push(bH);}var aey=Math.min(Math.abs(jA-PK),Math.abs(ed-PK));if(jA<PK&&ed>PK){UB=0;mz=aU;}else if(aey<UB){mz=aU;UB=aey;}EZ+=bH[vE]+re;});if(dM.length===0&&kJ[mz]!==undefined){dM.push(kJ[mz]);}return{dM:dM,alu:Number(mz)||0,Fq:kJ};};function ahK(){var kJ=Xz(aJ);var aow=[di];var dM=IPCC.F.filter(kJ,function(bH){return IPCC.F.contains(aow,+bH.aU);});return{dM:dM,alu:di,Fq:kJ};};function NV(){var dr=iw();if(!dr){return[];}return IPCC.F.map(dr.dM,function(bH){return bH.aU;});};function iw(){if(dh===IPCC.ViewMode.SinglePage){return ahK();}if(aG===''||aG.clientHeight<=0){return;}var wf=aG.scrollTop;var vp=aG.scrollLeft;var uq=aG.clientHeight;var tC=aG.clientWidth;var wz=aG.scrollWidth;var wW=aG.scrollHeight;var api=Xv({wf:wf,vp:vp,uq:uq,tC:tC,wz:wz,wW:wW});uE=false;return api;}};QJ.prototype={dispose:function(){this.bn('dispose',arguments);this.adB(false);this.awK();},disposeDisplayedPages:function(){this.aww();},get_debug:function(){try{var bq=this.Jw();this.dn('get_debug',arguments,bq);return bq;}catch(e){this.ag('get_debug',e);throw e;}},set_debug:function(value){try{this.bn('set_debug',arguments);var Aj=this.Jw();this.XL(value);if(!Aj){this.bn('set_debug',arguments);}}catch(e){this.ag('set_debug',e);throw e;}},get_debugErrorLevel:function(){try{var bq=this.xf();this.dn('get_debugErrorLevel',arguments,bq);return bq;}catch(e){this.ag('get_debugErrorLevel',e);throw e;}},set_debugErrorLevel:function(value){try{this.bn('set_debugErrorLevel',arguments);var Aj=this.xf();this.GV(value);if(Aj<IPCC.Web.UI.DebugErrorLevel.Development){this.bn('set_debugErrorLevel',arguments);}}catch(e){this.ag('set_debugErrorLevel',e);throw e;}},add_mouseDown:function(handler){try{this.PA(handler);}catch(e){this.ag('add_mouseDown',e);throw e;}},remove_mouseDown:function(handler){try{this.Wh(handler);}catch(e){this.ag('remove_mouseDown',e);throw e;}},add_mouseMove:function(handler){try{this.PO(handler);}catch(e){this.ag('add_mouseMove',e);throw e;}},remove_mouseMove:function(handler){try{this.Wm(handler);}catch(e){this.ag('remove_mouseMove',e);throw e;}},add_mouseUp:function(handler){try{this.PH(handler);}catch(e){this.ag('add_mouseUp',e);throw e;}},remove_mouseUp:function(handler){try{this.Xi(handler);}catch(e){this.ag('remove_mouseUp',e);throw e;}},add_selectTextMouseToolCompleted:function(handler){try{this.Sq(handler);}catch(e){this.ag('add_selectTextMouseToolCompleted',e);throw e;}},remove_selectTextMouseToolCompleted:function(handler){try{this.WO(handler);}catch(e){this.ag('remove_selectTextMouseToolCompleted',e);throw e;}},add_currentPageChanged:function(handler){try{this.aGa(handler);}catch(e){this.ag('add_currentPageChanged',e);throw e;}},remove_currentPageChanged:function(handler){try{this.aCv(handler);}catch(e){this.ag('remove_currentPageChanged',e);throw e;}},add_textPageReady:function(handler){try{this.AO(handler);}catch(e){this.ag('add_textPageReady',e);throw e;}},remove_textPageReady:function(handler){try{this.EC(handler);}catch(e){this.ag('remove_textPageReady',e);throw e;}},add_hyperlinkPageReady:function(handler){try{this.Ud(handler);}catch(e){this.ag('add_hyperlinkPageReady',e);throw e;}},remove_hyperlinkPageReady:function(handler){try{this.acL(handler);}catch(e){this.ag('remove_hyperlinkPageReady',e);throw e;}},add_textExtractionFailed:function(handler){this.Ac(handler);},remove_textExtractionFailed:function(handler){this.Dr(handler);},add_allPagesAdded:function(handler){try{this.aEl(handler);}catch(e){this.ag('add_allPagesAdded',e);throw e;}},remove_allPagesAdded:function(handler){try{this.aCR(handler);}catch(e){this.ag('remove_allPagesAdded',e);throw e;}},add_pageOpening:function(handler){try{this.Ue(handler);}catch(e){this.ag('add_pageOpening',e);throw e;}},remove_pageOpening:function(handler){try{this.XE(handler);}catch(e){this.ag('remove_pageOpening',e);throw e;}},add_pageOpened:function(handler){try{this.ST(handler);}catch(e){this.ag('add_pageOpened',e);throw e;}},remove_pageOpened:function(handler){try{this.XH(handler);}catch(e){this.ag('remove_pageOpened',e);throw e;}},add_pageOpenFailed:function(handler){try{this.Gb(handler);}catch(e){this.ag('add_pageOpenFailed',e);throw e;}},remove_pageOpenFailed:function(handler){try{this.HD(handler);}catch(e){this.ag('remove_pageOpenFailed',e);throw e;}},add_pageDisplayed:function(handler){try{this.SZ(handler);}catch(e){this.ag('add_pageDisplayed',e);throw e;}},remove_pageDisplayed:function(handler){try{this.Wp(handler);}catch(e){this.ag('remove_pageDisplayed',e);throw e;}},add_propertyChanged:function(handler){try{this.kf(handler);}catch(e){this.ag('add_propertyChanged',e);throw e;}},remove_propertyChanged:function(handler){try{this.mo(handler);}catch(e){this.ag('remove_propertyChanged',e);throw e;}},add_markAdded:function(handler){try{this.Al(handler);}catch(e){this.ag('add_markAdded',e);throw e;}},remove_markAdded:function(handler){try{this.zh(handler);}catch(e){this.ag('remove_markAdded',e);throw e;}},add_markCreating:function(handler){try{this.SM(handler);}catch(e){this.ag('add_markCreating',e);throw e;}},remove_markCreating:function(handler){try{this.XA(handler);}catch(e){this.ag('remove_markCreating',e);throw e;}},add_markChanged:function(handler){try{this.HN(handler);}catch(e){this.ag('add_markChanged',e);throw e;}},remove_markChanged:function(handler){try{this.FA(handler);}catch(e){this.ag('remove_markChanged',e);throw e;}},add_markReordered:function(handler){try{this.FH(handler);}catch(e){this.ag('add_markReordered',e);throw e;}},remove_markReordered:function(handler){try{this.Fy(handler);}catch(e){this.ag('remove_markReordered',e);throw e;}},add_markSelectionChanged:function(handler){try{this.FX(handler);}catch(e){this.ag('add_markSelectionChanged',e);throw e;}},remove_markSelectionChanged:function(handler){try{this.GC(handler);}catch(e){this.ag('remove_markSelectionChanged',e);throw e;}},add_markTextSelectionChanged:function(handler){try{this.IY(handler);}catch(e){this.ag('add_markTextSelectionChanged',e);throw e;}},remove_markTextSelectionChanged:function(handler){try{this.FW(handler);}catch(e){this.ag('remove_markTextSelectionChanged',e);throw e;}},add_markRemoved:function(handler){try{this.zd(handler);}catch(e){this.ag('add_markRemoved',e);throw e;}},remove_markRemoved:function(handler){try{this.AK(handler);}catch(e){this.ag('remove_markRemoved',e);throw e;}},add_commentAdding:function(handler){try{this.aDJ(handler);}catch(e){this.ag('add_commentAdding',e);throw e;}},remove_commentAdding:function(handler){try{this.aBg(handler);}catch(e){this.ag('remove_commentAdding',e);throw e;}},add_commentAdded:function(handler){try{this.vv(handler);}catch(e){this.ag('add_commentAdded',e);throw e;}},remove_commentAdded:function(handler){try{this.CT(handler);}catch(e){this.ag('remove_commentAdded',e);throw e;}},add_commentRemoved:function(handler){try{this.vG(handler);}catch(e){this.ag('add_commentRemoved',e);throw e;}},remove_commentRemoved:function(handler){try{this.Dh(handler);}catch(e){this.ag('remove_commentRemoved',e);throw e;}},add_commentChanged:function(handler){try{this.uu(handler);}catch(e){this.ag('add_commentChanged',e);throw e;}},remove_commentChanged:function(handler){try{this.vR(handler);}catch(e){this.ag('remove_commentChanged',e);throw e;}},add_scaleChanged:function(handler){try{this.SF(handler);}catch(e){this.ag('add_scaleChanged',e);throw e;}},remove_scaleChanged:function(handler){try{this.Wj(handler);}catch(e){this.ag('remove_scaleChanged',e);throw e;}},add_exceptionThrown:function(handler){this.TK(handler);},remove_exceptionThrown:function(handler){this.Un(handler);},writeToLog:function(message){try{this.mn(message);}catch(e){this.ag('writeToLog',e);throw e;}},get_currentState:function(){try{var bq=this.OG();this.dn('get_currentState',arguments,bq);return bq;}catch(e){this.ag('get_currentState',e);throw e;}},get_scaleFactor:function(){try{var bq=this.pM();this.dn('get_scaleFactor',arguments,bq);return bq;}catch(e){this.ag('get_scaleFactor',e);throw e;}},set_scaleFactor:function(scaleFactor){try{this.bn('set_scaleFactor',arguments);this.ard(scaleFactor);}catch(e){this.ag('set_scaleFactor',e);throw e;}},zoomIn:function(factor){try{this.bn('zoomIn',arguments);this.KJ(factor);}catch(e){this.ag('zoomIn',e);throw e;}},zoomOut:function(factor){try{this.bn('zoomOut',arguments);this.aas(factor);}catch(e){this.ag('zoomOut',e);throw e;}},getMinMaxZoom:function(){return this.auf();},displayAll:function(){try{this.bn('displayAll',arguments,1);this.awX();}catch(e){this.ag('displayAll',e);throw e;}},display:function(pageIndex){try{this.bn('display',arguments);this.dN(pageIndex);}catch(e){this.ag('display',e);throw e;}},get_textRequired:function(){try{var bq=this.kH();this.dn('get_textRequired',arguments,bq);return bq;}catch(e){this.ag('get_textRequired',e);throw e;}},set_textRequired:function(value){try{this.bn('set_textRequired',arguments);this.FK(value);}catch(e){this.ag('set_textRequired',e);throw e;}},selectText:function(pageIndex,startIndex,endIndex,color){try{this.bn('selectText',arguments,1);this.Xu(pageIndex,startIndex,endIndex,color);}catch(e){this.ag('selectText',e);throw e;}},clearSelectedText:function(pageIndex){try{this.bn('clearSelectedText',arguments,1);this.ayU(pageIndex);}catch(e){this.ag('clearSelectedText',e);throw e;}},clearAllSelectedText:function(){try{this.bn('clearAllSelectedText',arguments);this.axh();}catch(e){this.ag('clearAllSelectedText',e);throw e;}},get_maxPrefetch:function(){try{var bq=this.ayZ();this.dn('get_maxPrefetch',arguments,bq);return bq;}catch(e){this.ag('get_maxPrefetch',e);throw e;}},set_maxPrefetch:function(value){try{this.bn('set_maxPrefetch',arguments);this.apu(value);}catch(e){this.ag('set_maxPrefetch',e);throw e;}},get_displayPagesWhenScrolling:function(){try{var bq=this.axm();this.dn('get_displayPagesWhenScrolling',arguments,bq);return bq;}catch(e){this.ag('get_displayPagesWhenScrolling',e);throw e;}},set_displayPagesWhenScrolling:function(value){try{this.bn('set_displayPagesWhenScrolling',arguments);this.apf(value);}catch(e){this.ag('set_displayPagesWhenScrolling',e);throw e;}},get_maxOutOfViewDisplay:function(){try{var bq=this.ayu();this.dn('get_maxOutOfViewDisplay',arguments,bq);return bq;}catch(e){this.ag('get_maxOutOfViewDisplay',e);throw e;}},set_maxOutOfViewDisplay:function(value){try{this.bn('set_maxOutOfViewDisplay',arguments);this.apT(value);}catch(e){this.ag('set_maxOutOfViewDisplay',e);throw e;}},get_discardOutOfViewText:function(){try{var bq=this.ayK();this.dn('get_discardOutOfViewText',arguments,bq);return bq;}catch(e){this.ag('get_discardOutOfViewText',e);throw e;}},set_discardOutOfViewText:function(value){try{this.bn('set_discardOutOfViewText',arguments);this.aoK(value);}catch(e){this.ag('set_discardOutOfViewText',e);throw e;}},get_scrollDisplayThreshold:function(){try{var bq=this.arW();this.dn('get_scrollDisplayThreshold',arguments,bq);return bq;}catch(e){this.ag('get_scrollDisplayThreshold',e);throw e;}},set_scrollDisplayThreshold:function(value){try{this.bn('set_scrollDisplayThreshold',arguments);this.apz(value);}catch(e){this.ag('set_scrollDisplayThreshold',e);throw e;}},get_mouseCursor:function(){try{var bq=this.ahX();this.dn('get_mouseCursor',arguments,bq);return bq;}catch(e){this.ag('ahX',e);throw e;}},set_mouseCursor:function(value){try{this.bn('set_mouseCursor',arguments);this.aqY(value);}catch(e){this.ag('set_mouseCursor',e);throw e;}},get_mouseTool:function(){try{var bq=this.Vo();this.dn('get_mouseTool',arguments,bq);return bq;}catch(e){this.ag('get_mouseTool',e);throw e;}},set_mouseTool:function(value){try{this.bn('set_mouseTool',arguments);this.Gf(value);}catch(e){this.ag('set_mouseTool',e);throw e;}},get_markHandleMode:function(){try{var bq=this.zV();this.bn('get_markHandleMode',arguments);return bq;}catch(e){this.ag('get_markHandleMode',e);throw e;}},set_markHandleMode:function(L){try{this.bn('set_markHandleMode',arguments);this.Kg(L);}catch(e){this.ag('set_markHandleMode',e);throw e;}},get_retainPageText:function(){try{var bq=this.auF();this.bn('get_retainPageText',arguments);return bq;}catch(e){this.ag('get_retainPageText',e);throw e;}},set_retainPageText:function(L){try{this.bn('set_retainPageText',arguments);this.aqX(L);}catch(e){this.ag('set_retainPageText',e);throw e;}},get_allowMarkEdits:function(){try{var bq=this.ayq();this.bn('get_allowMarkEdits',arguments);return bq;}catch(e){this.ag('get_allowMarkEdits',e);throw e;}},set_allowMarkEdits:function(bool){try{this.bn('set_allowMarkEdits',arguments);this.aor(! !bool);}catch(e){this.ag('set_allowMarkEdits',e);throw e;}},get_currentPage:function(){try{var bq=this.ahY();this.dn('get_currentPage',arguments,bq);return bq;}catch(e){this.ag('get_currentPage',e);throw e;}},get_pageNodeId:function(pageIndex){try{var aaJ=this.arE(pageIndex);this.dn('get_pageNodeId',arguments,aaJ);return aaJ;}catch(e){this.ag('get_pageNodeId',e);throw e;}},scrollToNextPage:function(){try{this.bn('scrollToNextPage',arguments);this.aCe();}catch(e){this.ag('scrollToNextPage',e);throw e;}},scrollToPreviousPage:function(){try{this.bn('scrollToPreviousPage',arguments);this.aCc();}catch(e){this.ag('scrollToPreviousPage',e);throw e;}},scrollToFirstPage:function(){try{this.bn('scrollToFirstPage',arguments);this.aBC();}catch(e){this.ag('scrollToFirstPage',e);throw e;}},scrollToLastPage:function(){try{this.bn('scrollToLastPage',arguments);this.aCK();}catch(e){this.ag('scrollToLastPage',e);throw e;}},scrollToPage:function(pageIndex){try{this.bn('scrollToPage',arguments,1);this.qD(pageIndex);}catch(e){this.ag('scrollToPage',e);throw e;}},rotate:function(degreesClockwise){try{this.bn('rotate',arguments,1);this.aBm(degreesClockwise);}catch(e){this.ag('rotate',e);throw e;}},rotateAll:function(degreesClockwise){try{this.bn('rotateAll',arguments,1);this.adx(degreesClockwise,true);}catch(e){this.ag('rotateAll',e);throw e;}},get_enabled:function(){try{var bq=this.ayr();this.dn('get_enabled',arguments,bq);return bq;}catch(e){this.ag('get_enabled',e);throw e;}},get_pageLayout:function(){try{var bq=this.auB();this.dn('get_pageLayout',arguments,bq);return bq;}catch(e){this.ag('get_pageLayout',e);throw e;}},set_pageLayout:function(value){try{this.bn('set_pageLayout',arguments);this.apM(value);}catch(e){this.ag('set_pageLayout',e);throw e;}},get_viewMode:function(){try{var bq=this.ass();this.dn('get_viewMode',arguments,bq);return bq;}catch(e){this.ag('get_viewMode',e);throw e;}},set_viewMode:function(value){try{this.bn('set_viewMode',arguments);this.Rm(value);}catch(e){this.ag('set_viewMode',e);throw e;}},get_loadingContent:function(){try{var bq=this.ayl();this.dn('get_loadingContent',arguments,bq);return bq;}catch(e){this.ag('get_loadingContent',e);throw e;}},set_loadingContent:function(value){try{this.bn('set_loadingContent',arguments);this.arY(value);}catch(e){this.ag('set_loadingContent',e);throw e;}},fitPages:function(fitType){try{this.bn('fitPages',arguments,1);this.axw(fitType);}catch(e){this.ag('fitPages',e);throw e;}},openPage:function(pageIndex){try{this.bn('openPage',arguments,1);this.Nl(pageIndex);}catch(e){this.ag('openPage',e);throw e;}},requestPageAttributes:function(page,attributesRetrievedCallback,attributesRetrievalFailedCallback){try{this.bn('requestPageAttributes',arguments,1);this.Na(page,attributesRetrievedCallback,attributesRetrievalFailedCallback);}catch(e){this.ag('requestPageAttributes',e);throw e;}},scrollRegionIntoView:function(pageIndex,rectangle){try{this.bn('scrollRegionIntoView',arguments,1);return this.aBJ(pageIndex,rectangle);}catch(e){this.ag('scrollRegionIntoView',e);throw e;}},scrollBy:function(xVal,yVal){try{this.bn('scrollBy',arguments,1);return this.aBY(xVal,yVal);}catch(e){this.ag('scrollBy',e);throw e;}},scrollConversationIntoView:function(conversation){try{this.bn('scrollConversationIntoView',arguments,1);return this.aCr(conversation);}catch(e){this.ag('scrollConversationIntoView',e);throw e;}},get_documents:function(){return this.WQ();},get_encryption:function(){try{var bq=this.iP();this.dn('get_encryption',arguments,bq);return bq;}catch(e){this.ag('get_encryption',e);throw e;}},set_encryption:function(value){try{this.bn('set_encryption',arguments);this.oR(value);}catch(e){this.ag('set_encryption',e);throw e;}},get_annotationXmlDom:function(){try{var bq=this.ayR();return bq;}catch(e){this.ag('get_annotationXmlDom',e);throw e;}},set_annotationXmlDom:function(value,stampImages,retainExistingMarks,loadAsHidden){try{this.aoh(value,stampImages,retainExistingMarks,loadAsHidden);}catch(e){this.ag('set_annotationXmlDom',e);throw e;}},get_resourcePath:function(){try{var bq=this.uY();this.dn('get_resourcePath',arguments,bq);return bq;}catch(e){this.ag('get_resourcePath',e);throw e;}},set_resourcePath:function(L){try{this.bn('set_resourcePath',arguments);this.Gx(L);}catch(e){this.ag('set_resourcePath',e);throw e;}},get_redactionDraftMode:function(){try{var bq=this.mr();this.dn('get_redactionDraftMode',arguments,bq);return bq;}catch(e){this.ag('get_redactionDraftMode',e);throw e;}},set_redactionDraftMode:function(value){try{this.bn('set_redactionDraftMode',arguments);this.qa(value);}catch(e){this.ag('set_redactionDraftMode',e);throw e;}},get_displayedPages:function(){try{var bq=this.axx();this.dn('get_displayedPages',arguments,bq);return bq;}catch(e){this.ag('get_displayedPages',e);throw e;}},get_requireRequestsOptimize:function(){try{var bq=this.zz();this.dn('get_requireRequestsOptimize',arguments,bq);return bq;}catch(e){this.ag('zz',e);throw e;}},set_requireRequestsOptimize:function(value){try{this.bn('set_requireRequestsOptimize',arguments);this.Gl(value);}catch(e){this.ag('set_requireRequestsOptimize',e);throw e;}},get_serviceResponseTimeout:function(){try{var bq=this.jS();this.dn('get_serviceResponseTimeout',arguments,bq);return bq;}catch(e){this.ag('get_serviceResponseTimeout',e);throw e;}},set_serviceResponseTimeout:function(value){try{this.bn('set_serviceResponseTimeout',arguments);this.wR(value);}catch(e){this.ag('set_serviceResponseTimeout',e);throw e;}},get_pageRotation:function(){try{var bq=this.asW();this.dn('get_pageRotation',arguments,bq);return bq;}catch(e){this.ag('get_pageRotation',e);throw e;}},set_pageRotation:function(value){try{this.bn('set_pageRotation',arguments);this.anU(value);}catch(e){this.ag('set_pageRotation',e);throw e;}},getNodeID:function(pageIndex){try{this.bn('getNodeID',arguments,1);return this.aty(pageIndex);}catch(e){this.ag('getNodeID',e);throw e;}},get_isCommentsPanelOpen:function(){try{var bq=this.ayC();this.dn('get_isCommentsPanelOpen',arguments,bq);return bq;}catch(e){this.ag('get_isCommentsPanelOpen',e);throw e;}},openCommentsPanel:function(){try{this.bn('openCommentsPanel',arguments);this.aDB();}catch(e){this.ag('openCommentsPanel',e);throw e;}},closeCommentsPanel:function(){try{this.bn('closeCommentsPanel',arguments);this.awF();}catch(e){this.ag('closeCommentsPanel',e);throw e;}},get_conversationDOMFactory:function(){try{var bq=this.axe();this.dn('get_conversationDOMFactory',arguments,bq);return bq;}catch(e){this.ag('get_conversationDOMFactory',e);throw e;}},set_conversationDOMFactory:function(value){try{this.bn('set_conversationDOMFactory',arguments);this.apg(value);}catch(e){this.ag('set_conversationDOMFactory',e);throw e;}},get_selectedConversation:function(){try{var bq=this.asR();this.dn('get_selectedConversation',arguments,bq);return bq;}catch(e){this.ag('get_selectedConversation',e);throw e;}},set_selectedConversation:function(value){try{this.bn('set_selectedConversation',arguments);this.arb(value);}catch(e){this.ag('set_selectedConversation',e);throw e;}},refreshConversations:function(markIDs){try{this.bn('refreshConversations',arguments);this.aCt(markIDs);}catch(e){this.ag('refreshConversations',e);throw e;}}};QJ.registerClass=cs;QJ.registerClass('IPCC.PageList',{});module.exports=QJ;},{"./IPCC.Util":28}],43:[function(require,module,exports){var pE=function(dg,xU){var J=this;this.dg=dg;this.xU=xU;this.auX=function(){return J.dg;};this.aIl=function(){return J.xU;};};pE.prototype.get_propertyName=function(){return this.dg;};pE.prototype.get_propertyInfo=function(){return this.xU;};module.exports=pE;},{}],44:[function(require,module,exports){var By=function(){this.dG=1;this.width=0;this.height=0;this.na=0;this.AY=0;this.pool=undefined;return this;};By.prototype.ME=function(dQ){if(dQ.width<1||dQ.height<1){return[];}var kI=Math.floor(dQ.x*this.dG);var kq=Math.floor(dQ.y*this.dG);var mw=Math.ceil((dQ.x+dQ.width)*this.dG);var mK=Math.ceil((dQ.y+dQ.height)*this.dG);var pb=[];var h,eN;var ci=this.tiles.length;for(h=0;h<ci;h++){eN=this.tiles[h];if(eN.x<=mw&&eN.right>=kI&&eN.y<=mK&&eN.bottom>=kq){pb.push(eN);}}return pb;};module.exports=By;},{}],45:[function(require,module,exports){var xE=function(){this.x=0;this.y=0;this.right=0;this.bottom=0;this.aZ=0;this.dk=0;this.vA=0;this.wa=0;this.url='';this.poolItem=undefined;this.level=undefined;return this;};xE.prototype.unlock=function(){this.level.pool.aim(this);};xE.prototype.lock=function(){this.level.pool.lockTile(this);};xE.prototype.relock=function(){return this.level.pool.UO(this);};xE.prototype.get_isLockedAndLoaded=function(){if(this.poolItem===undefined|| !this.poolItem.loaded){return false;}return true;};xE.prototype.toString=function(){var aj='x:'+this.x.toString()+', y:'+this.y.toString()+', right:'+this.right.toString()+', bottom:'+this.bottom.toString();if(this.level){aj='scale:'+this.level.dG.toString()+', '+aj;}return aj;};module.exports=xE;},{}],46:[function(require,module,exports){var mj=function(){this.aX=false;this.K=false;};mj.prototype.mG=function(K){this.K=K;};mj.prototype.ed=function(){this.K=false;};mj.prototype.aB=function(){if(this.aX){this.K.bC().pn();this.aX=false;this.K.dN();}};mj.prototype.qE=function(){this.aB();this.K.dN();};mj.prototype.jR=function(V){this.aB();if(V.domEvent.button===0){var ar=this.K.bC();this.aX=true;ar.Ca(V.constrainedImagePoint);this.rN=V.windowPoint;this.K.dN();}};mj.prototype.jQ=function(V){if(V.domEvent.button!==0){this.aB();}if(this.aX){var ar=this.K.bC();ar.xO(V.constrainedImagePoint);this.K.dN();}};mj.prototype.jX=function(V){if(this.aX&&V.domEvent.button===0){var eY=V.windowPoint.x-this.rN.x;var hh=eY*eY;eY=V.windowPoint.y-this.rN.y;hh+=eY*eY;if(hh>25){var K=this.K;var ar=K.bC();var aL=ar.fB();var bd=K.ee();var aDK=bd.width;var aDA=bd.height;var ai=K.dj();ar.xO(V.constrainedImagePoint);var jr=ar.wN();ar.pn();K.ay('userModifiedViewState',{});aL.Nb(ai,bd,jr);aL.la(ai,bd);ar.io(aL);K.dN();if(aDK!==bd.width||aDA!==bd.height){aL=ar.fB();aL.Nb(ai,bd,jr);aL.la(ai,bd);ar.io(aL);}}}this.aB();};mj.prototype.po=function(V){var bd=this.K.ee();if(V.windowPoint.x<=0||V.windowPoint.x>=bd.width-2){this.aB();}if(V.windowPoint.y<=0||V.windowPoint.y>=bd.height-2){this.aB();}};mj.prototype.ma=function(){this.aB();};module.exports=mj;},{}],47:[function(require,module,exports){var kK={'paramName':'Parameter name: {0}','svctype':'License','argumentNull':'Value cannot be null.','spc':' ','actualValue':'Actual value was {0}.','fwdslash':'/','prodInfo':'prodInfoPass','argumentOutOfRange':'Specified argument was out of the range of valid values.','argumentTypeWithTypes':'Object of type \'{0}\' cannot be converted to type \'{1}\'.','argumentType':'Object cannot be converted to the required type.','invalidOperation':'Operation is not valid due to the current state of the object.','notImplemented':'The method or operation is not implemented.','argument':'Value does not fall within the expected range.','prodFailInfo':'prodInfoFail','svcReqStr':'','viewer':'ClientViewer','querySymb':'?','version':'v=','iv':'iv=','param':'p='};module.exports=kK;},{}],48:[function(require,module,exports){var xF=function(){};xF.prototype.mG=function(K){this.K=K;this.ar=K.bC();};xF.prototype.ed=function(){this.K=false;};xF.prototype.aB=function(){};module.exports=xF;},{}],49:[function(require,module,exports){var ec=require('./IPCC.Util').regEnum;var CU=function(){};CU.registerEnum=ec;CU.prototype={Pinch:"Pinch",Zoom:"Zoom",Fit:"Fit",ViewMode:"ViewMode"};CU.registerEnum('IPCC.ScaleTrigger',false);module.exports=CU;},{"./IPCC.Util":28}],50:[function(require,module,exports){var nA=function(){this.aX=false;this.K=false;};nA.prototype.mG=function(K){this.K=K;};nA.prototype.ed=function(){this.K=false;};nA.prototype.aB=function(){if(this.aX){this.K.pn();this.aX=false;this.K.dN();}};nA.prototype.qE=function(){this.aB();};nA.prototype.jR=function(V){this.aB();if(V.domEvent.button===0){var ar=this.K.bC();this.aX=true;ar.Ca(V.constrainedImagePoint);this.K.dN();}};nA.prototype.jQ=function(V){if(V.domEvent.button!==0){this.aB();}if(this.aX){var ar=this.K.bC();ar.xO(V.constrainedImagePoint);this.K.dN();}};nA.prototype.jX=function(V){if(V.domEvent.button===0){this.aX=false;}this.aB();};nA.prototype.po=function(V){var bd=this.K.ee();if(V.windowPoint.x<=0||V.windowPoint.x>=bd.width-2){this.aB();}if(V.windowPoint.y<=0||V.windowPoint.y>=bd.height-2){this.aB();}};nA.prototype.ma=function(){this.aB();};module.exports=nA;},{}],51:[function(require,module,exports){var ky=function(){this.aX=false;this.K=false;};ky.prototype.mG=function(K){this.K=K;};ky.prototype.ed=function(){this.K=false;};ky.prototype.aB=function(){if(this.aX){this.K.bC().VC();this.aX=false;}};ky.prototype.qE=function(){this.aB();};ky.prototype.jR=function(V){if(V.domEvent.button===0){var ar=this.K.bC();this.aX=true;var cU=this.K.FZ(V.constrainedImagePoint);this.K.gr=cU;if(!cU){return;}this.K.yk(cU);ar.yk(cU);ar.tm(undefined);this.K.dN();}};ky.prototype.jQ=function(V){var K=this.K;K.avG=true;if(V.domEvent.button!==0){this.aB();}if(this.aX){var ar=K.bC();var cU=K.FZ(V.constrainedImagePoint);var gU=ar.BO();if(gU===cU){return;}K.tm(cU);K.dN();}};ky.prototype.jX=function(V){if(V.domEvent.button===0){this.aX=false;}var K=this.K;var ar=this.K.bC();var cG=ar.iA.length;if(cG===0){this.aB();return;}var ad=ar.iA[0].cU;var dq=ar.iA[cG-1].cU;if(K.Jj===true){if(ad>dq){ad=dq;}var h;var kF=IPCC.vH();this.T=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.HighlightText);this.T.ad=ad;this.T.cC=K.Ei();this.T.db=cG;this.T.set_fillColor(K.ra);this.T.ic='y';this.T.bS=kF;for(h=0;h<ar.iA.length;h++){var bp=ar.iA[h];var Dm=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Highlight);var Av=bp.T.cN();Dm.set_fillColor(K.ra);Dm.set_opacity(bp.T.get_opacity());Dm.set_rectangle(Av);Dm.bS=kF;Dm.ic='y';this.K.eh().addMark(Dm);}ar.iA=[];if(cG>0){this.K.eh().addMark(this.T);}K.mp().removeAllMarks();}cG=ar.iA.length;var ahi=new IPCC.Web.UI.TextSelectedEventArgs();ahi.text=K.Ei();K.ay('selectTextMouseToolCompleted',ahi);K.dN();this.aB();};ky.prototype.po=function(V){var bd=this.K.ee();if(V.windowPoint.x<=0||V.windowPoint.x>=bd.width-2){this.aB();}if(V.windowPoint.y<=0||V.windowPoint.y>=bd.height-2){this.aB();}};ky.prototype.ma=function(){this.aB();};module.exports=ky;},{}],52:[function(require,module,exports){var dK=function(){this.K=false;this.IV=0;this.aDF=1;this.afa=2;this.aff=3;};dK.prototype.mG=function(K){this.K=K;this.cw=this.IV;};dK.prototype.ed=function(){this.K=false;};dK.prototype.aB=function(){this.cw=this.IV;};dK.prototype.afX=function(V){var avX=new Date()-this.aqZ;if(avX<750){var eA=this.afB.x-V.windowPoint.x;var ey=this.afB.y-V.windowPoint.y;var hh=eA*eA+ey*ey;if(hh<2500){return true;}}return false;};dK.prototype.acv=function(V){this.aqZ=new Date();this.afB=new IPCC.Web.UI.Point(V.windowPoint.x,V.windowPoint.y);};dK.prototype.Qi=function(V){var bU=V.domEvent.rawEvent;if(bU.touches.length===1){if(this.cw===this.afa&&this.afX(V)){this.cw=this.aff;}else{this.cw=this.aDF;}this.acv(V);this.K.gg('jR',V);}else{this.cw=this.IV;this.K.gg('qE',V);}};dK.prototype.Qd=function(V){var bU=V.domEvent.rawEvent;if(bU.touches.length===1){this.K.gg('jQ',V);}};dK.prototype.OT=function(V){var bU=V.domEvent.rawEvent;if(bU.touches.length===0){if(this.afX(V)){if(this.cw===this.aff){this.cw=this.IV;this.K.gg('jX',V);this.K.gg('zn',V);}else{this.acv(V);this.cw=this.afa;this.K.gg('jX',V);}}else{this.cw=this.IV;this.K.gg('jX',V);}}};dK.prototype.Iy=function(V){this.K.gg('qE',V);};module.exports=dK;},{}],53:[function(require,module,exports){var DB=function(aZ,dk,hf,gn){IPCC.Web.UI.Rectangle.call(this,0,0,0,0);this.width=aZ;this.height=dk;this.hf=hf;this.gn=gn;return this;};DB.prototype.toString=function(){return 'Space('+this.width+' x '+this.height+', '+this.hf+', '+this.gn+')';};module.exports=DB;},{}],54:[function(require,module,exports){var yb=function(LN){this.wG=(typeof(LN)!=='undefined'&&LN!==null&&LN!=='')?[LN.toString()]:[];this.L={};this.ci=0;};yb.prototype.aHT=function(aD){this.wG[this.wG.length]=aD;};yb.prototype.aGT=function(aD){this.wG[this.wG.length]=((typeof(aD)==='undefined')||(aD===null)||(aD===''))?'\r\n':aD+'\r\n';};yb.prototype.aIe=function(){this.wG=[];this.L={};this.ci=0;};yb.prototype.aIg=function(){if(this.wG.length===0){return true;}return this.toString()==='';};yb.prototype.aHb=function(Aw){Aw=Aw||'';var parts=this.wG;if(this.ci!==parts.length){this.L={};this.ci=parts.length;}var val=this.L;if(typeof(val[Aw])==='undefined'){if(Aw!==''){for(var i=0;i<parts.length;){if((typeof(parts[i])==='undefined')||(parts[i]==='')||(parts[i]===null)){parts.splice(i,1);}else{i++;}}}val[Aw]=this.wG.join(Aw);}return val[Aw];};module.exports=yb;},{}],55:[function(require,module,exports){var dU=function(K,pU){this.OB=false;this.YB=false;this.Eg=true;this.XV=false;this.MV=false;this.vj=0;this.wF=0;var az=this;this.aEx='opacity';this.aDc=function(cZ){return cZ.toString();};var ajZ=function ajZ(ao,eO,oS,ai,mC,lM){var fR;if(this.K.qg()===true){ao.wX.setAttribute('width',oS.width);ao.wX.setAttribute('height',oS.height);ao.uy.setAttribute('width',oS.width);ao.uy.setAttribute('height',oS.height);fR=eO.rh().toString()+','+eO.qH().toString()+','+eO.pY().toString()+','+eO.sm().toString()+','+(eO.wE()+mC).toString()+','+(eO.we()+lM).toString();this.fZ(ao.Az,'transform','matrix('+fR+')');}else{ao.wX.setAttribute('width',oS.width);ao.wX.setAttribute('height',oS.height);ao.uy.setAttribute('width',oS.width);ao.uy.setAttribute('height',oS.height);fR=eO.rh().toString()+','+eO.qH().toString()+','+eO.pY().toString()+','+eO.sm().toString()+','+(eO.wE()+mC).toString()+','+(eO.we()+lM).toString();this.fZ(ao.Az,'transform','matrix('+fR+')');}};function aGu(ao){var pathList=ao.wX.getElementsByTagName('path');var gList=ao.wX.getElementsByTagName('g');ao.Sh=[];function akl(pathItem,index){if(!pathItem.hasAttribute('data-pcc-mark')){if(pathItem.hasAttribute('stroke-width')||pathItem.style.strokeWidth){pathItem.originalStrokeWidth=pathItem.getAttribute('stroke-width')||pathItem.style.strokeWidth;ao.Sh.push(pathItem);}}};IPCC.F.forEach(pathList,akl);IPCC.F.forEach(gList,akl);};this.aiJ=function(ao){var ar=K.bC();var avO=1;var kh=ar.atd();function setStrokeWidthToOriginalValue(pathItem,index){if(pathItem.hasAttribute('stroke-width')){pathItem.setAttribute('stroke-width',parseFloat(pathItem.originalStrokeWidth));}else{var strokeWidth=parseFloat(pathItem.originalStrokeWidth);pathItem.style.strokeWidth=strokeWidth;}};function updateStrokeWidthByLineWidthMultiplier(pathItem,index){if(pathItem.hasAttribute('stroke-width')){pathItem.setAttribute('stroke-width',parseFloat(pathItem.originalStrokeWidth*kh));}else{var strokeWidth=parseFloat(pathItem.originalStrokeWidth);pathItem.style.strokeWidth=strokeWidth*kh;}};if(ao.Sh===undefined){aGu(ao);}if(kh===avO){IPCC.F.forEach(ao.Sh,setStrokeWidthToOriginalValue);}else{IPCC.F.forEach(ao.Sh,updateStrokeWidthByLineWidthMultiplier);}ar.apF(false);};function aDV(ao,bK){ao.sJ.setAttribute('exponent',bK);ao.sb.setAttribute('exponent',bK);ao.sg.setAttribute('exponent',bK);};function aCU(ao,bK){var awb=841;var mI=(bK/awb)* -1;var fR;if(IPCC.F.BM){fR='{00} {01} {02} '+'{10} {11} {12} '+'{20} {21} {22}';fR=fR.replace('{00}',mI).replace('{01}',mI).replace('{02}',mI).replace('{10}',mI).replace('{11}',1).replace('{12}',mI).replace('{20}',mI).replace('{21}',mI).replace('{22}',mI);}else{fR='{00} {01} {02} {03} {04} '+'{10} {11} {12} {13} {14} '+'{20} {21} {22} {23} {24} '+'{30} {31} {32} {33} {34} '+'{40} {41} {42} {43} {44}';fR=fR.replace('{00}',0).replace('{01}',0).replace('{02}',0).replace('{03}',0).replace('{04}',0).replace('{10}',0).replace('{11}',mI).replace('{12}',mI).replace('{13}',mI).replace('{14}',0).replace('{20}',0).replace('{21}',mI).replace('{22}',1).replace('{23}',mI).replace('{24}',0).replace('{30}',0).replace('{31}',mI).replace('{32}',mI).replace('{33}',mI).replace('{34}',0).replace('{40}',0).replace('{41}',0).replace('{42}',0).replace('{43}',0).replace('{44}',0);}ao.ku.setAttribute('kernelMatrix',fR);};this.asJ=function(ao){var ar=K.bC();var qv=ar.axD();var rk=ar.arQ();if(rk===0&&qv===1){ao.Az.removeAttribute('filter','url(#'+ao.IW+')');}else{ao.Az.setAttribute('filter','url(#'+ao.IW+')');}aDV(ao,qv);aCU(ao,rk);};var ZQ,YL;this.ahZ=function(ao,eO,oS,ai,mC,lM){if(ao.YK.match('maglevel')){ajZ.apply(this,arguments);return;}var bm=ao.gQ.parentElement.getBoundingClientRect();var jw=bm.width/ai.width;var anq=function(val){return Math.abs(val)<1.0e-14;};var eT=0,ef=0;var atu=function(){var nN=eO.qH();if(anq(nN)){nN=0;}var oW=eO.pY();if(anq(oW)){oW=0;}var aEu=eO.rh();var ea=(nN>=0&&oW<0)?90:(nN<0&&oW>=0)?270:(aEu<0)?180:(nN>=0&&oW>=0)?0:0;switch(ea){case 90:eT=bm.width;break;case 180:eT=bm.width;ef=bm.height;break;case 270:ef=bm.height;break;}return ea*(Math.PI/180);};var ea=atu();if(parseInt(ea,10)===1||parseInt(ea,10)===4){jw=bm.height/ai.width;}if(jw===ZQ&&ea===YL){return;}else{ZQ=jw;YL=ea;}var fc=1,gy=0;if(ea!==0){fc=Math.cos(ea);gy=Math.sin(ea);}var aL={jw:fc*jw,qo:fc*jw,nN:gy*jw,oW:gy* -1*jw,eT:eT,ef:ef};var arB=new IPCC.fN(aL.jw,aL.nN,aL.oW,aL.qo,aL.eT,aL.ef);eO.PQ(arB);K.bC().io(eO);var fR='matrix({scaleX},{skewX},{skewY},{scaleY},{moveX},{moveY})';fR=fR.replace('{scaleX}',aL.jw).replace('{scaleY}',aL.qo).replace('{skewX}',aL.nN).replace('{skewY}',aL.oW).replace('{moveX}',aL.eT).replace('{moveY}',aL.ef);this.fZ(ao.Az,'transform',fR);};this.ayn=function(){ZQ=undefined;YL=undefined;};this.aus(K);this.axj=function(cz){var bd=new IPCC.DB(cz.clientWidth,cz.clientHeight,96,96);return bd;};this.aeS=function(bU){bU.preventDefault();az.jR(bU);};this.aeg=function(bU){bU.preventDefault();az.jQ(bU);};this.aeQ=function(bU){bU.preventDefault();az.jX(bU);};this.ajX=function(bU){az.jR(bU);};this.adX=function(bU){az.zn(bU);};this.ajJ=function(bU){az.jQ(bU);};this.Tx=function(bU){az.ma(bU);};this.ajL=function(bU){az.jX(bU);};this.ais=function(bU){az.zn(bU);};this.aku=function(bU){az.Ta(bU);};this.NN=function(bU){if(bU.target!==document.activeElement){az.aDh(bU);}};this.amN=function(bU){if(bU.target!==document.activeElement){az.aEg(bU);}};this.po=function(bU){try{bU.preventDefault();var V=new IPCC.Web.UI.MouseEventArgs();V.domEvent=bU;az.sz(V);K.aAL(V);}catch(ex){K.ag('mouseOut',ex);}};this.Qi=function(bU){try{bU.preventDefault();var V=new IPCC.Web.UI.MouseEventArgs();V.domEvent=bU;az.sz(V);K.azG(V);}catch(ex){K.ag('touchStart',ex);}};this.Qd=function(bU){try{bU.preventDefault();var V=new IPCC.Web.UI.MouseEventArgs();V.domEvent=bU;az.sz(V);K.aAP(V);}catch(ex){K.ag('touchMove',ex);}};this.OT=function(bU){try{bU.preventDefault();var V=new IPCC.Web.UI.MouseEventArgs();V.domEvent=bU;az.sz(V);K.azw(V);}catch(ex){K.ag('touchEnd',ex);}};this.Iy=function(bU){try{bU.preventDefault();var V=new IPCC.Web.UI.MouseEventArgs();V.domEvent=bU;az.sz(V);K.aAt(V);}catch(ex){K.ag('touchCancel',ex);}};this.amu=function(bU){try{bU.preventDefault();}catch(ex){K.ag('dragStart',ex);}};this.asA=function(){var eb=K.nj().igElements.oa;IPCC.Web.UI.as.addHandler(eb,"mousewheel",this.Tx);IPCC.Web.UI.as.addHandler(eb,"DOMMouseScroll",this.Tx);if(pU){IPCC.Web.UI.as.addHandler(eb,"touchstart",this.Qi);IPCC.Web.UI.as.addHandler(eb,"touchmove",this.Qd);IPCC.Web.UI.as.addHandler(eb,"touchend",this.OT);IPCC.Web.UI.as.addHandler(eb,"touchcancel",this.Iy);}IPCC.Web.UI.as.addHandler(eb,"mouseout",this.po);IPCC.Web.UI.as.addHandler(eb,"dragstart",this.amu);};this.awa=function(){var eb=K.nj().igElements.oa;IPCC.Web.UI.as.removeHandler(eb,"DOMMouseScroll",this.Tx);IPCC.Web.UI.as.removeHandler(eb,"mouseout",this.po);if(pU){IPCC.Web.UI.as.removeHandler(eb,"touchstart",this.Qi);IPCC.Web.UI.as.removeHandler(eb,"touchmove",this.Qd);IPCC.Web.UI.as.removeHandler(eb,"touchend",this.OT);IPCC.Web.UI.as.removeHandler(eb,"touchcancel",this.Iy);}IPCC.Web.UI.as.removeHandler(eb,"dragstart",this.amu);};function apb(ao,hY){var pV=document.createElementNS('http://www.w3.org/2000/svg','filter');var IW='filter'+hY;ao.IW=IW;pV.setAttribute('id',IW);pV.setAttribute('x','0');pV.setAttribute('y','0');pV.setAttribute('filterUnits','objectBoundingBox');pV.setAttribute('color-interpolation-filters','sRGB');return pV;};function arI(hY){var ku=document.createElementNS('http://www.w3.org/2000/svg','feConvolveMatrix');ku.setAttribute('in','SourceGraphic');ku.setAttribute('result',hY+'ku');ku.setAttribute('preserveAlpha','true');if(IPCC.F.BM){ku.setAttribute('order','3 3');ku.setAttribute('kernelMatrix','0 0 0 0 1 0 0 0 0');}else{ku.setAttribute('order','5 5');ku.setAttribute('kernelMatrix','0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0');}return ku;};function arH(hY){var qp=document.createElementNS('http://www.w3.org/2000/svg','feComponentTransfer');qp.setAttribute('in',hY+'ku');qp.setAttribute('result',hY+'qp');return qp;};function apv(hY){var sJ=document.createElementNS('http://www.w3.org/2000/svg','feFuncR');sJ.setAttribute('type','gamma');sJ.setAttribute('amplitude','1');sJ.setAttribute('exponent','1');sJ.setAttribute('offset','0');var sb=document.createElementNS('http://www.w3.org/2000/svg','feFuncG');sb.setAttribute('type','gamma');sb.setAttribute('amplitude','1');sb.setAttribute('exponent','1');sb.setAttribute('offset','0');var sg=document.createElementNS('http://www.w3.org/2000/svg','feFuncB');sg.setAttribute('type','gamma');sg.setAttribute('amplitude','1');sg.setAttribute('exponent','1');sg.setAttribute('offset','0');return{sJ:sJ,sb:sb,sg:sg};};function aBe(ao,hY){var GS=document.createElementNS('http://www.w3.org/2000/svg','feMerge');var afU=document.createElementNS('http://www.w3.org/2000/svg','feMergeNode');var ahF=document.createElementNS('http://www.w3.org/2000/svg','feMergeNode');afU.setAttribute('in',hY+'ku');ahF.setAttribute('in',hY+'qp');GS.appendChild(afU);GS.appendChild(ahF);return GS;};this.avL=function(ao,gQ,rS,hY){var h,bM,cz,Zt;var MG=function(aT,dJ,au){var cz=document.createElementNS('http://www.w3.org/2000/svg',aT);var h;if(dJ){cz.setAttribute('id',dJ);}for(h in au){if(au.hasOwnProperty(h)){cz.setAttribute(h,au[h]);}}return cz;};var fC=MG('svg',null,{xmlns:'http://www.w3.org/2000/svg',version:'1.1',xlink:'http://www.w3.org/1999/xlink','image-rendering':'optimizeQuality'});var pV=apb(ao,hY);ao.aHD=pV;var ku=arI(hY);ao.ku=ku;pV.appendChild(ku);var qp=arH(hY);ao.qp=qp;pV.appendChild(qp);var DK=apv();qp.appendChild(DK.sJ);qp.appendChild(DK.sb);qp.appendChild(DK.sg);ao.sJ=DK.sJ;ao.sb=DK.sb;ao.sg=DK.sg;var GS=aBe(ao,hY);pV.appendChild(GS);fC.appendChild(pV);ao.uy=MG('rect',null,{x:0,y:0,'fill-opacity':'0.005',fill:'#808080'});fC.appendChild(ao.uy);var UT=MG('g',null,{});ao.Az=UT;fC.appendChild(UT);var ci;if(K.qg()===false){ci=rS.eH.length;}else{ci=1;}for(h=0;h<ci;h++){bM=rS.eH[h];bM.pool.parentElementID=hY+h.toString();Zt=1/bM.dG;cz=MG('g',bM.pool.parentElementID,{transform:'matrix('+Zt.toString()+',0,0,'+Zt.toString()+',0,0)'});UT.appendChild(cz);}ao.wX=fC;gQ.appendChild(fC);};this.arA=function(ix){var aqH=this.akf();ix.elementID=aqH;};this.asd=function(ix){var cz=document.getElementById(ix.elementID);this.fZ(cz,'display','none');};this.ahU=function(ix){var cz=document.getElementById(ix.elementID);if(cz===null){ix.elementID='';return;}cz.setAttributeNS('http://www.w3.org/1999/xlink','href','');cz.parentNode.removeChild(cz);ix.elementID='';};var aEf=function(bU){try{bU.target.onload=undefined;bU.target.onerror=undefined;bU.target.onabort=undefined;var ix=bU.target.poolItem;ix.loaded=true;az.yo();}catch(ex){K.ag('downloadImage',ex);}};var akJ=function(bU){try{bU.target.onload=undefined;bU.target.onerror=undefined;bU.target.onabort=undefined;bU.target.setAttributeNS('http://www.w3.org/1999/xlink','href','');bU.target.setAttribute('display','none');throw new IPCC.Web.UI.ImGearException('An image failed to download or the user cancelled it',{name:'IPCC.Web.UI.ImGearHttpException'});}catch(ex){K.ag('downloadImage',ex);var dw=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dw.exception=ex;dw.pageNumber=K.ae;K.ay('pageOpenFailed',dw);}};this.atN=function(Ai){var h;var ci=Ai.length;if(K.qg()===false){ci=Ai.length;}else{ci=1;}for(h=0;h<ci;h++){var eI=Ai[h];var cz=document.getElementById(eI.poolItem.elementID);if(cz===null){var ix=eI.poolItem;var Nj=ix.pool;var gQ=document.getElementById(Nj.parentElementID);cz=document.createElementNS('http://www.w3.org/2000/svg','image');this.fZ(cz,'id',ix.elementID);this.fZ(cz,'externalResourcesRequired','true');cz.poolItem=ix;cz.onload=aEf;cz.onerror=akJ;cz.onabort=akJ;if(document.documentMode>8||IPCC.F.tX.AT){ix.loaded=true;}cz.setAttributeNS('http://www.w3.org/1999/xlink','href','data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7');this.aEG(cz,eI.url,'image/'+eI.contentType);gQ.appendChild(cz);this.fZ(cz,'display','block');var aZ=eI.right-eI.x;var dk=eI.bottom-eI.y;this.fZ(cz,'x',eI.x);this.fZ(cz,'y',eI.y);this.fZ(cz,'width',aZ);this.fZ(cz,'height',dk);if(ci>1){var awS=aZ-eI.vA;var axT=dk-eI.wa;var QE=document.createElementNS('http://www.w3.org/2000/svg','clipPath');QE.id=cz.id+'_clip';var fr=document.createElementNS('http://www.w3.org/2000/svg','rect');this.fZ(fr,'x',eI.x-eI.vA);this.fZ(fr,'y',eI.y-eI.wa);this.fZ(fr,'width',awS);this.fZ(fr,'height',axT);this.fZ(fr,'class','expand-on-print');QE.appendChild(fr);var insertBeforeElement=null;for(var i=0;i<gQ.childNodes.length;i++){if(gQ.childNodes.item(i).getAttribute('x')<eI.x||gQ.childNodes.item(i).getAttribute('y')<eI.y){insertBeforeElement=gQ.childNodes.item(i);break;}}gQ.insertBefore(cz,insertBeforeElement);gQ.appendChild(QE);this.fZ(cz,'style','clip-path: url(#'+QE.id+')');this.fZ(cz,'class','no-clip-on-print');}}this.fZ(cz,'display','block');}if((document.documentMode>8||IPCC.F.tX.AT)&&Ai.length>0){az.yo();}};this.aEG=function(cz,bQ,us){var rv=true;var mJ=0;if(K.jS()===0){rv=false;}function fl(ac){var cF,dw;try{var fm=IPCC.Web.Kw(ac),Zy;var oz=ac.getResponseHeader("Accusoft-Data-Encrypted");if(oz==='true'&&K.iP()===true){var vf=IPCC.Web.hG.rc.uG(ac.getResponseHeader("Accusoft-Data-SK"));var bf=IPCC.Web.JN(vf,ii);var tY=IPCC.Web.DP(fm,bf,ii);Zy=IPCC.Web.hG.rc.mb(tY,0,0);}else{Zy=IPCC.Web.hG.rc.mb(fm,0,0);}cz.setAttributeNS('http://www.w3.org/1999/xlink','href','data:'+us+';base64,'+Zy);}catch(ex){cF="Image error, Error message = "+ex.message;dw=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dw.exception=ex;dw.pageNumber=K.ae;K.ay('pageOpenFailed',dw);throw new IPCC.Web.UI.ImGearArgumentException(null,cF);}};function eG(aj){var hJ=aj.response.status,cF,mh,lK;if(!aj.response){throw new IPCC.Web.UI.ImGearHttpException(hJ,"Client Image load timeout");}if(hJ===403){mJ++;if(aj.response.statusText&&aj.response.statusText!==""){cF="Expired viewer session ID, error message from the server: "+aj.response.statusText;}else{cF="Expired viewer session ID. No error text message was received from the server:";}throw new IPCC.Web.UI.ImGearHttpException(hJ,cF);}mh=aj.response.getResponseHeader('Accusoft-Status-Message');if(mh){var qQ;lK=aj.response.getResponseHeader('Accusoft-Status-Number');if(IPCC.Web.yB(lK)){qQ=parseInt(lK,10);}throw new IPCC.Web.UI.ImGearHttpException(hJ,mh,qQ);}else{if(aj.response.statusText&&aj.response.statusText!==""){cF=aj.response.statusText;}else{cF="HTTP Error was received from the image server but the server did not provide any error description.";}throw new IPCC.Web.UI.ImGearHttpException(hJ,cF);}};var gD={method:'GET'};if(rv===true){gD.timeout=K.jS();}if(K.axH()&&K.iP()===true){var ii=IPCC.Web.JR.aep(4);var nR=IPCC.Web.hG.HF.mb(ii);var ayA=bQ+'&iv='+nR;gD.url=ayA;}else{gD.mimeType='text/plain; charset=x-user-defined';gD.url=bQ;}IPCC.F.me.eg(gD).then(fl,eG);};this.atD=function(ao){var J=this;if(ao.Tn){return;}var mJ=0;var eI=ao.rS.eH[0].tiles[0];if(!eI){return;}var Nj=eI.level.pool;var gQ=document.getElementById(Nj.parentElementID);var rv=true;if(K.jS()===0){rv=false;}var xT=K.Wt();if(ao.Km){if(xT===2){delete ao.Km;if(gQ.childNodes.length>0){gQ.removeChild(gQ.childNodes[0]);}}else if(xT===1){if(gQ.childNodes.length>0){gQ.removeChild(gQ.childNodes[0]);}}else{if(gQ.childNodes.length===0){gQ.appendChild(ao.aok);}}K.yu=true;return;}if(xT>0){return;}function fl(ac){var dw,cF;ao.Tn=false;try{try{var mE;var oz=ac.getResponseHeader("Accusoft-Data-Encrypted");if(oz==='true'&&K.iP()===true){var vf=IPCC.Web.hG.rc.uG(ac.getResponseHeader("Accusoft-Data-SK"));var bf=IPCC.Web.JN(vf,ii);var fm=IPCC.Web.Kw(ac);var tY=IPCC.Web.DP(fm,bf,ii);mE=IPCC.Web.hG.Hw.mb(tY);}else{mE=ac.responseText;}auC(mE);}catch(ex){cF="SVG image error, Error message = "+ex.message;dw=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dw.exception=ex;dw.pageNumber=K.ae;K.ay('pageOpenFailed',dw);throw new IPCC.Web.UI.ImGearArgumentException(null,cF);}}catch(e){K.ag('openPage',e);if(typeof(K.ay)==='function'){dw=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dw.exception=e;dw.pageNumber=K.ae;K.ay('pageOpenFailed',dw);}}};function eG(aj){var dw,cF,mh,lK;ao.Tn=false;try{if(!aj.response){throw new IPCC.Web.UI.ImGearHttpException(0,"Client SVG load timeout");}var hJ=aj.response.status;if(hJ===480){mJ++;if(aj.response.statusText&&aj.response.statusText!==""){cF=cF="PDF file password required, error message from the server: "+aj.response.statusText;}else{cF="PDF file password required.";}throw new IPCC.Web.UI.ImGearHttpException(hJ,cF);}if(hJ===403){mJ++;if(aj.response.statusText&&aj.response.statusText!==""){cF="Expired viewer session ID, error message from the server: "+aj.response.statusText;}else{cF="Expired viewer session ID. No error text message was received from the server:";}throw new IPCC.Web.UI.ImGearHttpException(hJ,cF);}mh=aj.response.getResponseHeader('Accusoft-Status-Message');if(mh){var qQ;lK=aj.response.getResponseHeader('Accusoft-Status-Number');if(IPCC.Web.yB(lK)){qQ=parseInt(lK,10);}throw new IPCC.Web.UI.ImGearHttpException(hJ,mh,qQ);}else{if(aj.response.statusText&&aj.response.statusText!==""){cF=aj.response.statusText;}else{cF="HTTP Error was received from the image server but the server did not provide any error description.";}throw new IPCC.Web.UI.ImGearHttpException(hJ,cF);}}catch(e){K.ag('openPage',e);if(typeof(K.ay)==='function'){dw=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dw.exception=e;dw.pageNumber=K.ae;K.ay('pageOpenFailed',dw);}}};var aqz=function(){var ar=K.bC();var AL=ar.ajm();K.yu=true;K.ay('pageDisplayed',{ak:K.ae});if(AL){J.aiJ(ao);}};var auC=function(fV){var nI=Nj.parentElementID.toString();var KF=(IPCC.F.BM||IPCC.F.YZ)?'':window.location.href.replace(window.location.hash,'').replace(/#$/,'');var tO=IPCC.F.avj(fV,KF,nI);var pW=tO.querySelectorAll('style');IPCC.F.forEach(pW,function(bx){var CY=(bx.styleSheet)?bx.styleSheet.cssText:bx.textContent;if(bx.styleSheet){bx.styleSheet.cssText=CY;}else{bx.appendChild(document.createTextNode(CY));}});var jN=null;var GH=tO.firstChild;while(GH!==null){if(GH.nodeName==='svg'){jN=GH;break;}GH=GH.nextSibling;}if(jN===null){throw new IPCC.Web.UI.ImGearInvalidOperationException('Unable to process SVG image data.');}if(!ao.Km){ao.aok=jN;gQ.appendChild(jN);ao.Km=true;if(!K.yu&&ao.Km){setTimeout(aqz,1);}}};var bQ;var ii,nR;K.yu=false;if(K.iP()===true){ii=IPCC.Web.JR.VZ(4,IPCC.Web.Nc());nR=IPCC.Web.hG.HF.mb(ii);bQ=eI.url+'&iv='+nR;}else{bQ=eI.url;}var gD={method:'GET',url:bQ,cache:true};if(rv===true){gD.timeout=K.jS();}ao.Tn=true;IPCC.F.me.eg(gD).then(fl,eG);};this.asL=function(eI,cZ){if(!eI){return;}var Cr=document.getElementById(eI.poolItem.elementID);this.fZ(Cr,'x',eI.x);this.fZ(Cr,'y',eI.y);this.fZ(Cr,'width',eI.right-eI.x);this.fZ(Cr,'height',eI.bottom-eI.y);this.fZ(Cr,'opacity',cZ);this.fZ(Cr,'display','block');};this.abR=function(Ai,cZ,eO){var h;if(K.qg()===false){for(h=0;h<Ai.length;h++){this.asL(Ai[h],cZ);}}};return this;};dU.viewerCounter=0;dU.tileCounter=0;dU.imageIDCounter=0;dU.prototype.aus=function(K){this.hY=IPCC.dU.viewerCounter.toString();IPCC.dU.viewerCounter++;this.K=K;if(IPCC.ce){this.qm=new IPCC.Web.UI.MarkCollection();}var J=this;function azh(bu,V){J.aEM(V);};function vw(bu,V){J.aEr(V);};K.kf(azh);K.add_markAdded(vw);K.add_markChanged(vw);K.add_inProgressMarkChanged(vw);K.add_markRemoved(vw);K.add_markReordered(vw);K.add_marksLoaded(vw);K.add_markSelectionChanged(vw);K.add_markTextSelectionChanged(vw);};dU.prototype.akf=function(){var dJ='igtile'+IPCC.dU.tileCounter.toString();IPCC.dU.tileCounter++;return dJ;};dU.prototype.yo=function(){this.OB=true;this.Eg=this.Eg&&this.YB;var J=this;var aAN=function(){if(!J.OB){return;}J.dN(J.K.dj(),J.K.bC(),J.K.ee());J.Eg=true;};window.setTimeout(aAN,0);};dU.prototype.aEM=function(V){var uR=V.get_propertyName();switch(uR){case 'magnifierWindowSize':case 'magnifierWindowPosition':case 'magnifierMagnification':if(!this.K.bC().get_magnifierIsVisible()){return;}break;case 'cursor':case 'markCursor':this.Jr=true;if(this.K.xh()===true){this.yo();}return;case 'displayedPageRectangle':if(this.K.yu===true){this.yo();return;}break;case 'redactionDraftMode':this.Jr=true;this.yo();return;}if(this.K.xh()===true){this.yo();}};dU.prototype.aEr=function(V){if(V.mark&& !this.Jr){this.qm.addMark(V.mark);}else{this.Jr=true;}if(this.K.xh()===true){this.yo();}};dU.prototype.VT=function(){this.lB=this.eO.clone();this.lB.ng(this.afR,this.ahs);this.lB.la(this.K.dj(),this.K.ee());this.qw=this.lB.clone();this.qw.ye();};dU.prototype.dN=function(av,ar,bd){try{this.OB=false;if(this.Pz===true){return;}var cu=this.K.nj();if(cu===null){return;}var cL=cu.igElements;try{this.Pz=true;if(this.Ib===undefined||av===undefined|| !(this.Ib.equals(av))){if(this.XV){if(this.kw){this.awa(this.kw);var eb=cL.oa;IPCC.Web.UI.as.removeHandler(eb,"mousedown",this.ajX);IPCC.Web.UI.as.removeHandler(eb,"mousemove",this.ajJ);IPCC.Web.UI.as.removeHandler(eb,"mouseup",this.ajL);IPCC.Web.UI.as.removeHandler(eb,"dblclick",this.ais);IPCC.Web.UI.as.removeHandler(eb,"contextmenu",this.aku);IPCC.Web.UI.as.removeHandler(cL.fM,"blur",this.NN);IPCC.Web.UI.as.removeHandler(cL.gR,"blur",this.amN);IPCC.Web.UI.as.removeHandler(cL.dH,"blur",this.NN);}delete this.kw;this.ahl(cL.qF);this.ahl(cL.CN);this.XV=false;if(this.GQ!==undefined){this.GQ.unlockAllItems();}if(this.GL!==undefined){this.GL.unlockAllItems();}this.GQ=undefined;this.GL=undefined;cu.igElements.nd.onscroll=null;cu.igElements.nd.onresize=null;}if(cu.querySelectorAll){if(cu.querySelectorAll(".pccPageLoadFail").length===0){cu.innerHTML='';}}this.K.qA(true);if(av===undefined){this.Pz=false;this.Ib=undefined;this.ayn();return;}this.Ib=av.clone();this.GQ=new IPCC.rF();this.GQ.createPyramid(this,this.K);this.GL=new IPCC.rF();this.GL.createPyramid(this,this.K);this.XV=true;this.avD(this.hY);}this.eO=ar.fB();var Pm=this.eO.pO(av);this.eO.ng(-Pm.x,-Pm.y);this.avB=this.eO.clone();this.avB.ye();this.afR=Math.round(Pm.x);this.ahs=Math.round(Pm.y);this.VT();this.asn(av,ar,bd);if(av.ae===0){this.VT();}}finally{this.Pz=false;this.Jr=false;if(this.qm){this.qm.removeAllMarks();}}this.adt(true);}catch(e){this.K.ag('display',e);throw e;}};dU.prototype.aoU=function(wg,vn,yG){if(wg[vn]===yG){return;}wg[vn]=yG;};dU.prototype.fZ=function(wg,vn,yG){if(wg.getAttribute(vn)===yG){return;}wg.setAttribute(vn,yG);};dU.prototype.zU=function(wg,vn,yG){if(wg.style[vn]===yG){return;}wg.style[vn]=yG;};dU.prototype.adt=function(aAw){if(this.Pz){return;}if(this.OB&& !this.Eg){return;}if(!aAw){try{this.YB=true;var cu=this.K.nj();if(cu){this.vj=cu.igElements.nd.scrollLeft;this.wF=cu.igElements.nd.scrollTop;}this.aqK();this.VT();this.K.bC().io(this.lB);this.K.ay('userModifiedViewState',{});this.K.qA(false);}finally{this.YB=false;}}};dU.prototype.aCH=function(ao,eO,avM){var rS=ao.rS;var qY=rS.aBK(eO,avM);if(!this.K.yu&&qY.tilesToRequest.length===0&&(qY.opaqueTiles.length+qY.translucentTiles.length)>0){this.K.yu=true;this.K.ay('pageDisplayed',{ak:this.K.ae});}rS.atP(qY);if(this.K.qg()===false){this.atN(qY.tilesToRequest);this.abR(qY.opaqueTiles,1,eO);this.abR(qY.translucentTiles,qY.opacity,eO);}};dU.prototype.avD=function(hY){var K=this.K;var cu=K.nj();var ar=K.bC();var az=this;function gk(pI){var vN=document.createElement('div');var h;for(h in pI){if(pI.hasOwnProperty(h)){vN.style[h]=pI[h];}}return vN;};var cL={};cu.igElements=cL;var iC=gk({width:'100%',height:'100%',position:'relative',overflow:ar.get_overflow(),margin:'0px',borderWidth:'0px','-moz-user-select':'text','-webkit-user-select':'text'});cL.nd=iC;iC.setAttribute('class','igViewerScroller');iC.onscroll=function(){az.adt(false);};iC.onresize=function(){var bd=K.ee();bd.width=iC.clientWidth;bd.height=iC.clientHeight;K.ay('resize',{});};var eb=gk({width:'2px',height:'2px',position:'relative',overflow:'hidden',margin:'0px',left:'0',top:'0','-ms-touch-action':'none'});iC.appendChild(eb);cL.oa=eb;eb.setAttribute('class','igViewerGraphics');this.yO=2;this.xp=2;this.vj=0;this.wF=0;var ao={};ao.rS=this.GQ;ao.YK='ig'+hY+'level';cL.qF=ao;this.ace(ao,eb,gk);ao.qh=this.qh;var md;if(K.qg()===false){md=gk({position:'absolute',display:'none',width:(ar.tn().width+4)+'px',height:(ar.tn().height+4)+'px',backgroundColor:'#000000'});}else{md=gk({position:'absolute',display:'none',width:(ar.tn().width+4)+'px',height:(ar.tn().height+4)+'px',backgroundColor:'#cccccc'});}eb.appendChild(md);cL.md=md;md.setAttribute('class','igMagnifierFrame');var qn=gk({width:'0px',height:'0px',position:'absolute',overflow:'hidden',margin:'0px',left:'0',top:'0'});cL.qn=qn;md.appendChild(qn);ao={};ao.rS=this.GL;ao.YK='ig'+hY+'maglevel';cL.CN=ao;this.ace(ao,qn,gk);ao.qh=this.atR;var KE=document.createTextNode('');cL.KE=KE;var fM=document.createElement('textarea');fM.appendChild(KE);fM.style.position='absolute';fM.style.overflow='auto';fM.style.width='80px';fM.style.height='80px';fM.style.resize='none';fM.style.display='none';iC.appendChild(fM);cL.fM=fM;var ZB=document.createTextNode('');cL.ZB=ZB;var gR=document.createElement('input');gR.type="text";gR.style.position='absolute';gR.style.overflow='hidden';gR.style.width='80px';gR.style.height='80px';gR.style.resize='none';gR.style.display='none';gR.style.padding='0px';gR.style.margin='0px';gR.style.lineHeight='normal';gR.className="no-ms-clear";var alC=function(ev){var ys=gR,aZ=parseFloat(ys.style['width']),dk=parseFloat(ys.style['height']),iI=ys.style['fontFamily'];var atG=ys.value.length>ys.placeholder.length?ys.value:ys.placeholder;var iq=IPCC.F.uo(atG,iI,{uT:'pre',fC:cL.qF.wX}),vq=12*aZ/(iq.width||1),wK=12*dk/(iq.height||1),Af=Math.floor(Math.min(vq,wK))*0.9;ys.style.fontSize=Af+'px';};gR.onkeyup=alC;gR.onfocus=function(ev){alC(ev);if(gR.setSelectionRange){var gh=gR.value.length*2;gR.setSelectionRange(gh,gh);}};iC.appendChild(gR);cL.gR=gR;var qu=document.createTextNode('');cL.qu=qu;var dH=document.createElement('textarea');dH.appendChild(qu);dH.style.position='absolute';dH.style.overflow='hidden';dH.style.width='80px';dH.style.height='80px';dH.style.resize='none';dH.style.display='none';dH.style.whiteSpace='pre-wrap';dH.style.border=0;dH.style.padding='2px';dH.style.fontStyle='normal';var aEN=function(aI){var aqS=K.JA();var dG=K.bC().fB().pM();var il=aqS.il*dG;var aq=K.mv().jE()*dG;IPCC.F.XG(dH,il,aq);};dH.onkeyup=aEN;iC.appendChild(dH);cL.dH=dH;this.kw={};this.asA(this.kw);IPCC.Web.UI.as.addHandler(eb,"mousedown",this.ajX);IPCC.Web.UI.as.addHandler(eb,"mousemove",this.ajJ);IPCC.Web.UI.as.addHandler(eb,"mouseup",this.ajL);IPCC.Web.UI.as.addHandler(eb,"dblclick",this.ais);IPCC.Web.UI.as.addHandler(eb,"contextmenu",this.aku);IPCC.Web.UI.as.addHandler(fM,"blur",this.NN);IPCC.Web.UI.as.addHandler(gR,"blur",this.amN);IPCC.Web.UI.as.addHandler(dH,"blur",this.NN);cu.appendChild(iC);};dU.prototype.ace=function(ao,gQ,gk){var rQ=gk({width:'2px',height:'2px',position:'absolute'});ao.gQ=gQ;gQ.appendChild(rQ);ao.alS=rQ;rQ.setAttribute('class','igAnchor');this.avL(ao,rQ,ao.rS,ao.YK);ao.zp=gk({position:'absolute',width:'10px',height:'10px',left:'0px',top:'0px',overflow:'visible'});rQ.appendChild(ao.zp);var jr=gk({overflow:'hidden',display:'none',position:'absolute',backgroundColor:'#00C0E0',border:'#006070 2px solid'});jr.style[this.aEx]=this.aDc(0.5);rQ.appendChild(jr);ao.jr=jr;};dU.prototype.ahl=function(ao){if(ao&&ao.MV){ao.qh.awf();ao.MV=false;}ao.gQ=null;};dU.prototype.asn=function(av,ar,bd){var K=this.K;var mA=this.lB.pO(av);var cu=K.nj();var avH=K.ayp();var BF=K.ayf();var cL=cu.igElements;var qF=cL.qF;var CN=cL.CN;var iC=cL.nd;var eb=cL.oa;var rQ=qF.alS;var md=cL.md;var qn=cL.qn;var amC=CN.alS;var JI=Math.max(0,-mA.x);var IS=Math.max(0,-mA.y);var atp=Math.max(mA.width,bd.width);var aub=Math.max(mA.height,bd.height);var mC=Math.max(0,mA.x);var lM=Math.max(0,mA.y);var ajE=false;var Bd=false;if(ar.Ar()){Bd=ar.wN();}var azf=this.yO;this.yO=Math.floor(atp-1);if(this.yO<0){this.yO=0;}var azY=this.xp;this.xp=Math.floor(aub-1);if(this.xp<0){this.xp=0;}if(K.qg()===true){if(this.xp===0){this.xp=2;}if(this.yO===0){this.yO=2;}}var aAB=this.vj;var azq=this.wF;if(!this.Eg){this.vj=Math.floor(JI);this.wF=Math.floor(IS);}if(this.abN){this.zU(rQ,'left',mC+'px');this.zU(rQ,'top',lM+'px');}var eO=ar.fB();eO.ng(JI-mC,IS-lM);this.ajd(qF,ar.fB(),eO,av,bd,Bd,mC,lM);this.zU(iC,'overflow',ar.get_overflow());if(bd.width!==iC.clientWidth||bd.height!==iC.clientHeight){bd.width=iC.clientWidth;bd.height=iC.clientHeight;ajE=true;}this.aoU(rQ.style,'visibility','visible');if(ar.get_magnifierIsVisible()){var tF=ar.get_magnifierWindowPosition();var zS=ar.tn();var LM=ar.Pp();var Mv=ar.OK();var Sp=ar.axV();var auU=Math.round(tF.x-zS.width/2+JI+LM);var atO=Math.round(tF.y-zS.height/2+IS+Mv);var Lk=Sp.pO(av);var auV=Math.max(0,-Lk.x);var atm=Math.max(0,-Lk.y);this.zU(amC,'left',Lk.x+'px');this.zU(amC,'top',Lk.y+'px');var Ly=2;md.style.width=(zS.width+Ly*2)+'px';md.style.height=(zS.height+Ly*2)+'px';qn.style.width=zS.width+'px';qn.style.height=zS.height+'px';qn.style.left=Ly+'px';qn.style.top=Ly+'px';md.style.left=auU+'px';md.style.top=atO+'px';var adK=Sp.clone();adK.ng(auV,atm);this.ajd(CN,Sp,adK,av,zS,Bd,0,0);md.style.display='block';}else{md.style.display='none';}if(K.aiH()){var it=K.JA();var arn=it.cN();var hA=this.lB.AJ(arn);var ny=(it.get_type()===IPCC.Web.UI.MarkType.Text)?64:0;var aiy=it.es* -1,aeX=it.es* -1;if(hA.width<ny){hA.width=ny;}if(hA.height<ny){hA.height=ny;}if(hA.width>bd.width){hA.width=bd.width;}if(hA.height>bd.height){hA.height=bd.height;}if(hA.x<0){hA.x=0;}if(hA.y<0){hA.y=0;}if(hA.x+hA.width+1>=bd.width){hA.x=bd.width-hA.width;aiy= -8;}if(hA.y+hA.height+1>=bd.height){hA.y=bd.height-hA.height;aeX= -8;}var js=this.GX(it);js.style.left=this.vj+hA.x+1+(it.es/2)+'px';js.style.top=this.wF+hA.y+1+(it.es/2)+'px';js.style.width=hA.width+aiy-1+'px';js.style.height=hA.height+aeX-1+'px';if(js.style.display!=='block'){js.style.display='block';js.style.whiteSpace='pre-wrap';var rO=it.bZ;var sa='';if(rO&IPCC.Web.UI.FontStyle.Italic){js.style.fontStyle="italic";}if(rO&IPCC.Web.UI.FontStyle.Bold){js.style.fontWeight="bold";}if(rO&IPCC.Web.UI.FontStyle.Underline){sa+="underline";}if(rO&IPCC.Web.UI.FontStyle.Strikeout){if(rO&IPCC.Web.UI.FontStyle.Underline){sa+=" line-through";}else{sa="line-through";}}js.style.textDecoration=sa;js.style.color=it.qy;js.style.backgroundColor=it.cE;js.style.fontFamily=it.ew;js.style['z-index']=100;var Af=it.Ep*this.lB.pM();if(Af){js.style.fontSize=Af+"px";}switch(it.jC){case IPCC.Web.UI.HorizontalAlignment.Center:js.style.textAlign='center';break;case IPCC.Web.UI.HorizontalAlignment.Right:js.style.textAlign='right';break;default:js.style.textAlign='left';break;}if(it.gF){setTimeout(function(){cL.fM.maxLength=it.gF;cL.gR.maxLength=it.gF;cL.dH.maxLength=it.gF;},0);}if(it.hX){if(BF){BF.destroy();K.WS(null);}K.WS(new PCCViewer.auG(js,it.hX));}if(it.ik()===IPCC.Web.UI.MarkType.TextAreaSignature){var dH=IPCC.F.afc();dH.style.width=cL.dH.style.width;dH.style.height=cL.dH.style.height;dH.style.fontFamily=cL.dH.style.fontFamily;dH.style.fontStyle=cL.dH.style.fontStyle;dH.style.fontWeight=cL.dH.style.fontWeight;var dG=K.bC().fB().pM();var il=it.il*dG;var aq=K.mv().jE()*dG;IPCC.F.aeL().nodeValue=it.aD||'m';cL.dH.style.fontSize=IPCC.F.XG(dH,il,aq)+'px';}js.focus();}}else{cL.fM.style.display='none';cL.gR.style.display='none';cL.dH.style.display='none';cL.fM.removeAttribute('maxlength');cL.gR.removeAttribute('maxlength');cL.dH.removeAttribute('maxlength');if(BF){BF.destroy();K.WS(null);}if(document.activeElement===cL.fM){cL.fM.blur();}if(document.activeElement===cL.gR){cL.gR.blur();}if(document.activeElement===cL.dH){cL.dH.blur();}}if(ajE){K.ay('resize',{});}if(this.yO!==azf){this.zU(eb,'width','100%');}if(this.xp!==azY){this.zU(eb,'height','100%');}if(this.vj!==aAB){iC.scrollLeft=this.vj;}if(this.wF!==azq){iC.scrollTop=this.wF;}if(avH==="PageView"&& !this.Eg){ar=K.bC();var aL=ar.fB();var wh=(+aL.pM().toFixed(6));if(K.KP!==wh){K.KP=wh;setTimeout(function(){K.ay('scaleChanged',{scaleFactor:wh,pageNumber:K.ae});},1);K.ay('scaleChanged',{scaleFactor:wh,pageNumber:K.ae});}}};dU.prototype.ajd=function(ao,lB,eO,ai,bd,Bd,mC,lM){var mA=lB.pO(ai);var oS={};oS.width=Math.max(mA.width,bd.width);oS.height=Math.max(mA.height,bd.height);this.atf(ao,lB,eO,ai,bd,mC,lM);this.ahZ(ao,eO,oS,ai,mC,lM);if(this.K.qg()===false){this.amE(ao,bd,lB,eO);}else{this.atD(ao);var ar=this.K.bC();var AL=ar.ajm();if(this.K.yu&&AL){this.aiJ(ao);}}this.asJ(ao);if(Bd){var Db=eO.AJ(Bd);if(this.abN){ao.jr.style.left=(Db.x-2)+'px';ao.jr.style.top=(Db.y-2)+'px';}else{ao.jr.style.left=(Db.x-2+mC)+'px';ao.jr.style.top=(Db.y-2+lM)+'px';}ao.jr.style.width=Db.width+'px';ao.jr.style.height=Db.height+'px';ao.jr.style.display='block';}else{ao.jr.style.display='none';}};dU.prototype.amE=function(ao,bd,lB,eO){var acY=this.K.ary();var FT={x:0,y:0,width:bd.width,height:bd.height};if(acY){var wr=acY.getBoundingClientRect();var gw=ao.gQ.getBoundingClientRect();var Mr;if(gw.left<wr.left){Mr=wr.left-gw.left;FT.x=(Mr/gw.width)*bd.width;}if(gw.right>wr.right){FT.width=wr.width;}if(gw.top<wr.top){Mr=wr.top-gw.top;FT.y=(Mr/gw.height)*bd.height;}if(gw.bottom>wr.bottom){FT.height=wr.height;}}var qw=lB.clone();qw.ye();var aod=qw.AJ(FT);this.aCH(ao,eO,aod);};dU.prototype.atf=function(ao,lB,eO,ai,bd,mC,lM){var am=this.K.eh();var gc=this.K.mp();var fu=this.K.MU();var acj=0;var J=this;if(ao.ld){acj=ao.ld.length;}if(!ao.qh|| !am){return;}var oI=this.K.axU();if(am.get_markCount()<=0&&gc.get_markCount()<=0&&fu.get_markCount()<=0&&acj<=0&& !oI){return;}if(!ao.MV){ao.qh.awg(this.K,ao,ai);ao.ld=[];ao.MV=true;}gc=this.K.mp();var bE=[];function aBw(T){if((J.K.kH()&&J.K.cd().nn()===true)||T.get_type()!==IPCC.Web.UI.MarkType.Highlight){bE.push(T);}};function aaD(T){bE.push(T);};fu.forEachMark(aaD);gc.forEachMark(aaD);am.forEachMark(aBw);if(oI){bE.push(oI);}var h,ld=ao.ld;for(h=0;h<ld.length;h++){while(h<ld.length&&(h>=bE.length||ld[h].T!==bE[h])){ao.qh.LU(ld[h]);ld.splice(h,1);}if(h<ld.length&&(this.Jr||this.qm.contains(ld[h].T))){ao.qh.aiA(ld[h]);}}for(h=ld.length;h<bE.length;h++){ld[h]={T:bE[h]};var G=ld[h];if(!G){continue;}ao.qh.awT(ld[h]);}if(this.abN){ao.qh.ahP(this.K,ao,bE,eO,this.K.aiP());}else{var aiZ=eO.clone();aiZ.ng(mC,lM);ao.qh.ahP(this.K,ao,bE,aiZ,this.K.aiP());}};dU.prototype.ahZ=function(){};dU.prototype.aqK=function(){var cu=this.K.nj();if(cu){this.afR=cu.igElements.oa.offsetLeft-this.vj;this.ahs=cu.igElements.oa.offsetTop-this.wF;}};dU.prototype.sz=function(V,dN){var gY=this.K.nj().igElements;var jD=V.domEvent;var ei;if(gY.oa.getBoundingClientRect){ei=gY.oa.getBoundingClientRect();}else{var fL=gY.oa;var vh=document.documentElement;ei={left:vh.clientLeft-vh.scrollLeft,top:vh.clientTop-vh.scrollTop};fL=fL.offsetParent;while(fL){ei.top+=fL.offsetTop-fL.scrollTop;ei.left+=fL.offsetLeft-fL.scrollLeft;fL=fL.offsetParent;}}if(jD.rawEvent.touches){if(jD.rawEvent.touches.length>0){this.Mw=new IPCC.Web.UI.Point(jD.rawEvent.touches[0].clientX-gY.nd.scrollLeft-ei.left,jD.rawEvent.touches[0].clientY-gY.nd.scrollTop-ei.top);}if(!this.Mw){this.Mw=new IPCC.Web.UI.Point(0,0);}V.windowPoint=new IPCC.Web.UI.Point(this.Mw.x,this.Mw.y);jD.button=0;}else{V.windowPoint=new IPCC.Web.UI.Point(jD.clientX-ei.left-gY.nd.scrollLeft,jD.clientY-ei.top-gY.nd.scrollTop);}var OU=this.qw.transform(V.windowPoint);V.imagePoint=new IPCC.Web.UI.Point(OU.x,OU.y);V.constrainedImagePoint=new IPCC.Web.UI.Point(OU.x,OU.y);V.constrainedImagePoint.x=Math.min(Math.max(V.constrainedImagePoint.x,0),this.Ib.width);V.constrainedImagePoint.y=Math.min(Math.max(V.constrainedImagePoint.y,0),this.Ib.height);V.pointLiesWithinImage=(V.constrainedImagePoint.x===V.imagePoint.x&&V.constrainedImagePoint.y===V.imagePoint.y);V.mark=null;try{var da=jD.target;while(!(da.ImGearMarkRelation)&&da.parentNode&&da!==document.body){da=da.parentNode;}if(da.ImGearMarkRelation){V.mark=da.ImGearMarkRelation.T;}}catch(bU){}};dU.prototype.jR=function(bU){try{bU.preventDefault();var V=new IPCC.Web.UI.MouseEventArgs();V.domEvent=bU;this.sz(V);this.K.aAJ(V);}catch(ex){this.K.ag('mouseDown',ex);}};dU.prototype.jQ=function(bU){try{bU.preventDefault();var V=new IPCC.Web.UI.MouseEventArgs();V.domEvent=bU;this.sz(V);this.K.azc(V);}catch(ex){this.K.ag('mouseMove',ex);}};dU.prototype.ma=function(bU){try{var V=new IPCC.Web.UI.MouseEventArgs();V.domEvent=bU;this.sz(V);if(!bU.rawEvent.wheelDelta){V.wheelDelta= -bU.rawEvent.detail*120;}else{V.wheelDelta=bU.rawEvent.wheelDelta;}this.K.aAQ(V);}catch(ex){this.K.ag('mouseWheel',ex);}};dU.prototype.zn=function(bU){try{bU.preventDefault();var V=new IPCC.Web.UI.MouseEventArgs();V.domEvent=bU;this.sz(V);this.K.azn(V);}catch(ex){this.K.ag('mouseDoubleClick',ex);}};dU.prototype.jX=function(bU){try{bU.preventDefault();var V=new IPCC.Web.UI.MouseEventArgs();V.domEvent=bU;this.sz(V);this.K.azS(V);}catch(ex){this.K.ag('mouseUp',ex);}};dU.prototype.Ta=function(bU){try{bU.preventDefault();var V=new IPCC.Web.UI.MouseEventArgs();V.domEvent=bU;this.sz(V);this.K.azr(V);}catch(ex){this.K.ag('contextMenu',ex);}};dU.prototype.aDh=function(bU){try{this.K.qA(true);}catch(ex){this.K.ag('textAreaBlur',ex);}};dU.prototype.aEg=function(bU){try{this.K.qA(true);}catch(ex){this.K.ag('textInputBlur',ex);}};dU.prototype.auh=function(T){var fM=this.GX(T);fM.value=T.aD||"";};dU.prototype.aCm=function(){var K=this.K;var T=K.JA();if(!T|| !K.aiH()){return;}var WJ=this.GX(T);if(document.activeElement===WJ){WJ.blur();}var aD=WJ.value;aD=aD.replace(/(\n|\n\r|\r\n|\r)/g,'\n');T.set_text(aD);};dU.prototype.GX=function(T){var gY=this.K.nj().igElements,fM=null;if(T.get_type()===IPCC.Web.UI.MarkType.TextLine){fM=gY.gR;}else if(T.get_type()===IPCC.Web.UI.MarkType.TextAreaSignature){fM=gY.dH;}else if(T.get_type()===IPCC.Web.UI.MarkType.Text){fM=gY.fM;}return fM;};module.exports=dU;},{}],56:[function(require,module,exports){var At={};At.registerNamespace=function(namespacePath){var rootObject=window;var namespaceParts=namespacePath.split('.');var getTypeName=function(){return this.__typeName;};for(var i=0;i<namespaceParts.length;i++){var currentPart=namespaceParts[i];var ns=rootObject[currentPart];var nsType=typeof(ns);if((nsType!=="undefined")&&(ns!==null)){if(nsType==="function"){throw new Error("namespace error: "+namespacePath);}if((typeof(ns)!=="object")||(ns instanceof Array)){throw new Error("Name space error: "+ns);}}if(!ns){ns=rootObject[currentPart]={};}if(!ns.__namespace){ns.__namespace=true;ns.__typeName=namespaceParts.slice(0,i+1).join('.');ns.getName=getTypeName;}rootObject=ns;}};module.exports=At;},{}],57:[function(require,module,exports){var ImGearExceptions=require('./Web/UI/ImGearExceptions');var bO={aT:function(L,an,aT){if(typeof(L)!==aT){throw new ImGearExceptions.za(an,typeof(L),aT);}},kZ:function(L,an){bO.aT(L,an,'string');},ja:function(L,an){if(!(L instanceof Date)){throw new ImGearExceptions.za(an,typeof(L),"Date");}},gG:function(L,an){bO.aT(L,an,'number');if(!isFinite(L)){throw new ImGearExceptions.sd(an,L,'The value must be a number.');}},kb:function(L,an,yq,wl){bO.aT(L,an,'number');if(L<yq||L>wl|| !isFinite(L)){throw new ImGearExceptions.sd(an,L,'The value must be a number between '+yq+' and '+wl+' inclusive.');}},TI:function(L,an,Kp){bO.aT(L,an,'number');var h;for(h=0;h<Kp.length;h++){if(L===Kp[h]){return;}}var Np='';for(h=0;h<Kp.length;h++){if(h>0){if(h===Kp.length-1){Np+=' or ';}else{Np+=', ';}}Np+=Kp[h];}throw new ImGearExceptions.sd(an,L,'The value must be '+Np+'.');},mc:function(L,an,yq,wl){bO.kb(L,an,yq,wl);if(L!==Math.floor(L)){throw new ImGearExceptions.so(an,'The value must be an integer.');}},dB:function(L,an){bO.aT(L,an,'string');if(!L.match(/#[0-9A-Fa-f]{6}/)){throw new ImGearExceptions.so(an,'Colors must be strings that begin with a # symbol, followed by 6 hexadecimal digits.');}},Wu:function(L,an){bO.aT(L,an,'string');if(!L.match(/#[0-9A-Fa-f]{6}|transparent/)){throw new ImGearExceptions.so(an,'Colors must be strings that begin with a # symbol, followed by 6 hexadecimal digits or comply with other W3C accepted color values like "transparent".');}},le:function(L,an,le,afQ){bO.aT(L,an,'number');var dg;var ZI=0;for(dg in le){if(le.hasOwnProperty(dg)){if(afQ){ZI|=le[dg];}else{if(L===le[dg]){return;}}}}var cT="";if(afQ){if((L|ZI)===ZI){return;}else{throw new ImGearExceptions.sd(an,L,'The value must be zero or more members of the '+cT+' enumeration.');}}throw new ImGearExceptions.sd(an,L,'The value must be a member of the '+cT+' enumeration.');},bL:function(L,an){bO.gG(L.x,an+'.x');bO.gG(L.y,an+'.y');},H:function(L,an){bO.gG(L.x,an+'.x');bO.gG(L.y,an+'.y');bO.gG(L.width,an+'.width');bO.gG(L.height,an+'.height');},yZ:function(L,an){if(!Array.isArray(L)){throw new ImGearExceptions.so(an,'The value must be an array.');}}};module.exports=bO;},{"./Web/UI/ImGearExceptions":85}],58:[function(require,module,exports){var ec=require('./IPCC.Util').regEnum;var Cw=function(){};Cw.registerEnum=ec;Cw.prototype={Document:0,EqualWidthPages:1,SinglePage:2,EqualFitPages:3};Cw.registerEnum('IPCC.ViewMode',false);module.exports=Cw;},{"./IPCC.Util":28}],59:[function(require,module,exports){var WT=function(pU){var ar;var av;var ly;var bd;var az=this;var zX;var FQ='';var _debug=false;var oy=IPCC.Web.UI.DebugErrorLevel.Production;var nm=[];var aN=new IPCC.Web.UI.ir();var am;var fu;var oI=null;var II=false;var yd=false;var wH;var agW=IPCC.Web.UI.ImGearArtDataServices.None;var Iz=false;var tz='';var rE;var ahf=false;var amT=false;var xT=0;var sX=true;var iy;var gc;var wo=false;var ahu=true,oQ=false;var ahw=false;var BF=null;var RK;var ZJ=false;var bD=null;this.KP=0.0;this.lQ=function(Gd){if(!_debug){return false;}return oy>=Gd;};this.mn=function(kS,Jh,bM){IPCC.jx.mn(kS,Jh,bM,FQ,zX);};this.ag=function(iZ,iO){if(!this.lQ(IPCC.Web.UI.DebugErrorLevel.Production)){return;}var cI=iZ+'() threw an exception ('+iO.name+'), "'+iO.message+'"';cI=cI.replace(/\n/g," ");this.mn(cI,IPCC.Web.UI.DebugItemCause.Exception,IPCC.Web.UI.DebugErrorLevel.Production);az.ay('exceptionThrown',{"function_name":iZ,"exception":iO,"pageNumber":az.ae});};this.GX=function(T){var gY=this.nj().igElements,fM=null;if(T.get_type()===IPCC.Web.UI.MarkType.TextLine){fM=gY.gR;}else if(T.get_type()===IPCC.Web.UI.MarkType.TextAreaSignature){fM=gY.dH;}else if(T.get_type()===IPCC.Web.UI.MarkType.Text){fM=gY.fM;}return fM;};this.get_debug=function(){return _debug;};this.set_debug=function(L){var Fz= ! !L;if(_debug===Fz){return;}_debug=Fz;this.cg('debug');};this.xf=function(){return oy;};this.GV=function(L){if(oy===L){return;}oy=L;this.cg('debugErrorLevel');};this.get_areMarksEditable=function(){return ZJ;};this.set_areMarksEditable=function(L){if(ZJ===L){return;}ZJ=L;this.cg('areMarksEditable');};this.get_cursor=function(){return bD;};this.set_cursor=function(L){if(bD===L){return;}bD=L;this.cg('cursor');};this.aoR=function(L){FQ=L;};this.ayp=function(){return FQ;};this.aqq=function(L){zX=L;};this.ark=function(L){RK=L;};this.ary=function(){return RK;};this.fE=function(aGy){this.qA(false);var h;for(h=nm.length-1;h>=0;h--){if(nm[h]instanceof IPCC.ln){nm[h].aB(true);}else{nm[h].aB();}if(nm[h]instanceof IPCC.lY){nm[h].ed(true);}else{nm[h].ed();}}nm=aGy;for(h=0;h<nm.length;h++){nm[h].mG(this);}};this.aHW=function(){var h;for(h=0;h<nm.length;h++){nm[h].aB();}};this.gg=function(agK,V){var h;for(h=0;h<nm.length;h++){if(V&&V.afq&&V.afq()){return;}if(nm[h][agK]){nm[h][agK](V);}}};this.aAO=function(iV,co){switch(iV){case 'touchstart':ly.aeS&&ly.aeS(co);break;case 'touchmove':ly.aeg&&ly.aeg(co);break;case 'touchend':ly.aeQ&&ly.aeQ(co);break;case 'doubleTap':ly.adX&&ly.adX(co);break;}};this.kf=function(R){aN.addHandler('propertyChanged',R);};this.mo=function(R){aN.removeHandler('propertyChanged',R);};this.add_mouseDown=function(R){aN.addHandler('mouseDown',R);};this.remove_mouseDown=function(R){aN.removeHandler('mouseDown',R);};this.add_mouseMove=function(R){aN.addHandler('mouseMove',R);};this.remove_mouseMove=function(R){aN.removeHandler('mouseMove',R);};this.add_mouseUp=function(R){aN.addHandler('mouseUp',R);};this.remove_mouseUp=function(R){aN.removeHandler('mouseUp',R);};this.add_contextMenu=function(R){aN.addHandler('contextMenu',R);};this.remove_contextMenu=function(R){aN.removeHandler('contextMenu',R);};this.aEi=function(R){aN.addHandler('contextMenuCommand',R);};this.aHw=function(R){aN.removeHandler('contextMenuCommand',R);};this.add_mouseWheel=function(R){aN.addHandler('mouseWheel',R);};this.remove_mouseWheel=function(R){aN.removeHandler('mouseWheel',R);};this.add_mouseOut=function(R){aN.addHandler('mouseOut',R);};this.remove_mouseOut=function(R){aN.removeHandler('mouseOut',R);};this.auS=function(R){aN.addHandler('resize',R);};this.aGU=function(R){aN.removeHandler('resize',R);};this.auW=function(R){aN.addHandler('userModifiedViewState',R);};this.aHd=function(R){aN.removeHandler('userModifiedViewState',R);};this.add_scaleChanged=function(R){aN.addHandler('scaleChanged',R);};this.remove_scaleChanged=function(R){aN.removeHandler('scaleChanged',R);};this.add_markAdded=function(R){aN.addHandler('markAdded',R);};this.remove_markAdded=function(R){aN.removeHandler('markAdded',R);};this.add_markCreating=function(R){aN.addHandler('markCreating',R);};this.remove_markCreating=function(R){aN.removeHandler('markCreating',R);};this.add_markChanged=function(R){aN.addHandler('markChanged',R);};this.remove_markChanged=function(R){aN.removeHandler('markChanged',R);};this.add_inProgressMarkChanged=function(R){aN.addHandler('inProgressMarkChanged',R);};this.remove_inProgressMarkChanged=function(R){aN.removeHandler('inProgressMarkChanged',R);};this.add_markRemoved=function(R){aN.addHandler('markRemoved',R);};this.remove_markRemoved=function(R){aN.removeHandler('markRemoved',R);};this.add_markReordered=function(R){aN.addHandler('markReordered',R);};this.remove_markReordered=function(R){aN.removeHandler('markReordered',R);};this.add_marksLoaded=function(R){aN.addHandler('marksLoaded',R);};this.remove_marksLoaded=function(R){aN.removeHandler('marksLoaded',R);};this.add_marksSaved=function(R){aN.addHandler('marksSaved',R);};this.remove_marksSaved=function(R){aN.removeHandler('marksSaved',R);};this.add_markSelectionChanged=function(R){aN.addHandler('markSelectionChanged',R);};this.remove_markSelectionChanged=function(R){aN.removeHandler('markSelectionChanged',R);};this.add_markTextSelectionChanged=function(R){aN.addHandler('markTextSelectionChanged',R);};this.remove_markTextSelectionChanged=function(R){aN.removeHandler('markTextSelectionChanged',R);};this.add_pageOpenFailed=function(R){aN.addHandler('pageOpenFailed',R);};this.add_pageDisplayed=function(R){aN.addHandler('pageDisplayed',R);};this.remove_pageOpenFailed=function(R){aN.removeHandler('pageOpenFailed',R);};this.add_textPageReady=function(R){aN.addHandler('textPageReady',R);};this.remove_textPageReady=function(R){aN.removeHandler('textPageReady',R);};this.add_selectTextMouseToolCompleted=function(R){aN.addHandler('selectTextMouseToolCompleted',R);};this.remove_selectTextMouseToolCompleted=function(R){aN.removeHandler('selectTextMouseToolCompleted',R);};this.add_exceptionThrown=function(R){aN.dO('exceptionThrown',R);};this.remove_exceptionThrown=function(R){aN.cB('exceptionThrown',R);};this.add_textExtractionFailed=function(R){aN.dO('textExtractionFailed',R);};this.remove_textExtractionFailed=function(R){aN.cB('textExtractionFailed',R);};this.cg=function(dg,xU){var R=aN.getHandler("propertyChanged");if(R){R(this,new IPCC.pE(dg,xU));}};this.nj=function(){var _parent=document.getElementById(zX);return _parent;};this.bC=function(){return ar;};this.aFc=function(){return aN;};function Fo(bu,V){Iz=true;V.pageIndex=az.ae;az.ay('markAdded',V);az.gg('ju',V);};function EB(bu,V){Iz=true;V.pageIndex=az.ae;az.ay('markChanged',V);az.gg('oj',V);};function ads(bu,V){V=new IPCC.Web.UI.MarkEventArgs();V.mark=oI;V.pageIndex=az.ae;az.ay('inProgressMarkChanged',V);az.gg('_onInProgressMarkChanged',V);};function EN(bu,V){Iz=true;V.pageIndex=az.ae;az.ay('markRemoved',V);az.gg('Ed',V);};function aFB(bu,V){az.ay('textPageReady',V);};function aFI(bu,V){az.ay('textExtractionFailed',V);};function CX(bu,V){Iz=true;V.pageIndex=az.ae;az.ay('markReordered',V);az.gg('aeo',V);};function Fw(bu,V){V.pageIndex=az.ae;az.ay('marksLoaded',V);az.gg('aeh',V);};function FR(bu,V){V.pageIndex=az.ae;az.ay('markSelectionChanged',V);az.gg('Ec',V);};function abG(bu,V){V.pageIndex=az.ae;az.ay('markTextSelectionChanged',V);};this.aAx=function(bu,V){this.gg('_onTextMarkEditCompleted',V);};function Dc(bu,V){V.pageIndex=az.ae;az.ay('propertyChanged',V);};this.nc=function(L){if(L===am){return;}if(am){am.remove_markAdded(Fo);am.remove_markChanged(EB);am.remove_markRemoved(EN);am.remove_markReordered(CX);am.remove_marksLoaded(Fw);am.remove_markSelectionChanged(FR);am.mo(Dc);am.Bp(true);}am=L;if(am){am.add_markAdded(Fo);am.add_markChanged(EB);am.add_markRemoved(EN);am.add_markReordered(CX);am.add_marksLoaded(Fw);am.add_markSelectionChanged(FR);am.add_markTextSelectionChanged(abG);am.kf(Dc);}this.cg('artPage');};this.eh=function(){return am;};this.Ip=function(L){if(L===fu){return;}if(fu){fu.remove_markAdded(Fo);fu.remove_markChanged(EB);fu.remove_markRemoved(EN);fu.remove_markReordered(CX);fu.remove_marksLoaded(Fw);fu.remove_markSelectionChanged(FR);fu.mo(Dc);fu.Bp(true);}fu=L;if(fu){fu.add_markAdded(Fo);fu.add_markChanged(EB);fu.add_markRemoved(EN);fu.add_markReordered(CX);fu.add_marksLoaded(Fw);fu.add_markSelectionChanged(FR);fu.add_markTextSelectionChanged(abG);fu.kf(Dc);}this.cg('documentArtPage');};this.MU=function(){return fu;};this.mp=function(){return gc;};this.DC=function(L){if(L===gc){return;}if(gc){gc.remove_markAdded(Fo);gc.remove_markChanged(EB);gc.remove_markRemoved(EN);gc.remove_markReordered(CX);gc.remove_marksLoaded(Fw);gc.remove_markSelectionChanged(FR);gc.mo(Dc);}gc=L;if(gc){gc.add_markAdded(Fo);gc.add_markChanged(EB);gc.add_markRemoved(EN);gc.add_markReordered(CX);gc.add_marksLoaded(Fw);gc.add_markSelectionChanged(FR);gc.kf(Dc);}this.cg('transientArtPage');};var ho;this.Cj=function(){if(!ho){if(IPCC.Web.UI.Mark){ho=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Highlight);ho.set_opacity(100);ho.set_fillColor('#3366CC');ho.set_fillVisible(true);}}return ho;};this.Zi=function(L){agW=L;this.cg('artServiceOption');};this.WP=function(){return agW;};this.oq=function(T,nV){if(oI===T){return;}if(oI){oI.remove_propertyChanged(ads);}if(T&& !oI){var V=new IPCC.Web.UI.MarkEventArgs();V.mark=nV?nV:T;V.pageIndex=this.ae;this.ay('markCreating',V);}oI=T;if(oI){oI.add_propertyChanged(ads);}this.cg('inProgressMark');};this.axU=function(){return oI;};this.AR=function(L){if(L===av){return;}av=L;this.yu=false;ar.pn();this.cg('image');};this.dj=function(){return av;};this.acD=function(L){if(L===II){return;}II=L;this.cg('II');};this.aiP=function(){return II;};this.Is=function(){var wH=this.JA();var alQ=this.GX(wH);var aqQ=alQ.value;setTimeout(function(){alQ.setSelectionRange(0,aqQ.length);},1);};this.vV=function(T){this.qA(false);ly.auh(T);yd=true;wH=T;this.cg('yd');};this.ahJ=function(ad,cG){if(this.kH()&&this.cd().nn()===true){var hc=this.cd().hB();var h=ad;for(;h<ad+cG;h++){var fb=hc.kk(h);var uO='#3366CC';var Io='#3366CC';gc.WV(fb.bm,Io,uO,false,h);}}};this.aFK=function(al){var h;try{var aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Highlight);if(!ho){ho=az.Cj();}for(h in ho){if(ho.hasOwnProperty(h)){aF[h]=ho[h];}}aF.set_rectangle({x:al.x,y:al.y,width:al.width,height:al.height});az.oq(aF);gc.addMark(aF);return aF;}catch(axi){var aum=axi.message;window.console.log(aum);}};this.FZ=function(cO){var FL;var hc;var TZ;FL=az.cd();hc=az.cd().hB();function aqh(Wz){var sv=Wz.tx();if((cO.x>=sv.x-10&&cO.x<=sv.x+sv.width+1)&&(cO.y>=sv.y-1&&cO.y<=sv.y+sv.height+1)){return true;}sv=undefined;};if(!TZ){for(var h=0;h<hc.eF();h++){if(aqh(hc.kk(h))){TZ=h;break;}}}return TZ;};this.avG=false;this.yk=function(cU){if(cU===undefined){return;}if(az.kH()&&az.cd().nn()===true){var Gu=az.cd().hB().eF();IPCC.bO.mc(cU,'textIndex',0,Gu);az.bC().yk(cU);az.mp().Fp(function(T){if(T.xj!==true&&T.get_type()!==IPCC.Web.UI.MarkType.ImageStampAnnotation){az.mp().wV(T);}});if(az.xh()===true){az.dN();}}};this.Vc=function(){var AW=az.bC().get_transientHighlightMarks();while(AW.length>0){az.mp().removeMark(AW.pop());}};this.Mk=function(ts,cG){if(az.kH()&&az.cd().nn()===true){var h=ts;var hc=this.cd().hB();var dq=ts+cG;if(!ho){ho=az.Cj();}var AW=az.bC().get_transientHighlightMarks();for(;h<dq;h++){var fb=hc.kk(h);AW.push(gc.avx(fb.bm,ho,h));}}};this.aFN=function(aID,cG){var ar=az.bC();for(var bz=cG-1;bz>cG;bz--){var bp=ar.iA[bz];gc.removeMark(bp.T);}};this.tm=function(cU){if(cU===undefined){return;}var fb;var ar=az.bC();var gU=ar.BO();var uO='#3366CC';var Io='#3366CC';var cZ=100;if(!ho){ho=az.Cj();}cZ=ho.get_opacity();if(!cZ){cZ=100;}uO=ho.get_fillColor();if(uO===undefined){uO='#3366CC';}var hc=az.cd().hB();if(gU===undefined){fb=hc.kk(cU);var T=gc.WV(fb.bm,Io,uO,false,cZ,cU);ar.tm(cU,T,fb.kO);return;}var bz;function aci(af,axt){for(bz=ar.iA.length-1;bz>=0;bz--){var bp=ar.iA[bz];if(bp.cU===af){ar.iA.splice(bz,1);gc.removeMark(bp.T);ar.anJ(axt);ar.asB(af);return bz;}}return-1;};function Le(af){fb=hc.kk(af);var anj=gc.WV(fb.bm,Io,uO,false,cZ,af);if(ar.tm(af,anj,fb.kO)===false){gc.removeMark(anj);}};var NJ=ar.ahV();var h;if(cU>gU){for(h=gU;h<=cU;h++){if(h===cU){if(h<NJ){continue;}Le(h);}else if(h>=NJ){if(h===gU){continue;}Le(h);}else{aci(h,cU);}}}else if(cU<gU){for(h=gU;h>=cU;h--){if(h===cU){if(h>=NJ){continue;}Le(h);}else if(h<NJ){if(h===gU){continue;}Le(h);}else{aci(h,cU);}}}};this.Ei=function(){var afs="";try{var ar=az.bC();if(az.bC().Jm()){var are=az.cd().hB();if(ar.iA.length>0){var FS=[];for(var h=0;h<ar.iA.length;h++){FS.push(ar.iA[h].cU);}if(FS[0]>FS[1]){FS.reverse();}for(h=0;h<FS.length;h++){afs+=are.kk(FS[h]).axu();}}}return afs;}catch(e){window.console.log(e.message);}};this.qA=function(aCB){if(yd){if(aCB){ly.aCm();}yd=false;wH=null;this.aAx();this.cg('yd');az.dN();}};this.aiH=function(){return yd;};this.JA=function(){return wH;};this.Ce=function(){var wH=this.JA();if(!wH){return null;}var YI=wH.ik();if(YI===IPCC.Web.UI.MarkType.TextLine){return 'singleline';}else if(YI===IPCC.Web.UI.MarkType.TextAreaSignature){return 'multiline';}else if(YI===IPCC.Web.UI.MarkType.Text){return 'multiline';}};this.adM=function(L){amT=L;};this.UE=function(){return amT;};this.WS=function(L){BF=L;};this.ayf=function(){return BF;};this.amY=function(L){if(L===xT){return;}xT=L;this.cg('xT');};this.Wt=function(){return xT;};this.Bp=function(L){if(am){am.Bp(L);}};this.Pq=function(){if(am){return am.Pq();}return true;};this.awR=function(aFY){var bd=ly.axj(this.nj());this.apP(bd);};this.apP=function(L){if(L===bd){return;}bd=L;this.cg('windowSpace');};this.ee=function(){return bd;};this.dN=function(){ly.dN(av,ar,bd);};this.GW=function(){if(this.qg()===false){var lB=ar.fB();var K=this;var mA=lB.pO(av);var cu=K.nj();var cL=cu.igElements;var ao=cL.qF;var JI=Math.max(0,-mA.x);var IS=Math.max(0,-mA.y);var mC=Math.max(0,mA.x);var lM=Math.max(0,mA.y);var eO=ar.fB();eO.ng(JI-mC,IS-lM);ly.amE(ao,bd,lB,eO);}};this.Gx=function(L){rE=L;};this.uY=function(){return rE;};this.cd=function(){return iy.cd();};var kC=0;this.mv=function(){return iy;};this.Cz=function(L){if(L===this.mv()){return;}iy=L;if(iy){iy.AO(aFB);iy.Ac(aFI);}};this.kH=function(){return sX;};this.FK=function(L){sX=L;this.cg('textRequired');};this.zz=function(){return wo;};this.Gl=function(L){if(wo===L){return;}wo=L;this.cg('requireRequestsOptimize');};this.xh=function(){return ahu;};this.Ys=function(L){ahu=L;this.cg('autoUpdate');};var qj=false;this.mr=function(){return qj;};this.qa=function(L){if(typeof L!=="boolean"){return;}if(L===qj){return;}qj=L;if(am){var acO=false;am.forEachMark(function(T){if(T.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction){acO=true;}});if(acO===true){am.qa(qj);}}};this.jS=function(){return kC;};this.wR=function(L){if(kC===L){return;}if(isNaN(L)){return;}kC=L;this.cg('serviceResponseTimeout');};var oc='';this.Uz=function(ff,ah){if(ff!==''){ff='/'+ff;}ah=ah||'';if(ah===null||ah===''){if(ff==='/Attributes'){if(/^[\x00-\x7F]*$/.test(av.get_identifier())){return oc+'/Page/q/'+av.ae.toString()+ff+'?DocumentID=u'+encodeURIComponent(av.get_identifier());}else{return oc+'/Page/q/'+av.ae.toString()+ff+'?DocumentID=e'+av.get_encodedIdentifier();}}else{if(/^[\x00-\x7F]*$/.test(av.get_identifier())){return oc+'/Page/q/'+av.ae.toString()+ff+'?DocumentID=u'+encodeURIComponent(av.get_identifier())+'&Quality=85&ContentType=jpeg';}else{return oc+'/Page/q/'+av.ae.toString()+ff+'?DocumentID=e'+av.get_encodedIdentifier()+'&Quality=85&ContentType=jpeg';}}}else{if(/^[\x00-\x7F]*$/.test(av.get_identifier())){return oc+'/Page/q/'+av.ae.toString()+ff+'?DocumentID=u'+encodeURIComponent(av.get_identifier())+'&'+ah;}else{return oc+'/Page/q/'+av.ae.toString()+ff+'?DocumentID=e'+av.get_encodedIdentifier()+'&'+ah;}}};this.ayE=function(ff,ah){ff=ff||'Art';ah=ah||'';if(ah===null||ah===''){if(ff==='Art'){return oc+'/Page/q/'+av.ae.toString()+'/'+ff+'?DocumentID=e'+av.get_encodedIdentifier();}}else{return oc+'/Page/q/'+av.ae.toString()+'/'+ff+'?DocumentID=e'+av.get_encodedIdentifier()+'&'+ah;}};this.XJ=function(CJ){if(Iz===false){if(CJ){CJ();}return;}IPCC.F.me.eg({method:'POST',url:this.ayE('Art'),headers:{'Content-Type':'application/json'},body:am.saveToJson()}).then(function(){if(CJ){CJ();}});};this.tP=function(){return oc;};this.UN=function(L){oc=L;this.cg('imageHandlerUrl');};this.qg=function(){return ahf;};this.PE=function(L){ahf=L;};this.axH=function(){return ahw;};this.aeF=function(L){ahw=L;};this.nk=function(){return tz;};this.vS=function(L){tz=L;tz.tabIndex= -1;};this.iP=function(){return oQ;};this.oR=function(L){if(typeof L!=="boolean"){return;}if(L===oQ){return;}oQ=L;};this.aAJ=function(V){if(yd){this.qA(true);}else{this.ay('mouseDown',V);this.gg('jR',V);}};this.azc=function(V){this.ay('mouseMove',V);this.gg('jQ',V);};this.azS=function(V){this.ay('mouseUp',V);this.gg('jX',V);};this.aAQ=function(V){this.ay('mouseWheel',V);this.gg('ma',V);};this.azn=function(V){this.ay('mouseDoubleClick',V);this.gg('zn',V);};this.azr=function(V){this.ay('contextMenu',V);this.gg('Ta',V);};this.azE=function(V){this.ay('contextMenuCommand',V);};this.aAL=function(V){this.ay('mouseOut',V);this.gg('po',V);};this.azG=function(V){this.ay('touchStart',V);this.gg('jR',V);};this.aAP=function(V){this.ay('touchMove',V);this.gg('jQ',V);};this.azw=function(V){this.ay('touchEnd',V);this.gg('jX',V);};this.aAt=function(V){this.ay('touchCancel',V);this.gg('Iy',V);};this.ay=function(cY,V){var R=aN.getHandler(cY);if(R!==null){R(az,V);}};var afW=function(K,pU){ar=new IPCC.WZ();function zf(bu,V){az.ay('propertyChanged',V);};ar.kf(zf);ly=new IPCC.dU(K,pU);if(IPCC.ce){ly.qh=new IPCC.ce.cr(K);ly.atR=new IPCC.ce.cr(K);}};if(pU===false){afW(this,false);}else{afW(this,true);}return this;};module.exports=WT;},{}],60:[function(require,module,exports){var WZ=function(){var rk=0;var qv=1;var kh=1;var AL=false;var de=new IPCC.fN();var BQ=false;var wL;var qt;var KY=false;var Bx=new IPCC.DB(200,150,96,96);var tF={x:0,y:0};var Mf=3;var LM=0,Mv=0;var gL=0.2;var rU=IPCC.Web.UI.MarkHandleMode.HideSideHandlesWhenClose;var Bj=new IPCC.fN();var Fd=0;var Fi=0;var AZ=false;var aaC;this.iA=[];var ZE=IPCC.Web.UI.ScrollBars.Auto;var AW=[];this.get_transientHighlightMarks=function(){return AW;};this.get_scrollBars=function(){return ZE;};this.get_overflow=function(){switch(ZE){case IPCC.Web.UI.ScrollBars.None:return 'hidden';case IPCC.Web.UI.ScrollBars.Both:return 'scroll';}return 'auto';};this.set_scrollBars=function(L){ZE=L;this.cg('scrollBars');};var aN=new IPCC.Web.UI.ir();this.kf=function(R){aN.addHandler('propertyChanged',R);};this.mo=function(R){aN.removeHandler('propertyChanged',R);};this.cg=function(dg){var R=aN.getHandler('propertyChanged');if(R){R(this,new IPCC.pE(dg));}};var onSelectionChanged=function(ar){var V={};V.selectionIsVisible=BQ;V.selectionRectangle=ar.wN();ar.cg('selection');};this.pn=function(){wL={x:0,y:0};qt={x:0,y:0};if(!BQ){return;}BQ=false;onSelectionChanged(this);};this.showSelection=function(dQ){wL.x=dQ.x;wL.y=dQ.y;qt.x=dQ.x+dQ.width;qt.y=dQ.y+dQ.height;BQ=true;onSelectionChanged(this);};this.Ca=function(cO){wL.x=cO.x;wL.y=cO.y;qt.x=cO.x;qt.y=cO.y;BQ=true;onSelectionChanged(this);};this.xO=function(cO){qt.x=cO.x;qt.y=cO.y;onSelectionChanged(this);};this.Ar=function(){return BQ;};this.wN=function(){var H=new IPCC.Web.UI.Rectangle(Math.min(wL.x,qt.x),Math.min(wL.y,qt.y),0,0);H.width=Math.max(wL.x,qt.x)-H.x;H.height=Math.max(wL.y,qt.y)-H.y;return H;};var Kn=function(){if(!KY){Bj.aqb();return;}Bj.PQ(de);Bj.ng(-tF.x,-tF.y);Bj.scale(Mf,Mf);Bj.ng(Bx.width/2,Bx.height/2);};this.hideMagnifier=function(){KY=false;Kn();this.cg('magnifierIsVisible');};this.showMagnifier=function(bY){tF.x=bY.x;tF.y=bY.y;KY=true;Kn();this.cg('magnifierWindowPosition');this.cg('magnifierIsVisible');};this.get_magnifierIsVisible=function(){return KY;};this.get_magnifierWindowPosition=function(){return{x:tF.x,y:tF.y};};this.get_magnifierMagnification=function(){return Mf;};this.set_magnifierMagnification=function(L){Mf=L;Kn();this.cg('magnifierMagnification');};this.Pp=function(){return LM;};this.Vd=function(L){LM=L;this.cg('magnifierXOffset');};this.OK=function(){return Mv;};this.Vz=function(L){Mv=L;this.cg('magnifierYOffset');};this.tn=function(){return{width:Bx.width,height:Bx.height};};this.set_magnifierWindowSize=function(newMagnifierSize){Bx.width=newMagnifierSize.width;Bx.height=newMagnifierSize.height;Kn();this.cg('magnifierWindowSize');};this.axV=function(){return Bj.clone();};this.fB=function(){return de.clone();};this.VE=function(){return gL;};this.Um=function(L){gL=L;this.cg('markHandleSize');};this.zV=function(){return rU;};this.Kg=function(L){rU=L;this.cg('markHandleMode');};this.io=function(L){if(L===de||L.aFz(de)){return;}if(!L.aiB()){throw new IPCC.Web.UI.ImGearInvalidOperationException('The viewing state of the control is invalid.');}de.PQ(L);Kn();this.cg('displayedPageRectangle');};var aao='0';this.get_presentationQuality=function(){return aao;};this.set_presentationQuality=function(L){aao=L;this.cg('presentationQuality');};this.axD=function(){return qv;};this.Cb=function(L){qv=L;};this.arQ=function(){return rk;};this.Fk=function(L){rk=L;};this.atd=function(){return kh;};this.Ga=function(L){if(L!==kh){AL=true;}kh=L;};this.apF=function(L){AL=L;};this.ajm=function(){return AL;};var RC=IPCC.aP.Default;this.aIz=function(){return RC;};this.ath=function(L){if(RC!==L){RC=L;this.cg('markCursor');}};this.yk=function(cU){Fd=cU;AZ=false;Fi=0;};this.Mk=function(ts,cG){if(ts!==Fd){Fd=ts;}Fi=cG;AZ=true;};this.VC=function(){if(AZ===true){for(var h=0;h<this.iA.length;h++){this.iA[h].T.set_visible(false);}AZ=false;}};this.Jm=function(){return AZ;};this.tm=function(cU,T,kO){aaC=cU;if(cU!==undefined){if(this.iA.length>0&&this.iA[this.iA.length-1].cU===cU){return false;}this.iA.push({cU:cU,T:T,kO:kO});AZ=true;Fi++;}else{this.iA=[];Fi=0;}return true;};this.BO=function(){return aaC;};this.anJ=function(L){if(L===undefined){return;}aaC=L;};var alV;this.aEX=function(){return alV;};this.asB=function(L){if(L===undefined){return;}alV=L;};this.ahV=function(){return Fd;};this.aGA=function(){return Fd+Fi;};this.Cd=function(){return this.iA.length;};this.pn();this.hideMagnifier();return this;};module.exports=WZ;},{}],61:[function(require,module,exports){var Bu={};Bu.amM=function(bf){if(!this.EL[0][0][0]){this.QZ();}var h,bz,dW,IP,Zc,lT=this.EL[0][4],uC=this.EL[1],sy=bf.length,Pb=1;if(sy!==4&&sy!==6&&sy!==8){throw new IPCC.Web.UI.ImGearArgumentException('none',"invalid aes key size");}this.bf=[IP=bf.slice(0),Zc=[]];for(h=sy;h<4*sy+28;h++){dW=IP[h-1];if(h%sy===0||(sy===8&&h%sy===4)){dW=lT[dW>>>24]<<24^lT[dW>>16&255]<<16^lT[dW>>8&255]<<8^lT[dW&255];if(h%sy===0){dW=dW<<8^dW>>>24^Pb<<24;Pb=Pb<<1^(Pb>>7)*283;}}IP[h]=IP[h-sy]^dW;}for(bz=0;h;bz++,h--){dW=IP[bz&3?h:h-4];if(h<=4||bz<4){Zc[bz]=dW;}else{Zc[bz]=uC[0][lT[dW>>>24]]^uC[1][lT[dW>>16&255]]^uC[2][lT[dW>>8&255]]^uC[3][lT[dW&255]];}}};Bu.amM.prototype={ZH:function(cJ){return this.axP(cJ,1);},EL:[[[],[],[],[],[]],[[],[],[],[],[]]],QZ:function(){var RF=this.EL[0],uC=this.EL[1],lT=RF[4],aBO=uC[4],h,bv,yU,fD=[],afh=[],Ur,agr,aht,gy,Lt,QF;for(h=0;h<256;h++){afh[(fD[h]=h<<1^(h>>7)*283)^h]=h;}for(bv=yU=0;!lT[bv];bv^=Ur||1,yU=afh[yU]||1){gy=yU^yU<<1^yU<<2^yU<<3^yU<<4;gy=gy>>8^gy&255^99;lT[bv]=gy;aBO[gy]=bv;aht=fD[agr=fD[Ur=fD[bv]]];QF=aht*0x1010101^agr*0x10001^Ur*0x101^bv*0x1010100;Lt=fD[gy]*0x101^gy*0x1010100;for(h=0;h<4;h++){RF[h][bv]=Lt=Lt<<24^Lt>>>8;uC[h][gy]=QF=QF<<24^QF>>>8;}}for(h=0;h<5;h++){RF[h]=RF[h].slice(0);uC[h]=uC[h].slice(0);}},axP:function(nC,HV){if(nC.length!==4){throw new IPCC.Web.UI.ImGearArgumentException('blocksize','Invalid block size');}var bf=this.bf[HV],cW=nC[0]^bf[0],eS=nC[HV?3:1]^bf[1],fc=nC[2]^bf[2],fD=nC[HV?1:3]^bf[3],xc,afT,ahL,aDt=bf.length/4-2,h,CG=4,eJ=[0,0,0,0],FG=this.EL[HV],Oc=FG[0],Oq=FG[1],NX=FG[2],NR=FG[3],lT=FG[4];for(h=0;h<aDt;h++){xc=Oc[cW>>>24]^Oq[eS>>16&255]^NX[fc>>8&255]^NR[fD&255]^bf[CG];afT=Oc[eS>>>24]^Oq[fc>>16&255]^NX[fD>>8&255]^NR[cW&255]^bf[CG+1];ahL=Oc[fc>>>24]^Oq[fD>>16&255]^NX[cW>>8&255]^NR[eS&255]^bf[CG+2];fD=Oc[fD>>>24]^Oq[cW>>16&255]^NX[eS>>8&255]^NR[fc&255]^bf[CG+3];CG+=4;cW=xc;eS=afT;fc=ahL;}for(h=0;h<4;h++){eJ[HV?3& -h:h]=lT[cW>>>24]<<24^lT[eS>>16&255]<<16^lT[fc>>8&255]<<8^lT[fD&255]^bf[CG++];xc=cW;cW=eS;eS=fc;fc=fD;fD=xc;}return eJ;}};module.exports=Bu;},{}],62:[function(require,module,exports){var hG={};hG.Hw={mb:function(cP){var eJ="",qJ=IPCC.Web.gT.ub(cP),h,dW;for(h=0;h<qJ/8;h++){if((h&3)===0){dW=cP[h/4];}eJ+=String.fromCharCode(dW>>>24);dW<<=8;}return decodeURIComponent(escape(eJ));},uG:function(cT){cT=unescape(encodeURIComponent(cT));var eJ=[],h,dW=0;for(h=0;h<cT.length;h++){dW=dW<<8|cT.charCodeAt(h);if((h&3)===3){eJ.push(dW);dW=0;}}if(h&3){eJ.push(IPCC.Web.gT.Gs(8*(h&3),dW));}return eJ;}};hG.rc={wk:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mb:function(cP,aDk,bQ){var eJ="",h,fm=0,fc=IPCC.Web.hG.rc.wk,vm=0,qJ=IPCC.Web.gT.ub(cP);if(bQ){fc=fc.substr(0,62)+'-_';}for(h=0;eJ.length*6<qJ;){eJ+=fc.charAt((vm^cP[h]>>>fm)>>>26);if(fm<6){vm=cP[h]<<(6-fm);fm+=26;h++;}else{vm<<=6;fm-=6;}}while((eJ.length&3)&& !aDk){eJ+="=";}return eJ;},uG:function(cT,bQ){cT=cT.replace(/\s|=/g,'');var eJ=[],h,fm=0,fc=IPCC.Web.hG.rc.wk,vm=0,bv;if(bQ){fc=fc.substr(0,62)+'-_';}for(h=0;h<cT.length;h++){bv=fc.indexOf(cT.charAt(h));if(bv<0){throw new IPCC.Web.UI.ImGearArgumentException('base64','Invalid base64');}if(fm>26){fm-=26;eJ.push(vm^bv>>>fm);vm=bv<<(32-fm);}else{fm+=6;vm^=bv<<(32-fm);}}if(fm&56){eJ.push(IPCC.Web.gT.Gs(fm&56,vm,1));}return eJ;}};hG.HF={mb:function(cP){return IPCC.Web.hG.rc.mb(cP,1,1);},uG:function(cT){return IPCC.Web.hG.rc.uG(cT,1);}};module.exports=hG;},{}],63:[function(require,module,exports){var qR={};qR.Yd=function(qR){if(!this.bf[0]){this.QZ();}if(qR){this.eW=qR.eW.slice(0);this.zB=qR.zB.slice(0);this.cG=qR.cG;}else{this.aeU();}};qR.Yd.qR=function(cJ){return(new IPCC.Web.qR.Yd()).asy(cJ).aAT();};qR.Yd.prototype={aIh:512,aeU:function(){this.eW=this.agZ.slice(0);this.zB=[];this.cG=0;return this;},asy:function(cJ){if(typeof cJ==="string"){cJ=IPCC.Web.Codec.Hw.uG(cJ);}var h,eS=this.zB=IPCC.Web.gT.YH(this.zB,cJ),amg=this.cG,aDw=this.cG=amg+IPCC.Web.gT.ub(cJ);for(h=512+amg& -512;h<=aDw;h+=512){this.oG(eS.splice(0,16));}return this;},aAT:function(){var h,eS=this.zB,eW=this.eW;eS=IPCC.Web.gT.YH(eS,[IPCC.Web.gT.Gs(1,1)]);for(h=eS.length+2;h&15;h++){eS.push(0);}eS.push(Math.floor(this.cG/0x100000000));eS.push(this.cG|0);while(eS.length){this.oG(eS.splice(0,16));}this.aeU();return eW;},agZ:[],bf:[],QZ:function(){var h=0,Hh=2,bK;function amB(bv){return(bv-Math.floor(bv))*0x100000000|0;};aDr:for(;h<64;Hh++){for(bK=2;bK*bK<=Hh;bK++){if(Hh%bK===0){continue aDr;}}if(h<8){this.agZ[h]=amB(Math.pow(Hh,1/2));}this.bf[h]=amB(Math.pow(Hh,1/3));h++;}},oG:function(asi){var h,dW,cW,eS,kU=asi.slice(0),eW=this.eW,cc=this.bf,Vq=eW[0],rg=eW[1],Gt=eW[2],Qw=eW[3],sp=eW[4],Ry=eW[5],Fg=eW[6],Uj=eW[7];for(h=0;h<64;h++){if(h<16){dW=kU[h];}else{cW=kU[(h+1)&15];eS=kU[(h+14)&15];dW=kU[h&15]=((cW>>>7^cW>>>18^cW>>>3^cW<<25^cW<<14)+(eS>>>17^eS>>>19^eS>>>10^eS<<15^eS<<13)+kU[h&15]+kU[(h+9)&15])|0;}dW=(dW+Uj+(sp>>>6^sp>>>11^sp>>>25^sp<<26^sp<<21^sp<<7)+(Fg^sp&(Ry^Fg))+cc[h]);Uj=Fg;Fg=Ry;Ry=sp;sp=Qw+dW|0;Qw=Gt;Gt=rg;rg=Vq;Vq=(dW+((rg&Gt)^(Qw&(rg^Gt)))+(rg>>>2^rg>>>13^rg>>>22^rg<<30^rg<<19^rg<<10))|0;}eW[0]=eW[0]+Vq|0;eW[1]=eW[1]+rg|0;eW[2]=eW[2]+Gt|0;eW[3]=eW[3]+Qw|0;eW[4]=eW[4]+sp|0;eW[5]=eW[5]+Ry|0;eW[6]=eW[6]+Fg|0;eW[7]=eW[7]+Uj|0;}};module.exports=qR;},{}],64:[function(require,module,exports){var DV={};DV.aAg={an:"cbc",ajw:function(Ok,Tw,gl,vD){if(vD&&vD.length){throw new IPCC.Web.UI.ImGearArgumentException('data','cannot authenticate data');}if(IPCC.Web.gT.ub(gl)!==128){throw new IPCC.Web.UI.ImGearArgumentException('iv','invalid data');}var h,kU=IPCC.Web.gT,Sg=kU.akj,qJ=kU.ub(Tw),aeY=0,pB=[];if(qJ&7){throw new IPCC.Web.UI.ImGearInvalidOperationException('padding works only for multiple bytes');}for(h=0;aeY+128<=qJ;h+=4,aeY+=128){gl=Ok.ajw(Sg(gl,Tw.slice(h,h+4)));pB.splice(h,0,gl[0],gl[1],gl[2],gl[3]);}qJ=(16-((qJ>>3)&15))*0x1010101;gl=Ok.ajw(Sg(gl,kU.YH(Tw,[qJ,qJ,qJ,qJ]).slice(h,h+4)));pB.splice(h,0,gl[0],gl[1],gl[2],gl[3]);return pB;},ZH:function(Ok,Ni,gl,vD){if(vD&&vD.length){throw new IPCC.Web.UI.ImGearArgumentException(vD,"cbc can't authenticate data");}if(IPCC.Web.gT.ub(gl)!==128){throw new IPCC.Web.UI.ImGearArgumentException('iv',"cbc iv must be 128 bits");}if((IPCC.Web.gT.ub(Ni)&127)|| !Ni.length){throw new IPCC.Web.UI.ImGearInvalidOperationException("cbc ciphertext must be a positive multiple of the block size");}var h,kU=IPCC.Web.gT,Sg=kU.akj,sr,sS,pB=[];vD=vD||[];for(h=0;h<Ni.length;h+=4){sr=Ni.slice(h,h+4);sS=Sg(gl,Ok.ZH(sr));pB.splice(h,0,sS[0],sS[1],sS[2],sS[3]);gl=sr;}sr=pB[h-1]&255;if(sr===0||sr>16){throw new IPCC.Web.UI.ImGearInvalidOperationException('pkcs#5 padding corrupt');}sS=sr*0x1010101;if(!kU.axq(kU.VD([sS,sS,sS,sS],0,sr*8),kU.VD(pB,pB.length*32-sr*8,pB.length*32))){throw new IPCC.Web.UI.ImGearInvalidOperationException('2pkcs#5 padding corrupt');}return kU.VD(pB,0,pB.length*32-sr*8);}};module.exports=DV;},{}],65:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var LV=function(){var bE=[];var aN=new IPCC.Web.UI.ir();var fq=new IPCC.Web.UI.MarkCollection();var J=this;var IM=true;this.asf=[];function onMarkSelectionChanged(bu,V){var T=V.mark;if(T.aA&&T.aA[0]&&T.aA[0].dM===false){return;}var cq;var aCy=V.mark.get_selected();if(T.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&T.bS!==undefined){fq.remove_markAdded(onMarkSelectionChanged);fq.remove_markRemoved(onMarkSelectionChanged);for(var h=0;h<bE.length;h++){if(bE[h].bS===T.bS){if(bE[h].get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction){cq=bE[h];}else{bE[h].set_selected(V.mark.get_selected());}}}fq.add_markAdded(onMarkSelectionChanged);fq.add_markRemoved(onMarkSelectionChanged);if(cq){cq.set_selected(aCy);}return;}else if(T.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction){fq.remove_markAdded(onMarkSelectionChanged);fq.remove_markRemoved(onMarkSelectionChanged);for(var aC=0;aC<T.aA.length;aC++){T.aA[aC].set_selected(V.mark.get_selected());}fq.add_markAdded(onMarkSelectionChanged);fq.add_markRemoved(onMarkSelectionChanged);}var en=new IPCC.Web.UI.MarkEventArgs();en.mark=T;en.zIndex=J.ov(T);en.length=1;J.ay('markSelectionChanged',en);};fq.add_markAdded(onMarkSelectionChanged);fq.add_markRemoved(onMarkSelectionChanged);var aEF=fq.addMark;fq.addMark=function(T){if(J.ov(T)<0){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot select a Mark that is not associated with the ArtPage.');}if(!fq.contains(T)){aEF.call(fq,T);T.cg('selected');}};var aEs=fq.addMarks;fq.addMarks=function(xZ){var qm=[];function Vi(T){if(J.ov(T)<0){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot select a Mark that is not associated with the ArtPage.');}if(!fq.contains(T)){qm.push(T);}};xZ.forEach(Vi,{});aEs.call(fq,xZ);var h;for(h=0;h<qm.length;h++){qm[h].cg('selected');}};var aDT=fq.removeMark;fq.removeMark=function(T){if(fq.contains(T)){aDT.call(fq,T);T.cg('selected');}};var aDo=fq.removeAllMarks;fq.removeAllMarks=function(){var qm=[];function Vi(T){if(fq.contains(T)){qm.push(T);}};fq.forEach(Vi,{});aDo.call(fq);var h;for(h=0;h<qm.length;h++){qm[h].cg('selected');}};function akt(km){IPCC.bO.mc(km,'zIndex',0,bE.length-1);};this.Uv=function(){return bE.length;};this.ajo=function(){var h=0;for(;h<bE.length;h++){if(bE[h].get_type()!==IPCC.Web.UI.MarkType.HighlightText&&bE[h].get_type()!==IPCC.Web.UI.MarkType.Highlight&& !(bE[h].get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&bE[h].bS!==undefined)){break;}}return h;};this.zQ=function(){return fq;};this.Bp=function(L){if(L===IM){return;}IM=L;this.cg('IM');};this.Pq=function(){return IM;};var qj=false;this.mr=function(){return qj;};this.qa=function(L){if(typeof L!=="boolean"){return;}qj=L;this.cg('redactionDraftMode');};function oj(bu,V){if(V.get_propertyName()==='selected'){return;}var en=new IPCC.Web.UI.MarkEventArgs();en.mark=bu;en.zIndex=J.ov(bu);en.propertyName=V.dg;en.length=1;if(en.mark.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction||(en.mark.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&en.mark.bS!=='undefined')){J.asM(bu);}J.ay('markChanged',en);};function AS(bu){var en=new IPCC.Web.UI.MarkEventArgs();en.mark=bu;en.zIndex=J.ov(bu);en.length=1;J.ay('markTextSelectionChanged',en);};function Qc(bu,V){var en=new IPCC.Web.UI.CommentEventArgs();en.mark=bu;en.comment=V.comment;en.index=V.index;J.ay('commentAdded',en);};function MZ(bu,V){var en=new IPCC.Web.UI.CommentEventArgs();en.mark=bu;en.comment=V.comment;en.index=V.index;J.ay('commentRemoved',en);};function NG(bu,V){var en=new IPCC.Web.UI.CommentEventArgs();en.mark=bu;en.comment=V.comment;en.index=V.index;J.ay('commentChanged',en);};this.MY=function(T,pN){pN=pN||{};var km=this.ov(T);if(km>=0){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot add a Mark to an ArtPage if the mark is already associated with the ArtPage.');}if(T.eh()){throw new IPCC.Web.UI.ImGearInvalidOperationExceptionException('You cannot add a Mark to an ArtPage if the mark is already associated with a different ArtPage.');}bE.push(T);T.nc(this);T.add_propertyChanged(oj);T.add_markTextSelectionChanged(AS);T.vv(Qc);T.vG(MZ);T.uu(NG);var V=new IPCC.Web.UI.MarkEventArgs();V.mark=T;if(T.get_type()===IPCC.Web.UI.MarkType.Highlight||T.get_type()===IPCC.Web.UI.MarkType.HighlightText||T.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||T.get_type()===IPCC.Web.UI.MarkType.DocumentHyperlink||T.get_type()===IPCC.Web.UI.MarkType.Strikethrough||(T.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&T.bS!==undefined)){this.adC(T,0);}else{V.zIndex=bE.length-1;}V.clientX=pN.clientX;V.clientY=pN.clientY;V.length=1;J.ay('markAdded',V);};this.Fp=function(iT,du){var Fm=[].concat(bE);var h;for(h=0;h<Fm.length;h++){iT.call(du,Fm[h],h,this);}};this.Sc=function(km){akt(km);return bE[km];};this.ov=function(T){var h;for(h=0;h<bE.length;h++){if(bE[h]===T){return h;}}return-1;};this.aux=function(fz){var fi=JSON.parse(fz);this.Vv();var GU=[];var h;var La=fi.m;if(La){for(h=0;h<La.length;h++){var aF=new IPCC.Web.UI.Mark(La[h].t);aF.atV(La[h]);aF.nc(this);aF.add_propertyChanged(oj);aF.add_markTextSelectionChanged(AS);GU.push(aF);}}bE=GU;J.ay('marksLoaded',{});};var ALPHA_CHAR_CODES=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70];this.axv=function(){var kN=new Array(36);var af=0;var h;var bz;for(h=0;h<8;h++){kN[af++]=ALPHA_CHAR_CODES[Math.floor(Math.random()*16)];}for(h=0;h<3;h++){kN[af++]=45;for(bz=0;bz<4;bz++){kN[af++]=ALPHA_CHAR_CODES[Math.floor(Math.random()*16)];}}kN[af++]=45;var aqs=new Date().getTime();var apS=("0000000"+aqs.toString(16).toUpperCase()).substr(-8);for(h=0;h<8;h++){kN[af++]=apS.charCodeAt(h);}for(h=0;h<4;h++){kN[af++]=ALPHA_CHAR_CODES[Math.floor(Math.random()*16)];}return String.fromCharCode.apply(null,kN);};function VK(jN){var bv=jN.firstChild;while(bv.nodeType!==1){bv=bv.nextSibling;}return bv;};function QM(uV,ahm,ayP){var azo=parseFloat(uV.getAttribute(ahm));var azK=parseFloat(uV.getAttribute(ahm+'TA'));return ayP/(azo/azK);};function apO(QA,aS,aq){if(aS<=0&&aq<=0){return 1;}var akD=QA.getAttribute('pageWidth');var akz=QA.getAttribute('pageHeight');var Ps,Sj,bK,uV,h;if(akD&&akz){Ps=parseFloat(akD);Sj=parseFloat(akz);if(isFinite(Ps)&&isFinite(Sj)&&Ps>0&&Sj>0){return aS/Ps;}}for(h=0;h<QA.childNodes.length;h++){uV=QA.childNodes[h];if(uV.nodeName!=='annotation'){continue;}bK=QM(uV,'width',aS);if(isFinite(bK)&&bK>0){return bK;}bK=QM(uV,'height',aq);if(isFinite(bK)&&bK>0){return bK;}bK=QM(uV,'x',aS);if(isFinite(bK)&&bK>0){return bK;}bK=QM(uV,'y',aq);if(isFinite(bK)&&bK>0){return bK;}}return 1;};this.atr=function(kX,ak,aS,aq,aau,stampImages,vt,tG){var J=this;if(vt!==true){this.Vv();}if(kX){var hM;if(IPCC.tM.JX()){hM=kX.firstChild;}else{var TE=kX.firstChild.nodeName;if(TE.toLowerCase()==='xml'){hM=kX.firstChild.nextSibling;}else{hM=kX.firstChild;}}var cQ=VK(hM);if(cQ.nodeName!=='pages'){throw 'ERROR: pages';}if(cQ.hasChildNodes()){var h;for(h=0;h<cQ.childNodes.length;h++){var aO=cQ.childNodes[h];if(aO.nodeName!=='page'){continue;}var BH=aO.getAttribute('id');var mH=false;var ww;var ql='';var Jf=[];var ig;var oA,aC=0;var db,cC,ad;if(aau){var akF=aO.getAttribute('pageWidth'),alk=aO.getAttribute('pageHeight');if(akF){aau.adz(akF);}if(alk){aau.acw(alk);}}var ml=[],LT={},aA;if((BH&&parseInt(BH,10))===(ak+1)){mH=true;var GU=[];var bz;var aF;var jo,gz,pS,st,sA,gF;var mW=1;var ahb=apO(aO,aS,aq);if(ahb>0){mW=ahb;}for(bz=0;bz<aO.childNodes.length;bz++){var by=aO.childNodes[bz];if(by.nodeName!=='annotation'){continue;}var iU=parseFloat(by.getAttribute('width'))*mW;var jl=parseFloat(by.getAttribute('height'))*mW;var hq=parseFloat(by.getAttribute('x'))*mW;var gP=parseFloat(by.getAttribute('y'))*mW;var aaR=by.getAttribute('fillColor'),Yk,nF,abA=by.getAttribute('lineColor'),amU,jc,adk=by.getAttribute('fontColor'),anf,xS;if(aaR==='transparent'){Yk=nF=aaR;}else{Yk=parseInt(aaR||0,10);nF=parseInt(Yk,10).toString(16);while(nF.length<6){nF='0'+nF;}nF='#'+nF;}if(abA==='transparent'){jc=abA;}else{amU=parseInt(abA||0,10);jc=parseInt(amU,10).toString(16);while(jc.length<6){jc='0'+jc;}jc='#'+jc;}if(adk){anf=parseInt(adk||0,10);xS=parseInt(anf,10).toString(16);while(xS.length<6){xS='0'+xS;}xS='#'+xS;}var avA=by.getAttribute('stampSize');var LY=by.getAttribute('dragDirection');var Kt=parseInt(by.getAttribute('opacity'),10);if(isNaN(Kt)){Kt=255;}if(by.nodeName==='annotation'){var ani=by.getAttribute('label');if(!ani){ani='';}var jK=by.getAttribute('drawType');var kG;switch(jK){case 'imagestamp':case 'imagestamp_redact':var pw=by.getAttribute('imageStampId');var aR=(jK==='imagestamp')?IPCC.Web.UI.MarkType.ImageStampAnnotation:IPCC.Web.UI.MarkType.ImageStampRedaction;aF=new IPCC.Web.UI.Mark(aR);aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});aF.set_image(stampImages[pw].base64format);aF.pw=pw;jo=true;if(jK==='imagestamp_redact'){aF.kE(true);}break;case 'circle':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Ellipse);aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});jo=true;aF.set_lineColor(jc);aF.set_fillVisible(false);aF.set_lineWidth(parseFloat(by.getAttribute('lineWidth')));break;case 'circle_filled':case 'circle_trans':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Ellipse);aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});jo=true;aF.set_fillColor(nF);aF.set_lineColor(jc);aF.set_fillVisible(true);aF.set_lineWidth(parseFloat(by.getAttribute('lineWidth')));break;case 'text':case 'text_redact':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Text);aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});aF.set_fontName('verdana');aF.set_fontSize(10);aF.set_opacity(0);ww=undefined;aF.set_fillColor('#000000');if(jK==='text_redact'){aF.kE(true);}if(jK==='text'){aF.set_fillColor(nF);aF.set_lineColor(jc);aF.set_lineWidth(parseFloat(by.getAttribute('lineWidth')));aF.set_fillVisible(true);aF.set_opacity(Kt);}gF=parseInt(by.getAttribute('maxLength'));if(!isNaN(gF)){aF.set_maxLength(gF);}ml=[];gz=by.firstChild;while((gz)&&(gz.nodeType!==4)){gz=gz.nextSibling;}if((gz)&&(gz.nodeType===4)){kG=gz.innerText||gz.textContent||gz.data;aF.au.aD=kG;oA=kG.split("</TEXTFORMAT>");ql='';Jf=[];for(aC=0;aC<oA.length;aC++){if(oA[aC].match(/<TEXTFORMAT/)){oA[aC]=oA[aC]+"</TEXTFORMAT>";ml.push(oA[aC]);}}for(aC=0;aC<ml.length;aC++){if(ml[aC].match(/<P/)){ww=this.afM(ml[aC]);Jf.push(ww);ql+=ww+" ";if(aC===0){ig=this.aeJ(ml[aC]);adg(ig,aF);}}ql=ql.replace(/\s+$/g,"");aF.set_text(ql);var HZ=this.aeI(ml[aC]);switch(HZ){case 'CENTER':aF.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Center);break;case 'RIGHT':aF.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Right);break;default:aF.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Left);break;}}}break;case 'line':case 'arrow':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Line);var bo=aF.qc();if(LY==='br'){bo.setPoint(1,new IPCC.Web.UI.Point(hq+iU,gP+jl));bo.setPoint(0,new IPCC.Web.UI.Point(hq,gP));}else if(LY==='bl'){bo.setPoint(1,new IPCC.Web.UI.Point(hq,gP+jl));bo.setPoint(0,new IPCC.Web.UI.Point(hq+iU,gP));}else if(LY==='tr'){bo.setPoint(1,new IPCC.Web.UI.Point(hq+iU,gP));bo.setPoint(0,new IPCC.Web.UI.Point(hq,gP+jl));}else if(LY==='tl'){bo.setPoint(1,new IPCC.Web.UI.Point(hq,gP));bo.setPoint(0,new IPCC.Web.UI.Point(hq+iU,gP+jl));}aF.set_lineColor(jc);aF.set_lineWidth(parseFloat(by.getAttribute('lineWidth')));if(jK==='arrow'){aF.set_headFillColor(jc);aF.set_endHeadType(IPCC.Web.UI.LineHeadType.Solid);aF.set_startHeadAngle(30);aF.set_startHeadLength(35);aF.set_lineWidth(parseFloat(by.getAttribute('lineWidth')));}break;case 'stamp':case 'stamp_redact':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Stamp);aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});aF.set_fillColor(jc);if(jK==='stamp_redact'){aF.kE(true);aF.set_fillColor('#000000');}gz=by.firstChild;while((gz)&&(gz.nodeType!==4)){gz=gz.nextSibling;}if((gz)&&(gz.nodeType===4)){kG=gz.innerText||gz.textContent||gz.data;aF.au.aD=kG;aF.set_text(kG);}break;case 'highlightText':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.HighlightText);aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});aF.set_fillColor(jc);aF.bS=by.getAttribute('highlightGroupID');if(by.getAttribute('textLength')){aF.db=parseInt(by.getAttribute('textLength'),10);}aF.cC=by.getAttribute('selectedText');if(by.getAttribute('startIndex')){aF.ad=parseInt(by.getAttribute('startIndex'),10);}aF.ic=by.getAttribute('isHighlight');aF.set_opacity(127);aA=XQ(by,mW);if(aA){aF.aA=aA;}break;case 'rectangle_filled_redact':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.RectangleRedaction);aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});aF.set_fillColor(nF||'#000000');aF.set_lineColor(jc);aF.set_lineWidth(parseFloat(by.getAttribute('lineWidth')));aF.set_textColor(xS||'#ffffff');aF.set_fillVisible(true);aF.kE(true);pS=by.getAttribute('highlightGroupID');aF.set_text(IPCC.F.ya(by.getAttribute('meta')));if(pS){aF.set_lineWidth(0);aF.bS=pS;var cq=LT[pS];if(!cq){cq=LT[pS]=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextSelectionRedaction);cq.bS=pS;cq.set_rectangle(aF.get_rectangle());cq.kE(true);cq.set_text(IPCC.F.ya(by.getAttribute('meta')));}else{var Hk=false;var qr=cq.get_rectangle();var hg=qr.x,jg=qr.x+qr.width,_top=qr.y,hK=qr.y+qr.height;if(qr.x>hq){Hk=true;hg=hq;}if(qr.y>gP){Hk=true;_top=gP;}if(qr.x+qr.width<hq+iU){Hk=true;jg=hq+iU;}if(qr.y+qr.height<gP+jl){Hk=true;hK=gP+jl;}if(Hk===true){cq.set_rectangle({x:hg,y:_top,width:jg-hg,height:hK-_top});}}}break;case 'text_selection_redaction':pS=by.getAttribute('highlightGroupID');aF=LT[pS];if(!aF){aF=LT[pS]=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextSelectionRedaction);aF.bS=pS;aF.set_rectangle({x:0,y:0,width:0,height:0});aF.kE(true);aF.set_text(by.getAttribute('meta'));}db=by.getAttribute('textLength');if(db){aF.db=parseInt(db,10);}cC=by.getAttribute('selectedText');if(cC){aF.cC=cC;}ad=by.getAttribute('startIndex');if(ad){aF.ad=parseInt(ad,10);}break;case 'text_hyperlink_annotation':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextHyperlinkAnnotation);aF.set_fillColor(jc);pS=by.getAttribute('highlightGroupID');aF.bS=pS;var mf=by.getAttribute('href');if(mf){aF.set_href(IPCC.F.ya(mf));}db=by.getAttribute('textLength');if(db){aF.db=parseInt(db,10);}cC=by.getAttribute('selectedText');if(cC){aF.cC=cC;}ad=by.getAttribute('startIndex');if(ad){aF.ad=parseInt(ad,10);}var ic=by.getAttribute('isHighlight');aF.ic=ic?ic:'n';aF.aA=XQ(by,mW);aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});break;case 'rectangle':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Rectangle);aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});aF.set_lineVisible(true);aF.set_lineColor(jc);aF.set_fillVisible(false);aF.set_lineWidth(parseFloat(by.getAttribute('lineWidth')));break;case 'rectangle_filled':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Rectangle);aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});aF.set_fillColor(nF);aF.set_lineColor(jc);aF.set_fillVisible(true);aF.set_lineWidth(parseFloat(by.getAttribute('lineWidth')));break;case 'rectangle_trans':case 'rectangle_trans_redact':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Rectangle);aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});aF.set_fillColor(nF);aF.set_lineColor(jc);aF.set_fillVisible(true);if(jK==='rectangle_trans_redact'){aF.kE(true);}aF.set_lineWidth(parseFloat(by.getAttribute('lineWidth')));break;case 'freehand':case 'signature_path':if(jK==='freehand'){aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Freehand);}else{aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.SignaturePath);switch(by.getAttribute('align').toUpperCase()){case 'LEFT':aF.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Left);break;case 'RIGHT':aF.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Right);break;default:aF.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Center);break;}}aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});aF.set_pathWidth(parseFloat(by.getAttribute('pathWidth')));aF.set_pathHeight(parseFloat(by.getAttribute('pathHeight')));aF.set_lineWidth(parseFloat(by.getAttribute('lineWidth')));aF.set_lineColor(jc);var wc=by.firstChild;while((wc)&&(wc.nodeType!==4)){wc=wc.nextSibling;}if((wc)&&(wc.nodeType===4)){kG=wc.innerText||wc.textContent||wc.data;aF.au.aD=kG;aF.set_pathString(kG);}break;case 'signature_text':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.SignatureText);aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});aF.set_fontSize(10);aF.set_lineWidth=0;aF.set_fillVisible(true);aF.set_opacity(1);gz=by.firstChild;this.St(gz,aF);aF.xV=parseFloat(by.getAttribute('fontWidth'));aF.xM=parseFloat(by.getAttribute('fontHeight'));break;case 'text_area_signature':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextAreaSignature);aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});aF.set_fontName('verdana');ww=undefined;gF=parseInt(by.getAttribute('maxLength'));if(!isNaN(gF)){aF.set_maxLength(gF);}var il=parseInt(by.getAttribute('maxFontSize'));if(!isNaN(il)){aF.set_maxFontSize(il);}gz=by.firstChild;this.St(gz,aF);break;case 'text_input_signature':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextLine);aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});gz=by.firstChild;this.St(gz,aF);aF.xV=parseFloat(by.getAttribute('fontWidth'));aF.xM=parseFloat(by.getAttribute('fontHeight'));aF.set_lineVisible(false);gF=parseInt(by.getAttribute('maxLength'));if(!isNaN(gF)){aF.set_maxLength(gF);}aBk(by,aF);break;case 'polyline':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Polyline);aF.set_lineWidth(parseFloat(by.getAttribute('lineWidth')));aF.set_lineColor(jc);var xa=by.firstChild;while((xa)&&(xa.nodeType!==4)){xa=xa.nextSibling;}var JM;if((xa)&&(xa.nodeType===4)){kG=xa.innerText||xa.textContent||xa.data;if(kG&&kG!=='undefined'){JM=JSON.parse(kG);bo=aF.qc();if(JM){for(h=0;h<JM.length;h++){bo.addPoint(new IPCC.Web.UI.Point(JM[h].x*mW,JM[h].y*mW));}}}}break;case 'strikethrough':aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Strikethrough);aF.set_rectangle({x:hq,y:gP,width:iU,height:jl});aF.set_lineWidth(parseFloat(by.getAttribute('lineWidth')));aF.set_lineColor(jc);aF.bS=by.getAttribute('highlightGroupID');var textLength=by.getAttribute('textLength');if(textLength){aF.db=parseInt(textLength,10);}aF.cC=by.getAttribute('selectedText');var startIndex=by.getAttribute('startIndex');if(startIndex){aF.ad=parseInt(startIndex,10);}aF.ic=by.getAttribute('isHighlight');aA=XQ(by,mW);if(aA){aF.aA=aA;}break;default:}if(aF){aF.au.kW=by.getAttribute('nodeId');if(Kt>=0&&(jK==='rectangle_trans_redact'|| !aF.lq())&&jK!=='stamp'&&jK!=='imagestamp'&&jK!=='imagestamp_redact'&&jK!=='text_hyperlink_annotation'&&jK!=='text_input_signature'&&jK!=='text_area_signature'&&jK!=='strikethrough'){aF.set_opacity(Kt);}aF.au.DR=avA;aF.au.aHF=jK;aF.au.es=by.getAttribute('lineWidth');aF.au.cE=by.getAttribute('fillColor');aF.au.lz=by.getAttribute('lineColor');aF.au.aGb=by.getAttribute('dragDirection');aF.au.BH=BH;aF.au.bv=by.getAttribute('x');aF.au.cA=by.getAttribute('y');aF.au.dk=by.getAttribute('height');aF.au.aZ=by.getAttribute('width');aF.au.aFG=by.getAttribute('x_percent');aF.au.aFh=by.getAttribute('y_percent');aF.au.aHO=by.getAttribute('height_percent');aF.au.aGV=by.getAttribute('width_percent');aF.au.aHa=by.getAttribute('formUser');aF.au.aGC=by.getAttribute('created');aF.au.aFM=by.getAttribute('modified');aF.au.aEZ=by.getAttribute('saveDate');aF.au.aEW=by.getAttribute('saveTime');aF.au.kJ=by.getAttribute('meta');var zy=by.firstChild;while((zy)&&(zy.nodeType!==4)){zy=zy.nextSibling;}if((zy)&&(zy.nodeType===4)){aF.dR.push(zy.data);}else{aF.dR.push('');}var mu=parseInt(by.getAttribute('interactionMode'))||IPCC.Web.UI.MarkInteractionMode.Full;aF.set_interactionMode(mu);aF.nc(this);aF.add_propertyChanged(oj);aF.add_markTextSelectionChanged(AS);aF.vv(Qc);aF.vG(MZ);aF.uu(NG);GU.push(aF);aoA(by,aF);st=IPCC.F.acd(by.getAttribute('created'));sA=IPCC.F.acd(by.getAttribute('modified'));st=st||new Date();sA=sA||new Date();aF.initializeDates(st,sA);if(tG){aF.set_visible(false);}}}}bE=bE.concat(GU);J.ay('marksLoaded',{});}if(mH){aoI(kX,ak);break;}}}}};this.St=function(tw,aF){var h,kG,oA,ql,Jf,ww,ml=[],zI=aF.get_type()===IPCC.Web.UI.MarkType.SignatureText,avz=zI?IPCC.Web.UI.HorizontalAlignment.Center:IPCC.Web.UI.HorizontalAlignment.Left,ig;while((tw)&&(tw.nodeType!==4)){tw=tw.nextSibling;}if((tw)&&(tw.nodeType===4)){kG=tw.innerText||tw.textContent||tw.data;aF.au.aD=kG;oA=kG.split("</TEXTFORMAT>");for(h=0;h<oA.length;h++){if(oA[h].match(/<TEXTFORMAT/)){oA[h]=oA[h]+"</TEXTFORMAT>";ml.push(oA[h]);}}ql='';Jf=[];for(h=0;h<ml.length;h++){if(ml[h].match(/<P/)){ww=this.afM(ml[h]);Jf.push(ww);ql+=ww+" ";if(h===0){ig=this.aeJ(ml[h]);adg(ig,aF);}}ql=ql.replace(/\s+$/g,"");aF.set_text(ql);var HZ=this.aeI(ml[h]);switch(HZ){case 'LEFT':aF.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Left);break;case 'CENTER':aF.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Center);break;case 'RIGHT':aF.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Right);break;default:aF.set_textHorizontalAlignment(avz);break;}}}};function Xs(anu,cJ){for(var i=0;i<anu.childNodes.length;i++){var YN=anu.childNodes[i];if(YN.nodeName==='kvp'){var bf=YN.getAttribute("key");var L=YN.getAttribute("value");cJ.set_data(bf,L);}}};function anF(Os,cl){var cf=new IPCC.Web.UI.Comment(IPCC.F.ya(Os.getAttribute("text")));cf.set_creationTime(Os.getAttribute("created"));cl.addComment(cf);for(var i=0;i<Os.childNodes.length;i++){var aiw=Os.childNodes[i];if(aiw.nodeName==='data'){Xs(aiw,cf.get_data());}}};function app(aaS,cl){for(var i=0;i<aaS.childNodes.length;i++){var Pj=aaS.childNodes[i];if(Pj.nodeName==='comments'){var hu=Pj;for(var j=0;j<hu.childNodes.length;j++){var adV=hu.childNodes[j];if(adV.nodeName==='comment'){anF(adV,cl);}}}else if(Pj.nodeName==='data'){Xs(Pj,cl.get_data());}}};function aoA(Ky,T){for(var i=0;i<Ky.childNodes.length;i++){var vg=Ky.childNodes[i];if(vg.nodeName==='conversation'){app(vg,T.get_conversation());}else if(vg.nodeName==='data'){Xs(vg,T.get_data());}}};function aBk(Ky,T){var L=null,HG={};for(var i=0;i<Ky.childNodes.length;i++){var vg=Ky.childNodes[i];if(vg.nodeName==='inputMask'){L=IPCC.F.ya(vg.getAttribute('value'));for(var j=0;j<vg.childNodes.length;j++){var Zr=vg.childNodes[j];if(Zr.nodeName==='translation'){HG[IPCC.F.ya(Zr.getAttribute('key'))]=new RegExp(IPCC.F.ya(Zr.getAttribute('value').replace(/(^\/|\/$)/g,'')));}}break;}}if(L!==null){T.set_mask({value:L,translations:HG});}};function XQ(sx,yK){var hy=null,iK;for(var i=0;i<sx.childNodes.length;i++){iK=sx.childNodes[i];if(iK.nodeName==='line-rectangles'){if(!hy){hy=aCh(iK,yK);}else{throw new Error("An XML annotation node cannot have more than one line-rectangles child node.");}}}return hy;};function aCh(sx,yK){var hy=[],iK;for(var i=0;i<sx.childNodes.length;i++){iK=sx.childNodes[i];if(iK.nodeName==='rectangle'){hy.push(aBN(iK,yK));}}return hy;};function aBN(sx,yK){var bv=parseFloat(sx.getAttribute("x"))*yK;var cA=parseFloat(sx.getAttribute("y"))*yK;var aZ=parseFloat(sx.getAttribute("width"))*yK;var dk=parseFloat(sx.getAttribute("height"))*yK;return new IPCC.Web.UI.Rectangle(bv,cA,aZ,dk);};this.WV=function(al,Io,uO,hS,cZ,af){var aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Highlight);aF.set_rectangle({x:al.x,y:al.y,width:al.width,height:al.height});aF.set_fillColor(uO);aF.set_fillVisible(true);aF.ad=af;aF.db=1;if(cZ){aF.set_opacity(cZ);}else{aF.set_opacity(127);}J.addMark(aF);return aF;};this.avx=function(al,Zg,af){var aF=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Highlight);aF.set_rectangle({x:al.x,y:al.y,width:al.width,height:al.height});aF.set_fillColor(Zg.get_fillColor());aF.set_fillVisible(true);aF.ad=af;aF.db=1;if(Zg.get_opacity()){aF.set_opacity(Zg.get_opacity());}else{aF.set_opacity(127);}J.addMark(aF);return aF;};function adg(ig,aF){for(var cc=0;cc<ig.length;cc++){var ca=ig[cc].attribs;var mH=false;if(ig[cc].attribs.length>1&& !mH&&ig[cc].Gy==='font'){mH=true;for(var bz=0;bz<ca.length;bz++){if(ca[bz].an==="FACE"){aF.set_fontName(ca[bz].L);}else if(ca[bz].an==="SIZE"&&aF.get_type()!==IPCC.Web.UI.MarkType.TextLine&&aF.get_type()!==IPCC.Web.UI.MarkType.TextAreaSignature){var sI=parseFloat(ca[bz].L);aF.set_fontSize(sI);}else if(ca[bz].an==="COLOR"){var ajr=ca[bz].L;if(aF.get_type()===IPCC.Web.UI.MarkType.SignatureText){aF.set_fillColor(ajr);}else{aF.set_textColor(ajr);}}}var ka=false;if(ig[cc+1]&&aF.get_type()!==IPCC.Web.UI.MarkType.TextLine){if(ig[cc+1].tagName==='font'){break;}else{var xH=ig[cc+1].Gy;if(xH==='b'||xH==='i'||xH==='u'||xH==='s'){if(xH==='b'){aF.set_fontStyle(IPCC.Web.UI.FontStyle.Bold);}else if(xH==='i'){aF.set_fontStyle(IPCC.Web.UI.FontStyle.Italic);}else if(xH==='u'){aF.set_fontStyle(IPCC.Web.UI.FontStyle.Underline);}else if(xH==='s'){aF.set_fontStyle(IPCC.Web.UI.FontStyle.Strikeout);}ka=true;}}if(ig[cc+2]){var amj=ig[cc+2].Gy;ka=SL(aF,ka,amj);}if(ig[cc+3]){var aoG=ig[cc+3].Gy;ka=SL(aF,ka,aoG);}if(ig[cc+4]){var anB=ig[cc+4].Gy;ka=SL(aF,ka,anB);}if(mH){break;}}}}};function SL(T,ahk,wi){var ka=ahk;var aF=T;if(ahk){if(wi==='b'){aF.set_fontStyle(aF.get_fontStyle()|IPCC.Web.UI.FontStyle.Bold);ka=true;}else if(wi==='i'){aF.set_fontStyle(aF.get_fontStyle()|IPCC.Web.UI.FontStyle.Italic);ka=true;}else if(wi==='u'){aF.set_fontStyle(aF.get_fontStyle()|IPCC.Web.UI.FontStyle.Underline);ka=true;}else if(wi==='s'){aF.set_fontStyle(aF.get_fontStyle()|IPCC.Web.UI.FontStyle.Strikeout);ka=true;}}else{if(wi==='b'){aF.set_fontStyle(IPCC.Web.UI.FontStyle.Bold);ka=true;}else if(wi==='i'){aF.set_fontStyle(IPCC.Web.UI.FontStyle.Italic);ka=true;}else if(wi==='u'){aF.set_fontStyle(IPCC.Web.UI.FontStyle.Underline);ka=true;}else if(wi==='s'){aF.set_fontStyle(IPCC.Web.UI.FontStyle.Strikeout);ka=true;}}return ka;};function Cn(str){var obj={},items=str.split(",");for(var i=0;i<items.length;i++){obj[items[i]]=true;}return obj;};var alm=/^<([\-A-Za-z0-9_]+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,aiT=/^<\/([\-A-Za\-z0-9_]+)[^>]*>/,arr=/([\-A-Za\-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\[\w\W]|[^"])*)")|(?:'((?:\\[\w\W]|[^'])*)')|([^>\s]+)))?/g;var ayJ=Cn("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed");var oG=Cn("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul");var auY=Cn("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var");var awo=Cn("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");var aAU=Cn("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected");var asG=Cn("script,style");this.ahn=function(html,handler){var af,wk,un,mR=[],hW=html;function parseEndTag(tag,tagName){var gh;if(!tagName){gh=0;}else{for(gh=mR.length-1;gh>=0;gh--){if(mR[gh]===tagName){break;}}}if(gh>=0){for(var i=mR.length-1;i>=gh;i--){if(handler.end){handler.end(mR[i]);}}mR.length=gh;}};function parseStartTag(tag,tagName,rest,unary){tagName=tagName.toLowerCase();if(oG[tagName]){while(mR.last()&&auY[mR.last()]){parseEndTag("",mR.last());}}if(awo[tagName]&&mR.last()===tagName){parseEndTag("",tagName);}unary=ayJ[tagName]|| ! !unary;if(!unary){mR.push(tagName);}if(handler.start){var attrs=[];rest.replace(arr,function(un,name){var value=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:aAU[name]?name:"";attrs.push({name:name,value:value,escaped:value.replace(/(^|[^\\])"/g,'$1\\\"')});});if(handler.start){handler.start(tagName,attrs,unary);}}};mR.last=function(){return this[this.length-1];};function aAk(all,text){text=text.replace(/<!--([\w\W]*?)-->/g,"$1").replace(/<!\[CDATA\[([\w\W]*?)\]\]\]>/g,"$1");if(handler.chars){handler.chars(text);}return "";};while(html){wk=true;if(!mR.last()|| !asG[mR.last()]){if(html.indexOf("<!--")===0){af=html.indexOf("-->");if(af>=0){if(handler.comment){handler.comment(html.substring(4,af));}html=html.substring(af+3);wk=false;}}else if(html.indexOf("</")===0){un=html.match(aiT);if(un){html=html.substring(un[0].length);un[0].replace(aiT,parseEndTag);wk=false;}}else if(html.indexOf("<")===0){un=html.match(alm);if(un){html=html.substring(un[0].length);un[0].replace(alm,parseStartTag);wk=false;}}if(wk){af=html.indexOf("<");var text=af<0?html:html.substring(0,af);text=IPCC.F.ya(text);html=af<0?"":html.substring(af);if(handler.chars){handler.chars(text);}}}else{html=html.replace(new RegExp("(.*)<\/"+mR.last()+"[^>]*>"),aAk);parseEndTag("",mR.last());}if(html===hW){throw " Parse Error in annotation Html Text: "+html;}hW=html;}parseEndTag();};this.afM=function(html){var results="";this.ahn(html,{start:function(){},end:function(){},chars:function(text){results+=text;},comment:function(){}});return results;};this.aeJ=function(html){var fh=[];this.ahn(html,{start:function(tag,attrs){var eY;eY=tag;if(tag==='font'||tag==='b'||tag==='i'||tag==='u'||tag==='s'){var wv={};wv.Gy=tag;wv.attribs=[];if(tag==='b'){wv.aHc=true;}else if(tag==='i'){wv.aIc=true;}else if(tag==='u'){wv.aHx=true;}else if(tag==='s'){wv.aHM=true;}else{for(var i=0;i<attrs.length;i++){var AE={};AE.an=attrs[i].name;AE.L=attrs[i].value;wv.attribs.push(AE);}}fh.push(wv);}},end:function(){},chars:function(){},comment:function(){}});return fh;};this.aeI=function(html){var parts=html.toUpperCase().split('ALIGN="');var alignment=parts[1].split('"')[0];return alignment;};function aoI(kX,aEb){var jH=kX.getElementsByTagName("highlights")[0];if(jH.hasChildNodes()){var kz;var cK;for(var h=0;h<jH.childNodes.length;h++){kz=jH.childNodes[h];if(kz.nodeType===1){cK=kz.getAttribute('page');if(cK&&parseInt(cK,10)===aEb+1){var jh=new IPCC.Web.UI.aag();jh.arF=kz.nodeName;switch(jh.arF){case 'tag':jh.EV=IPCC.Web.UI.HighLightType.Tag;break;case 'highlight':jh.EV=IPCC.Web.UI.HighLightType.InlineHighLight;break;case 'link':jh.EV=IPCC.Web.UI.HighLightType.Link;break;case 'redaction':jh.EV=IPCC.Web.UI.HighLightType.Redaction;break;case 'strikethrough':jh.EV=IPCC.Web.UI.HighLightType.Strikethrough;break;default:jh.EV=undefined;}if(kz.childNodes[0].data){jh.dR.push(kz.childNodes[0].data);}jh.au.dJ=kz.getAttribute('id');jh.au.aIb=kz.getAttribute('userid');jh.au.aFs=kz.getAttribute('mode');jh.au.dB=kz.getAttribute('color');jh.au.aGj=kz.getAttribute('occurence');jh.au.by=kz.getAttribute('annotation');jh.au.aO=kz.getAttribute('page');jh.au.aFx=kz.getAttribute('documentname');jh.au.aHu=kz.getAttribute('tooltip');jh.au.aFd=kz.getAttribute('allowdelete');jh.au.jA=kz.getAttribute('start');jh.au.aHt=kz.getAttribute('end');J.asf.push(jh);}}}}};this.Vv=function(){var V;if(bE.length<1){return;}fq.removeAllMarks();var h;for(h=bE.length-1;h>=0;h--){bE[h].remove_propertyChanged(oj);bE[h].remove_markTextSelectionChanged(AS);bE[h].nc(null);V=new IPCC.Web.UI.MarkEventArgs();V.length=bE.length;V.zIndex=0;V.mark=bE.pop();J.ay('markRemoved',V);}V=new IPCC.Web.UI.MarkEventArgs();V.length=bE.length;V.zIndex=0;J.ay('markRemoved',V);};this.wV=function(T){var km=this.ov(T);var ue=T.bS;if(km>=0){T.remove_propertyChanged(oj);T.remove_markTextSelectionChanged(AS);T.nc(null);bE.splice(km,1);fq.removeMark(T);var V=new IPCC.Web.UI.MarkEventArgs();V.mark=T;V.zIndex=km;V.length=1;J.ay('markRemoved',V);if(ue){this.axc(ue);}}};this.aGl=function(qW){var tA=bE.length;var ue=qW.bS;while(tA--){var T=bE[tA];if(T.bS===ue){T.set_fillColor(qW.get_fillColor());}}};this.asM=function(qW){var tA=bE.length;var ue=qW.bS;if(!ue){qW.set_text(qW.get_text());return;}while(tA--){var T=bE[tA];if(T.bS===ue){if(T.get_text()!==qW.get_text()){T.set_text(qW.get_text());}if(T.get_fontName()!==qW.get_fontName()){T.set_fontName(qW.get_fontName());}if(T.get_fontSize()!==qW.get_fontSize()){T.set_fontSize(qW.get_fontSize());}}}};this.axc=function(ue){var tA=bE.length;while(tA--){var T=bE[tA];if(T.bS===ue){var km=this.ov(T);fq.removeMark(T);bE.splice(tA,1);var V=new IPCC.Web.UI.MarkEventArgs();V.mark=T;V.zIndex=km;V.length=1;}}};this.adC=function(T,km){var Py=this.ov(T);if(Py<0){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot reorder a Mark unless it is currently associated with the ArtPage.');}if(Py===km){return;}akt(km);bE.splice(Py,1);bE.splice(km,0,T);if(T.get_type()===IPCC.Web.UI.MarkType.Highlight||T.get_type()===IPCC.Web.UI.MarkType.HighlightText||T.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||T.get_type()===IPCC.Web.UI.MarkType.DocumentHyperlink||T.get_type()===IPCC.Web.UI.MarkType.Strikethrough||(T.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&T.bS!==undefined)){return;}var V=new IPCC.Web.UI.MarkEventArgs();V.mark=T;V.zIndex=km;V.oldZIndex=Py;V.length=1;J.ay('markReordered',V);};function QO(hy,fa,eE){if(!hy){return undefined;}var hV={hl:'line-rectangles',dR:[],au:{}};IPCC.F.forEach(hy,function(H){hV.dR.push({hl:'rectangle',dR:[],au:{x:H.x,y:H.y,height:H.height,width:H.width}});});return hV;};function aAZ(hX){if(!hX){return undefined;}var hV={hl:'inputMask',dR:[],au:{value:IPCC.F.pD(hX.value)}};IPCC.F.forEach(hX.translations,function(L,bf){hV.dR.push({hl:'translation',dR:[],au:{key:IPCC.F.pD(bf),value:IPCC.F.pD(L.toString())}});});return hV;};function Zs(cJ){if(!cJ){return undefined;}var mT=cJ.get_dataKeys();if(mT.length===0){return undefined;}var hV={hl:'data',dR:[],au:{}};IPCC.F.forEach(mT,function(bf){var L=cJ.get_data(bf);hV.dR.push({hl:'kvp',dR:[],au:{key:bf,value:L}});});return hV;};function arp(cf){if(!cf){return undefined;}var zC={hl:'comment',dR:[],au:{}};zC.au.text=IPCC.F.pD(cf.get_text());zC.au.created=cf.get_creationTime();var hV=Zs(cf.get_data());if(hV){zC.dR.push(hV);}return zC;};function apW(cl){if(!cl||cl.get_length()===0){return undefined;}var Yi={hl:'conversation',dR:[],au:{}};var ane={hl:'comments',dR:[],au:{}};Yi.dR.push(ane);cl.forEach(function(cf){var zC=arp(cf);if(zC){ane.dR.push(zC);}});var hV=Zs(cl.get_data());if(hV){Yi.dR.push(hV);}return Yi;};this.awQ=function(T,fa,eE,wy){var aR=T.get_type();var jJ=false;var hT;var fX;var agE;var ZP;var gs,rV,qx,aD;var ap={hl:'annotation',dR:[],au:{}};if(!T.au.kW){ap.au.nodeId=J.axv();}else{ap.au.nodeId=T.au.kW;}var IC,Eb="",oh="";if(T.get_lineColor()){var abo=T.get_lineColor();if(abo==='transparent'){ap.au.lineColor=abo;}else{IC=abo.replace(/#/,"");Eb=parseInt(IC,16);oh=Eb.toString();ap.au.lineColor=oh;}}ap.au.interactionMode=T.get_interactionMode();ap.au.stampSize='122';var Ns={};Ns[IPCC.Web.UI.MarkType.Stamp]=true;Ns[IPCC.Web.UI.MarkType.ImageStampAnnotation]=true;Ns[IPCC.Web.UI.MarkType.ImageStampRedaction]=true;if((aR===IPCC.Web.UI.MarkType.Rectangle&&T.get_opacity()<255|| !T.lq())&&Ns[aR]!==true){ap.au.opacity=T.get_opacity();}if(T.get_conversation().get_length()>0){ap.dR.push(apW(T.get_conversation()));}var hV=Zs(T.get_data());if(hV){ap.dR.push(hV);}jJ=false;switch(aR){case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.Ellipse:fX=T.get_fillColor();if(fX==='transparent'){ap.au.fillColor=fX;}else if(fX){hT=fX.replace(/#/,"");ap.au.fillColor=parseInt(hT,16).toString();}else{ap.au.fillColor=oh;}if(T.get_fillVisible()){if(T.get_type()===IPCC.Web.UI.MarkType.Rectangle){if(T.get_opacity()===255){if(T.lq()===true){ap.au.drawType='rectangle_filled_redact';if(T.bS){ap.au.highlightGroupID=T.bS;}}else{ap.au.drawType='rectangle_filled';}}else{if(T.lq()===true){ap.au.drawType='rectangle_trans_redact';}else{ap.au.drawType='rectangle_trans';}}}else{if(T.get_opacity()===255){ap.au.drawType='circle_filled';if(T.lq()){ap.au.drawType='circle_filled_redact';}}else{ap.au.drawType='circle_trans';if(T.lq()){ap.au.drawType='circle_trans_redact';}}}}else{if(T.get_type()===IPCC.Web.UI.MarkType.Rectangle){ap.au.drawType='rectangle';ap.au.fillColor=oh;}else{ap.au.drawType='circle';ap.au.fillColor=oh;}}ap.au.dragDirection='br';var H=T.get_rectangle();ap.au.x=H.x;ap.au.y=H.y;ap.au.x_percent=H.x/fa;ap.au.y_percent=H.y/eE;ap.au.height_percent=H.height/eE;ap.au.width_percent=H.width/fa;ap.au.height=H.height;ap.au.width=H.width;break;case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:ap.au.lineWidth=T.get_lineWidth();jJ=true;break;case IPCC.Web.UI.MarkType.TextSelectionRedaction:ap.au.highlightGroupID=T.bS;ap.au.drawType='text_selection_redaction';if(T.cC&&T.cC.length>0){ap.au.startIndex=T.ad;ap.au.selectedText=T.cC;ap.au.textLength=T.db;}break;case IPCC.Web.UI.MarkType.Text:var kg=T.get_rectangle();ap.au.x=kg.x;ap.au.y=kg.y;ap.au.x_percent=kg.x/fa;ap.au.y_percent=kg.y/eE;ap.au.height_percent=kg.height/eE;ap.au.width_percent=kg.width/fa;ap.au.height=kg.height;ap.au.width=kg.width;ap.au.maxLength=T.get_maxLength();fX=T.get_fillColor();if(T.lq()===true){ap.au.drawType='text_redact';}else{ap.au.drawType='text';ap.au.opacity=T.get_opacity();}if(fX==='transparent'){ap.au.fillColor=fX;}else if(fX){hT=fX.replace(/#/,"");ap.au.fillColor=parseInt(hT,16).toString();}else{ap.au.fillColor='16776960';}var aW='';aW="<TEXTFORMAT LEADING=\"2\">";switch(T.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:aW+="<P ALIGN=\"center\" ";break;case IPCC.Web.UI.HorizontalAlignment.Left:aW+="<P ALIGN=\"left\" ";break;case IPCC.Web.UI.HorizontalAlignment.Right:aW+="<P ALIGN=\"right\" ";break;}aW+=">";aW+="<FONT ";rV=T.get_fontName();aW+="FACE="+"\""+rV+"\" ";qx=T.get_fontSize().toString();aW+="SIZE= \""+qx+"\" ";gs="\""+T.get_textColor()+"\" ";aW+="COLOR="+gs+" ";aW+="LETTERSPACING=\"0\" ";aW+="KERNING=\"0\" ";aW+=">";var bZ=T.get_fontStyle();if(bZ&IPCC.Web.UI.FontStyle.Bold){aW+="<B>";}if(bZ&IPCC.Web.UI.FontStyle.Italic){aW+="<I>";}if(bZ&IPCC.Web.UI.FontStyle.Underline){aW+="<U>";}if(bZ&IPCC.Web.UI.FontStyle.Strikeout){aW+="<S>";}aD=T.get_text();aD=IPCC.F.pD(aD);aW+=aD;if(bZ&IPCC.Web.UI.FontStyle.Strikeout){aW+="</S>";}if(bZ&IPCC.Web.UI.FontStyle.Underline){aW+="</U>";}if(bZ&IPCC.Web.UI.FontStyle.Italic){aW+="</I>";}if(bZ&IPCC.Web.UI.FontStyle.Bold){aW+="</B>";}aW+="</FONT>";aW+="</P>";aW+="</TEXTFORMAT>";break;case IPCC.Web.UI.MarkType.Highlight:H=T.get_rectangle();ap.au.x=H.x;ap.au.y=H.y;ap.au.x_percent=H.x/fa;ap.au.y_percent=H.y/eE;ap.au.height_percent=H.height/eE;ap.au.width_percent=H.width/fa;ap.au.height=H.height;ap.au.width=H.width;ap.au.drawType='highlight';ap.au.highlightGroupID=T.bS;ap.au.isHighlight=T.ic;fX=T.get_fillColor();if(fX){hT=fX.replace(/#/,"");ap.au.fillColor=parseInt(hT,16).toString();ap.au.lineColor=parseInt(hT,16).toString();}else{ap.au.fillColor=oh;}break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:H=T.get_rectangle();ap.au.x=H.x;ap.au.y=H.y;ap.au.height=H.height;ap.au.width=H.width;ap.au.drawType='text_hyperlink_annotation';ap.au.href=IPCC.F.pD(T.mf);ap.au.startIndex=T.ad;ap.au.selectedText=T.cC;ap.au.textLength=T.db;ap.au.highlightGroupID=T.bS;ap.au.isHighlight=T.ic;fX=T.get_fillColor();if(fX){hT=fX.replace(/#/,"");ap.au.fillColor=parseInt(hT,16).toString();ap.au.lineColor=parseInt(hT,16).toString();}else{ap.au.fillColor=oh;}ap.dR.push(QO(T.aA,fa,eE));break;case IPCC.Web.UI.MarkType.HighlightText:H=T.get_rectangle();ap.au.x=H.x;ap.au.y=H.y;ap.au.x_percent=H.x/fa;ap.au.y_percent=H.y/eE;ap.au.height_percent=H.height/eE;ap.au.width_percent=H.width/fa;ap.au.height=H.height;ap.au.width=H.width;ap.au.drawType='highlightText';ap.au.startIndex=T.ad;ap.au.selectedText=T.cC;ap.au.textLength=T.db;ap.au.highlightGroupID=T.bS;ap.au.isHighlight=T.ic;fX=T.get_fillColor();if(fX){hT=fX.replace(/#/,"");ap.au.fillColor=parseInt(hT,16).toString();ap.au.lineColor=parseInt(hT,16).toString();}else{ap.au.fillColor=oh;}ap.dR.push(QO(T.aA,fa,eE));break;case IPCC.Web.UI.MarkType.RectangleRedaction:H=T.get_rectangle();ap.au.drawType='rectangle_filled_redact';ap.au.x=H.x;ap.au.y=H.y;ap.au.x_percent=H.x/fa;ap.au.y_percent=H.y/eE;ap.au.height_percent=H.height/eE;ap.au.width_percent=H.width/fa;ap.au.height=H.height;ap.au.width=H.width;ap.au.meta=IPCC.F.pD(T.get_text());ap.au.stampSize=T.get_fontSize();ap.au.lineWidth=T.get_lineWidth();fX=T.get_fillColor();if(fX){hT=fX.replace(/#/,"");ap.au.fillColor=parseInt(hT,16).toString();}else{ap.au.fillColor=oh;}IC=T.get_lineColor();if(IC){Eb=IC.replace(/#/,"");ap.au.lineColor=parseInt(Eb,16).toString();}else{ap.au.lineColor=oh;}ZP=T.get_textColor();if(ZP){agE=ZP.replace(/#/,"");ap.au.fontColor=parseInt(agE,16).toString();}else{ap.au.fontColor=oh;}if(T.bS){ap.au.highlightGroupID=T.bS;}break;case IPCC.Web.UI.MarkType.Stamp:fX=T.get_fillColor();if(fX){hT=fX.replace(/#/,"");ap.au.fillColor=parseInt(hT,16).toString();ap.au.lineColor=parseInt(hT,16).toString();}else{ap.au.fillColor=oh;}H=T.get_rectangle();ap.au.x=H.x;ap.au.y=H.y;ap.au.x_percent=H.x/fa;ap.au.y_percent=H.y/eE;ap.au.height_percent=H.height/eE;ap.au.width_percent=H.width/fa;ap.au.height=H.height;ap.au.width=H.width;if(T.lq()===true){ap.au.drawType='stamp_redact';}else{ap.au.drawType='stamp';}aD=T.get_text();ap.au.stampSize=T.stampSize;ap.dR.push('<![CDATA['+aD+']]>');break;case IPCC.Web.UI.MarkType.Freehand:case IPCC.Web.UI.MarkType.SignaturePath:if(T.get_type()===IPCC.Web.UI.MarkType.Freehand){ap.au.drawType='freehand';}else{ap.au.drawType='signature_path';switch(T.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:ap.au.align='center';break;case IPCC.Web.UI.HorizontalAlignment.Left:ap.au.align='left';break;case IPCC.Web.UI.HorizontalAlignment.Right:ap.au.align='right';break;}}aW=T.get_pathString();ap.au.pathWidth=T.get_pathWidth();ap.au.pathHeight=T.get_pathHeight();H=T.get_rectangle();ap.au.x=H.x;ap.au.y=H.y;ap.au.x_percent=H.x/fa;ap.au.y_percent=H.y/eE;ap.au.height_percent=H.height/eE;ap.au.width_percent=H.width/fa;ap.au.height=H.height;ap.au.width=H.width;break;case IPCC.Web.UI.MarkType.SignatureText:fX=T.get_fillColor();var cE;if(fX){hT=fX.replace(/#/,"");ap.au.fillColor="";ap.au.lineColor="";cE=parseInt(hT,16).toString();}else{ap.au.fillColor="";cE=oh;}H=T.get_rectangle();ap.au.x=H.x;ap.au.y=H.y;ap.au.x_percent=H.x/fa;ap.au.y_percent=H.y/eE;ap.au.height_percent=H.height/eE;ap.au.width_percent=H.width/fa;ap.au.height=H.height;ap.au.width=H.width;ap.au.opacity=0;ap.au.drawType='signature_text';ap.au.stampSize=T.stampSize;ap.au.fontWidth=T.xV;ap.au.fontHeight=T.xM;aW='';aW="<TEXTFORMAT LEADING=\"2\">";switch(T.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:aW+="<P ALIGN=\"center\" ";break;case IPCC.Web.UI.HorizontalAlignment.Left:aW+="<P ALIGN=\"left\" ";break;case IPCC.Web.UI.HorizontalAlignment.Right:aW+="<P ALIGN=\"right\" ";break;}aW+=">";aW+="<FONT ";rV=T.get_fontName();aW+="FACE="+"\""+rV+"\" ";qx=T.stampSize.toString();aW+="SIZE= \""+qx+"\" ";gs="\""+T.get_fillColor()+"\" ";aW+="COLOR="+gs+" ";aW+="LETTERSPACING=\"0\" ";aW+="KERNING=\"0\" ";aW+=">";aD=IPCC.F.pD(T.get_text());aW+=aD;aW+="</FONT>";aW+="</P>";aW+="</TEXTFORMAT>";break;case IPCC.Web.UI.MarkType.TextAreaSignature:kg=T.get_rectangle();ap.au.x=kg.x;ap.au.y=kg.y;ap.au.x_percent=kg.x/fa;ap.au.y_percent=kg.y/eE;ap.au.height_percent=kg.height/eE;ap.au.width_percent=kg.width/fa;ap.au.height=kg.height;ap.au.width=kg.width;ap.au.maxLength=T.gF;ap.au.maxFontSize=T.il;if(wy){ap.au.drawType='text';}else{ap.au.drawType='text_area_signature';}ap.au.fillColor='transparent';aW='';aW="<TEXTFORMAT LEADING=\"2\">";switch(T.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:aW+="<P ALIGN=\"center\" ";break;case IPCC.Web.UI.HorizontalAlignment.Left:aW+="<P ALIGN=\"left\" ";break;case IPCC.Web.UI.HorizontalAlignment.Right:aW+="<P ALIGN=\"right\" ";break;}aW+=">";aW+="<FONT ";rV=T.get_fontName();aW+="FACE="+"\""+rV+"\" ";qx=T.cR.toString();aW+="SIZE= \""+qx+"\" ";gs="\""+T.get_textColor()+"\" ";aW+="COLOR="+gs+" ";aW+="LETTERSPACING=\"0\" ";aW+="KERNING=\"0\" ";aW+=">";bZ=T.get_fontStyle();if(bZ&IPCC.Web.UI.FontStyle.Bold){aW+="<B>";}if(bZ&IPCC.Web.UI.FontStyle.Italic){aW+="<I>";}if(bZ&IPCC.Web.UI.FontStyle.Underline){aW+="<U>";}if(bZ&IPCC.Web.UI.FontStyle.Strikeout){aW+="<S>";}aD=T.get_text();aD=IPCC.F.pD(aD);aW+=aD;if(bZ&IPCC.Web.UI.FontStyle.Strikeout){aW+="</S>";}if(bZ&IPCC.Web.UI.FontStyle.Underline){aW+="</U>";}if(bZ&IPCC.Web.UI.FontStyle.Italic){aW+="</I>";}if(bZ&IPCC.Web.UI.FontStyle.Bold){aW+="</B>";}aW+="</FONT>";aW+="</P>";aW+="</TEXTFORMAT>";break;case IPCC.Web.UI.MarkType.TextLine:if(!wy){H=T.get_rectangle();ap.au.x=H.x;ap.au.y=H.y;ap.au.x_percent=H.x/fa;ap.au.y_percent=H.y/eE;ap.au.height_percent=H.height/eE;ap.au.maxLength=T.get_maxLength();ap.au.width_percent=H.width/fa;ap.au.height=H.height;ap.au.width=H.width;ap.au.opacity=0;ap.au.drawType='text_input_signature';ap.au.stampSize=T.stampSize;ap.au.fontWidth=T.xV;ap.au.fontHeight=T.xM;aW='';aW="<TEXTFORMAT LEADING=\"2\">";switch(T.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:aW+="<P ALIGN=\"center\" ";break;case IPCC.Web.UI.HorizontalAlignment.Left:aW+="<P ALIGN=\"left\" ";break;case IPCC.Web.UI.HorizontalAlignment.Right:aW+="<P ALIGN=\"right\" ";break;}aW+=">";aW+="<FONT ";rV=T.get_fontName();aW+="FACE="+"\""+rV+"\" ";qx=T.stampSize.toString();aW+="SIZE= \""+qx+"\" ";gs="\""+T.get_textColor()+"\" ";aW+="COLOR="+gs+" ";aW+="LETTERSPACING=\"0\" ";aW+="KERNING=\"0\" ";aW+=">";aD=IPCC.F.pD(T.get_text());aW+=aD;aW+="</FONT>";aW+="</P>";aW+="</TEXTFORMAT>";var akp=aAZ(T.get_mask());if(akp){ap.dR.push(akp);}}else{H=T.get_rectangle();var CF=T.stampSize;var pf;if(!T.Ir|| !T.pf){var aoF=IPCC.F.afJ(T.get_text(),T.get_fontName(),H.width,H.height,{uT:"pre",cR:CF+"px"});pf=aoF;T.Ir=true;T.pf=pf;}else{pf=T.pf;}CF=pf.fontSize;var hI=pf.width/H.width,dG=1.0,MIN_BUFFER=0.85;if(/mono/i.test(T.get_fontName())){MIN_BUFFER=0.75;}if(hI>MIN_BUFFER){dG=MIN_BUFFER*H.width/pf.width;CF=CF*dG;}var afp=H.width,azy=pf.height*dG,aec=H.height-(H.height-azy)/2,afr=H.x,aiF=H.y+(H.height-pf.height)/2+(pf.height*(1-dG));ap.au.x=afr;ap.au.y=aiF;ap.au.x_percent=afr/fa;ap.au.y_percent=aiF/eE;ap.au.height_percent=aec/eE;ap.au.width_percent=afp/fa;ap.au.height=aec;ap.au.width=afp;ap.au.opacity=0;ap.au.drawType='text_redact';aW='';aW="<TEXTFORMAT>";switch(T.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:aW+="<P ALIGN=\"center\" ";break;case IPCC.Web.UI.HorizontalAlignment.Left:aW+="<P ALIGN=\"left\" ";break;case IPCC.Web.UI.HorizontalAlignment.Right:aW+="<P ALIGN=\"right\" ";break;}aW+=">";aW+="<FONT ";rV=T.get_fontName();aW+="FACE="+"\""+rV+"\" ";if(T.axJ){qx=(CF/T.axJ).toString();}else{qx=CF.toString();}aW+="SIZE= \""+qx+"\" ";gs="\""+T.get_textColor()+"\" ";aW+="COLOR="+gs+" ";aW+="LETTERSPACING=\"0\" ";aW+="KERNING=\"0\" ";aW+=">";aD=IPCC.F.pD(T.get_text());aW+=aD;aW+="</FONT>";aW+="</P>";aW+="</TEXTFORMAT>";}break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:ap.au.drawType=(aR===IPCC.Web.UI.MarkType.ImageStampRedaction)?'imagestamp_redact':'imagestamp';H=T.get_rectangle();ap.au.x=H.x;ap.au.y=H.y;ap.au.height=H.height;ap.au.width=H.width;ap.au.lineWidth=T.get_lineWidth();ap.au.x_percent=H.x/fa;ap.au.y_percent=H.y/eE;ap.au.height_percent=H.height/eE;ap.au.width_percent=H.width/fa;ap.au.imageStampId=T.pw;break;case IPCC.Web.UI.MarkType.Strikethrough:H=T.get_rectangle();ap.au.x=H.x;ap.au.y=H.y;ap.au.height=H.height;ap.au.width=H.width;ap.au.drawType='strikethrough';ap.au.startIndex=T.ad;ap.au.selectedText=T.cC;ap.au.textLength=T.db;ap.au.highlightGroupID=T.bS;ap.au.isHighlight=T.ic;ap.dR.push(QO(T.aA,fa,eE));break;}if(jJ){ap.au.lineWidth=T.get_lineWidth();var al=T.get_boundingRectangle();ap.au.x=al.x;ap.au.y=al.y;ap.au.x_percent=al.x/fa;ap.au.y_percent=al.y/eE;ap.au.height_percent=al.height/eE;ap.au.width_percent=al.width/fa;ap.au.height=al.height;ap.au.width=al.width;if(aR===IPCC.Web.UI.MarkType.Line){if(T.get_endHeadType()===IPCC.Web.UI.LineHeadType.None){ap.au.drawType='line';}else{ap.au.drawType='arrow';}}else{ap.au.drawType='polyline';}ap.au.lineWidth=T.get_lineWidth();var bo=T.get_points();if(aR===IPCC.Web.UI.MarkType.Line){if((bo.getPoint(0).x<bo.getPoint(1).x)&&(bo.getPoint(0).y>bo.getPoint(1).y)){ap.au.dragDirection='tr';}else if((bo.getPoint(0).x>bo.getPoint(1).x)&&(bo.getPoint(0).y>bo.getPoint(1).y)){ap.au.dragDirection='tl';}else if((bo.getPoint(0).x>bo.getPoint(1).x)&&(bo.getPoint(0).y<bo.getPoint(1).y)){ap.au.dragDirection='bl';}else if((bo.getPoint(0).x<bo.getPoint(1).x)&&(bo.getPoint(0).y<bo.getPoint(1).y)){ap.au.dragDirection='br';}else{ap.au.dragDirection='br';}}else{var yi=[];var ci=bo.get_length(),bL;if(ci>1){for(var bz=0;bz<bo.get_length();bz++){bL=bo.getPoint(bz);yi.push({x:bL.x,y:bL.y});}aW=JSON.stringify(yi);}}if(Eb){ap.au.fillColor=Eb;}else{ap.au.fillColor="";}}else{ap.au.lineWidth=T.get_lineWidth();ap.au.dragDirection='br';}if(T.get_type()!==IPCC.Web.UI.MarkType.RectangleRedaction){ap.au.meta='';}ap.au.label='';var fD=new Date();ap.au.saveDate=IPCC.F.atC(fD);ap.au.saveTime=IPCC.F.auE(fD);ap.au.uuid='';ap.au.formUser='';ap.au.created=IPCC.F.afo(T.get_dateCreated());ap.au.modified=IPCC.F.afo(T.get_dateModified());if(T.get_type()===IPCC.Web.UI.MarkType.Text||T.get_type()===IPCC.Web.UI.MarkType.Freehand||T.get_type()===IPCC.Web.UI.MarkType.SignaturePath||T.get_type()===IPCC.Web.UI.MarkType.SignatureText||T.get_type()===IPCC.Web.UI.MarkType.Polyline||T.get_type()===IPCC.Web.UI.MarkType.TextAreaSignature||T.get_type()===IPCC.Web.UI.MarkType.TextLine){ap.dR.push('<![CDATA['+aW+']]>');}else{ap.dR.push('');}return ap;};this.aBS=function(ak,fa,eE,bB){var hM={hl:'documentAnnotations',dR:[],au:{}};var cQ={hl:'pages',dR:[],au:{}};hM.dR.push(cQ);var jH={hl:'highlights',dR:[],au:{}};hM.dR.push(jH);var wA={},pP=[];var aO={hl:'page',dR:[],au:{id:(ak+1).toString(),pageWidth:fa,pageHeight:eE}};cQ.dR.push(aO);bB=bB||{};var ahc=(bB.includeAnnotations!==undefined)? ! !bB.includeAnnotations:true,ahB=(bB.includeRedactions!==undefined)? ! !bB.includeRedactions:true,agP=(bB.includeSignatures!==undefined)? ! !bB.includeSignatures:false,wy=(bB.wy!==undefined)? ! !bB.wy:false,Wo=(bB.AX!==undefined)?bB.AX:false,axC= ! !wy,akA=Wo?Wo:bE;for(var h=0;h<akA.length;h++){var T=akA[h];var aR=T.get_type();if(T.get_type()===IPCC.Web.UI.MarkType.Highlight){continue;}if(axC&& !T.get_visible()){continue;}if(!Wo){if(ahc===false&&ahB===false&&agP===false){break;}if(ahc===false){if(aR===IPCC.Web.UI.MarkType.Rectangle||aR===IPCC.Web.UI.MarkType.Ellipse||aR===IPCC.Web.UI.MarkType.Line||aR===IPCC.Web.UI.MarkType.Text||aR===IPCC.Web.UI.MarkType.Stamp||aR===IPCC.Web.UI.MarkType.Highlight||aR===IPCC.Web.UI.MarkType.Strikethrough||aR===IPCC.Web.UI.MarkType.HighlightText||aR===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||aR===IPCC.Web.UI.MarkType.Freehand||aR===IPCC.Web.UI.MarkType.ImageStampAnnotation||aR===IPCC.Web.UI.MarkType.Polyline){if(T.lq()===false){continue;}}}if(ahB===false){if(T.lq()===true){continue;}if(aR===IPCC.Web.UI.MarkType.RectangleRedaction||aR===IPCC.Web.UI.MarkType.TextSelectionRedaction||aR===IPCC.Web.UI.MarkType.ImageStampRedaction){continue;}}if(agP===false){if(aR===IPCC.Web.UI.MarkType.SignaturePath||aR===IPCC.Web.UI.MarkType.SignatureText||aR===IPCC.Web.UI.MarkType.SignatureImage||aR===IPCC.Web.UI.MarkType.TextAreaSignature||aR===IPCC.Web.UI.MarkType.TextLine){continue;}}}switch(aR){case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:wA[T.pw]={hl:'stampImage',dR:[],au:{imageStampId:T.pw,base64format:T.dj()}};break;}aO.dR.push(this.awQ(T,fa,eE,wy));}for(var Ka in wA){if(wA.hasOwnProperty(Ka)){pP.push(wA[Ka]);}}return{hM:hM,pP:pP};};this.aCx=function(){var fi={m:[]};var h;for(h=0;h<bE.length;h++){fi.m.push(bE[h].aCw());}J.ay('marksSaved',{});var amP="";amP=JSON.stringify(fi);return amP;};this.Al=function(R){aN.addHandler('markAdded',R);};this.zh=function(R){aN.removeHandler('markAdded',R);};this.HN=function(R){aN.addHandler('markChanged',R);};this.FA=function(R){aN.removeHandler('markChanged',R);};this.zd=function(R){aN.addHandler('markRemoved',R);};this.AK=function(R){aN.removeHandler('markRemoved',R);};this.FH=function(R){aN.addHandler('markReordered',R);};this.Fy=function(R){aN.removeHandler('markReordered',R);};this.SX=function(R){aN.addHandler('marksLoaded',R);};this.Wi=function(R){aN.removeHandler('marksLoaded',R);};this.aFw=function(R){aN.addHandler('marksSaved',R);};this.aIF=function(R){aN.removeHandler('marksSaved',R);};this.FX=function(R){aN.addHandler('markSelectionChanged',R);};this.GC=function(R){aN.removeHandler('markSelectionChanged',R);};this.IY=function(R){aN.addHandler('markTextSelectionChanged',R);};this.FW=function(R){aN.removeHandler('markTextSelectionChanged',R);};this.vv=function(R){aN.addHandler('commentAdded',R);};this.CT=function(R){aN.removeHandler('commentAdded',R);};this.vG=function(R){aN.addHandler('commentRemoved',R);};this.Dh=function(R){aN.removeHandler('commentRemoved',R);};this.uu=function(R){aN.addHandler('commentChanged',R);};this.vR=function(R){aN.removeHandler('commentChanged',R);};this.kf=function(R){aN.addHandler('propertyChanged',R);};this.mo=function(R){aN.removeHandler('propertyChanged',R);};this.ay=function(cY,V){var R=aN.getHandler(cY);if(R!==null){R(this,V);}};this.cg=function(dg){var R=aN.getHandler("propertyChanged");if(R){R(this,new IPCC.pE(dg));}};return this;};LV.prototype={get_markCount:function(){return this.Uv();},get_selectedMarks:function(){return this.zQ();},toString:function(){return 'ArtPage with '+this.get_markCount()+' marks';},addMark:function(mark,mouseLocation){this.MY(mark,mouseLocation);},forEachMark:function(method,context){this.Fp(method,context);},getMark:function(zIndex){return this.Sc(zIndex);},getZIndexOfMark:function(mark){return this.ov(mark);},loadFromJson:function(json){this.aux(json);},removeAllMarks:function(){this.Vv();},removeMark:function(mark){this.wV(mark);},reorderMark:function(mark,zIndex){this.adC(mark,zIndex);},saveToJson:function(){return this.aCx();},add_markAdded:function(handler){this.Al(handler);},remove_markAdded:function(handler){this.zh(handler);},add_markChanged:function(handler){this.HN(handler);},remove_markChanged:function(handler){this.FA(handler);},add_markRemoved:function(handler){this.zd(handler);},remove_markRemoved:function(handler){this.AK(handler);},add_markReordered:function(handler){this.FH(handler);},remove_markReordered:function(handler){this.Fy(handler);},add_marksLoaded:function(handler){this.SX(handler);},remove_marksLoaded:function(handler){this.Wi(handler);},add_markSelectionChanged:function(handler){this.FX(handler);},remove_markSelectionChanged:function(handler){this.GC(handler);},add_markTextSelectionChanged:function(handler){this.IY(handler);},remove_markTextSelectionChanged:function(handler){this.FW(handler);},add_commentAdded:function(handler){this.vv(handler);},remove_commentAdded:function(handler){this.CT(handler);},add_commentRemoved:function(handler){this.vG(handler);},remove_commentRemoved:function(handler){this.Dh(handler);},add_commentChanged:function(handler){this.uu(handler);},remove_commentChanged:function(handler){this.vR(handler);}};LV.registerClass=cs;LV.registerClass('IPCC.Web.UI.ArtPage');module.exports=LV;},{"../../IPCC.Util":28}],66:[function(require,module,exports){var ec=require('../../IPCC.Util').regEnum;var MN=function(){};MN.registerEnum=ec;MN.prototype={Line:0,Triangle:1};MN.registerEnum('IPCC.Web.UI.CalloutType',false);module.exports=MN;},{"../../IPCC.Util":28}],67:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var Ph=function(text){var aN=new IPCC.Web.UI.ir();var cJ=new IPCC.Web.UI.Data();this.Zn=IPCC.F.tZ(new Date());this.aD=text;this.apG=function(aD){if(aD===this.aD){return;}this.aD=aD;var V=new IPCC.Web.UI.CommentEventArgs();V.comment=this;V.length=1;this.ay('commentChanged',V);};this.asC=function(){return this.aD;};this.aoQ=function(avY){this.Zn=avY;};this.ayy=function(){return this.Zn;};this.uu=function(R){aN.addHandler('commentChanged',R);};this.vR=function(R){aN.removeHandler('commentChanged',R);};this.ay=function(cY,V){var R=aN.getHandler(cY);if(R!==null){R(this,V);}};this.wB=function(){return cJ;};return this;};Ph.prototype={toString:function(){return 'Comment('+this.creationTime+', '+this.text+')';},add_commentChanged:function(handler){this.uu(handler);},remove_commentChanged:function(handler){this.vR(handler);},get_text:function(){return this.asC();},set_text:function(text){this.apG(text);},get_creationTime:function(){return this.ayy();},set_creationTime:function(isoTimeString){this.aoQ(isoTimeString);},get_data:function(){return this.wB();}};Ph.registerClass=cs;Ph.registerClass('IPCC.Web.UI.Comment');module.exports=Ph;},{"../../IPCC.Util":28}],68:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var Pn=function(){return this;};Pn.registerClass=cs;Pn.prototype={};Pn.registerClass('IPCC.Web.UI.CommentEventArgs');module.exports=Pn;},{"../../IPCC.Util":28}],69:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var Ob=function(ata){var hu=[];var aN=new IPCC.Web.UI.ir();var cJ=new IPCC.Web.UI.Data();var T=ata;var J=this;function Qs(bu,V){J.ay('commentChanged',V);};this.EW=function(cf){cf.add_commentChanged(Qs);hu.push(cf);var V=new IPCC.Web.UI.CommentEventArgs();V.comment=cf;V.length=1;V.index=hu.length-1;this.ay('commentAdded',V);};this.aBV=function(cf){var VJ= -1;IPCC.F.forEach(hu,function(el,idx){if(el===cf){VJ=idx;}});if(VJ=== -1){throw new IPCC.Web.UI.ImGearArgumentException('comment',"The provided comment was not found in the conversation.");}var ach=hu.splice(VJ,1)[0];ach.vR(Qs);var V=new IPCC.Web.UI.CommentEventArgs();V.comment=ach;V.length=1;this.ay('commentRemoved',V);};this.jL=function(iT,du){var h;for(h=0;h<hu.length;h++){iT.call(du,hu[h],h,this);}};this.eF=function(){return hu.length;};this.vv=function(R){aN.addHandler('commentAdded',R);};this.CT=function(R){aN.removeHandler('commentAdded',R);};this.uu=function(R){aN.addHandler('commentChanged',R);};this.vR=function(R){aN.removeHandler('commentChanged',R);};this.vG=function(R){aN.addHandler('commentRemoved',R);};this.Dh=function(R){aN.removeHandler('commentRemoved',R);};this.wB=function(){return cJ;};this.OZ=function(){return T;};this.ay=function(cY,V){var R=aN.getHandler(cY);if(R!==null){R(this,V);}};return this;};Ob.prototype={toString:function(){return 'Conversation with '+this.get_length()+' comments';},addComment:function(comment){this.EW(comment);},removeCommentInstance:function(comment){this.aBV(comment);},forEach:function(method,context){this.jL(method,context);},get_length:function(){return this.eF();},add_commentAdded:function(handler){this.vv(handler);},remove_commentAdded:function(handler){this.CT(handler);},add_commentChanged:function(handler){this.uu(handler);},remove_commentChanged:function(handler){this.vR(handler);},add_commentRemoved:function(handler){this.vG(handler);},remove_commentRemoved:function(handler){this.Dh(handler);},get_data:function(){return this.wB();},get_mark:function(){return this.OZ();}};Ob.registerClass=cs;Ob.registerClass('IPCC.Web.UI.Conversation');module.exports=Ob;},{"../../IPCC.Util":28}],70:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var Mx=function(){this.cJ={};this.wB=function(key){if(typeof key==='undefined'){return IPCC.F.extend({},this.cJ);}else if(typeof key==='string'){return this.cJ[key];}else{throw new IPCC.Web.UI.ImGearArgumentException("key","The argument must be a string.");}};this.aou=function(key,value){if(typeof key!=='string'){throw new IPCC.Web.UI.ImGearArgumentException("key","The argument must be a string.");}if(typeof value==='string'){this.cJ[key]=value;}else if(typeof value==='undefined'){delete this.cJ[key];}else{throw new IPCC.Web.UI.ImGearArgumentException("value","The argument must be a string.");}return this;};this.ayb=function(){var keys=[];IPCC.F.forEach(this.cJ,function(value,key){keys.push(key);});return keys;};return this;};Mx.prototype={toString:function(){return 'Data('+this.creationTime+', '+this.text+')';},get_data:function(key){return this.wB(key);},set_data:function(key,value){return this.aou(key,value);},get_dataKeys:function(){return this.ayb();}};Mx.registerClass=cs;Mx.registerClass('IPCC.Web.UI.Data');module.exports=Mx;},{"../../IPCC.Util":28}],71:[function(require,module,exports){var ec=require('./../../IPCC.Util').regEnum;var Lg=function(){};Lg.prototype={Production:0,Development:1,Detailed:2};Lg.registerEnum=ec;Lg.registerEnum('IPCC.Web.UI.DebugErrorLevel',false);module.exports=Lg;},{"./../../IPCC.Util":28}],72:[function(require,module,exports){var ec=require('./../../IPCC.Util').regEnum;var LG=function(){};LG.prototype={FunctionCall:0,Exception:1,Custom:2,UserAction:3,Warning:4};LG.registerEnum=ec;LG.registerEnum('IPCC.Web.UI.DebugItemCause',false);module.exports=LG;},{"./../../IPCC.Util":28}],73:[function(require,module,exports){var cs=require('./../../IPCC.Util').regClass;var as=function(axQ){var aI=axQ;var agB=this.type=aI.type.toLowerCase();var Oa=typeof aI.changedTouches!=='undefined';this.rawEvent=aI;this.altKey=aI.altKey;if(typeof(aI.button)!=='undefined'){this.button=(typeof(aI.which)!=='undefined')?aI.button:(aI.button===4)?IPCC.Web.UI.MouseButton.middleButton:(aI.button===2)?IPCC.Web.UI.MouseButton.rightButton:IPCC.Web.UI.MouseButton.leftButton;}if(agB==='keypress'){this.charCode=aI.charCode||aI.keyCode;}else if(aI.keyCode&&(aI.keyCode===46)){this.keyCode=127;}else{this.keyCode=aI.keyCode;}this.clientX=(Oa)?aI.changedTouches[0].clientX:aI.clientX;this.clientY=(Oa)?aI.changedTouches[0].clientY:aI.clientY;this.ctrlKey=aI.ctrlKey;this.target=aI.target?aI.target:aI.srcElement;function apD(bx){var bv=0;var cA=0;while(bx&& !isNaN(bx.offsetLeft)&& !isNaN(bx.offsetTop)){bv+=bx.offsetLeft-bx.scrollLeft;cA+=bx.offsetTop-bx.scrollTop;if(bx.offsetparent){bx=bx.offsetParent;}else{bx=bx.parentNode;}}return{top:cA,left:bv};};var dW=""+agB;var Eq='key';if(dW.substr(0,Eq.length)!==Eq){if((typeof(aI.offsetX)!=='undefined')&&(typeof(aI.offsetY)!=='undefined')){this.offsetX=aI.offsetX;this.offsetY=aI.offsetY;}else if(this.target&&(this.target.nodeType!==3)&&(typeof(aI.clientX)==='number')){var KF=apD(this.target);var fL=this.target;var gA=fL.ownerDocument||fL.document||fL;var kU=gA.defaultView||gA.parentWindow;this.offsetX=(kU.pageXOffset||0)+aI.clientX-KF.left;this.offsetY=(kU.pageYOffset||0)+aI.clientY-KF.top;}}this.screenX=(Oa)?aI.changedTouches[0].screenX:aI.screenX;this.screenY=(Oa)?aI.changedTouches[0].screenY:aI.screenY;this.shiftKey=aI.shiftKey;};as.prototype={preventDefault:function(){if(arguments.length!==0){throw new IPCC.Web.UI.ImGearParameterCountException();}if(this.rawEvent.preventDefault){this.rawEvent.preventDefault();}else if(window.event){this.rawEvent.returnValue=false;}},stopPropagation:function(){if(arguments.length!==0){throw new IPCC.Web.UI.ImGearParameterCountException();}if(this.rawEvent.stopPropagation){this.rawEvent.stopPropagation();}else if(window.event){this.rawEvent.cancelBubble=true;}}};as.registerClass=cs;as.registerClass('IPCC.Web.UI.as');as.addHandler=function(element,eventName,handler,autoRemove){IPCC.Web.UI.as.XW(element);if(eventName==="error"){throw new IPCC.Web.UI.ImGearInvalidOperationException(IPCC.kK.addHandlerCantBeUsedForError);}if(!element.aN){element.aN={};}var eventCache=element.aN[eventName];if(!eventCache){element.aN[eventName]=eventCache=[];}var browserHandler;if(element.addEventListener){browserHandler=function(e){return handler.call(element,new IPCC.Web.UI.as(e));};element.addEventListener(eventName,browserHandler,false);}else if(element.attachEvent){browserHandler=function(){var e={};try{var doc=element.ownerDocument||element.document||element;var fL=doc.defaultView||doc.parentWindow;e=fL.event;}catch(ex){}return handler.call(element,new IPCC.Web.UI.as(e));};element.attachEvent('on'+eventName,browserHandler);}eventCache[eventCache.length]={handler:handler,browserHandler:browserHandler,autoRemove:autoRemove};if(autoRemove){var d=element.dispose;if(d!==IPCC.Web.UI.as.aiC){element.dispose=IPCC.Web.UI.as.aiC;if(typeof(d)!=="undefined"){element.ahh=d;}}}};as.clearHandlers=function(element){IPCC.Web.UI.as.XW(element);IPCC.Web.UI.as.air(element,false);};as.air=function(element,autoRemoving){if(element.aN){var cache=element.aN;for(var name in cache){if(cache.hasOwnProperty(name)){var handlers=cache[name];for(var i=handlers.length-1;i>=0;i--){var entry=handlers[i];if(!autoRemoving||entry.autoRemove){IPCC.Web.UI.as.removeHandler(element,name,entry.handler);}}}}element.aN=null;}};as.aiC=function(){IPCC.Web.UI.as.air(this,true);var d=this.ahh,type=typeof(d);if(type!=="undefined"){this.dispose=d;this.ahh=null;if(type==="function"){this.dispose();}}};as.removeHandler=function(element,eventName,handler){IPCC.Web.UI.as.cB(element,eventName,handler);};as.cB=function(element,eventName,handler){IPCC.Web.UI.as.XW(element);var browserHandler=null;if((typeof(element.aN)!=='object')|| !element.aN){throw new IPCC.Web.UI.ImGearInvalidOperationException('DOM event handler was not added through the DomEvent.addHandler method.');}var cache=element.aN[eventName];if(!(cache instanceof Array)){throw new IPCC.Web.UI.ImGearInvalidOperationException('DOM event handler was not added through the DomEvent.addHandler method.');}for(var i=0,l=cache.length;i<l;i++){if(cache[i].handler===handler){browserHandler=cache[i].browserHandler;break;}}if(typeof(browserHandler)!=='function'){throw new IPCC.Web.UI.ImGearInvalidOperationException('Handler was not added through the IPCC.Web.UI.as.addHandler method.');}if(element.removeEventListener){element.removeEventListener(eventName,browserHandler,false);}else if(element.detachEvent){element.detachEvent('on'+eventName,browserHandler);}cache.splice(i,1);};as.XW=function(element){if(element.tagName&&(element.tagName.toUpperCase()==="SCRIPT")){return;}var doc=element.ownerDocument||element.document||element;if((typeof(element.document)!=='object')&&(element!==doc)&&(typeof(element.nodeType)!=='number')){throw new IPCC.Web.UI.ImGearArgumentException("element",IPCC.kK.argumentDomNode);}};module.exports=as;},{"./../../IPCC.Util":28}],74:[function(require,module,exports){var ec=require('../../IPCC.Util').regEnum;var nG=function(){};nG.registerEnum=ec;nG.prototype={FullImage:0,FullWidth:1,FullHeight:2,ActualSize:3,OneToOne:4,Rectangle:5};nG.registerEnum('IPCC.Web.UI.FitType',false);module.exports=nG;},{"../../IPCC.Util":28}],75:[function(require,module,exports){var ec=require('../../IPCC.Util').regEnum;var Rx=function(){};Rx.registerEnum=ec;Rx.prototype={Regular:0,Bold:1,Italic:2,Underline:4,Strikeout:8};Rx.registerEnum('IPCC.Web.UI.FontStyle',true);module.exports=Rx;},{"../../IPCC.Util":28}],76:[function(require,module,exports){var ec=require('../../IPCC.Util').regEnum;var PU=function(){};PU.registerEnum=ec;PU.prototype={Tag:0,InlineHighLight:1,Link:2,Redaction:3,Strikethrough:4};PU.registerEnum('IPCC.Web.UI.HighLight',false);module.exports=PU;},{"../../IPCC.Util":28}],77:[function(require,module,exports){var ec=require('../../IPCC.Util').regEnum;var Oz=function(){};Oz.registerEnum=ec;Oz.prototype={Left:0,Center:16,Right:32};Oz.registerEnum('IPCC.Web.UI.HorizontalAlignment',false);module.exports=Oz;},{"../../IPCC.Util":28}],78:[function(require,module,exports){var ec=require('./../../IPCC.Util').regEnum;var Ke=function(){};Ke.registerEnum=ec;Ke.prototype={None:0,ArtDataService:1};Ke.registerEnum('IPCC.Web.UI.ImGearArtDataServices',false);module.exports=Ke;},{"./../../IPCC.Util":28}],79:[function(require,module,exports){var cs=require('./../../IPCC.Util').regClass;var EJ=function(ah){var jd='';var ha='';var J=this;this.cQ=new IPCC.Web.UI.ImGearPageCollection();this.Rd=undefined;this.cQ.bi=this;var Lo=false;this.ta=undefined;var fG=0;var Ri=IPCC.Web.UI.ImGearPageCountStatus.UnRequested;var aN=new IPCC.Web.UI.ir();this.ii=IPCC.Web.JR.VZ(4,IPCC.Web.Nc());this.nR=IPCC.Web.hG.HF.mb(this.ii);var zH=[];var lF=0;var lC=[];var Ck=[];var gX={startPage:0,lastPage:0,requestCount:0,stopRequests:false,lastTimeout:1000};var YJ=false;this.ay=function(cY,V){var R=aN.getHandler(cY);if(R!==null){try{R(J,V);}catch(e){IPCC.jx.RJ('raise event error in ImGearDocument, error: '+e.message);IPCC.jx.mn(e.message,IPCC.Web.UI.ImGearDocument,IPCC.Web.UI.DebugErrorLevel.Production,'ImGearDocument','');}}};function UZ(bu,V){if(V.length>0){J.ay('pageAdded',V);}};function Vr(bu,V){if(V.length>0){J.ay('pageRemoved',V);}};function Im(bu,V){J.ay('pageChanged',V);};this.cQ.add_pageAdded(UZ);this.cQ.add_pageRemoved(Vr);this.cQ.add_pageChanged(Im);function aBa(){function aCA(iZ,iO){var cI=iZ+'() threw an exception ';if(iO.name){cI+='( '+iO.name+" ";}else{cI+=".";}if(iO.message){cI+="  exception message = "+iO.message;}if(iO.statusCode){cI+="  exception statusCode = "+iO.statusCode;}cI=cI.replace(/\n/g," ");IPCC.jx.mn(cI,IPCC.Web.UI.DebugItemCause.Exception,IPCC.Web.UI.DebugErrorLevel.Production,'ImGearDocument',"document");};this.ag=aCA;this.ay=function(cY,V){var R=aN.getHandler(cY);if(R!==null){R(J,V);}};};if(arguments.length===0){var cI="ImGearDocument object creation requires parameters";throw new IPCC.Web.UI.ImGearArgumentException('ImGearDocument',cI);}if(arguments.length>0){if(ah.documentIdentifier!==undefined){jd=ah.documentIdentifier;ha=IPCC.gI.sV(jd);}if(ah.encodedDocumentIdentifier!==undefined){var wO=ah.encodedDocumentIdentifier;if(ah.documentIdentifier!==undefined){ha=IPCC.gI.sV(jd);if(wO!==ha){throw new IPCC.Web.UI.ImGearArgumentException('documentIdentifier','When both are specified, documentIdentifier and encodedImageIdentifier must reference the same document.');}}else{jd=IPCC.gI.Fx(ah.encodedDocumentIdentifier);}}if(ah.imageServicePath!==undefined){this.ta=ah.imageServicePath;}else{throw new IPCC.Web.UI.ImGearArgumentException('ImGearDocument','Document creation requires imageServicePath.');}var sK;if(ah.includeAllPages!==undefined){Lo=ah.includeAllPages;if(Lo===true){var aDd=new aBa();var aaz=0;J.av=new IPCC.gI(ha,0,0,0,0,0);var oi=function(){fG=J.av.fG;Ri=IPCC.Web.UI.ImGearPageCountStatus.Known;for(;aaz<fG;aaz++){var afP=new IPCC.Web.UI.ImGearPage({pageNumber:aaz,bi:J});afP.bi=J;J.cQ.addPage(afP);}};Ri=IPCC.Web.UI.ImGearPageCountStatus.RequestPending;try{this.av.SQ(this.ta,aDd,oi);}catch(e){Ri=IPCC.Web.UI.ImGearPageCountStatus.Failed;var dw=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dw.exception=e;J.ay('pageOpenFailed',dw);throw e;}}}else if(ah.pages!==undefined){if(ah.pages.length>0){var h=0;for(h=0;h<ah.pages.length;h++){var bG=ah.pages[h];bG.document=this;this.cQ.addPage(bG);}}}else if(ah.pageNumber!==undefined){if(ah.pageRangeCount!==undefined){var sj=ah.pageRangeCount;if(sj>0){var aC;for(aC=ah.pageNumber;aC<=sj;aC++){sK=new IPCC.Web.UI.ImGearPage(aC);sK.bi=J;this.cQ.addPage(sK);}}else if(sj===0){sK=new IPCC.Web.UI.ImgearPage({pageNumber:ah.pageNumber,bi:J});sK.bi=J;J.cQ.addPage(sK);}}else{if(ah.selected){sK=new IPCC.Web.UI.ImGearPage({pageNumber:ah.pageNumber,bi:J,selected:true});}else{sK=new IPCC.Web.UI.ImGearPage({pageNumber:ah.pageNumber,bi:J});}sK.bi=J;J.cQ.addPage(sK);}}}this.JZ=function(){return jd;};this.PW=function(){return ha;};this.aiO=function(){return this.cQ;};this.avv=function(){return fG;};this.asq=function(){return Ri;};this.ayw=function(){return Lo;};this.apw=function(L){Lo=L;this.cg('includeAllPages');};var oQ=false;this.iP=function(){return oQ;};this.oR=function(L){oQ=L;};this.Hg=function(R){aN.addHandler('pageAdded',R);};this.GY=function(R){aN.removeHandler('pageAdded',R);};this.Hj=function(R){aN.addHandler('pageRemoved',R);};this.EU=function(R){aN.removeHandler('pageRemoved',R);};this.Gb=function(R){aN.addHandler('pageOpenFailed',R);};this.HD=function(R){aN.removeHandler('pageOpenFailed',R);};this.kf=function(R){aN.addHandler('propertyChanged',R);};this.mo=function(R){aN.removeHandler('propertyChanged',R);};this.Ki=function(R){aN.addHandler('pageChanged',R);};this.Ie=function(R){aN.removeHandler('pageChanged',R);};this.cg=function(dg){var R=aN.getHandler('propertyChanged');if(R){R(this,new IPCC.pE(dg));}};this.auR=function(R){aN.addHandler('textPagesReceived',R);};this.aBE=function(R){aN.removeHandler('textPagesReceived',R);};this.ayG=function(){return Ck.length;};this.asO=function(){return zH;};this.axL=function(){return zH.length;};this.arG=function(){return gX;};this.atb=function(){return YJ;};this.aHm=function(L){YJ=L;};this.ayL=function(gK){if(gX.stopRequests===true){var V={};V.error=0;V.textPagesReceived=Nr(gK);if(V.textPagesReceived.length===0){if(lF>0&&lF<gK){for(var cc=lF;cc<gK;cc++){V.textPagesReceived.push(cc);}}}V.length=2;J.ay('textPagesReceived',V);return;}var iS=true;var Hn=false;for(var h=0;h<lF;h++){if(Array.prototype.indexOf){if(zH.indexOf(h)<0){iS=false;Hn=true;break;}}else{if(IPCC.Web.iG(zH,h)<0){Hn=true;break;}}}if(Hn){J.Nu(h,undefined,gK);}else if(lF<gK){for(var bz=0;bz<gK;bz++){if(Array.prototype.indexOf){if(lC.indexOf(bz)<0){iS=false;break;}}else{if(IPCC.Web.iG(lC,bz)<0){iS=false;break;}}}if(!iS){Hn=true;J.Nu(bz,undefined,gK);}else{J.Nu(lF,undefined,gK);}}else{Hn=false;}};function Nr(gK){var TM=[],cc;if(lC.length>0){var iS=true;for(cc=0;cc<gK;cc++){iS=true;if(Array.prototype.indexOf){if(lC.indexOf(cc)<0){iS=false;}}else{if(IPCC.Web.iG(lC,cc)<0){iS=false;}}if(!iS){lC.push(cc);Ck.push(cc);TM.push(cc);}}}else{for(cc=0;cc<gK;cc++){lC.push(cc);Ck.push(cc);TM.push(cc);}}return TM;};this.Nu=function(akG,aix,gK){YJ=true;var ad;if(!isNaN(akG)){ad=akG;}else{ad=0;}var Dv;if(!isNaN(gK)){Dv=gK;}var dq;if(!isNaN(aix)){dq=aix;}else if(!isNaN(Dv)){dq=Dv-1;}else{Dv=gK;if(!isNaN(Dv)){dq=Dv-1;}}if(isNaN(dq)){dq=ad+1;}if(dq-ad>9){dq=ad+9;}function MP(aD){var Vx=lF;var YS=[];var iS=true;var aM;for(var aO=0;aO<aD.pages.length;aO++){if(Array.prototype.indexOf){if(zH.indexOf(aD.pages[aO].number)<0){iS=false;}}else{if(IPCC.Web.iG(zH,aD.pages[aO].number)<0){iS=false;}}if(!iS){zH.push(aD.pages[aO].number);if(J.cQ.jF(aD.pages[aO].number).cd().wJ()===false){aM=J.cQ.jF(aD.pages[aO].number);aM.alY(aD.pages[aO]);aM.aib(aD.pages[aO]);aM.aiN(aD.pages[aO].markup,aD.pages[aO].height,aD.pages[aO].width);}lF++;YS.push(aD.pages[aO].number);lC.push(aD.pages[aO].number);if(!aD.pages[aO].text){Ck.push(aD.pages[aO].number);}}}var V={};if(aD.hasOwnProperty("errorCode")){V.error=0;J.pageExtractionFailed=true;V.textPagesReceived=YS;V.length=2;for(var xz=gX.startPage;xz<gX.lastPage+1;xz++){iS=true;if(Array.prototype.indexOf){if(lC.indexOf(xz)<0){iS=false;}}else{if(IPCC.Web.iG(lC,xz)<0){iS=false;}}if(!iS){lC.push(xz);Ck.push(xz);V.textPagesReceived.push(xz);}}J.ay('textPagesReceived',V);gX.stopRequests=true;return;}if(lF>Vx){V.textPagesReceived=YS;V.length=2;V.error=0;}var qT=gX.lastTimeout;if(gX.startPage===ad&&gX.lastPage===dq&&lF===Vx){if(gX.requestCount<25){qT=qT+1000;gX.requestCount++;}else{V.error=0;V.textPagesReceived=[];V.length=2;iS=true;var cc;for(cc=gX.startPage;cc<gX.lastPage+1;cc++){iS=true;if(Array.prototype.indexOf){if(lC.indexOf(cc)<0){iS=false;}}else{if(IPCC.Web.iG(lC,cc)<0){iS=false;}}if(!iS){lC.push(cc);Ck.push(cc);V.textPagesReceived.push(cc);}}if(V.textPagesReceived.length===0){if(lF>0&&lF<gK){for(cc=lF;cc<gK;cc++){V.textPagesReceived.push(cc);}}}gX.stopRequests=true;J.ay('textPagesReceived',V);return;}}else{qT=1000;gX.requestCount=0;}gX.lastTimeout=qT;gX.startPage=ad;gX.lastPage=dq;setTimeout(function(){J.ayL(gK);},qT);if(lF>Vx){J.ay('textPagesReceived',V);}};function fl(ac){var V={},fV,aj;try{var oz=ac.getResponseHeader("Accusoft-Data-Encrypted");if(oz==='true'){var vf=IPCC.Web.hG.rc.uG(ac.getResponseHeader("Accusoft-Data-SK"));var bf=IPCC.Web.JN(vf,J.ii);var fm=IPCC.Web.Kw(ac);var tY=IPCC.Web.DP(fm,bf,J.ii);fV=IPCC.Web.hG.Hw.mb(tY);}else{fV=ac.responseText;}aj=JSON.parse(fV);MP(aj);}catch(e){V.error= -1;Nr(gK);V.textPagesReceived=[];V.length=2;J.ay('textPagesReceived',V);return;}};function eG(aj){var V={},hJ;try{hJ=aj.response.status;if(aj.response.responseText){aj=JSON.parse(aj.response.responseText);if(aj.hasOwnProperty("errorCode")){V.error=0;if(lF>0){if(aj.pages){if(aj.pages.length>0){MP(aj);return;}}}else{V.error= -1;}if(lC.length===0){V.error= -1;}J.pageExtractionFailed=true;V.textPagesReceived=[];V.length=2;V.textPagesReceived=Nr(gK);J.ay('textPagesReceived',V);return;}else{throw new IPCC.Web.UI.ImGearHttpException(hJ,"Unable to obtain text");}}else{throw new IPCC.Web.UI.ImGearHttpException(hJ,"Unable to obtain text");}}catch(e){V.error= -1;Nr(gK);V.textPagesReceived=[];V.length=2;J.ay('textPagesReceived',V);return;}};var iH=jd;var hs=J.ta;if(!(/^[\x00-\x7F]*$/.test(iH))){iH='e'+ha;}else{iH='u'+iH;}var bQ;if(J.iP()){bQ=hs+'/Document/q/'+ad.toString()+'-'+dq.toString()+'/Text?DocumentID='+iH+'&iv='+J.nR;}else{bQ=hs+'/Document/q/'+ad.toString()+'-'+dq.toString()+'/Text?DocumentID='+iH;}IPCC.F.me.eg({method:'GET',url:bQ,headers:{'accept':'application/json'}}).then(fl,eG);};return this;};EJ.encodeDocumentIdentifier=function(jd){var ha;if(jd!==undefined){ha=IPCC.gI.sV(jd);}return ha;};EJ.decodeDocumentIdentifier=function(ha){var afO;if(ha!==undefined){afO=IPCC.gI.Fx(ha);}return afO;};EJ.prototype={get_documentIdentifier:function(){var bq=this.JZ();return bq;},get_encodedDocumentIdentifier:function(){var bq=this.PW();return bq;},get_pages:function(){return this.aiO();},get_pageCountStatus:function(){var r=this.asq();return r;},set_pageCountStatus:function(value){this.aGd(value);},get_pageCount:function(){var r=this.avv();return r;},get_includeAllPages:function(){try{var bq=this.ayw();return bq;}catch(e){throw e;}},set_includeAllPages:function(value){try{this.apw(value);}catch(e){throw e;}},get_encryption:function(){var bq=this.iP();return bq;},set_encryption:function(value){this.oR(value);},add_pageChanged:function(handler){this.Ki(handler);},remove_pageChanged:function(handler){this.Ie(handler);},add_pageRemoved:function(handler){this.Hj(handler);},remove_pageRemoved:function(handler){this.EU(handler);},add_pageAdded:function(handler){this.Hg(handler);},remove_pageAdded:function(handler){this.GY(handler);},add_pageOpenFailed:function(handler){this.Gb(handler);},remove_pageOpenFailed:function(handler){this.HD(handler);},get_textRequestInfo:function(){try{var bq=this.arG();return bq;}catch(e){throw e;}},get_pagesWithText:function(){try{var bq=this.asO();return bq;}catch(e){throw e;}},get_numberOfPagesWithText:function(){try{var bq=this.axL();return bq;}catch(e){throw e;}},get_numberOfPagesWithoutText:function(){try{var bq=this.ayG();return bq;}catch(e){throw e;}},add_textPagesReceived:function(handler){try{this.auR(handler);}catch(e){throw e;}},remove_textPagesReceived:function(handler){try{this.aBE(handler);}catch(e){this.ag('remove_textPagesReceived',e);throw e;}},add_propertyChanged:function(handler){this.kf(handler);},remove_propertyChanged:function(handler){this.mo(handler);}};EJ.registerClass=cs;EJ.registerClass('IPCC.Web.UI.ImGearDocument');module.exports=EJ;},{"./../../IPCC.Util":28}],80:[function(require,module,exports){var cs=require('./../../IPCC.Util').regClass;var Mc=function(){var iB=[];var aN=new IPCC.Web.UI.ir();var J=this;function aoV(bu,V){if(V){var Ny=new IPCC.Web.UI.ImGearDocumentEventArgs();Ny.document=bu;Ny.propertyName=V.get_propertyName();Ny.length=2;J.ay('documentChanged',Ny);}};this.Sz=function(avk){this.ahe(iB.length,avk);};this.ahe=function(af,bi){var bz;var ci=iB.length;if(af>iB.length||(af<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',af,'document index is out of range');}for(bz=0;bz<ci;bz++){if(iB[bz]===bi){throw new IPCC.Web.UI.ImGearInvalidOperationException('The document instance object to be inserted already exists in the collection. You cannot use the same instance of a document object.');}}var aeW=aN.getHandler('pageAdded');if(aeW){bi.add_pageAdded(aeW);}var afC=aN.getHandler('pageRemoved');if(afC){bi.add_pageRemoved(afC);}var aex=aN.getHandler('pageChanged');if(aex){bi.add_pageChanged(aex);}bi.add_propertyChanged(aoV);iB.splice(af,0,bi);var V=new IPCC.Web.UI.ImGearDocumentEventArgs();V.imGearDocument=bi;V.index=af;V.length=1;this.ay('documentAdded',V);};function kD(af){if(af>iB.length-1||(af<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',af,'document index is out of range');}};this.NY=function(af){kD(af);return iB[af];};this.eF=function(){return iB.length;};this.aIy=function(iT,du){var aiL=[].concat(iB);var h;for(h=0;h<aiL.length;h++){iT.call(du,aiL[h],h,this);}};this.acz=function(af){kD(af);var V=new IPCC.Web.UI.ImGearDocumentEventArgs();V.imGearDocument=iB[af];V.length=1;iB[af].get_pages().removeAllPages();iB.splice(af,1);this.ay('documentRemoved',V);};this.aCQ=function(){var h=0;while(iB.length>0){this.acz(h);}};this.aGh=function(R){aN.addHandler('documentAdded',R);};this.aBi=function(R){aN.removeHandler('documentAdded',R);};this.aGs=function(R){aN.addHandler('documentRemoved',R);};this.aBR=function(R){aN.removeHandler('documentRemoved',R);};this.aGJ=function(R){aN.addHandler('documentChanged',R);};this.aBG=function(R){aN.removeHandler('documentChanged',R);};this.Hg=function(R){aN.addHandler('pageAdded',R);};this.GY=function(R){aN.removeHandler('pageAdded',R);for(var bz=0;bz<iB.length;bz++){iB[bz].remove_pageAdded(R);}};this.Ki=function(R){aN.addHandler('pageChanged',R);};this.Ie=function(R){aN.removeHandler('pageChanged',R);for(var bz=0;bz<iB.length;bz++){iB[bz].remove_pageChanged(R);}};this.Hj=function(R){aN.addHandler('pageRemoved',R);};this.EU=function(R){aN.removeHandler('pageRemoved',R);for(var bz=0;bz<iB.length;bz++){iB[bz].remove_pageRemoved(R);}};this.ay=function(cY,V){var R=aN.getHandler(cY);if(R!==null){try{R(J,V);}catch(e){IPCC.jx.RJ('event raise, ImGearDocumentCollection, error: '+e.message);}}};return this;};Mc.prototype={addDocument:function(imGearDocument){this.Sz(imGearDocument);},insertDocument:function(index,imGearDocument){this.ahe(index,imGearDocument);},forEach:function(method,context){this.jL(method,context);},getDocument:function(index){return this.NY(index);},get_length:function(){return this.eF();},removeDocument:function(imGearDocument){this.acz(imGearDocument);},removeAllDocuments:function(){this.aCQ();},add_documentAdded:function(handler){this.aGh(handler);},remove_documentAdded:function(handler){this.aBi(handler);},add_documentRemoved:function(handler){this.aGs(handler);},remove_documentRemoved:function(handler){this.aBR(handler);},add_documentChanged:function(handler){this.aGJ(handler);},remove_documentChanged:function(handler){this.aBG(handler);},add_pageAdded:function(handler){this.Hg(handler);},remove_pageAdded:function(handler){this.GY(handler);},add_pageRemoved:function(handler){this.Hj(handler);},remove_pageRemoved:function(handler){this.EU(handler);},add_pageChanged:function(handler){this.Ki(handler);},remove_pageChanged:function(handler){this.Ie(handler);}};Mc.registerClass=cs;Mc.registerClass('IPCC.Web.UI.ImGearDocumentCollection');module.exports=Mc;},{"./../../IPCC.Util":28}],81:[function(require,module,exports){var cs=require('./../../IPCC.Util').regClass;var Kc=function(){return this;};Kc.registerClass=cs;Kc.prototype={};Kc.registerClass('IPCC.Web.UI.ImGearDocumentCreateArgs');module.exports=Kc;},{"./../../IPCC.Util":28}],82:[function(require,module,exports){var cs=require('./../../IPCC.Util').regClass;var JG=function(){return this;};JG.registerClass=cs;JG.prototype={};JG.registerClass('IPCC.Web.UI.ImGearDocumentEventArgs');module.exports=JG;},{"./../../IPCC.Util":28}],83:[function(require,module,exports){var ask=function(kV){var bv=0,cA=0,aZ=0,dk=0,mf=kV.href||"",aul=kV.borderStyle||"Solid",lV=kV.borderThickness||0,zP=kV.borderPattern||[1],FV=kV.borderHorizontalRadius||0,EO=kV.borderHorizontalRadius||0,op=kV.borderColor||"#0000FF",pZ=kV.borderOpacity||255,H,T;if(typeof pZ==='string'){pZ=parseInt(pZ,10);}if(kV.rectangle){bv=kV.rectangle.x;cA=kV.rectangle.y;aZ=kV.rectangle.width;dk=kV.rectangle.height;}H=new IPCC.Web.UI.Rectangle(bv,cA,aZ,dk);this.cN=function(){var ZK=new IPCC.Web.UI.Rectangle(H.x,H.y,H.width,H.height);return ZK;};this.Da=function(ko){H.x=ko.x;H.y=ko.y;H.width=ko.width;H.height=ko.height;};this.ahN=function(){return mf;};this.ayx=function(){return aul;};this.axF=function(){return lV;};this.aym=function(){return zP;};this.axS=function(){return FV;};this.axE=function(){return EO;};this.ayo=function(){return op;};this.axO=function(){return pZ;};this.OZ=function(){return T;};this.arN=function(aEo){T=aEo;};this.ato=function(){return IPCC.F.ama(mf);};};module.exports=ask;},{}],84:[function(require,module,exports){var ir=function ir(){if(arguments.length!==0){throw new IPCC.Web.UI.ImGearParameterCountException();}this.Jp={};};ir.prototype.dO=function(dJ,R){var cP=this.UC(dJ,true);cP[cP.length]=R;};ir.prototype.addHandler=function(dJ,R){this.dO(dJ,R);};ir.prototype.cB=function(dJ,R){var ru=this.UC(dJ);if(!ru){return;}var af=IPCC.ZS(ru,R);if(af>=0){ru.splice(af,1);}};ir.prototype.removeHandler=function(dJ,R){this.cB(dJ,R);};ir.prototype.getHandler=function(dJ){var ru=this.UC(dJ);if(!ru||(ru.length===0)){return null;}var cP=ru.slice();ru=cP;return function(source,args){for(var h=0,qb=ru.length;h<qb;h++){ru[h](source,args);}};};ir.prototype.UC=function(dJ,awZ){if(!this.Jp[dJ]){if(!awZ){return null;}this.Jp[dJ]=[];}return this.Jp[dJ];};module.exports=ir;},{}],85:[function(require,module,exports){var cs=require('./../../IPCC.Util').regClass;var Er=function(message,errorInfo){this.message=message;var J=this;if(errorInfo){for(var Wv in errorInfo){if(errorInfo.hasOwnProperty(Wv)){J[Wv]=errorInfo[Wv];}}}};Er.prototype=new Error();Er.registerClass=cs;Er.registerClass('IPCC.Web.UI.ImGearException');var Go=function(statusCode,message,customErrorCode){var ga="IPCC.Web.UI.ImGearHttpException: ";if(message){ga+=message;}this.message=ga;this.statusCode=statusCode;this.customErrorCode=customErrorCode;};Go.prototype=new Error();Go.registerClass=cs;Go.registerClass('IPCC.Web.UI.ImGearHttpException');var so=function(paramName,message){var ga="IPCC.Web.UI.ImGearArgumentException: "+(message?message:IPCC.kK.argument);if(paramName){if(typeof(paramName)!=="undefined"&&paramName!==null){ga+="\n"+IPCC.Web.xm(IPCC.kK.paramName,paramName);}}this.message=ga;this.paramName=paramName;};so.prototype=new Error();so.registerClass=cs;so.registerClass('IPCC.Web.UI.ImGearArgumentException');var Cf=function(paramName,message){var ga="IPCC.Web.UI.ImGearArgumentNullException: "+(message?message:IPCC.kK.argumentNull);if(paramName){if(typeof(paramName)!=="undefined"&&paramName!==null){ga+="\n"+IPCC.Web.xm(IPCC.Res.paramName,paramName);}}this.message=ga;this.paramName=paramName;};Cf.prototype=new Error();Cf.registerClass=cs;Cf.registerClass('IPCC.Web.UI.ImGearArgumentNullException');var sd=function(paramName,actualValue,message){var ga="IPCC.Web.UI.ImGearArgumentOutOfRangeException: "+(message?message:IPCC.kK.argumentOutOfRange);if(paramName){if(typeof(paramName)!=="undefined"&&paramName!==null){ga+="\n"+IPCC.Web.xm(IPCC.kK.paramName,paramName);}}if(typeof(actualValue)!=="undefined"&&actualValue!==null){ga+="\n"+IPCC.Web.xm(IPCC.kK.actualValue,actualValue);}this.message=ga;this.paramName=paramName;this.actualValue=actualValue;};sd.prototype=new Error();sd.registerClass=cs;sd.registerClass('IPCC.Web.UI.ImGearArgumentOutOfRangeException');var za=function(paramName,actualType,expectedType,message){var ga="IPCC.Web.UI.ImGearArgumentTypeException ";if(message){ga+=message;}else if(actualType&&expectedType){if(typeof(actualType.getName)==='function'&&typeof(expectedType.getName)==='function'){ga+=IPCC.Web.xm(IPCC.kK.argumentTypeWithTypes,actualType.getName(),expectedType.getName());}else{ga+="actualType = "+actualType+" expectedType =  "+expectedType;}}else{ga+=IPCC.kK.argumentType;}if(paramName){if(typeof(paramName)!=="undefined"&&paramName!==null){ga+="\n"+IPCC.Web.xm(IPCC.kK.paramName,paramName);}}this.message=ga;this.paramName=paramName;this.actualType=actualType;this.expectedType=expectedType;};za.prototype=new Error();za.registerClass=cs;za.registerClass('IPCC.Web.UI.ImGearArgumentTypeException');var Dp=function(paramName,message){var ga="IPCC.Web.UI.ImGearArgumentUndefinedException: "+(message?message:IPCC.kK.argumentUndefined);if(paramName){if(typeof(paramName)!=="undefined"&&paramName!==null){ga+="\n"+IPCC.Web.xm(IPCC.Res.paramName,paramName);}}this.message=ga;this.paramName=paramName;};Dp.prototype=new Error();Dp.registerClass=cs;Dp.registerClass('IPCC.Web.UI.ImGearArgumentUndefinedException');var BV=function(message){var ga="IPCC.Web.UI.ImGearInvalidOperationException: "+(message?message:IPCC.kK.invalidOperation);this.message=ga;};BV.prototype=new Error();BV.registerClass=cs;BV.registerClass('IPCC.Web.UI.ImGearInvalidOperationException');var BJ=function(message){var ga="IPCC.Web.UI.ImGearNotImplementedException: "+(message?message:IPCC.kK.notImplemented);this.message=ga;};BJ.prototype=new Error();BJ.registerClass=cs;BJ.registerClass('IPCC.Web.UI.ImGearNotImplementedException');var BW=function(message){var ga="IPCC.Web.UI.ImGearParameterCountException: "+(message?message:IPCC.kK.parameterCount);this.message=ga;};BW.prototype=new Error();BW.registerClass=cs;BW.registerClass('IPCC.Web.UI.ImGearParameterCountException');module.exports={Er:Er,Go:Go,so:so,Cf:Cf,sd:sd,za:za,Dp:Dp,BV:BV,BJ:BJ,BW:BW};},{"./../../IPCC.Util":28}],86:[function(require,module,exports){var ati=function(){var GD=[];this.atT=function(atg){GD.push(atg);};this.cG=function(){return GD.length;};this.jL=function(iT,du){IPCC.F.forEach(GD,iT,du);};this.aCg=function(){if(GD.length<1){return;}GD=[];};return this;};module.exports=ati;},{}],87:[function(require,module,exports){var asD=function(){var Fn=new IPCC.Web.UI.ImGearHyperlinkCollection();this.IH=function(){return Fn;};};module.exports=asD;},{}],88:[function(require,module,exports){var cs=require('./../../IPCC.Util').regClass;var Kl=function(ah){this.bi=undefined;var ak=0;var aS=0,aeM=0,acq=0;var aq=0,alj=0,akd=0;var J=this;var aN=new IPCC.Web.UI.ir();this.aIr=undefined;this.gX={qs:0,amc:false,qk:1000,NB:false};var fg=new IPCC.Web.UI.ImGearTextPage();var PM=new IPCC.Web.UI.ImGearHyperlinkPage();var kC=0;var oQ=false;var CA=false,CS=0,GB=0;function alR(o){return!isNaN(o-0);};if(ah.pageNumber!==undefined){if(alR(ah.pageNumber)){ak=ah.pageNumber;}else{throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException("pageNumber","",'The value must be a number.');}}this.nT=function(){return ak;};this.aHA=function(L){if(alR(ah.pageNumber)){ak=L;}};this.ki=function(){return aS;};function amk(){if(!fg){fg=new IPCC.Web.UI.ImGearTextPage();}var aqk=fg.hB();var ph=aS/CS,ri=aq/GB;aqk.aAX(ph,ri);};function akq(){var Fn=PM.IH();var ph=aS/CS,ri=aq/GB;Fn.jL(function(jz){jz.Da(jz.cN().scale(ph,ri));var agA=jz.OZ();agA.set_rectangle(agA.get_rectangle().scale(ph,ri));});};this.Nk=function(L){aS=L;if(CA&&aS&&aS!==CS&&aq&&aq!==GB){amk();akq();CA=false;}};this.jE=function(){return aq;};this.Or=function(L){aq=L;if(CA&&aS&&aS!==CS&&aq&&aq!==GB){amk();akq();CA=false;}};this.aiX=function(){return aeM;};this.adz=function(L){aeM=L;};this.aGP=function(){return alj;};this.acw=function(L){alj=L;};this.aGQ=function(){return acq;};this.aHi=function(L){acq=L;};this.aGY=function(){return akd;};this.aHn=function(L){akd=L;};this.axf=function(){return this.bi;};this.cd=function(){if(!fg){fg=new IPCC.Web.UI.ImGearTextPage();}return fg;};this.jS=function(){return kC;};this.wR=function(L){if(kC===L){return;}if(isNaN(L)){return;}kC=L;this.cg('serviceResponseTimeout');};this.iP=function(){return oQ;};this.oR=function(L){oQ=L;};this.kf=function(R){aN.addHandler('propertyChanged',R);};this.mo=function(R){aN.removeHandler('propertyChanged',R);};this.AO=function(R){aN.addHandler('textPageReady',R);};this.EC=function(R){aN.removeHandler('textPageReady',R);};this.ait=function(){return PM;};this.Ud=function(R){aN.addHandler('hyperlinkPageReady',R);};this.acL=function(R){aN.removeHandler('hyperlinkPageReady',R);};this.Ac=function(R){aN.dO('textExtractionFailed',R);};this.Dr=function(R){aN.cB('textExtractionFailed',R);};this.alY=function(hx){if(aS===0&&aq===0){CA=true;CS=hx.width;GB=hx.height;}};this.aib=function(hx){if(!fg){fg=new IPCC.Web.UI.ImGearTextPage();}if(fg.hB().eF()>0){return;}else if(hx.errorCode){var nD=new IPCC.Web.UI.ImGearException(hx.errorDescription,{name:'Text Extraction'});var dw=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dw.exception=nD;dw.pageNumber=J.get_pageNumber();J.ay('textExtractionFailed',dw);return;}var ara=fg.hB();var NM=false;var abu;function If(Uo){return Uo;};var ri=1;var ph=1;if(hx.height&&hx.height>0&&aq>0){if(hx.height!==aq){ri=aq/hx.height;}}if(hx.width&&hx.width>0&&aS>0){if(hx.width!==aS){ph=aS/hx.width;}}var hE;var abk= -1;var Qu;var iX,zb;for(var h=0;h<hx.rectangles.length;h++){iX=hx.rectangles[h];zb=If(hx.text[h]);NM=false;if(iX[2]===0){zb="\n";NM=true;if(h>0){abu=hx.rectangles[h-1];iX[2]=abu[2];}}if(ph===1&&ri===1){Qu=new IPCC.Web.UI.ImGearTextCharacter(iX[0],iX[1],iX[2],iX[3],zb,NM);}else{Qu=new IPCC.Web.UI.ImGearTextCharacter(iX[0]*ph,iX[1]*ri,iX[2]*ph,iX[3]*ri,zb,NM);}if(Qu){ara.auP(Qu);}if(hE===undefined||abk!==iX[1]||iX[0]<hE.cN().x){if(hE){fg.VG().ant(hE);}hE=new IPCC.Web.UI.ImGearTextSection();hE.Da(new IPCC.Web.UI.Rectangle(iX[0],iX[1],iX[2],iX[3]));hE.apJ(h);}else{if(iX[0]+iX[2]-hE.cN().x>hE.cN().width){hE.cN().width=iX[0]+iX[2]-hE.cN().x;}}hE.aqj(h);abk=iX[1];}if(hE){fg.VG().ant(hE);}fg.apd(hx.text);if(hx.text.length>0){fg.MA(true);J.ay('textPageReady',{pageNumber:J.nT(),containsText:true});}else{fg.MA(false);J.ay('textPageReady',{pageNumber:J.nT(),containsText:false});}};this.aiN=function(aiQ,Nd,Qm){if(!aiQ){return;}PM.IH().aCg();var ri=1;var ph=1;if(Nd&&Nd>0&&aq>0){if(Nd!==aq){ri=aq/Nd;}}if(Qm&&Qm>0&&aS>0){if(Qm!==aS){ph=aS/Qm;}}IPCC.F.forEach(aiQ,function(aie){var jz;switch(aie.markType){case "DocumentHyperlink":jz=new IPCC.Web.UI.ImGearDocumentHyperlink(aie.properties);jz.Da(jz.cN().scale(ph,ri));if(!jz.ato()){PM.IH().atT(jz);}break;default:break;}});J.ay('hyperlinkPageReady',{pageNumber:J.nT()});};this.auI=function(){J.Ay();};this.Ay=function(){if(!fg){fg=new IPCC.Web.UI.ImGearTextPage();}if(!J.bi){throw new IPCC.Web.UI.ImGearInvalidOperationException('You must add this Page to a valid ImGearDocument object which has a valid ImageServicePath property.');}if(fg.wJ()){return;}var aik=true;if(J.jS()===0){aik=false;}function MP(aD){if(aD.pages){var ae;if(aD.pages.length>0){if(aD.pages[0].number!==J.nT()){for(var h=0;h<aD.pages.length;h++){if(aD.pages[h].number===J.nT()){ae=h;break;}}if(!ae){J.gX.NB=false;return;}}else{ae=0;}var hx=aD.pages[ae];J.gX.NB=true;if(aD.pages[ae].text&&aD.pages[ae].text.length>0){fg.MA(true);}else{fg.MA(false);}J.gX.qk=1000;J.alY(hx);J.aib(hx);J.aiN(hx.markup,hx.height,hx.width);return;}}var qT=J.gX.qk;if(!J.gX.NB){if(J.gX.qs<6){if(J.gX.qs<2){qT=qT+1000;}else{qT=qT+3000;}J.gX.qs++;J.gX.qk=qT;setTimeout(J.auI,qT);}else{J.gX.amc=true;}}};function fl(ac){var ii=J.bi.ii,aj;try{var fV;var oz=ac.getResponseHeader("Accusoft-Data-Encrypted");if(oz==='true'){var vf=IPCC.Web.hG.rc.uG(ac.getResponseHeader("Accusoft-Data-SK"));var bf=IPCC.Web.JN(vf,ii);var fm=IPCC.Web.Kw(ac);var tY=IPCC.Web.DP(fm,bf,ii);fV=IPCC.Web.hG.Hw.mb(tY);}else{fV=ac.responseText;}aj=JSON.parse(fV);MP(aj);}catch(e){var dw=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dw.exception=e;dw.pageNumber=J.get_pageNumber();J.ay('textExtractionFailed',dw);return;}};function eG(aj){try{if(!aj.response){throw new IPCC.Web.UI.ImGearHttpException(0,"Text extraction timeout");}else{if(aj.response.statusText){throw new IPCC.Web.UI.ImGearHttpException(aj.response.status,"Unable to obtain text, Error from the service = "+aj.response.statusText);}else{throw new IPCC.Web.UI.ImGearHttpException(aj.response.status,"Unable to obtain text from the service");}}}catch(e){var dw=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dw.exception=e;dw.pageNumber=J.get_pageNumber();J.ay('textExtractionFailed',dw);return;}};var ad=J.get_pageNumber();var iH=J.bi.get_documentIdentifier();if(!(/^[\x00-\x7F]*$/.test(iH))){iH='e'+J.bi.get_encodedDocumentIdentifier();}else{iH='u'+encodeURIComponent(iH);}var hs=J.bi.ta;var nR=J.bi.nR;var bQ;if(J.iP()){bQ=hs+'/Document/q/'+ad.toString()+'-'+ad.toString()+'/Text?DocumentID='+iH+'&iv='+nR;}else{bQ=hs+'/Document/q/'+ad.toString()+'-'+ad.toString()+'/Text?DocumentID='+iH;}var gD={method:'GET',url:bQ,headers:{'accept':'application/json'}};if(aik===true){gD.timeout=J.jS();}IPCC.F.me.eg(gD).then(fl,eG);};this.cd=function(){if(!fg){fg=new IPCC.Web.UI.ImGearTextPage();}return fg;};this.aIn=function(L){if(typeof L.nn!=='function'){return;}fg=L;};this.aif=function(){fg=undefined;J.gX={qs:0,amc:false,qk:1000,NB:false};CA=false;CS=0;GB=0;};this.Na=function(xk,xs){var J=this;function fl(ac){var aj;aj=JSON.parse(ac.responseText);if(aj.imageWidth&&aj.imageHeight){J.Nk(aj.imageWidth);J.Or(aj.imageHeight);xk(aj.imageWidth,aj.imageHeight);}else{xs("Unable to obtain document information from the server");}};function eG(aj){xs("Unable to obtain document information from the server");};if(J.ki()>0||J.jE()>0){xk(J.ki(),J.jE());}else{var qP=IPCC.gI.sV(J.bi.get_documentIdentifier());if(!qP||qP===""){xs("Invalid encoded Identifier");}var us='';if(!IPCC.tM.JX()){us='&ContentType=png';}var bQ;if(!(/^[\x00-\x7F]*$/.test(qP))){bQ=J.bi.ta+'/Page/q/'+(J.get_pageNumber())+'/Attributes?DocumentID=e'+qP+us;}else{bQ=J.bi.ta+'/Page/q/'+(J.get_pageNumber())+'/Attributes?DocumentID=u'+encodeURIComponent(J.bi.get_documentIdentifier())+us;}IPCC.F.me.eg({method:'GET',url:bQ,headers:{'Content-Type':'application/json'}}).then(fl,eG);}};this.cg=function(dg){var R=aN.getHandler('propertyChanged');if(R){R(this,new IPCC.pE(dg));}};this.ay=function(cY,V){var R=aN.getHandler(cY);if(R!==null){try{R(J,V);}catch(e){IPCC.jx.RJ('event raise, ImGearPage, error: '+e.message);}}};return this;};Kl.prototype={get_pageNumber:function(){var bq=this.nT();return bq;},get_pageWidth:function(){var bq=this.ki();return bq;},get_pageHeight:function(){var bq=this.jE();return bq;},get_textPage:function(){var bq=this.cd();return bq;},get_encryption:function(){var bq=this.iP();return bq;},set_encryption:function(value){this.oR(value);},get_hyperlinkPage:function(){return this.ait();},get_document:function(){var bq=this.axf();return bq;},add_propertyChanged:function(handler){this.kf(handler);},remove_propertyChanged:function(handler){this.mo(handler);},requestPageAttributes:function(attributesRetrievedCallback,attributesRetrievalFailedCallback){this.Na(attributesRetrievedCallback,attributesRetrievalFailedCallback);}};Kl.registerClass=cs;Kl.registerClass('IPCC.Web.UI.ImGearPage');module.exports=Kl;},{"./../../IPCC.Util":28}],89:[function(require,module,exports){var cs=require('./../../IPCC.Util').regClass;var KM=function(){var J=this;var cQ=[];var aN=new IPCC.Web.UI.ir();this.aDS=false;this.aDe=true;this.bi=undefined;this.alz=function(aO){this.afS(cQ.length,aO);};function kD(af){if(af>cQ.length-1||(af<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',af,'page index is out of range in the page collection');}};this.afS=function(af,aO){var bz;var ci=cQ.length;if(af>cQ.length||(af<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',af,'index of the page Collection is out of range');}if(J.aDe&&J.aDS){if(ci>0){throw new IPCC.Web.UI.ImGearInvalidOperationException('You must first remove the existing selected page before adding a new one to the selected page collection).');}}for(bz=0;bz<ci;bz++){if(cQ[bz]===aO){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot duplicate same page instance in a page collection).');}}if(J.bi){if(!aO.bi){aO.bi=J.bi;}}aO.add_propertyChanged(Im);cQ.splice(af,0,aO);var V=new IPCC.Web.UI.ImGearPageEventArgs();V.imGearPage=aO;V.length=1;J.ay('pageAdded',V);};this.jF=function(af){kD(af);var fA=cQ[af];return fA;};this.aqG=function(af,aO){kD(af);var Vl=cQ[af];if(Vl===aO){return;}cQ[af]=aO;var V=new IPCC.Web.UI.ImGearPageEventArgs();V.imGearPage=aO;V.length=1;this.ay('pageAdded',V);Vl.remove_propertyChanged(Im);var BX=new IPCC.Web.UI.ImGearPageEventArgs();BX.imGearPage=Vl;BX.length=1;this.ay('pageRemoved',BX);};this.eF=function(){return cQ.length;};this.jL=function(iT,du){var aka=[].concat(cQ);var h;for(h=0;h<aka.length;h++){iT.call(du,aka[h],h,this);}};this.acB=function(af){kD(af);var V=new IPCC.Web.UI.ImGearPageEventArgs();V.imGearPage=cQ[af];cQ[af].remove_propertyChanged(Im);V.length=1;cQ.splice(af,1);J.ay('pageRemoved',V);};this.aHh=function(aO){var cG=cQ.length;for(var h=0;h<cG;h++){if(aO===cQ[h]){return h;}}return-1;};this.aBt=function(){var h=0;while(cQ.length>0){this.acB(h);}};function Im(bu,V){var BX=new IPCC.Web.UI.ImGearPageEventArgs();BX.imGearPage=bu;BX.length=1;J.ay('pageChanged',BX);};this.Hg=function(R){aN.addHandler('pageAdded',R);};this.GY=function(R){aN.removeHandler('pageAdded',R);};this.Ki=function(R){aN.addHandler('pageChanged',R);};this.Ie=function(R){aN.removeHandler('pageChanged',R);};this.Hj=function(R){aN.addHandler('pageRemoved',R);};this.EU=function(R){aN.removeHandler('pageRemoved',R);};this.ay=function(cY,V){var R=aN.getHandler(cY);if(R!==null){try{R(J,V);}catch(e){IPCC.jx.RJ('raise event error in ImGearPageCollection, Error: '+e.message);}}};return this;};KM.prototype={addPage:function(page){this.alz(page);},insertPage:function(index,page){this.afS(index,page);},forEach:function(method,context){this.jL(method,context);},getPage:function(index){return this.jF(index);},setPage:function(index,page){this.aqG(index,page);},get_length:function(){return this.eF();},removePage:function(index){this.acB(index);},removeAllPages:function(){this.aBt();},add_pageAdded:function(handler){this.Hg(handler);},remove_pageAdded:function(handler){this.GY(handler);},add_pageChanged:function(handler){this.Ki(handler);},remove_pageChanged:function(handler){this.Ie(handler);},add_pageRemoved:function(handler){this.Hj(handler);},remove_pageRemoved:function(handler){this.EU(handler);}};KM.registerClass=cs;KM.registerClass('IPCC.Web.UI.ImGearPageCollection');module.exports=KM;},{"./../../IPCC.Util":28}],90:[function(require,module,exports){var ec=require('./../../IPCC.Util').regEnum;var Lz=function(){};Lz.registerEnum=ec;Lz.prototype={UnRequested:0,RequestPending:1,Known:2,Failed:3};Lz.registerEnum('IPCC.Web.UI.ImGearPageCountStatus',false);module.exports=Lz;},{"./../../IPCC.Util":28}],91:[function(require,module,exports){var cs=require('./../../IPCC.Util').regClass;var Lc=function(){};Lc.registerClass=cs;Lc.prototype={};Lc.registerClass('IPCC.Web.UI.ImGearPageCreateArgs');module.exports=Lc;},{"./../../IPCC.Util":28}],92:[function(require,module,exports){var cs=require('./../../IPCC.Util').regClass;var Mo=function(){return this;};Mo.prototype={};Mo.registerClass=cs;Mo.registerClass('IPCC.Web.UI.ImGearPageEventArgs');module.exports=Mo;},{"./../../IPCC.Util":28}],93:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var Mb=function(){return this;};Mb.registerClass=cs;Mb.prototype={};Mb.registerClass('IPCC.Web.UI.ImGearPageOpenFailedEventArgs');module.exports=Mb;},{"../../IPCC.Util":28}],94:[function(require,module,exports){var atl=function(bv,cA,aZ,dk,zb,avw){this.bm=new IPCC.Web.UI.Rectangle(bv,cA,aZ,dk);this.kO=zb;this.JT=avw;this.axu=function(){return zb;};this.tx=function(){var ZK=new IPCC.Web.UI.Rectangle(this.bm.x,this.bm.y,this.bm.width,this.bm.height);return ZK;};this.aER=function(){return this.JT;};};module.exports=atl;},{}],95:[function(require,module,exports){var asx=function(){var hQ=[];this.auP=function(lc){hQ.push(new IPCC.Web.UI.ImGearTextCharacter(lc.bm.x,lc.bm.y,lc.bm.width,lc.bm.height,lc.kO,lc.JT));};this.aGz=function(arj){function kr(lc){hQ.push(lc);};arj.forEach(kr,{});};this.atq=function(){var acs=[];for(var bz=0;bz<this.eF();bz++){var Oy=this.kk(bz).bm;var H=[];H.push(Oy.x);H.push(Oy.y);H.push(Oy.width);H.push(Oy.height);acs.push(H);}return acs;};this.aHZ=function(af,ajI){var bz;var ci=hQ.length;if(af>hQ.length||(af<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',af,'index of theText Character Collection is out of range');}for(bz=0;bz<ci;bz++){if(hQ[bz]===ajI){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot duplicate same aD Character instance in a lc collection).');}}hQ.splice(af,0,ajI);};this.aAX=function(aaM,aav){IPCC.F.forEach(hQ,function(kO){kO.bm.width=kO.bm.width*aaM;kO.bm.height=kO.bm.height*aav;kO.bm.x=kO.bm.x*aaM;kO.bm.y=kO.bm.y*aav;});};this.jL=function(iT,du){var TO=[].concat(hQ);var h;for(h=0;h<TO.length;h++){iT.call(du,new IPCC.Web.UI.ImGearTextCharacter(TO[h].x,TO[h].y),h,this);}};function kD(af){if(af>hQ.length-1||(af<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',af);}};this.kk=function(af){kD(af);var pQ=hQ[af];return new IPCC.Web.UI.ImGearTextCharacter(pQ.bm.x,pQ.bm.y,pQ.bm.width,pQ.bm.height,pQ.kO,pQ.JT);};this.aIa=function(af,lc){kD(af);var Eh=hQ[af];if(Eh.bm.x===lc.bm.x&&Eh.bm.y===lc.y&&Eh.bm.width===lc.bm.width&&Eh.bm.height===lc.bm.height&&Eh.kO===lc.kO&&Eh.JT===lc.JT){return;}hQ[af]=lc;};this.eF=function(){return hQ.length;};this.aFj=function(af){kD(af);hQ.splice(af,1);};this.aGM=function(){if(hQ.length<1){return;}hQ=[];};return this;};module.exports=asx;},{}],96:[function(require,module,exports){var ave=function(){var apX=new IPCC.Web.UI.ImGearTextCharacterCollection();var VF=false;var agj=false;var abp="";var uF=new IPCC.Web.UI.ImGearTextSectionCollection();var YR=false;this.hB=function(){return apX;};this.nn=function(){return VF;};this.MA=function(L){agj=true;if(L===VF){return;}if((L===true)||(L===false)){VF=L;}};this.wJ=function(){return agj;};this.Be=function(){return abp;};this.apd=function(L){if(L===abp){return;}abp=L;};this.VG=function(){return uF;};this.ayM=function(){return YR;};this.aez=function(L){if(L===YR){return;}if((L===true)||(L===false)){YR=L;}};};module.exports=ave;},{}],97:[function(require,module,exports){var auk=function(){var H=null;var ad=0;var dq=0;this.cN=function(){return H;};this.Da=function(L){H=L;};this.aed=function(){return ad;};this.apJ=function(L){ad=L;};this.aiR=function(){return dq;};this.aqj=function(L){dq=L;};};module.exports=auk;},{}],98:[function(require,module,exports){var auO=function(){var uF=[];this.ant=function(hE){uF.push(hE);};function kD(af){if(af>uF.length-1||(af<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',af);}};this.aup=function(af){kD(af);return uF[af];};this.eF=function(){return uF.length;};return this;};module.exports=auO;},{}],99:[function(require,module,exports){var ec=require('./../../IPCC.Util').regEnum;var Ml=function(){if(arguments.length!==0){throw new IPCC.Web.UI.ImGearParameterCountException();}throw new IPCC.Web.UI.ImGearNotImplementedException();};Ml.registerEnum=ec;Ml.prototype={backspace:8,tab:9,enter:13,esc:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,del:127};Ml.registerEnum("IPCC.Web.UI.Key");module.exports=Ml;},{"./../../IPCC.Util":28}],100:[function(require,module,exports){var ec=require('../../IPCC.Util').regEnum;var KW=function(){};KW.registerEnum=ec;KW.prototype={Pointer:0,Solid:1,Open:2,PointerSolid:3,None:4};KW.registerEnum('IPCC.Web.UI.LineHeadType',false);module.exports=KW;},{"../../IPCC.Util":28}],101:[function(require,module,exports){var ec=require('../../IPCC.Util').regEnum;var KI=function(){};KI.registerEnum=ec;KI.prototype={Solid:0,Dash:1,Dot:2,DashDot:3,DashDotDot:4};KI.registerEnum('IPCC.Web.UI.LineStyle',false);module.exports=KI;},{"../../IPCC.Util":28}],102:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var KS=function(){return this;};KS.registerClass=cs;KS.prototype={};KS.registerClass('IPCC.Web.UI.LogItemEventArgs');module.exports=KS;},{"../../IPCC.Util":28}],103:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var LJ=function(type){var aT=type;type=undefined;var st=new Date();var sA=new Date();var am=null;var H;var bo;var cl;var cJ=new IPCC.Web.UI.Data();var aN=new IPCC.Web.UI.ir();var J=this;var hU;this.fs=function(lv,dg){if((hU&lv)===0){throw new IPCC.Web.UI.ImGearInvalidOperationException(dg+' is not a valid property for this type of Mark.');}};if(aT===IPCC.Web.UI.MarkType.SignatureText){this.lz='#000000';this.ie=IPCC.Web.UI.LineStyle.Solid;this.es=0;}else{this.lz='#000000';this.ie=IPCC.Web.UI.LineStyle.Solid;this.es=1;}this.cZ=255;this.mu=IPCC.Web.UI.MarkInteractionMode.Full;var jJ=false;switch(aT){case IPCC.Web.UI.MarkType.Line:jJ=true;bo=new IPCC.Web.UI.PointCollection();bo.addPoint({x:0,y:0});bo.addPoint({x:0,y:0});hU=1;this.lz='#18385F';this.es=6;break;case IPCC.Web.UI.MarkType.Polyline:jJ=true;this.sf=false;bo=new IPCC.Web.UI.PointCollection();hU=2;this.es=2;break;case IPCC.Web.UI.MarkType.Rectangle:H=new IPCC.Web.UI.Rectangle(0,0,0,0);hU=4;this.cE='#FB0404';this.es=4;break;case IPCC.Web.UI.MarkType.Ellipse:H=new IPCC.Web.UI.Rectangle(0,0,0,0);hU=8;this.cE='#FB0404';this.es=4;break;case IPCC.Web.UI.MarkType.Polygon:bo=new IPCC.Web.UI.PointCollection();hU=16;break;case IPCC.Web.UI.MarkType.Text:this.BI='#000000';this.yY=false;this.pF=IPCC.Web.UI.LineStyle.Solid;this.Bz=1;this.mY=new IPCC.Web.UI.Point(0,0);this.Bw=IPCC.Web.UI.CalloutType.Triangle;this.wC=false;this.ew='Arial';this.cR=12;this.bZ=IPCC.Web.UI.FontStyle.Regular;this.ie=IPCC.Web.UI.LineStyle.Solid;this.gF=0;H=new IPCC.Web.UI.Rectangle(0,0,0,0);this.aD='';this.jC=IPCC.Web.UI.HorizontalAlignment.Left;this.yh=IPCC.Web.UI.VerticalAlignment.Top;this.qy='#000000';this.yF=255;this.xv=IPCC.Web.UI.Orientation.TopLeft;this.eR=[];this.es=4;this.cZ=127;this.cE='#FFFFFF';hU=32;break;case IPCC.Web.UI.MarkType.Stamp:H=new IPCC.Web.UI.Rectangle(0,0,0,0);hU=128;break;case IPCC.Web.UI.MarkType.Highlight:H=new IPCC.Web.UI.Rectangle(0,0,0,0);this.bS='';this.ic='n';this.ad=0;this.cC='';this.db=0;this.cZ=127;hU=256;break;case IPCC.Web.UI.MarkType.HighlightText:H=new IPCC.Web.UI.Rectangle(0,0,0,0);this.bS='';this.ic='n';this.ad=0;this.cC='';this.db=0;this.cZ=127;this.cE='#FFFF00';hU=512;this.eR=[];this.aA=[];break;case IPCC.Web.UI.MarkType.Freehand:H=new IPCC.Web.UI.Rectangle(0,0,0,0);hU=64;this.es=4;this.lz='#000000';this.hS=false;this.TC=1;this.Tz=1;this.vB='M0,0';break;case IPCC.Web.UI.MarkType.SignaturePath:H=new IPCC.Web.UI.Rectangle(0,0,0,0);hU=1024;this.jC=IPCC.Web.UI.HorizontalAlignment.Center;this.es=4;this.lz='#000000';this.hS=false;this.TC=1;this.Tz=1;this.vB='M0,0';break;case IPCC.Web.UI.MarkType.SignatureText:H=new IPCC.Web.UI.Rectangle(0,0,0,0);hU=2048;this.jC=IPCC.Web.UI.HorizontalAlignment.Center;this.aD='John Doe';this.qy='#000000';this.cE='#000000';this.ew="";break;case IPCC.Web.UI.MarkType.RectangleRedaction:H=new IPCC.Web.UI.Rectangle(0,0,0,0);hU=4096;this.ew='Arial';this.cR=8;this.bZ=IPCC.Web.UI.FontStyle.Regular;this.aD='';this.jC=IPCC.Web.UI.HorizontalAlignment.Center;this.yh=IPCC.Web.UI.VerticalAlignment.Center;this.cE='#000000';this.qy='#FFFFFF';this.yF=255;this.xv=IPCC.Web.UI.Orientation.TopLeft;break;case IPCC.Web.UI.MarkType.TextSelectionRedaction:H=new IPCC.Web.UI.Rectangle(0,0,0,0);this.aA=[];this.bS='';this.fj='';this.aD='';this.ew='Arial';this.cR=8;this.ad=0;this.db=0;hU=8192;this.eR=[];break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:H=new IPCC.Web.UI.Rectangle(0,0,0,0);this.mf='';this.es=2;this.cC='';this.bS='';this.ic='n';this.ad=0;this.db=0;this.cE='#3B00FF';hU=1<<14;this.eR=[];this.aA=[];break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:H=new IPCC.Web.UI.Rectangle(0,0,0,0);hU=16384;this.av='';this.pw='';break;case IPCC.Web.UI.MarkType.DocumentHyperlink:H=new IPCC.Web.UI.Rectangle(0,0,0,0);this.mf='';this.Sk='';this.zP='';this.FV=0;this.EO=0;this.pZ=255;hU=32768;break;case IPCC.Web.UI.MarkType.TextLine:hU=65536;H=new IPCC.Web.UI.Rectangle(0,0,0,0);this.jC=IPCC.Web.UI.HorizontalAlignment.Left;this.aD='';this.qy='#000000';this.ew="Courier New";this.es=1;this.hS=true;this.gF=0;this.DR=0;this.Ir=false;var iq=IPCC.F.uo("M",this.ew,{uT:'pre'});this.xV=iq.width;this.xM=iq.height;this.hX=null;break;case IPCC.Web.UI.MarkType.TextAreaSignature:this.BI='#000000';this.yY=false;this.pF=IPCC.Web.UI.LineStyle.Solid;this.Bz=1;this.mY=new IPCC.Web.UI.Point(0,0);this.Bw=IPCC.Web.UI.CalloutType.Triangle;this.wC=false;this.ew='Courier New';this.il=0;this.gF=0;this.cR=12;this.bZ=IPCC.Web.UI.FontStyle.Regular;H=new IPCC.Web.UI.Rectangle(0,0,0,0);this.aD='';this.jC=IPCC.Web.UI.HorizontalAlignment.Left;this.yh=IPCC.Web.UI.VerticalAlignment.Top;this.qy='#000000';this.yF=255;this.xv=IPCC.Web.UI.Orientation.TopLeft;this.eR=[];this.es=1;this.hS=false;this.cE='#FFFFFF';this.cZ=0;hU=1<<18;break;case IPCC.Web.UI.MarkType.Strikethrough:H=new IPCC.Web.UI.Rectangle(0,0,0,0);this.bS='';this.lz='#000000';this.es=2;this.ic='n';this.ad=0;this.cC='';this.db=0;hU=1<<17;this.eR=[];this.aA=[];break;default:throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('type',aT);}if(aT!==IPCC.Web.UI.MarkType.SignaturePath&&aT!==IPCC.Web.UI.MarkType.Freehand&&aT!==IPCC.Web.UI.MarkType.SignatureText&&aT!==IPCC.Web.UI.MarkType.DocumentHyperlink&&aT!==IPCC.Web.UI.MarkType.HighlightText&&aT!==IPCC.Web.UI.MarkType.Strikethrough&&aT!==IPCC.Web.UI.MarkType.TextLine){if(jJ){this.Iq=15;this.Hm=25;this.lO=IPCC.Web.UI.LineHeadType.None;this.AC='#000000';this.Jd=15;this.Gv=25;this.Fb=IPCC.Web.UI.LineHeadType.None;}else{this.Kk=true;this.hS=true;if(aT===IPCC.Web.UI.MarkType.Highlight){this.hS=false;this.cZ=100;}}}this.TL=IPCC.Web.UI.atX++;this.dM=true;this.au={};this.dR=[];var MQ=false;function aqt(bu,V){J.ay('commentAdded',V);};function arm(bu,V){J.ay('commentRemoved',V);};function Qs(bu,V){J.ay('commentChanged',V);};cl=new IPCC.Web.UI.Conversation(J);cl.add_commentAdded(aqt);cl.add_commentChanged(Qs);cl.add_commentRemoved(arm);this.ay=function(cY,V){var R=aN.getHandler(cY);if(R!==null){R(this,V);}};function aay(bu,V){var acN='points';if(aT===IPCC.Web.UI.MarkType.Line){acN=V.index===0?'startPoint':'endPoint';}J.cg(acN,V);};if(bo){bo.add_pointAdded(aay);bo.add_pointChanged(aay);bo.add_pointRemoved(aay);}this.ik=function(){return aT;};this.ahS=function(){return st;};this.abT=function(L){st=L;};this.aiE=function(){return sA;};this.WF=function(L){sA=L;};this.eh=function(){return am;};this.nc=function(value){if(am!==value){am=value;this.cg('artPage');}};this.lq=function(){return MQ;};this.kE=function(L){MQ=L;};this.aju=function(){var nz=new IPCC.Web.UI.Rectangle(0,0,0,0);switch(aT){case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:case IPCC.Web.UI.MarkType.Polygon:return bo.tx();case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Ellipse:case IPCC.Web.UI.MarkType.Stamp:case IPCC.Web.UI.MarkType.Highlight:case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.DocumentHyperlink:case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.SignatureText:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:case IPCC.Web.UI.MarkType.Freehand:case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:case IPCC.Web.UI.MarkType.Strikethrough:return H.clone();case IPCC.Web.UI.MarkType.Text:var jg=H.x+H.width,hK=H.y+H.height;var ajf=H.x+this.mY.x,aip=H.y+this.mY.y;nz.x=Math.min(H.x,Math.min(jg,ajf));nz.y=Math.min(H.y,Math.min(hK,aip));nz.width=Math.max(H.x,Math.max(jg,ajf))-nz.x;nz.height=Math.max(H.y,Math.max(hK,aip))-nz.y;break;}return nz;};this.cN=function(){return H.clone();};this.AR=function(L){this.DQ(16384,'image','av',L);};this.dj=function(){return this.av;};this.qc=function(){return bo;};this.ayt=function(){return cl;};this.wB=function(){return cJ;};this.Da=function(L){var sn;if(!H.equals(L)){H=new IPCC.Web.UI.Rectangle(L.x,L.y,L.width,L.height);if(aT===IPCC.Web.UI.MarkType.Stamp||aT===IPCC.Web.UI.MarkType.SignatureText||aT===IPCC.Web.UI.MarkType.TextLine){if(document.documentMode<9){sn=0;if(H.width>=H.height){sn=(H.width/14)/2;}else{sn=H.width/15;}if(sn*15>=H.width){sn=(H.width/15)/2;}this.stampSize=Math.round(sn);}else{var textFontSize=(H.width/6);if(textFontSize>H.height){textFontSize=(H.height-(H.height/6));}var oD=this.get_text();if(!oD){oD=(aT===IPCC.Web.UI.MarkType.Stamp)?'APPROVED':'';}sn=oD.length*textFontSize;if(sn>H.width){textFontSize=((H.width/oD.length));}var DR=Math.round(textFontSize);this.stampSize=DR.toString();}}this.cg('rectangle');}};this.jP=function(){return this.TL;};this.FP=function(eA,ey){if(eA!==0||ey!==0){switch(aT){case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:case IPCC.Web.UI.MarkType.Polygon:bo.aij(eA,ey);break;case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Ellipse:case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.Stamp:case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.SignatureText:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:case IPCC.Web.UI.MarkType.Freehand:case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:case IPCC.Web.UI.MarkType.Freehand:if(aT===IPCC.Web.UI.MarkType.RectangleRedaction&&this.bS!==undefined){break;}H.x+=eA;H.y+=ey;this.cg('rectangle');break;case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.Highlight:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.Strikethrough:break;}}};this.Xu=function(Yl){if(this.eR&&Yl!==this.eR){while(this.eR.length>0){this.eR.pop();}if(Yl){this.eR=Yl.slice(0);}this.ay('markTextSelectionChanged',{});}};this.IY=function(R){if(this.eR){aN.addHandler('markTextSelectionChanged',R);}};this.FW=function(R){if(this.eR){aN.removeHandler('markTextSelectionChanged',R);}};this.vv=function(R){aN.addHandler('commentAdded',R);};this.CT=function(R){aN.removeHandler('commentAdded',R);};this.vG=function(R){aN.addHandler('commentRemoved',R);};this.Dh=function(R){aN.removeHandler('commentRemoved',R);};this.uu=function(R){aN.addHandler('commentChanged',R);};this.vR=function(R){aN.removeHandler('commentChanged',R);};this.kf=function(R){aN.addHandler('propertyChanged',R);};this.mo=function(R){aN.removeHandler('propertyChanged',R);};this.cg=function(dg){var R=aN.getHandler('propertyChanged');if(R){R(this,new IPCC.pE(dg));}};this.kf(function(T){T.WF(new Date());});return this;};LJ.prototype={toString:function(){switch(this.get_type()){case IPCC.Web.UI.MarkType.Line:return 'Line Mark from '+this.qc().getPoint(0)+' to '+this.qc().getPoint(1);case IPCC.Web.UI.MarkType.Polyline:return 'Polyline Mark with '+this.qc().eF()+' vertices';case IPCC.Web.UI.MarkType.Rectangle:return 'Rectangle Mark at '+this.cN();case IPCC.Web.UI.MarkType.RectangleRedaction:return 'Rectangle Redaction Mark at '+this.cN();case IPCC.Web.UI.MarkType.Ellipse:return 'Ellipse Mark at '+this.cN();case IPCC.Web.UI.MarkType.Polygon:return 'Polygon Mark with '+this.qc().eF()+' vertices';case IPCC.Web.UI.MarkType.Text:return 'Text Mark, "'+this.aD+'", at '+this.cN();case IPCC.Web.UI.MarkType.Stamp:return 'Stamp Mark at '+this.cN();case IPCC.Web.UI.MarkType.Highlight:return 'Rectangle Mark at '+this.cN();case IPCC.Web.UI.MarkType.HighlightText:return 'Highlight Mark at '+this.cN();case IPCC.Web.UI.MarkType.TextSelectionRedaction:return 'Text Selection Redaction at '+this.cN();case IPCC.Web.UI.MarkType.TextSelectionRedaction:return 'Text Hyperlink Annotation at '+this.cN();case IPCC.Web.UI.MarkType.TextSelectionRedaction:return 'Document Hyperlink at '+this.cN();case IPCC.Web.UI.MarkType.SignaturePath:return 'Signature Path Mark, "'+this.vB+'", at '+this.cN();case IPCC.Web.UI.MarkType.Freehand:return 'Freehand Mark, "'+this.vB+'", at '+this.cN();case IPCC.Web.UI.MarkType.SignatureText:return 'Signature Text Mark at '+this.cN();case IPCC.Web.UI.MarkType.TextLine:return 'Text Line Mark at '+this.cN();case IPCC.Web.UI.MarkType.TextAreaSignature:return 'Text Area Signature Mark at '+this.cN();case IPCC.Web.UI.MarkType.ImageStampAnnotation:return 'ImageStamp Mark at '+this.cN();case IPCC.Web.UI.MarkType.ImageStampRedaction:return 'ImageStamp Redaction Mark at '+this.cN();case IPCC.Web.UI.MarkType.Strikethrough:return 'Strikethrough Mark at '+this.cN();}return 'Mark';},initializeDates:function(st,sA){IPCC.bO.ja(st,"dateCreated");IPCC.bO.ja(sA,"dateModified");this.abT(st);this.WF(sA);},get_dateCreated:function(){return this.ahS();},get_dateModified:function(){return this.aiE();},mV:function(lv,dg,kL,L){this.fs(lv,dg);if(this[kL]!==L){this[kL]=L;this.cg(dg);}},Gq:function(lv,dg,kL,L){IPCC.bO.Wu(L,dg);this.mV(lv,dg,kL,L);},xP:function(lv,dg,kL,L){IPCC.bO.gG(L,dg);this.mV(lv,dg,kL,L);},yD:function(lv,dg,kL,L,yq,wl){IPCC.bO.kb(L,dg,yq,wl);this.mV(lv,dg,kL,L);},ZZ:function(lv,dg,kL,L,yq,wl){IPCC.bO.mc(L,dg,yq,wl);this.mV(lv,dg,kL,L);},DQ:function(lv,dg,kL,L){IPCC.bO.aT(L,dg,'string');this.mV(lv,dg,kL,L);},uc:function(lv,dg,kL,L,le){IPCC.bO.le(L,dg,le);this.mV(lv,dg,kL,L);},aqI:function(lv,dg,kL,L,le){IPCC.bO.le(L,dg,le,true);this.mV(lv,dg,kL,L);},alJ:function(lv,dg,kL,L){IPCC.bO.bL(L,dg);this.mV(lv,dg,kL,L);},get_artPage:function(){return this.eh();},get_boundingRectangle:function(){return this.aju();},get_selected:function(){var am=this.eh();if(!am){return false;}var fq=am.zQ();return fq.contains(this);},set_selected:function(value){var am=this.eh();if(am){if(this.mu!==IPCC.Web.UI.MarkInteractionMode.SelectionDisabled|| !value){var fq=am.zQ();if(value!==fq.contains(this)){if(value){fq.MY(this);}else{fq.wV(this);}this.cg('selected');}}}else{if(value){throw new IPCC.Web.UI.ImGearInvalidOperationException('A Mark cannot be selected unless it is associated with an ArtPage.');}}},get_calloutLineColor:function(){this.fs(32,'calloutLineColor');return this.BI;},set_calloutLineColor:function(value){this.Gq(32,'calloutLineColor','BI',value);},get_calloutLineIsDistinct:function(){this.fs(32,'calloutLineIsDistinct');return this.yY;},set_calloutLineIsDistinct:function(value){this.mV(32,'calloutLineIsDistinct','yY',value);},get_calloutLineStyle:function(){this.fs(32,'calloutLineStyle');return this.pF;},set_calloutLineStyle:function(value){this.uc(32,'calloutLineStyle','pF',value,IPCC.Web.UI.LineStyle);},get_calloutLineWidth:function(){this.fs(32,'calloutLineWidth');return this.Bz;},set_calloutLineWidth:function(value){this.yD(32,'calloutLineWidth','Bz',value,0,50);},get_calloutPoint:function(){this.fs(32,'calloutPoint');return this.mY;},set_calloutPoint:function(value){this.alJ(32,'calloutPoint','mY',value);},get_calloutType:function(){this.fs(32,'calloutType');return this.Bw;},set_calloutType:function(value){this.uc(32,'calloutType','Bw',value,IPCC.Web.UI.CalloutType);},get_calloutVisible:function(){this.fs(32,'calloutVisible');return this.wC;},set_calloutVisible:function(value){if(!this.wC&&value&&this.ik()===IPCC.Web.UI.MarkType.Text){if(this.mY.x===0&&this.mY.y===0){var H=this.cN();this.set_calloutPoint({x:H.width,y:H.height*1.5});}}this.mV(32,'calloutVisible','wC',value);},get_endHeadAngle:function(){this.fs(3,'endHeadAngle');return this.Iq;},set_endHeadAngle:function(value){this.yD(3,'endHeadAngle','Iq',value,0,180);},get_endHeadLength:function(){this.fs(3,'endHeadLength');return this.Hm;},set_endHeadLength:function(value){this.yD(3,'endHeadLength','Hm',value,0,100);},get_endHeadType:function(){this.fs(3,'endHeadType');return this.lO;},set_endHeadType:function(value){this.uc(3,'endHeadType','lO',value,IPCC.Web.UI.LineHeadType);},get_href:function(){this.fs(1<<14|1<<15,'href');return this.mf;},set_href:function(value){this.DQ(1<<14|1<<15,'href','mf',value);},has_unsafe_href:function(){return(! !this.mf&&IPCC.F.ama(this.mf));},get_mask:function(){this.fs(65536,'mask');return this.hX;},set_mask:function(value){this.mV(65536,'mask','hX',value);},get_borderType:function(){this.fs(32768,'borderType');return this.Sk;},set_borderType:function(value){this.DQ(32768,'borderType','Sk',value);},get_borderHorizontalRadius:function(){this.fs(32768,'borderHorizontalRadius');return this.FV;},set_borderHorizontalRadius:function(value){this.xP(32768,'borderHorizontalRadius','FV',value);},get_borderVerticalRadius:function(){this.fs(1<<15,'borderVerticalRadius');return this.EO;},set_borderVerticalRadius:function(value){this.xP(32768,'borderVerticalRadius','EO',value);},get_borderOpacity:function(){this.fs(32768,'pZ');return this.pZ;},set_borderOpacity:function(value){this.ZZ(32768,'pZ','pZ',value,0,255);},get_borderPattern:function(){this.fs(32768,'zP');return this.zP;},set_borderPattern:function(value){this.mV(32768,'zP','zP',value,0,255);},get_fillColor:function(){this.fs(16380+(1<<14),'fillColor');return this.cE;},set_fillColor:function(value){this.Gq(16380+(1<<14),'fillColor','cE',value);},get_fillVisible:function(){this.fs(16380,'fillVisible');return this.Kk;},set_fillVisible:function(value){this.mV(16380,'fillVisible','Kk',value);},get_fontName:function(){this.fs(6176+8192+65536+(1<<18),'fontName');return this.ew;},set_fontName:function(value){this.DQ(6176+8192+65536+(1<<18),'fontName','ew',value);if(this.ik()===IPCC.Web.UI.MarkType.SignatureText||this.ik()===IPCC.Web.UI.MarkType.TextLine){var bB=(this.ik()===IPCC.Web.UI.MarkType.TextLine)?{uT:'pre'}:{};var iq=IPCC.F.uo(this.aD,this.ew,bB);this.xV=iq.width;this.xM=iq.height;}if(this.ik()===IPCC.Web.UI.MarkType.TextLine){this.Ir=false;}},get_fontSize:function(){this.fs(32+2048+4096+8192,'fontSize');return this.cR;},set_fontSize:function(value){this.yD(32+2048+4096+8192,'fontSize','cR',value,0.1,288);},get_fontStyle:function(){this.fs(6176+(1<<18),'fontStyle');return this.bZ;},set_fontStyle:function(value){this.aqI(6176+(1<<18),'fontStyle','bZ',value,IPCC.Web.UI.FontStyle);},get_headFillColor:function(){this.fs(3,'headFillColor');return this.AC;},set_headFillColor:function(value){this.Gq(3,'headFillColor','AC',value);},get_interactionMode:function(){this.fs(~0,'interactionMode');return this.mu;},set_interactionMode:function(value){this.uc(~0,'interactionMode','mu',value,IPCC.Web.UI.MarkInteractionMode);if(value===IPCC.Web.UI.MarkInteractionMode.SelectionDisabled){this.set_selected(false);}},get_maxLength:function(){this.fs(32+65536+(1<<18),'maxLength');return this.gF;},set_maxLength:function(value){this.xP(32+65536+(1<<18),'maxLength','gF',value);},get_maxFontSize:function(){this.fs(1<<18,'maxFontSize');return this.il;},set_maxFontSize:function(value){this.xP(1<<18,'maxFontSize','il',value);},get_isClosed:function(){this.fs(2,'isClosed');return this.sf;},set_isClosed:function(value){this.mV(2,'isClosed','sf',value);},get_lineColor:function(){return this.lz;},set_lineColor:function(value){this.Gq(13567+32768+(1<<17),'lineColor','lz',value);},get_lineStyle:function(){return this.ie;},set_lineStyle:function(value){this.uc(63+32768,'lineStyle','ie',value,IPCC.Web.UI.LineStyle);},get_lineWidth:function(){return this.es;},set_lineWidth:function(value){this.yD(13567+32768+(1<<17),'lineWidth','es',value,0,50);},get_lineVisible:function(){this.fs(172+65536,'lineVisible');return this.hS;},set_lineVisible:function(value){this.mV(172+65536,'lineVisible','hS',value);},get_opacity:function(){return this.cZ;},set_opacity:function(value){this.ZZ(895+2048+1024,'opacity','cZ',value,0,255);},get_points:function(){this.fs(19,'points');return this.qc();},get_conversation:function(){return this.ayt();},get_data:function(){return this.wB();},get_image:function(){this.fs(16384,'image');return this.dj();},set_image:function(value){this.fs(16384,'image');this.AR(value);},get_rectangle:function(){this.fs((1<<18)+(1<<17)+65536+32768+16384+8192+4096+2048+1024+512+256+128+64+32+8+4,'rectangle');return this.cN();},set_rectangle:function(value){this.fs((1<<18)+(1<<17)+65536+32768+16384+8192+4096+2048+1024+512+256+128+64+32+8+4,'rectangle');IPCC.bO.H(value,'rectangle');this.Da(value);if(this.ik()===IPCC.Web.UI.MarkType.TextLine){this.Ir=false;}},get_startHeadAngle:function(){this.fs(3,'startHeadAngle');return this.Jd;},set_startHeadAngle:function(value){this.yD(3,'startHeadAngle','Jd',value,0,180);},get_startHeadLength:function(){this.fs(3,'startHeadLength');return this.Gv;},set_startHeadLength:function(value){this.yD(3,'startHeadLength','Gv',value,0,100);},get_startHeadType:function(){this.fs(3,'startHeadType');return this.Fb;},set_startHeadType:function(value){this.uc(3,'startHeadType','Fb',value,IPCC.Web.UI.LineHeadType);},get_text:function(){this.fs(14496+65536+(1<<17)+(1<<18),'text');return this.aD;},set_text:function(value){if(this.aD===value){return;}this.DQ(14496+65536+(1<<17)+(1<<18),'text','aD',value);if(this.ik()===IPCC.Web.UI.MarkType.SignatureText||this.ik()===IPCC.Web.UI.MarkType.TextLine){var bB=(this.ik()===IPCC.Web.UI.MarkType.TextLine)?{uT:'pre'}:{};var iq=IPCC.F.uo(this.aD,this.ew,bB);this.xV=iq.width;this.xM=iq.height;}if(this.eR){while(this.eR.length>0){this.eR.pop();}}},get_textHorizontalAlignment:function(){this.fs(32+1024+2048+65536+(1<<18),'textHorizontalAlignment');return this.jC;},set_textHorizontalAlignment:function(value){this.uc(32+1024+2048+65536+(1<<18),'textHorizontalAlignment','jC',value,IPCC.Web.UI.HorizontalAlignment);},get_textVerticalAlignment:function(){this.fs(32,'textVerticalAlignment');return this.yh;},set_textVerticalAlignment:function(value){this.uc(32,'textVerticalAlignment','yh',value,IPCC.Web.UI.VerticalAlignment);},get_textColor:function(){this.fs(6176+65536+(1<<18),'textColor');return this.qy;},set_textColor:function(value){this.Gq(6176+65536+(1<<18),'textColor','qy',value);},get_textOpacity:function(){this.fs(32,'textOpacity');return this.yF;},set_textOpacity:function(value){this.ZZ(32,'textOpacity','yF',value,0,255);},get_textOrientation:function(){this.fs(32,'textOrientation');return this.xv;},set_textOrientation:function(value){this.uc(32,'textOrientation','xv',value,IPCC.Web.UI.Orientation);},get_type:function(){return this.ik();},get_visible:function(){return this.dM;},set_visible:function(value){this.mV((1<<17)+65536+32768+16384+8192+4096+2048+1024+512+256+128+64+63,'visible','dM',value);},get_markID:function(){return this.jP();},get_pathString:function(){return this.vB;},set_pathString:function(value){var vB=this.get_pathString();if(vB!==value){this.akn=true;}this.DQ(1088,'pathString','vB',value);},get_pathWidth:function(){return this.TC;},set_pathWidth:function(value){this.xP(1088,'pathWidth','TC',value);},get_pathHeight:function(){return this.Tz;},set_pathHeight:function(value){this.xP(1088,'pathHeight','Tz',value);},get_startIndex:function(){this.fs((1<<17)+(1<<14)+8192+512,'startIndex');return this.ad;},set_startIndex:function(value){this.xP((1<<17)+(1<<14)+8192+512,'startIndex','ad',value);},get_textLength:function(){this.fs((1<<17)+(1<<14)+8192+512,'textLength');return this.db;},set_textLength:function(value){this.xP((1<<17)+(1<<14)+8192+512,'textLength','db',value);},add_propertyChanged:function(handler){this.kf(handler);},remove_propertyChanged:function(handler){this.mo(handler);},add_markTextSelectionChanged:function(handler){this.IY(handler);},remove_markTextSelectionChanged:function(handler){this.FW(handler);},move:function(deltaX,deltaY){IPCC.bO.gG(deltaX,'deltaX');IPCC.bO.gG(deltaY,'deltaY');this.FP(deltaX,deltaY);},moveBackward:function(){if(this.eh()){var index=this.eh().ov(this);var dE=this.eh().ajo();if(index>dE){this.eh().reorderMark(this,index-1);}}else{throw new IPCC.Web.UI.ImGearInvalidOperationException('A Mark cannot be reordered unless it is associated with an ArtPage.');}},moveForward:function(){if(this.eh()){var index=this.eh().ov(this);if(index<this.eh().Uv()-1){this.eh().reorderMark(this,index+1);}}else{throw new IPCC.Web.UI.ImGearInvalidOperationException('A Mark cannot be reordered unless it is associated with an ArtPage.');}},moveToBack:function(){if(this.eh()){var dE=0;dE=this.eh().ajo();this.eh().reorderMark(this,dE);}else{throw new IPCC.Web.UI.ImGearInvalidOperationException('A Mark cannot be reordered unless it is associated with an ArtPage.');}},moveToFront:function(){if(this.eh()){this.eh().reorderMark(this,this.eh().Uv()-1);}else{throw new IPCC.Web.UI.ImGearInvalidOperationException('A Mark cannot be reordered unless it is associated with an ArtPage.');}},removeFromPage:function(){if(this.eh()){this.eh().removeMark(this);}},selectText:function(textRanges){this.Xu(textRanges);},aCw:function(){var fi={};var J=this;var bo,Zl,bL,H,h;function dP(dg,Mu){fi[Mu]=J[dg];};var jJ=false;var jo=false;var vP=false;switch(this.get_type()){case IPCC.Web.UI.MarkType.Line:jJ=true;vP=true;fi.__type='LineMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.Polyline:jJ=true;vP=true;fi.__type='PolyLineMark:#IPCC.Web';dP('sf','ic');break;case IPCC.Web.UI.MarkType.Rectangle:jo=true;fi.__type='RectangleMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.RectangleRedaction:jo=true;fi.__type='RectangleRedactionMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.Ellipse:jo=true;fi.__type='EllipseMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.Polygon:vP=true;fi.__type='PolygonMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.Text:jo=true;fi.__type='TextMark:#IPCC.Web';dP('BI','clc');dP('yY','clid');dP('pF','cls');dP('Bz','clw');dP('Bw','ct');dP('wC','cv');dP('ew','fn');dP('cR','fs');dP('bZ','fst');dP('ie','ls');dP('aD','te');dP('jC','tha');dP('yh','tva');dP('qy','tc');dP('yF','to');dP('xv','tor');bL=this.mY;if(bL.x!==0||bL.y!==0){fi.cp={x:bL.x,y:bL.y};}break;case IPCC.Web.UI.MarkType.Stamp:jo=true;fi.__type='StampMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.Highlight:case IPCC.Web.UI.MarkType.HighlightText:jo=true;fi.__type='HighlightText:#IPCC.Web';break;}if(jJ){dP('Iq','eha');dP('Hm','ehl');dP('lO','eht');dP('AC','hfc');dP('Jd','sha');dP('Gv','shl');dP('Fb','sht');}else{dP('cE','fc');dP('Kk','fv');dP('hS','lv');}if(jo){H=this.get_rectangle();fi.r={x:H.x,y:H.y,width:H.width,height:H.height};}fi.t=this.get_type();dP('lz','lc');dP('ie','ls');dP('es','lw');dP('cZ','o');dP('dM','v');if(vP){bo=this.qc();Zl=[];for(h=0;h<bo.get_length();h++){bL=bo.getPoint(h);Zl.push({x:bL.x,y:bL.y});}fi.p=Zl;}return fi;},atV:function(fi){var J=this;var bo,h;function dP(dg,Mu){if(fi.hasOwnProperty(Mu)){J[dg]=fi[Mu];}};var jJ=false;var jo=false;var vP=false;switch(this.get_type()){case IPCC.Web.UI.MarkType.Line:jJ=true;if(fi.p&&fi.p.length===2){bo=this.qc();bo.setPoint(0,new IPCC.Web.UI.Point(fi.p[0].x,fi.p[0].y));bo.setPoint(1,new IPCC.Web.UI.Point(fi.p[1].x,fi.p[1].y));}break;case IPCC.Web.UI.MarkType.Polyline:jJ=true;vP=true;dP('sf','ic');break;case IPCC.Web.UI.MarkType.Rectangle:jo=true;break;case IPCC.Web.UI.MarkType.RectangleRedaction:jo=true;break;case IPCC.Web.UI.MarkType.Ellipse:jo=true;break;case IPCC.Web.UI.MarkType.Polygon:vP=true;break;case IPCC.Web.UI.MarkType.Text:jo=true;dP('BI','clc');dP('yY','clid');dP('pF','cls');dP('Bz','clw');dP('Bw','ct');dP('wC','cv');dP('ew','fn');dP('cR','fs');dP('bZ','fst');dP('ie','ls');dP('aD','te');dP('jC','tha');dP('yh','tva');dP('qy','tc');dP('yF','to');dP('xv','tor');if(fi.cp){this.mY=new IPCC.Web.UI.Point(fi.cp.x,fi.cp.y);}break;case IPCC.Web.UI.MarkType.Stamp:jo=true;break;case IPCC.web.UI.MarkType.Highlight:case IPCC.web.UI.MarkType.HighlightText:case IPCC.web.UI.MarkType.Strikethrough:jo=true;break;}if(jJ){dP('Iq','eha');dP('Hm','ehl');dP('lO','eht');dP('AC','hfc');dP('Jd','sha');dP('Gv','shl');dP('Fb','sht');}else{dP('cE','fc');dP('Kk','fv');dP('hS','lv');}if(jo){if(fi.r){this.set_rectangle(new IPCC.Web.UI.Rectangle(fi.r.x,fi.r.y,fi.r.width,fi.r.height));}}fi.t=this.get_type();dP('lz','lc');dP('ie','ls');dP('es','lw');dP('cZ','o');dP('dM','v');if(fi.p&&vP){bo=this.qc();for(h=0;h<fi.p.length;h++){bo.addPoint(new IPCC.Web.UI.Point(fi.p[h].x,fi.p[h].y));}}return fi;}};LJ.registerClass=cs;LJ.registerClass('IPCC.Web.UI.Mark');module.exports=LJ;},{"../../IPCC.Util":28}],104:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var Lv=function(){var bE=[];var aN=new IPCC.Web.UI.ir();this.MY=function(T){if(this.FN(T)=== -1){bE.push(T);var V=new IPCC.Web.UI.MarkEventArgs();V.mark=T;this.ay('markAdded',V);}};this.aug=function(xZ){var V=new IPCC.Web.UI.MarkEventArgs();V.length=xZ.get_length();var J=this;function kr(T){if(J.FN(T)=== -1){bE.push(T);}};xZ.forEach(kr,{});if(V.length>0){this.ay('markAdded',V);}};this.jL=function(iT,du){var Fm=[].concat(bE);var h;for(h=0;h<Fm.length;h++){iT.call(du,Fm[h],h,this);}};this.eF=function(){return bE.length;};this.wV=function(T){var h=this.FN(T);if(h> -1){bE.splice(h,1);var V=new IPCC.Web.UI.MarkEventArgs();V.mark=T;this.ay('markRemoved',V);}};this.FN=function(T){var h;for(h=0;h<bE.length;h++){if(bE[h]===T){return h;}}return-1;};this.Al=function(R){aN.addHandler('markAdded',R);};this.zh=function(R){aN.removeHandler('markAdded',R);};this.zd=function(R){aN.addHandler('markRemoved',R);};this.AK=function(R){aN.removeHandler('markRemoved',R);};this.ay=function(cY,V){var R=aN.getHandler(cY);if(R!==null){R(this,V);}};return this;};Lv.prototype={toString:function(){return 'MarkCollection with '+this.get_length()+' marks';},addMark:function(mark){this.MY(mark);},addMarks:function(markCollection){this.aug(markCollection);},forEach:function(method,context){this.jL(method,context);},get_length:function(){return this.eF();},contains:function(mark){return this.FN(mark)> -1;},removeMark:function(mark){this.wV(mark);},removeAllMarks:function(){this.jL(function(T,af,xZ){xZ.wV(T);});},add_markAdded:function(handler){this.Al(handler);},remove_markAdded:function(handler){this.zh(handler);},add_markRemoved:function(handler){this.zd(handler);},remove_markRemoved:function(handler){this.AK(handler);}};Lv.registerClass=cs;Lv.registerClass('IPCC.Web.UI.MarkCollection');module.exports=Lv;},{"../../IPCC.Util":28}],105:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var KZ=function(){return this;};KZ.registerClass=cs;KZ.prototype={};KZ.registerClass('IPCC.Web.UI.MarkEventArgs');module.exports=KZ;},{"../../IPCC.Util":28}],106:[function(require,module,exports){var ec=require('../../IPCC.Util').regEnum;var EQ=function(){};EQ.registerEnum=ec;EQ.prototype={HideSideHandlesWhenClose:0,HideCornerHandlesWhenClose:1};EQ.registerEnum('IPCC.Web.UI.MarkHandleMode',false);module.exports=EQ;},{"../../IPCC.Util":28}],107:[function(require,module,exports){var ec=require('../../IPCC.Util').regEnum;var LQ=function(){};LQ.registerEnum=ec;LQ.prototype={Full:0,SelectionDisabled:1};LQ.registerEnum('IPCC.Web.UI.MarkInteractionMode',false);module.exports=LQ;},{"../../IPCC.Util":28}],108:[function(require,module,exports){var ec=require('../../IPCC.Util').regEnum;var MF=function(){};MF.registerEnum=ec;MF.prototype={Line:3,Polyline:502,Rectangle:600,Ellipse:601,Polygon:604,Text:605,Highlight:606,Stamp:607,HighlightText:608,SignaturePath:609,Freehand:610,SignatureText:611,SignatureImage:612,RectangleRedaction:613,TextSelectionRedaction:614,ImageStampAnnotation:615,ImageStampRedaction:616,TextHyperlinkAnnotation:617,DocumentHyperlink:618,TextLine:619,Strikethrough:620,TextAreaSignature:621};MF.registerEnum('IPCC.Web.UI.MarkType',false);module.exports=MF;},{"../../IPCC.Util":28}],109:[function(require,module,exports){var ec=require('./../../IPCC.Util').regEnum;var Uh=function(){if(arguments.length!==0){throw new IPCC.Web.UI.ImGearParameterCountException();}throw new IPCC.Web.UI.ImGearNotImplementedException();};Uh.registerEnum=ec;Uh.prototype={leftButton:0,middleButton:1,rightButton:2};Uh.registerEnum("IPCC.Web.UI.MouseButton");},{"./../../IPCC.Util":28}],110:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var OR=function(){var aeA=false;this.aAn=function(){aeA=true;};this.afq=function(){return aeA;};return this;};OR.prototype={preventDefault:function(){this.aAn();}};OR.registerClass=cs;OR.registerClass('IPCC.Web.UI.MouseEventArgs');module.exports=OR;},{"../../IPCC.Util":28}],111:[function(require,module,exports){var ec=require('../../IPCC.Util').regEnum;var PJ=function(){};PJ.registerEnum=ec;PJ.prototype={None:0,Magnifier:1,RectangleZoom:2,HandPan:3,Select:4,CreateRectangleMark:5,CreateEllipseMark:6,CreateLineMark:7,CreatePolylineMark:8,CreateFreehandMark:9,CreatePolygonMark:10,CreateTextMark:11,EditMarks:12,RunMarks:13,SelectText:14,CreateStampMark:15,CreateHighlightTextMark:16,CreateTextSelectionRedaction:17,CreateRectangleRedactionMark:18,CreateImageStampAnnotationMark:19,CreateImageStampRedactionMark:20,CreateTextHyperlinkMark:21,CreateTextInputSignatureMark:22,CreateStrikethroughMark:23,CreateTextAreaSignatureMark:24};PJ.registerEnum('IPCC.Web.UI.MouseTool',false);module.exports=PJ;},{"../../IPCC.Util":28}],112:[function(require,module,exports){var ec=require('../../IPCC.Util').regEnum;var Qn=function(){};Qn.registerEnum=ec;Qn.prototype={TopLeft:1,TopRight:2,BottomRight:3,BottomLeft:4,LeftTop:5,RightTop:6,RightBottom:7,LeftBottom:8};Qn.registerEnum('IPCC.Web.UI.Orientation',false);module.exports=Qn;},{"../../IPCC.Util":28}],113:[function(require,module,exports){var afe=function(element,pU,RK){var gS=this;var aH;var K;var xn=0;var Jx='';var Lh=false;var aN=new IPCC.Web.UI.ir();var fI=null;var qe=IPCC.qe;var ajS=IPCC.qe;var IG=0.0;var Jj=false;var PR=0;var acZ= -1;var adu= -1;var adO= -1;function lQ(Gd){if(!K){return false;}return K.lQ(Gd);};this.ag=function(iZ,iO){if(lQ(IPCC.Web.UI.DebugErrorLevel.Production)){K.ag(iZ,iO);}};this.bn=function(iZ,kR,qM){if(!lQ(IPCC.Web.UI.DebugErrorLevel.Development)){return;}var cI=iZ+'(';var h;for(h=0;h<kR.length;h++){if(h>0){cI+=', ';}cI+=IPCC.jx.qU(kR[h],(qM?qM:0));}cI+=')';this.va(cI,IPCC.Web.UI.DebugErrorLevel.Development);};this.DX=function(iZ,kR,lX,qM){if(!lQ(IPCC.Web.UI.DebugErrorLevel.Development)){return;}var cI=iZ+'(';var h;for(h=0;h<kR.length;h++){if(h>0){cI+=', ';}cI+=IPCC.jx.qU(kR[h],(qM?qM:0));}cI+=') = ';cI+=IPCC.jx.qU(lX,1);this.va(cI,IPCC.Web.UI.DebugErrorLevel.Development);};this.dn=function(iZ,kR,lX){if(!lQ(IPCC.Web.UI.DebugErrorLevel.Detailed)){return;}var cI=iZ+'(';var h;for(h=0;h<kR.length;h++){if(h>0){cI+=', ';}cI+=IPCC.jx.qU(kR[h],0);}cI+=') = ';cI+=IPCC.jx.qU(lX,1);this.va(cI,IPCC.Web.UI.DebugErrorLevel.Detailed);};this.va=function(kS,bM){if(K){K.mn(kS,IPCC.Web.UI.DebugItemCause.FunctionCall,bM);}};this.mn=function(kS){if(K){K.mn(kS,IPCC.Web.UI.DebugItemCause.Custom,IPCC.Web.UI.DebugErrorLevel.Production);}};this.Jw=function(){return K.get_debug();};this.XL=function(L){K.set_debug(L);};this.xf=function(){return K.xf();};this.GV=function(L){IPCC.bO.le(L,'value',IPCC.Web.UI.DebugErrorLevel);K.GV(L);};this.aFp=function(L){Jj=L;};this.aHI=function(){return Jj;};var oe=function(){if(K.dj()===undefined){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot perform this operation unless an image is open (and it has completed the opening process).');}};function dO(cY,R){aN.addHandler(cY,R);};function cB(cY,R){aN.removeHandler(cY,R);};this.JQ=function(iV,co){K.aAO(iV,co);};this.aAD=function(co,T){K.vV(T);K.dN();};this.Ue=function(R){dO('pageOpening',R);};this.XE=function(R){cB('pageOpening',R);};this.ST=function(R){dO('pageOpened',R);};this.XH=function(R){cB('pageOpened',R);};this.auJ=function(R){dO('pageClosed',R);};this.aBc=function(R){cB('pageClosed',R);};this.Gb=function(R){dO('pageOpenFailed',R);};this.HD=function(R){cB('pageOpenFailed',R);};this.SZ=function(R){dO('pageDisplayed',R);};this.Wp=function(R){cB('pageDisplayed',R);};this.PA=function(R){dO('mouseDown',R);};this.Wh=function(R){cB('mouseDown',R);};this.PO=function(R){dO('mouseMove',R);};this.Wm=function(R){cB('mouseMove',R);};this.PH=function(R){dO('mouseUp',R);};this.Xi=function(R){cB('mouseUp',R);};this.aDa=function(R){dO('contextMenu',R);};this.aBF=function(R){cB('contextMenu',R);};this.Al=function(R){dO('markAdded',R);};this.zh=function(R){cB('markAdded',R);};this.SM=function(R){dO('markCreating',R);};this.XA=function(R){cB('markCreating',R);};this.HN=function(R){dO('markChanged',R);};this.FA=function(R){cB('markChanged',R);};this.zd=function(R){dO('markRemoved',R);};this.AK=function(R){cB('markRemoved',R);};this.FH=function(R){dO('markReordered',R);};this.Fy=function(R){cB('markReordered',R);};this.SX=function(R){dO('marksLoaded',R);};this.Wi=function(R){cB('marksLoaded',R);};this.FX=function(R){dO('markSelectionChanged',R);};this.GC=function(R){cB('markSelectionChanged',R);};this.AO=function(R){dO('textPageReady',R);};this.EC=function(R){cB('textPageReady',R);};this.Sq=function(R){dO('selectTextMouseToolCompleted',R);};this.WO=function(R){cB('selectTextMouseToolCompleted',R);};this.TK=function(R){dO('exceptionThrown',R);};this.SF=function(R){dO('scaleChanged',R);};this.Wj=function(R){cB('scaleChanged',R);};this.Un=function(R){cB('exceptionThrown',R);};this.Ac=function(R){dO('textExtractionFailed',R);};this.Dr=function(R){cB('textExtractionFailed',R);};this.kf=function(R){dO('propertyChanged',R);};this.mo=function(R){cB('propertyChanged',R);};var ay=function(cY,V){try{var R;R=aN.getHandler(cY);if(R){R(gS,V);}}catch(e){gS.ag(cY+'Event',e);}};var nX=function(cY){function zf(bu,V){ay(cY,V);};K['add_'+cY](zf);};var HQ=function(cY){function zf(bu,V){if(Lh&&K.Pq()){Cl();}ay(cY,V);};K['add_'+cY](zf);};function Cl(){var eQ,lH,Vp;if(Jx!==''){Vp=document.getElementById(Jx);if(Vp){eQ=gS.OG();lH='{encodedDocumentIdentifier:"'+eQ.encodedDocumentIdentifier;lH+='",pageNumber:'+eQ.pageNumber.toString();lH+=',viewFitType:'+eQ.viewFitType.toString();if(eQ.viewRectangle&&eQ.viewFitType===IPCC.Web.UI.FitType.Rectangle){lH+=',viewRectangle:{x:'+eQ.viewRectangle.x.toFixed(5);lH+=',y:'+eQ.viewRectangle.y.toFixed(5);lH+=',width:'+eQ.viewRectangle.width.toFixed(5);lH+=',height:'+eQ.viewRectangle.height.toFixed(5);lH+='}';}if(eQ.viewRotationDegreesClockwise){lH+=',viewRotationDegreesClockwise:'+eQ.viewRotationDegreesClockwise.toString();}if(eQ.viewMirror){lH+=',viewMirror:'+eQ.viewMirror.toString();}if(eQ.viewZoomFactor){lH+=',viewZoomFactor:'+eQ.viewZoomFactor.toString();}if(Lh){var am=K.eh();if(am){lH+=',artPageJson:"'+IPCC.gI.sV(am.saveToJson())+'"';}}lH+='}';Vp.value=lH;}}};var azW=function(){function zf(bu,V){var Xb=true;switch(V.get_propertyName()){case 'documentIdentifier':case 'pageNumber':case 'artPage':case 'includeArtInPostBack':case 'displayedPageRectangle':Cl();break;case 'magnifierWindowPosition':case 'magnifierIsVisible':case 'cursor':case 'markCursor':case 'inProgressMark':case 'II':case 'yd':Xb=false;break;case 'IM':if(K.Pq()){Cl();}Xb=false;break;}if(Xb){ay('propertyChanged',V);}};K.kf(zf);};this.WG=function(aT){IPCC.bO.le(aT,'type',IPCC.Web.UI.FitType);if(aT===IPCC.Web.UI.FitType.Rectangle){throw new IPCC.Web.UI.ImGearArgumentException('type','The value must be a member of the IPCC.Web.UI.FitType enumeration (other than Rectangle).');}oe();fI={aCk:true,viewFitType:aT};abL();};this.fH=function(){return K.dj()!==undefined;};this.ki=function(){oe();return K.dj().width;};this.jE=function(){oe();return K.dj().height;};this.atE=function(){oe();return K.dj().hf;};this.arK=function(){return K.bC().fB().aei();};this.aun=function(){oe();return K.dj().gn;};this.JZ=function(){if(!K|| !(K.dj())){return '';}return K.dj().get_identifier();};this.PW=function(){if(!K|| !(K.dj())){return '';}return K.dj().get_encodedIdentifier();};this.nT=function(){if(!K|| !(K.dj())){return-1;}return K.dj().ae;};this.ayh=function(){if(!K|| !(K.dj())){return 0;}return K.dj().fG;};this.aiG=function(){var av=K.dj();if(!av){return new IPCC.Web.UI.Rectangle(0,0,0,0);}var bd=K.ee();bd.x=bd.y=0;var qw=K.bC().fB();qw.ye();var dQ=qw.AJ(bd);if(dQ.x<0){dQ.width+=dQ.x;dQ.x=0;}if(dQ.y<0){dQ.height+=dQ.y;dQ.y=0;}if(dQ.x+dQ.width>av.width){dQ.width=av.width-dQ.x;}if(dQ.y+dQ.height>av.height){dQ.height=av.height-dQ.y;}return dQ;};function Nn(){var cw={},de=K.bC().fB();cw.documentIdentifier=gS.JZ();cw.encodedDocumentIdentifier=gS.PW();cw.pageNumber=gS.nT();cw.artPage=gS.eh();cw.referenceDocumentIdentifier=gS.JZ();cw.referencePageNumber=gS.nT();cw.viewFitType=IPCC.Web.UI.FitType.Rectangle;cw.viewRectangle=gS.aiG();cw.imGearPage=gS.mv();cw.transientArtPage=gS.mp();var ea=de.aei();if(ea!==0){cw.viewRotationDegreesClockwise=ea;}if(de.ayS()){cw.viewMirror=true;}return cw;};this.ahJ=function(ad,cG){K.ahJ(ad,cG);};this.OG=function(){var cw;if(aH){cw=new IPCC.Web.UI.PageViewState();cw.documentIdentifier=aH.documentIdentifier;cw.encodedDocumentIdentifier=aH.encodedDocumentIdentifier;cw.pageNumber=aH.pageNumber;cw.artPage=aH.artPage;cw.artPageJson=aH.artPageJson;cw.referenceDocumentIdentifier=aH.documentIdentifier;cw.referencePageNumber=aH.pageNumber;cw.viewFitType=aH.viewFitType;cw.viewRectangle=aH.viewRectangle;cw.viewRotationDegreesClockwise=aH.viewRotationDegreesClockwise;cw.viewMirror=aH.viewMirror;cw.viewZoomFactor=aH.viewZoomFactor;cw.transientArtPage=aH.transientArtPage;}else{cw=Nn();}return cw;};this.KJ=function(bK){var bd=K.ee();this.adN(bK,{x:bd.width/2,y:bd.height/2});};this.adN=function(bK,bY){IPCC.bO.kb(bK,'factor',1.01,20);IPCC.bO.bL(bY,'point');oe();var ar=K.bC();var aL=ar.fB();var ai=K.dj();var lu=aL.pM();if(lu*bK>ai.rq){bK=ai.rq/lu;}aL.vk(bK,bK,bY.x,bY.y);aL.la(ai,K.ee());fI=null;ar.io(aL);};this.aas=function(bK){var bd=K.ee();this.adP(bK,{x:bd.width/2,y:bd.height/2});};this.adP=function(bK,bY){IPCC.bO.kb(bK,'factor',1.01,20);IPCC.bO.bL(bY,'point');oe();var ar=K.bC();var aL=ar.fB();var ai=K.dj();var lu=aL.pM();if(lu/bK<ai.rA){bK=lu/ai.rA;}aL.vk(1/bK,1/bK,bY.x,bY.y);aL.la(ai,K.ee());fI=null;ar.io(aL);};this.lf=function(bK){var bd=K.ee();this.asK(bK,{x:bd.width/2,y:bd.height/2});};this.Fk=function(bK){var ar=K.bC();fI=null;ar.Fk(bK);};this.Cb=function(bK){var ar=K.bC();fI=null;ar.Cb(bK);};this.Ga=function(bK){var ar=K.bC();fI=null;ar.Ga(bK);};this.asK=function(bK,bY){IPCC.bO.bL(bY,'point');oe();var ar=K.bC();var aL=ar.fB();var ai=K.dj();var lu=aL.pM();if(bK>ai.rq){bK=ai.rq;}else if(bK<ai.rA){bK=ai.rA;}aL.vk(bK/lu,bK/lu,bY.x,bY.y);aL.la(ai,K.ee());fI=null;ar.io(aL);};this.vQ=function(tg){IPCC.bO.TI(tg,'degreesClockwise',[90,180,270,-90,-180,-270]);oe();var ar=K.bC();var aL=ar.fB();var bd=K.ee();aL.adc(tg,bd.width/2,bd.height/2);aL.la(K.dj(),K.ee());fI=null;ar.io(aL);};this.akb=function(){oe();var ar=K.bC();var aL=ar.fB();var bd=K.ee();aL.vk(-1,1,bd.width/2,bd.height/2);aL.la(K.dj(),K.ee());fI=null;ar.io(aL);};this.amR=function(dQ){IPCC.bO.H(dQ,'pageRectangle');oe();var ar=K.bC();var aL=ar.fB();var bd=K.ee();var ai=K.dj();aL.Nb(ai,bd,dQ);aL.la(ai,K.ee());fI=null;ar.io(aL);};this.alF=function(cO){IPCC.bO.bL(cO,'imagePoint');oe();var ar=K.bC();var aL=ar.fB();var bd=K.ee();aL.ahO(bd,cO);aL.la(K.dj(),K.ee());fI=null;ar.io(aL);};this.agD=function(){oe();fI=null;var ar=K.bC();var aL=ar.fB();var bd=K.ee();aL.vk(1,-1,bd.width/2,bd.height/2);aL.la(K.dj(),K.ee());fI=null;ar.io(aL);};this.dN=function(){K.dN();};this.GW=function(){K.GW();};var abL=function(){var ai=K.dj();var bd=K.ee();var aL;if(!fI){aL=K.bC().fB();aL.la(ai,bd);K.bC().io(aL);return;}if(fI.aCk){aL=K.bC().fB();}else{aL=new IPCC.fN();aL.aoN(ai,bd);if(fI.viewRotationDegreesClockwise){aL.rotate(fI.viewRotationDegreesClockwise);}if(fI.viewMirror){aL.aqO(bd);}}if(fI.viewZoomFactor){if(fI.viewZoomFactor>ai.rq){fI.viewZoomFactor=ai.rq;}else if(fI.viewZoomFactor<ai.rA){fI.viewZoomFactor=ai.rA;}fI.viewFitType=IPCC.Web.UI.FitType.ActualSize;aL.Wg(fI.viewFitType,ai,bd);aL.scale(fI.viewZoomFactor,fI.viewZoomFactor);}else{if(!fI.viewFitType&&fI.viewFitType!==0){fI.viewFitType=IPCC.Web.UI.FitType.FullImage;}if(fI.viewFitType===IPCC.Web.UI.FitType.Rectangle&& !fI.viewRectangle){fI.viewFitType=IPCC.Web.UI.FitType.FullImage;}if(fI.viewFitType!==IPCC.Web.UI.FitType.Rectangle){aL.Wg(fI.viewFitType,ai,bd);}else{aL.Nb(ai,bd,fI.viewRectangle);}}aL.la(ai,bd);K.bC().io(aL);};var ana=function(Ix){fI=Ix;PR=0;abL();};this.Nl=function(ah){xn++;var Ws=xn;var aua={};IG=0.0;K.KP=0.0;IPCC.gI.ale(ah);if(lQ(IPCC.Web.UI.DebugErrorLevel.Development)){var cI='opening documentIdentifier "'+ah.documentIdentifier+'", pageNumber '+ah.pageNumber;this.va(cI,IPCC.Web.UI.DebugErrorLevel.Development);}aH=new IPCC.Web.UI.PageViewState();var h;for(h in ah){if(ah.hasOwnProperty(h)){aH[h]=ah[h];}}if(ah.documentIdentifier===''){this.QR();return;}if(IPCC.Web.UI.ArtPage){if(aH){if(!aH.artPage){var am=new IPCC.Web.UI.ArtPage();if(aH.artPageJson){am.loadFromJson(aH.artPageJson);}aH.artPage=am;}if(!aH.documentArtPage){var fu=new IPCC.Web.UI.ArtPage();aH.documentArtPage=fu;}if(this.kH()===true){if(!aH.imGearPage){var gA=new IPCC.Web.UI.ImGearDocument({documentIdentifier:ah.documentIdentifier,imageServicePath:this.tP()});aH.imGearPage=new IPCC.Web.UI.ImGearPage({pageNumber:ah.pageNumber,bi:gA});gA.get_pages().addPage(aH.imGearPage);}if(!aH.transientArtPage){aH.transientArtPage=new IPCC.Web.UI.ArtPage();}}}}if(aH.viewRotationDegreesClockwise){IPCC.bO.TI(aH.viewRotationDegreesClockwise,'parameters.viewRotationDegreesClockwise',[0,90,180,270,-90,-180,-270]);}if(aH.viewFitType){IPCC.bO.le(aH.viewFitType,'parameters.viewFitType',IPCC.Web.UI.FitType);}if(aH.viewZoomFactor){IPCC.bO.kb(aH.viewZoomFactor,'parameters.viewZoomFactor',0,20);}ay('pageOpening',ah);var av=new IPCC.gI(ah.encodedDocumentIdentifier,ah.pageNumber,0,0,0,0);var oi=function(){if(Ws!==xn){return;}var tQ=null;if(K.dj()){tQ=Nn();}K.bC().pn();K.AR(av);ana(aH);if(ah.artServiceOption===IPCC.Web.UI.ImGearArtDataServices.ArtDataService){if(aH){if(aH.artPage){K.nc(aH.artPage);K.eh().loadFromJson(av.art);}}}else{if(aH){if(aH.artPage){K.nc(aH.artPage);}if(aH.documentArtPage){K.Ip(aH.documentArtPage);}if(K.kH()===true){if(aH.imGearPage){var UU=aH.imGearPage.get_pageWidth();var QH=aH.imGearPage.get_pageHeight();aH.imGearPage.oR(gS.iP());if(!UU){aH.imGearPage.Nk(gS.get_pageWidth());}if(!QH){aH.imGearPage.Or(gS.get_pageHeight());}K.Cz(aH.imGearPage);if(typeof(K.mv().Ay==='function')){if(!K.mv().cd().wJ()){aH.imGearPage.wR(gS.jS());setTimeout(K.mv().Ay,1000);}}}if(aH.transientArtPage){K.DC(aH.transientArtPage);}}}}aH=null;if(tQ){ay('pageClosed',tQ);}Cl();ay('pageOpened',ah);};if(ah.artServiceOption===IPCC.Web.UI.ImGearArtDataServices.ArtDataService){if(aH){if(!aH.artPageJson){av.aGW(K.tP(),K,oi,aua);}else{av.SQ(K.tP(),K,oi);}}}else{av.SQ(K.tP(),K,oi);}};this.QR=function(){xn++;if(!(K.dj())){return;}var tQ=Nn();K.AR(undefined);K.nc(undefined);K.Cz(undefined);K.DC(undefined);this.dN();Cl();tQ=undefined;aH=undefined;fI=undefined;var cu;cu=gS.nk();if(cu.igElements){if(cu.igElements.qF){cu.igElements.qF.Az=null;cu.igElements.qF.wX=null;cu.igElements.qF.Km=null;cu.igElements.qF=null;}cu.igElements.CN=null;cu.igElements.fM=null;cu.igElements.gR=null;cu.igElements.dH=null;cu.igElements.nd=null;cu.igElements.oa=null;cu.igElements.md=null;cu.igElements.qn=null;cu.igElements.KE=null;cu.igElements.ZB=null;cu.igElements.qu=null;}gS=null;cu.aQ=null;ay('pageClosed',tQ);};this.aDG=function(ah){xn++;var Ws=xn;IG=0.0;K.KP=0.0;IPCC.gI.ale(ah);if(lQ(IPCC.Web.UI.DebugErrorLevel.Development)){var cI='opening documentIdentifier "'+ah.documentIdentifier+'", pageNumber '+ah.pageNumber;this.va(cI,IPCC.Web.UI.DebugErrorLevel.Development);}aH=new IPCC.Web.UI.PageViewState();var h;for(h in ah){if(ah.hasOwnProperty(h)){aH[h]=ah[h];}}if(ah.documentIdentifier===''){this.QR();return;}if(IPCC.Web.UI.ArtPage){if(aH){if(!aH.artPage){var am=new IPCC.Web.UI.ArtPage();aH.artPage=am;}if(!aH.documentArtPage){var fu=new IPCC.Web.UI.ArtPage();aH.documentArtPage=fu;}if(this.kH()===true){if(!aH.imGearPage){var gA=new IPCC.Web.UI.ImGearDocument({documentIdentifier:ah.documentIdentifier,imageServicePath:this.tP()});aH.imGearPage=new IPCC.Web.UI.ImGearPage({pageNumber:ah.pageNumber,bi:gA});gA.get_pages().addPage(aH.imGearPage);}if(!aH.transientArtPage){aH.transientArtPage=new IPCC.Web.UI.ArtPage();}}}}if(aH.viewRotationDegreesClockwise){IPCC.bO.TI(aH.viewRotationDegreesClockwise,'parameters.viewRotationDegreesClockwise',[0,90,180,270,-90,-180,-270]);}if(aH.viewFitType){IPCC.bO.le(aH.viewFitType,'parameters.viewFitType',IPCC.Web.UI.FitType);}if(aH.viewZoomFactor){IPCC.bO.kb(aH.viewZoomFactor,'parameters.viewZoomFactor',0,20);}ay('pageOpening',ah);var av=new IPCC.gI(ah.encodedDocumentIdentifier,ah.pageNumber,0,0,0,0);var oi=function(){if(Ws!==xn){return;}var tQ=null;if(K.dj()){tQ=Nn();}K.bC().pn();K.AR(av);ana(aH);if(aH){if(aH.artPage){K.nc(aH.artPage);}if(aH.documentArtPage){K.Ip(aH.documentArtPage);}if(K.kH()===true){if(aH.imGearPage){var UU=aH.imGearPage.get_pageWidth();var QH=aH.imGearPage.get_pageHeight();aH.imGearPage.oR(gS.iP());if(!UU){aH.imGearPage.Nk(gS.get_pageWidth());}if(!QH){aH.imGearPage.Or(gS.get_pageHeight());}K.Cz(aH.imGearPage);if(typeof(K.mv().Ay==='function')){if(!K.mv().cd().wJ()){aH.imGearPage.wR(gS.jS());setTimeout(K.mv().Ay,1000);}}}if(aH.transientArtPage){K.DC(aH.transientArtPage);}}}aH=null;if(tQ){ay('pageClosed',tQ);}Cl();ay('pageOpened',ah);};av.aCY(K.tP(),K,oi);};this.aIv=function(){xn++;if(!(K.dj())){return;}var av=K.dj();K.AR(undefined);this.dN();K.AR(av);};this.XJ=function(CJ){K.XJ(CJ);};this.nc=function(L){K.nc(L);};this.eh=function(){return K.eh();};this.Ip=function(L){K.Ip(L);};this.MU=function(){return K.MU();};this.mp=function(){return K.mp();};this.DC=function(L){K.DC(L);};this.Cj=function(){return K.Cj();};this.apI=function(L){K.apI(L);};this.Gx=function(L){K.Gx(L);};this.uY=function(){return K.uY();};this.anb=function(L){ajS=this.aoE(L);};this.iv=function(){return ajS;};this.adM=function(L){K.adM(L);};this.UE=function(){return K.UE();};this.mr=function(){return K.mr();};this.qa=function(L){K.qa(L);};this.amY=function(L){K.amY(L);};this.Wt=function(){return K.Wt();};this.Zi=function(aEq){K.Zi(aEq);};this.WP=function(){return K.WP();};this.aoE=function(bk){var bf='',Oi='',Vj=function(bp){var sI=0,bf;for(bf in bp){if(bp.hasOwnProperty(bf)){sI+=1;}}return sI;};for(bf in qe){if(qe.hasOwnProperty(bf)){if(typeof bk[bf]==='undefined'){bk[bf]=qe[bf];}if(typeof bk[bf]==='object'){if(!Vj(bk[bf])){bk[bf]=qe[bf];}else if(Vj(bk[bf])!==Vj(qe[bf])){for(Oi in qe[bf]){if(typeof bk[bf][Oi]==='undefined'){bk[bf][Oi]=qe[bf][Oi];}}}}}}return bk;};this.aoc=function(anA){if(anA===false){IPCC.gB=false;K.fE([new IPCC.mj(),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}else{IPCC.gB=true;IPCC.aiq=this.iv();K.fE([new IPCC.mj(),new IPCC.dc(),new IPCC.fJ(),new IPCC.dK(),new IPCC.dF(false)]);}};this.pn=function(){var ar=K.bC();if(!ar.Ar()){return;}K.bC().pn();};this.aoY=function(dQ){IPCC.bO.H(dQ,'pageRectangle');var av=K.dj();if(av){K.bC().showSelection(dQ);}};this.Ca=function(cO){IPCC.bO.bL(cO,'imagePoint');if(K.dj()){K.bC().Ca(new IPCC.Web.UI.Point(cO.x,cO.y));}};this.xO=function(cO){IPCC.bO.bL(cO,'imagePoint');if(K.dj()){K.bC().xO(new IPCC.Web.UI.Point(cO.x,cO.y));}};this.wN=function(){if(K.dj()&&K.bC().Ar()){return K.bC().wN();}return new IPCC.Web.UI.Rectangle(0,0,0,0);};this.arx=function(){if(K.dj()&&K.bC().Ar()){var dQ=K.bC().wN();return K.bC().fB().AJ(dQ);}return new IPCC.Web.UI.Rectangle(0,0,0,0);};this.Ar=function(){return! !(K.dj()&&K.bC().Ar());};this.tP=function(){return K.tP();};this.UN=function(L){IPCC.bO.kZ(L,'value');K.UN(L);};this.axM=function(){return Jx;};this.aoa=function(L){IPCC.bO.kZ(L,'value');Jx=L;};this.ayV=function(){return Lh;};this.asw=function(L){Lh=L;};var tz='';this.vS=function(L){K.vS(L);tz=L;};this.nk=function(){return tz;};this.ayg=function(){return K.bC().get_magnifierMagnification();};this.ate=function(L){IPCC.bO.kb(L,'value',1.5,8);K.bC().set_magnifierMagnification(L);};this.ayi=function(){return K.bC().tn().width;};this.aso=function(L){IPCC.bO.kb(L,'value',25,500);var sI=K.bC().tn();sI.width=L;K.bC().set_magnifierWindowSize(sI);};this.axX=function(){return K.bC().tn().height;};this.asc=function(L){IPCC.bO.kb(L,'value',25,500);var sI=K.bC().tn();sI.height=L;K.bC().set_magnifierWindowSize(sI);};this.Pp=function(){return K.bC().Pp();};this.Vd=function(L){IPCC.bO.kb(L,'value',-500,500);K.bC().Vd(L);};this.OK=function(){return K.bC().OK();};this.Vz=function(L){IPCC.bO.kb(L,'value',-500,500);K.bC().Vz(L);};this.VE=function(){return K.bC().VE();};this.Um=function(L){IPCC.bO.kb(L,'value',0.1,0.5);K.bC().Um(L);};this.zV=function(){return K.bC().zV();};this.Kg=function(L){K.bC().Kg(L);};this.raisePropertyChanged=function(dg,xU){if(K){K.cg(dg,xU);}};var aV= -1;this.Vo=function(){return aV;};this.aGG=function(L){K.ra=L;};this.OM=function(L){K.set_areMarksEditable(L);};this.aHL=function(){return K.set_areMarksEditable();};this.Gf=function(L){IPCC.bO.le(L,'value',IPCC.Web.UI.MouseTool);if(aV!==L){aV=L;var je="None";switch(aV){case IPCC.Web.UI.MouseTool.None:K.fE([]);break;case IPCC.Web.UI.MouseTool.Magnifier:if(IPCC.gB===true){K.fE([new IPCC.oP(),new IPCC.dc(),new IPCC.fJ(false,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.oP(),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);je="Magnifier";}break;case IPCC.Web.UI.MouseTool.RectangleZoom:if(IPCC.gB===true){K.fE([new IPCC.mj(),new IPCC.dc(),new IPCC.fJ(false,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.mj(),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="RectangleZoom";break;case IPCC.Web.UI.MouseTool.HandPan:if(IPCC.gB===true){K.fE([new IPCC.oO(),new IPCC.dc(),new IPCC.fJ(false,this.iv()),new IPCC.dK(),new IPCC.dF(true)]);}else{K.fE([new IPCC.oO(),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(true)]);}je="HandPan";break;case IPCC.Web.UI.MouseTool.Select:if(IPCC.gB===true){K.fE([new IPCC.nA(),new IPCC.dc(),new IPCC.fJ(false,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.nA(),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="Select";break;case IPCC.Web.UI.MouseTool.CreateRectangleMark:if(IPCC.gB===true){K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.Rectangle),new IPCC.dc(),new IPCC.fJ(true,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.Rectangle),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="CreateRectangleMark";break;case IPCC.Web.UI.MouseTool.CreateRectangleRedactionMark:if(IPCC.gB===true){K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.RectangleRedaction),new IPCC.dc(),new IPCC.fJ(true,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.RectangleRedaction),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="CreateRectangleRedactionMark";break;case IPCC.Web.UI.MouseTool.CreateEllipseMark:if(IPCC.gB===true){K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.Ellipse),new IPCC.dc(),new IPCC.fJ(true,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.Ellipse),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="CreateEllipseMark";break;case IPCC.Web.UI.MouseTool.CreateLineMark:if(IPCC.gB===true){K.fE([new IPCC.lN(),new IPCC.dc(),new IPCC.fJ(true,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.lN(),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="CreateLineMark";break;case IPCC.Web.UI.MouseTool.CreatePolylineMark:if(IPCC.gB===true){K.fE([new IPCC.ln(IPCC.Web.UI.MarkType.Polyline),new IPCC.dc(),new IPCC.fJ(true,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.ln(IPCC.Web.UI.MarkType.Polyline),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="CreatePolylineMark";break;case IPCC.Web.UI.MouseTool.CreateFreehandMark:if(IPCC.gB===true){K.fE([new IPCC.lj(),new IPCC.dc(),new IPCC.fJ(true,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.lj(),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="CreateFreehandMark";break;case IPCC.Web.UI.MouseTool.CreatePolygonMark:if(IPCC.gB===true){K.fE([new IPCC.ln(IPCC.Web.UI.MarkType.Polygon),new IPCC.dc(),new IPCC.fJ(true,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.ln(IPCC.Web.UI.MarkType.Polygon),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="CreatePolygonMark";break;case IPCC.Web.UI.MouseTool.CreateTextMark:if(IPCC.gB===true){K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.Text),new IPCC.dc(),new IPCC.fJ(true,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.Text),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="CreateTextMark";break;case IPCC.Web.UI.MouseTool.CreateTextInputSignatureMark:if(IPCC.gB===true){K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.TextLine),new IPCC.dc(),new IPCC.fJ(true,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.TextLine),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="CreateTextInputSignatureMark";break;case IPCC.Web.UI.MouseTool.CreateTextAreaSignatureMark:K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.TextAreaSignature),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);je="CreateTextAreaSignatureMark";break;case IPCC.Web.UI.MouseTool.EditMarks:if(IPCC.gB===true){K.fE([new IPCC.lY(IPCC.Web.UI.MarkType.Text),new IPCC.dc(),new IPCC.fJ(true,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.lY(IPCC.Web.UI.MarkType.Text),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="EditMarks";break;case IPCC.Web.UI.MouseTool.RunMarks:if(IPCC.gB===true){K.fE([new IPCC.xF(IPCC.Web.UI.MarkType.Text),new IPCC.dc(),new IPCC.fJ(false,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.xF(IPCC.Web.UI.MarkType.Text),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="RunMarks";break;case IPCC.Web.UI.MouseTool.CreateStampMark:if(IPCC.gB===true){K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.Stamp),new IPCC.dc(),new IPCC.fJ(true,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.Stamp),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="CreateStampMark";break;case IPCC.Web.UI.MouseTool.CreateImageStampAnnotationMark:if(IPCC.gB===true){K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.ImageStampAnnotation),new IPCC.dc(),new IPCC.fJ(true,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.ImageStampAnnotation),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="CreateImageStampAnnotationMark";break;case IPCC.Web.UI.MouseTool.CreateImageStampRedactionMark:if(IPCC.gB===true){K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.ImageStampRedaction),new IPCC.dc(),new IPCC.fJ(true,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.dX(IPCC.Web.UI.MarkType.ImageStampRedaction),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="CreateImageStampRedactionMark";break;case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:K.Jj=true;if(IPCC.gB===true){K.fE([new IPCC.ky(),new IPCC.dc(),new IPCC.fJ(false,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.ky(),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="CreateHighlightTextMark";break;case IPCC.Web.UI.MouseTool.SelectText:K.Jj=false;if(IPCC.gB===true){K.fE([new IPCC.ky(),new IPCC.dc(),new IPCC.fJ(false,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.ky(),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="SelectText";break;case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:if(IPCC.gB===true){K.fE([new IPCC.ky(),new IPCC.dc(),new IPCC.fJ(true,this.iv()),new IPCC.dK(),new IPCC.dF(false)]);}else{K.fE([new IPCC.ky(),new IPCC.dc(),new IPCC.dK(),new IPCC.dF(false)]);}je="CreateStrikethroughMark";break;}this.raisePropertyChanged('mouseTool',{mouseToolType:je});}};this.Fe=function(ayd){aV= -1;K.fE(ayd);};this.auQ=function(){return K.bC().get_presentationQuality();};this.arf=function(L){IPCC.bO.kb(L,'value',0,100);K.bC().set_presentationQuality(L);};this.arZ=function(){return K.bC().get_scrollBars();};this.apZ=function(L){IPCC.bO.le(L,'value',IPCC.Web.UI.ScrollBars);K.bC().set_scrollBars(L);};this.apQ=function(cO,avS){IPCC.bO.bL(cO,'imagePoint');if(!(K.dj())){return new IPCC.Web.UI.Point(0,0);}var bY=K.bC().fB().transform(cO);if(avS){bY.constrain(K.ee());}return bY;};this.RE=function(bY,awW){IPCC.bO.bL(bY,'windowPoint');var av=K.dj();if(!av){return new IPCC.Web.UI.Point(0,0);}var qw=K.bC().fB();qw.ye();var cO=qw.transform(bY);if(awW){cO.constrain(av);}return cO;};function aBj(){var cu;cu=gS.nk();var afw=cu.clientWidth;var ald=cu.clientHeight;var aDE=(fI&&fI.viewFitType===acZ&&afw===adu&&ald===adO);if(aDE){if(PR>2){return;}PR++;}else{acZ=fI?fI.viewFitType: -1;adu=afw;adO=ald;PR=0;}abL();};function aDx(){fI=null;};function apB(bu,V){switch(V.hn){case IPCC.dV.abH:gS.adN(1.25,V.RW.windowPoint);break;case IPCC.dV.acT:gS.adP(1.25,V.RW.windowPoint);break;case IPCC.dV.WN:gS.vQ(V.L);break;case IPCC.dV.agJ:gS.agD();break;case IPCC.dV.akS:gS.akb();break;case IPCC.dV.adn:gS.WG(V.L);break;case IPCC.dV.acJ:gS.Gf(V.L);break;}};this.kH=function(){return K.kH();};this.FK=function(L){K.FK(L);};this.cd=function(){return K.cd();};this.mv=function(){return K.mv();};this.Cz=function(L){K.Cz(L);};this.zz=function(){return K.get_requireRequestsOptimize();};this.Gl=function(L){K.Gl(L);};this.jS=function(){return K.jS();};this.wR=function(L){K.wR(L);};this.FZ=function(cO){IPCC.bO.bL(cO,'imagePoint');return K.FZ(cO);};this.yk=function(cU){K.yk(cU);};this.Vc=function(){K.Vc();};this.Mk=function(ts,cG){var Gu=K.cd().hB().eF();IPCC.bO.mc(ts,'ts',0,Gu-1);K.Mk(ts,cG);};this.tm=function(cU){if(cU===undefined){K.bC().tm(cU);return false;}var Gu=K.cd().hB().eF();IPCC.bO.mc(cU,'textIndex',0,Gu-1);K.tm(cU);return true;};this.Jm=function(){return! !(K.dj()&&K.kH()&&K.cd().nn()===true&&K.bC().Jm());};this.VC=function(){var ar=K.bC();ar.VC();};this.Nh=function(){if(K.kH()&&K.cd().nn()===true){return Math.min(K.bC().ahV(),K.bC().BO());}};this.Cd=function(){if(K.kH()&&K.cd().nn()===true){return K.bC().Cd();}};this.Ei=function(){if(K.kH()&&K.cd().nn()===true&&K.bC().Jm()){return K.Ei();}else{return "";}};this.BO=function(){return K.bC().BO();};this.ays=function(){return K.get_cursor();};this.aot=function(L){K.set_cursor(L);};this.xh=function(){return K.xh();};this.Ys=function(L){K.Ys(L);};this.iP=function(){return K.iP();};this.oR=function(L){K.oR(L);};this.ast=function(){K.bC().hideMagnifier();};this.anG=function(bY){K.bC().showMagnifier(bY);};this.vV=function(T){if(K.nj().igElements){K.vV(T);K.dN();}};this.Is=function(){K.Is();};this.Ce=function(){return K.Ce();};this.qA=function(){if(K.nj().igElements){K.qA(true);}};function aAi(bu,V){var wh=V.scaleFactor;var aE={scaleType:"scaledDown",pageNumber:V.pageNumber};if(IG!==wh){if(wh>IG){aE.scaleType="scaledUp";}IG=wh;ay('scaleChanged',aE);}};this.initialize=function(){K.aqq(this.nk().id);K.vS(this.nk().id);if(aV=== -1){this.Gf(IPCC.Web.UI.MouseTool.RectangleZoom);}nX('mouseDown');nX('mouseMove');nX('mouseUp');nX('contextMenu');nX('markCreating');nX('pageOpenFailed');nX('textPageReady');nX('pageDisplayed');nX('exceptionThrown');nX('selectTextMouseToolCompleted');HQ('markAdded');HQ('markChanged');HQ('markRemoved');nX('textExtractionFailed');HQ('markReordered');HQ('marksLoaded');nX('markSelectionChanged');azW();K.auS(aBj);K.auW(aDx);K.aEi(apB);K.add_scaleChanged(aAi);K.awR();var cu=this.nk();cu.aQ=this;};pU=(pU!==false);K=new IPCC.WT(pU);K.aoR('PageView');K.ark(RK);};afe.prototype={dispose:function(){this.bn('dispose',arguments);this.QR();},get_debug:function(){try{var bq=this.Jw();this.dn('get_debug',arguments,bq);return bq;}catch(e){this.ag('get_debug',e);throw e;}},set_debug:function(value){try{this.bn('set_debug',arguments);var Aj=this.Jw();this.XL(value);if(!Aj){this.bn('set_debug',arguments);}}catch(e){this.ag('set_debug',e);throw e;}},get_debugErrorLevel:function(){try{var bq=this.xf();this.dn('get_debugErrorLevel',arguments,bq);return bq;}catch(e){this.ag('get_debugErrorLevel',e);throw e;}},set_debugErrorLevel:function(value){try{this.bn('set_debugErrorLevel',arguments);var Aj=this.xf();this.GV(value);if(Aj<IPCC.Web.UI.DebugErrorLevel.Development){this.bn('set_debugErrorLevel',arguments);}}catch(e){this.ag('set_debugErrorLevel',e);throw e;}},get_artServiceOption:function(){try{var bq=this.WP();this.dn('get_artServiceOption',arguments,bq);return bq;}catch(e){this.ag('get_artServiceOption',e);throw e;}},set_artServiceOption:function(value){try{this.bn('set_artServiceOption',arguments);this.Zi(value);}catch(e){this.ag('set_artServiceOption',e);throw e;}},add_pageOpening:function(handler){try{this.Ue(handler);}catch(e){this.ag('add_pageOpening',e);throw e;}},remove_pageOpening:function(handler){try{this.XE(handler);}catch(e){this.ag('remove_pageOpening',e);throw e;}},add_pageOpened:function(handler){try{this.ST(handler);}catch(e){this.ag('add_pageOpened',e);throw e;}},remove_pageOpened:function(handler){try{this.XH(handler);}catch(e){this.ag('remove_pageOpened',e);throw e;}},add_pageClosed:function(handler){try{this.auJ(handler);}catch(e){this.ag('add_pageClosed',e);throw e;}},remove_pageClosed:function(handler){try{this.aBc(handler);}catch(e){this.ag('remove_pageClosed',e);throw e;}},add_pageOpenFailed:function(handler){try{this.Gb(handler);}catch(e){this.ag('add_pageOpenFailed',e);throw e;}},remove_pageOpenFailed:function(handler){try{this.HD(handler);}catch(e){this.ag('remove_pageOpenFailed',e);throw e;}},add_pageDisplayed:function(handler){try{this.SZ(handler);}catch(e){this.ag('add_pageDisplayed',e);throw e;}},remove_pageDisplayed:function(handler){try{this.Wp(handler);}catch(e){this.ag('remove_pageDisplayed',e);throw e;}},add_mouseDown:function(handler){try{this.PA(handler);}catch(e){this.ag('add_mouseDown',e);throw e;}},remove_mouseDown:function(handler){try{this.Wh(handler);}catch(e){this.ag('remove_mouseDown',e);throw e;}},add_mouseMove:function(handler){try{this.PO(handler);}catch(e){this.ag('add_mouseMove',e);throw e;}},remove_mouseMove:function(handler){try{this.Wm(handler);}catch(e){this.ag('remove_mouseMove',e);throw e;}},add_mouseUp:function(handler){try{this.PH(handler);}catch(e){this.ag('add_mouseUp',e);throw e;}},remove_mouseUp:function(handler){try{this.Xi(handler);}catch(e){this.ag('remove_mouseUp',e);throw e;}},add_contextMenu:function(handler){try{this.aDa(handler);}catch(e){this.ag('add_contextMenu',e);throw e;}},remove_contextMenu:function(handler){try{this.aBF(handler);}catch(e){this.ag('remove_contextMenu',e);throw e;}},add_markAdded:function(handler){try{this.Al(handler);}catch(e){this.ag('add_markAdded',e);throw e;}},remove_markAdded:function(handler){try{this.zh(handler);}catch(e){this.ag('remove_markAdded',e);throw e;}},add_markCreating:function(handler){try{this.SM(handler);}catch(e){this.ag('add_markCreating',e);throw e;}},remove_markCreating:function(handler){try{this.XA(handler);}catch(e){this.ag('remove_markCreating',e);throw e;}},add_markChanged:function(handler){try{this.HN(handler);}catch(e){this.ag('add_markChanged',e);throw e;}},remove_markChanged:function(handler){try{this.FA(handler);}catch(e){this.ag('remove_markChanged',e);throw e;}},add_markRemoved:function(handler){try{this.zd(handler);}catch(e){this.ag('add_markRemoved',e);throw e;}},remove_markRemoved:function(handler){try{this.AK(handler);}catch(e){this.ag('remove_markRemoved',e);throw e;}},add_markReordered:function(handler){try{this.FH(handler);}catch(e){this.ag('add_markReordered',e);throw e;}},remove_markReordered:function(handler){try{this.Fy(handler);}catch(e){this.ag('remove_markReordered',e);throw e;}},add_marksLoaded:function(handler){try{this.SX(handler);}catch(e){this.ag('add_marksLoaded',e);throw e;}},remove_marksLoaded:function(handler){try{this.Wi(handler);}catch(e){this.ag('remove_marksLoaded',e);throw e;}},add_markSelectionChanged:function(handler){try{this.FX(handler);}catch(e){this.ag('add_markSelectionChanged',e);throw e;}},remove_markSelectionChanged:function(handler){try{this.GC(handler);}catch(e){this.ag('remove_markSelectionChanged',e);throw e;}},add_selectTextMouseToolCompleted:function(handler){try{this.Sq(handler);}catch(e){this.ag('add_selectTextMouseToolCompleted',e);throw e;}},remove_selectTextMouseToolCompleted:function(handler){try{this.WO(handler);}catch(e){this.ag('remove_selectTextMouseToolCompleted',e);throw e;}},add_textPageReady:function(handler){try{this.AO(handler);}catch(e){this.ag('add_textPageReady',e);throw e;}},remove_textPageReady:function(handler){try{this.EC(handler);}catch(e){this.ag('remove_textPageReady',e);throw e;}},add_exceptionThrown:function(handler){this.TK(handler);},remove_exceptionThrown:function(handler){this.Un(handler);},add_scaleChanged:function(handler){try{this.SF(handler);}catch(e){this.ag('add_scaleChanged',e);throw e;}},remove_scaleChanged:function(handler){try{this.Wj(handler);}catch(e){this.ag('remove_scaleChanged',e);throw e;}},add_propertyChanged:function(handler){try{this.kf(handler);}catch(e){this.ag('add_propertyChanged',e);throw e;}},remove_propertyChanged:function(handler){try{this.mo(handler);}catch(e){this.ag('remove_propertyChanged',e);throw e;}},add_textExtractionFailed:function(handler){this.Ac(handler);},remove_textExtractionFailed:function(handler){this.Dr(handler);},writeToLog:function(message){try{this.mn(message);}catch(e){this.ag('writeToLog',e);throw e;}},fitPage:function(type){try{this.bn('fitPage',arguments);this.WG(type);}catch(e){this.ag('fitPage',e);throw e;}},get_pageIsOpen:function(){try{var bq=this.fH();this.dn('get_pageIsOpen',arguments,bq);return bq;}catch(e){this.ag('get_pageIsOpen',e);throw e;}},get_pageWidth:function(){try{var bq=this.ki();this.dn('get_pageWidth',arguments,bq);return bq;}catch(e){this.ag('get_pageWidth',e);throw e;}},get_pageHeight:function(){try{var bq=this.jE();this.dn('get_pageHeight',arguments,bq);return bq;}catch(e){this.ag('get_pageHeight',e);throw e;}},get_pageXResolution:function(){try{var bq=this.atE();this.dn('get_pageXResolution',arguments,bq);return bq;}catch(e){this.ag('get_pageXResolution',e);throw e;}},get_pageYResolution:function(){try{var bq=this.aun();this.dn('get_pageYResolution',arguments,bq);return bq;}catch(e){this.ag('get_pageYResolution',e);throw e;}},get_documentIdentifier:function(){try{var bq=this.JZ();this.dn('get_documentIdentifier',arguments,bq);return bq;}catch(e){this.ag('get_documentIdentifier',e);throw e;}},get_encodedDocumentIdentifier:function(){try{var bq=this.PW();this.dn('get_encodedDocumentIdentifier',arguments,bq);return bq;}catch(e){this.ag('get_encodedDocumentIdentifier',e);throw e;}},get_pageNumber:function(){try{var bq=this.nT();this.dn('get_pageNumber',arguments,bq);return bq;}catch(e){this.ag('get_pageNumber',e);throw e;}},get_documentPageCount:function(){try{var bq=this.ayh();this.dn('get_documentPageCount',arguments,bq);return bq;}catch(e){this.ag('get_documentPageCount',e);throw e;}},get_displayedPageRectangle:function(){try{var bq=this.aiG();this.dn('get_displayedPageRectangle',arguments,bq);return bq;}catch(e){this.ag('get_displayedPageRectangle',e);throw e;}},get_currentState:function(){try{var bq=this.OG();this.dn('get_currentState',arguments,bq);return bq;}catch(e){this.ag('get_currentState',e);throw e;}},zoomIn:function(factor){try{this.bn('zoomIn',arguments);this.KJ(factor);}catch(e){this.ag('zoomIn',e);throw e;}},zoomOut:function(factor){try{this.bn('zoomOut',arguments);this.aas(factor);}catch(e){this.ag('zoomOut',e);throw e;}},set_sharpening:function(factor){try{this.bn('set_sharpening',arguments);this.Fk(factor);}catch(e){this.ag('set_sharpening',e);throw e;}},set_gamma:function(factor){try{this.bn('set_gamma',arguments);this.Cb(factor);}catch(e){this.ag('set_gamma',e);throw e;}},set_svgLineWidthMultiplier:function(factor){try{this.bn('set_svgLineWidthMultiplier',arguments);this.Ga(factor);}catch(e){this.ag('set_svgLineWidthMultiplier',e);throw e;}},zoom:function(factor){try{this.bn('zoom',arguments);this.lf(factor);}catch(e){this.ag('zoom',e);throw e;}},rotate:function(degreesClockwise){try{this.bn('rotate',arguments);this.vQ(degreesClockwise);}catch(e){this.ag('rotate',e);throw e;}},showPageRectangle:function(imageRectangle){try{this.bn('showPageRectangle',arguments,1);this.amR(imageRectangle);}catch(e){this.ag('showPageRectangle',e);throw e;}},showPagePointAtCenter:function(imagePoint){try{this.bn('showPagePointAtCenter',arguments,1);this.alF(imagePoint);}catch(e){this.ag('showPagePointAtCenter',e);throw e;}},mirror:function(){try{this.bn('mirror',arguments);this.akb();}catch(e){this.ag('mirror',e);throw e;}},flip:function(){try{this.bn('flip',arguments);this.agD();}catch(e){this.ag('flip',e);throw e;}},display:function(){try{this.bn('display',arguments);this.dN();}catch(e){this.ag('display',e);throw e;}},openPage:function(parameters){try{this.bn('openPage',arguments,1);this.Nl(parameters);}catch(e){this.ag('openPage',e);throw e;}},closePage:function(){try{this.bn('closePage',arguments);this.QR();}catch(e){this.ag('closePage',e);throw e;}},hideSelection:function(){try{this.bn('hideSelection',arguments);this.pn();}catch(e){this.ag('hideSelection',e);throw e;}},showSelection:function(imageRectangle){try{this.bn('showSelection',arguments);this.aoY(imageRectangle);}catch(e){this.ag('showSelection',e);throw e;}},showEmptySelection:function(imagePoint){try{this.bn('showEmptySelection',arguments);this.Ca(imagePoint);}catch(e){this.ag('showEmptySelection',e);throw e;}},extendSelection:function(imagePoint){try{this.bn('extendSelection',arguments);this.xO(imagePoint);}catch(e){this.ag('extendSelection',e);throw e;}},saveArtPage:function(onSave){try{this.bn('saveArtPage',arguments);this.XJ(onSave);}catch(e){this.ag('saveArtPage',e);throw e;}},get_selectionPageRectangle:function(){try{var bq=this.wN();this.dn('get_selectionPageRectangle',arguments,bq);return bq;}catch(e){this.ag('get_selectionPageRectangle',e);throw e;}},get_selectionWindowRectangle:function(){try{var bq=this.arx();this.dn('get_selectionWindowRectangle',arguments,bq);return bq;}catch(e){this.ag('get_selectionWindowRectangle',e);throw e;}},get_selectionIsVisible:function(){try{var bq=this.Ar();this.dn('get_selectionIsVisible',arguments,bq);return bq;}catch(e){this.ag('get_selectionIsVisible',e);throw e;}},get_controlStateElementId:function(){try{var bq=this.axM();this.dn('get_controlStateElementId',arguments,bq);return bq;}catch(e){this.ag('get_controlStateElementId',e);throw e;}},set_controlStateElementId:function(value){try{this.bn('set_controlStateElementId',arguments);this.aoa(value);}catch(e){this.ag('set_controlStateElementId',e);throw e;}},get_includeArtInPostBack:function(){try{var bq=this.ayV();this.dn('get_includeArtInPostBack',arguments,bq);return bq;}catch(e){this.ag('get_includeArtInPostBack',e);throw e;}},set_includeArtInPostBack:function(value){try{this.bn('set_includeArtInPostBack',arguments);this.asw(value);}catch(e){this.ag('set_includeArtInPostBack',e);throw e;}},get_artPage:function(){try{var bq=this.eh();this.dn('get_artPage',arguments,bq);return bq;}catch(e){this.ag('get_artPage',e);throw e;}},set_artPage:function(value){try{this.bn('set_artPage',arguments);this.nc(value);}catch(e){this.ag('set_artPage',e);throw e;}},get_documentArtPage:function(){try{var bq=this.MU();this.dn('get_documentArtPage',arguments,bq);return bq;}catch(e){this.ag('get_documentArtPage',e);throw e;}},set_documentArtPage:function(value){try{this.bn('set_documentArtPage',arguments);this.Ip(value);}catch(e){this.ag('set_documentArtPage',e);throw e;}},get_transientArtPage:function(){try{var bq=this.mp();this.dn('get_transientArtPage',arguments,bq);return bq;}catch(e){this.ag('get_transientArtPage',e);throw e;}},set_transientArtPage:function(value){try{this.bn('set_transientArtPage',arguments);this.DC(value);}catch(e){this.ag('set_transientArtPage',e);throw e;}},get_imageHandlerUrl:function(){try{var bq=this.tP();this.dn('get_imageHandlerUrl',arguments,bq);return bq;}catch(e){this.ag('get_imageHandlerUrl',e);throw e;}},set_imageHandlerUrl:function(value){try{this.bn('set_imageHandlerUrl',arguments);this.UN(value);}catch(e){this.ag('set_imageHandlerUrl',e);throw e;}},get_resourcePath:function(){try{var bq=this.uY();this.dn('get_resourcePath',arguments,bq);return bq;}catch(e){this.ag('get_resourcePath',e);throw e;}},set_resourcePath:function(L){try{this.bn('set_resourcePath',arguments);this.Gx(L);}catch(e){this.ag('set_resourcePath',e);throw e;}},get_contextMenuLanguageDictionary:function(){try{var bq=this.iv();this.dn('get_contextMenuLanguageDictionary',arguments,bq);return bq;}catch(e){this.ag('get_contextMenuLanguageDictionary',e);throw e;}},set_contextMenuLanguageDictionary:function(L){try{this.bn('set_contextMenuLanguageDictionary',arguments);this.anb(L);}catch(e){this.ag('set_contextMenuLanguageDictionary',e);throw e;}},get_textRequired:function(){try{var bq=this.kH();this.dn('get_textRequired',arguments,bq);return bq;}catch(e){this.ag('get_textRequired',e);throw e;}},set_textRequired:function(L){try{this.bn('set_textRequired',arguments);this.FK(L);}catch(e){this.ag('set_textRequired',e);throw e;}},get_textPage:function(){try{var bq=this.cd();this.dn('get_textPage',arguments,bq);return bq;}catch(e){this.ag('get_textPage',e);throw e;}},get_textSelectionIsVisible:function(){try{var bq=this.Jm();this.DX('textSelectionIsVisible',arguments,bq,1);return bq;}catch(e){this.ag('textSelectionIsVisible',e);throw e;}},getSelectedText:function(){try{var bq=this.Ei();this.DX('getSelectedText',arguments,bq,1);return bq;}catch(e){this.ag('getSelectedText',e);throw e;}},get_requireRequestsOptimize:function(){try{var bq=this.zz();this.dn('get_requireRequestsOptimize',arguments,bq);return bq;}catch(e){this.ag('zz',e);throw e;}},set_requireRequestsOptimize:function(value){try{this.bn('set_requireRequestsOptimize',arguments);this.Gl(value);}catch(e){this.ag('set_requireRequestsOptimize',e);throw e;}},get_magnifierMagnification:function(){try{var bq=this.ayg();this.dn('get_magnifierMagnification',arguments,bq);return bq;}catch(e){this.ag('get_magnifierMagnification',e);throw e;}},set_magnifierMagnification:function(value){try{this.bn('set_magnifierMagnification',arguments);this.ate(value);}catch(e){this.ag('set_magnifierMagnification',e);throw e;}},get_magnifierWidth:function(){try{var bq=this.ayi();this.dn('get_magnifierWidth',arguments,bq);return bq;}catch(e){this.ag('get_magnifierWidth',e);throw e;}},set_magnifierWidth:function(value){try{this.bn('set_magnifierWidth',arguments);this.aso(value);}catch(e){this.ag('set_magnifierWidth',e);throw e;}},get_magnifierHeight:function(){try{var bq=this.axX();this.dn('get_magnifierHeight',arguments,bq);return bq;}catch(e){this.ag('get_magnifierHeight',e);throw e;}},set_magnifierHeight:function(value){try{this.bn('set_magnifierHeight',arguments);this.asc(value);}catch(e){this.ag('set_magnifierHeight',e);throw e;}},get_magnifierXOffset:function(){try{var bq=this.Pp();this.dn('get_magnifierXOffset',arguments,bq);return bq;}catch(e){this.ag('get_magnifierXOffset',e);throw e;}},set_magnifierXOffset:function(value){try{this.bn('set_magnifierXOffset',arguments);this.Vd(value);}catch(e){this.ag('set_magnifierXOffset',e);throw e;}},get_magnifierYOffset:function(){try{var bq=this.OK();this.dn('get_magnifierYOffset',arguments,bq);return bq;}catch(e){this.ag('get_magnifierYOffset',e);throw e;}},set_magnifierYOffset:function(value){try{this.bn('set_magnifierYOffset',arguments);this.Vz(value);}catch(e){this.ag('set_magnifierYOffset',e);throw e;}},showMagnifier:function(windowPoint){try{this.bn('showMagnifier',arguments,1);this.anG(windowPoint);}catch(e){this.ag('showMagnifier',e);throw e;}},hideMagnifier:function(){try{this.bn('hideMagnifier',arguments);this.ast();}catch(e){this.ag('hideMagnifier',e);throw e;}},get_markHandleSize:function(){try{var bq=this.VE();this.dn('get_markHandleSize',arguments,bq);return bq;}catch(e){this.ag('get_markHandleSize',e);throw e;}},set_markHandleSize:function(value){try{this.bn('set_markHandleSize',arguments);this.Um(value);}catch(e){this.ag('set_markHandleSize',e);throw e;}},get_markHandleMode:function(){try{var bq=this.zV();this.dn('get_markHandleMode',arguments,bq);return bq;}catch(e){this.ag('get_markHandleMode',e);throw e;}},set_markHandleMode:function(value){try{this.bn('set_markHandleMode',arguments);this.Kg(value);}catch(e){this.ag('set_markHandleMode',e);throw e;}},get_mouseTool:function(){try{var bq=this.Vo();this.dn('get_mouseTool',arguments,bq);return bq;}catch(e){this.ag('get_mouseTool',e);throw e;}},set_mouseTool:function(value){try{this.bn('set_mouseTool',arguments);this.Gf(value);}catch(e){this.ag('set_mouseTool',e);throw e;}},get_presentationQuality:function(){try{var bq=this.auQ();this.dn('get_presentationQuality',arguments,bq);return bq;}catch(e){this.ag('get_presentationQuality',e);throw e;}},set_presentationQuality:function(value){try{this.bn('set_presentationQuality',arguments);this.arf(value);}catch(e){this.ag('set_presentationQuality',e);throw e;}},get_scrollBars:function(){try{var bq=this.arZ();this.dn('get_scrollBars',arguments,bq);return bq;}catch(e){this.ag('get_scrollBars',e);throw e;}},set_scrollBars:function(value){try{this.bn('set_scrollBars',arguments);this.apZ(value);}catch(e){this.ag('set_scrollBars',e);throw e;}},get_imGearPage:function(){try{var bq=this.mv();this.dn('get_imGearPage',arguments,bq);return bq;}catch(e){this.ag('get_imGearPage',e);throw e;}},set_imGearPage:function(value){try{this.bn('set_imGearPage',arguments);this.Cz(value);}catch(e){this.ag('set_imGearPage',e);throw e;}},get_serviceResponseTimeout:function(){try{var bq=this.jS();this.dn('get_serviceResponseTimeout',arguments,bq);return bq;}catch(e){this.ag('get_serviceResponseTimeout',e);throw e;}},set_serviceResponseTimeout:function(value){try{this.bn('set_serviceResponseTimeout',arguments);this.wR(value);}catch(e){this.ag('set_serviceResponseTimeout',e);throw e;}},get_currentTextIndex:function(){try{var bq=this.BO();this.dn('get_currentTextIndex',arguments,bq);return bq;}catch(e){this.ag('get_currentTextIndex',e);throw e;}},get_cursor:function(){try{var bq=this.ays();this.dn('get_cursor',arguments,bq);return bq;}catch(e){this.ag('get_cursor',e);throw e;}},set_cursor:function(value){try{this.bn('set_cursor',arguments);this.aot(value);}catch(e){this.ag('set_cursor',e);throw e;}},get_encryption:function(){try{var bq=this.iP();this.dn('get_encryption',arguments,bq);return bq;}catch(e){this.ag('get_encryption',e);throw e;}},set_encryption:function(value){try{this.bn('set_encryption',arguments);this.oR(value);}catch(e){this.ag('set_encryption',e);throw e;}},transformPagePointToWindow:function(imagePoint,constrainResultToWindow){try{var bq=this.apQ(imagePoint,constrainResultToWindow);this.DX('transformPagePointToWindow',arguments,bq,1);return bq;}catch(e){this.ag('transformPagePointToWindow',e);throw e;}},transformWindowPointToPage:function(windowPoint,constrainResultToImage){try{var bq=this.RE(windowPoint,constrainResultToImage);this.DX('transformWindowPointToPage',arguments,bq,1);return bq;}catch(e){this.ag('transformWindowPointToPage',e);throw e;}},transformPagePointToTextIndex:function(pagePoint){try{var bq=this.FZ(pagePoint);this.DX('transformPagePointToTextIndex',arguments,bq,1);return bq;}catch(e){this.ag('transformPagePointToTextIndex',e);throw e;}},removeAllHighlights:function(){try{this.bn('removeAllHighlights',arguments);this.Vc();}catch(e){this.ag('removeAllHighlights',e);throw e;}},showTextSelection:function(indexOfFirstCharacter,length){try{this.bn('showTextSelection',arguments);this.Mk(indexOfFirstCharacter,length);}catch(e){this.ag('showTextSelection',e);throw e;}},showEmptyTextSelection:function(textIndex){try{this.bn('showEmptyTextSelection',arguments);this.yk(textIndex);}catch(e){this.ag('showEmptyTextSelection',e);throw e;}},extendTextSelection:function(textIndex){try{this.bn('extendTextSelection',arguments);this.tm(textIndex);}catch(e){this.ag('extendTextSelection',e);throw e;}},initializeViewControllers:function(showArtContextMenu){try{this.bn('initializeViewControllers',arguments);this.aoc(showArtContextMenu);}catch(e){this.ag('initializeViewControllers',e);throw e;}},get_autoUpdate:function(){try{var bq=this.xh();this.dn('get_autoUpdate',arguments,bq);return bq;}catch(e){this.ag('get_autoUpdate',e);throw e;}},set_autoUpdate:function(value){try{this.bn('set_autoUpdate',arguments);this.Ys(value);}catch(e){this.ag('set_autoUpdate',e);throw e;}}};module.exports=afe;},{}],114:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var nG=require('./FitType');var PS=function(){return this;};PS.prototype={documentIdentifier:'',encodedDocumentIdentifier:'',pageNumber:0,viewFitType:nG.FullImage,viewRectangle:null,viewRotationDegreesClockwise:0,viewMirror:false,viewZoomFactor:undefined,encryption:false};PS.registerClass=cs;PS.registerClass('IPCC.Web.UI.PageViewState');module.exports=PS;},{"../../IPCC.Util":28,"./FitType":74}],115:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var vM=function(x,y){this.x=x;this.y=y;return this;};vM.prototype={toString:function(){return 'Point('+this.x+', '+this.y+')';},constrain:function(rectangle){this.x=Math.min(Math.max(this.x,rectangle.x),rectangle.x+rectangle.width);this.y=Math.min(Math.max(this.y,rectangle.y),rectangle.y+rectangle.height);}};vM.registerClass=cs;vM.registerClass('IPCC.Web.UI.Point');module.exports=vM;},{"../../IPCC.Util":28}],116:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var LX=function(){var bo=[];var aN=new IPCC.Web.UI.ir();this.atz=function(bL){var V=new IPCC.Web.UI.PointEventArgs();V.point=bL;V.length=1;bo.push(new IPCC.Web.UI.Point(bL.x,bL.y));V.index=bo.length-1;this.ay('pointAdded',V);};this.auN=function(aev){var V=new IPCC.Web.UI.PointEventArgs();V.index=bo.length;V.length=aev.get_length();function kr(bL){bo.push(bL);};aev.forEach(kr,{});if(V.length>0){this.ay('pointAdded',V);}};this.jL=function(iT,du){var Uf=[].concat(bo);var h;for(h=0;h<Uf.length;h++){iT.call(du,new IPCC.Web.UI.Point(Uf[h].x,Uf[h].y),h,this);}};this.zq=function(af){kD(af);var fA=bo[af];return new IPCC.Web.UI.Point(fA.x,fA.y);};this.amS=function(af,bL){kD(af);IPCC.bO.bL(bL,'point');var PG=bo[af];if(PG.x===bL.x&&PG.y===bL.y){return;}PG.x=bL.x;PG.y=bL.y;var V=new IPCC.Web.UI.PointEventArgs();V.point=bL;V.index=af;V.length=1;this.ay('pointChanged',V);};this.eF=function(){return bo.length;};this.aCM=function(af){kD(af);var V=new IPCC.Web.UI.PointEventArgs();V.point=bo[af];V.index=af;V.length=1;bo.splice(af,1);this.ay('pointRemoved',V);};this.aCC=function(){if(bo.length<1){return;}var V=new IPCC.Web.UI.PointEventArgs();V.index=0;V.length=bo.length;bo=[];this.ay('pointRemoved',V);};this.aij=function(eA,ey){if(eA===0&&ey===0){return;}IPCC.bO.gG(eA,'deltaX');IPCC.bO.gG(ey,'deltaY');var h;for(h=0;h<bo.length;h++){bo[h].x+=eA;bo[h].y+=ey;}var V=new IPCC.Web.UI.PointEventArgs();V.index=0;V.length=bo.length;this.ay('pointChanged',V);};this.tx=function(){if(bo.length<1){return new IPCC.Web.UI.Rectangle(0,0,0,0);}var h,hg=bo[0].x,jg=bo[0].x,_top=bo[0].y,hK=bo[0].y;for(h=1;h<bo.length;h++){var bL=bo[h];hg=Math.min(hg,bL.x);jg=Math.max(jg,bL.x);_top=Math.min(_top,bL.y);hK=Math.max(hK,bL.y);}return new IPCC.Web.UI.Rectangle(hg,_top,jg-hg,hK-_top);};function kD(af){if(af>bo.length-1||(af<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',af);}};this.atA=function(R){aN.addHandler('pointAdded',R);};this.aBB=function(R){aN.removeHandler('pointAdded',R);};this.auu=function(R){aN.addHandler('pointChanged',R);};this.aBz=function(R){aN.removeHandler('pointChanged',R);};this.auZ=function(R){aN.addHandler('pointRemoved',R);};this.aCD=function(R){aN.removeHandler('pointRemoved',R);};this.ay=function(cY,V){var R=aN.getHandler(cY);if(R!==null){R(this,V);}};return this;};LX.prototype={toString:function(){return 'PointCollection with '+this.get_length()+' points';},addPoint:function(point){this.atz(point);},addPoints:function(pointCollection){this.auN(pointCollection);},forEach:function(method,context){this.jL(method,context);},getPoint:function(index){return this.zq(index);},setPoint:function(index,point){this.amS(index,point);},get_length:function(){return this.eF();},removePoint:function(index){this.aCM(index);},removeAllPoints:function(){this.aCC();},moveAllPoints:function(deltaX,deltaY){this.aij(deltaX,deltaY);},add_pointAdded:function(handler){this.atA(handler);},remove_pointAdded:function(handler){this.aBB(handler);},add_pointChanged:function(handler){this.auu(handler);},remove_pointChanged:function(handler){this.aBz(handler);},add_pointRemoved:function(handler){this.auZ(handler);},remove_pointRemoved:function(handler){this.aCD(handler);}};LX.registerClass=cs;LX.registerClass('IPCC.Web.UI.PointCollection');module.exports=LX;},{"../../IPCC.Util":28}],117:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var Ng=function(){return this;};Ng.registerClass=cs;Ng.prototype={};Ng.registerClass('IPCC.Web.UI.PointEventArgs');module.exports=Ng;},{"../../IPCC.Util":28}],118:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var PL=function(x,y,width,height){if(width<0){x+=width;width= -width;}if(height<0){y+=height;height= -height;}this.x=x;this.y=y;this.width=width;this.height=height;return this;};PL.prototype={intersect:function(rectangle){var bv=Math.max(this.x,rectangle.x);var aZ=Math.min(this.x+this.width,rectangle.x+rectangle.width)-bv;var cA=Math.max(this.y,rectangle.y);var dk=Math.min(this.y+this.height,rectangle.y+rectangle.height)-cA;if(aZ<=0||dk<=0){bv=cA=aZ=dk=0;}this.x=bv;this.y=cA;this.width=aZ;this.height=dk;},union:function(rectangle){var hg=Math.min(this.x,rectangle.x);var _top=Math.min(this.y,rectangle.y);var jg=Math.max(this.x+this.width,rectangle.x+rectangle.width);var hK=Math.max(this.y+this.height,rectangle.y+rectangle.height);this.x=hg;this.y=_top;this.width=jg-hg;this.height=hK-_top;return this;},scale:function(Re,OV){OV=OV||Re;var hg=this.x*Re;var _top=this.y*OV;var aZ=this.width*Re;var dk=this.height*OV;this.x=hg;this.y=_top;this.width=aZ;this.height=dk;return this;},toString:function(){return 'Rectangle('+this.x+', '+this.y+', '+this.width+', '+this.height+')';},contains:function(point){return point.x>=this.x&&point.y>=this.y&&point.x<this.x+this.width&&point.y<this.y+this.height;},clone:function(){return new IPCC.Web.UI.Rectangle(this.x,this.y,this.width,this.height);},equals:function(other){return this.x===other.x&&this.y===other.y&&this.width===other.width&&this.height===other.height;}};PL.registerClass=cs;PL.registerClass('IPCC.Web.UI.Rectangle');module.exports=PL;},{"../../IPCC.Util":28}],119:[function(require,module,exports){var ec=require('../../IPCC.Util').regEnum;var Pd=function(){};Pd.registerEnum=ec;Pd.prototype={None:0,Both:3,Auto:4};Pd.registerEnum('IPCC.Web.UI.ScrollBars',false);module.exports=Pd;},{"../../IPCC.Util":28}],120:[function(require,module,exports){var cs=require('../../IPCC.Util').regClass;var MT=function(){return this;};MT.registerClass=cs;MT.prototype={};MT.registerClass('IPCC.Web.UI.TextSelectedEventArgs');module.exports=MT;},{"../../IPCC.Util":28}],121:[function(require,module,exports){var At=require('./../../Type');var Vs={atX:1,ImGearDocumentHyperlink:require('./ImGearDocumentHyperlink'),ImGearTextCharacter:require('./ImGearTextCharacter'),ImGearTextCharacterCollection:require('./ImGearTextCharacterCollection'),ImGearHyperlinkCollection:require('./ImGearHyperlinkCollection'),ImGearHyperlinkPage:require('./ImGearHyperlinkPage'),ImGearTextPage:require('./ImGearTextPage'),ImGearTextSection:require('./ImGearTextSection'),ImGearTextSectionCollection:require('./ImGearTextSectionCollection'),ImGearPageCountStatus:require('./ImGearPageCountStatus'),ImGearPageCreateArgs:require('./ImGearPageCreateArgs'),ImGearPage:require('./ImGearPage'),ImGearPageEventArgs:require('./ImGearPageEventArgs'),ImGearPageCollection:require('./ImGearPageCollection'),ImGearDocumentCreateArgs:require('./ImGearDocumentCreateArgs'),ImGearDocument:require('./ImGearDocument'),ImGearDocumentEventArgs:require('./ImGearDocumentEventArgs'),ImGearDocumentCollection:require('./ImGearDocumentCollection'),ImGearPageOpenFailedEventArgs:require('./ImGearPageOpenFailedEventArgs'),ImGearExceptions:require('./ImGearExceptions'),ImGearException:require('./ImGearExceptions').Er,ImGearHttpException:require('./ImGearExceptions').Go,ImGearArgumentException:require('./ImGearExceptions').so,ImGearArgumentNullException:require('./ImGearExceptions').Cf,ImGearArgumentOutOfRangeException:require('./ImGearExceptions').sd,ImGearArgumentTypeException:require('./ImGearExceptions').ImGearArgumentTypeException,ImGearArgumentUndefinedException:require('./ImGearExceptions').Dp,ImGearInvalidOperationException:require('./ImGearExceptions').BV,ImGearNotImplementedException:require('./ImGearExceptions').BJ,ImGearParameterCountException:require('./ImGearExceptions').BW,ir:require('./ImGearEventHandlerList'),ImGearArtDataServices:require('./ImGearArtDataServices'),MouseButton:require('./MouseButton'),MouseTool:require('./MouseTool'),as:require('./DomEvent'),DebugErrorLevel:require('./DebugErrorLevel'),DebugItemCause:require('./DebugItemCause'),PageView:require('./PageView'),PageViewState:require('./PageViewState'),ArtPage:require('./ArtPage'),Key:require('./Key'),FitType:require('./FitType'),ScrollBars:require('./ScrollBars'),Rectangle:require('./Rectangle'),Point:require('./Point'),PointCollection:require('./PointCollection'),LogItemEventArgs:require('./LogItemEventArgs'),MouseEventArgs:require('./MouseEventArgs'),PointEventArgs:require('./PointEventArgs'),CommentEventArgs:require('./CommentEventArgs'),TextSelectedEventArgs:require('./TextSelectedEventArgs'),HighLightType:require('./HighlightType'),LineStyle:require('./LineStyle'),LineHeadType:require('./LineHeadType'),CalloutType:require('./CalloutType'),FontStyle:require('./FontStyle'),HorizontalAlignment:require('./HorizontalAlignment'),VerticalAlignment:require('./VerticalAlignment'),Orientation:require('./Orientation'),MarkHandleMode:require('./MarkHandleMode'),MarkInteractionMode:require('./MarkInteractionMode'),MarkType:require('./MarkType'),MarkEventArgs:require('./MarkEventArgs'),MarkCollection:require('./MarkCollection'),Mark:require('./Mark'),Comment:require('./Comment'),Conversation:require('./Conversation'),Data:require('./Data'),aag:require('./highlightItem')};At.registerNamespace('IPCC.Web.UI');module.exports=Vs;},{"./../../Type":56,"./ArtPage":65,"./CalloutType":66,"./Comment":67,"./CommentEventArgs":68,"./Conversation":69,"./Data":70,"./DebugErrorLevel":71,"./DebugItemCause":72,"./DomEvent":73,"./FitType":74,"./FontStyle":75,"./HighlightType":76,"./HorizontalAlignment":77,"./ImGearArtDataServices":78,"./ImGearDocument":79,"./ImGearDocumentCollection":80,"./ImGearDocumentCreateArgs":81,"./ImGearDocumentEventArgs":82,"./ImGearDocumentHyperlink":83,"./ImGearEventHandlerList":84,"./ImGearExceptions":85,"./ImGearHyperlinkCollection":86,"./ImGearHyperlinkPage":87,"./ImGearPage":88,"./ImGearPageCollection":89,"./ImGearPageCountStatus":90,"./ImGearPageCreateArgs":91,"./ImGearPageEventArgs":92,"./ImGearPageOpenFailedEventArgs":93,"./ImGearTextCharacter":94,"./ImGearTextCharacterCollection":95,"./ImGearTextPage":96,"./ImGearTextSection":97,"./ImGearTextSectionCollection":98,"./Key":99,"./LineHeadType":100,"./LineStyle":101,"./LogItemEventArgs":102,"./Mark":103,"./MarkCollection":104,"./MarkEventArgs":105,"./MarkHandleMode":106,"./MarkInteractionMode":107,"./MarkType":108,"./MouseButton":109,"./MouseEventArgs":110,"./MouseTool":111,"./Orientation":112,"./PageView":113,"./PageViewState":114,"./Point":115,"./PointCollection":116,"./PointEventArgs":117,"./Rectangle":118,"./ScrollBars":119,"./TextSelectedEventArgs":120,"./VerticalAlignment":122,"./highlightItem":123}],122:[function(require,module,exports){var ec=require('../../IPCC.Util').regEnum;var Qe=function(){};Qe.registerEnum=ec;Qe.prototype={Top:0,Center:1,Bottom:2};Qe.registerEnum('IPCC.Web.UI.VerticalAlignment',false);module.exports=Qe;},{"../../IPCC.Util":28}],123:[function(require,module,exports){var aag=function(){this.hl=undefined;this.dR=[];this.au={};};module.exports=aag;},{}],124:[function(require,module,exports){var Vs=require('././UI/UI');var F=require('./../IPCC.Util');var Bu=require('./Cipher');var asY=require('./Hash');var hG=require('./Codec');var DV=require('./Mode');var hC={};hC.aGf=[];hC.yB=function(bv){return!isNaN(bv-0)&&bv!==null;};hC.xm=function(rs,co){return IPCC.Web.agi(false,arguments);};hC.alK=function(rs,co){return IPCC.Web.agi(true,arguments);};hC.agi=function(useLocale,co){var aj='';var rs=co[0];for(var h=0;;){var eg=rs.indexOf('{',h);var mB=rs.indexOf('}',h);if((eg<0)&&(mB<0)){aj+=rs.slice(h);break;}if((mB>0)&&((mB<eg)||(eg<0))){if(rs.charAt(close+1)!=='}'){throw new IPCC.Web.UI.ImGearArgumentException('format','The format string contains an unmatched opening or closing brace.');}aj+=rs.slice(h,mB+1);h=mB+2;continue;}aj+=rs.slice(h,eg);h=eg+1;if(rs.charAt(h)==='{'){aj+='{';h++;continue;}if(mB<0){throw new IPCC.Web.UI.ImGearArgumentException('format','The format string contains an unmatched opening or closing brace.');}var MI=rs.substring(h,mB);var RA=MI.indexOf(':');var ams=parseInt((RA<0)?MI:MI.substring(0,RA),10)+1;if(isNaN(ams)){throw new IPCC.Web.UI.ImGearArgumentException('format','The format string is invalid.');}var Yw=(RA<0)?'':MI.substring(RA+1);var sY=co[ams];if(typeof(sY)==="undefined"||sY===null){sY='';}if(sY.toFormattedString){aj+=sY.toFormattedString(Yw);}else if(useLocale&&sY.alK){aj+=sY.alK(Yw);}else if(sY.format){aj+=sY.format(Yw);}else{aj+=sY.toString();}h=mB+1;}return aj;};hC.aIm=function(yZ){var rn=yZ.length;var xY=Math.ceil(rn/4),LK;var fm=[];fm.length=xY;for(var lw=0,hH=0;lw<xY;lw++,hH+=4){fm[lw]=((yZ[hH]&0xff)<<24)+((yZ[hH+1]&0xff)<<16)+((yZ[hH+2]&0xff)<<8)+(yZ[hH+3]&0xff);}if(hH<rn){LK[lw]=0;for(var ws=0;hH<rn;hH++,ws++){LK[lw]+=(yZ[hH++]&0xff)<<(3-ws);}}return fm;};hC.aob=function(aD){var rn=aD.length;var xY=Math.ceil(rn/4);var fm=[];fm.length=xY;for(var lw=0,hH=0;lw<xY;lw++,hH+=4){fm[lw]=((aD.charCodeAt(hH)&0xff)<<24)+((aD.charCodeAt(hH+1)&0xff)<<16)+((aD.charCodeAt(hH+2)&0xff)<<8)+((aD.charCodeAt(hH+3)&0xff));}if(hH<rn){fm[lw]=0;for(var ws=0;hH<rn;hH++,ws++){fm[lw]+=(aD.charCodeAt(hH++)&0xff)<<(3-ws);}}return fm;};hC.aGR=function(zB){var Dz=new Uint8Array(zB);var rn=Dz.length;var xY=Math.ceil(rn/4),LK;var fm=[];fm.length=xY;for(var lw=0,hH=0;lw<xY;lw++,hH+=4){fm[lw]=(Dz[hH]<<24)+(Dz[hH+1]<<16)+(Dz[hH+2]<<8)+Dz[hH+3];}if(hH<rn){fm[lw]=0;for(var ws=0;hH<rn;hH++,ws++){LK[lw]+=Dz[hH++]<<(3-ws);}}return fm;};hC.JN=function(fm,gl){var bf=[0x116D0662,0xA8BB5E38,0x4D7F93C8,0xA61D2F6B,0xADB1384D,0x3D4AC7FB,0x4E6EB64E,0x6F4D7E8F];return IPCC.Web.DP(fm,bf,gl);};hC.DP=function(fm,bf,gl){try{var atQ=new IPCC.Web.Bu.amM(bf);var cJ=IPCC.Web.DV.aAg.ZH(atQ,fm,gl);return cJ;}catch(bU){return;}};hC.Kw=function(Jg){return IPCC.Web.aob(Jg.responseText);};hC.Nc=function(){var Bo=new Date();var aDs=new Date(Bo.getYear(),Bo.getMonth(),Bo.getDate(),Bo.getHours(),Bo.getMinutes(),Bo.getSeconds());return(+aDs);};hC.iG=function(cP,elt){var len=cP.length>>>0;var from=Number(arguments[2])||0;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len;}for(;from<len;from++){if(from in cP&&cP[from]===elt){return from;}}return-1;};hC.atF=function aHB(){var jN=0xefc8249d;var si=function(cJ){cJ=cJ.toString();for(var h=0;h<cJ.length;h++){jN+=cJ.charCodeAt(h);var eW=0.02519603282416938*jN;jN=eW>>>0;eW-=jN;eW*=jN;jN=eW>>>0;eW-=jN;jN+=eW*0x100000000;}return(jN>>>0)*2.3283064365386963e-10;};si.xR='Mash 0.9';return si;};hC.alU=function aGO(){return(function(co){var Bf=0;var CQ=0;var xu=0;var fc=1;if(co.length===0){co=[+new Date()];}var si=IPCC.Web.atF();Bf=si(' ');CQ=si(' ');xu=si(' ');for(var h=0;h<co.length;h++){Bf-=si(co[h]);if(Bf<0){Bf+=1;}CQ-=si(co[h]);if(CQ<0){CQ+=1;}xu-=si(co[h]);if(xu<0){xu+=1;}}si=null;var yc=function(){var pQ=2091639*Bf+fc*2.3283064365386963e-10;Bf=CQ;CQ=xu;xu=pQ-(fc=pQ|0);return xu;};yc.aer=function(){return yc()*0x100000000;};yc.aHN=function(){return yc()+(yc()*0x200000|0)*1.1102230246251565e-16;};yc.xR='Alea 0.9';yc.co=co;return yc;}(Array.prototype.slice.call(arguments)));};hC.nL=function(){if(this.aaW===undefined){var AD=document.createElement("div");AD.style.overflow='scroll';AD.style.position='absolute';AD.style.top='-9999px';document.body.appendChild(AD);this.aaW=AD.offsetWidth-AD.clientWidth;document.body.removeChild(AD);}return this.aaW;};hC.JR={aep:function(gN){var Kv=[];var ZN=IPCC.Web.alU().aer;for(var h=0;h<gN;h++){Kv.push(ZN());}return Kv;},VZ:function(gN,er){var Kv=[];var ZN=IPCC.Web.alU(er).aer;for(var h=0;h<gN;h++){Kv.push(ZN());}return Kv;},aGr:function(gl,aGo){var gN,jA=true,eJ="",JB,Vg,Yy,OI,QL,aky;for(gN=0;gN<4;gN++){if(!jA){eJ+='-';}else{jA=false;}QL=0;for(JB=0;JB<4;JB++){OI=gN*32+JB*8;Vg=IPCC.Web.gT.XP(gl,OI,4);eJ+=Vg.toString(16).toUpperCase();Yy=IPCC.Web.gT.XP(gl,OI+4,4);eJ+=Yy.toString(16).toUpperCase();aky=(Vg*16+Yy+IPCC.Web.gT.XP(IPCC.Web.bf,OI,8))%256;QL=QL|(aky<<(24-(JB*8)));}aGo.aGf[gN]=QL;}return eJ;}};hC.bf=[0x4B1C9AAE,0x25AE1AB6,0x48E3F1C8,0x8D61FC1A];hC.gT={VD:function(cW,uK,afH){cW=IPCC.Web.gT.abQ(cW.slice(uK/32),32-(uK&31)).slice(1);return(afH===undefined)?cW:IPCC.Web.gT.MR(cW,afH-uK);},XP:function(cW,uK,Uu){var bv,YP=Math.floor((-uK-Uu)&31);if((uK+Uu-1^uK)& -32){bv=(cW[uK/32|0]<<(32-YP))^(cW[uK/32+1|0]>>>YP);}else{bv=cW[uK/32|0]>>>YP;}return bv&((1<<Uu)-1);},YH:function(AP,xc){if(AP.length===0||xc.length===0){return AP.concat(xc);}var hW=AP[AP.length-1],sk=IPCC.Web.gT.Uw(hW);if(sk===32){return AP.concat(xc);}else{return IPCC.Web.gT.abQ(xc,sk,hW|0,AP.slice(0,AP.length-1));}},ub:function(cW){var qb=cW.length,bv;if(qb===0){return 0;}bv=cW[qb-1];return(qb-1)*32+IPCC.Web.gT.Uw(bv);},MR:function(cW,ci){if(cW.length*32<ci){return cW;}cW=cW.slice(0,Math.ceil(ci/32));var qb=cW.length;ci=ci&31;if(qb>0&&ci){cW[qb-1]=IPCC.Web.gT.Gs(ci,cW[qb-1]&0x80000000>>(ci-1),1);}return cW;},Gs:function(ci,bv,ed){if(ci===32){return bv;}return(ed?bv|0:bv<<(32-ci))+ci*0x10000000000;},Uw:function(bv){return Math.round(bv/0x10000000000)||32;},axq:function(cW,eS){if(IPCC.Web.gT.ub(cW)!==IPCC.Web.gT.ub(eS)){return false;}var bv=0,h;for(h=0;h<cW.length;h++){bv|=cW[h]^eS[h];}return(bv===0);},abQ:function(cW,sk,IQ,eJ){var h,amA=0,Zk;if(eJ===undefined){eJ=[];}for(;sk>=32;sk-=32){eJ.push(IQ);IQ=0;}if(sk===0){return eJ.concat(cW);}for(h=0;h<cW.length;h++){eJ.push(IQ|cW[h]>>>sk);IQ=cW[h]<<(32-sk);}amA=cW.length?cW[cW.length-1]:0;Zk=IPCC.Web.gT.Uw(amA);eJ.push(IPCC.Web.gT.Gs(sk+Zk&31,(sk+Zk>32)?IQ:eJ.pop(),1));return eJ;},akj:function(bv,cA){return[bv[0]^cA[0],bv[1]^cA[1],bv[2]^cA[2],bv[3]^cA[3]];}};hC.Bu=Bu;hC.qR=asY;hC.hG=hG;hC.DV=DV;hC.agu=F.agu;hC.UI=Vs;hC.regEnum=F.regEnum;hC.regClass=F.regClass;module.exports=hC;},{"./../IPCC.Util":28,"././UI/UI":121,"./Cipher":61,"./Codec":62,"./Hash":63,"./Mode":64}],125:[function(require,module,exports){var ZS=function ImageGearIndexOf(array,item,start){if(typeof(item)==="undefined"){return-1;}var length=array.length;if(length!==0){start=start-0;if(isNaN(start)){start=0;}else{if(isFinite(start)){start=start-(start%1);}if(start<0){start=Math.max(0,length+start);}}for(var i=start;i<length;i++){if((typeof(array[i])!=="undefined")&&(array[i]===item)){return i;}}}return-1;};module.exports=ZS;},{}],126:[function(require,module,exports){var atv=function(Jt,bB){var PF=new IPCC.PageList(Jt);if(bB){IPCC.KR(PF,bB);}PF.vS(Jt);PF.initialize();return PF;};module.exports=atv;},{}],127:[function(require,module,exports){var avQ=function(Jt,UG){var pU=UG.handleTouchEvents!==false;var Rq=new IPCC.Web.UI.PageView(Jt,pU);if(UG){IPCC.KR(Rq,UG);}Rq.vS(Jt);Rq.initialize();return Rq;};module.exports=avQ;},{}],128:[function(require,module,exports){var qe={zoomInMenuItem:"Zoom In 25%",zoomOutMenuItem:"Zoom Out 25%",fullImageMenuItem:"Full Image",fullWidthMenuItem:"Full Width",fullHeightMenuItem:"Full Height",oneToOneRatioMenuItem:"1 to 1 Ratio",actualSizeMenuItem:"Actual Size",rotateRightMenuItem:"Rotate Clockwise",rotateLeftMenuItem:"Rotate Counter-Clockwise",mirrorHorizontalMenuItem:"Mirror Horizontal",mirrorVerticalMenuItem:"Mirror Vertical",panToolMenuItem:"Pan Tool",areaSelectionToolMenuItem:"Area Selection Tool",zoomRectangleToolMenuItem:"Zoom Rectangle Tool",flyingMagnifierToolMenuItem:"Flying Magnifier Tool",createTextMarkToolMenuItem:"Create Text Mark",createLineMarkToolMenuItem:"Create Line Mark",createPolygonMarkToolMenuItem:"Create Polygon Mark",createPolylineMarkToolMenuItem:"Create Polyline Mark",createRectangleMarkToolMenuItem:"Create Rectangle Mark",createEllipseMarkToolMenuItem:"Create Ellipse Mark",createFreehandMarkToolMenuItem:"Create Freehand Mark",editMarksToolMenuItem:"Edit Marks",runMarksToolMenuItem:"Run Marks",createStampMarkToolMenuItem:"Create Stamp Mark",createHighlightMarkToolMenuItem:"Create Highlight Mark",thicknessMenu:{item1:"1",item2:"2",item3:"3",item4:"4",item5:"5",item6:"6",item7:"7",item8:"8"},opacityMenu:{translucent:"Translucent (127)",opaque:"Opaque (255)"},calloutTypeMenu:{line:"Line",triangle:"Triangle"},borderThicknessMenuItem:"Border Thickness",borderColorMenuItem:"Border Color...",fillColorMenuItem:"Fill Color...",lineThicknessMenuItem:"Thickness",lineColorMenuItem:"Color...",fontMenuItem:"Font...",opacityMenuItem:"Opacity",calloutTypeMenuItem:"Callout Type",calloutVisibleMenuItem:"Callout Visible",moveToBackMenuItem:"Move to Back",moveBackwardMenuItem:"Move Backward",moveForwardMenuItem:"Move Forward",moveToFrontMenuItem:"Move to Front",deleteMarkMenuItem:"Delete Mark",zoomToFitMenuItem:"Zoom to Fit",orientationMenuItem:"Orientation",mouseToolsMenuItem:"Mouse Tools",rectangleMarkPropertiesMenuItem:"Properties",textMarkPropertiesMenuItem:"Properties",polygonMarkPropertiesMenuItem:"Properties",polylineMarkPropertiesMenuItem:"Properties",lineMarkPropertiesMenuItem:"Properties",markOrderingMenuItem:"Ordering",stampMarkPropertiesMenuItem:"Properties",selectColor:"Select Color",selectFont:"Select Font",ok:"OK",cancel:"CANCEL",red:"Red",green:"Green",blue:"Blue",font:"Font",size:"Size",italic:"Italic",bold:"Bold",underline:"Underline",strikeout:"Strikeout"};module.exports=qe;},{}],129:[function(require,module,exports){var KR=function(da,kV){var mz;for(var an in kV){if(kV.hasOwnProperty(an)){var bH=kV[an];var aud=da["get_"+an];var acK=da["set_"+an];if(typeof(acK)==='function'){acK.apply(da,[bH]);}else if(bH instanceof Array){mz=aud.apply(da);if(!(mz instanceof Array)){throw new new IPCC.Web.UI.ImGearInvalidOperationException(an+" is not an Array property");}for(var h=0,bz=mz.length,qb=bH.length;h<qb;h++,bz++){mz[bz]=bH[h];}}}}};module.exports=KR;},{}],130:[function(require,module,exports){"use strict";var amQ=function(ac){if(ac instanceof PCCViewer.AjaxResponse){return ac;}else if(!(this instanceof PCCViewer.AjaxResponse)){return new PCCViewer.AjaxResponse(ac);}this.nK=new IPCC.F.nK(ac);this.status=this.nK.status;this.statusText=this.nK.statusText;this.responseText=this.nK.responseText;if(typeof this.nK.responseBody!=='undefined'){this.responseBody=this.nK.responseBody;}return this;};amQ.prototype.getResponseHeader=function(EA){return this.nK.getResponseHeader(EA);};var Ds=(function(){function asE(){return IPCC.F.extend({},IPCC.F.me.iu);};function aCS(iu){if(!(typeof iu==='undefined'||(typeof iu==='object'&&iu!==null&& !(iu instanceof Array)))){throw new Error('Headers should be an object or undefined.');}if(typeof iu==='object'){var avm=Object.keys(IPCC.F.aew());Object.keys(iu).forEach(function(EA){if(avm.indexOf(EA)!== -1){throw new Error('Cannot overwrite the header "'+EA+'".');}});}IPCC.F.me.iu=IPCC.F.extend({},iu);return PCCViewer.Ajax;};function apm(){return IPCC.F.me.Nm;};function aEn(iT){if(typeof iT!=='undefined'&&typeof iT!=='function'){throw new Error('Method should be a function or undefined.');}IPCC.F.me.Nm=iT;return PCCViewer.Ajax;};function eg(bB){var aa=PCCViewer.Deferred();if(!(typeof bB==='undefined'||(typeof bB==='object'&&bB!==null&& !(bB instanceof Array)))){throw new Error('Options should be an object or undefined.');}function fl(ac){if(!(ac instanceof PCCViewer.AjaxResponse)){ac=new PCCViewer.AjaxResponse(ac);}aa.resolve(ac);};function eG(aj){if(aj.response){aj.response=new PCCViewer.AjaxResponse(aj.response);}aa.reject(aj);};IPCC.F.me.eg(bB).then(fl,eG);return aa.getPromise();};return{getHeaders:asE,setHeaders:aCS,getOverrideMethod:apm,setOverrideMethod:aEn,eg:eg,};})();if(Object.defineProperties){Object.defineProperties(Ds,{"headers":{enumerable:true,get:function(){return Ds.getHeaders();},set:function(iu){return Ds.setHeaders(iu);}},"overrideMethod":{enumerable:true,get:function(){return Ds.getOverrideMethod();},set:function(iT){return Ds.setOverrideMethod(iT);}}});}module.exports={AjaxResponse:amQ,Ajax:Ds};},{}],131:[function(require,module,exports){var BurnRequest=function(bB){this.pe="";this.eQ="";this.lW=0;this.pB="";this.fv="";this.qs=0;this.gd=false;this.qk=0;this.RV="";this.qO=false;this.aa=PCCViewer.Deferred();this.dC=this.aa.getPromise();this.then=this.dC.then;this.bB=bB;this.fv=null;this.ej=undefined;this.rJ=false;this.My=null;PCCViewer.EventEmitter.extend(this);var J=this;if(bB.nD){var nD=new PCCViewer.Error(bB.nD.code,bB.nD.message);delete J.bB.nD;setTimeout(function(){J.trigger(PCCViewer.BurnRequest.EventType.BurnCancelled,{});J.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});J.fv=nD.code;J.aa.reject(nD);},0);}};BurnRequest.EventType={BurnProgress:"BurnProgress",BurnCompleted:"BurnCompleted",BurnFailed:"BurnFailed",BurnCancelled:"BurnCancelled",BurnWorkerCreated:"BurnWorkerCreated"};BurnRequest.prototype.cancel=function(){var J=this;this.qO=true;this.fv="User Cancelled";setTimeout(function(){J.trigger(PCCViewer.BurnRequest.EventType.BurnCancelled,{});J.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});J.aa.reject(new PCCViewer.Error("UserCancelled","User Cancelled"));},0);return this;};BurnRequest.prototype.getProgress=function(){return this.lW;};BurnRequest.prototype.getWorkerID=function(){return this.pe;};BurnRequest.prototype.getOptions=function(){return this.bB;};BurnRequest.prototype.getErrorCode=function(){return this.fv;};BurnRequest.prototype.getBurnedDocumentDownloadURL=function(){return this.My;};BurnRequest.prototype.aoJ=function(hV){this.RV=hV;};BurnRequest.prototype.LA=function(ej){this.ej=ej;};BurnRequest.prototype.ZG=function(){var J=this;this.fv="Failure to generate Markup XML";setTimeout(function(){J.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});J.aa.reject(new PCCViewer.Error("MarkupXMLFail",J.fv));},0);return this;};BurnRequest.prototype.Bl=function(){function fl(ac){var fV,aj;try{fV=ac.responseText;if(!fV){setTimeout(function(){J.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});J.aa.reject(new PCCViewer.Error("ResponseEmpty","Empty/invalid response from the server"));},0);J.rJ=true;return;}else{aj=JSON.parse(fV);setTimeout(function(){aAV(aj);},0);}}catch(e){setTimeout(function(){J.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});J.aa.reject(new PCCViewer.Error("BurnFailErrorCode","Burn process failed, error: "+e.message));},0);J.rJ=true;return;}};function eG(aj){J.gd=false;var cI=aj.response.status+" "+aj.response.statusText;setTimeout(function(){J.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});J.aa.reject(new PCCViewer.Error("StatusCode","Status Code "+cI));},0);J.rJ=true;return;};try{if(!this.RV){throw new Error("XMl Markup data for burn is missing");}var J=this;var afm=function(){var WU;if(!(/^[\x00-\x7F]*$/.test(J.ej.bi.get_documentIdentifier()))){WU=J.ej.bB.imageHandlerUrl+'/ViewingSession/e'+J.ej.bB.documentID+'/MarkupBurner/'+J.pe;}else{WU=J.ej.bB.imageHandlerUrl+'/ViewingSession/u'+encodeURIComponent(J.ej.bB.documentID)+'/MarkupBurner/'+J.pe;}PCCViewer.Ajax.eg({method:'GET',url:WU,headers:{'Content-Type':'application/json'}}).then(fl,eG);};var aAV=function(hD){if(hD){if(J.qO===true){J.gd=false;return;}if(hD.percentComplete>=0&&J.gd===true){if(hD.percentComplete===100&&hD.state==='complete'){if(hD.processId){J.gd=false;J.pe=hD.processId;J.eQ=hD.state;J.qs+=1;J.qk=1000;J.lW= +(hD.percentComplete);var HB;if(!(/^[\x00-\x7F]*$/.test(J.ej.bi.get_documentIdentifier()))){HB=J.ej.bB.imageHandlerUrl+'/ViewingSession/e'+J.ej.bB.documentID+'/MarkupBurner/'+J.pe+"/Document";}else{HB=J.ej.bB.imageHandlerUrl+'/ViewingSession/u'+encodeURIComponent(J.ej.bB.documentID)+'/MarkupBurner/'+J.pe+"/Document";}if(J.bB.filename){HB+="?ContentDispositionFilename="+J.bB.filename;}J.My=HB;J.rJ=true;var azd= +(hD.percentComplete);setTimeout(function(){J.trigger(PCCViewer.BurnRequest.EventType.BurnCompleted,{});J.trigger(PCCViewer.BurnRequest.EventType.BurnProgress,{progress:azd});J.aa.resolve(HB);},10);return;}}else{if(hD.state==='error'){J.gd=false;J.fv=hD.errorCode;setTimeout(function(){J.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});J.aa.reject(new PCCViewer.Error("BurnFailError","BurnProcess failed, errorCode: "+J.fv));},0);J.gd=false;J.rJ=true;return;}if(hD.processId){var TA= +(hD.percentComplete);if(J.lW!==TA){setTimeout(function(){J.trigger(PCCViewer.BurnRequest.EventType.BurnProgress,{progress:TA});},10);}if(!J.pe){J.pe=hD.processId;setTimeout(function(){J.trigger(PCCViewer.BurnRequest.EventType.BurnWorkerCreated,{});},0);J.eQ=hD.state;J.qs=1;J.gd=true;J.qk=1000;J.lW= +(hD.percentComplete);}if(hD.percentComplete<100){if(J.qs>1){J.qk+=1000;}J.qs+=1;J.eQ=hD.state;J.lW= +(hD.percentComplete);if(J.gd===true&&J.qO===false&&J.rJ===false){setTimeout(afm,J.qk);}}}}}else{if(J.rJ===false){var VM=false;if(J.gd===false){if(hD.state==='complete'){if(!J.My){VM=true;}else{J.rJ=true;setTimeout(function(){J.trigger(PCCViewer.BurnRequest.EventType.BurnCompleted,{});J.aa.resolve(J.My);},10);return;}}if(hD.state==='processing'&&hD.errorCode===null){if(hD.percentComplete>=0&&hD.percentComplete<100){if(J.qs>1){J.qk+=1000;}J.qs+=1;J.gd=true;J.eQ=hD.state;J.lW= +(hD.percentComplete);if(J.gd===true&&J.qO===false){setTimeout(afm,J.qk);}}else{VM=true;}}if(hD.state==='error'||VM===true){J.gd=false;J.fv=hD.errorCode;setTimeout(function(){J.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});J.aa.reject(new PCCViewer.Error("BurnFailError","BurnProcess failed, errorCode: "+hD.errorCode));},0);J.gd=false;J.rJ=true;return;}}}}}};var bQ;if(!(/^[\x00-\x7F]*$/.test(J.ej.bi.get_documentIdentifier()))){bQ=J.ej.bB.imageHandlerUrl+'/ViewingSession/e'+J.ej.bB.documentID+'/MarkupBurner';}else{bQ=J.ej.bB.imageHandlerUrl+'/ViewingSession/u'+encodeURIComponent(J.ej.bB.documentID)+'/MarkupBurner';}if(J.bB.removeFormFields){bQ+='?RemoveFormFields=acroform';}PCCViewer.Ajax.eg({method:'POST',url:bQ,headers:{'Content-Type':'application/xml;charset=utf-8'},body:J.RV}).then(fl,eG);J.gd=true;}catch(e){this.gd=false;var az=this,kS=e.message;setTimeout(function(){az.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});az.aa.reject(new PCCViewer.Error("BurnFailErrorCode","The burn process failed, error: "+kS));},0);this.rJ=true;}};if(Object.defineProperties){Object.defineProperties(BurnRequest.prototype,{"options":{enumerable:true,get:function(){return this.getOptions();}},"progress":{enumerable:true,get:function(){return this.getProgress();}},"workerID":{enumerable:true,get:function(){return this.getWorkerID();}},"errorCode":{enumerable:true,get:function(){return this.getErrorCode();}},"burnedDocumentDownloadURL":{enumerable:true,get:function(){return this.getBurnedDocumentDownloadURL();}}});}module.exports=BurnRequest;},{}],132:[function(require,module,exports){function aoZ(bi,ae){var aO=bi.cQ.jF(ae);var fg=aO.cd();return fg.Be();};function amJ(bi,ae){var aO=bi.cQ.jF(ae);var fg=aO.cd();var Jp=fg.hB();return Jp.atq();};function aps(yP,aAj){var ci=yP.length;if(ci===0){return false;}if(ci!==aAj){return false;}for(var h=0;h<ci;h++){if(yP[h]!==true){return false;}}return true;};var Rr=function(){var J=this;this.IU=false;this.yP=[];this.ti=[];this.yg=[];this.acX=0;this.aU=0;this.iO=false;function sq(Ix,UD){switch(Ix){case 'failed':setTimeout(function(){J.ax.trigger('SearchFailed',UD);},10);break;case 'complete':J.ax.fh=J.ti;J.ax.TY=J.yg;J.ax.uj=true;setTimeout(function(){J.ax.trigger('SearchResultsAvailable',{completedSearchResults:(J.ti)});},10);break;case 'cancelled':break;}setTimeout(function(){J.ax.trigger('SearchCompleted',{completedSearchResults:(J.ti)});},10);};function azD(){J.ax.cF='Unable to communicate with server, please retry loading the document.';J.ax.fv='1011';J.ax.uj=true;sq('failed',{errorMessage:('Unable to communicate with server, please retry loading the document.')});J.iO=true;};function age(bB,aCI){var aBr=IPCC.F.trim(bB.type||'').toLowerCase();var aj;switch(aBr){case 'taskresult':aj=new PCCViewer.SearchTaskResult();break;default:aj=new PCCViewer.SearchResult();break;}IPCC.F.extend(aj,aCI);var aeG=aj.rC+aj.text.length-1;var du=PCCViewer.Iw.formatter.getContext({text:bB.searchText,startIndex:aj.rC,endIndex:aeG,padding:aj.bb.contextPadding});aj.du=du.context;aj.AQ=du.startIndex;if(bB.rectangles){var adb={rectangles:bB.rectangles,startIndex:aj.rC,endIndex:aeG};aj.nz=PCCViewer.Iw.formatter.getBoundingRectangle(adb);aj.aA=PCCViewer.Iw.formatter.getLineRectangles(adb);}return aj;};function alP(ox,yt,Gz,hy,gx){var HW=[];var Zu= !hy;var xq=yt.distance;var zs=[];IPCC.F.forEach(yt.df,function(df){zs.push(df.searchTerm);});var azO=PCCViewer.Iw.proximity.getResults(Gz,zs,xq);IPCC.F.forEach(azO,function(aj){var eC=age({type:Zu?'TaskResult':'Result',searchText:Gz,rectangles:hy},{gx:gx,bb:yt.wI,ox:ox,ra:yt.highlightColor,rC:aj.startIndex,aD:aj.text});HW.push(eC);});return HW;};function MJ(ox,df,Gz,hy,gx){var Zu= !hy;var HW=[];var Mi=[df.searchTerm];var fh=PCCViewer.Iw.regex.getResults(Gz,Mi);IPCC.F.forEach(fh,function(aj){if(df.wI.matchingOptions.wildcard&&(aj.text[0]===" "||aj.text[0]==="\n")){aj.text=aj.text.substring(1);aj.startIndex+=1;}var eC=age({type:Zu?'TaskResult':'Result',searchText:Gz,rectangles:hy},{gx:gx,ox:ox,df:df,bb:df.wI,rC:aj.startIndex,aD:aj.text,ra:df.highlightColor});HW.push(eC);});return HW;};function anv(abY,ae,bi,hy){var Tk=[];var ox=Date.now();IPCC.F.forEach(J.df,function(df,h){var fh;var pa=IPCC.F.Og(df.type);var aO=bi.cQ.jF(ae);var gx={width:aO.ki(),height:aO.jE()};switch(pa){case 'proximity':fh=alP(ox,df,abY,hy,gx);break;default:fh=MJ(ox,df,abY,hy,gx);break;}IPCC.F.forEach(fh,function(aj){aj.dJ=J.aU;aj.ak=ae+1;aj.FY=bi.get_documentIdentifier();J.ti[J.aU]=aj;J.aU++;Tk.push(aj);});});J.ax.fh=J.ti;if(Tk.length){setTimeout(function(){J.ax.trigger('PartialSearchResultsAvailable',{partialSearchResults:(Tk),pagesWithoutText:(J.yg)});},10);}};function anL(aD){var ox=Date.now();IPCC.F.forEach(J.df,function(df,h){var pa=IPCC.F.Og(df.type);var fh;switch(pa){case 'proximity':fh=alP(ox,df,aD);break;default:fh=MJ(ox,df,aD);break;}IPCC.F.forEach(fh,function(aj){aj.dJ=J.aU;J.ti[J.aU]=aj;J.aU++;});});J.ax.fh=J.ti;};function aeC(zK,bi){for(var h=0;h<zK.length;h++){if(J.yP[zK[h]]===false){J.yP[zK[h]]=true;var aD=aoZ(bi,zK[h]);var hy=amJ(bi,zK[h]);if(!aD&&aD!==null){J.yg[J.acX]=zK[h];J.acX++;continue;}anv(aD,zK[h],bi,hy);if(J.ax.qO){if(J.IU){sq('cancelled');J.IU=false;bi.remove_textPagesReceived(Pl);return;}break;}}}if(aps(J.yP,bi.fG)&& !J.ax.uj){sq('complete');J.IU=false;bi.remove_textPagesReceived(Pl);}};function Pl(sender,V){if(V.error=== -1){azD();return J.ax;}try{if(J.iO===false){aeC(V.textPagesReceived,sender);}}catch(e){J.ax.cF=e.message;J.ax.fv='1010';J.ax.uj=true;sq('failed',{errorMessage:(e.message)});J.iO=true;return J.ax;}};this.WC=function(bi,df,dY,ax){J.df=df;J.ax=ax;J.ax.dY=dY;J.ax.on('SearchCancelled',function(){sq('cancelled');J.IU=false;bi.remove_textPagesReceived(Pl);});for(var h=0;h<bi.fG;h++){J.yP[h]=false;}if(bi.aiO().eF()>bi.get_numberOfPagesWithText()){J.IU=true;bi.add_textPagesReceived(Pl);}if(bi.get_numberOfPagesWithText()>0){aeC(bi.get_pagesWithText(),bi);}return J.ax;};this.ayI=function(aD){this.ax=new PCCViewer.SearchRequest();try{anL(aD);}catch(e){J.ax.cF=e.message;J.ax.fv='1010';return;}};};module.exports=Rr;},{}],133:[function(require,module,exports){var Comment=function Comment(comment,conversation){if(!(comment instanceof IPCC.Web.UI.Comment)&&(typeof comment!=='string')){throw new Error(comment+' is not a string.');}if(!(conversation instanceof PCCViewer.Conversation)){throw new Error(conversation+' is not a PCCViewer.Conversation object.');}this.getConversation=function aFU(){return conversation;};if(typeof comment==='string'){this.ob=new IPCC.Web.UI.Comment(comment);}else{this.ob=comment;}this.ob.Kx=this;this.cJ=this.ob.get_data();PCCViewer.Data.extend(this);this.Ez=new IPCC.Web.UI.Data();PCCViewer.SessionData.extend(this);};Comment.prototype.getMarkupLayer=function aEQ(){return this.hZ;};Comment.prototype.getText=function aIk(){return this.ob.get_text();};Comment.prototype.setText=function aIx(text){if(typeof text!=='string'){throw new Error(text+' is not a string.');}this.ob.set_text(text);return this;};Comment.prototype.getCreationTime=function aGc(){var awH=IPCC.F.Fh(this.ob.get_creationTime());return new Date(awH);};Comment.prototype.setCreationTime=function aHe(time){function als(){throw new Error(time+' is not a valid string or Date object.');};if(typeof time==='string'){var ajl=IPCC.F.Fh(time);if(ajl instanceof Error){als();}time=new Date(ajl);}if(!(time instanceof Date)){als();}this.ob.set_creationTime(IPCC.F.tZ(time));return this;};if(Object.defineProperties){Object.defineProperties(Comment.prototype,{"text":{enumerable:true,get:function(){return this.getText();},set:function(text){return this.setText(text);}},"creationTime":{enumerable:true,get:function(){return this.getCreationTime();},set:function(time){return this.setCreationTime(time);}}});}var Conversation=function Conversation(mark){if(!(mark instanceof PCCViewer.Mark)){throw new Error(mark+' is not a PCCViewer.Mark object.');}this.getMark=function Sc(){return mark;};this.hO=new PCCViewer.ObservableCollection();if(typeof mark.C!=="undefined"){this.yz=mark.C.get_conversation();this.yz.forEach(function(ob){var cf=new PCCViewer.Comment(ob,this);this.hO.add(cf);},this);}else{this.yz=new IPCC.Web.UI.Conversation();}this.cJ=this.yz.get_data();PCCViewer.Data.extend(this);this.Ez=new IPCC.Web.UI.Data();PCCViewer.SessionData.extend(this);};Conversation.prototype.addComment=function EW(commentText){var cf=new PCCViewer.Comment(commentText,this);this.hO.add(cf);this.yz.addComment(cf.ob);return cf;};Conversation.prototype.deleteComments=function(comments){var J=this;var agG=this.hO.toArray();var agt=function(cf){for(var i=0,length=agG.length;i<length;i++){if(agG[i]===cf){return true;}}return false;};function alB(cf,aU){throw new Error(cf+((aU!==undefined)?' (Array index '+aU+')':'')+' is not a PCCViewer.Comment object.');};function akI(cf,aU){throw new Error(((aU!==undefined)?' (Array index '+aU+')':'')+' is not part of this Conversation object.');};if(comments instanceof PCCViewer.Comment){if(!agt(comments)){akI(comments);}J.hO.remove(comments);J.yz.removeCommentInstance(comments.ob);}else if(comments instanceof Array){IPCC.F.forEach(comments,function(el,idx){if(!(el instanceof PCCViewer.Comment)){alB(el,idx);}if(!agt(el)){akI(el,idx);}});IPCC.F.forEach(comments,function(el){J.hO.remove(el);J.yz.removeCommentInstance(el.ob);});}else{alB(comments);}return this;};Conversation.prototype.getComments=function(){return this.hO.toArray().sort(function(a,b){return a.getCreationTime().getTime()-b.getCreationTime().getTime();});};Conversation.pJ=function(gf,oU){if(typeof gf.getComments!=="function"||typeof oU.addComment!=="function"){throw new Error("Arguments `_source` and `_destination` must be Conversation objects.");}PCCViewer.Data.oY(gf,oU);var hu=gf.getComments(),i,length=hu.length;for(i=0;i<length;i++){var acR=hu[i];var awE=oU.addComment(acR.getText());PCCViewer.Data.oY(acR,awE);}};module.exports={Conversation:Conversation,Comment:Comment};},{}],134:[function(require,module,exports){var ConversionRequest=function(bB){this.pe="";this.eQ="";this.lW=0;this.fv="";this.gd=false;this.qO=false;this.bB=bB;this.Aq=null;this.CZ=null;this.ej=undefined;this.aa=PCCViewer.Deferred();this.dC=this.aa.getPromise();this.then=this.dC.then;PCCViewer.EventEmitter.extend(this);};ConversionRequest.EventType={ConversionProgress:"ConversionProgress",ConversionCompleted:"ConversionCompleted",ConversionFailed:"ConversionFailed",ConversionCancelled:"ConversionCancelled",ConversionWorkerCreated:"ConversionWorkerCreated"};ConversionRequest.prototype.cancel=function(){var J=this;this.qO=true;this.fv="User Cancelled";setTimeout(function(){J.trigger(PCCViewer.ConversionRequest.EventType.ConversionCancelled,{});J.trigger(PCCViewer.ConversionRequest.EventType.ConversionFailed,{});J.aa.reject(new PCCViewer.Error("UserCancelled","User Cancelled"));},0);return this;};ConversionRequest.prototype.getProgress=function(){return this.lW;};ConversionRequest.prototype.getWorkerID=function(){return this.pe;};ConversionRequest.prototype.getOptions=function(){return this.bB;};ConversionRequest.prototype.getErrorCode=function(){return this.fv;};ConversionRequest.prototype.getConvertedDocumentDownloadURL=function(){return this.Aq;};ConversionRequest.prototype.getConvertedDocumentDownloadURLs=function(){if(this.CZ){return this.CZ.slice();}return null;};ConversionRequest.prototype.LA=function(ej){this.ej=ej;};ConversionRequest.prototype.Bl=function(){var J=this;J.gd=true;J.awz().then(function onResolve(sR){J.pe=sR.processId;J.lW=sR.percentComplete;J.eQ=sR.state;J.trigger(PCCViewer.ConversionRequest.EventType.ConversionWorkerCreated,{});J.aBn(sR).then(function onResolve(aAE){J.gd=false;J.CZ=[];if(J.bB.xR>1){for(var h=0;h<J.aBX;h++){var Aq=J.ej.bB.imageHandlerUrl+'/v2/viewingSessions/'+J.ej.bB.documentID+'/contentConverters/'+J.pe+'/results/'+h+'/file?ContentDispositionFilename='+encodeURIComponent(J.bB.filename);J.CZ.push(Aq);}J.aa.resolve(J.CZ);}else{J.Aq=J.ej.bB.imageHandlerUrl+'/WorkFile/'+aAE+"?ContentDispositionFilename="+encodeURIComponent(J.bB.filename);if(sR.affinityToken){J.Aq+="&affinityToken="+encodeURIComponent(sR.affinityToken);}J.CZ.push(J.Aq);J.aa.resolve(J.Aq);}J.trigger(PCCViewer.ConversionRequest.EventType.ConversionCompleted,{});},function onReject(reason){J.gd=false;J.fv=reason.error.code;J.aa.reject(reason);J.trigger(PCCViewer.ConversionRequest.EventType.ConversionFailed,{});});},function onReject(reason){J.gd=false;J.aa.reject(reason);J.trigger(PCCViewer.ConversionRequest.EventType.ConversionFailed,{});});};ConversionRequest.prototype.awz=function(){var bQ,lb=PCCViewer.Deferred();var WK;if(this.bB.xR>1){bQ=this.ej.bB.imageHandlerUrl+'/v2/viewingSessions/'+this.ej.bB.documentID+'/contentConverters/';WK={url:bQ,method:'POST',headers:{"Content-Type":"application/json"}};}else{bQ=this.ej.bB.imageHandlerUrl+'/contentConverters/';WK={url:bQ,method:'POST',headers:{"Content-Type":"application/json"},body:JSON.stringify({viewingSessionId:this.ej.bB.documentID})};}PCCViewer.Ajax.eg(WK).then(function fl(ac){var aj=JSON.parse(ac.responseText);lb.resolve(aj);},function eG(aj){lb.reject(aj.error);});return lb.getPromise();};ConversionRequest.prototype.aBn=function(sR){var bQ,lb=PCCViewer.Deferred(),J=this,iu;if(J.bB.xR>1){bQ=this.ej.bB.imageHandlerUrl+'/v2/viewingSessions/'+this.ej.bB.documentID+'/contentConverters/'+sR.processId;}else{bQ=this.ej.bB.imageHandlerUrl+'/contentConverters/'+sR.processId;}if(sR.affinityToken){iu={"Accusoft-Affinity-Token":sR.affinityToken};}(function poll(){setTimeout(function(){PCCViewer.Ajax.eg({method:'GET',url:bQ,headers:iu}).then(function fl(ac){var aj=JSON.parse(ac.responseText);J.pe=aj.processId;J.lW=aj.percentComplete;J.eQ=aj.state;if(J.bB.xR>1&&aj.output){J.aBX=aj.output.results.length;}J.trigger(PCCViewer.ConversionRequest.EventType.ConversionProgress,{progress:J.lW});if(aj.percentComplete===100){if(aj.state==="error"){lb.reject({response:ac,error:new PCCViewer.Error("CouldNotConvert","Could not convert document")});}else{lb.resolve(aj.output.results[0].fileId);}}else{poll();}},function eG(aj){lb.reject(aj.error);});},3000);})();return lb.getPromise();};if(Object.defineProperties){Object.defineProperties(ConversionRequest.prototype,{"options":{enumerable:true,get:function(){return this.getOptions();}},"progress":{enumerable:true,get:function(){return this.getProgress();}},"workerID":{enumerable:true,get:function(){return this.getWorkerID();}},"errorCode":{enumerable:true,get:function(){return this.getErrorCode();}},"convertedDocumentDownloadURL":{enumerable:true,get:function(){return this.getConvertedDocumentDownloadURL();}},"convertedDocumentDownloadURLs":{enumerable:true,get:function(){return this.getConvertedDocumentDownloadURLs();}}});}module.exports=ConversionRequest;},{}],135:[function(require,module,exports){"use strict";var Data=(function(){function getData(key){return this.cJ.get_data(key);};function setData(key,value){this.cJ.set_data(key,value);return this;};function getDataKeys(){return this.cJ.get_dataKeys();};return{extend:function(o){o.getData=getData;o.setData=setData;o.getDataKeys=getDataKeys;},oY:function(gf,oU){if(typeof gf.getData!=="function"||typeof gf.setData!=="function"||typeof gf.getDataKeys!=="function"||typeof oU.getData!=="function"||typeof oU.setData!=="function"||typeof oU.getDataKeys!=="function"){throw new Error("Arguments `_source` and `_destination` must be extended with the Data Mixin.");}var mT=gf.getDataKeys(),i,length=mT.length;for(i=0;i<length;i++){var bf=mT[i];oU.setData(bf,gf.getData(bf));}}};})();var SessionData=(function(){function getSessionData(key){return this.Ez.get_data(key);};function setSessionData(key,value){this.Ez.set_data(key,value);return this;};function getSessionDataKeys(){return this.Ez.get_dataKeys();};return{extend:function(o){o.getSessionData=getSessionData;o.setSessionData=setSessionData;o.getSessionDataKeys=getSessionDataKeys;},aGm:function(gf,oU){if(typeof gf.getSessionData!=="function"||typeof gf.setSessionData!=="function"||typeof gf.getSessionDataKeys!=="function"||typeof oU.getSessionData!=="function"||typeof oU.setSessionData!=="function"||typeof oU.getSessionDataKeys!=="function"){throw new Error("Arguments `_source` and `_destination` must be extended with the SessionData Mixin.");}var mT=gf.getSessionDataKeys(),i,length=mT.length;for(i=0;i<length;i++){var bf=mT[i];oU.setSessionData(bf,gf.getSessionData(bf));}}};})();module.exports={SessionData:SessionData,Data:Data};},{}],136:[function(require,module,exports){'use strict';function PromiseDeferred(){this.eQ=PromiseDeferred.States.Pending;this.L=null;this.fj=null;this.hi=[];};PromiseDeferred.prototype.then=function(onFulfilled,onRejected){var AV=new PromiseDeferred();var Wf,Vk;if(onFulfilled&&typeof onFulfilled==='function'){var aDL=function(L){try{var bq=onFulfilled(L);AV.resolve(bq);}catch(e){AV.reject(e);}};Wf=aDL;}else{var aEC=function(L){AV.resolve(L);};Wf=aEC;}if(onRejected&&typeof onRejected==='function'){var aDZ=function(fj){try{var bq=onRejected(fj);Sy(AV,bq);}catch(e){AV.reject(e);}};Vk=aDZ;}else{var aDb=function(fj){AV.reject(fj);};Vk=aDb;}this.hi.push({azP:Wf,aBv:Vk});if(this.eQ===PromiseDeferred.States.Fulfilled){this.ain();}if(this.eQ===PromiseDeferred.States.Rejected){this.aja();}return AV;};PromiseDeferred.prototype.resolve=function(x){if(!this.agh()){return;}Sy(this,x);};PromiseDeferred.prototype.reject=function(reason){if(!this.agh()){return;}this.zv(reason);};PromiseDeferred.prototype.WB=function(bv){this.eQ=PromiseDeferred.States.Fulfilled;this.L=bv;this.ain();};PromiseDeferred.prototype.ain=function(){var callback;while(this.hi.length>0){callback=this.hi.shift().azP;(function(kr,L){setTimeout(function(){kr(L);},0);})(callback,this.L);}};PromiseDeferred.prototype.aja=function(){var callback;while(this.hi.length>0){callback=this.hi.shift().aBv;(function(kr,L){setTimeout(function(){kr(L);},0);})(callback,this.fj);}};function Sy(dC,bv){if(dC===bv){dC.zv(new TypeError("A Promise cannot be resolved with a value that is itself."));return;}if(bv&&bv.Zx&&dC.act&&dC.act===bv){dC.zv(new TypeError("A Promise cannot be resolved with a value that is itself."));return;}if(bv&&bv.Zx&&bv.Zx==="PCCViewer.Promise"){bv.then(function(apV){dC.WB(apV);},function(aqn){dC.zv(aqn);});}else if(bv!==null&&(typeof bv==='object'||typeof bv==='function')){var TQ;try{TQ=bv.then;}catch(e){dC.zv(e);return;}if(typeof TQ==='function'){var Il=true;var apH=function(cA){if(Il){Sy(dC,cA);Il=false;}};var apE=function(bq){if(Il){dC.zv(bq);Il=false;}};try{TQ.call(bv,apH,apE);}catch(e){if(Il){dC.zv(e);}}}else{dC.WB(bv);}}else{dC.WB(bv);}};PromiseDeferred.prototype.zv=function(reason){this.eQ=PromiseDeferred.States.Rejected;this.fj=reason;this.aja();};PromiseDeferred.prototype.agh=function(){return this.eQ===PromiseDeferred.States.Pending;};PromiseDeferred.States={Pending:"Pending",Fulfilled:"Fulfilled",Rejected:"Rejected"};var Deferred=function(){var Zb=new PromiseDeferred();function Promise(dC){this.then=function(onFulfilled,onRejected){return new Promise(dC.then(onFulfilled,onRejected));};this.Zx="PCCViewer.Promise";dC.act=this;};var promise=new Promise(Zb);return{getPromise:function(){return promise;},resolve:function(value){Zb.resolve(value);},reject:function(reason){Zb.reject(reason);}};};var Promise={all:function(promises){var i,aa=new PCCViewer.Deferred(),aae=aa.getPromise();if(Object.prototype.toString.call(promises)!=='[object Array]'){throw new TypeError("The 'promises' argument must be an array.");}function createPushFunction(promise){return function(results){return wrapWithPromise(promise).then(function(value){results.push(value);return results;});};};function wrapWithPromise(value){var aa=new PCCViewer.Deferred();aa.resolve(value);return aa.getPromise();};aa.resolve([]);for(i=0;i<promises.length;i++){aae=aae.then(createPushFunction(promises[i]));}return aae;}};if(typeof exports!=='undefined'&&module.exports){module.exports.Deferred=Deferred;module.exports.Promise=Promise;}},{}],137:[function(require,module,exports){var DocumentHyperlink=function DocumentHyperlink(parameters){this.zi=parameters.zi;this.ak=parameters.ak;};DocumentHyperlink.prototype.getHref=function(){return this.zi.ahN();};DocumentHyperlink.prototype.getPageNumber=function(){return this.ak;};DocumentHyperlink.prototype.getRectangle=function(){return this.zi.cN();};if(Object.defineProperties){Object.defineProperties(DocumentHyperlink.prototype,{"href":{enumerable:true,get:function(){return this.getHref();}},"pageNumber":{enumerable:true,get:function(){return this.getPageNumber();}},"rectangle":{enumerable:true,get:function(){return this.getRectangle();}}});}module.exports=DocumentHyperlink;},{}],138:[function(require,module,exports){var Hu=function(code,message){var amw=Error.call(null,message);this.code=code;function aqT(da,gf){Object.getOwnPropertyNames(gf).forEach(function(propName){Object.defineProperty(da,propName,Object.getOwnPropertyDescriptor(gf,propName));});return da;};function aqo(da,gf){for(var i in gf){if(gf.hasOwnProperty(i)){da[i]=gf[i];}}return da;};if(typeof Object.create==='function'){aqT(this,amw);}else{aqo(this,amw);}};var aDO=(function(){var eY=function(){};return function(aaP){if(arguments.length>1){throw Error('Second argument not supported');}if(typeof aaP!=='object'){throw TypeError('Argument must be an object');}eY.prototype=aaP;var aj=new eY();eY.prototype=null;return aj;};})();if(typeof Object.create==='function'){Hu.prototype=Object.create(Error.prototype);}else{Hu.prototype=aDO(Error.prototype);}Hu.prototype.constructor=Hu;module.exports=Hu;},{}],139:[function(require,module,exports){"use strict";function Event(target,type){this.da=target;this.aT=type;};Event.prototype.getTarget=function(){return this.da;};Event.prototype.getType=function(){return this.aT;};if(Object.defineProperties){Object.defineProperties(Event.prototype,{"target":{enumerable:true,get:function(){return this.getTarget();}},"type":{enumerable:true,get:function(){return this.getType();}}});}module.exports=Event;},{}],140:[function(require,module,exports){var EventEmitter=(function(){function on(eventType,handler){if(!this.kw){this.kw={};}var lowerCaseEventType=eventType.toLowerCase(),handlers=this.kw[lowerCaseEventType];if(!handlers){handlers=this.kw[lowerCaseEventType]=[];}handlers.push(handler);return this;};function off(eventType,handler){if(!this.kw){this.kw={};}var lowerCaseEventType=eventType.toLowerCase(),handlers=this.kw[lowerCaseEventType];if(handlers){var i=handlers.length;for(;i>=0;i--){if(handlers[i]===handler){handlers.splice(i,1);}}}return this;};function trigger(eventType,properties){if(!this.kw){this.kw={};}var lowerCaseEventType=eventType.toLowerCase(),event=new PCCViewer.Event(this,lowerCaseEventType),handlers=this.kw[lowerCaseEventType],i,length=0;if(properties){PCCViewer.tc.rM(event,properties);}if(handlers){length=handlers.length;handlers=handlers.slice(0);for(i=0;i<length;i++){handlers[i](event);}}return this;};return{extend:function(o){o.on=on;o.off=off;o.trigger=trigger;}};})();module.exports=EventEmitter;},{}],141:[function(require,module,exports){var ayW={ViewerReady:"ViewerReady",PageCountReady:"PageCountReady",EstimatedPageCountReady:"EstimatedPageCountReady",PageChanged:"PageChanged",PageLoadFailed:"PageLoadFailed",PageDisplayed:"PageDisplayed",PageRotated:"PageRotated",DocumentRotated:"DocumentRotated",ScaleChanged:"ScaleChanged",DocumentPrinted:"DocumentPrinted",TextSelected:"TextSelected",MouseToolChanged:"MouseToolChanged",SearchPerformed:"SearchPerformed",PartialSearchResultsAvailable:"PartialSearchResultsAvailable",SearchCompleted:"SearchCompleted",SearchFailed:"SearchFailed",SearchCancelled:"SearchCancelled",SearchResultsAvailable:"SearchResultsAvailable",SearchCleared:"SearchCleared",SearchResultSelectionChanged:"SearchResultSelectionChanged",RevisionsRetrievalCompleted:"RevisionsRetrievalCompleted",RevisionsRetrievalFailed:"RevisionsRetrievalFailed",RevisionsAvailable:"RevisionsAvailable",PartialRevisionsAvailable:"PartialRevisionsAvailable",PrintRequested:"PrintRequested",MarkupLoaded:"MarkupLoaded",MarkupSaved:"MarkupSaved",MarkChanged:"MarkChanged",MarkCreated:"MarkCreated",MarkRemoved:"MarkRemoved",MarkReordered:"MarkReordered",MarkSelectionChanged:"MarkSelectionChanged",MarkMouseEnter:"MarkMouseEnter",MarkMouseOver:"MarkMouseOver",MarkMouseLeave:"MarkMouseLeave",CommentsPanelToggled:"CommentsPanelToggled",CommentCreated:"CommentCreated",CommentRemoved:"CommentRemoved",CommentChanged:"CommentChanged",PageTextReady:"PageTextReady",Click:"Click",PageOpening:"PageOpening"};module.exports=ayW;},{}],142:[function(require,module,exports){var nG={FullWidth:"FullWidth",ShrinkToWidth:"ShrinkToWidth",ActualSize:"ActualSize",FullHeight:"FullHeight",FullPage:"FullPage"};module.exports=nG;},{}],143:[function(require,module,exports){var tc={};tc.rM=function(target){var source;if(!target){throw new Error("target must be defined.");}else if(typeof target!=='object'){throw new Error("typeof target must be 'object'");}else{for(var i=1;i<arguments.length;i++){source=arguments[i];for(var property in source){if(source.hasOwnProperty(property)){target[property]=source[property];}}}}return target;};module.exports=tc;},{}],144:[function(require,module,exports){var ImageStamps=function(Options){this.bB=PCCViewer.tc.rM({},Options);};ImageStamps.prototype.requestImageStampList=function(){var aa=PCCViewer.Deferred();var dC=aa.getPromise();try{var bQ=this.bB.imageHandlerUrl+'/ImageStampList';PCCViewer.Ajax.eg({method:'GET',url:bQ}).then(function fl(ac){var rK;if(ac.responseText.length>0){rK=JSON.parse(ac.responseText);if(ac.status===200){aa.resolve(rK);}else{aa.reject(new PCCViewer.Error("ImageStampListFail","Unable to retrieve ImageStamp list from server."));}}},function eG(aj){aa.reject(aj.error);});}catch(e){aa.reject(new PCCViewer.Error("Error",e.message));}return dC;};ImageStamps.prototype.requestImageSourceBase64=function(imageStampId){if(!imageStampId){throw new Error("Parameter imageStampId is not valid.");}if(typeof imageStampId!=='string'){throw new Error("Parameter imageStampId should be of type string.");}var aa=PCCViewer.Deferred();var dC=aa.getPromise();try{var bQ=this.bB.imageHandlerUrl+'/ImageStamp/'+imageStampId+'/q?format=Base64';PCCViewer.Ajax.eg({method:'GET',url:bQ,}).then(function fl(ac){var rK;if(ac.responseText.length>0){rK=JSON.parse(ac.responseText);if(ac.status===200){aa.resolve(rK);}else{aa.reject(new PCCViewer.Error("ImageStampDataFail","Unable to retrieve image stamp data URL and dataHash from server."));}}},function eG(aj){aa.reject(aj.error);});}catch(e){aa.reject(new PCCViewer.Error("Error",e.message));}return dC;};ImageStamps.prototype.reqestImageSourceBase64=function(imageStampId){return this.requestImageSourceBase64(imageStampId);};ImageStamps.prototype.getImageSourceURL=function(ImageStampID){if(!ImageStampID){throw new Error("Parameter imageStampId is not valid.");}if(typeof ImageStampID!=='string'){throw new Error("Parameter imageStampId should be of type string.");}return this.bB.imageHandlerUrl+'/ImageStamp/'+ImageStampID+'/q?format=Image';};module.exports=ImageStamps;},{}],145:[function(require,module,exports){var avy={data:{},initializeData:function(axb){PCCViewer.Language.data=IPCC.F.extend({},axb);return PCCViewer.Language;},getData:function(){return PCCViewer.Language.data;},getValue:function(afn){if(typeof PCCViewer.Language.data==='undefined'){throw new Error('Language data is not set.');}var mT=afn.split('.'),bp=PCCViewer.Language.data,bf;while(mT.length){bf=mT.shift();bp=bp[bf];if(typeof bp==='undefined'){bp=afn;break;}}return bp;}};module.exports=avy;},{}],146:[function(require,module,exports){var LoadMarkupLayersRequest=function(layerRecordIds,viewerControl,options){this.vL=layerRecordIds;this.bF=viewerControl;this.fv="";this.gd=false;this.qO=false;this.lW=0;this.aa=PCCViewer.Deferred();this.dC=this.aa.getPromise();this.then=this.dC.then;this.tG=options.loadAsHidden===true;PCCViewer.EventEmitter.extend(this);};LoadMarkupLayersRequest.EventType={LoadMarkupLayersFailed:"LoadMarkupLayersFailed",LoadMarkupLayersCompleted:"LoadMarkupLayersCompleted",LoadMarkupLayersCancelled:"LoadMarkupLayersCancelled",LoadMarkupLayersProgress:"LoadMarkupLayersProgress"};LoadMarkupLayersRequest.prototype.getProgress=function(){return this.lW;};LoadMarkupLayersRequest.prototype.cancel=function(){var J=this;this.qO=true;this.fv="User Cancelled";setTimeout(function(){J.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersCancelled,{});J.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersFailed,{});J.aa.reject(new PCCViewer.Error("UserCancelled","User Cancelled"));},0);return this;};LoadMarkupLayersRequest.prototype.getViewerControl=function(){return this.bF;};LoadMarkupLayersRequest.prototype.getErrorCode=function(){return this.fv;};LoadMarkupLayersRequest.prototype.Bl=function(){var J=this,YE=1,Xw,Vm=[];var tG=this.tG;var tj=function(amr){function fl(ac){var qV=JSON.parse(ac.responseText),QP=J.azk(qV),ez,sF=[],bE,gW=[],alw={},KV=0,Pw;for(var mx in QP.gW){if(QP.gW.hasOwnProperty(mx)){gW=gW.concat(QP.gW[mx]);}}ez=new PCCViewer.MarkupLayer(J.bF,gW);ez.aGI={bQ:bQ};IPCC.F.forEach(QP.sF,function(aac){sF.push(aac);KV++;alw[aac.uid]=true;});if(qV.name){ez.setName(qV.name);}if(qV.originalXmlName){ez.setOriginalXmlName(qV.originalXmlName);}if(KV>0){Pw=function(ev){if(alw[ev.mark.getUid()]){KV--;}if(!KV){J.bF.off(PCCViewer.EventType.MarkCreated,Pw);J.bF.sc=true;}};J.bF.on(PCCViewer.EventType.MarkCreated,Pw);J.bF.sc=false;try{bE=J.bF.deserializeMarks(sF);}catch(dz){J.gd=false;J.bF.off(PCCViewer.EventType.MarkCreated,Pw);J.bF.sc=true;J.aa.reject(new PCCViewer.Error('Error',dz.message));J.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersFailed,{});return;}if(tG){IPCC.F.forEach(bE,function(T){T.setVisible(false);});}ez.addMarks(bE);}ez.abw=amr;for(var uR in qV.data){if(qV.data.hasOwnProperty(uR)){ez.setData(uR,qV.data[uR]);}}J.bF.getMarkupLayerCollection().addItem(ez);Vm.push(ez);YE--;J.lW=(J.vL.length-YE)/J.vL.length;J.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersProgress,{progress:J.lW});if(J.lW===1){J.gd=false;J.aa.resolve(Vm);J.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersCompleted,{markupLayers:Vm});}};function eG(aj){J.gd=false;J.aa.reject(aj.error);J.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersFailed,{});};var bQ=Xw+amr+'?'+new Date().getTime();PCCViewer.Ajax.eg({url:bQ,method:'GET'}).then(fl,eG);};if(!(/^[\x00-\x7F]*$/.test(this.bF.bi.get_documentIdentifier()))){Xw=this.bF.bB.imageHandlerUrl+'/MarkupLayers/e'+this.bF.bB.documentID+'/';}else{Xw=this.bF.bB.imageHandlerUrl+'/MarkupLayers/u'+encodeURIComponent(this.bF.bB.documentID)+'/';}if(this.qO){return;}if(Object.prototype.toString.call(this.vL)==='[object Array]'&&this.vL.length>0){YE=this.vL.length;this.gd=true;IPCC.F.forEach(this.vL,tj,this);}else if(typeof this.vL==="string"){this.gd=true;tj(this.vL);}else{this.gd=false;this.aa.reject(new PCCViewer.Error("InvalidParameter",'layerRecordIds parameter is missing or invalid.'));this.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersFailed,{});return;}};LoadMarkupLayersRequest.prototype.azk=function(qV){var MD={},OC={};IPCC.F.forEach(qV.marks,function(abq){abq.conversation.comments=[];MD[abq.uid]=abq;},this);IPCC.F.forEach(qV.comments,function(wb){if(MD[wb.markUid]){MD[wb.markUid].conversation.comments.push(wb);}else if(OC[wb.markUid]){OC[wb.markUid].push(wb);}else{OC[wb.markUid]=[wb];}},this);return{sF:MD,gW:OC};};if(Object.defineProperties){Object.defineProperties(LoadMarkupLayersRequest.prototype,{"errorCode":{enumerable:true,get:function(){return this.getErrorCode();}},"progress":{enumerable:true,get:function(){return this.getProgress();}},"viewerControl":{enumerable:true,get:function(){return this.getViewerControl();}}});}module.exports=LoadMarkupLayersRequest;},{}],147:[function(require,module,exports){var cX={setMask:function(T,hX){var HG={};IPCC.F.forEach(hX.translations,function(bH,bf){HG[bf]=new RegExp(bH.replace(/^\/|\/$/g,''));});T.setMask({value:hX.value,translations:HG});},calculateRectangle:function(bp,bB){if(bp.pageData===undefined||(bp.pageData.width===bB.aS&&bp.pageData.height===bB.aq)){return bp.rectangle;}else{var mW=bB.aS/bp.pageData.width;return{x:bp.rectangle.x*mW,y:bp.rectangle.y*mW,width:bp.rectangle.width*mW,height:bp.rectangle.height*mW};}},setRectangle:function(T,bp,bB){T.setRectangle(cX.calculateRectangle(bp,bB));},setLines:function(T,bp,bB){var abW,oC,dq=bp.textLength+bp.startIndex-1,cC=bp.selectedText,dE={startIndex:bp.startIndex,length:bp.textLength};oC=[];var ae,Av;abW=IPCC.F.reduce(bp.lineGroups,function(er,nH){ae=nH.pageNumber-1;er[ae]=IPCC.F.map(nH.lines,function(gh){if(nH.pageData!==undefined){Av=cX.calculateRectangle({rectangle:gh,pageData:nH.pageData},bB);return new IPCC.Web.UI.Rectangle(Av.x,Av.y,Av.width,Av.height);}else{return new IPCC.Web.UI.Rectangle(gh.x,gh.y,gh.width,gh.height);}});oC.push({pageIndex:ae,endIndex:nH.startIndex+nH.textLength-1});return er;},{});T.Jv(oC,dq,cC,dE,abW);},postCreate:function(T,bp){T.C.abT(new Date(IPCC.F.Fh(bp.creationDateTime)));T.C.WF(new Date(IPCC.F.Fh(bp.modificationDateTime)));return T;},calculatePoint:function(bL,gx,bB){if(gx===undefined||(gx.width===bB.aS&&gx.height===bB.aq)){return bL;}else{return{x:bL.x*bB.aS/gx.width,y:bL.y*bB.aq/gx.height};}},Data:function(bp,cJ){IPCC.F.forEach(cJ,function(bH,bf){bp.setData(bf,bH);});},Comment:function(cl,cf){var nZ=cl.addComment(cf.text);nZ.setCreationTime(cf.creationDateTime);cX.Data(nZ,cf.data);},Conversation:function(T,cl){var afb=T.getConversation();IPCC.F.forEach(cl.comments?cl.comments:[],function(nZ){cX.Comment(afb,nZ);});cX.Data(afb,cl.data);},Common:function(bp,bB){if(bp.uid===undefined){bp.uid=IPCC.F.adW();}var T=this.ajT(bp.pageNumber,bp.type,{uid:bp.uid});if(bp.rectangle&&T.setRectangle){cX.setRectangle(T,bp,bB);}if(bp.startPoint&&T.setStartPoint){T.setStartPoint(cX.calculatePoint(bp.startPoint,bp.pageData,bB));}if(bp.endPoint&&T.setEndPoint){T.setEndPoint(cX.calculatePoint(bp.endPoint,bp.pageData,bB));}if(bp.points&&T.setPoints){T.setPoints(IPCC.F.map(bp.points,function(bL){return cX.calculatePoint(bL,bp.pageData,bB);}));}if(bp.lineGroups&&T.Jv){T.bS=bp.uid;cX.setLines(T,bp,bB);}if(bp.interactionMode){T.setInteractionMode(bp.interactionMode);}T=this.anr(T);cX.Data(T,bp.data);cX.Conversation(T,bp.conversation);return T;},EllipseAnnotation:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.borderColor){T.setBorderColor(bp.borderColor);}if(bp.borderThickness){T.setBorderThickness(bp.borderThickness);}if(bp.fillColor){T.setFillColor(bp.fillColor);}if(bp.opacity){T.setOpacity(bp.opacity);}return cX.postCreate(T,bp);},FreehandAnnotation:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.color){T.setColor(bp.color);}if(bp.opacity){T.setOpacity(bp.opacity);}if(bp.path){T.setPath(bp.path);}if(bp.thickness){T.setThickness(bp.thickness);}return cX.postCreate(T,bp);},FreehandSignature:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.color){T.setColor(bp.color);}if(bp.path){T.setPath(bp.path);}if(bp.thickness){T.setThickness(bp.thickness);}if(bp.horizontalAlignment){T.setHorizontalAlignment(bp.horizontalAlignment);}return cX.postCreate(T,bp);},HighlightAnnotation:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.fillColor){T.setFillColor(bp.fillColor);}return cX.postCreate(T,bp);},ImageStampAnnotation:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.imageDataUrl&&bp.imageId){T.setImage({id:bp.imageId,dataUrl:bp.imageDataUrl});}return cX.postCreate(T,bp);},ImageStampRedaction:function(bp,bB){return cX.ImageStampAnnotation.apply(this,arguments);},LineAnnotation:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.color){T.setColor(bp.color);}if(bp.endHeadType){T.setEndHeadType(bp.endHeadType);}if(bp.opacity){T.setOpacity(bp.opacity);}if(bp.thickness){T.setThickness(bp.thickness);}return cX.postCreate(T,bp);},PolylineAnnotation:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.color){T.setColor(bp.color);}if(bp.opacity){T.setOpacity(bp.opacity);}if(bp.thickness){T.setThickness(bp.thickness);}return cX.postCreate(T,bp);},RectangleAnnotation:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.borderColor){T.setBorderColor(bp.borderColor);}if(bp.borderThickness){T.setBorderThickness(bp.borderThickness);}if(bp.fillColor){T.setFillColor(bp.fillColor);}if(bp.opacity){T.setOpacity(bp.opacity);}return cX.postCreate(T,bp);},RectangleRedaction:function(bp,bB){var T=cX.Common.apply(this,arguments);if(T.os){var gV=bp.reasons||bp.reason;if(gV&& !Array.isArray(gV)){gV=[gV];}if(gV){T.setReasons(gV);}}else{if(bp.reason){T.setReason(bp.reason);}}if(bp.fillColor){T.setFillColor(bp.fillColor);}if(bp.borderColor){T.setBorderColor(bp.borderColor);}if(bp.borderThickness){T.setBorderThickness(bp.borderThickness);}if(bp.fontColor){T.setFontColor(bp.fontColor);}return cX.postCreate(T,bp);},StampAnnotation:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.label){T.setLabel(bp.label);}if(bp.color){T.setColor(bp.color);}return cX.postCreate(T,bp);},StampRedaction:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.label){T.setLabel(bp.label);}return cX.postCreate(T,bp);},StrikethroughAnnotation:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.color){T.setColor(bp.color);}if(bp.thickness){T.setThickness(bp.thickness);}return cX.postCreate(T,bp);},TextAnnotation:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.borderColor){T.setBorderColor(bp.borderColor);}if(bp.borderThickness){T.setBorderThickness(bp.borderThickness);}if(bp.fillColor){T.setFillColor(bp.fillColor);}if(bp.fontColor){T.setFontColor(bp.fontColor);}if(bp.fontName){T.setFontName(bp.fontName);}if(bp.fontSize){T.setFontSize(bp.fontSize);}if(bp.fontStyle){T.setFontStyle(bp.fontStyle);}if(bp.maxLength){T.setMaxLength(bp.maxLength);}if(bp.horizontalAlignment){T.setHorizontalAlignment(bp.horizontalAlignment);}if(bp.opacity){T.setOpacity(bp.opacity);}if(bp.text){T.setText(bp.text);}return cX.postCreate(T,bp);},TextAreaSignature:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.text){T.setText(bp.text);}if(bp.fontColor){T.setFontColor(bp.fontColor);}if(bp.fontName){T.setFontName(bp.fontName);}if(bp.maxFontSize){T.setMaxFontSize(bp.maxFontSize);}if(bp.fontStyle){T.setFontStyle(bp.fontStyle);}if(bp.maxLength){T.setMaxLength(bp.maxLength);}if(bp.horizontalAlignment){T.setHorizontalAlignment(bp.horizontalAlignment);}return cX.postCreate(T,bp);},TextHyperlinkAnnotation:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.fillColor){T.setFillColor(bp.fillColor);}if(bp.href){T.setHref(bp.href);}return cX.postCreate(T,bp);},TextInputSignature:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.fontColor){T.setFontColor(bp.fontColor);}if(bp.fontName){T.setFontName(bp.fontName);}if(bp.text){T.setText(bp.text);}if(bp.maxLength){T.setMaxLength(bp.maxLength);}if(bp.mask){cX.setMask(T,bp.mask);}if(bp.horizontalAlignment){T.setHorizontalAlignment(bp.horizontalAlignment);}return cX.postCreate(T,bp);},TextRedaction:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.fontColor){T.setFontColor(bp.fontColor);}if(bp.fontName){T.setFontName(bp.fontName);}if(bp.fontSize){T.setFontSize(bp.fontSize);}if(bp.maxLength){T.setMaxLength(bp.maxLength);}if(bp.text){T.setText(bp.text);}if(bp.horizontalAlignment){T.setHorizontalAlignment(bp.horizontalAlignment);}return cX.postCreate(T,bp);},TextSelectionRedaction:function(bp,bB){var T=cX.Common.apply(this,arguments);if(T.os){var gV=bp.reasons||bp.reason;if(gV&& !Array.isArray(gV)){gV=[gV];}if(gV){T.setReasons(gV);}}else{if(bp.reason){T.setReason(bp.reason);}}return cX.postCreate(T,bp);},TextSignature:function(bp,bB){var T=cX.Common.apply(this,arguments);if(bp.color){T.setColor(bp.color);}if(bp.fontName){T.setFontName(bp.fontName);}if(bp.text){T.setText(bp.text);}if(bp.horizontalAlignment){T.setHorizontalAlignment(bp.horizontalAlignment);}return cX.postCreate(T,bp);},TransparentRectangleRedaction:function(bp,bB){var T=cX.Common.apply(this,arguments);return cX.postCreate(T,bp);}};module.exports=cX;},{}],148:[function(require,module,exports){var EQ={HideSideHandlesWhenClose:"HideSideHandlesWhenClose",HideCornerHandlesWhenClose:"HideCornerHandlesWhenClose"};module.exports=EQ;},{}],149:[function(require,module,exports){var ep={serializeMask:function(hX){var abz={value:hX.value,translations:{}};IPCC.F.forEach(hX.translations,function(bH,bf){abz.translations[bf]=bH.toString();});return abz;},copyRectangle:function(H){return{x:H.x,y:H.y,width:H.width,height:H.height};},Common:function(bg,bh){var aq;var aS;if(bg.page){aq=bg.page.get_pageHeight();aS=bg.page.get_pageWidth();}else{aq=null;aS=null;}var ak=bg.mark.getPageNumber();var bp={uid:bg.mark.getUid(),interactionMode:bg.mark.getInteractionMode(),pageNumber:ak,type:bg.mark.getType(),creationDateTime:IPCC.F.tZ(bg.mark.C.ahS()),modificationDateTime:IPCC.F.tZ(bg.mark.C.aiE()),data:ep.Data(bg.mark),conversation:ep.Conversation(bg.mark.getConversation())};function zq(bL){return{x:bL.x,y:bL.y};};function anT(){var Ht=IPCC.F.map([].concat(bg.mark.C,bg.mark.bI),function(C){if(aS!==null){return{pageNumber:C.ae+1,pageData:{width:aS,height:aq},startIndex:C.get_startIndex(),textLength:C.get_textLength(),lines:IPCC.F.map(C.aA,function(al){if(al.get_rectangle){return ep.copyRectangle(al.get_rectangle());}else{return ep.copyRectangle(al);}})};}else{return{pageNumber:C.ae+1,startIndex:C.get_startIndex(),textLength:C.get_textLength(),lines:IPCC.F.map(C.aA,function(al){if(al.get_rectangle){return ep.copyRectangle(al.get_rectangle());}else{return ep.copyRectangle(al);}})};}});bp.lineGroups=Ht;};function aiz(){if(bg.mark.getRectangle){bp.rectangle=ep.copyRectangle(bg.mark.getRectangle());if(aS!==null){bp.pageData={width:aS,height:aq};}}if(bg.mark.getStartPoint){bp.startPoint=zq(bg.mark.getStartPoint());if(aS!==null){bp.pageData=bp.pageData||{width:aS,height:aq};}}if(bg.mark.getEndPoint){bp.endPoint=zq(bg.mark.getEndPoint());if(aS!==null){bp.pageData=bp.pageData||{width:aS,height:aq};}}if(bg.mark.getPoints){var bo=bg.mark.getPoints();bp.points=IPCC.F.map(bo,zq);if(aS!==null){bp.pageData={width:aS,height:aq};}}if(bg.mark.C.aA){anT();}};if(aS!==undefined&&aq!==undefined&&aS!==0&&aq!==0){aiz();bh(undefined,bp);}else{bg.vc.requestPageAttributes(ak).then(function aIw(oV){aq=oV.height;aS=oV.width;aiz();bh(undefined,bp);},function aFJ(fj){bh(fj);});}},Data:function(bp){return IPCC.F.reduce(bp.getDataKeys(),function(er,bf){er[bf]=bp.getData(bf);return er;},{});},Comment:function(cf){return{text:cf.getText(),data:ep.Data(cf),creationDateTime:IPCC.F.tZ(cf.getCreationTime())};},Conversation:function(cl){return{comments:IPCC.F.map(cl.getComments(),function(cf){return ep.Comment(cf);}),data:ep.Data(cl)};},EllipseAnnotation:function(bg,bh){ep.RectangleAnnotation(bg,bh);},FreehandAnnotation:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}bp=IPCC.F.extend(bp,{color:bg.mark.getColor(),opacity:bg.mark.getOpacity(),path:bg.mark.getPath(),thickness:bg.mark.getThickness()});bh(undefined,bp);});},FreehandSignature:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}bp=IPCC.F.extend(bp,{color:bg.mark.getColor(),path:bg.mark.getPath(),thickness:bg.mark.getThickness(),horizontalAlignment:bg.mark.getHorizontalAlignment()});bh(undefined,bp);});},HighlightAnnotation:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}var dE=bg.mark.getPosition();bp=IPCC.F.extend(bp,{fillColor:bg.mark.getFillColor(),textLength:dE.length,startIndex:dE.startIndex,selectedText:bg.mark.getText()});bh(undefined,bp);});},ImageStampAnnotation:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}var av=bg.mark.getImage();bp=IPCC.F.extend(bp,{imageDataUrl:av.dataUrl,imageId:av.id});bh(undefined,bp);});},ImageStampRedaction:function(bg,bh){ep.ImageStampAnnotation(bg,bh);},LineAnnotation:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}bp=IPCC.F.extend(bp,{color:bg.mark.getColor(),endHeadType:bg.mark.getEndHeadType(),opacity:bg.mark.getOpacity(),thickness:bg.mark.getThickness()});bh(undefined,bp);});},PolylineAnnotation:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}bp=IPCC.F.extend(bp,{color:bg.mark.getColor(),opacity:bg.mark.getOpacity(),thickness:bg.mark.getThickness()});bh(undefined,bp);});},RectangleAnnotation:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}bp=IPCC.F.extend(bp,{borderColor:bg.mark.getBorderColor(),borderThickness:bg.mark.getBorderThickness(),fillColor:bg.mark.getFillColor(),opacity:bg.mark.getOpacity()});bh(undefined,bp);});},RectangleRedaction:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}bp=IPCC.F.extend(bp,{fillColor:bg.mark.getFillColor(),borderColor:bg.mark.getBorderColor(),borderThickness:bg.mark.getBorderThickness(),fontColor:bg.mark.getFontColor()});if(bg.mark.os){bp.reasons=bg.mark.getReasons();}else{bp.reason=bg.mark.getReason();}bh(undefined,bp);});},StampAnnotation:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}bp=IPCC.F.extend(bp,{label:bg.mark.getLabel(),color:bg.mark.getColor()});bh(undefined,bp);});},StampRedaction:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}bp=IPCC.F.extend(bp,{label:bg.mark.getLabel()});bh(undefined,bp);});},StrikethroughAnnotation:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}var dE=bg.mark.getPosition();bp=IPCC.F.extend(bp,{color:bg.mark.getColor(),thickness:bg.mark.getThickness(),textLength:dE.length,startIndex:dE.startIndex,selectedText:bg.mark.getText()});bh(undefined,bp);});},TextAnnotation:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}bp=IPCC.F.extend(bp,{borderColor:bg.mark.getBorderColor(),borderThickness:bg.mark.getBorderThickness(),fillColor:bg.mark.getFillColor(),fontColor:bg.mark.getFontColor(),fontName:bg.mark.getFontName(),fontSize:bg.mark.getFontSize(),fontStyle:bg.mark.getFontStyle(),maxLength:bg.mark.getMaxLength(),horizontalAlignment:bg.mark.getHorizontalAlignment(),opacity:bg.mark.getOpacity(),text:bg.mark.getText()});bh(undefined,bp);});},TextAreaSignature:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}bp=IPCC.F.extend(bp,{text:bg.mark.getText(),fontColor:bg.mark.getFontColor(),fontName:bg.mark.getFontName(),fontStyle:bg.mark.getFontStyle(),maxFontSize:bg.mark.getMaxFontSize(),maxLength:bg.mark.getMaxLength(),horizontalAlignment:bg.mark.getHorizontalAlignment(),});bh(undefined,bp);});},TextHyperlinkAnnotation:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}var dE=bg.mark.getPosition();bp=IPCC.F.extend(bp,{href:bg.mark.getHref(),fillColor:bg.mark.getFillColor(),textLength:dE.length,startIndex:dE.startIndex,selectedText:bg.mark.getText()});bh(undefined,bp);});},TextInputSignature:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}bp=IPCC.F.extend(bp,{fontColor:bg.mark.getFontColor(),fontName:bg.mark.getFontName(),text:bg.mark.getText(),mask:bg.mark.getMask(),maxLength:bg.mark.getMaxLength(),horizontalAlignment:bg.mark.getHorizontalAlignment()});if(bg.mark.getMask()){bp.mask=ep.serializeMask(bg.mark.getMask());}bh(undefined,bp);});},TextRedaction:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}bp=IPCC.F.extend(bp,{fontColor:bg.mark.getFontColor(),fontName:bg.mark.getFontName(),fontSize:bg.mark.getFontSize(),text:bg.mark.getText(),maxLength:bg.mark.getMaxLength(),horizontalAlignment:bg.mark.getHorizontalAlignment()});bh(undefined,bp);});},TextSelectionRedaction:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}var dE=bg.mark.getPosition();bp=IPCC.F.extend(bp,{textLength:dE.length,startIndex:dE.startIndex,selectedText:bg.mark.getText()});if(bg.mark.os){bp.reasons=bg.mark.getReasons();}else{bp.reason=bg.mark.getReason();}bh(undefined,bp);});},TextSignature:function(bg,bh){ep.Common(bg,function(dz,bp){if(dz){bh(dz);return;}bp=IPCC.F.extend(bp,{color:bg.mark.getColor(),fontName:bg.mark.getFontName(),text:bg.mark.getText(),horizontalAlignment:bg.mark.getHorizontalAlignment()});bh(undefined,bp);});},TransparentRectangleRedaction:function(bg,bh){ep.Common(bg,bh);}};module.exports=ep;},{}],150:[function(require,module,exports){'use strict';var IPCC=require('./../IPCC/IPCC');var Data=require('./PCCViewer.Data').Data;var SessionData=require('./PCCViewer.Data').SessionData;function Mark(parameters){this.ak=0;this.dJ=undefined;this.zI=false;this.mu=Mark.InteractionMode.Full;this.dM=true;this.os=parameters.enableMultipleRedactionReasons;if(parameters.uid&&parameters.viewerControl){(function(bE,kN){IPCC.F.forEach(bE,function validateMark(lL){if(lL.getUid()===kN){throw new Error('Uid '+kN+' already exists in the document and cannot be duplicated.');}});})(parameters.viewerControl.getAllMarks(),parameters.uid);}var kN=parameters.uid||IPCC.F.adW();if(parameters.igMark&&parameters.igMark instanceof IPCC.Web.UI.Mark){this.C=parameters.igMark;this.dJ=this.C.get_markID().toString();this.cJ=this.C.get_data();}else{this.cJ=new IPCC.Web.UI.Data();}Data.extend(this);this.Ez=new IPCC.Web.UI.Data();SessionData.extend(this);if(parameters.pageNumber!==undefined){IPCC.bO.gG(parameters.pageNumber,'pageNumber');this.ak=parameters.pageNumber;}if(parameters.id!==undefined){IPCC.bO.kZ(parameters.id,'id');this.dJ=parameters.id;}if(parameters.type&&parameters.type==='PlaceSignature'&&parameters.zI){this.aT=parameters.type;this.zI=true;}else if(parameters.type!==undefined){IPCC.bO.kZ(parameters.type,'type');var JL=Oh(parameters.type,Mark.Type);if(JL===null){throw new RangeError("The value of mark type was invalid.");}this.aT=JL;}if('cS'in parameters){this.cS=parameters.cS;}if('ab'in parameters){this.ab=parameters.ab;}addPropertiesToMark(this);addMethodsToMark(this);this.getUid=function(){return kN;};if(Object.defineProperties&&Object.defineProperty){Object.defineProperty(this,'uid',{value:kN,enumerable:true,writable:false});}};Mark.prototype.getType=function(){return this.aT;};Mark.prototype.getId=function(){return this.dJ;};Mark.prototype.getPageNumber=function(){return this.ak;};Mark.prototype.getConversation=function(){if(!this.cl){this.cl=new PCCViewer.Conversation(this);}return this.cl;};Mark.prototype.getBoundingRectangle=function(){if(this.C){var al=this.C.get_boundingRectangle();if(al instanceof IPCC.Web.UI.Rectangle){this.nz={width:al.width,height:al.height,x:al.x,y:al.y};}}return this.nz;};Mark.prototype.getInteractionMode=function(){if(this.C){switch(this.C.get_interactionMode()){case IPCC.Web.UI.MarkInteractionMode.SelectionDisabled:return PCCViewer.Mark.InteractionMode.SelectionDisabled;case IPCC.Web.UI.MarkInteractionMode.Full:return PCCViewer.Mark.InteractionMode.Full;default:return PCCViewer.Mark.InteractionMode.Full;}}return this.mu;};Mark.prototype.setInteractionMode=function(interactionMode){var mu=Oh(interactionMode,PCCViewer.Mark.InteractionMode),ZY;switch(mu){case PCCViewer.Mark.InteractionMode.SelectionDisabled:ZY=IPCC.Web.UI.MarkInteractionMode.SelectionDisabled;break;case PCCViewer.Mark.InteractionMode.Full:ZY=IPCC.Web.UI.MarkInteractionMode.Full;break;default:throw new Error("The specified interactionMode is not valid.");}if(this.C){this.C.set_interactionMode(ZY);}this.mu=mu;return this;};Mark.prototype.reset=function(){var ds=new Mark({type:this.aT,zI:this.zI});this.cJ={};if(this.setBorderColor&&ds.getBorderColor){this.setBorderColor(ds.getBorderColor());}if(this.setBorderThickness&&ds.getBorderThickness){this.setBorderThickness(ds.getBorderThickness());}if(this.setColor&&ds.getColor){this.setColor(ds.getColor());}if(this.setEndHeadType&&ds.getEndHeadType){this.setEndHeadType(ds.getEndHeadType());}if(this.setEndPoint&&ds.getEndPoint){this.setEndPoint(ds.getEndPoint());}if(this.setFillColor&&ds.getFillColor){this.setFillColor(ds.getFillColor());}if(this.setFontColor&&ds.getFontColor){this.setFontColor(ds.getFontColor());}if(this.setFontName&&ds.getFontName){this.setFontName(ds.getFontName());}if(this.setFontSize&&ds.getFontSize){this.setFontSize(ds.getFontSize());}if(this.setFontStyle&&ds.getFontStyle){this.setFontStyle(ds.getFontStyle());}if(this.setHorizontalAlignment&&ds.getHorizontalAlignment){this.setHorizontalAlignment(ds.getHorizontalAlignment());}if(this.setLabel&&ds.getLabel){this.setLabel(ds.getLabel());}if(this.setPosition&&this.C&&ds.getPosition){this.setPosition(ds.getPosition());}if(this.setReason&&ds.getReason&&this.os!==true){this.setReason(ds.getReason());}if(this.setReasons&&ds.getReasons&&this.os!==false){this.setReasons(ds.getReasons());}if(this.setOpacity&&ds.getOpacity){this.setOpacity(ds.getOpacity());}if(this.setRectangle&&ds.getRectangle){this.setRectangle(ds.getRectangle());}if(this.setStartPoint&&ds.getStartPoint){this.setStartPoint(ds.getStartPoint());}if(this.setText&&ds.getText){this.setText(ds.getText());}if(this.setThickness&&ds.getThickness){this.setThickness(ds.getThickness());}if(this.setPath&&ds.getPath){this.setPath(ds.getPath());}if(this.setHref&&ds.getHref){this.setHref(ds.getHref());}if(this.setImage&&ds.getImage){this.setImage(ds.getImage());}if(this.setInteractionMode&&ds.getInteractionMode){this.setInteractionMode(ds.getInteractionMode());}if(this.setPoints&&ds.getPoints){this.setPoints(ds.getPoints());}if(this.setMask&&ds.getMask){this.setMask(ds.getMask());}if(this.setMaxLength&&ds.getMaxLength){this.setMaxLength(ds.getMaxLength());}if(this.setMaxFontSize&&ds.getMaxFontSize){this.setMaxFontSize(ds.getMaxFontSize());}};if(Object.defineProperties){Object.defineProperties(Mark.prototype,{"type":{enumerable:true,get:function(){return this.getType();}},"pageNumber":{enumerable:true,get:function(){return this.getPageNumber();}},"id":{enumerable:true,get:function(){return this.getId();}},"conversation":{enumerable:true,get:function(){return this.getConversation();}},"boundingRectangle":{enumerable:true,get:function(){return this.getBoundingRectangle();}},"interactionMode":{enumerable:true,get:function(){return this.getInteractionMode();},set:function(value){return this.setInteractionMode(value);}}});}Mark.Type={LineAnnotation:"LineAnnotation",RectangleAnnotation:"RectangleAnnotation",EllipseAnnotation:"EllipseAnnotation",TextAnnotation:"TextAnnotation",StampAnnotation:"StampAnnotation",HighlightAnnotation:"HighlightAnnotation",RectangleRedaction:"RectangleRedaction",TransparentRectangleRedaction:"TransparentRectangleRedaction",TextHyperlinkAnnotation:"TextHyperlinkAnnotation",TextRedaction:"TextRedaction",StampRedaction:"StampRedaction",FreehandAnnotation:"FreehandAnnotation",FreehandSignature:"FreehandSignature",TextSignature:"TextSignature",TextInputSignature:"TextInputSignature",TextAreaSignature:"TextAreaSignature",TextSelectionRedaction:"TextSelectionRedaction",ImageStampAnnotation:"ImageStampAnnotation",ImageStampRedaction:"ImageStampRedaction",PolylineAnnotation:"PolylineAnnotation",StrikethroughAnnotation:"StrikethroughAnnotation"};Mark.LineHeadType={None:"None",FilledTriangle:"FilledTriangle"};Mark.FontStyles={Bold:"Bold",Italic:"Italic",Strikeout:"Strikeout",Underline:"Underline"};Mark.InteractionMode={Full:"Full",SelectionDisabled:"SelectionDisabled"};Mark.HorizontalAlignment={Center:"Center",Left:"Left",Right:"Right"};function Oh(UM,aT){var abB=UM.toLowerCase();for(var standardType in aT){if(aT.hasOwnProperty(standardType)&&standardType.toLowerCase&&standardType.toLowerCase()===abB){return standardType;}}return null;};function addMethodsToMark(T){function apn(T){T.highlightText=function(highlights){if(!this.C){throw new Error("It is invalid to highlight text on this mark.");}var jH;if(highlights!==null&&typeof highlights!=="undefined"){if(Object.prototype.toString.call(highlights)!=='[object Array]'){jH=[highlights];}else{jH=highlights;}for(var i=0;i<jH.length;i++){aEe(jH[i]);}}else{jH=[];}var aT=T.getType();switch(aT){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:T.C.selectText(jH);break;case Mark.Type.HighlightAnnotation:case Mark.Type.TextSelectionRedaction:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.StrikethroughAnnotation:var J=this;var Qk=[];var rM=false,NZ=0,RN,Cc;var abr=function(IO,aog,fU){var yv;var YQ= -1,PP=[];var wx=(IO.ad+IO.db);if(rM===true&&RN>=0&&Cc>=0){if(IO.ae-1===RN){yv=0;if(NZ<=wx){PP.push({startIndex:yv,length:NZ,color:fU[Cc].color,opacity:(fU[Cc].opacity)?fU[Cc].opacity:127});rM=false;NZ=0;RN= -1;Cc= -1;}}}for(var bz=0;bz<fU.length;bz++){yv=IO.ad+fU[bz].startIndex-aog;if(yv<0){continue;}if(Array.prototype.indexOf){YQ=Qk.indexOf(bz);}else{YQ=IPCC.Web.iG(Qk,bz);}var cZ=127;if(YQ=== -1){if(yv+fU[bz].length<=wx){if(fU[bz].opacity){cZ=fU[bz].opacity;}PP.push({startIndex:yv,length:fU[bz].length,color:fU[bz].color,opacity:cZ});Qk.push(bz);J.Cq.push(fU[bz]);}else{var Tm=wx-yv;if(Tm>0){NZ=fU[bz].length-Tm;cZ=127;if(fU[bz].opacity){cZ=fU[bz].opacity;}PP.push({startIndex:yv,length:Tm,color:fU[bz].color,opacity:cZ});Qk.push(bz);J.Cq.push(fU[bz]);rM=true;Cc=bz;RN=IO.ae;}}}}return PP;};this.Cq=[];var eR=abr(this.C,0,jH);T.clearHighlights();if(eR.length>0){J.C.selectText(eR);}eR=[];var ht=this.C.db;if(this.bI&&this.bI.length){for(var h=0;h<this.bI.length;h++){eR=[];eR=abr(this.bI[h],ht,jH);ht+=this.bI[h].db;if(eR.length>0){this.bI[h].selectText(eR);}}}break;}return this;};function aEe(GI){IPCC.bO.mc(GI.startIndex,'highlight.startIndex',0,T.getText().length);IPCC.bO.mc(GI.length,'highlight.length',1,Number.MAX_VALUE);IPCC.bO.dB(GI.color,'highlight.color');if(GI.opacity){IPCC.bO.mc(GI.opacity,"highlight.opacity",0,255);}};T.clearHighlights=function(){if(this.C){if(!this.C){throw new Error("It is invalid to clear highlights on this mark.");}}var aT=T.getType();switch(aT){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:T.C.selectText();break;case Mark.Type.HighlightAnnotation:case Mark.Type.TextSelectionRedaction:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.StrikethroughAnnotation:this.C.selectText();if(this.bI&&this.bI.length){for(var h=0;h<this.bI.length;h++){this.bI[h].selectText();}}break;}return this;};};var aT=T.getType();switch(aT){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.HighlightAnnotation:case Mark.Type.TextSelectionRedaction:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.StrikethroughAnnotation:apn(T);break;default:break;}};function addPropertiesToMark(T){T.nz={x:0,y:0,width:0,height:0};var aT=T.getType();switch(aT){case Mark.Type.LineAnnotation:T.dB='#18385F';T.ie=IPCC.Web.UI.LineStyle.Solid;T.nU=6;T.cZ=255;T.Ou={x:0,y:0};T.wx={x:0,y:0};T.lO="None";break;case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:T.cE='#FB0404';T.cZ=255;T.op='#000000';T.lV=4;T.H={x:0,y:0,width:0,height:0};break;case Mark.Type.RectangleRedaction:T.fj="";T.gV=[];T.cE='#000000';T.op='#000000';T.lV=1;T.gs='#FFFFFF';T.H={x:0,y:0,width:0,height:0};T.oH=true;if(T.C){T.C.kE(T.oH);}break;case Mark.Type.TransparentRectangleRedaction:T.H={x:0,y:0,width:0,height:0};T.oH=true;if(T.C){T.C.kE(T.oH);T.C.set_fillColor('#FFFF00');T.C.set_opacity(127);T.C.set_lineWidth(1);T.C.set_lineColor('#FFFF00');}break;case Mark.Type.TextAnnotation:T.aD='';T.cE='#FFFFFF';T.cZ=127;T.op='#000000';T.lV=4;T.gs='#000000';T.ew="Arial";T.cR=12;T.bZ=[];T.mQ="Left";T.gF=0;T.H={x:0,y:0,width:0,height:0};break;case Mark.Type.StampAnnotation:case Mark.Type.StampRedaction:T.vd="Approved";T.H={x:0,y:0,width:0,height:0};if(aT===Mark.Type.StampRedaction){T.oH=true;if(T.C){T.C.kE(T.oH);T.C.set_fillColor('#000000');}}else{T.dB="#000000";}break;case Mark.Type.HighlightAnnotation:T.cE="#FFFF00";T.aD='';T.cC='';if(T.C){if(T.C.cC){T.aD=T.C.cC;}}T.dE={startIndex:0,length:0};T.Cq=[];T.bI=[];break;case Mark.Type.TextSelectionRedaction:T.fj="";T.gV=[];T.aD='';T.dE={startIndex:0,length:0};if(T.C){T.C.set_fillColor('#000000');if(T.C.cC){T.aD=T.C.cC;}}T.Cq=[];T.bI=[];break;case Mark.Type.TextHyperlinkAnnotation:T.mf='';T.cE="#3B00FF";T.aD='';if(T.C){if(T.C.cC){T.aD=T.C.cC;}}T.dE={startIndex:0,length:0};T.Cq=[];T.bI=[];break;case Mark.Type.TextRedaction:T.aD='';T.gs='#000000';T.ew="Arial";T.cR=12;T.H={x:0,y:0,width:0,height:0};T.oH=true;T.gF=0;if(T.C){T.C.kE(T.oH);T.C.set_fillColor('#FFFFFF');}T.mQ="Left";break;case Mark.Type.FreehandAnnotation:T.cZ=255;T.H={x:0,y:0,width:0,height:0};T.nU=4;T.dB='#000000';T.fS='M0,0';break;case Mark.Type.FreehandSignature:T.H={x:0,y:0,width:0,height:0};T.nU=4;T.dB='#000000';T.mQ="Center";T.fS='M0,0';break;case Mark.Type.TextSignature:T.aD="John Doe";T.H={x:0,y:0,width:0,height:0};T.dB="#000000";if(T.C){T.dB=T.C.cE||'#000000';T.C.kE(T.oH);T.C.set_fillColor(T.dB);}T.mQ="Center";T.ew="";break;case Mark.Type.TextInputSignature:T.aD="";T.H={x:0,y:0,width:0,height:0};T.gs="#000000";T.gF=0;if(T.C){T.gs=T.C.get_textColor()||'#000000';T.C.kE(false);}T.mQ="Left";T.ew="Courier New";T.hX=null;break;case Mark.Type.TextAreaSignature:T.aD="";T.H={x:0,y:0,width:0,height:0};T.gs="#000000";if(T.C){T.gs=T.C.get_textColor()||'#000000';T.C.kE(false);}T.mQ="Left";T.ew="Courier New";T.bZ=[];T.gF=0;T.il=0;break;case 'PlaceSignature':T.jT=undefined;T.H={x:0,y:0,width:0,height:0};break;case Mark.Type.ImageStampAnnotation:case Mark.Type.ImageStampRedaction:T.av="";T.pw="";T.H={x:0,y:0,width:0,height:0};if(T.C&&aT===Mark.Type.ImageStampRedaction){T.oH=true;T.C.kE(T.oH);}break;case Mark.Type.PolylineAnnotation:T.dB='#000000';T.ie=IPCC.Web.UI.LineStyle.Solid;T.nU=2;T.cZ=255;T.bo=[{x:0,y:0},{x:0,y:0}];break;case Mark.Type.StrikethroughAnnotation:T.dB='#000000';T.ie=IPCC.Web.UI.LineStyle.Solid;T.nU=2;T.aD='';T.cC='';if(T.C){if(T.C.cC){T.aD=T.C.cC;}}T.dE={startIndex:0,length:0};T.Cq=[];T.bI=[];break;}function getSignature(){return this.jT||undefined;};function setSignature(signature){if(typeof signature==='undefined'){this.jT=undefined;return;}else if(typeof signature!=='object'){throw new Error("The parameter `signature` is not an Object.");}if(!signature.path&& !signature.text){throw new Error("The parameter `signature` should have at least one of these properties: text, path");}else{if(signature.path){if(signature.path.length<1){throw new Error("The property `signature.path` cannot be empty.");}else if(signature.path.match(/[^MLC0-9,.\s]/)){throw new Error("The property `signature.path` has invalid characters.");}}else if(signature.text){if(signature.text.length<1){signature.text='';}}}this.jT=signature;return this;};if(T.jT||T.aT==='PlaceSignature'){T.getSignature=getSignature;T.setSignature=setSignature;if(Object.defineProperties){Object.defineProperties(T,{"signature":{enumerable:true,get:function(){return this.getSignature();},set:function(value){return this.setSignature(value);}}});}}function getColor(){if(this.C){switch(this.aT){case Mark.Type.LineAnnotation:case Mark.Type.PolylineAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.FreehandAnnotation:case Mark.Type.StrikethroughAnnotation:this.dB=this.C.get_lineColor()||this.dB;break;case Mark.Type.StampAnnotation:case Mark.Type.TextSignature:this.dB=this.C.get_fillColor()||this.dB;break;}}return this.dB;};function setColor(value){IPCC.bO.dB(value,'color');this.dB=value;if(this.C){switch(this.aT){case Mark.Type.LineAnnotation:case Mark.Type.PolylineAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.FreehandAnnotation:this.C.set_lineColor(value);break;case Mark.Type.StampAnnotation:this.C.set_fillColor(value);break;case Mark.Type.TextSignature:this.C.set_textColor(value);this.C.set_fillColor(value);break;case Mark.Type.StrikethroughAnnotation:this.C.set_lineColor(value);if(this.bI&&this.bI.length){for(var h=0;h<this.bI.length;h++){this.bI[h].set_lineColor(value);}}break;}}return this;};if(T.dB!==undefined){T.getColor=getColor;T.setColor=setColor;if(Object.defineProperties){Object.defineProperties(T,{"color":{enumerable:true,get:function(){return this.getColor();},set:function(value){return this.setColor(value);}}});}}function getFillColor(){if(this.C){switch(this.aT){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.HighlightAnnotation:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.RectangleRedaction:this.cE=this.C.get_fillColor()||this.cE;break;}}return this.cE;};function setFillColor(value){if(this.aT===PCCViewer.Mark.Type.HighlightAnnotation||this.aT===PCCViewer.Mark.Type.TextHyperlinkAnnotation){IPCC.bO.dB(value,'fillColor');}else{IPCC.bO.Wu(value,'fillColor');}this.cE=value;if(this.C){switch(this.aT){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.RectangleRedaction:this.C.set_fillColor(value);break;case Mark.Type.HighlightAnnotation:case Mark.Type.TextHyperlinkAnnotation:this.C.set_fillColor(value);if(this.bI&&this.bI.length){for(var h=0;h<this.bI.length;h++){this.bI[h].set_fillColor(value);}}break;}}return this;};if(T.cE!==undefined){T.getFillColor=getFillColor;T.setFillColor=setFillColor;if(Object.defineProperties){Object.defineProperties(T,{"fillColor":{enumerable:true,get:function(){return this.getFillColor();},set:function(value){return this.setFillColor(value);}}});}}function getImage(){var retVal={dataUrl:this.av,id:this.pw};return retVal;};function setImage(params){IPCC.bO.kZ(params.dataUrl,'string');IPCC.bO.kZ(params.id,'string');this.av=params.dataUrl;this.pw=params.id;if(this.C){switch(this.aT){case Mark.Type.ImageStampAnnotation:case Mark.Type.ImageStampRedaction:this.C.set_image(params.dataUrl);this.C.pw=params.id;break;}}return this;};if(T.av!==undefined){T.getImage=getImage;T.setImage=setImage;if(Object.defineProperties){Object.defineProperties(T,{"image":{enumerable:true,get:function(){return this.getImage();},set:function(params){return this.setImage(params);}}});}}function getBorderColor(){if(this.C){switch(this.aT){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.RectangleRedaction:this.op=this.C.get_lineColor()||this.op;break;}}return this.op;};function setBorderColor(value){IPCC.bO.Wu(value,'borderColor');this.op=value;if(this.C){switch(this.aT){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.RectangleRedaction:this.C.set_lineColor(value);break;}}return this;};if(T.op!==undefined){T.getBorderColor=getBorderColor;T.setBorderColor=setBorderColor;if(Object.defineProperties){Object.defineProperties(T,{"borderColor":{enumerable:true,get:function(){return this.getBorderColor();},set:function(value){return this.setBorderColor(value);}}});}}function getOpacity(){if(this.C){switch(this.aT){case Mark.Type.LineAnnotation:case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.FreehandAnnotation:case Mark.Type.PolylineAnnotation:this.cZ=this.C.get_opacity()||this.cZ;break;}}return this.cZ;};function setOpacity(value){IPCC.bO.mc(value,'opacity',0,255);this.cZ=value;if(this.C){switch(this.aT){case Mark.Type.LineAnnotation:case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.FreehandAnnotation:case Mark.Type.PolylineAnnotation:this.C.set_opacity(value);break;}}return this;};if(T.cZ!==undefined&&T.cZ>=0){T.getOpacity=getOpacity;T.setOpacity=setOpacity;if(Object.defineProperties){Object.defineProperties(T,{"opacity":{enumerable:true,get:function(){return this.getOpacity();},set:function(value){return this.setOpacity(value);}}});}}function getThickness(){if(this.C){switch(this.aT){case Mark.Type.LineAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.FreehandAnnotation:case Mark.Type.PolylineAnnotation:case Mark.Type.StrikethroughAnnotation:this.nU=this.C.get_lineWidth()||this.nU;break;}}return this.nU;};function setThickness(value){IPCC.bO.kb(value,'thickness',1,50);this.nU=value;if(this.C){switch(this.aT){case Mark.Type.LineAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.FreehandAnnotation:case Mark.Type.PolylineAnnotation:this.C.set_lineWidth(value);break;case Mark.Type.StrikethroughAnnotation:this.C.set_lineWidth(value);if(this.bI&&this.bI.length){for(var h=0;h<this.bI.length;h++){this.bI[h].set_lineWidth(value);}}break;}}return this;};if(T.nU){T.getThickness=getThickness;T.setThickness=setThickness;if(Object.defineProperties){Object.defineProperties(T,{"thickness":{enumerable:true,get:function(){return this.getThickness();},set:function(value){return this.setThickness(value);}}});}}function getBorderThickness(){if(this.C){switch(this.aT){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.RectangleRedaction:this.lV=this.C.get_lineWidth()||this.lV;break;}}return this.lV;};function setBorderThickness(value){IPCC.bO.kb(value,'borderThickness',1,50);this.lV=value;if(this.C){switch(this.aT){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.RectangleRedaction:this.C.set_lineWidth(value);break;}}return this;};if(T.lV!==undefined){T.getBorderThickness=getBorderThickness;T.setBorderThickness=setBorderThickness;if(Object.defineProperties){Object.defineProperties(T,{"borderThickness":{enumerable:true,get:function(){return this.getBorderThickness();},set:function(value){return this.setBorderThickness(value);}}});}}function getVisible(){if(this.C){this.dM=this.C.get_visible();}return this.dM;};function setVisible(value){if(value!==true&&value!==false){throw new Error("The parameter value is invalid. The parameter must be boolean true or false.");}this.dM=value;if(this.C){this.C.set_visible(value);}var h;switch(this.aT){case Mark.Type.TextSelectionRedaction:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.HighlightAnnotation:case Mark.Type.StrikethroughAnnotation:if(this.bI&&this.bI.length){for(h=0;h<this.bI.length;h++){this.bI[h].set_visible(value);}}if(this.aT===PCCViewer.Mark.Type.TextSelectionRedaction){var cq=this.C;for(h=0;h<this.C.aA.length;h++){cq.aA[h].set_visible(value);}if(cq.bS){IPCC.F.forEach(this.bI,function(C){for(h=0;h<C.aA.length;h++){C.aA[h].set_visible(value);}});}}break;}return this;};if(T.dM!==undefined){T.getVisible=getVisible;T.setVisible=setVisible;if(Object.defineProperties){Object.defineProperties(T,{"visible":{enumerable:true,get:function(){return this.getVisible();},set:function(value){return this.setVisible(value);}}});}}function getStartPoint(){if(this.C&&this.C!==null){var bo=this.C.get_points();if(bo.get_length()>0){switch(this.aT){case Mark.Type.LineAnnotation:var bL=bo.getPoint(0);if(bL){this.Ou={x:bL.x,y:bL.y};}break;}}}return this.Ou;};function setStartPoint(value){IPCC.bO.gG(value.x,'startPoint'+'.x');IPCC.bO.gG(value.y,'startPoint'+'.y');if(this.C&&this.C!==null){var bo=this.C.get_points();switch(this.aT){case Mark.Type.LineAnnotation:bo.setPoint(0,new IPCC.Web.UI.Point(value.x,value.y));break;}}this.Ou=value;return this;};if(T.Ou){T.getStartPoint=getStartPoint;T.setStartPoint=setStartPoint;if(Object.defineProperties){Object.defineProperties(T,{"startPoint":{enumerable:true,get:function(){return this.getStartPoint();},set:function(value){return this.setStartPoint(value);}}});}}function getEndPoint(){if(this.C&&this.C!==null){var bo=this.C.get_points();if(bo.get_length()>0){switch(this.aT){case Mark.Type.LineAnnotation:var bL=bo.getPoint(1);if(bL){this.wx={x:bL.x,y:bL.y};}break;}}}return this.wx;};function setEndPoint(value){IPCC.bO.gG(value.x,'endPoint'+'.x');IPCC.bO.gG(value.y,'endPoint'+'.y');if(this.C&&this.C!==null){var bo=this.C.get_points();switch(this.aT){case Mark.Type.LineAnnotation:bo.setPoint(1,new IPCC.Web.UI.Point(value.x,value.y));break;}}this.wx=value;return this;};if(T.wx){T.getEndPoint=getEndPoint;T.setEndPoint=setEndPoint;if(Object.defineProperties){Object.defineProperties(T,{"endPoint":{enumerable:true,get:function(){return this.getEndPoint();},set:function(value){return this.setEndPoint(value);}}});}}function getEndHeadType(){if(this.C&&this.C!==null){var FU;switch(this.aT){case Mark.Type.LineAnnotation:FU=this.C.get_endHeadType();switch(FU){case IPCC.Web.UI.LineHeadType.None:this.lO=PCCViewer.Mark.LineHeadType.None;break;case IPCC.Web.UI.LineHeadType.Solid:this.lO=PCCViewer.Mark.LineHeadType.FilledTriangle;break;}break;}}return this.lO;};function setEndHeadType(value){var FU;switch(value){case Mark.LineHeadType.None:FU=IPCC.Web.UI.LineHeadType.None;break;case Mark.LineHeadType.FilledTriangle:FU=IPCC.Web.UI.LineHeadType.Solid;break;default:throw "The specified value is not a valid line head type.";}if(this.C&&this.C!==null){switch(this.aT){case Mark.Type.LineAnnotation:this.C.set_endHeadType(FU);break;}}this.lO=value;return this;};if(T.lO){T.getEndHeadType=getEndHeadType;T.setEndHeadType=setEndHeadType;if(Object.defineProperties){Object.defineProperties(T,{"endHeadType":{enumerable:true,get:function(){return this.getEndHeadType();},set:function(value){return this.setEndHeadType(value);}}});}}function getPoints(){if(this.C&&this.C!==null){var Ij=this.C.get_points();var ci=Ij.get_length();var anp=[];var UY=function(arC,af){anp.push(arC.getPoint(af));};if(ci>1){switch(this.aT){case Mark.Type.PolylineAnnotation:for(var h=0;h<ci;h++){UY(Ij,h);}this.bo=anp;break;}}}return this.bo.slice();};function setPoints(value){if(!(value instanceof Array)){throw "invalid parameter. The parameter should be an array.";}if(value.length<=1){return;}for(var bz=0;bz<value.length;bz++){IPCC.bO.bL(value[bz],'PolylinePoint');}if(this.C&&this.C!==null){var Ij=this.C.get_points();var aqC=function(af){Ij.addPoint(new IPCC.Web.UI.Point(value[af].x,value[af].y));};switch(this.aT){case Mark.Type.PolylineAnnotation:Ij.removeAllPoints();for(var h=0;h<value.length;h++){aqC(h);}}}this.bo=value;return this;};if(T.bo){T.getPoints=getPoints;T.setPoints=setPoints;if(Object.defineProperties){Object.defineProperties(T,{"points":{enumerable:true,get:function(){return this.getPoints();},set:function(value){return this.setPoints(value);}}});}}function getRectangle(){if(this.C){switch(this.aT){case Mark.Type.RectangleAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TransparentRectangleRedaction:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.StampAnnotation:case Mark.Type.StampRedaction:case Mark.Type.FreehandAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:case Mark.Type.ImageStampAnnotation:case Mark.Type.ImageStampRedaction:var al=this.C.get_rectangle();if(al instanceof IPCC.Web.UI.Rectangle){this.H={width:al.width,height:al.height,x:al.x,y:al.y};}break;}}return this.H;};function setRectangle(value){IPCC.bO.gG(value.x,'rectangle'+'.x');IPCC.bO.gG(value.y,'rectangle'+'.y');IPCC.bO.gG(value.width,'rectangle'+'.width');IPCC.bO.gG(value.height,'rectangle'+'.height');if(this.C&&this.C!==null){switch(this.aT){case Mark.Type.RectangleAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TransparentRectangleRedaction:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.StampAnnotation:case Mark.Type.StampRedaction:case Mark.Type.FreehandAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:case Mark.Type.ImageStampAnnotation:case Mark.Type.ImageStampRedaction:var al=new IPCC.Web.UI.Rectangle(value.x,value.y,value.width,value.height);this.C.set_rectangle(al);break;}}this.H=value;return this;};if(T.H){T.getRectangle=getRectangle;T.setRectangle=setRectangle;if(Object.defineProperties){Object.defineProperties(T,{"rectangle":{enumerable:true,get:function(){return this.getRectangle();},set:function(value){return this.setRectangle(value);}}});}}function getPosition(){var cG=0;if(this.C&&this.C.cC){cG=this.C.cC.length;}else if(this.C){cG=IPCC.F.reduce([this.C].concat(this.bI||[]),function(ci,C){return ci+C.get_textLength();},0);}return this.C?{startIndex:this.C.ad,length:cG}:this.dE;};function setPosition(value){IPCC.bO.gG(value.startIndex,'position.startIndex');IPCC.bO.gG(value.length,'position.length');if(value.startIndex<0){throw new Error("The start index must be 0 or greater.");}if(value.length<0){throw new Error("The length must be 0 or greater.");}if(this.C===undefined||this.C===null){throw new Error("The mark must be on a page.");}var aO;var am;var ae=this.ak-1;var tq= -value.startIndex;var oC=[];var cC="";var dq;while(true){if(ae>=this.cS.get_length()){throw new Error("The specified length is out of range.");}aO=this.cS.getPage(ae);if(aO.cd()&&aO.cd().wJ()&&aO.cd().nn()===true){var aap=tq;var Vn=aO.cd().Be();tq+=Vn.length;if(tq<0||(tq===0&&value.length!==0)){throw new Error("The specified start index is out of range for the specified page.");}var Sm=0;if(ae===this.ak-1){Sm=value.startIndex;}if(tq>=value.length){dq=value.startIndex+value.length-1;if(aap>=0){dq=value.length-1-aap;}oC.push({pageIndex:ae,endIndex:dq});cC+=Vn.substring(Sm,dq+1);break;}else{dq=aO.cd().Be().length-1;oC.push({pageIndex:ae,endIndex:dq});cC+=Vn.substring(Sm,dq+1);}}else{throw new Error("The text has not been retrieved for this page.");}ae++;}this.bS=IPCC.vH();var h=0;if(this.bI){if(this.C){this.C.bS=this.bS;am=this.ab.gC(this.cS.getPage(this.C.ae));if(this.C.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction){for(var aaw=this.C.aA.length-1;aaw>=0;aaw--){am.removeMark(this.C.aA[aaw]);this.C.aA.pop();}}}for(h=this.bI.length-1;h>=0;h--){var kA=this.bI[h];am=this.ab.gC(this.cS.getPage(kA.ae));am.removeMark(kA);this.bI.splice(h,1);}}else{this.bI=[];}Jv.call(this,oC,dq,cC,value);this.dE=value;return this;};function Jv(oC,dq,cC,value,abb){var h,ae,aO,am;abb=abb||{};var aA;this.bI=this.bI||[];var aiK=(this.C.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction)?aDl:aDQ;for(h=0;h<oC.length;h++){ae=oC[h].pageIndex;aO=this.cS.getPage(ae);var aqw=aO.cd().hB();am=this.ab.gC(aO);var cq;var ad=0;dq=oC[h].endIndex;if(h===0){ad=value.startIndex;}ae=oC[h].pageIndex;aA=abb[ae]||IPCC.F.Zf(aqw,ad,dq);if(h===0){cq=aiK(this.C,ad,dq-ad+1,cC,aA,ae,this.bS,this.C.get_type(),am);this.C.kd=true;}else{cq=aiK(null,ad,dq-ad+1,cC,aA,ae,this.bS,this.C.get_type(),am);this.bI.push(cq);am.addMark(cq);cq.set_selected(this.C.get_selected());if(this.getFillColor){cq.set_fillColor(this.C.get_fillColor());}if(this.getColor){cq.set_lineColor(this.C.get_lineColor());}if(this.getThickness){cq.set_lineWidth(this.C.get_lineWidth());}if(this.getHref){cq.set_href(this.C.get_href());}if(this.getReason){cq.set_text(this.C.get_text());}}if(h===oC.length-1){cq.lk=true;}}};if(T.dE){T.getPosition=getPosition;T.setPosition=setPosition;T.Jv=Jv;if(Object.defineProperties){Object.defineProperties(T,{"position":{enumerable:true,get:function(){return this.getPosition();},set:function(value){return this.setPosition(value);}}});}}function aDQ(T,ad,cG,cC,aA,ae,kF,aR,am){if(!T){T=new IPCC.Web.UI.Mark(aR);}T.ad=ad;T.db=cG;T.ic='y';T.bS=kF;T.cC=cC;T.aA=aA||[];T.ae=ae;var XY=IPCC.F.reduce(T.aA,function(IX,al){if(!IX){return al.clone();}else{return IX.union(al);}},null);T.set_rectangle(XY);return T;};function aDl(T,ad,cG,cC,aA,ae,kF,aR,am){if(!T){T=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextSelectionRedaction);}T.ad=ad;T.db=cG;T.bS=kF;T.cC=cC;T.ae=ae;T.aA=IPCC.F.map(aA,function(al){var wD=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.RectangleRedaction);wD.set_rectangle(al);wD.kE(true);wD.set_fillColor('#000000');wD.set_text(T.aD);wD.set_lineWidth(0);wD.bS=kF;am.addMark(wD);return wD;});var XY=IPCC.F.reduce(aA,function(IX,al){if(!IX){return al.clone();}else{return IX.union(al);}},null);T.set_rectangle(XY);return T;};function getText(){if(this.C){switch(this.aT){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.aD=(typeof this.C.get_text()==="string")?this.C.get_text():this.aD;break;case Mark.Type.HighlightAnnotation:case Mark.Type.TextSelectionRedaction:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.StrikethroughAnnotation:if(T.C.cC){this.aD=T.C.cC;}break;}}return this.aD;};function setText(value){IPCC.bO.kZ(value,'text');this.aD=value;if(this.C){switch(this.aT){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.C.set_text(value);break;}}return this;};if(T.aD!==undefined){T.getText=getText;var aR=T.getType();if(aR!==Mark.Type.HighlightAnnotation&&aR!==Mark.Type.TextSelectionRedaction&&aR!==Mark.Type.TextHyperlinkAnnotation&&aR!==Mark.Type.StrikethroughAnnotation){T.setText=setText;}if(Object.defineProperties){var adZ={enumerable:true,get:function(){return this.getText();}};if(T.setText!==undefined){adZ.set=function(value){return this.setText(value);};}Object.defineProperties(T,{"text":adZ});}}function getFontColor(){if(this.C){switch(this.aT){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextInputSignature:case Mark.Type.RectangleRedaction:case Mark.Type.TextAreaSignature:this.gs=this.C.get_textColor()||this.gs;break;}}return this.gs;};function setFontColor(value){IPCC.bO.dB(value,'fontColor');this.gs=value;if(this.C){switch(this.aT){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:case Mark.Type.RectangleRedaction:this.C.set_textColor(value);break;}}return this;};if(T.gs){T.getFontColor=getFontColor;T.setFontColor=setFontColor;if(Object.defineProperties){Object.defineProperties(T,{"fontColor":{enumerable:true,get:function(){return this.getFontColor();},set:function(value){return this.setFontColor(value);}}});}}function getFontName(){if(this.C){switch(this.aT){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.ew=this.C.get_fontName()||this.ew;break;}}return this.ew;};function setFontName(value){IPCC.bO.kZ(value,'fontName');this.ew=value;if(this.C){switch(this.aT){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.C.set_fontName(value);break;}}return this;};if(T.ew!==undefined){T.getFontName=getFontName;T.setFontName=setFontName;if(Object.defineProperties){Object.defineProperties(T,{"fontName":{enumerable:true,get:function(){return this.getFontName();},set:function(value){return this.setFontName(value);}}});}}function getFontSize(){if(this.C){switch(this.aT){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:this.cR=this.C.get_fontSize()||this.cR;break;}}return this.cR;};function setFontSize(value){IPCC.bO.kb(value,'fontSize',0.1,288);this.cR=value;if(this.C){switch(this.aT){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:this.C.set_fontSize(value);break;}}return this;};if(T.cR){T.getFontSize=getFontSize;T.setFontSize=setFontSize;if(Object.defineProperties){Object.defineProperties(T,{"fontSize":{enumerable:true,get:function(){return this.getFontSize();},set:function(value){return this.setFontSize(value);}}});}}function getHorizontalAlignment(){if(this.C){var zJ=this.C.get_textHorizontalAlignment();switch(zJ){case IPCC.Web.UI.HorizontalAlignment.Center:this.mQ="Center";break;case IPCC.Web.UI.HorizontalAlignment.Left:this.mQ="Left";break;case IPCC.Web.UI.HorizontalAlignment.Right:this.mQ="Right";break;}}return this.mQ;};function setHorizontalAlignment(value){IPCC.bO.kZ(value,'horizontalAlignment');var pu=Oh(value,PCCViewer.Mark.HorizontalAlignment);var zJ;switch(pu){case 'Center':zJ=IPCC.Web.UI.HorizontalAlignment.Center;break;case 'Left':zJ=IPCC.Web.UI.HorizontalAlignment.Left;break;case 'Right':zJ=IPCC.Web.UI.HorizontalAlignment.Right;break;default:throw "Invalid value found for the Text horizontalAlignment.";}T.mQ=pu;if(this.C&&zJ!==undefined){this.C.set_textHorizontalAlignment(zJ);this.mQ=pu;}return this;};if(T.mQ){T.getHorizontalAlignment=getHorizontalAlignment;T.setHorizontalAlignment=setHorizontalAlignment;if(Object.defineProperties){Object.defineProperties(T,{"horizontalAlignment":{enumerable:true,get:function(){return this.getHorizontalAlignment();},set:function(value){return this.setHorizontalAlignment(value);}}});}}function aph(Yg){var AG=[];for(var h=0;h<Yg.length;h++){switch(Yg[h]){case "Bold":AG.push(IPCC.Web.UI.FontStyle.Bold);break;case "Italic":AG.push(IPCC.Web.UI.FontStyle.Italic);break;case "Strikeout":AG.push(IPCC.Web.UI.FontStyle.Strikeout);break;case "Underline":AG.push(IPCC.Web.UI.FontStyle.Underline);break;default:throw Error("An unknown font style was encountered: "+Yg[h]);}}if(AG.length===0){AG.push(IPCC.Web.UI.FontStyle.Regular);}return AG;};function getFontStyle(){if(this.C){var pW=[];switch(this.aT){case Mark.Type.TextAreaSignature:case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:var uS=this.C.get_fontStyle();if(uS&IPCC.Web.UI.FontStyle.Bold){pW.push("Bold");}if(uS&IPCC.Web.UI.FontStyle.Italic){pW.push("Italic");}if(uS&IPCC.Web.UI.FontStyle.Strikeout){pW.push("Strikeout");}if(uS&IPCC.Web.UI.FontStyle.Underline){pW.push("Underline");}if(pW.length>0){this.bZ=pW;}break;}}return this.bZ;};function setFontStyle(value){if(!(value instanceof Array)){throw "invalid parameter. The parameter should be an array.";}var Op,h,amx=[];for(h=0;h<value.length;h++){Op=Oh(value[h],PCCViewer.Mark.FontStyles);if(Op===null){throw new RangeError("The value of font styles "+value[h]+" is invalid.");}else{IPCC.bO.kZ(Op,'fontStyle');amx.push(Op);}}this.bZ=amx;var uS=[];uS=aph(this.bZ);var az=this;function aGv(bH){setTimeout(function(){az.C.set_fontStyle(bH);},2);};if(this.C){switch(this.aT){case Mark.Type.TextAreaSignature:case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:var ahj=uS[0];for(h=1;h<uS.length;h++){ahj|=uS[h];}aGv(ahj);break;}}return this;};if(T.bZ){T.getFontStyle=getFontStyle;T.setFontStyle=setFontStyle;if(Object.defineProperties){Object.defineProperties(T,{"fontStyle":{enumerable:true,get:function(){return this.getFontStyle();},set:function(value){return this.setFontStyle(value);}}});}}function getLabel(){if(this.C){switch(this.aT){case Mark.Type.StampAnnotation:case Mark.Type.StampRedaction:this.vd=this.C.get_text()||this.vd;break;}}return this.vd;};function setLabel(value){IPCC.bO.kZ(value,'label');this.vd=value;if(this.C){switch(this.aT){case Mark.Type.StampAnnotation:case Mark.Type.StampRedaction:this.C.set_text(value);break;}}return this;};if(typeof T.vd!=='undefined'){T.getLabel=getLabel;T.setLabel=setLabel;if(Object.defineProperties){Object.defineProperties(T,{"label":{enumerable:true,get:function(){return this.getLabel();},set:function(value){return this.setLabel(value);}}});}}function getReason(){if(this.os===true){throw new Error("This method is not supported when ViewerControlOptions.enableMultipleRedactionReasons is set to false");}if(this.C){switch(this.aT){case Mark.Type.RectangleRedaction:case Mark.Type.TextSelectionRedaction:this.fj=this.C.get_text()||this.fj;break;}}return this.fj;};function setReason(value){if(this.os===true){throw new Error("This method is not supported when ViewerControlOptions.enableMultipleRedactionReasons is set to false");}IPCC.bO.kZ(value,'text');this.fj=value;if(this.C){switch(this.aT){case Mark.Type.RectangleRedaction:this.C.set_text(value);break;case Mark.Type.TextSelectionRedaction:this.C.set_text(value);if(this.bI&&this.bI.length){for(var h=0;h<this.bI.length;h++){this.bI[h].set_text(value);}}break;}}return this;};if(typeof T.fj!=='undefined'){T.getReason=getReason;T.setReason=setReason;if(Object.defineProperties){Object.defineProperties(T,{"reason":{enumerable:true,get:function(){return this.getReason();},set:function(value){return this.setReason(value);}}});}}function getReasons(){if(this.os===false){throw Error('Using multiple redaction reasons is not supported when enableMultipleRedactionReasons is set to false');}return this.gV.slice();};function setReasons(value){if(this.os===false){throw Error('Using multiple redaction reasons is not supported when enableMultipleRedactionReasons is set to false');}IPCC.bO.yZ(value);IPCC.F.forEach(value,function(reason){IPCC.bO.kZ(reason);});this.gV=value.slice();if(this.C){var Xt=this.gV.join("; ");switch(this.aT){case Mark.Type.RectangleRedaction:this.C.set_text(Xt);break;case Mark.Type.TextSelectionRedaction:this.C.set_text(Xt);if(this.bI&&this.bI.length){for(var h=0;h<this.bI.length;h++){this.bI[h].set_text(Xt);}}break;}}return this;};if(typeof T.gV!=='undefined'){T.getReasons=getReasons;T.setReasons=setReasons;if(Object.defineProperties){Object.defineProperties(T,{"reasons":{enumerable:true,get:function(){return this.getReasons();},set:function(value){return this.setReasons(value);}}});}}function getPath(){if(this.C){return this.C.get_pathString();}else{return this.fS;}};function setPath(path){if(path.match(/[^MLC0-9.,\s]/)){throw new Error("The path string contains illegal characters.");}var uf=IPCC.F.XB(path);this.fS=path;if(this.C){this.C.set_pathString(path);this.C.set_pathWidth(uf.width);this.C.set_pathHeight(uf.height);}return this;};if(T.fS){T.setPath=setPath;T.getPath=getPath;if(Object.defineProperties){Object.defineProperties(T,{"path":{enumerable:true,get:getPath,set:setPath}});}}function getHref(){if(this.C){return this.C.get_href();}else{return this.mf;}};function setHref(href){if(href!==null){var aT=typeof href;if(aT!=="undefined"&&aT!=="number"&&aT!=="string"){throw new Error("`href` can only be set to a value that is a Number, String, null, or undefined.");}}this.mf=href;if(this.C){this.C.set_href(href);}if(this.bI){IPCC.F.forEach(this.bI,function(C){C.set_href(href);});}return this;};if(typeof T.mf!=='undefined'){T.setHref=setHref;T.getHref=getHref;if(Object.defineProperties){Object.defineProperties(T,{"href":{enumerable:true,get:getHref,set:setHref}});}}function setMaxLength(maxLength){if(typeof maxLength!=='number'||maxLength<0||maxLength>Number.MAX_VALUE||Math.round(maxLength)!==maxLength){throw new Error('`maxLength` can only be set to a value that is a positive integer.');}this.gF=maxLength;if(this.C){this.C.set_maxLength(this.gF);}return this;};function getMaxLength(){if(this.C){this.gF=this.C.get_maxLength();}return this.gF;};if(typeof T.gF!=='undefined'){T.getMaxLength=getMaxLength;T.setMaxLength=setMaxLength;if(Object.defineProperties){Object.defineProperties(T,{"maxLength":{enumerable:true,get:getMaxLength,set:setMaxLength}});}}function setMaxFontSize(maxFontSize){if(typeof maxFontSize!=='number'||maxFontSize<0||maxFontSize>Number.MAX_VALUE||Math.round(maxFontSize)!==maxFontSize){throw new Error('`maxFontSize` can only be set to a value that is a positive integer.');}this.il=maxFontSize;if(this.C){this.C.set_maxFontSize(this.il);}return this;};function getMaxFontSize(){if(this.C){this.il=this.C.get_maxFontSize();}return this.il;};if(typeof T.il!=='undefined'){T.getMaxFontSize=getMaxFontSize;T.setMaxFontSize=setMaxFontSize;if(Object.defineProperties){Object.defineProperties(T,{"maxFontSize":{enumerable:true,get:getMaxFontSize,set:setMaxFontSize}});}}function getMask(){return this.hX;};function setMask(mask){if(mask===null||typeof mask==='undefined'){this.hX=null;if(this.C){this.C.set_mask(this.hX);}return this;}if(typeof mask!=='object'||Array.isArray(mask)){throw new Error('`mask` can only be set to a value that is an Object, null or undefined.');}if(typeof mask.value!=='string'){throw new Error('`mask.value` can only be set to a value that is a string.');}if(typeof mask.translations!=='object'||mask.translations===null||Array.isArray(mask.translations)){throw new Error('`mask.translations` can only be set to a value that is an Object.');}var afL=false;IPCC.F.forEach(mask.translations,function(val,key){afL=true;if(key.length!==1){throw new Error('`'+key+'` does not have a string length of 1.');}if(!(val instanceof RegExp)|| !(/\/$/).exec(val.toString())){throw new Error('`mask.translations['+key+']` must be a regular expression without flags.');}});if(!afL){throw new Error('`mask.translations` must have at least one translation.');}this.hX=mask;if(this.C){this.C.set_mask(this.hX);}return this;};if(typeof T.hX!=='undefined'){T.getMask=getMask;T.setMask=setMask;if(Object.defineProperties){Object.defineProperties(T,{"mask":{enumerable:true,get:getMask,set:setMask}});}}};module.exports=Mark;},{"./../IPCC/IPCC":29,"./PCCViewer.Data":135}],151:[function(require,module,exports){var EventEmitter=require('./PCCViewer.EventEmitter');var iQ=function(viewerControl,markReferences){var J=this;if(!viewerControl){throw new Error('`viewerControl` param is missing.');}this.dJ=function(){var d=new Date().getTime();var uuid='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c==='x'?r:(r&0x3|0x8)).toString(16);});return uuid;}();this.bF=viewerControl;this.an=undefined;this.abw=undefined;this.aks=undefined;this.bE=[];this.gW={};this.mu=PCCViewer.Mark.InteractionMode.Full;if(markReferences!==undefined){switch(Object.prototype.toString.call(markReferences)){case "[object Object]":markReferences=[markReferences];break;case "[object Array]":break;default:throw new Error('`markReferences` param is not an object or an array.');}IPCC.F.forEach(markReferences,function(qf){var LB=qf.markUid;qf.markupLayer=J;if(J.gW[LB]){J.gW[LB]=J.gW[LB].concat(qf);}else{J.gW[LB]=[qf];}});}var pk={};EventEmitter.extend(pk);pk.Pg=function(DW,co){var J=this;return setTimeout(function(){J.trigger(DW,co);},0);};EventEmitter.extend(this);this.cJ=new IPCC.Web.UI.Data();PCCViewer.Data.extend(this);this.Ez=new IPCC.Web.UI.Data();PCCViewer.SessionData.extend(this);setTimeout(function(){J.trigger(PCCViewer.MarkupLayer.EventType.MarkupLayerCreated,{});},0);};iQ.EventType={MarkupLayerCreated:"MarkupLayerCreated",MarkupLayerDestroyed:"MarkupLayerDestroyed",MarksAddedToLayer:"MarksAddedToLayer",MarksRemovedFromLayer:"MarksRemovedFromLayer",MarkupLayerInteractionModeChanged:"MarkupLayerInteractionModeChanged",MarkupLayerHidden:"MarkupLayerHidden",MarkupLayerShown:"MarkupLayerShown"};iQ.prototype.getViewerControl=function(){return this.bF;};iQ.prototype.addMarks=function(marks){var J=this,aue=function(cf){cf.hZ=J;};switch(Object.prototype.toString.call(marks)){case "[object Object]":marks=[marks];break;case "[object Array]":break;default:throw new Error('`marks` param is not an object or an array.');}for(var h=0;h<marks.length;h++){if(!(marks[h]instanceof PCCViewer.Mark)){throw new Error('`marks` param contains an item that is not an instanceof `PCCViewer.Mark`');}if(this.hasMark(marks[h].getId())){marks.splice(h,1);continue;}IPCC.F.forEach(marks[h].getConversation().getComments(),aue);}if(marks.length){this.bE=this.bE.concat(marks);this.trigger(PCCViewer.MarkupLayer.EventType.MarksAddedToLayer,{marks:marks});}return this;};iQ.prototype.removeMarks=function(marks){switch(Object.prototype.toString.call(marks)){case "[object Object]":marks=[marks];break;case "[object Array]":break;default:throw new Error('`marks` param is not an object or an array.');}for(var h=0;h<this.bE.length;h++){for(var bz=0;bz<marks.length;bz++){if(this.bE[h].getUid()===marks[bz].getUid()){this.bE.splice(h,1);this.trigger(PCCViewer.MarkupLayer.EventType.MarksRemovedFromLayer,{marks:[marks[bz]]});break;}}}};iQ.prototype.getMarks=function(){var anl=[];IPCC.F.forEach(this.bE,function(T){anl.push(T);});return anl;};iQ.prototype.hasMark=function(markId){if(typeof markId!=='string'){throw new Error('`markId` param is not a string.');}var h=0,acF=false,T;for(h;h<this.bE.length;h++){T=this.bE[h];if(T.getId()===markId){acF=true;break;}}return acF;};iQ.prototype.getMarkReferences=function(){var gW=[];for(var mx in this.gW){if(this.gW.hasOwnProperty(mx)){gW=gW.concat(this.gW[mx]);}}return gW;};iQ.prototype.hide=function(){var bF=this.bF;bF.hideMarks(this.getMarks());this.trigger(PCCViewer.MarkupLayer.EventType.MarkupLayerHidden,{});return this;};iQ.prototype.show=function(){var bF=this.bF;bF.showMarks(this.getMarks());this.trigger(PCCViewer.MarkupLayer.EventType.MarkupLayerShown,{});return this;};iQ.prototype.copyLayers=function(markupLayers){var bF=this.bF,J=this;if(markupLayers instanceof PCCViewer.MarkupLayer){markupLayers=[markupLayers];}if(markupLayers instanceof Array===false){throw new PCCViewer.Error("InvalidArgument","The parameter, markupLayers, is not an Array of MarkupLayers or a single MarkupLayer.");}var bE=[];IPCC.F.forEach(markupLayers,function(hZ){bF.getMarkupLayerCollection().getItem(hZ.getId());bE=bE.concat(hZ.getMarks());});var copiedMarks=bF.copyMarks(bE);this.addMarks(copiedMarks);IPCC.F.forEach(this.bE,function(T){IPCC.F.forEach(T.getConversation().getComments(),function(cf){cf.hZ=J;});});return this;};iQ.prototype.getId=function(){return this.dJ;};iQ.prototype.getName=function(){return this.an;};iQ.prototype.setName=function(name){if(typeof name!=='string'){throw new Error('`name` param is not a string.');}this.an=name;return this;};iQ.prototype.getRecordId=function(){return this.abw;};iQ.prototype.destroy=function(){this.bF.getMarkupLayerCollection().removeItem(this.dJ);this.trigger(PCCViewer.MarkupLayer.EventType.MarkupLayerDestroyed,{});};iQ.prototype.setInteractionMode=function(interactionMode){if(typeof interactionMode!=='string'){throw new Error('`interactionMode` param is not a string.');}this.mu=interactionMode;IPCC.F.forEach(this.bE,function(T){T.setInteractionMode(interactionMode);});this.trigger(PCCViewer.MarkupLayer.EventType.MarkupLayerInteractionModeChanged,{interactionMode:interactionMode});return this;};iQ.prototype.getOriginalXmlName=function(){return this.aks;};iQ.prototype.setOriginalXmlName=function(name){if(typeof name!=='string'){throw new Error('`name` param is not a string.');}this.aks=name;return this;};if(Object.defineProperties){Object.defineProperties(iQ.prototype,{"id":{enumerable:true,get:function(){return this.getId();}},"recordId":{enumerable:true,get:function(){return this.getRecordId();}},"name":{enumerable:true,get:function(){return this.getName();},set:function(name){return this.setName(name);}},"viewerControl":{enumerable:true,get:function(){return this.getViewerControl();}},"originalXmlName":{enumerable:true,get:function(){return this.getOriginalXmlName();},set:function(name){return this.setOriginalXmlName(name);}},});}module.exports=iQ;},{"./PCCViewer.EventEmitter":140}],152:[function(require,module,exports){var EventEmitter=require('./PCCViewer.EventEmitter');var MarkupLayerCollection=function(viewerControl){if(!viewerControl){throw new Error('`viewerControl` param is missing.');}this.bF=viewerControl;this.sT={};this.bE={};this.ia={};this.sj=0;EventEmitter.extend(this);};MarkupLayerCollection.EventType={MarkupLayerAdded:"MarkupLayerAdded",MarkupLayerRemoved:"MarkupLayerRemoved"};MarkupLayerCollection.prototype.getViewerControl=function(){return this.bF;};MarkupLayerCollection.prototype.forEach=function(iterator,thisArg){if(typeof iterator!=='function'){throw new TypeError('The iterator parameter is not a function');}IPCC.F.forEach(this.sT,iterator,thisArg);return this;};MarkupLayerCollection.prototype.getItem=function(layerId){if(typeof layerId!=='string'){throw new Error('`layerId` param is not a string.');}return this.sT[layerId];};MarkupLayerCollection.prototype.getCount=function(){return this.sj;};MarkupLayerCollection.prototype.getAll=function(){var amZ=[],Ye;for(Ye in this.sT){if(this.sT.hasOwnProperty(Ye)){amZ.push(this.sT[Ye]);}}return amZ;};MarkupLayerCollection.prototype.addItem=function(layer){var J=this,gW,ZA=layer.gW,EW=function(T,qf){var cf=T.getConversation().addComment(qf.text);cf.creationTime=new Date(qf.creationDateTime);cf.hZ=qf.markupLayer;for(var uR in qf.data){if(qf.data.hasOwnProperty(uR)){cf.setData(uR,qf.data[uR]);}}},aze=function(awB){EW(J.bE[wU],awB);},ahv=function(T){var mx=T.getUid();J.bE[T.getUid()]=T;if(J.ia[mx]){IPCC.F.forEach(J.ia[mx],function(pq){EW(T,pq);});delete J.ia[mx];}};if(!(layer instanceof PCCViewer.MarkupLayer)){throw new Error('`layer` param is not an instance of PCCViewer.MarkupLayer.');}this.sT[layer.getId()]=layer;for(var wU in ZA){if(ZA.hasOwnProperty(wU)){gW=ZA[wU];if(J.bE[wU]){IPCC.F.forEach(gW,aze);}else if(J.ia[wU]){J.ia[wU]=J.ia[wU].concat(gW);}else{J.ia[wU]=gW;}}}IPCC.F.forEach(layer.getMarks(),function(T){ahv(T);});this.sj++;this.trigger(PCCViewer.MarkupLayerCollection.EventType.MarkupLayerAdded,{layerId:layer.getId()});layer.on(PCCViewer.MarkupLayer.EventType.MarksAddedToLayer,function(ev){IPCC.F.forEach(ev.marks,function(T){ahv(T);});});layer.on(PCCViewer.MarkupLayer.EventType.MarksRemovedFromLayer,function(ev){var aAp=ev.da;IPCC.F.forEach(ev.marks,function(T){var mx=T.getUid();IPCC.F.forEach(J.bE[mx].getConversation().getComments(),function(GN){if(aAp.id!==GN.hZ.id){var pq={creationDateTime:IPCC.F.tZ(GN.creationTime),data:GN.cJ.wB(),markUid:T.getUid(),markupLayer:GN.hZ,text:GN.text};if(J.ia[mx]){J.ia[mx]=J.ia[mx].concat([pq]);}else{J.ia[mx]=[pq];}}});J.wV(T);});});return this;};MarkupLayerCollection.prototype.wV=function(T){var LE;IPCC.F.forEach(this.sT,function(ez){var alM=ez.hasMark(T.getId());LE=(typeof LE!=='undefined')? +alM^LE: +alM;});if(LE===0){delete this.bE[T.getUid()];}};MarkupLayerCollection.prototype.removeItem=function(layerId){var ez=this.sT[layerId],J=this,aCl=function(pq,af){if(pq.markupLayer.getId()===layerId){J.ia[dJ].splice(af);}};if(typeof layerId!=='string'){throw new Error('`layerId` param is not a string.');}IPCC.F.forEach(this.bE,function(T){var hu=T.getConversation().getComments();var Rj=ez.hasMark(T.getId());IPCC.F.forEach(hu,function(cf){if(Rj&&cf.hZ.getId()!==layerId){var acp={"markUid":T.getUid(),"markupLayer":cf.hZ,"text":cf.getText(),"data":cf.cJ.cJ,"creationDateTime":IPCC.F.tZ(cf.getCreationTime())};if(J.ia[T.getUid()]){J.ia[T.getUid()].push(acp);}else{J.ia[T.getUid()]=[acp];}T.getConversation().deleteComments(cf);}else if(Rj&&cf.hZ.getId()===layerId){T.getConversation().deleteComments(cf);}else if(!Rj&&cf.hZ.getId()===layerId){T.getConversation().deleteComments(cf);}});if(Rj&&J.bE[T.getUid()]){J.wV(T);}});for(var dJ in this.ia){if(this.ia.hasOwnProperty(dJ)){IPCC.F.forEach(this.ia[dJ],aCl);}}delete this.sT[layerId];this.sj--;this.trigger(PCCViewer.MarkupLayerCollection.EventType.MarkupLayerRemoved,{layerId:layerId});return this;};MarkupLayerCollection.prototype.removeAll=function(){this.sT={};this.sj=0;return this;};if(Object.defineProperties){Object.defineProperties(MarkupLayerCollection.prototype,{"viewerControl":{enumerable:true,get:function(){return this.getViewerControl();}},"count":{enumerable:true,get:function(){return this.getCount();}}});}module.exports=MarkupLayerCollection;},{"./PCCViewer.EventEmitter":140}],153:[function(require,module,exports){'use strict';var Mark=require('./PCCViewer.Marks');function MouseTool(name,type){this.an=name;var JL=apN(type);if(JL===null){throw new RangeError("The value of type was invalid.");}this.aT=JL;addPropertiesToMouseTool(this);};MouseTool.prototype.getName=function(){return this.an;};MouseTool.prototype.getType=function(){return this.aT;};if(Object.defineProperties){Object.defineProperties(MouseTool.prototype,{"name":{enumerable:true,get:function(){return this.getName();}},"type":{enumerable:true,get:function(){return this.getType();}}});}function apN(UM){var abB=UM.toLowerCase();for(var standardType in MouseTool.Type){if(MouseTool.Type.hasOwnProperty(standardType)&&standardType.toLowerCase&&standardType.toLowerCase()===abB){return standardType;}}return null;};function addPropertiesToMouseTool(mouseTool){var aT=mouseTool.getType();switch(aT){case MouseTool.Type.Magnifier:break;case MouseTool.Type.SelectToZoom:break;case MouseTool.Type.Pan:mouseTool.zl=false;break;case MouseTool.Type.PanAndEdit:mouseTool.zl=true;break;case MouseTool.Type.SelectText:break;case MouseTool.Type.EditMarks:break;case MouseTool.Type.LineAnnotation:mouseTool.bj=new Mark({type:Mark.Type.LineAnnotation});break;case MouseTool.Type.RectangleAnnotation:mouseTool.bj=new Mark({type:Mark.Type.RectangleAnnotation});break;case MouseTool.Type.EllipseAnnotation:mouseTool.bj=new Mark({type:Mark.Type.EllipseAnnotation});break;case MouseTool.Type.TextAnnotation:mouseTool.bj=new Mark({type:Mark.Type.TextAnnotation});break;case MouseTool.Type.StampAnnotation:mouseTool.bj=new Mark({type:Mark.Type.StampAnnotation});break;case MouseTool.Type.HighlightAnnotation:mouseTool.bj=new Mark({type:Mark.Type.HighlightAnnotation});break;case MouseTool.Type.TextHyperlinkAnnotation:mouseTool.bj=new Mark({type:Mark.Type.TextHyperlinkAnnotation});break;case MouseTool.Type.FreehandAnnotation:mouseTool.bj=new Mark({type:Mark.Type.FreehandAnnotation});break;case MouseTool.Type.RectangleRedaction:mouseTool.bj=new Mark({type:Mark.Type.RectangleRedaction});break;case MouseTool.Type.TransparentRectangleRedaction:mouseTool.bj=new Mark({type:Mark.Type.TransparentRectangleRedaction});break;case MouseTool.Type.TextRedaction:mouseTool.bj=new Mark({type:Mark.Type.TextRedaction});break;case MouseTool.Type.TextInputSignature:mouseTool.bj=new Mark({type:Mark.Type.TextInputSignature});break;case MouseTool.Type.TextAreaSignature:mouseTool.bj=new Mark({type:Mark.Type.TextAreaSignature});break;case MouseTool.Type.StampRedaction:mouseTool.bj=new Mark({type:Mark.Type.StampRedaction});break;case MouseTool.Type.PlaceSignature:mouseTool.bj=new Mark({type:'PlaceSignature',zI:true});break;case MouseTool.Type.TextSelectionRedaction:mouseTool.bj=new Mark({type:Mark.Type.TextSelectionRedaction});break;case MouseTool.Type.ImageStampAnnotation:mouseTool.bj=new Mark({type:Mark.Type.ImageStampAnnotation});break;case MouseTool.Type.ImageStampRedaction:mouseTool.bj=new Mark({type:Mark.Type.ImageStampRedaction});break;case MouseTool.Type.PolylineAnnotation:mouseTool.bj=new Mark({type:Mark.Type.PolylineAnnotation});break;case MouseTool.Type.StrikethroughAnnotation:mouseTool.bj=new Mark({type:Mark.Type.StrikethroughAnnotation});break;}if(mouseTool.bj){mouseTool.getTemplateMark=function(){return this.bj;};if(Object.defineProperties){Object.defineProperties(mouseTool,{"templateMark":{enumerable:true,get:mouseTool.getTemplateMark}});}}};MouseTool.prototype.reset=function(){if(this.bj){this.bj.reset();}};var MouseTools={rX:{},createMouseTool:function(name,type){if(!this.rX){this.rX={};createDefaultMouseTools();}var zL=name.toLowerCase();var existingTool=this.rX[zL];if(existingTool){if(existingTool.getType().toLowerCase()!==type.toLowerCase()){throw new Error("If calling createMouseTool and providing the name of a mouse tool that already exists, then the type must be the same type as the existing mouse tool.");}existingTool.reset();}else{this.rX[zL]=new MouseTool(name,type);}return this.rX[zL];},getMouseTool:function(name){if(name&&name.toLowerCase){if(!this.rX){this.rX={};createDefaultMouseTools();}var zL=name.toLowerCase();return this.rX[zL];}return undefined;}};MouseTool.Type={Magnifier:"Magnifier",SelectToZoom:"SelectToZoom",Pan:"Pan",PanAndEdit:"PanAndEdit",SelectText:"SelectText",EditMarks:"EditMarks",LineAnnotation:"LineAnnotation",RectangleAnnotation:"RectangleAnnotation",EllipseAnnotation:"EllipseAnnotation",TextAnnotation:"TextAnnotation",StampAnnotation:"StampAnnotation",HighlightAnnotation:"HighlightAnnotation",TextHyperlinkAnnotation:"TextHyperlinkAnnotation",FreehandAnnotation:"FreehandAnnotation",RectangleRedaction:"RectangleRedaction",TransparentRectangleRedaction:"TransparentRectangleRedaction",TextRedaction:"TextRedaction",TextInputSignature:"TextInputSignature",TextAreaSignature:"TextAreaSignature",StampRedaction:"StampRedaction",PlaceSignature:"PlaceSignature",TextSelectionRedaction:"TextSelectionRedaction",ImageStampAnnotation:"ImageStampAnnotation",ImageStampRedaction:"ImageStampRedaction",PolylineAnnotation:"PolylineAnnotation",StrikethroughAnnotation:"StrikethroughAnnotation"};function createDefaultMouseTools(){MouseTools.createMouseTool("AccusoftMagnifier",MouseTool.Type.Magnifier);MouseTools.createMouseTool("AccusoftSelectToZoom",MouseTool.Type.SelectToZoom);MouseTools.createMouseTool("AccusoftPan",MouseTool.Type.Pan);MouseTools.createMouseTool("AccusoftPanAndEdit",MouseTool.Type.PanAndEdit);MouseTools.createMouseTool("AccusoftSelectText",MouseTool.Type.SelectText);MouseTools.createMouseTool("AccusoftEditMarks",MouseTool.Type.EditMarks);MouseTools.createMouseTool("AccusoftLineAnnotation",MouseTool.Type.LineAnnotation);MouseTools.createMouseTool("AccusoftArrowAnnotation",MouseTool.Type.LineAnnotation).getTemplateMark().setEndHeadType("FilledTriangle");MouseTools.createMouseTool("AccusoftRectangleAnnotation",MouseTool.Type.RectangleAnnotation);MouseTools.createMouseTool("AccusoftEllipseAnnotation",MouseTool.Type.EllipseAnnotation);MouseTools.createMouseTool("AccusoftTextAnnotation",MouseTool.Type.TextAnnotation);MouseTools.createMouseTool("AccusoftStampAnnotation",MouseTool.Type.StampAnnotation);MouseTools.createMouseTool("AccusoftHighlightAnnotation",MouseTool.Type.HighlightAnnotation);MouseTools.createMouseTool("AccusoftTextHyperlinkAnnotation",MouseTool.Type.TextHyperlinkAnnotation);MouseTools.createMouseTool("AccusoftFreehandAnnotation",MouseTool.Type.FreehandAnnotation);MouseTools.createMouseTool("AccusoftPlaceSignature",MouseTool.Type.PlaceSignature);MouseTools.createMouseTool("AccusoftTextSelectionRedaction",MouseTool.Type.TextSelectionRedaction);MouseTools.createMouseTool("AccusoftRectangleRedaction",MouseTool.Type.RectangleRedaction);MouseTools.createMouseTool("AccusoftTransparentRectangleRedaction",MouseTool.Type.TransparentRectangleRedaction);MouseTools.createMouseTool("AccusoftTextRedaction",MouseTool.Type.TextRedaction);MouseTools.createMouseTool("AccusoftTextInputSignature",MouseTool.Type.TextInputSignature);MouseTools.createMouseTool("AccusoftTextAreaSignature",MouseTool.Type.TextAreaSignature);MouseTools.createMouseTool("AccusoftStampRedaction",MouseTool.Type.StampRedaction);MouseTools.createMouseTool("AccusoftImageStampAnnotation",MouseTool.Type.ImageStampAnnotation);MouseTools.createMouseTool("AccusoftImageStampRedaction",MouseTool.Type.ImageStampRedaction);MouseTools.createMouseTool("AccusoftPolylineAnnotation",MouseTool.Type.PolylineAnnotation);MouseTools.createMouseTool("AccusoftStrikethroughAnnotation",MouseTool.Type.StrikethroughAnnotation);return MouseTools.rX;};createDefaultMouseTools();module.exports={MouseTool:MouseTool,MouseTools:MouseTools};},{"./PCCViewer.Marks":150}],154:[function(require,module,exports){var EventEmitter=require('./PCCViewer.EventEmitter');var ObservableCollection=function(){var CC=[];var pk={};EventEmitter.extend(pk);pk.Pg=function(DW,co){var J=this;return setTimeout(function(){J.trigger(DW,co);},0);};this.add=function(item){CC.push(item);pk.Pg(this.EventType.ItemAdded,{item:item,count:CC.length});return this;};this.remove=function(item){var J=this;this.forEach(function(e,idx){if(e===item){CC.splice(idx,1);pk.Pg(J.EventType.ItemRemoved,{item:item,count:CC.length});}});return this;};this.removeAll=function(){CC=[];pk.Pg(this.EventType.ItemRemoved,{count:CC.length});return this;};this.forEach=function(iterator,thisArg){if(typeof iterator!=='function'){throw new TypeError('The iterator parameter is not a function');}IPCC.F.forEach(this.toArray(),iterator,thisArg);return this;};this.toArray=function(){return[].concat(CC);};this.on=function(eventType,handler){pk.on.apply(pk,arguments);return this;};this.off=function(eventType,handler){pk.off.apply(pk,arguments);return this;};};ObservableCollection.prototype.EventType={ItemAdded:"ItemAdded",ItemRemoved:"ItemRemoved"};module.exports=ObservableCollection;},{"./PCCViewer.EventEmitter":140}],155:[function(require,module,exports){var Bk={Horizontal:"Horizontal",Vertical:"Vertical"};module.exports=Bk;},{}],156:[function(require,module,exports){var PasswordProtectedDocumentLoader=function PasswordProtectedDocumentLoader(Wb){this.Wb=Wb;};PasswordProtectedDocumentLoader.prototype.load=function(password){return this.Wb(password);};module.exports=PasswordProtectedDocumentLoader;},{}],157:[function(require,module,exports){var printAlgorithm={standard:1,contentWindowContents:2};var SV=function SV(bp,cY,R){if(bp.addEventListener){bp.addEventListener(cY,R,false);}else if(bp.attachEvent){bp.attachEvent('on'+cY,R);}};var TU=function TU(bp,cY,R){if(bp.removeEventListener){bp.removeEventListener(cY,R,false);}else if(bp.detachEvent){bp.detachEvent('on'+cY,R);}};function azp(eY){var aen={};eY=eY.split('&');for(var i=eY.length;i--;){var q=eY[i].split('=');aen[q.shift()]=q.join('=');}return aen;};function aCq(){var yx=document.getElementById('pccPrintFrame');if(yx){if(yx.contentWindow&&yx.contentWindow.destroy){yx.contentWindow.destroy();}if(yx.parentElement){yx.parentElement.removeChild(yx);}}};function apU(bB){bB.ang();aCq();bB.amh();if(!bB.algorithm){bB.algorithm=printAlgorithm.standard;}var gA;var gO=document.createElement('iframe');gO.id='pccPrintFrame';gO.className='pccPrintFrame';gO.style.position='absolute';gO.style.bottom=gO.style.right='0px';gO.style.width=gO.style.height='1px';gO.style.zIndex='0';gO.style.border='none';if(bB.algorithm!==printAlgorithm.contentWindowContents){gO.style.visibility='0';}function LC(){TU(window,'message',ano);};function aaX(){TU(gO,'load',aaX);if(gO.contentDocument){gA=gO.contentDocument;}else if(gO.contentWindow){gA=gO.contentWindow.document;}else{gA=gO.document;}if(bB.algorithm===printAlgorithm.contentWindowContents){gO.contentWindow.contents=bB.template;gO.src='javascript:window["contents"]';}else{gA.open();gA.write(bB.template);gA.close();}};var ano=function(message){message.source.PCCViewer.Ajax.setHeaders(PCCViewer.Ajax.getHeaders()).setOverrideMethod(PCCViewer.Ajax.getOverrideMethod());if(message.data.match(/loadArt/)){var agd=JSON.parse(message.data);var am=bB.agz(agd.pageIndex);bB.ang();gO.contentWindow[agd.callbackName](am);bB.amh();}else if(message.data==='extra'){var JH=bB.abl(bB);gO.contentWindow['extra'](bB.encryption,JH);}else if(message.data==='done'){if(bB.algorithm===printAlgorithm.contentWindowContents){setTimeout(function(){gO.contentWindow.focus();gO.contentWindow.document.execCommand('print',false,null);window.focus();LC();bB.ut.trigger(PCCViewer.PrintRequest.EventType.PrintCompleted);},2000);}else{setTimeout(function(){gO.contentWindow.focus();gO.contentWindow.print();window.focus();LC();bB.ut.trigger(PCCViewer.PrintRequest.EventType.PrintCompleted);},2000);}}else if(message.data==='fail'){LC();bB.ut.trigger(PCCViewer.PrintRequest.EventType.PrintFailed);}else{var sO=azp(message.data);sO.index= +sO.index;sO.pageNumber= +sO.pageNumber;sO.totalPages= +sO.totalPages;bB.ut.aaQ= +sO.index+1;bB.ut.trigger(PCCViewer.PrintRequest.EventType.PrintPagePrepared,sO);}};SV(window,'message',ano);SV(gO,'load',aaX);document.body.appendChild(gO);return LC;};function aqV(bF){return function agz(ae){return bF.ab.gC(bF.cS.getPage(ae));};};function aqW(bF){return function abl(options){var bE,T,uJ=[],zu=[],CO={},Ko={},xy={},fj={},Dy='',ali,cl,af,JY,al,Jz,ak,adJ={},DA={},h=0,cc=0,bz=0,aqR=function(a,b){return a-b;};if(options.includeComments!=='none'||options.includeReasons!=='none'){bE=bF.getAllMarks();for(h=0;h<options.pages.length;h++){adJ[options.pages[h]]=true;}for(cc=0;cc<bE.length;cc++){T=bE[cc];ak=T.ak;if(options.includeReasons!=='none'&&(T.getReason||T.getReasons)){Dy=T.C.get_text();if(Dy){if(!xy[ak]){fj[Dy]=1;xy[ak]=fj;fj={};}else{if(xy[ak][Dy]){xy[ak][Dy]+=1;}else{xy[ak][Dy]=1;}}}}if(T.oH||T.aT.search("Redaction")!== -1){if(DA[ak]){DA[ak]+=1;}else{DA[ak]=1;}}if(options.range.length&&adJ[ak]!==true|| !options.includeRedactions&&T.oH|| !options.includeAnnotations&& !T.oH){continue;}cl=T.getConversation();if(cl&&cl.getComments().length){if(!JY){JY=ak;}else if(ak!==JY){uJ.sort(aqR);for(bz=0;bz<uJ.length;bz++){zu=zu.concat(CO[uJ[bz]]);}Ko[JY]=zu;JY=ak;uJ=[];CO={};zu=[];}af=bF.getCharacterIndex(T);ali=ak;al=T.C.get_boundingRectangle();Jz=(af>0)?af*10000+al.y:al.y;uJ.push(Jz);if(!CO[Jz]){CO[Jz]=[cl];}else{CO[Jz].push(cl);}}}if(uJ.length){uJ.sort(function(a,b){return a-b;});for(h=0;h<uJ.length;h++){zu=zu.concat(CO[uJ[h]]);}Ko[ali]=zu;}}return{Ko:Ko,xy:xy,DA:DA};};};function azg(bF){return function(){if(bF&&bF.ab){bF.ab.remove_markChanged(bF.oj);}};};function VB(bF){return function(){if(bF&&bF.ab){bF.ab.add_markChanged(bF.oj);}};};function print(options){options=options||{};options.range=options.range||'all';options.orientation=(options.orientation&&options.orientation.toLowerCase()==='landscape')?'landscape':'portrait';options.paperSize=options.paperSize||'letter';options.margins=(options.margins&&options.margins.toLowerCase()==='none')?'none':'default';options.includeMarks=options.includeMarks!==undefined?(! !options.includeMarks&&this.canPrintMarks()):undefined;options.includeAnnotations=options.includeAnnotations!==undefined?(! !options.includeAnnotations&&this.canPrintMarks()):undefined;options.includeRedactions=options.includeRedactions!==undefined?(! !options.includeRedactions&&this.canPrintMarks()):undefined;options.includeComments=(options.includeComments)?options.includeComments:'none';options.includeReasons=(options.includeReasons)?options.includeReasons:'none';options.redactionViewMode=(options.redactionViewMode)?options.redactionViewMode:'Normal';if(options.includeAnnotations===undefined){options.includeAnnotations=options.includeMarks;}if(options.includeRedactions===undefined){options.includeRedactions=options.includeMarks;}var cQ=PCCViewer.Util.convertPageRangeToArray(options.range.toString().toLowerCase(),{upperLimit:this.getPageCount()});var oc=this.bB.imageHandlerUrl;var apt=this.bB.documentID;var asX=this.azt;options.vsID=apt;options.handler=oc;options.pages=cQ;var isOldIE= ! !navigator.appName.match('Microsoft');var isIE= ! !navigator.userAgent.match('Trident');var isSafari= ! !(navigator.userAgent.search('Safari')>=0&&navigator.userAgent.search('Chrome')<0);options.template=asX.replace(/{{viewingSessionId}}/g,options.vsID).replace(/{{handler}}/g,options.handler).replace(/{{pages}}/g,options.pages.join(',')).replace(/{{orientation}}/g,options.orientation).replace(/{{paperSize}}/g,options.paperSize).replace(/{{isIE}}/g,isIE.toString()).replace(/{{isSafari}}/g,isSafari.toString()).replace(/{{includeAnnotations}}/g,options.includeAnnotations).replace(/{{includeRedactions}}/g,options.includeRedactions).replace(/{{includeComments}}/g,options.includeComments).replace(/{{includeReasons}}/g,options.includeReasons).replace(/{{margins}}/g,options.margins).replace(/{{redactionViewMode}}/g,options.redactionViewMode).replace(/{{viewerAssetsPath}}/g,this.bB.viewerAssetsPath);options.encryption= ! !this.bB.encryption;if(isOldIE){options.algorithm=printAlgorithm.contentWindowContents;}var Zq;function aB(){if(! !Zq){Zq();}};var ut=new PCCViewer.PrintRequest(options,cQ.length,aB,this);this.trigger(PCCViewer.EventType.PrintRequested,{printRequest:ut});options.ut=ut;options.agz=aqV(this);options.abl=aqW(this);options.ang=azg(this);options.amh=VB(this);Zq=apU(options);return ut;};function validatePrintRange(range){return PCCViewer.Util.validatePageRange(range.toString().toLowerCase(),{upperLimit:this.getPageCount()});};function canPrintMarks(){return(document.documentMode!==8);};var PrintRequest=function(options,totalPages,cancelFunc,that){this.bB=options;this.aB=cancelFunc;this.aaQ=0;PCCViewer.EventEmitter.extend(this);};PrintRequest.EventType={PrintPagePrepared:"PrintPagePrepared",PrintCompleted:"PrintCompleted",PrintCancelled:"PrintCancelled",PrintFailed:"PrintFailed"};PrintRequest.prototype.cancel=function(){this.aB();this.trigger(PCCViewer.PrintRequest.EventType.PrintCancelled);};PrintRequest.prototype.getOptions=function(){return{range:this.bB.pages.toString(),orientation:this.bB.orientation,paperSize:this.bB.paperSize,margins:this.bB.margins,includeMarks:this.bB.includeMarks,includeAnnotations:this.bB.includeAnnotations,includeRedactions:this.bB.includeRedactions,includeComments:this.bB.includeComments,includeReasons:this.bB.includeReasons,redactionViewMode:this.bB.redactionViewMode};};PrintRequest.prototype.getPageCount=function(){return this.bB.pages.length;};PrintRequest.prototype.getPreparedCount=function(){return this.aaQ;};if(Object.defineProperties){Object.defineProperties(PrintRequest.prototype,{"options":{enumerable:true,get:function(){return this.getOptions();}},"pageCount":{enumerable:true,get:function(){return this.getPageCount();}},"preparedCount":{enumerable:true,get:function(){return this.getPreparedCount();}}});}var PrintControl=function(domElement,options){var adp=[];IPCC.F.YZ=true;options.includeAnnotations=options.includeAnnotations!=='false';options.includeRedactions=options.includeRedactions!=='false';domElement.className=domElement.className+' '+options.orientation;function zZ(n){(window.parent)?window.parent.postMessage(n,'*'):window.opener.postMessage(n,'*');};function aAv(ak,Hi){var kS=[];kS.push("pageNumber="+(1+ak));kS.push("index="+Hi);kS.push("totalPages="+options.pages.length);return kS.join('&');};function jF(ak,Hi,next){var bg={documentIdentifier:options.vsID,pageNumber:ak,viewFitType:IPCC.Web.UI.FitType.FullImage,imageHandlerUrl:options.handler,encryption:options.encryption};var jf=document.createElement('div');jf.className=options.paperSize+" ";jf.className+=options.isIE?'pageIE':options.isSafari?'pageSafari':'page';jf.id='printpage'+ak;if(options.margins==='none'){jf.className+=' nomargins';}domElement.appendChild(jf);var pv=IPCC.initializePageViewPlugin(jf,bg);pv.set_debug(false);pv.set_requireRequestsOptimize(true);adp.push(pv);var wP=false;function ET(){zZ(aAv(ak,Hi));next();};pv.add_pageOpened(function(){var aS=pv.ki(),aq=pv.jE();var vQ=(options.orientation==='portrait'&&aS>aq)||(options.orientation==='landscape'&&aq>aS);if(vQ){pv.vQ(90);}});pv.add_pageDisplayed(function(){if(!wP){ET();}});pv.add_textPageReady(function(){if(wP){pv.dN();ET();}});pv.add_pageOpenFailed(function(){zZ('fail');});pv.add_textExtractionFailed(function(){if(wP){zZ('fail');}});if(options.redactionViewMode){if(options.redactionViewMode.toLowerCase()==="draft"){pv.qa(true);}else if(options.redactionViewMode.toLowerCase()==="normal"){pv.qa(false);}}if(PCCViewer.ViewerControl.prototype.canPrintMarks()&&(options.includeAnnotations||options.includeRedactions)){var ajC='loadArt'+ak;var sO={pageIndex:ak,callbackName:ajC};window[ajC]=function(am){var nl,Lx,h,cl={},Oj={},Cu='',pr,gV,fj,Fj='';var Ll=[];am.Fp(function(T){if(T.get_type()===IPCC.Web.UI.MarkType.HighlightText){wP=true;}if(options.includeRedactions&&T.lq()){Ll.push(T);}if(options.includeAnnotations&& !T.lq()){Ll.push(T);}});var acb=new IPCC.Web.UI.ArtPage();IPCC.F.forEach(Ll,function(T){T.nc(undefined);acb.addMark(T);});bg.artPage=acb;Oj=options.pagedConversations[ak+1];if(options.pagedConversations&&Oj&&options.includeComments==='followingPage'){nl=document.createElement('div');nl.className+='commentPage';nl.id='printcommentpage'+ak;if(options.margins==='none'){nl.className+=' nomargins';}Lx='<h1>Comments for Page {{pageNumber}}</h1><hr><div class="pageConversations">{{conversationList}}</div>';for(h=0;h<Oj.length;h++){cl=Oj[h];Cu+=abn(cl,ak+1);}nl.innerHTML=Lx.replace('{{pageNumber}}',ak+1).replace('{{conversationList}}',Cu);domElement.appendChild(nl);}gV=options.pagedReasons[ak+1];if(options.pagedReasons&&gV&&options.includeReasons==='followingPage'){pr=document.createElement('div');pr.className+='reasonPage';pr.id='printreasonpage'+ak;if(options.margins==='none'){pr.className+=' nomargins';}Lx='<h1>Redaction Reasons for Page {{pageNumber}}</h1>'+'<div class="redactionReasonPageHeader"><ul><li>Date: {{date}}</li><li>Number of Redactions on this Page: {{count}}</li></div><hr>'+'<div class="pageReasons">{{reasonList}}</div>';for(fj in gV){if(gV.hasOwnProperty(fj)){Fj+=aaF(fj,gV[fj]);}}pr.innerHTML=Lx.replace('{{pageNumber}}',ak+1).replace('{{reasonList}}',Fj).replace('{{date}}',akB()).replace('{{count}}',options.pagedRedactionCount[ak+1]);domElement.appendChild(pr);}pv.openPage(bg);IPCC.F.forEach(Ll,function(T){T.nc(am);});};zZ(JSON.stringify(sO));}else{pv.openPage(bg);}};function abn(cl,ak){var ahG='',jj='',T=cl.getMark(),hu,cf,h;switch(T.C.ik()){case IPCC.Web.UI.MarkType.Rectangle:jj=(T.C.lq())?'Highlight Redaction ':'Rectangle Annotation';break;case IPCC.Web.UI.MarkType.Ellipse:jj='Ellipse Annotation';break;case IPCC.Web.UI.MarkType.RectangleRedaction:jj='Rectangle Redaction';break;case IPCC.Web.UI.MarkType.Line:jj=(T.lO==='None')?'Line Annotation':'Arrow Annotation';break;case IPCC.Web.UI.MarkType.Polyline:jj='Polyline Annotation';break;case IPCC.Web.UI.MarkType.Polygon:jj='Polygon Annotation';break;case IPCC.Web.UI.MarkType.Text:jj='Text Annotation';break;case IPCC.Web.UI.MarkType.Highlight:jj='Highlight Annotation';break;case IPCC.Web.UI.MarkType.Stamp:jj='Stamp Annotation';break;case IPCC.Web.UI.MarkType.HighlightText:jj='Highlight Text Annotation';break;case IPCC.Web.UI.MarkType.SignaturePath:jj='Signature Path';break;case IPCC.Web.UI.MarkType.Freehand:jj='Freehand Annotation';break;case IPCC.Web.UI.MarkType.SignatureText:jj='Signature Text';break;case IPCC.Web.UI.MarkType.TextLine:jj='Text Input Signature';break;case IPCC.Web.UI.MarkType.TextAreaSignature:jj='Text Area Signature';break;case IPCC.Web.UI.MarkType.SignatureImage:jj='Signature Image';break;case IPCC.Web.UI.MarkType.TextSelectionRedaction:jj='Text Selection Redaction';break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:jj='Image Stamp Annotation';break;case IPCC.Web.UI.MarkType.ImageStampRedaction:jj='Image Stamp Redaction';break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:jj='Text Hyperlink Annotation';break;case IPCC.Web.UI.MarkType.Strikethrough:jj='Strikethrough Annotation';break;default:break;}hu=cl.getComments();for(h=0;h<hu.length;h++){cf=hu[h];ahG+='<li>'+aCN({text:cf.getText(),createDate:cf.ob.Zn,pageNumber:ak+1})+'</li>';}return '<h3>'+jj+'</h3><ul>'+ahG+'</ul>';};function aCN(cf){var ja=new Date(cf.createDate),ZL='{{month}}/{{day}}/{{year}} {{hour}}:{{minutes}}{{period}}'.replace('{{month}}',ja.getMonth()+1).replace('{{day}}',ja.getDate()).replace('{{year}}',ja.getFullYear()).replace('{{hour}}',(ja.getHours()<10?'0':'')+ja.getHours()).replace('{{minutes}}',(ja.getMinutes()<10?'0':'')+ja.getMinutes()).replace('{{period}}',ja.getHours()<12?'am':'pm');var aD=cf.text.replace(/</g,'&#60;').replace(/>/g,'&#62;').replace(/\n/g,'<br/>');return "{{comment}} - {{date}}".replace('{{comment}}',aD).replace('{{date}}',ZL);};function akB(){var ja=new Date();return '{{month}}/{{day}}/{{year}}'.replace('{{month}}',ja.getMonth()+1).replace('{{day}}',ja.getDate()).replace('{{year}}',ja.getFullYear());};function aaF(fj,sj){fj=fj.replace(/</g,'&#60;').replace(/>/g,'&#62;').replace(/\n/g,'<br/>');var atk=(sj>1)?'times':'time';return '<li>"{{reason}}" occurs {{count}} {{times}}</li>'.replace('{{reason}}',fj).replace('{{count}}',sj).replace('{{times}}',atk);};function azI(){window.onerror=function(ev){zZ('fail');};function sync(funcs,done){var counter=funcs.length;var idx=0;var next=function(){if(--counter===0)done();else funcs[idx++](next);};funcs[idx++](next);};function aAY(ak,Hi){return function(next){jF(ak,Hi,next);};};var funcs=[];for(var i=0;i<options.pages.length;i++){var aO= +options.pages[i]-1;funcs.push(aAY(aO,i));}sync(funcs,function(){var nl,QK='',aO,Dx='',Cu='',cl,T,aft='<h1>Comments</h1><hr>{{pageSections}}',pr,Fj='',azx='<h1>Redaction Reasons</h1><hr>{{pageSections}}';if(options.includeComments==='documentEnd'){for(aO in options.pagedConversations){if(options.pagedConversations.hasOwnProperty(aO)){if(!nl){nl=document.createElement('div');nl.className+=' commentPage';nl.id='printpage_comments';if(options.margins==='none'){nl.className+=' nomargins';}}QK='<div class="pageConversations"><h2>Page #{{pageNumber}}</h2><hr><ol>{{conversationList}}</ol></div>';Cu='';for(var h=0;h<options.pagedConversations[aO].length;h++){cl=options.pagedConversations[aO][h];T=cl.getMark();Cu+=abn(cl,T.pageNumber);}Dx+=QK.replace('{{pageNumber}}',T.pageNumber).replace('{{conversationList}}',Cu);if(Cu.length){nl.innerHTML=aft.replace('{{pageSections}}',Dx);domElement.appendChild(nl);}}}}if(options.includeReasons==='documentEnd'){Dx='';aft='';QK='<div class="pageReasons"><h2>Page #{{pageNumber}}</h2><div class="redactionReasonPageHeader"><ul><li>Date: {{date}}</li><li>Number of Redactions on this Page: {{count}}</li></div><hr><ul>{{reasonList}}</ul></div>';for(aO in options.pagedReasons){if(options.pagedReasons.hasOwnProperty(aO)){if(!pr){pr=document.createElement('div');pr.className+='reasonPage';pr.id='printpage_reason';if(options.margins==='none'){pr.className+=' nomargins';}}Fj='';for(var fj in options.pagedReasons[aO]){if(options.pagedReasons[aO].hasOwnProperty(fj)){Fj+=aaF(fj,options.pagedReasons[aO][fj]);}}Dx+=QK.replace('{{pageNumber}}',aO).replace('{{reasonList}}',Fj).replace('{{date}}',akB()).replace('{{count}}',options.pagedRedactionCount[aO]);}}if(Dx.length){pr.innerHTML=azx.replace('{{pageSections}}',Dx);domElement.appendChild(pr);}}zZ('done');});};function ase(){window['extra']=function(bool,JH){options.encryption= ! !bool;options.pagedConversations=JH.Ko;options.pagedReasons=JH.xy;options.pagedRedactionCount=JH.DA;azI();window['extra']=function(){};};zZ('extra');};function aox(){var am;IPCC.F.forEach(adp,function(aw){am=aw.get_artPage();if(am){am.removeAllMarks();}aw.dispose();am=undefined;});};window['destroy']=aox;ase();};module.exports={PrintRequest:PrintRequest,PrintControl:PrintControl,print:print,validatePrintRange:validatePrintRange,canPrintMarks:canPrintMarks};},{}],158:[function(require,module,exports){var aBL={Draft:"Draft",Normal:"Normal"};module.exports=aBL;},{}],159:[function(require,module,exports){var Revision=function(){this.dJ=0;this.vZ=0;this.aT='';};Revision.prototype.getId=function(){return this.dJ;};Revision.prototype.getEndPageNumber=function(){return this.vZ;};Revision.prototype.getType=function(){return this.aT;};if(Object.defineProperties){Object.defineProperties(Revision.prototype,{"endPageNumber":{enumerable:true,get:function(){return this.vZ;}},"id":{enumerable:true,get:function(){return this.dJ;}},"type":{enumerable:true,get:function(){return this.aT;}}});}Revision.Type={ContentInserted:"ContentInserted",ContentDeleted:"ContentDeleted",PropertyChanged:"PropertyChanged",ParagraphNumberChanged:"ParagraphNumberChanged",FieldDisplayChanged:"FieldDisplayChanged",RevisionMarkedAsReconciledConflict:"RevisionMarkedAsReconciledConflict",RevisionMarkedAsConflict:"RevisionMarkedAsConflict",StyleChanged:"StyleChanged",ContentReplaced:"ContentReplaced",ParagraphPropertyChanged:"ParagraphPropertyChanged",TablePropertyChanged:"TablePropertyChanged",SectionPropertyChanged:"SectionPropertyChanged",StyleDefinitionChanged:"StyleDefinitionChanged",ContentMovedFrom:"ContentMovedFrom",ContentMovedTo:"ContentMovedTo",TableCellInserted:"TableCellInserted",TableCellDeleted:"TableCellDeleted",TableCellsMerged:"TableCellsMerged",Unknown:"Unknown"};module.exports=Revision;},{}],160:[function(require,module,exports){var Kz=function(bB){var jW=new PCCViewer.RevisionsRequest(true);function aFv(aT){for(var Rv in PCCViewer.Revision.Type){if(PCCViewer.Revision.Type.hasOwnProperty(Rv)){if(Rv.toLowerCase()===aT.toLowerCase()){return PCCViewer.Revision.Type[Rv];}}}return PCCViewer.Revision.Type.Unknown;};function aCo(fV,ad){var vi=[];if(fV.changes&&fV.changes.length){vi=fV.changes.map(function(Xh){var PB=new PCCViewer.Revision();PB.dJ=Xh.id;PB.vZ=Xh.endPageIndex+1;PB.aT=aFv(Xh.type);return PB;});}return vi;};function apr(OA){var abS=OA?'&continueToken='+OA:'';var aqN=bB.imageHandlerUrl+'/v2/viewingSessions/'+bB.documentID;return aqN+'/revisionData?limit=100'+abS;};function akQ(OA){var aa=PCCViewer.Deferred();var bQ=apr(OA);PCCViewer.Ajax.eg({url:bQ,method:'GET'}).then(function fl(ac){var cJ=JSON.parse(ac.responseText);var DZ=cJ.continueToken;var vi=aCo(cJ,jW.Ks.length);jW.Ks=jW.Ks.concat(vi);if(DZ){if(vi.length){jW.trigger(PCCViewer.EventType.PartialRevisionsAvailable,{partialRevisions:vi});}setTimeout(function(){akQ(DZ);},cJ.continueAfter||0);}else{if(vi.length){jW.trigger(PCCViewer.EventType.PartialRevisionsAvailable,{partialRevisions:vi});}jW.trigger(PCCViewer.EventType.RevisionsAvailable,{completedRevisions:jW.getRevisions()});jW.trigger(PCCViewer.EventType.RevisionsRetrievalCompleted,{completedRevisions:jW.getRevisions()});}aa.resolve();},function eG(aj){var fv='RequestFailed';var cF='The request to get revisions failed.';var mE=aj.response.responseText?JSON.parse(aj.response.responseText):'';var im=aj.response.status;if(mE&&(im===580||(im===480&&mE.errorCode==='DocumentNotProvidedYet'))){fv=mE.errorCode;}jW.fv=fv;jW.cF=cF;jW.trigger(PCCViewer.EventType.RevisionsRetrievalFailed,{errorMessage:jW.getErrorMessage()});jW.trigger(PCCViewer.EventType.RevisionsRetrievalCompleted,{completedRevisions:jW.getRevisions()});aa.reject(aj.error);});};this.aDC=function(){setTimeout(function(){akQ();},0);return jW;};};var RevisionsRequest=function(uv){this.Ks=[];this.fv=null;this.cF=null;if(Object.defineProperties){Object.defineProperties(this,{"revisions":{configurable: ! !uv,enumerable:true,get:function(){return this.Ks;}},"errorCode":{configurable: ! !uv,enumerable:true,get:function(){return this.fv;}},"errorMessage":{configurable: ! !uv,enumerable:true,get:function(){return this.cF;}}});}PCCViewer.EventEmitter.extend(this);};RevisionsRequest.prototype.getRevisions=function(){return this.Ks;};RevisionsRequest.prototype.getErrorCode=function(){return this.fv;};RevisionsRequest.prototype.getErrorMessage=function(){return this.cF;};module.exports={RevisionsRequest:RevisionsRequest,Kz:Kz};},{}],161:[function(require,module,exports){var CU={Pinch:"Pinch",Zoom:"Zoom",Fit:"Fit",ViewMode:"ViewMode"};module.exports=CU;},{}],162:[function(require,module,exports){var _Search=function(){this.bb='';this.IJ={};this.df={};this.Pa=0;this.ax=new PCCViewer.SearchRequest();var J=this;this.Vf=function(){var Nx=[];for(var h=0;h<J.IJ.searchTerms.length;h++){var bb=J.IJ.searchTerms[h];var pa=IPCC.F.Og(bb.type);var Oe;switch(pa){case 'proximity':var yt={wI:bb,df:[],type:bb.type,highlightColor:this.VX(bb.highlightColor),distance:bb.distance,contextPadding:bb.contextPadding};for(var x=0;x<bb.terms.length;x++){var YC=bb.terms[x];Oe=this.aax(YC);yt.df=yt.df.concat(Oe);}Nx.push(yt);break;default:Oe=this.aax(bb);Nx=Nx.concat(Oe);break;}}return Nx;};this.aax=function(bb){var fh=[];var df={};if(bb.matchingOptions.exactPhrase===false&&bb.searchTermIsRegex===false){var AH=bb.searchTerm.split(' ');for(var bz=0;bz<AH.length;bz++){df={};if(AH[bz].length<0){continue;}df.searchText=AH[bz];df.wI=bb;if(bb.matchingOptions.matchWholeWord){df.searchTerm=this.akM(this.ED(AH[bz]),bb.matchingOptions);}else{if(bb.matchingOptions.wildcard===true){df.searchTerm=this.agS(this.ED(AH[bz]),bb.matchingOptions);}else if(bb.matchingOptions.beginsWith===true||bb.matchingOptions.endsWith===true){df.searchTerm=this.agT(this.ED(AH[bz]),bb.matchingOptions);}else{df.searchTerm=this.adG(AH[bz],bb.matchingOptions,false);}}df.highlightColor=this.VX(bb.highlightColor);fh.push(df);}}else{df={};df.searchText=bb.searchTerm;df.wI=bb;if(bb.matchingOptions.matchWholeWord){df.searchTerm=this.akM(this.ED(bb.searchTerm),bb.matchingOptions);}else{if(bb.matchingOptions.wildcard===true){df.searchTerm=this.agS(this.ED(bb.searchTerm),bb.matchingOptions);}else if(bb.matchingOptions.beginsWith===true||bb.matchingOptions.endsWith===true){df.searchTerm=this.agT(this.ED(bb.searchTerm),bb.matchingOptions);}else{df.searchTerm=this.adG(bb.searchTerm,bb.matchingOptions,bb.searchTermIsRegex);}}df.highlightColor=this.VX(bb.highlightColor);fh.push(df);}return fh;};this.akM=function(rr,wQ){var HJ=new RegExp('\\b'+rr+'\\b',this.IA(wQ.matchCase));return HJ;};this.agT=function(rr,wQ){if(wQ.beginsWith){return new RegExp("\\b"+rr+'(\\w+)',this.IA(wQ.matchCase));}if(wQ.endsWith){rr=rr.replace("*","");return new RegExp('(\\w+)'+rr+"\\b",this.IA(wQ.matchCase));}};this.ED=function(rr){return rr.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");};this.agS=function(rR,wQ){rR=rR.replace(/[*]{2,}/g,'*').replace(/(\\\*){2,}/g,'\\*');if(rR==='\\*'){var dz=new Error('The search term must contain one or more non-wildcard characters.');dz.auT=true;throw dz;}var regexFlags='gim';if(wQ.matchCase){regexFlags='gm';}rR=rR.replace(/\*/g,'\S*');rR=rR.replace(/\?/g,'\S');var HJ=new RegExp('(\\s|^)'+rR+'(?=\\s|$)',regexFlags);return HJ;};this.Qx=function(rr){return rr.replace(/\ /g,'\\s+');};this.adG=function(MK,matchingOptions,isRegex){var uh='';if(isRegex===true){uh=this.Qx(MK);}else if(matchingOptions.wildcard===true){uh=MK.replace(/[-[\]{}()+,^$|#]/g,"\\$&");uh=this.Qx(uh);}else if(matchingOptions.exactPhrase){uh=MK.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");uh=this.Qx(uh);}else{uh=MK.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");}var azZ=uh.replace(/'/g,'[\'||]').replace(/"/g,'["||]');return new RegExp(azZ,this.IA(matchingOptions.matchCase));};this.IA=function(matchCase){if(matchCase){return 'gm';}else{return 'igm';}};this.aId=function(rR){var HJ=new RegExp('\\b'+rR+'\\b',J.IA());return HJ;};var afd=["#1c86ee","#ff8c00","#9932cc","#FFBA00","#00c5cd","#ee3a8c","#4169e1","#00cd00","#6959cd","#ff4500"];this.VX=function(dB){if(!dB){return afd[J.Pa++ %afd.length];}else{return dB;}};this.SJ=function(dY){if(typeof dY==='string'){dY={searchTerms:[{searchTerm:dY,highlightColor:undefined,contextPadding:25,searchTermIsRegex:false,matchingOptions:{exactPhrase:true,matchCase:false,matchWholeWord:false,beginsWith:false,endsWith:false,wildcard:false}}]};return dY;}IPCC.F.forEach(dY.searchTerms,function(bb){if(!bb.matchingOptions){bb.matchingOptions={};}var pa=IPCC.F.Og(bb.type);switch(pa){case 'proximity':IPCC.F.forEach(bb.terms,function(YC){J.alh(YC);});break;default:J.alh(bb);break;}});return dY;};this.alh=function(bb){if(typeof bb.contextPadding==="undefined"){bb.contextPadding=25;}if(typeof bb.searchTermIsRegex==="undefined"){bb.searchTermIsRegex=false;}if(typeof bb.matchingOptions==="undefined"){bb.matchingOptions={};}if(!bb.matchingOptions.hasOwnProperty('matchCase')){bb.matchingOptions.matchCase=false;}if(!bb.matchingOptions.hasOwnProperty('exactPhrase')){bb.matchingOptions.exactPhrase=true;}if(!bb.matchingOptions.hasOwnProperty('matchWholeWord')){bb.matchingOptions.matchWholeWord=false;}if(!bb.matchingOptions.hasOwnProperty('beginsWith')){bb.matchingOptions.beginsWith=false;}if(!bb.matchingOptions.hasOwnProperty('endsWith')){bb.matchingOptions.endsWith=false;}if(!bb.matchingOptions.hasOwnProperty('wildcard')){bb.matchingOptions.wildcard=false;}if(typeof bb.highlightColor!=='undefined'){try{IPCC.bO.dB(bb.highlightColor,"selectText");}catch(e){bb.highlightColor=undefined;}}};this.atY=function(){return J.df;};this.aej=function(e){J.ax.cF=e.message;J.ax.fv="1010";J.ax.uj=true;setTimeout(function(){J.ax.trigger("SearchFailed",{errorMessage:(e.message)});},10);setTimeout(function(){J.ax.trigger("SearchCompleted",{completedSearchResults:(J.ti)});},10);return J.ax;};this.tJ=function(dY,bi){this.df={};this.IJ=dY;this.bb=dY;this.Pa=0;var tJ=new PCCViewer.Rr();try{J.df=this.Vf();return tJ.WC(bi,J.df,dY,J.ax);}catch(e){return J.aej(e);}};this.Ev=function(dY,bi){this.df={};this.IJ=dY;this.bb=dY;this.Pa=0;var Ev=new PCCViewer.XD();try{J.df=this.Vf();return Ev.WC(bi,J.df,dY,J.ax);}catch(e){return J.aej(e);}};};_Search.prototype.yC=function(searchQuery){this.df={};this.ax=new PCCViewer.SearchRequest();this.IJ=searchQuery;this.ax.dY=searchQuery;this.bb=searchQuery;this.Pa=0;return this.ax;};var SearchTask=function(searchQuery){this.aiS(searchQuery);var _search=new PCCViewer._Search();searchQuery=_search.SJ(searchQuery);this.ax=_search.yC(searchQuery);try{_search.df=_search.Vf();}catch(e){if(e.auT){throw new Error(e.message);}else{throw new Error(e.message);}}var tJ=new PCCViewer.Rr();this.search=function(text){tJ.ti=[];tJ.aU=0;tJ.df=_search.df;tJ.ayI(text);return tJ.ti;};};SearchTask.prototype.aiS=function(searchQuery){if(typeof searchQuery==='string'){return;}var zs;if(searchQuery&&searchQuery.searchTerms&&Object.prototype.toString.call(searchQuery.searchTerms)==='[object Array]'){zs=searchQuery.searchTerms;}else{throw new Error('The `searchQuery` parameter is not a string, or a search terms array was not present in the search query.');}IPCC.F.forEach(zs,function(tW,h){var pa=tW.type?IPCC.F.trim(tW.type).toLowerCase():undefined;switch(pa){case 'proximity':IPCC.F.forEach(tW.terms,function(azm,bv){if(!amt(azm)){throw new Error("Search term index "+bv+" under Proximity search term index "+h+" does not have a valid `searchTerm` string property.");}});break;default:if(!amt(tW)){throw new Error("Search term index "+h+" does not have a valid `searchTerm` string property.");}break;}});function amt(tW){return(typeof tW.searchTerm==='string');}};module.exports={_Search:_Search,SearchTask:SearchTask};},{}],163:[function(require,module,exports){function aoS(dY){var zs=dY.map(function(bb,akZ){if(bb.type==='proximity'){return{type:'proximity',distance:bb.distance,subTerms:bb.df.map(function(akc){return{pattern:akc.searchTerm.source,caseSensitive:akc.wI.matchingOptions.matchCase};}),termId:akZ.toString(),contextPadding:bb.contextPadding};}return{type:'simple',pattern:bb.searchTerm.source,caseSensitive:bb.wI.matchingOptions.matchCase,termId:akZ.toString(),contextPadding:bb.contextPadding};});return{input:{searchTerms:zs}};};var XD=function(){var J=this;var yC,DZ,aki;var OY=[];this.yw=false;this.yf={};this.yg=[];function aqm(){var abS=DZ?'&continueToken='+DZ:'';return J.bi.ta+'/v2/searchTasks/'+yC.processId+'/results?limit=100'+abS;};function aqD(fh){var Mi=J.yf.input.searchTerms.reduce(function(oM,tW){oM[tW.termId]=J.df[tW.termId];return oM;},{});return fh.map(function(aj){var eC=new PCCViewer.SearchResult();if(J.df[0].wI.matchingOptions.wildcard&&(aj.text[0]===" "||aj.text[0]==="\n")){aj.text=aj.text.substring(1);aj.startIndex+=1;aj.startIndexInContext+=1;}eC.nz=aj.boundingRectangle;eC.du=aj.context;eC.AQ=aj.startIndexInContext;eC.ox=aj.id;eC.df=J.df;eC.aA=aj.lineRectangles;eC.gx=aj.pageData;eC.rC=aj.startIndex;eC.aD=aj.text;eC.ak=aj.pageIndex+1;eC.dJ=aj.id;eC.FY=J.bi.get_documentIdentifier();eC.bb=Mi[aj.searchTerm.termId].wI;eC.ra=Mi[aj.searchTerm.termId].highlightColor;return eC;});};function sq(Ix,UD){switch(Ix){case 'failed':setTimeout(function(){J.ax.trigger(PCCViewer.EventType.SearchFailed,UD);},10);break;case 'complete':J.ax.TY=J.yg;J.ax.uj=true;setTimeout(function(){J.ax.trigger(PCCViewer.EventType.SearchResultsAvailable,{completedSearchResults:(J.ax.getResults())});},10);break;case 'cancelled':break;}setTimeout(function(){J.ax.trigger(PCCViewer.EventType.SearchCompleted,{completedSearchResults:(J.ax.getResults())});},10);};function aro(mU){var bQ=J.bi.ta+'/v2/viewingSessions/'+encodeURIComponent(J.bi.get_documentIdentifier())+'/searchTasks';function fl(ac){var aj=JSON.parse(ac.responseText);yC=aj;if(OY.length){OY.forEach(function(wq){wq();});}OY=[];mU();};function eG(aI){J.ax.off('SearchCancelled',J.aeZ);J.ax.cF='The request to create a search task failed.';var aAG=aI&&aI.response&&aI.response.status===501;var azU=aI&&aI.response&&aI.response.status===480&&(function(arD){try{return JSON.parse(arD).errorCode==='FeatureDisabled';}catch(e){return false;}}(aI.response.responseText));if(aAG||azU){J.ax.fv='ServerSearchUnavailable';J.ax.cF='Server-side search is not available.';sq('failed',{errorMessage:J.ax.cF});return;}sq('failed',{errorMessage:J.ax.cF});};PCCViewer.Ajax.eg({url:bQ,method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(J.yf)}).then(fl,eG);};function MJ(mU){var bQ=aqm();var iu={};if(yC.affinityToken){iu['Accusoft-Affinity-Token']=yC.affinityToken;}if(!J.yw){return;}function fl(ac){if(!J.yw){return;}var aj=JSON.parse(ac.responseText);var Ty=aqD(aj.results);J.yg=aj.pagesWithoutText;J.ax.fh.push.apply(J.ax.fh,Ty);if(Ty.length){setTimeout(function(){IPCC.F.forEach(Ty.reduce(function(oM,aj){var cK=aj.ak;if(!oM[cK]){oM[cK]=[];}oM[cK].push(aj);return oM;},{}),function(fh,cK){J.ax.trigger('PartialSearchResultsAvailable',{partialSearchResults:fh,pagesWithoutText:J.yg});});},10);}if(aj.continueToken){DZ=aj.continueToken;aki=aj.continueAfter;mU();}else if(J.yw){sq('complete');}};function eG(aj){if(!J.yw){return;}J.yw=false;J.ax.cF='The request to poll the search task failed.';J.ax.uj=true;sq('failed',{errorMessage:J.ax.cF});};PCCViewer.Ajax.eg({method:'GET',url:bQ,headers:iu}).then(fl,eG);};function aAK(){(function aAI(){setTimeout(function(){MJ(aAI);},aki||0);}());};function aeZ(){sq('cancelled');J.yw=false;function amW(){};if(!yC){OY.push(amW);return;}amW();};this.WC=function(bi,df,dY,ax){J.bi=bi;J.df=df;J.ax=ax;J.ax.dY=dY;J.yf=aoS(J.df);J.yw=true;J.ax.on('SearchCancelled',aeZ);aro(function(){aAK();});return J.ax;};};module.exports=XD;},{}],164:[function(require,module,exports){var ObservableCollection=require('./PCCViewer.ObservableCollection');function agp(clientBB){this.top=clientBB.top;this.bottom=clientBB.bottom;this.left=clientBB.left;this.right=clientBB.right;this.width=clientBB.width||clientBB.right-clientBB.left;this.height=clientBB.height||clientBB.bottom-clientBB.top;};function vM(x,y){this.x=x;this.y=y;this.getDistance=function(point){var x=point.x-this.x,y=point.y-this.y,d=x*x+y*y,squared=false;return squared?d:Math.sqrt(d);};this.equals=function(point){return this===point||point&&(this.x===point.x&&this.y===point.y)||false;};this.close=function(point){return this.getDistance(point)<4;};this.clone=function(){return new vM(this.x,this.y);};};function UR(bx){return(bx&&bx.nodeType===1);};function PN(yN,JU){var SC=(JU&&IPCC.F.CW)?'m':'M';var abJ=(JU&&IPCC.F.CW)?'l':'L';return IPCC.F.map(yN,function(el,i){if(i===0){return SC+el.x+','+el.y;}else{return abJ+el.x+','+el.y;}}).join('');};function aeu(du,nP,ed){return function(aI){if(IPCC.F.Eo&&aI.type.match('mouse')){aI.preventDefault();aI.stopPropagation();return false;}if(aI.preventDefault){aI.preventDefault();}else{aI.returnValue=false;}var x,y;if(aI.changedTouches){var hj=aI.changedTouches[0];if(aI.type==='touchstart'){nP=aI.target.getBoundingClientRect();}else if(aI.type==='touchend'){ed&&ed();return;}x=hj.clientX-nP.left;y=hj.clientY-nP.top;}else{x=aI.clientX-nP.left;y=aI.clientY-nP.top;}var bL=new vM(x,y);du.yN.push(bL);var vW=PN(du.yN);if(IPCC.F.CW){du.fS.path=vW.toLowerCase();}else{du.fS.setAttribute('d',vW);}ed&&ed();};};function aqJ(points){var AA=3,cT='',rW;var rH=(points.length<AA)?points:IPCC.F.filter(points,function(el){if(rW&&rW.close(el)){return false;}else{rW=el;return true;}});if(rH.length<AA){rH=[points[0],points[points.length-1]];}rW=undefined;if(rH.length<AA){cT+=PN(rH);}else{cT='M'+IPCC.F.bspline(rH);cT=cT.replace(/\d*\.?\d*/g,function(bH){var GE=bH.indexOf('.');if(bH.length&&GE>0){return bH.substr(0,GE+3);}else if(bH!==""){return bH;}else{return bH;}});}return cT;};function SignatureControl(dom){var J=this;if(typeof dom==='string'){this.cD=document.querySelector(dom);if(!(UR(this.cD))){throw new Error('The query selector "'+dom+'" did not match any DOM element.');}}else if(UR(dom)){this.cD=dom;}else{throw new Error('The SignatureControl target is not a valid DOM element.');}this.Ik=[];this.nP=new agp(this.cD.getBoundingClientRect());this.fC=IPCC.F.zj.SVG([0,0,this.nP.width,this.nP.height].join(' '));this.cD.appendChild(this.fC);function Gg(ev){var fS=IPCC.F.zj.Path(undefined,{width:2000,height:2000,color:'black',thickness:4});J.fC.appendChild(fS);var du={yN:[],fS:fS,ed:function(){J.Ik.push(du.yN);IPCC.F.removeEvent(J.cD,'mousemove',AM);IPCC.F.removeEvent(J.cD,'mouseup',BY);if(IPCC.F.Eo){IPCC.F.removeEvent(J.cD,IPCC.F.od['move'],AM);IPCC.F.removeEvent(J.cD,IPCC.F.od['up'],BY);}if(IPCC.F.FD){IPCC.F.removeEvent(J.cD,'touchmove',AM);IPCC.F.removeEvent(J.cD,'touchend',BY);}}};var AM=aeu(du,J.nP);var BY=aeu(du,J.nP,du.ed);AM(ev);IPCC.F.addEvent(J.cD,'mousemove',AM);IPCC.F.addEvent(J.cD,'mouseup',BY);if(IPCC.F.Eo){IPCC.F.addEvent(J.cD,IPCC.F.od['move'],AM);IPCC.F.addEvent(J.cD,IPCC.F.od['up'],BY);}if(IPCC.F.FD){IPCC.F.addEvent(J.cD,'touchmove',AM);IPCC.F.addEvent(J.cD,'touchend',BY);}};IPCC.F.addEvent(J.cD,'mousedown',Gg);if(IPCC.F.Eo){this.cD.style['-ms-touch-action']='none';this.cD.style['touch-action']='none';IPCC.F.addEvent(J.cD,IPCC.F.od['down'],Gg);}if(IPCC.F.FD){IPCC.F.addEvent(J.cD,'touchstart',Gg);}this.SO=function(){J.nP=new agp(J.cD.getBoundingClientRect());J.fC.setAttribute('viewBox',[0,0,J.nP.width,J.nP.height].join(' '));};IPCC.F.addEvent(window,'resize',this.SO);this.ajv=function(){IPCC.F.removeEvent(window,'resize',J.SO);IPCC.F.removeEvent(J.cD,'mousedown',Gg);if(IPCC.F.Eo){IPCC.F.removeEvent(J.cD,IPCC.F.od['down'],Gg);}if(IPCC.F.FD){IPCC.F.removeEvent(J.cD,'touchstart',Gg);}while(J.cD.firstChild){J.cD.removeChild(J.cD.firstChild);}};};SignatureControl.prototype.done=function(){var kI,kq,mw,mK,vW='M0,0',aaH=this;IPCC.F.forEach(aaH.Ik,function(nH){IPCC.F.forEach(nH,function(p){if(kI===undefined||kI>p.x){kI=p.x;}if(kq===undefined||kq>p.y){kq=p.y;}if(mw===undefined||mw<p.x){mw=p.x;}if(mK===undefined||mK<p.y){mK=p.y;}});});IPCC.F.forEach(aaH.Ik,function(nH){var aEp=IPCC.F.map(nH,function(p){return new vM(p.x-kI,p.y-kq);});vW+=aqJ(aEp);});this.ajv();return{type:'path',path:vW,width:(mw-kI)||0,height:(mK-kq)||0};};SignatureControl.prototype.resize=function(){this.SO();return this;};SignatureControl.prototype.clear=function(){var svg=this.fC;while(svg&&svg.firstChild){svg.removeChild(svg.firstChild);}this.Ik=[];return this;};SignatureControl.prototype.undo=function(){if(this.fC.lastChild){this.fC.removeChild(this.fC.lastChild);}this.Ik.pop();return this;};SignatureControl.prototype.cancel=function(){this.ajv();return this;};var Signatures=new ObservableCollection();var SignatureDisplay=function(domElement,signature){function handleSignatureAsPath(){if(!signature.path||signature.path.match(/[^MLC0-9.,\s]/)){throw new Error('A valid path is required in the signature object.');}var sL=IPCC.F.XB(signature.path);var fC=IPCC.F.zj.SVG([0,0,sL.width,sL.height].join(' '));var fS=IPCC.F.zj.Path(signature.path,{width:sL.width,height:sL.height,color:'black',thickness:4});if(IPCC.F.CW){var asZ=(sL.height/sL.width)*100;fC.style.width=fS.style.width='100%';fC.style.height=fS.style.height='0px';fC.style.paddingBottom=fS.style.paddingBottom=asZ+'%';}else{fC.style.width='100%';fC.style.maxHeight='100%';fC.setAttribute('preserveAspectRatio','xMinYMin meet');}fC.appendChild(fS);domElement.appendChild(fC);return{width:sL.width,height:sL.height,clear:function(){domElement.removeChild(fC);}};};function handleSignatureAsText(){if(!signature.text||typeof signature.text!=='string'){throw new Error('The signature text is not a valid string.');}var jf=document.createElement('div');var mO=document.createTextNode(signature.text);var iI=(typeof signature.fontName==='string')?signature.fontName:'serif';jf.appendChild(mO);jf.style.textAlign='center';jf.style.fontFamily='"'+iI+'", cursive';jf.style.fontSize='2.5em';jf.style.overflow='hidden';domElement.appendChild(jf);var sL=IPCC.F.uo(signature.text,iI);return{width:sL.width,height:sL.height,clear:function(){domElement.removeChild(jf);}};};if(!UR(domElement)){throw new Error('The `domElement` parameter is not a valid HTMLElement.');}else if(!signature){throw new Error('The `signature` parameter is required.');}else if(signature.path){return handleSignatureAsPath();}else if(signature.text){return handleSignatureAsText();}else{throw new Error('The signature provided does not have a known type.');}};module.exports={SignatureControl:function(dom){return new SignatureControl(dom);},SignatureDisplay:SignatureDisplay,Signatures:Signatures};},{"./PCCViewer.ObservableCollection":154}],165:[function(require,module,exports){var Yc=function(){},im={afZ:0,aAa:1,aEL:2};var ThumbnailControl=function(domElement,viewerControl){if(!domElement|| !IPCC.F.vU(domElement)){throw new Error('The "domElement" parameter is not a valid HTML Element');}if(!viewerControl|| !(viewerControl instanceof PCCViewer.ViewerControl)){throw new Error('The "viewerControl" parameter is not a valid PCCViewer.ViewerControl object');}var J=this;this.im=im.afZ;this.bB=viewerControl.bB;this._debug= ! !this.bB.debug;this.aFf="Single";this.It=[];this.qd={};if(!this.bF){this.bF=viewerControl;}else{throw new Error("This instance of thumbnail already is attached to a ViewerControl.");}PCCViewer.EventEmitter.extend(this);this.be=domElement;if(viewerControl.nY){J.im=im.aEL;J.TG(viewerControl.getPageCount());J.Rw(J.be);}else{J.im=im.aAa;J.TG(1,0);viewerControl.on('PageCountReady',function(){J.TG(viewerControl.getPageCount(),1);J.Rw(J.be);});}viewerControl.on('PageRotated',function(aI){IPCC.F.forEach(J.qd,function(aM){if(aM.ae===(aI.pageNumber-1)){if(aM.vo===true){J.Ti(aM);}}});});viewerControl.on('DocumentRotated',function(aI){IPCC.F.forEach(J.qd,function(aM){if(aM.vo===true){J.Ti(aM);}});});};ThumbnailControl.prototype.getViewerControl=function(){return this.bF;};ThumbnailControl.prototype.TG=function(fG,ht){ht=ht||0;var J=this,HC=document.createDocumentFragment();for(var i=ht;i<fG;i++){var _parent=document.createElement('div');_parent.className='pccThumbnailWrapper';var fL=document.createElement('div');fL.className='pccThumbnail';var pA=document.createElement('div');pA.className='pccThumbnailView';pA.id='pcc-thumbnailPage-'+i+'-'+IPCC.vH();fL.appendChild(pA);_parent.appendChild(fL);HC.appendChild(_parent);J.qd[i]={Va:_parent,cD:fL,pA:pA,ae:i,aw:{},vo:false,jB:0,kQ:0,ea:0};}IPCC.F.forEach(J.qd,function(aM){var YV=document.createElement('div'),vd=document.createElement('span'),awi=document.createTextNode(aM.ae+1);YV.className='pccThumbnailLabel';vd.appendChild(awi);YV.appendChild(vd);aM.cD.appendChild(YV);aM.cD.onclick=function(){J.ajz([aM.ae+1]);};});J.be.appendChild(HC);this.Yv();return this;};ThumbnailControl.EventType={PageSelectionChanged:"PageSelectionChanged"};ThumbnailControl.prototype.getSelectedPages=function getSelectedPages(){if(!this.im){return[];}return[].concat(this.It);};ThumbnailControl.prototype.setSelectedPages=function setSelectedPages(pageNumbers){if(!this.im){return this;}var fG=this.bF.getPageCount();if(typeof pageNumbers==='number'){pageNumbers=[pageNumbers];}else if(Object.prototype.toString.call(pageNumbers)!=='[object Array]'){throw new Error(pageNumbers+' is not a number or an array of numbers');}IPCC.F.forEach(pageNumbers,function(gN,h){if(isNaN(gN)){throw new Error(gN+' (array index '+h+') is not a number');}if(gN<1||gN>fG){throw new Error(gN+' (array index '+h+') is out of range');}});this.ajz([].concat(pageNumbers).sort());return this;};if(Object.defineProperties){Object.defineProperties(ThumbnailControl.prototype,{"selectedPages":{enumerable:true,get:function(){return this.getSelectedPages();},set:function(pageNumbers){return this.setSelectedPages(pageNumbers);}},"viewerControl":{enumerable:true,get:function(){return this.getViewerControl();}},"visiblePages":{emunerable:true,get:function(){return this.getVisiblePages();}}});}ThumbnailControl.prototype.scrollTo=function(pageNumber,options){var gN=Number(pageNumber);if(gN!==(gN|0)||gN<1||gN>this.bF.getPageCount()){throw new Error(pageNumber+' is not a valid page number');}var mH=false,J=this,bB=options||{};IPCC.F.forEach(this.qd,function(aM){if(mH){return;}if(aM.ae+1===gN){mH=true;J.Xn(aM,undefined,! !bB.forceAlignTop);}});return this;};ThumbnailControl.prototype.Xn=function(aM,lZ,auw){lZ=lZ||IPCC.F.Sd(this.be.getBoundingClientRect());var tu=IPCC.F.Sd(aM.Va.getBoundingClientRect());if(tu.top>lZ.top&&tu.bottom<lZ.bottom){return;}var aiW=window.getComputedStyle?getComputedStyle(aM.Va):aM.Va.currentStyle,gh;if(tu.top<lZ.top||auw){gh=tu.top-lZ.top+this.be.scrollTop-parseInt(aiW.marginTop,10);}else if(tu.bottom>lZ.bottom){gh=tu.bottom-lZ.top-lZ.height+this.be.scrollTop+parseInt(aiW.marginBottom,10);}if(gh!==undefined){this.be.scrollTop=gh;}return this;};ThumbnailControl.prototype.ajz=function(kx){if(IPCC.F.awA(this.It,kx)){return this;}var Xe='pcc-thumbnail-selected',FJ=new RegExp(Xe),XZ=false,acf=[].concat(kx),acy=acf.shift(),abf=false,lZ=IPCC.F.Sd(this.be.getBoundingClientRect()),J=this;IPCC.F.forEach(this.qd,function(aM){if(aM.ae===acy-1){IPCC.F.abZ(aM.cD,Xe);XZ=true;acy=acf.shift()||0;if(!abf){abf=true;J.Xn(aM,lZ);}return;}if(FJ.test(aM.cD.className)){IPCC.F.acU(aM.cD,Xe);XZ=true;}});this.It=kx;if(XZ){this.trigger(PCCViewer.ThumbnailControl.EventType.PageSelectionChanged,{pageNumbers:[].concat(this.It)});}return this;};ThumbnailControl.prototype.avc=function(){var dM=this.OP(),J=this,wT;IPCC.F.forEach(dM,function(aM){if(!wT&&IPCC.F.inArray(J.It,aM.ae+1)){wT=aM;}});if(!wT){wT=dM[0];}return wT;};ThumbnailControl.prototype.reflow=function(){if(!this.im){return this;}var Ba,BS,aS,aq,RR,KK,ea,wT=this.avc();IPCC.F.forEach(this.qd,function(aM){if(aM.vo){aM.cD.style.height=aM.pA.style.height='';aM.cD.style.width=aM.pA.style.width='';}});IPCC.F.forEach(this.qd,function(aM){if(aM.vo&&aM.aw.fH()){Ba=aM.cD.offsetWidth;BS=aM.cD.offsetHeight;ea=aM.aw.arK();if(Math.abs(ea)===90||Math.abs(ea)===270){aq=aM.aw.ki();aS=aM.aw.jE();}else{aS=aM.aw.ki();aq=aM.aw.jE();}RR=aS/aq;KK=Ba/BS;var jB,kQ;if(RR<KK){kQ=BS;jB=Math.floor(kQ*aS/aq);}else{jB=Ba;kQ=Math.floor(jB*aq/aS);}aM.jB=jB;aM.kQ=kQ;}});IPCC.F.forEach(this.qd,function(aM){if(aM.vo&&aM.aw&&aM.aw.fH()){aM.pA.style.height=aM.kQ+'px';aM.pA.style.width=aM.jB+'px';aM.aw.WG(IPCC.Web.UI.FitType.FullImage);aM.aw.dN();}});if(wT){this.Xn(wT);}this.Yv();return this;};ThumbnailControl.prototype.destroy=function(){if(!this.im){return this;}this.im=im.afZ;IPCC.F.forEach(this.qd,function(aM){if(aM.aw&&aM.aw.dispose){aM.aw.dispose();}});while(this.be.firstChild){this.be.removeChild(this.be.firstChild);}this.on=this.off=this.trigger=Yc;this.kw={};};ThumbnailControl.prototype.getVisiblePages=function(){if(!this.im){return[];}var dM=this.OP();return IPCC.F.map(dM,function(aM){return aM.ae+1;});};ThumbnailControl.prototype.OP=function OP(){var aAu=this.be.getBoundingClientRect(),tu;function Xl(lZ,Sb){return(!(Sb.top>=lZ.bottom||Sb.left>=lZ.right||Sb.bottom<=lZ.top||Sb.right<=lZ.left));};return IPCC.F.filter(this.qd,function(aM){tu=aM.cD.getBoundingClientRect();return Xl(aAu,tu);});};ThumbnailControl.prototype.Yv=function(){var J=this,dM=J.OP();IPCC.F.forEach(dM,function(aM){if(!aM.vo){aM.aw=J.jF(aM);aM.vo=true;}});return this;};ThumbnailControl.prototype.Rw=function Rw(cD){var Ra={},J=this;function aFy(an,wq,qL){if(Ra[an]){clearTimeout(Ra[an]);Ra[an]=undefined;}Ra[an]=setTimeout(wq,qL||0);};IPCC.Web.UI.as.addHandler(cD,'scroll',function(ev){aFy('scroll',function(){J.Yv();},300);});};ThumbnailControl.prototype.jF=function(aM,mU){var J=this;mU=mU||Yc;var bg={documentIdentifier:J.bB.documentID,pageNumber:aM.ae,viewFitType:IPCC.Web.UI.FitType.FullImage,imageHandlerUrl:J.bB.imageHandlerUrl,encryption:J.bB.encryption,handleTouchEvents:false};var aw=IPCC.initializePageViewPlugin(aM.pA,bg);aw.set_debug(J._debug);aw.set_mouseTool(IPCC.Web.UI.MouseTool.None);var wP=false;function ET(){mU();};aw.add_pageOpened(function(){J.Ti(aM);});aw.add_pageDisplayed(function(){if(!wP){ET();}});aw.add_textPageReady(function(){if(wP){aw.dN();ET();}});aw.add_pageOpenFailed(function(){});aw.add_textExtractionFailed(function(){});bg.artPage=J.bF.ab.gC(J.bF.cS.getPage(aM.ae));bg.artPage.Fp(function(T){if(T.get_type()===608){wP=true;}});aw.aDG(bg);aw.set_mouseTool(IPCC.Web.UI.MouseTool.None);return aw;};ThumbnailControl.prototype.Ti=function(aM){var J=this;var CB=J.bF.ab.Wn(aM.ae);var ea=aM.ea;var adm=ea;if(CB!==aM.ea){adm=CB-ea;}var aw=aM.aw,jf=aM.pA,aq,aS;if(!aM.vo|| !aw.fH()){return;}jf.style.height='';jf.style.width='';if(Math.abs(CB)===90||Math.abs(CB)===270){aq=aw.ki();aS=aw.jE();}else{aq=aw.jE();aS=aw.ki();}var Ba=jf.offsetWidth,BS=jf.offsetHeight;if(aM.ea!==CB){aw.rotate(adm);aM.ea=CB;}var RR=aS/aq,KK=Ba/BS;var jB,kQ;if(RR<KK){kQ=BS;jB=Math.floor(kQ*aS/aq);}else{jB=Ba;kQ=Math.floor(jB*aq/aS);}jf.style.height=kQ+'px';jf.style.width=jB+'px';};module.exports=ThumbnailControl;},{}],166:[function(require,module,exports){function aad(message,value){var err=new Error('PCC Range Error: '+message);err.value=value;return err;};function aBh(aAe){var aJ=[];var agn=function(n){return!(isNaN(+n));};var amo=aAe.split(',');var LH,Ya;var Pk=0;var vZ=0;for(var h=0;h<amo.length;h++){var Hx=amo[h].split('-');var BZ=Hx[0].replace(/\s+/g,'');if(BZ.length===0){continue;}var HX=BZ;if(Hx[1]!==undefined&&Hx[1]!==""){HX=Hx[1].replace(/\s+/g,'');}BZ= +(BZ);HX= +(HX);if(agn(BZ)===true){Pk=parseInt(BZ);}if(agn(HX)===true){vZ=parseInt(HX);}if(Pk<vZ){LH=Pk;Ya=vZ;}else{LH=vZ;Ya=Pk;}if(Hx.length>1){for(var af=LH;af<=Ya;af++){aJ.push(af);}}else{aJ.push(LH);}}aJ.sort(function(a,b){return a-b;});for(h=aJ.length-1;h>0;h--){if(aJ[h-1]===aJ[h]){aJ.splice(h,1);}}return aJ;};var Util={save:function(filename,stringValue){if('Blob'in window){var blob=new Blob([stringValue],{'type':'text/plain;charset=utf-8'});if(window.navigator.msSaveBlob){window.navigator.msSaveBlob(blob,filename);}else if(window.saveAs){window.saveAs(blob,filename);}else{var a=document.createElement('a');a.href=URL.createObjectURL(blob);a.target='_blank';a.download=filename;a.style.display='none';document.body.appendChild(a);a.click();document.body.removeChild(a);}}else{if(document.execCommand){var oWin=window.open('about:blank','_blank');oWin.document.write(stringValue);oWin.document.close();oWin.document.execCommand('SaveAs',true,filename+'.txt');oWin.close();}}},calculateNonOverlappingSelections:function(selections,backgroundColor){var fU;if(!(selections instanceof Array)){fU=[selections];}else{fU=selections;}IPCC.F.forEach(fU,function(ck){IPCC.bO.mc(ck.startIndex,'selection.startIndex',0,Number.MAX_VALUE);IPCC.bO.mc(ck.length,'selection.length',1,Number.MAX_VALUE);IPCC.bO.dB(ck.color,'selection.color');IPCC.bO.mc(ck.opacity,'selection.opacity',0,255);});IPCC.bO.dB(backgroundColor,'backgroundColor');var aqM=IPCC.F.acW(fU);return IPCC.F.map(aqM,function(bx){bx.length=bx.endIndex-bx.startIndex+1;return bx;});},layerColors:function(colors,backgroundColor){var Qb;if(!(colors instanceof Array)){Qb=[colors];}else{Qb=colors;}IPCC.F.forEach(Qb,function(ck){IPCC.bO.dB(ck.color,'selection.color');IPCC.bO.mc(ck.opacity,'selection.opacity',0,255);});IPCC.bO.dB(backgroundColor,'backgroundColor');return IPCC.F.amX(Qb,backgroundColor);},validatePageRange:function(pageRange,options){if(pageRange&&typeof pageRange!=='string'){return false;}else{try{PCCViewer.Util.convertPageRangeToArray(pageRange,options);}catch(e){return false;}return true;}},convertPageRangeToArray:function(pageRange,options){options=options||{};var lowerLimit=options.lowerLimit||1,upperLimit=options.upperLimit||Number.MAX_VALUE,allowEmpty=options.allowEmpty||false;if(pageRange!=='all'&&pageRange.match(/[^0-9\-\,\s]/g)){throw aad('Illegal page range value',pageRange);}var cQ=[];if(pageRange==='all'){while(upperLimit>=lowerLimit){cQ.unshift(upperLimit--);}}else{cQ=aBh(pageRange);if((cQ.length===0&& !allowEmpty)||cQ[0]<lowerLimit||cQ[cQ.length-1]>upperLimit){throw aad('Pages are out of range',cQ.join(', '));}}return cQ;}};module.exports=Util;},{}],167:[function(require,module,exports){var Cw={Document:"Document",EqualWidthPages:"EqualWidthPages",SinglePage:"SinglePage",EqualFitPages:"EqualFitPages"};module.exports=Cw;},{}],168:[function(require,module,exports){"use strict";var IPCC=require('./../IPCC/IPCC');var tc=require('./PCCViewer.Helper');var Print=require('./PCCViewer.Print');var EventEmitter=require('./PCCViewer.EventEmitter');var cX=require('./PCCViewer.MarkDeserializer');var ep=require('./PCCViewer.MarkSerializer');function ViewerControl(element,options){if(!(this instanceof ViewerControl)){return new ViewerControl(element,options);}if(!IPCC.F.vU(element)){throw new Error("The 'element' argument is required.");}if(!options.documentID){throw new Error("A valid value for 'options.documentID' is required");}if(!options.imageHandlerUrl){throw new Error("A valid value for 'options.imageHandlerUrl' is required");}var J=this;IPCC.F.KU(element);var kB=document.createElement('div');kB.className='pccViewerControl';kB.id='pccViewerControl-'+IPCC.vH();element.appendChild(kB);this.cz=kB;this.gQ=element;var tj=document.createElement('div');tj.className='pccPageListLoading';kB.appendChild(tj);this.tj=tj;EventEmitter.extend(this);this.xB=false;this.bB=tc.rM({},ViewerControl.Ah,options);this.bB.language=tc.rM({},ViewerControl.avs,(options.language?options.language:{}));if(options.language){PCCViewer.Language.initializeData(options.language);}if(this.bB.pageLayout.toLowerCase()==="vertical"){this.bB.pageLayout=IPCC.PageLayout.VerticalScrollDirection;}else if(this.bB.pageLayout.toLowerCase()==="horizontal"){this.bB.pageLayout=IPCC.PageLayout.HorizontalScrollDirection;}else{throw new Error("The value of 'options.pageLayout' is invalid.");}if(this.bB.viewMode.toLowerCase()==="document"){this.bB.viewMode=IPCC.ViewMode.Document;}else if(this.bB.viewMode.toLowerCase()==="equalwidthpages"){this.bB.viewMode=IPCC.ViewMode.EqualWidthPages;}else if(this.bB.viewMode.toLowerCase()==="equalfitpages"){this.bB.viewMode=IPCC.ViewMode.EqualFitPages;}else if(this.bB.viewMode.toLowerCase()==="singlepage"){this.bB.viewMode=IPCC.ViewMode.SinglePage;}else{throw new Error("The value of 'options.viewMode' is invalid.");}function isValidSearchMethodType(){return-1<['auto','server','client'].indexOf(J.bB.searchMethodType.toLowerCase());};if(!isValidSearchMethodType()){throw new Error("The value of 'options.searchMethodType' should be 'auto', 'server', or 'client'.");}if(isNaN(this.bB.searchMethodPageCountThreshold)&&(typeof this.bB.searchMethodPageCountThreshold!=='number')&&this.bB.searchMethodPageCountThreshold<=1){throw new Error("The value of 'options.searchMethodPageCountThreshold' must be a number greater than 1.");}if(this.bB.redactionViewMode){if(this.bB.redactionViewMode.toLowerCase()==="draft"){this.bB.redactionViewMode=PCCViewer.RedactionViewMode.Draft;}else if(this.bB.redactionViewMode.toLowerCase()==="normal"){this.bB.redactionViewMode=PCCViewer.RedactionViewMode.Normal;}}else{this.bB.redactionViewMode=PCCViewer.RedactionViewMode.Normal;}var jb=this.bB.pageRotation%360;if(jb!==0){var vT=[90,180,270,-90,-180,-270];if(Array.prototype.indexOf){if(!jb||vT.indexOf(jb)=== -1){throw new Error("The value of 'options.pageRotation' is invalid.");}}else{if(!jb||IPCC.Web.iG(vT,jb)=== -1){throw new Error("The value of 'options.pageRotation' is invalid.");}}}this.bB.pageRotation=jb;if(this.bB.markHandleMode.toLowerCase()==="hidesidehandleswhenclose"){this.bB.markHandleMode=IPCC.Web.UI.MarkHandleMode.HideSideHandlesWhenClose;}else if(this.bB.markHandleMode.toLowerCase()==="hidecornerhandleswhenclose"){this.bB.markHandleMode=IPCC.Web.UI.MarkHandleMode.HideCornerHandlesWhenClose;}else{throw new Error("The value of 'options.markHandleMode' is invalid.");}if(isNaN(this.bB.serviceResponseTimeout)||typeof this.bB.serviceResponseTimeout!=='number'||this.bB.serviceResponseTimeout<0){throw new Error("The value of 'options.serviceResponseTimeout' is invalid.");}if(typeof this.bB.debug!=='boolean'){throw new Error("The value of 'options.debug' is invalid.");}if(typeof this.bB.viewerAssetsPath!=='string'){throw new Error("The value of 'options.viewerAssetsPath' is invalid.");}if(typeof this.bB.enableMultipleRedactionReasons!=='boolean'){throw new Error("The value of 'options.enableMultipleRedactionReasons' is invalid.");}this.kw={};this.bQ="";this.fG=1;this.aic=1;this.acH=0;this.kh=1;this.ab=undefined;this.Rh=new PCCViewer.Deferred();this.qz=this.Rh.getPromise();this.dZ=false;this.bi=undefined;this.OO=0;this.cS=undefined;this.aV=PCCViewer.MouseTools.getMouseTool("AccusoftPanAndEdit");this.nY=false;this.zT=false;this.DI=false;this.Bg=[];this.OW=new PCCViewer.Deferred();this.avT=this.OW.getPromise();this.yl=[];this.cj={};this.EH=[];this.EE=[];this.aY=null;this.HM={};this.fW=null;this.nf=new PCCViewer.MarkupLayerCollection(this);this.vu=new PCCViewer.MarkupLayer(this);this.nf.addItem(this.vu);this.sc=true;setTimeout(function(){J.ahq(kB,J.bB);},0);this.vY=null;this.ax=null;this.xi=false;this.IZ= -1;this.FF={};this.aid=false;this.azt=this.bB.printTemplate||(this.bB.template?this.bB.template.print:"");this.kM=null;this.wp=null;this.mt=function(cl,eQ,agU){var ct=document.createElement('div'),fF=ct.style;fF.position='absolute';if(eQ.isSelected){fF.backgroundColor='white';}else{fF.backgroundColor='lightgray';}fF.left='10px';fF.right='0';fF.textAlign='left';IPCC.F.forEach(cl.getComments(),function(nZ,h){var Xa=document.createElement('div'),NF=Xa.style;NF.position='relative';NF.padding='5px';NF.border='1px solid gray';if(h>0){NF.borderTop='none';}Xa.appendChild(document.createTextNode(nZ.getText()));ct.appendChild(Xa);});return ct;};return J;};ViewerControl.Ah={encryption:false,viewMode:"Document",debug:false,pageLayout:"Vertical",resourcePath:"img",serviceResponseTimeout:60*1000,printTemplate:"",pageRotation:0,markHandleMode:"HideSideHandlesWhenClose",enableMultipleRedactionReasons:false,debugErrorLevel:IPCC.Web.UI.DebugErrorLevel.Detailed,maxPrefetch:3,displayPagesWhenScrolling:true,maxOutOfViewDisplay:0,scrollDisplayThreshold:0.5,requireRequestsOptimize:true,loadingContent:"",redactionViewMode:"Normal",searchMethodType:'auto',searchMethodPageCountThreshold:80,viewerAssetsPath:'viewer-assets'};ViewerControl.avs={pageLoadFailed:"Page Load Failed",pageLoadFailedPassword:"Page Load Failed - Password Required",pageLoadFailedRetry:"Retry"};ViewerControl.prototype.ahq=function(element,options){if(this.xB){return;}var J=this;var TW=function(){if(J.bB.viewMode===IPCC.ViewMode.SinglePage||J.xB){return;}var ayF=J.ab.get_pageNodeId(J.getPageNumber()-1);var bw=document.getElementById(ayF);var Xf=J.cz.childNodes[0].childNodes[0].childNodes[0].childNodes;if(!bw){return;}IPCC.F.forEach(Xf,function(iK){if(bw!==iK){if(document.documentMode===8&&iK.style.outline){iK.style.outline='';}else if(iK.style.boxShadow){iK.style.boxShadow='';}}});if(document.documentMode===8){bw.style.outline='2px solid #aaa';}else{bw.style.boxShadow='0 0 4px 1px rgba(0,0,0,.4)';}};function aqP(){var aa=new PCCViewer.Deferred();function showNagDialog(delaySecondsRemaining){var nb=document.createElement('div'),Fu=document.createElement('div'),SB=function(){nb.classList.add('open');},Qz=function(){if(nb.parentNode!==null){nb.parentNode.removeChild(nb);}};Fu.innerHTML='<h3>Evaluation Mode</h3>'+'<p>Please note that PrizmDoc Viewer is running in evaluation mode with a fixed feature set. <b>Viewing is artificially delayed by about 10 seconds</b> and all pages will be watermarked.</p>'+'<p>To test all features without restriction, <a target="_blank" rel="noopener noreferrer" href="https://www.accusoft.com/contact-us/?product=prizmdoc-viewer">contact us</a> to discuss our 30-day full-featured trial.</p>';var ajx=document.createElement('p');Fu.appendChild(ajx);function updateRemainingSeconds(){ajx.innerText='Please wait '+delaySecondsRemaining+' seconds...';};updateRemainingSeconds();nb.className='pccPageListNagModal';nb.appendChild(Fu);J.cz.appendChild(nb);SB();var intervalId=setInterval(function(){delaySecondsRemaining--;if(delaySecondsRemaining>0){updateRemainingSeconds();}else{Qz();clearInterval(intervalId);}},1000);};function fl(ac){if(ac.status===200){var aj=JSON.parse(ac.responseText);if(aj.delayEnabled){showNagDialog(aj.delaySecondsRemaining);}}};function eG(ac){aa.reject(new PCCViewer.Error("AjaxError","The call to get viewing session restrictions failed."));};PCCViewer.Ajax.eg({method:'GET',url:J.bB.imageHandlerUrl+'/v2/ViewingSessions/'+J.bB.documentID+'/restrictions',headers:{'Content-Type':'application/json'}}).then(fl,eG);};var amy=function(){if(J.tj.parentNode){J.tj.parentNode.removeChild(J.tj);}J.ab.remove_pageOpenFailed(Yz);J.ab.remove_pageDisplayed(amy);var ae=arguments[1].pageIndex;setTimeout(function(){J.trigger("PageDisplayed",{pageNumber:(ae+1)});TW();},10);if(ae!==0){return;}function fl(ac){if(J.xB){return;}var aj;if(ac.status===200){aj=JSON.parse(ac.responseText);if(aj.pageCountConfidence<100){var bQ;if(!(/^[\x00-\x7F]*$/.test(qP))){bQ=J.bB.imageHandlerUrl+'/Document/q/Attributes?DocumentID=e'+qP+'&DesiredPageCountConfidence=100';}else{bQ=J.bB.imageHandlerUrl+'/Document/q/Attributes?DocumentID=u'+encodeURIComponent(J.bB.documentID)+'&DesiredPageCountConfidence=100';}PCCViewer.Ajax.eg({method:'GET',url:bQ,headers:{'Content-Type':'application/json'}}).then(fl,eG);J.fG=aj.pageCount;J.bi.fG=aj.pageCount;J.DI=true;setTimeout(function(){J.trigger("EstimatedPageCountReady",{pageCount:aj.pageCount});},10);aaT();}else{if(J.fG>1){J.bi.fG=aj.pageCount;setTimeout(function(){var h;if(aj.pageCount<J.fG){for(h=J.fG-1;h>=aj.pageCount;h--){J.cS.removePage(h);}}else if(aj.pageCount>J.fG){for(h=J.fG;h<aj.pageCount;h++){var TP=new IPCC.Web.UI.ImGearPage({pageNumber:h});J.cS.addPage(TP);}}J.fG=aj.pageCount;if(J.dZ===true){J.nY=true;J.zT=true;setTimeout(function(){J.trigger("PageCountReady",{pageCount:aj.pageCount});},30);}},30);}else{J.fG=aj.pageCount;J.bi.fG=aj.pageCount;if(J.dZ===true){aaT(function(){J.nY=true;J.zT=true;setTimeout(function(){J.trigger("PageCountReady",{pageCount:aj.pageCount});},0);});}}}}};function eG(aj){if(J.xB){return;}var Wx="None",ajn,Xj;var ajc=aj.response.getResponseHeader('Accusoft-Status-Message');if(ajc){Wx=ajc;Xj=aj.response.getResponseHeader('Accusoft-Status-Number');if(IPCC.Web.yB(Xj)){ajn=parseInt(Xj,10);}}else if(aj.response.statusText){Wx=aj.response.statusText;}setTimeout(function(){J.trigger("PageLoadFailed",{statusCode:aj.response.status,errorMessage:Wx,accusoftErrorNumber:ajn});},1);throw("Unable to obtain document information from the server");};var qP=IPCC.gI.sV(J.bB.documentID);if(!qP||qP===""){throw("Invalid encoded Identifier");}if(!(/^[\x00-\x7F]*$/.test(qP))){J.bQ=J.bB.imageHandlerUrl+'/Document/q/Attributes?DocumentID=e'+qP+'&DesiredPageCountConfidence=50';}else{J.bQ=J.bB.imageHandlerUrl+'/Document/q/Attributes?DocumentID=u'+encodeURIComponent(J.bB.documentID)+'&DesiredPageCountConfidence=50';}PCCViewer.Ajax.eg({method:'GET',url:J.bQ,headers:{'Content-Type':'application/json'}}).then(fl,eG);};function aaT(qG){qG=qG||function(){};var alr=J.fG;function agR(){J.ab.remove_allPagesAdded(agR);qG();};if(alr>1){J.ab.add_allPagesAdded(agR);if(!J.agg){J.ab.add_currentPageChanged(function(){if(arguments.length<2){throw("Controls currentPageChanged event did not provide any expected information");}var co=arguments[1];setTimeout(function(){J.trigger('PageChanged',{pageNumber:co.pageIndex+1});TW();},0);});J.ab.add_pageDisplayed(function(){if(arguments.length<2){throw("Controls pageDisplayed event did not provide any expected information");}var co=arguments[1];if(J.kM){J.kM();J.kM=null;if(J.fW){J.fW.resolve();}J.fW=null;}setTimeout(function(){J.trigger('PageDisplayed',{pageNumber:co.pageIndex+1});TW();},0);setTimeout(function(){J.requestPageText(co.pageIndex+1).then(function BU(){J.Wr(co.pageIndex+1,J.IZ);});},10);});J.ab.add_pageOpenFailed(function(){aaj(arguments);});J.agg=true;}for(var h=J.OO;h<alr;h++){J.cS.addPage(new IPCC.Web.UI.ImGearPage({pageNumber:h}));J.OO++;}}else{qG();}};var aDi=function(co){var bw=document.getElementById(co.pageNodeID),bx=document.createElement('div'),zc=document.createElement('button'),afN='pccPageLoadFailRetry'+co.pageIndex,afv=function(){J.ab.Nl(co.pageIndex);},anK=PCCViewer.Language.data.pageLoadFailed,apo=PCCViewer.Language.getValue("pageLoadFailedPassword"),aoW=PCCViewer.Language.data.pageLoadFailedRetry,aAs=co.exception.statusCode===480&&co.exception.customErrorCode===4001;if(bw===null){return;}zc.id=afN;zc.innerHTML=aoW;bx.className='pccPageLoadFail';if(aAs){bx.innerHTML=apo+'<br>';bw.appendChild(bx);}else{bx.innerHTML=anK+'<br>';bx.appendChild(zc);bw.appendChild(bx);zc=document.getElementById(afN);if(!zc.addEventListener){zc.attachEvent('onclick',afv);}else{zc.addEventListener('click',afv,false);}}};function aaj(CI){if(CI.length<2){throw("controls PageOpenFailed event did not provide any expected information");}var ahx,ahd,co=CI[1];if(CI[1].exception.customErrorCode!==undefined){ahd=CI[1].exception.customErrorCode;}if(CI[1].exception.message!==undefined){ahx=CI[1].exception.message;}setTimeout(function(){J.trigger('PageLoadFailed',{statusCode:co.exception.statusCode,pageNumber:co.pageIndex+1,errorMessage:ahx,accusoftErrorNumber:ahd});aDi(co);},0);};function aqE(){if(J.ab&&typeof J.ab.dispose==="function"){J.ab.dispose();}J.bQ="";J.ab=undefined;while(J.cz.firstChild){J.cz.removeChild(J.cz.firstChild);}};function aHV(acl){var aa=new PCCViewer.Deferred();if(typeof acl==="string"){PCCViewer.Ajax.eg({url:J.bB.imageHandlerUrl+'/ViewingSession/u'+J.bB.documentID+'/Replacement',body:JSON.stringify({password:acl}),method:'POST',headers:{'Content-Type':'application/json;charset=utf-8'}}).then(function aET(ac){var result=JSON.parse(ac.responseText);var akK=result.viewingSessionId;J.bB.documentID=akK;aqE();J.ahq(J.cz,J.bB);aa.resolve(akK);},function aFD(err){aa.reject(new PCCViewer.Error("AjaxError","The call to replace the viewing session failed."));});}else{aa.reject(new PCCViewer.Error("InvalidArgument","The value of the 'password' parameter must be a string."));}return aa.getPromise();};function Yz(){J.ab.remove_pageOpenFailed(Yz);aaj(arguments);};var aFE=function(bu,V){J.wt=true;var Rc={width:V.width,height:V.height,pageNumber:V.pageNumber};J.trigger("PageOpening",Rc);};function amf(){J.Rh.resolve(J.ab);J.ab.remove_pageOpened(amf);J.dZ=true;var az=J;setTimeout(function(){J.trigger("ViewerReady",{});if(az.nY===true&&az.zT===false){az.zT=true;setTimeout(function(){J.trigger("PageCountReady",{pageCount:az.getPageCount()});},10);}},10);J.setCurrentMouseTool("AccusoftPanAndEdit");};var anH=function(bu,V){if(V.containsText===true){J.OW.resolve(true);}var zr= -1;if(Array.prototype.indexOf){zr=(J.yl.indexOf(V.pageIndex)>=0);}else{zr=(IPCC.Web.iG(J.yl,V.pageIndex)>=0);}if(zr===false){J.yl.push(V.pageIndex);if(J.yl.length===J.fG){J.OW.resolve(false);}}setTimeout(function(){J.trigger("PageTextReady",{pageNumber:V.pageIndex+1});},0);};var aoz=function(bu,V){var zr= -1;if(Array.prototype.indexOf){zr=(J.yl.indexOf(V.pageIndex)>=0);}else{zr=(IPCC.Web.iG(J.yl,V.pageIndex)>=0);}if(zr===false){J.yl.push(V.pageIndex);if(J.yl.length===J.fG){J.OW.resolve(false);}}};function aAM(sender,eventArgs){if(!eventArgs.text||(eventArgs.text.length===0)){return;}var kx=[];for(var i=0;i<eventArgs.pageNumbers.length;i++){kx.push(eventArgs.pageNumbers[i]+1);}var hy=[],tq= -eventArgs.startIndex,ad,dq,hQ,aA,j,k;for(j=0;j<kx.length;j++){hQ=J.cS.jF(kx[j]-1).cd().hB();tq+=hQ.eF();ad=0;if(j===0){ad=eventArgs.startIndex;}if(tq>=eventArgs.text.length){dq=tq-eventArgs.text.length-1;}else{dq=hQ.eF()-1;}aA=IPCC.F.Zf(hQ,ad,dq);for(k=0;k<aA.length;k++){hy.push({x:aA[k].x,y:aA[k].y,width:aA[k].width,height:aA[k].height,pageNumber:kx[j]});}}J.aY={pageNumber:kx[0],length:eventArgs.text.length,text:eventArgs.text,startIndex:eventArgs.startIndex,rectangles:hy};var T,agc={selectedText:eventArgs.text,pageNumbers:kx,clientX:eventArgs.clientX,clientY:eventArgs.clientY,handleClientX:eventArgs.handleClientX,handleClientY:eventArgs.handleClientY,textSelection:J.aY};function aBf(){var vz=J.ju;J.akU=true;J.ju=function(sender,args){J.ju=vz;setTimeout(function(){J.trigger(PCCViewer.EventType.MarkCreated,{mark:T,pageNumber:kx[0],clientX:eventArgs.clientX,clientY:eventArgs.clientY});},0);};};if(eventArgs.previousFirstMark){T=J.cj[eventArgs.previousFirstMark.get_markID()];J.ab.remove_markRemoved(J.Ed);J.ab.remove_markSelectionChanged(J.Ec);if(eventArgs.pageNumbers[0]!==eventArgs.previousFirstMark.ae){var azL=T.C.TL;var Yx;if(T.getReason){Yx=T.C.get_text();}var ZW;if(T.getFillColor){ZW=T.C.get_fillColor();}var Yo;if(T.getColor){Yo=T.C.get_lineColor();}var aaY;if(T.getThickness){aaY=T.C.get_lineWidth();}var abF;if(T.getHref){abF=T.C.get_href();}var azT=new PCCViewer.Conversation(T);var am=J.ab.gC(J.cS.getPage(T.C.ae));am.removeMark(T.C);for(var h=T.bI.length-1;h>=0;h--){var kA=T.bI[h];am=J.ab.gC(J.cS.getPage(kA.ae));am.removeMark(kA);T.bI.splice(h,1);}T.C=new IPCC.Web.UI.Mark(eventArgs.previousFirstMark.get_type());T.C.ae=eventArgs.pageNumbers[0];T.ak=eventArgs.pageNumbers[0]+1;T.C.kd=true;T.C.TL=azL;var vz=J.ju;J.ju=null;J.ab.remove_markChanged(J.oj);am=J.ab.gC(J.cS.getPage(T.C.ae));am.addMark(T.C);if(Yx){T.C.set_text(Yx);}if(ZW){T.C.set_fillColor(ZW);}if(Yo){T.C.set_lineColor(Yo);}if(aaY){T.C.set_lineWidth(aaY);}if(abF){T.C.set_href(abF);}T.cl=new PCCViewer.Conversation(T);PCCViewer.Conversation.pJ(azT,T.cl);J.ab.add_markChanged(J.oj);J.ju=vz;}T.C.set_selected(true);T.C.set_visible(true);T.setPosition({startIndex:eventArgs.startIndex,length:eventArgs.text.length});J.ab.add_markRemoved(J.Ed);J.ab.add_markSelectionChanged(J.Ec);J.oZ(T,eventArgs.pageNumbers[0]);return;}var zk=null;switch(eventArgs.mouseTool){case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:zk='HighlightAnnotation';break;case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:zk='TextSelectionRedaction';break;case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:zk='TextHyperlinkAnnotation';break;case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:zk='StrikethroughAnnotation';break;case IPCC.Web.UI.MouseTool.SelectText:aEy(eventArgs.text);J.HM[kx[0]]='selectText';break;}var aV=PCCViewer.MouseTools.getMouseTool(J.getCurrentMouseTool());var bj=(aV&&aV.getTemplateMark)?aV.getTemplateMark():undefined;var asl=bj?bj.getType():"";if(zk){aBf();J.trigger(PCCViewer.EventType.TextSelected,agc);T=J.addMark(kx[0],zk);if(J.sc){J.vu.addMarks(T);}T.C.kd=true;T.setPosition({startIndex:eventArgs.startIndex,length:eventArgs.text.length});if(asl===zk){if(bj.getFillColor){T.setFillColor(bj.getFillColor());}if(bj.getReason&& !T.os){T.setReason(bj.getReason());}if(bj.getReasons&&T.os){T.setReasons(bj.getReasons());}if(bj.getHref){T.setHref(bj.getHref());}if(bj.getColor){T.setColor(bj.getColor());}if(bj.getThickness){T.setThickness(bj.getThickness());}PCCViewer.Data.oY(bj,T);}return;}setTimeout(function(){J.trigger(PCCViewer.EventType.TextSelected,agc);},0);};function aoi(){var bw=J.cz,bx=document.createElement('div');bx.className='pccCopyText';bw.appendChild(bx);J.Gr=bx;};function aEy(aD){var mO,aGi=aD.split('\n'),HC=document.createDocumentFragment(),Dq,jr;mO=document.createTextNode(aD);HC.appendChild(mO);IPCC.F.KU(J.Gr);J.Gr.appendChild(HC);if(document.body.createTextRange){Dq=document.body.createTextRange();Dq.moveToElementText(J.Gr);Dq.select();}else if(window.getSelection){jr=window.getSelection();Dq=document.createRange();Dq.selectNodeContents(J.Gr);jr.removeAllRanges();jr.addRange(Dq);}};this.bi=new IPCC.Web.UI.ImGearDocument({documentIdentifier:this.bB.documentID,imageServicePath:this.bB.imageHandlerUrl});this.bi.set_encryption(this.bB.encryption||false);var TP=new IPCC.Web.UI.ImGearPage({pageNumber:0});this.bi.get_pages().addPage(TP);this.cS=this.bi.get_pages();this.ab=IPCC.initializePageListPlugin(element,options);aqP();this.ab.get_documents().addDocument(this.bi);this.OO=1;this.ab.add_pageDisplayed(amy);this.ab.add_pageOpenFailed(Yz);this.ab.add_pageOpening(aFE);this.ab.add_pageOpened(amf);this.ab.add_textPageReady(anH);this.ab.add_textExtractionFailed(aoz);this.ab.set_conversationDOMFactory(function(C,eQ,agU){var T=J.cj[C.get_markID()];if(T){return J.mt(T.getConversation(),eQ,agU);}});IPCC.F.apk(element,function(Je){if(!Je&&IPCC.F.As!=='svg'){console.warn('PrizmDoc cannot use inline font. Enable remote fonts in your browser for faster document rendering.');if(!J.dZ){IPCC.F.As='svg';return;}else if(J.nY){IPCC.F.As='svg';J.ab.disposeDisplayedPages();J.ab.displayAll();}else{var lJ=function(){J.off(PCCViewer.EventType.PageCountReady,lJ);IPCC.F.As='svg';J.ab.disposeDisplayedPages();J.ab.displayAll();};J.on(PCCViewer.EventType.PageCountReady,lJ);}}});aoi();this.ab.add_selectTextMouseToolCompleted(aAM);this.ab.add_propertyChanged(function(sC,cY){var proprtyName=cY.auX();if(proprtyName==="mouseTool"){setTimeout(function(){J.trigger(PCCViewer.EventType.MouseToolChanged,{mouseToolName:J.aV.getName()});},0);}});this.ab.add_markAdded(function(sender,eventArgs){if((eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.HighlightText||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.Strikethrough||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation)&&J.cj[eventArgs.mark.get_markID()]===undefined&&eventArgs.mark.bS!==undefined){J.oZ(eventArgs.mark,eventArgs.pageIndex);}if(J.ju){var aR=eventArgs.mark.get_type();if(aR!==IPCC.Web.UI.MarkType.Highlight&& !(aR===IPCC.Web.UI.MarkType.RectangleRedaction&&eventArgs.mark.bS!==undefined)){J.ju(sender,eventArgs);}}});this.ab.add_markCreating(function(sender,eventArgs){if(J.KA){J.KA(sender,eventArgs);}});this.ab.PA(function(sender,eventArgs){var Ej=0;var AN=0;var acI=0;var ur=0;var tE=0;var KN=0;var ayN=J.aV.getName().toLowerCase(),axs=J.aV.getType();if(axs===PCCViewer.MouseTool.Type.PlaceSignature){var aV=J.aV;var bj=aV.getTemplateMark(),jT=bj.getSignature(),akr=bj.getRectangle(),T,H={};if(!jT){return;}J.requestPageAttributes(eventArgs.pageIndex+1).then(function(attributes){var uf;if(attributes.width>0){AN=akr.width||(attributes.width/5);}if(jT.path&&jT.path.length>0){uf=IPCC.F.XB(jT.path);H={x:0,y:0,width:uf.width,height:uf.height};T=J.addMark(eventArgs.pageIndex+1,PCCViewer.Mark.Type.FreehandSignature);T.setPath(jT.path);T.setThickness(jT.thickness||4);}if(jT.text&&jT.text.length){uf=IPCC.F.uo(jT.text,jT.fontName);T=J.addMark(eventArgs.pageIndex+1,PCCViewer.Mark.Type.TextSignature);H={x:0,y:0,width:uf.width,height:uf.height};T.setText(jT.text);T.setFontName(jT.fontName);}acI=(H.width/AN);Ej=akr.height||(H.height/acI);ur=(eventArgs.imagePoint.x-(AN/2));tE=(eventArgs.imagePoint.y-(Ej/2));if(ur<=0){ur=0;}if(tE<=0){tE=0;}if((ur+AN)>=attributes.width){KN=(ur+AN)-attributes.width;ur=ur-KN;}if((tE+Ej)>=attributes.height){KN=(tE+Ej)-attributes.height;tE=tE-KN;}H={x:ur,y:tE,width:AN,height:Ej};T.setRectangle({x:ur,y:tE,width:AN,height:Ej});PCCViewer.Data.oY(bj,T);PCCViewer.Conversation.pJ(bj.getConversation(),T.getConversation());});J.setCurrentMouseTool(ayN);}});function MouseEvent(aI){var J=this;for(var i in aI){if(i){J[i]=aI[i];}}};this.ab.PH(function(sender,eventArgs){var aY=null,eC=null,T=null,jz=null,xl=false,RX=eventArgs.upTarget.type,LF=false;if(eventArgs.domEvent.ctrlKey===true||eventArgs.domEvent.shiftKey===true){LF=true;}if(eventArgs.upTarget.type==='page'&&eventArgs.downTarget.type==='page'&&eventArgs.upTarget.pageIndex===eventArgs.downTarget.pageIndex||eventArgs.upTarget.type==='comments'&&eventArgs.downTarget.element===eventArgs.upTarget.element){xl=true;if(eventArgs.upTarget.type==='page'&&eventArgs.downTarget.type==='page'&&LF===false){J.deselectAllMarks();}}else if(eventArgs.upMark&&typeof eventArgs.downMark!=='undefined'){if((eventArgs.upMark.get_type()===IPCC.Web.UI.MarkType.DocumentHyperlink)&&(eventArgs.upMark===eventArgs.downMark)){jz=J.azj(eventArgs.upMark);xl=jz!==null;RX="documentHyperlink";}else{T=J.cj[eventArgs.upMark.get_markID()];if(T===undefined){for(var hN in J.cj){if(J.cj.hasOwnProperty(hN)){if(J.cj[hN].C.bS===eventArgs.upMark.bS&&J.cj[hN].C.bS===eventArgs.downMark.bS){T=J.cj[hN];eventArgs.pageIndex=T.ak-1;xl=true;var aGn=J.getCurrentMouseTool();var aEv=PCCViewer.MouseTools.getMouseTool(aGn);var amH=aEv.getType();if(LF===false&&eventArgs.domEvent.button===0){if(amH===PCCViewer.MouseTool.Type.PanAndEdit||amH===PCCViewer.MouseTool.Type.EditMarks){J.deselectAllMarks();T.C.set_selected(true);}}break;}}}}else if(typeof eventArgs.downMark!=='undefined'&&typeof eventArgs.upMark!=='undefined'&&eventArgs.downMark.jP()===eventArgs.upMark.jP()){xl=true;if(LF===false&&eventArgs.downTarget.alreadySelected===false){J.deselectAllMarks();T.C.set_selected(true);}}if(T===undefined){if(J.ax&&J.HM[eventArgs.upTarget.pageIndex+1]==='search'){var fh=J.ax.getResults();for(var h=0;h<fh.length;h++){if(fh[h].ak===eventArgs.upTarget.pageIndex+1&&typeof eventArgs.downMark.ad!=='undefined'&&typeof eventArgs.upMark.ad!=='undefined'&&typeof eventArgs.downMark.db!=='undefined'&&typeof eventArgs.upMark.db!=='undefined'&&eventArgs.downMark.ad>=fh[h].getStartIndexInPage()&&eventArgs.downMark.ad+eventArgs.downMark.db<=fh[h].getStartIndexInPage()+fh[h].getText().length&&eventArgs.upMark.ad>=fh[h].getStartIndexInPage()&&eventArgs.upMark.ad+eventArgs.upMark.db<=fh[h].getStartIndexInPage()+fh[h].getText().length){RX='searchResult';eC=fh[h];eventArgs.upTarget.pageIndex=eC.ak-1;xl=true;break;}}}}if(xl===false&&T===undefined&&J.HM[eventArgs.upTarget.pageIndex+1]==='selectText'&&typeof eventArgs.downMark.ad!=='undefined'&&typeof eventArgs.upMark.ad!=='undefined'&&eventArgs.downMark.ad>=J.aY.startIndex&&eventArgs.downMark.ad+eventArgs.downMark.db<=J.aY.startIndex+J.aY.length&&eventArgs.upMark.ad>=J.aY.startIndex&&eventArgs.upMark.ad+eventArgs.upMark.db<=J.aY.startIndex+J.aY.length){RX='textSelection';aY=J.aY;xl=true;}}}var VQ=new MouseEvent(eventArgs.originalEvent);setTimeout(function(){var aEa=(isNaN(eventArgs.upTarget.pageIndex))?null:eventArgs.upTarget.pageIndex+1;var V={pageNumber:aEa,targetType:RX,textSelection:aY,searchResult:eC,mark:T,originalEvent:VQ,hyperlink:jz,clientX:eventArgs.clientX,clientY:eventArgs.clientY};if(xl===true){J.trigger('Click',V);}},0);});(function(){var yp=null;J.ab.PO(function(sender,eventArgs){var VQ=new MouseEvent(eventArgs.domEvent);var V={originalEvent:VQ,clientX:eventArgs.windowPoint.x,clientY:eventArgs.windowPoint.y};if(!(eventArgs.mark instanceof IPCC.Web.UI.Mark)){if(yp!==null){V.mark=J.cj[yp];yp=null;setTimeout(function(){J.trigger('MarkMouseLeave',V);},0);}}else{V.mark=J.cj[eventArgs.mark.get_markID()];if(V.mark===undefined){for(var hN in J.cj){if(J.cj.hasOwnProperty(hN)){if(J.cj[hN].C.bS===eventArgs.mark.bS){V.mark=J.cj[hN];break;}}}}if(!V.mark){return;}setTimeout(function(){if(yp!==V.mark.getId()){if(yp!==null){J.trigger('MarkMouseLeave',IPCC.F.extend({},V,{mark:J.cj[yp]}));}yp=V.mark.getId();J.trigger('MarkMouseEnter',V);}J.trigger('MarkMouseOver',V);},0);}});})();this.ab.add_hyperlinkPageReady(function(sender,eventArgs){if(J.EH[eventArgs.pageIndex]!==undefined){return;}var ae=eventArgs.pageIndex,aO=J.cS.getPage(ae),Fn=aO.get_hyperlinkPage().IH(),yT=J.EH[ae]=[];Fn.jL(function(zi){yT.push(new PCCViewer.DocumentHyperlink({ak:ae+1,zi:zi}));});if(!J.EE[ae]){J.EE[ae]=new PCCViewer.Deferred();}J.EE[ae].resolve(yT);});this.oZ=function(T,gu){var QW=false;function VS(){var ks=false;var cn=J.ab.get_displayedPages();for(var h=0;h<cn.get_length();h++){var aO=cn.getPage(h);if(aO.get_pageNumber()===gu){ks=true;break;}}return ks;};function MC(gN){if(J.ab){J.ab.dN(gN);}};if(VS()){if(Array.prototype.indexOf){if(IPCC.Web.iG(J.Bg,gu)>=0){QW=true;}}else{if(IPCC.Web.iG(J.Bg,gu)>=0){QW=true;}}if(!QW){J.Bg.push(gu);setTimeout(function(){var ci=J.Bg.length;if(ci>0){for(var h=0;h<ci;h++){MC(J.Bg[h]);}J.Bg.splice(0,ci);}},10);}}};var Gj={FreehandSignature:{lineColor:'color',lineWidth:'thickness',pathWidth:false,pathHeight:false},FreehandAnnotation:{lineColor:'color',lineWidth:'thickness',pathWidth:false,pathHeight:false},LineAnnotation:{lineColor:'color',lineWidth:'thickness'},PolylineAnnotation:{lineColor:'color',lineWidth:'thickness'},TextSignature:{textColor:false,fillColor:'color'},TextInputSignature:{lineVisible:false},StampAnnotation:{text:'label',fillColor:'color'},StampRedaction:{text:'label'},StrikethroughAnnotation:{lineColor:'color',lineWidth:'thickness',rectangle:'position'},RectangleRedaction:{text:this.bB.enableMultipleRedactionReasons?'reasons':'reason'},TextRedaction:{opacity:false},HighlightAnnotation:{rectangle:'position'},TextSelectionRedaction:{rectangle:'position',text:this.bB.enableMultipleRedactionReasons?'reasons':'reason'},TextHyperlinkAnnotation:{rectangle:'position'}};var Nf={lineColor:"borderColor",lineWidth:"borderThickness",pathString:"path",textColor:"fontColor",textHorizontalAlignment:"horizontalAlignment"};this.oj=function(bu,V){var T=J.cj[V.mark.get_markID()];var aT;if(T){aT=T.aT;}if(aT&&Gj[aT]&&Gj[aT][V.propertyName]===false){return;}var dg;if(aT){dg=Gj[aT]&&Gj[aT][V.propertyName]?Gj[aT][V.propertyName]:Nf[V.propertyName]?Nf[V.propertyName]:V.propertyName;}else{dg=Nf[V.propertyName]?Nf[V.propertyName]:V.propertyName;}if(V.mark.get_type()===IPCC.Web.UI.MarkType.HighlightText||V.mark.get_type()===IPCC.Web.UI.MarkType.Highlight||V.mark.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction||V.mark.get_type()===IPCC.Web.UI.MarkType.TextHighlightAnnotation||V.mark.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||V.mark.get_type()===IPCC.Web.UI.MarkType.Strikethrough||(V.mark.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&V.mark.bS!==undefined)){if(T){setTimeout(function(){J.trigger('MarkChanged',{mark:T,pageNumber:V.pageIndex+1,propertyName:dg});},0);}else{for(var hN in J.cj){if(J.cj.hasOwnProperty(hN)){T=J.cj[hN];if(T.bS===V.mark.bS){break;}}}}J.oZ(T,V.pageIndex);}else if(T&&V.mark.get_type()===IPCC.Web.UI.MarkType.Polyline&&dg==='points'){if(T.Yn){clearTimeout(T.Yn);}T.Yn=setTimeout(function(){T.Yn=undefined;J.oZ(T,V.pageIndex);J.trigger('MarkChanged',{mark:T,pageNumber:V.pageIndex+1,propertyName:dg});},1);}else if(T){J.oZ(T,V.pageIndex);setTimeout(function(){J.trigger('MarkChanged',{mark:T,pageNumber:V.pageIndex+1,propertyName:dg});},0);}if(T&&T.type===PCCViewer.Mark.Type.TextRedaction){T.C.set_opacity(0);}if(T&&(T.aT===PCCViewer.Mark.Type.TextInputSignature||T.aT===PCCViewer.Mark.Type.TextAreaSignature)){T.C.set_lineVisible(false);}};this.ab.add_markChanged(J.oj);this.ab.add_markReordered(function(sender,eventArgs){var T=J.cj[eventArgs.mark.get_markID()];setTimeout(function(){J.trigger('MarkReordered',{mark:T,pageNumber:eventArgs.pageIndex+1,index:eventArgs.zIndex,oldIndex:eventArgs.oldZIndex});},0);});this.Ec=function(sender,eventArgs){if(eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.Strikethrough||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.HighlightText){var T;for(var LD in J.cj){if(J.cj.hasOwnProperty(LD)){T=J.cj[LD];if(T.C.bS===eventArgs.mark.bS){T.C.set_selected(eventArgs.mark.get_selected());J.oZ(T.C,T.C.ae);for(var h=0;h<T.bI.length;h++){T.bI[h].set_selected(eventArgs.mark.get_selected());J.oZ(T.bI[h],T.bI[h].ae);}}}}}setTimeout(function(){J.trigger('MarkSelectionChanged',{pageNumber:eventArgs.pageIndex+1});},0);};this.ab.add_markSelectionChanged(J.Ec);this.ab.add_markTextSelectionChanged(function(sender,eventArgs){J.oZ(eventArgs.mark,eventArgs.pageIndex);});this.Ed=function(sender,eventArgs){var T;if(eventArgs.mark){T=J.cj[eventArgs.mark.get_markID()];if((eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.HighlightText||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.Strikethrough||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation)&&T===undefined&&eventArgs.mark.bS!==undefined){J.oZ(eventArgs.mark,eventArgs.pageIndex);}else if(T){setTimeout(function(){J.trigger(PCCViewer.EventType.MarkRemoved,{mark:T,pageNumber:eventArgs.pageIndex});},0);}}};this.ab.add_markRemoved(J.Ed);this.ab.add_commentAdding(function(sender,eventArgs){var T=J.cj[eventArgs.mark.get_markID()];if(eventArgs.comment.Kx.hZ===undefined){eventArgs.comment.Kx.hZ=J.getActiveMarkupLayer();}});this.ab.add_commentAdded(function(sender,eventArgs){var T=J.cj[eventArgs.mark.get_markID()];J.trigger(PCCViewer.EventType.CommentCreated,{conversation:T.getConversation(),comment:eventArgs.comment.Kx});});this.ab.add_commentRemoved(function(sender,eventArgs){var T=J.cj[eventArgs.mark.get_markID()];J.trigger(PCCViewer.EventType.CommentRemoved,{conversation:T.getConversation(),comment:eventArgs.comment.Kx});});this.ab.add_commentChanged(function(sender,eventArgs){var T=J.cj[eventArgs.mark.get_markID()];J.trigger(PCCViewer.EventType.CommentChanged,{conversation:T.getConversation(),comment:eventArgs.comment.Kx});});this.ab.add_scaleChanged(function(sender,eventArgs){var eV;switch(eventArgs.fitType){case 0:eV=PCCViewer.FitType.FullWidth;break;case 1:eV=PCCViewer.FitType.ShrinkToWidth;break;case 2:eV=PCCViewer.FitType.ActualSize;break;case 3:eV=PCCViewer.FitType.FullHeight;break;case 4:eV=PCCViewer.FitType.FullPage;break;default:break;}J.trigger(PCCViewer.EventType.ScaleChanged,{scaleType:eventArgs.scaleType,trigger:eventArgs.scaleTrigger,fitType:eV,scaleFactor:eventArgs.scaleFactor});});};ViewerControl.prototype.getPageCount=function(){return this.fG;};ViewerControl.prototype.getPageNumber=function(){return(this.ab)?(this.ab.ahY().get_pageNumber()+1):1;};ViewerControl.prototype.setPageNumber=function(pageNumber){var ak;if(typeof(pageNumber)==='number'){ak=pageNumber;}else{if(isNaN(+pageNumber)){throw "The parameter pageNumber is not a number.";}else{ak=Number(pageNumber);}}if(parseInt(ak,10)!==ak){throw new Error("The 'pageNumber' value "+ak+" is not an integer page number.");}if(ak<1||ak>this.getPageCount()|| !isFinite(ak)){throw "The parameter pageNumber is out of range.";}if(this.getPageNumber()===ak){return this;}if(this.ab){this.ab.scrollToPage(ak-1);}return this;};ViewerControl.prototype.changeToFirstPage=function(){if(this.ab){if(this.DI||this.nY){this.ab.scrollToFirstPage();}}return this;};ViewerControl.prototype.changeToLastPage=function(){if(this.ab){if(this.DI||this.nY){this.ab.scrollToLastPage();}}return this;};ViewerControl.prototype.changeToNextPage=function(){if(this.ab){if(this.DI||this.nY){this.ab.scrollToNextPage();}}return this;};ViewerControl.prototype.changeToPrevPage=function(){if(this.ab){if(this.DI||this.nY){this.ab.scrollToPreviousPage();}}return this;};ViewerControl.prototype.scrollBy=function(offsetX,offsetY){if(!this.dZ){throw new Error("The method scrollTo requires the viewer to be in a 'ViewerReady' state.");}var J=this;if(typeof offsetX==='number'&&typeof offsetY==='number'){J.ab.scrollBy(offsetX,offsetY);}else{if(isNaN(+offsetX)||isNaN(+offsetY)){throw new PCCViewer.Error('InvalidArgument','Please provide integer values for offsetX and offsetY properties.');}else{J.ab.scrollBy(Number(+offsetX),Number(+offsetY));}}return this;};ViewerControl.prototype.scrollTo=function(target){if(!this.dZ){throw new Error("The method scrollTo requires the viewer to be in a 'ViewerReady' state.");}if(this.fW){this.fW.reject(new PCCViewer.Error("Error","The scrollTo method was called before this scrollToAsync method completed scrolling, so scrolling for this scrollToAsync method has been cancelled."));this.fW=null;this.kM=null;}var J=this;var IT=function(){J.ab.scrollConversationIntoView(target.getMark().C.get_conversation());if(J.fW){J.fW.resolve();}J.fW=null;J.kM=null;};var xb=function(ev){if(ev.target.wp===target){J.off(PCCViewer.EventType.CommentCreated,xb);J.wp=null;J.scrollTo(target);}else if(ev.target.wp===null){J.off(PCCViewer.EventType.CommentCreated,xb);}if(J.fW){J.fW.resolve();}J.fW=null;J.kM=null;};var IL=function(ak,gw){J.ab.scrollRegionIntoView(ak-1,gw);if(J.fW){J.fW.resolve();}J.fW=null;J.kM=null;};acG(J,target,xb,IT,IL);return this;};ViewerControl.prototype.scrollToAsync=function(target){if(this.fW){this.fW.reject(new PCCViewer.Error("Error","The scrollToAsync method was called before this scrollToAsync method completed scrolling, so scrolling for this scrollToAsync method has been cancelled."));this.fW=null;this.kM=null;}var aa=PCCViewer.Deferred();var dC=aa.getPromise();var J=this;J.fW=aa;try{var IT=function(){J.ab.scrollConversationIntoView(target.getMark().C.get_conversation());if(J.fW){J.fW.resolve();}J.fW=null;J.kM=null;};var xb=function(ev){if(ev.target.wp===target){J.off(PCCViewer.EventType.CommentCreated,xb);J.wp=null;J.scrollTo(target);}else if(ev.target.wp===null){J.off(PCCViewer.EventType.CommentCreated,xb);}if(J.fW){J.fW.resolve();}J.fW=null;J.kM=null;};var IL=function(ak,gw){J.ab.scrollRegionIntoView(ak-1,gw);if(J.fW){J.fW.resolve();}J.fW=null;J.kM=null;};if(acG(J,target,xb,IT,IL)===true){aa.resolve();}}catch(e){J.fW=null;J.kM=null;aa.reject(new PCCViewer.Error("Error",e));}return dC;};function acG(bF,da,xb,IT,IL){var gw,ak,al;bF.wp=null;if(da instanceof PCCViewer.Conversation){if(bF.cj[da.getMark().getId()]===undefined){throw new Error("The parameter target is a conversation of a mark unknown to the viewer control.");}var aaN=bF.ab.scrollConversationIntoView(da.getMark().C.get_conversation());if(aaN==="PageOutOfView"){bF.kM=IT;bF.setPageNumber(da.getMark().getPageNumber());return false;}else if(aaN==="ConversationDivDoesNotExist"&&da.getMark().C.get_conversation().get_length()>0){bF.wp=da;bF.on(PCCViewer.EventType.CommentCreated,xb);return false;}else{bF.kM=null;return true;}}else if(da instanceof PCCViewer.SearchResult){if(da.FY!==bF.bi.get_documentIdentifier()){throw new Error("The parameter target is a SearchResult that was not created using the current document viewing session.");}al=da.getBoundingRectangle();gw=new IPCC.Web.UI.Rectangle(al.x,al.y,al.width,al.height);ak=da.getPageNumber();}else if(da instanceof PCCViewer.Mark){if(bF.cj[da.getId()]===undefined){throw new Error("The parameter target is a mark unknown to the viewer control.");}al=da.getBoundingRectangle();gw=new IPCC.Web.UI.Rectangle(al.x,al.y,al.width,al.height);ak=da.getPageNumber();}else if(da!==undefined&&da!==null){if(typeof da.x==='number'&&typeof da.y==='number'){gw=new IPCC.Web.UI.Rectangle(+da.x,+da.y,0,0);}else{if(isNaN(+da.x)||isNaN(+da.y)){throw new Error('The parameter target does not contain a valid x and y values.');}else{gw=new IPCC.Web.UI.Rectangle(Number(+da.x),Number(+da.y),0,0);}}if(da.width){if(typeof da.width==='number'){gw.width=da.width;}else{if(isNaN(+da.width)){throw new Error('The parameter target does not contain a valid width value.');}else{gw.width=Number(+da.width);}}}if(da.height){if(typeof da.height==='number'){gw.height=da.height;}else{if(isNaN(+da.height)){throw new Error('The parameter target does not contain a valid height value.');}else{gw.height=Number(+da.height);}}}if(typeof da.pageNumber==='number'){ak= +da.pageNumber;}else{if(isNaN(+da.pageNumber)){throw new Error('The parameter target does not contain a valid pageNumber value.');}else{ak=Number(+da.pageNumber);}}}else{throw new Error('The target parameter must be a Mark, SearchResult, or Point.');}if(ak<1||ak>bF.getPageCount()|| !isFinite(ak)){throw new RangeError("The parameter pageNumber is out of range.");}if(bF.ab.scrollRegionIntoView(ak-1,gw)===false){bF.kM=function(){IL(ak,gw);};bF.setPageNumber(ak);return false;}else{bF.kM=null;return true;}};ViewerControl.prototype.rotatePage=function(degreesClockwise){if(!this.dZ){throw "The method rotatePage requires the viewer to be in a 'ViewerReady' state.";}if(zN(this.getPageNumber()-1,this)===false){this.ab.dN(this.getPageNumber()-1);}var jb=degreesClockwise%360,J=this;if(jb!==0){var vT=[90,180,270,-90,-180,-270];if(Array.prototype.indexOf){if(!jb||vT.indexOf(jb)=== -1){throw new RangeError("The value of degreesClockwise ("+degreesClockwise+") is not valid.");}}else{if(!jb||IPCC.Web.iG(vT,jb)=== -1){throw new RangeError("The value of degreesClockwise ("+degreesClockwise+") is not valid.");}}this.ab.rotate(jb);}setTimeout(function(){J.trigger("PageRotated",{degreesClockwise:jb,pageNumber:(J.getPageNumber())});},0);return this;};ViewerControl.prototype.rotateDocument=function(degreesClockwise){if(!this.dZ){throw "The method rotateDocument requires the viewer to be in a 'ViewerReady' state.";}if(zN(this.getPageNumber()-1,this)===false){this.ab.dN(this.getPageNumber()-1);}var jb=degreesClockwise%360,J=this;if(jb!==0){var vT=[90,180,270,-90,-180,-270];if(Array.prototype.indexOf){if(!jb||vT.indexOf(jb)=== -1){throw new RangeError("The value of degreesClockwise ("+degreesClockwise+") is not valid.");}}else{if(!jb||IPCC.Web.iG(vT,jb)=== -1){throw new RangeError("The value of degreesClockwise ("+degreesClockwise+") is not valid.");}}this.ab.adx(jb);}setTimeout(function(){J.trigger("DocumentRotated",{degreesClockwise:jb});},0);return this;};ViewerControl.prototype.getScaleFactor=function(){if(!this.wt){throw "The getScaleFactor method cannot be called before the initial PageOpening event.";}return this.ab.get_scaleFactor();};ViewerControl.prototype.setScaleFactor=function(scaleFactor){if(!this.wt){throw "The setScaleFactor method cannot be called before the initial PageOpening event.";}if(isNaN(+scaleFactor)||(+scaleFactor<this.getMinScaleFactor())||(+scaleFactor>this.getMaxScaleFactor())){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('scaleFactor',scaleFactor,'The value must be a number between the values returned by the getMinScaleFactor and getMaxScaleFactor methods.');}this.ab.set_scaleFactor(+scaleFactor);return this;};ViewerControl.prototype.getMinScaleFactor=function(){if(!this.wt){throw "The getMinScaleFactor method cannot be called before the initial PageOpening event.";}return this.ab.getMinMaxZoom().minFactor;};ViewerControl.prototype.getMaxScaleFactor=function(){if(!this.wt){throw "The getMaxScaleFactor method cannot be called before the initial PageOpening event.";}return this.ab.getMinMaxZoom().maxFactor;};ViewerControl.prototype.zoomIn=function(zoomFactor){if(!this.wt){throw "The zoomIn method cannot be called before the initial PageOpening event.";}if(isNaN(+zoomFactor)||(+zoomFactor<1.01)||(+zoomFactor>20)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('zoomFactor',zoomFactor,'The value must be a number between 1.01 and 20 inclusive.');}if(this.ab){this.ab.zoomIn(+zoomFactor);}return this;};ViewerControl.prototype.zoomOut=function(zoomFactor){if(!this.wt){throw "The zoomOut method cannot be called before the initial PageOpening event.";}if(isNaN(+zoomFactor)||(+zoomFactor<1.01)||(+zoomFactor>20)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('zoomFactor',zoomFactor,'The value must be a number between 1.01 and 20 inclusive.');}if(this.ab){this.ab.zoomOut(+zoomFactor);}return this;};ViewerControl.prototype.getViewMode=function(){var lU;if(this.ab&&this.ab.get_viewMode){lU=this.ab.get_viewMode();}else{lU=this.bB.viewMode;}if(lU===IPCC.ViewMode.EqualWidthPages){return PCCViewer.ViewMode.EqualWidthPages;}else if(lU===IPCC.ViewMode.EqualFitPages){return PCCViewer.ViewMode.EqualFitPages;}else if(lU===IPCC.ViewMode.SinglePage){return PCCViewer.ViewMode.SinglePage;}else{return PCCViewer.ViewMode.Document;}};ViewerControl.prototype.setViewMode=function(viewMode){var lU;switch(viewMode){case PCCViewer.ViewMode.Document:lU=IPCC.ViewMode.Document;break;case PCCViewer.ViewMode.EqualWidthPages:lU=IPCC.ViewMode.EqualWidthPages;break;case PCCViewer.ViewMode.EqualFitPages:lU=IPCC.ViewMode.EqualFitPages;break;case PCCViewer.ViewMode.SinglePage:lU=IPCC.ViewMode.SinglePage;break;default:throw new RangeError("The value of viewMode is not a supported value.");}if(this.ab&&this.ab.set_viewMode){var Ii=this.ab.get_viewMode();if(Ii!==lU){if(Ii===IPCC.ViewMode.SinglePage){throw new Error("The view mode may not be changed from SinglePage to another view mode after initializing the viewer.");}else if(lU===IPCC.ViewMode.SinglePage){throw new Error("The view mode may not be changed to SinglePage after initializing the viewer. Please use the viewMode viewer parameter instead.");}this.ab.set_viewMode(lU);}}else{this.bB.viewMode=lU;}return this;};ViewerControl.prototype.getPageLayout=function(){var wj;if(this.ab&&this.ab.get_pageLayout){wj=this.ab.get_pageLayout();}else{wj=this.bB.pageLayout;}if(wj===IPCC.PageLayout.HorizontalScrollDirection){return PCCViewer.PageLayout.Horizontal;}else{return PCCViewer.PageLayout.Vertical;}};ViewerControl.prototype.setPageLayout=function(pageLayout){var wj;if(this.bB.viewMode!==IPCC.ViewMode.SinglePage){switch(pageLayout){case PCCViewer.PageLayout.Vertical:wj=IPCC.PageLayout.VerticalScrollDirection;break;case PCCViewer.PageLayout.Horizontal:if(this.ab&&this.ab.closeCommentsPanel){this.ab.closeCommentsPanel();var J=this;setTimeout(function(){J.trigger("CommentsPanelToggled",{isOpen:false});},10);}wj=IPCC.PageLayout.HorizontalScrollDirection;break;default:throw new RangeError("The value of pageLayout is not a supported value.");}}if(this.ab&&this.ab.set_pageLayout){this.ab.set_pageLayout(wj);}else{this.bB.pageLayout=wj;}return this;};ViewerControl.prototype.getAtMaxScale=function(){if(!this.wt){throw "The getAtMaxScale method cannot be called before the initial PageOpening event.";}return this.ab.getMinMaxZoom().atMax;};ViewerControl.prototype.getAtMinScale=function(){if(!this.wt){throw "The getAtMinScale method cannot be called before the initial PageOpening event.";}return this.ab.getMinMaxZoom().atMin;};ViewerControl.prototype.fitContent=function(fitType){if(!this.wt){throw "The fitContent method cannot be called before the initial PageOpening event.";}var BB;switch(fitType){case PCCViewer.FitType.FullWidth:BB=IPCC.FitType.FitToWidth;break;case PCCViewer.FitType.ShrinkToWidth:BB=IPCC.FitType.ShrinkToWidth;break;case PCCViewer.FitType.ActualSize:if(this.getViewMode()===PCCViewer.ViewMode.EqualWidthPages||this.getViewMode()===PCCViewer.ViewMode.EqualFitPages){throw new Error("Fitting content actual size is not supported when in EqualFitPages view mode.");}BB=IPCC.FitType.ActualSize;break;case PCCViewer.FitType.FullHeight:BB=IPCC.FitType.FitToHeight;break;case PCCViewer.FitType.FullPage:BB=IPCC.FitType.BestFit;break;default:throw new RangeError("The value of fitType is not a supported value.");}this.qz.then(function(sC){sC.fitPages(BB);});return this;};ViewerControl.prototype.getPageRotation=function(pageNumber){if(!this.dZ){throw new Error("The method getPageRotation requires the viewer to be in a 'ViewerReady' state.");}var ak;if(arguments.length>0){if(typeof(pageNumber)==='number'){ak=pageNumber;}else{if(isNaN(+pageNumber)){throw new Error("The parameter pageNumber is not a number.");}else{ak=Number(pageNumber);}}if(parseInt(ak,10)!==ak){throw new Error("The 'pageNumber' value "+ak+" is not an integer page number.");}if(ak<1||ak>this.getPageCount()|| !isFinite(ak)){throw new Error("The parameter pageNumber is out of range.");}return this.ab.Wn(ak-1);}else{return this.ab.Wn();}};ViewerControl.prototype.search=function(dY){var bB=this.bB;var aBM=bB.searchMethodType.toLowerCase();var aov=bB.searchMethodPageCountThreshold;var J=this;var Wq;var lg;var Gp=new PCCViewer.SearchRequest(true);if(Object.defineProperties){Object.defineProperties(Gp,{"searchQuery":{enumerable:true,get:function(){return lg.getSearchQuery();}},"results":{enumerable:true,get:function(){return lg.getResults();}},"isComplete":{enumerable:true,get:function(){return lg.getIsComplete();}},"errorCode":{enumerable:true,get:function(){return lg.getErrorCode();}},"errorMessage":{enumerable:true,get:function(){return lg.getErrorMessage();}}});}function JC(an){return function(){Gp.trigger.apply(Gp,[an].concat([].slice.call(arguments)));};};var adI=JC(PCCViewer.EventType.SearchCompleted);var abX=JC(PCCViewer.EventType.SearchCancelled);var acS=JC(PCCViewer.EventType.SearchResultsAvailable);var ade=JC(PCCViewer.EventType.PartialSearchResultsAvailable);var ack=function(aI){var fv=Wq.getErrorCode();if(fv==='ServerSearchUnavailable'){J.aid=true;J.xi=false;aDn();lg=J.clientSearch(dY);akk();}else{JC(PCCViewer.EventType.SearchFailed).apply(null,arguments);}};var akk=function(){lg.on(PCCViewer.EventType.SearchCompleted,adI);lg.on(PCCViewer.EventType.SearchFailed,ack);lg.on(PCCViewer.EventType.SearchCancelled,abX);lg.on(PCCViewer.EventType.SearchResultsAvailable,acS);lg.on(PCCViewer.EventType.PartialSearchResultsAvailable,ade);};var aDn=function(){lg.off(PCCViewer.EventType.SearchCompleted,adI);lg.off(PCCViewer.EventType.SearchFailed,ack);lg.off(PCCViewer.EventType.SearchCancelled,abX);lg.off(PCCViewer.EventType.SearchResultsAvailable,acS);lg.off(PCCViewer.EventType.PartialSearchResultsAvailable,ade);};var Ev=function(){if(J.aid===false){Wq=J.serverSearch(dY);lg=Wq;akk();IPCC.F.forEach(['getSearchQuery','getResults','getIsComplete','getErrorCode','getErrorMessage','cancel','getPagesWithoutText'],function(an){Gp[an]=function(){return lg[an].apply(lg,arguments);};});return Gp;}else{return J.clientSearch(dY);}};switch(aBM){case('auto'):if(aov>=this.fG){return this.clientSearch(dY);}else{return Ev();}break;case('client'):return this.clientSearch(dY);case('server'):return Ev();default:throw new Error("The value of 'options.searchMethodType' should be 'auto', 'server', or 'client'.");}};ViewerControl.prototype.acc=function(dY,aBp){var J=this;var df=new PCCViewer._Search();this.ax=df.atY();PCCViewer.SearchTask.prototype.aiS(dY);if(aBp===true){if(J.zT!==true){J.qz.then(function(sC){var Jb=function(){J.off('PageCountReady',Jb);J.clientSearch(dY);};J.on('PageCountReady',Jb);return J.ax;});}if(!this.bi.atb()){this.bi.Nu(0,this.bi.fG-1,this.bi.fG);}}this.vY=null;this.FF={};this.ab.clearAllSelectedText();return df;};ViewerControl.prototype.afl=function(){var az=this;this.ax.on('PartialSearchResultsAvailable',function(cY){if(az.xB){return;}var Hz=[];var RM={};Hz=cY.partialSearchResults;var aj=Hz[0];if(az.FF[aj.getPageNumber()]!==undefined){RM=az.FF[aj.getPageNumber()];}else{RM.ad=aj.getId();}aj=Hz[Hz.length-1];RM.dq=aj.getId();az.FF[aj.getPageNumber()]=RM;function BU(aO){if(az.xB){return;}az.agF(aO.get_pageNumber(),Hz);};var cn=az.ab.get_displayedPages();for(var h=0;h<cn.get_length();h++){var aO=cn.getPage(h);if(aO.get_pageNumber()+1===aj.getPageNumber()){az.requestPageText(aO.get_pageNumber()+1).then(BU.bind(null,aO));}}});this.ax.on('SearchCompleted',function(cY){az.xi=false;});this.ax.on('SearchCancelled',function(cY){az.xi=false;});this.trigger('SearchPerformed',{searchRequest:this.ax});};ViewerControl.prototype.clientSearch=function(searchQuery){var az=this;var df=az.acc(searchQuery,true);searchQuery=df.SJ(searchQuery);if(this.xi===false){az.ab.set_retainPageText(true);this.ax=df.tJ(searchQuery,this.bi);this.xi=true;}else{throw new Error("You cannot run multiple searches concurrently. Retry after the current search is completed.");}az.afl();return this.ax;};ViewerControl.prototype.serverSearch=function(searchQuery){var az=this;var df=az.acc(searchQuery,false);searchQuery=df.SJ(searchQuery);if(this.xi===false){this.ax=df.Ev(searchQuery,this.bi);this.xi=true;}else{throw new Error("You cannot run multiple searches concurrently. Retry after the current search is completed.");}az.afl();return this.ax;};ViewerControl.prototype.getSearchRequest=function(){return this.ax;};ViewerControl.prototype.clearSearch=function(){if(!this.dZ){throw "The clearSearch method requires the viewer to be in a 'ViewerReady' state.";}var J=this;if(this.getSelectedSearchResult()){this.vY=null;setTimeout(function(){J.trigger(PCCViewer.EventType.SearchResultSelectionChanged,{});},0);}this.ab.clearAllSelectedText();this.ax=null;setTimeout(function(){J.trigger(PCCViewer.EventType.SearchCleared,{});},0);return this;};ViewerControl.prototype.validateSearch=function(dY){var eU={errorsExist:false};var searchTermObj,alb,h,bz,We,Nt,KX;if(typeof dY!=='object'&&typeof dY!=='string'){eU.errorsExist=true;eU.summaryMsg="Search query must be either an object or string.";return eU;}if(typeof dY==='string'&&dY.length<0){eU.errorsExist=true;eU.summaryMsg="Search term must contain at least 3 characters.";return eU;}else if(typeof dY==='string'){return eU;}if(!dY.hasOwnProperty('searchTerms')){eU.errorsExist=true;eU.summaryMsg="Search options must have a 'searchTerms' key.";return eU;}if(Object.prototype.toString.call(dY.searchTerms)!=='[object Array]'){eU.errorsExist=true;eU.summaryMsg="Search terms value must be an array.";return eU;}if(!dY.searchTerms.length){eU.errorsExist=true;eU.summaryMsg="Search terms array must contain at least one value.";return eU;}eU.searchTerms=[];IPCC.F.forEach(dY.searchTerms,function(searchTermObj){var IF=anh(searchTermObj);if(IF.errorsExist){eU.errorsExist=true;}eU.searchTerms=eU.searchTerms.concat(IF.searchTerms);});return eU;};function anh(kP){var eU={errorsExist:false,searchTerms:[]};var aBd=kP.type?IPCC.F.trim(kP.type).toLowerCase():undefined;if(aBd==='proximity'){if(Object.prototype.toString.call(kP.terms)!=='[object Array]'){eU.searchTerms.push({isValid:false,message:"Proximity search terms property must be an array"});eU.errorsExist=true;return eU;}if(kP.terms.length<2){eU.searchTerms.push({isValid:false,message:"Proximity search terms array must contain at least two values"});eU.errorsExist=true;return eU;}if(!kP.distance){eU.searchTerms.push({isValid:false,message:"Proximity search term must have a distance specified"});eU.errorsExist=true;return eU;}IPCC.F.forEach(kP.terms,function(aAo){var IF=anh(aAo);if(IF.errorsExist){eU.errorsExist=true;}eU.searchTerms=eU.searchTerms.concat(IF.searchTerms);});return eU;}var We,KX;var Nt=(typeof kP.matchingOptions!=='undefined'&&kP.matchingOptions.hasOwnProperty('matchCase'))?kP.matchingOptions.matchCase:false;if(typeof kP.searchTerm==='undefined'||typeof kP.searchTerm!=='string'||(kP.searchTermIsRegex===true&& !awt(kP.searchTerm,Nt))){eU.errorsExist=true;eU.searchTerms.push({isValid:false,message:"Search term must be a string containing either plain text or a valid regular expression."});return eU;}We=(typeof kP.matchingOptions!=='undefined'&&kP.matchingOptions.hasOwnProperty('exactPhrase'))?kP.matchingOptions.exactPhrase:false;if(We){if(kP.searchTerm.length<0){eU.errorsExist=true;eU.searchTerms.push({isValid:false,message:"Search term must contain at least 3 characters."});return eU;}}else{var alb=kP.searchTerm.split(' ');IPCC.F.forEach(alb,function(KX){if(KX.length>0&&KX.length<0){eU.errorsExist=true;eU.searchTerms.push({isValid:false,message:"Search term must contain at least 3 characters."});}});}if(!eU.searchTerms.length){eU.searchTerms.push({isValid:true,message:null});}return eU;};var awt=function(Vu,Nt){var aFR,Yp,NA;if(Nt){Yp='gm';}else{Yp='igm';}if(!Vu&&Vu!==null){NA=false;}else{try{aFR=new RegExp(Vu,Yp);NA=true;}catch(err){NA=false;}}return NA;};ViewerControl.prototype.requestRevisions=function(){this.jW=new PCCViewer.Kz({imageHandlerUrl:this.bB.imageHandlerUrl,documentID:this.bB.documentID});return this.jW.aDC();};ViewerControl.prototype.gv=function(SD){var Bc=false,cn=this.ab.get_displayedPages();for(var h=0;h<cn.get_length();h++){var aO=cn.getPage(h);if(aO.get_pageNumber()===SD){Bc=true;}}return Bc;};ViewerControl.prototype.getDownloadDocumentURL=function(){var bQ;if(!(/^[\x00-\x7F]*$/.test(this.bi))){bQ=this.bB.imageHandlerUrl+'/SaveDocument/q?DocumentID=e'+this.bB.documentID+'/SourceFile';}else{bQ=this.bB.imageHandlerUrl+'/SaveDocument/q?DocumentID=u'+encodeURIComponent(this.bB.documentID);}return bQ;};ViewerControl.prototype.requestDocumentHyperlinks=function(pageNumber){var ak;var aa=PCCViewer.Deferred();var dC=aa.getPromise();var bF=this;try{if(typeof(pageNumber)==='number'){ak=pageNumber;}else{if(isNaN(+pageNumber)){throw "The parameter pageNumber is not a number.";}else{ak=parseInt(pageNumber,10);}}if(ak<1||ak>this.getPageCount()|| !isFinite(pageNumber)){throw "The specified page is out of range.";}var YF=this.EE[ak-1];if(!YF){YF=this.EE[ak-1]=new PCCViewer.Deferred();this.qz.then(function(){var aO=bF.cS.getPage(ak-1);aO.Ay();});}aa.resolve(YF.getPromise());}catch(e){aa.reject(new PCCViewer.Error('Error',e));}return dC;};ViewerControl.prototype.azj=function(avd){var i,j,yT;for(j=0;j<this.EH.length;j++){yT=this.EH[j];if(yT){for(i=0;i<yT.length;i++){if(yT[i].zi.OZ()===avd){return yT[i];}}}}return null;};ViewerControl.prototype.print=Print.print;ViewerControl.prototype.validatePrintRange=Print.validatePrintRange;ViewerControl.prototype.canPrintMarks=Print.canPrintMarks;ViewerControl.prototype.deserializeMarks=function deserializeMarks(values){if(this.dZ===false){throw new Error("The method addMark is not available until 'ViewerReady' state is reached.");}var J=this;var fG=J.getPageCount();var fz;if(typeof values==='string'){try{fz=JSON.parse(values);}catch(e){throw new Error('JSON parse error: '+e.message);}}else{fz=values;}if(fz.constructor!==Array){fz=[fz];}function QD(fj,aU){throw new Error('Cannot serialize mark (at index '+aU+') because of '+fj);};var Zv=IPCC.F.map(J.getAllMarks(),function(T){return T.getUid();});IPCC.F.forEach(fz,function validateObject(bp,aU){if(!bp.pageNumber||isNaN(+bp.pageNumber)||bp.pageNumber<1||bp.pageNumber>fG){QD('unknown page number '+bp.pageNumber,aU);}if(!PCCViewer.Mark.Type[bp.type]){QD('unknown type '+bp.type,aU);}if(bp.type==='RectangleRedaction'||bp.type==='TextSelectionRedaction'){if(!J.bB.enableMultipleRedactionReasons&&bp.hasOwnProperty('reasons')){QD('Loading markup with multiple redaction reasons is not supported when enableMultipleRedactionReasons is set to false',aU);}}if(IPCC.F.contains(Zv,bp.uid)){QD('uid '+bp.uid+' is being duplicated or already exists',aU);}else if(bp.uid!==undefined){Zv.push(bp.uid);}});if(fz.length===0){return[];}var cQ=J.bi.get_pages();var asm=[];cQ.jL(function(aO){asm.push(J.ab.gC(aO));});var bE=IPCC.F.reduce(fz,function(aj,bp){var aO=cQ.jF(bp.pageNumber-1);var SI=aO.get_pageWidth();var ajU=aO.get_pageHeight();var gx=bp.pageData;if(!gx&&(!SI|| !ajU)){var auH=IPCC.F.find(bp.lineGroups,function(akH){return(akH.pageNumber&&akH.pageNumber===bp.pageNumber);});gx=auH.pageData;}var aS=SI||gx.width;var aq=ajU||gx.height;var T=cX[bp.type].call(J,bp,{aS:aS,aq:aq});if(bp.uid===undefined){Zv.push(T.getUid());}if(!SI){aO.EF=true;aO.adz(aS);aO.acw(aq);}if(!T.C.has_unsafe_href()){aj.push(T);}else{J.deleteMarks(T);}return aj;},[]);return bE;};ViewerControl.prototype.serializeMarks=function serializeMarks(marks){var aa=PCCViewer.Deferred();var dC=aa.getPromise();var J=this,bE,awU=false;function abv(fj){setTimeout(function(){aa.reject(fj);},0);};if(Object.prototype.toString.call(marks)==='[object Array]'){bE=marks;}else if(marks){bE=[marks];awU=true;}else{abv(new PCCViewer.Error('InvalidArgument','`marks` is not defined or falsy.'));return dC;}var Mq;bE=IPCC.F.filter(bE,function(lL,aU){var IR=lL instanceof PCCViewer.Mark&&lL===J.getMarkById(lL.getId())&& ! !ep[lL.getType()];if(!IR&& !Mq){Mq=aU;}return IR;});if(Mq){abv(new PCCViewer.Error('InvalidArgument','Cannot serialize object at index '+Mq+' because it is not a valid mark or a mark known to ViewerControl'));return dC;}var QX=J.bi.get_pages();var cQ=IPCC.F.reduce(bE,function(er,lL){var ak=lL.getPageNumber();if(er[ak]){return er;}er[ak]=QX.getPage(ak-1);return er;},{});function aqL(T,aO,aCX){return function(mU){ep[T.getType()]({mark:T,page:aO,vc:J},function(dz,cJ){if(!dz){aCX(cJ);mU();}else{aa.reject(dz);}});};};var sF=[];var axr=IPCC.F.map(bE,function(lL,aU){return aqL(lL,cQ[lL.getPageNumber()],function(cJ){sF[aU]=cJ;});});IPCC.F.SS(axr,function(){aa.resolve(sF);});return dC;};ViewerControl.prototype.setRedactionViewMode=function(redactionViewMode){var OJ,XS;switch(redactionViewMode){case PCCViewer.RedactionViewMode.Draft:OJ=true;XS=PCCViewer.RedactionViewMode.Draft;break;case PCCViewer.RedactionViewMode.Normal:OJ=false;XS=PCCViewer.RedactionViewMode.Normal;break;default:throw new RangeError("The value of RedactionViewMode is not a supported value.");}if(this.ab&&this.ab.set_redactionDraftMode){var axI=this.ab.get_redactionDraftMode();if(axI!==OJ){this.ab.set_redactionDraftMode(OJ);}}else{this.bB.redactionViewMode=XS;}return this;};ViewerControl.prototype.getRedactionViewMode=function(){var afk;if(this.ab&&this.ab.get_redactionDraftMode){afk=this.ab.get_redactionDraftMode();if(afk===true){return PCCViewer.RedactionViewMode.Draft;}else{return PCCViewer.RedactionViewMode.Normal;}}else{return this.bB.redactionViewMode;}};ViewerControl.prototype.convertToRedaction=function(searchResult){var J=this;var eC=searchResult;if(this.dZ===false){throw "The convertToRedaction method can not be used until 'ViewerReady' state is reached.";}else if(eC instanceof Array){throw new Error("Argument for this method cannot be an array.");}else if(eC instanceof PCCViewer.SearchResult===false){throw new Error("The argument is not an instance of SearchResult.");}else if(eC.FY!==this.bi.get_documentIdentifier()){throw new Error("The SearchResult argument was not created using the current document viewing session.");}var aO=J.cS.getPage(eC.getPageNumber()-1);if(!(aO.cd()&&aO.cd().wJ()&&aO.cd().nn()===true)){throw new Error("The text has not been retrieved for this page.");}var jA=eC.getStartIndexInPage();var ed=eC.getStartIndexInPage()+eC.getText().length;var kF=IPCC.vH();var am=J.ab.gC(aO);var hc=aO.cd().hB();var cq=ayH(am,hc,jA,ed,kF,eC.getPageNumber()-1);var T=new PCCViewer.Mark({type:'TextSelectionRedaction',igMark:cq,pageNumber:eC.getPageNumber()});T.C=cq;T.bI=[];this.cj[cq.get_markID()]=T;var vz=J.ju;J.ju=function(sender,eventArgs){if(J.sc){J.vu.addMarks(T);}setTimeout(function(){J.trigger('MarkCreated',{mark:T,pageNumber:eventArgs.pageIndex+1,clientX:eventArgs.clientX,clientY:eventArgs.clientY});},0);};am.addMark(cq);J.ju=vz;J.ab.display(eC.getPageNumber()-1);return T;};var ayH=function(am,hc,jA,ed,kF,akC){var cq=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextSelectionRedaction);cq.bS=kF;cq.ae=akC;var T=null;var jY={hg:Number.MAX_VALUE,jg:0,_top:Number.MAX_VALUE,hK:0};for(var bz=jA;bz<ed;bz++){var fb=hc.kk(bz);if(T){var xI=T.get_rectangle();if(Math.abs(fb.bm.y-xI.y)<1&&Math.abs(fb.bm.height-xI.height)<1&&fb.bm.x+fb.bm.width>=xI.x+xI.width){T.set_rectangle(new IPCC.Web.UI.Rectangle(xI.x,xI.y,fb.bm.x+fb.bm.width-xI.x,xI.height));}else{abI(am,cq,T,jY);T=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.RectangleRedaction);T.set_rectangle(fb.bm);T.kE(true);T.set_fillColor('#000000');T.set_text(cq.aD);T.set_lineWidth(0);T.bS=kF;}}else{T=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.RectangleRedaction);T.set_rectangle(fb.bm);T.kE(true);T.set_fillColor('#000000');T.set_text(cq.aD);T.set_lineWidth(0);T.bS=kF;}T.ae=akC;}if(T!==null){abI(am,cq,T,jY);}cq.set_rectangle(new IPCC.Web.UI.Rectangle(jY.hg,jY._top,jY.jg-jY.hg,jY.hK-jY._top));return cq;};var abI=function(am,cq,T,jY){var H=T.get_rectangle();if(H.x<jY.hg){jY.hg=H.x;}if(H.y<jY._top){jY._top=H.y;}if(H.x+H.width>jY.jg){jY.jg=H.x+H.width;}if(H.y+H.height>jY.hK){jY.hK=H.y+H.height;}am.addMark(T);cq.aA.push(T);};ViewerControl.prototype.convertToHighlight=function(searchResult){var eC=searchResult;if(this.dZ===false){throw "The convertToHighlight method can not be used until 'ViewerReady' state is reached.";}if(eC instanceof Array){throw new Error("Argument for this method cannot be an array.");}if(eC instanceof PCCViewer.SearchResult===false){throw new Error("The argument is not an instance of SearchResult.");}if(eC.FY!==this.bi.get_documentIdentifier()){throw new Error("The SearchResult argument was not created using the current document viewing session.");}var cq;var ahp;var am;var aj=eC;var jA=aj.getStartIndexInPage();var ed=aj.getStartIndexInPage()+aj.getText().length;var kF=IPCC.vH();var J=this;var T;am=this.ab.gC(this.cS.getPage(aj.getPageNumber()-1));cq=abO(IPCC.Web.UI.MarkType.HighlightText,aj,jA,kF);T=new PCCViewer.Mark({type:'HighlightAnnotation',igMark:cq,pageNumber:aj.getPageNumber()});for(jA;jA<ed;jA++){ahp=abO(IPCC.Web.UI.MarkType.Highlight,aj,jA,kF);am.addMark(ahp);}this.cj[cq.get_markID()]=T;var vz=this.ju;this.ju=function(sender,eventArgs){if(J.sc){J.vu.addMarks(T);}setTimeout(function(){J.trigger('MarkCreated',{mark:T,pageNumber:eventArgs.pageIndex+1,clientX:eventArgs.clientX,clientY:eventArgs.clientY});},0);};am.addMark(cq);J.ju=vz;this.ab.display(aj.getPageNumber()-1);T.fillColor=aj.getHighlightColor();return T;};var abO=function(aR,aj,arz,kF){var T=new IPCC.Web.UI.Mark(aR);if(aR===IPCC.Web.UI.MarkType.HighlightText){T.cC=aj.getText();}T.ad=arz;T.set_rectangle({x:0,y:0,width:0,height:0});T.db=aj.getText().length;T.aFl=aj.getStartIndexInPage()+aj.getText().length;T.cZ=127;T.cE=aj.getHighlightColor();T.ic='y';T.bS=kF;return T;};ViewerControl.prototype.agF=function(ae,fh){var aj={};for(var bz=0;bz<fh.length;bz++){aj=fh[bz];this.ab.selectText(aj.getPageNumber()-1,aj.getStartIndexInPage(),aj.getText().length,aj.getHighlightColor());}this.ab.display(aj.getPageNumber()-1);this.HM[aj.getPageNumber()]='search';};ViewerControl.prototype.Wr=function(ae,searchResult){var aj={};if(this.ax===null||typeof this.ax.getResults!=='function'){return;}var fh=this.ax.getResults();this.ab.clearSelectedText(ae-1);var Xr=this.FF[ae];if(!Xr){return;}for(var bz=Xr.ad;bz<Xr.dq+1;bz++){aj=fh[bz];if(aj.getPageNumber()===ae){this.ab.selectText(aj.getPageNumber()-1,aj.getStartIndexInPage(),aj.getText().length,aj.getHighlightColor());if(searchResult===aj.getId()){this.ab.selectText(aj.getPageNumber()-1,aj.getStartIndexInPage(),aj.getText().length,aj.getHighlightColor());}}}this.ab.display(aj.getPageNumber()-1);this.HM[aj.getPageNumber()]='search';};ViewerControl.prototype.setSelectedSearchResult=function(searchResult,scrollTo){if(!this.dZ){throw "The setSelectedSearchResult method requires the viewer to be in a 'ViewerReady' state.";}if(searchResult===null){this.IZ= -1;}else{if(!(searchResult instanceof PCCViewer.SearchResult)){throw "The parameter searchResult is not an instance of PCCViewer.SearchResult.";}if(!this.ax){throw "There is no current SearchRequest object available.";}var ala=this.ax.getResults();if(ala[searchResult.getId()].ox!==searchResult.ox){throw "The parameter searchResult is not current. There is a newer version of search result available.";}ala=null;this.IZ=searchResult.getId();if(scrollTo){var al=searchResult.getBoundingRectangle();var gw=new IPCC.Web.UI.Rectangle(al.x,al.y,al.width,al.height);if(this.ab.scrollRegionIntoView(searchResult.getPageNumber()-1,gw)===false){this.kM=function(){J.ab.scrollRegionIntoView(searchResult.getPageNumber()-1,gw);};this.setPageNumber(searchResult.getPageNumber());}else{this.kM=null;}}}var J=this;var aDW=searchResult!==null?searchResult.getPageNumber(): -1;if(this.vY&&this.vY.getPageNumber()!==aDW){J.requestPageText(J.vY.getPageNumber()).then(function BU(){J.Wr(J.vY.getPageNumber(),J.IZ);});}if(searchResult){J.requestPageText(searchResult.getPageNumber()).then(function BU(){J.Wr(searchResult.getPageNumber(),J.IZ);});}this.vY=searchResult;setTimeout(function(){J.trigger(PCCViewer.EventType.SearchResultSelectionChanged,{});},0);return this;};ViewerControl.prototype.clearSelectedSearchResult=function(){if(!this.dZ){throw "The clearSelectedSearchResult method requires the viewer to be in a 'ViewerReady' state.";}this.setSelectedSearchResult(null);return this;};ViewerControl.prototype.getSelectedSearchResult=function(){return this.vY;};ViewerControl.prototype.requestPageText=function(pageNumber){var ak;var aa=PCCViewer.Deferred();var dC=aa.getPromise();var J=this;try{if(typeof(pageNumber)==='number'){ak=pageNumber;}else{if(isNaN(+pageNumber)){throw "The parameter pageNumber is not a number.";}else{ak=parseInt(pageNumber,10);}}if(ak<1||ak>this.getPageCount()|| !isFinite(pageNumber)){throw "The specified page is out of range.";}this.qz.then(function(sC){var aO=J.cS.getPage(ak-1);var fg=aO.cd();fg.aez(true);if(fg&&fg.wJ()){if(fg.nn()===true){var aD=aO.cd().Be();aa.resolve(aD);}else{aa.resolve("");}}else{var Jc=function(bu,co){if(co.containsText===true){var aD=fg.Be();aa.resolve(aD);}else{aa.resolve("");}aO.EC(Jc);aO.Dr(JE);};var JE=function(bu,co){if(co.exception&&co.exception.message){aa.reject(new PCCViewer.Error("TextExtractionFailed",co.exception.message));}else{aa.reject(new PCCViewer.Error("TextExtractionFailed","Text extraction failed."));}aO.EC(Jc);aO.Dr(JE);};aO.AO(Jc);aO.Ac(JE);aO.Ay();}});}catch(e){aa.reject(new PCCViewer.Error("Error",e));}return dC;};ViewerControl.prototype.disposePageText=function(pageNumber){var ak;var J=this;if(!this.dZ){throw new Error("The disposePageText method requires the viewer to be in a 'ViewerReady' state.");}if(J.ab.get_retainPageText()===true){return this;}if(typeof(pageNumber)==='number'){ak=pageNumber;}else{if(isNaN(+pageNumber)){throw new Error("The parameter pageNumber is not a number.");}else{ak=parseInt(pageNumber,10);}}if(ak<1||ak>this.getPageCount()|| !isFinite(pageNumber)){throw new Error("The specified page is out of range.");}var cn=J.ab.get_displayedPages();for(var h=0;h<cn.get_length();h++){var afV=cn.getPage(h);if(afV.get_pageNumber()===ak-1){afV.cd().aez(false);return this;}}var aO=J.cS.getPage(ak-1);aO.aif();return this;};ViewerControl.prototype.isPageTextReady=function(pageNumber){IPCC.bO.mc(pageNumber,"pageNumber",1,this.getPageCount());var aO;return(this.ab&&this.cS&&(aO=this.cS.getPage(pageNumber-1))&&aO.cd()&&aO.cd().wJ())===true;};ViewerControl.prototype.documentHasText=function(){return this.avT;};ViewerControl.prototype.requestPageAttributes=function(pageNumber){var ak;var aa=PCCViewer.Deferred();var dC=aa.getPromise();var J=this;try{if(typeof(pageNumber)==='number'){ak=pageNumber;}else{if(isNaN(+pageNumber)){throw "The parameter pageNumber is not a number.";}else{ak=parseInt(pageNumber,10);}}if(ak<1||ak>this.getPageCount()|| !isFinite(pageNumber)){throw "The specified page is out of range.";}this.qz.then(function(sC){var aO=J.cS.getPage(ak-1);if(aO.ki()>0||aO.jE()>0){aa.resolve({'width':aO.ki(),'height':aO.jE()});}else{var xk=function(aZ,dk){aa.resolve({'width':aZ,'height':dk});};var xs=function(errorMessage){aa.reject(new PCCViewer.Error("RequestPageAttributesFailed",errorMessage));};sC.requestPageAttributes(aO,xk,xs);}});}catch(e){aa.reject(new PCCViewer.Error("Error",e));}return dC;};ViewerControl.prototype.destroy=function(){if(!this.xB){this.EH=undefined;this.EE=undefined;this.vu=undefined;this.nf=undefined;this.jW=undefined;this.hO=undefined;if(this.ab&&typeof this.ab.dispose==="function"){this.ab.dispose();}this.bQ="";this.fG=0;delete this.ab;this.bi=undefined;this.OO=0;this.cS=undefined;this.agg=false;if(this.gQ){IPCC.F.KU(this.gQ);this.gQ=this.cz=undefined;}this.nY=false;this.zT=false;this.DI=false;this.ab=undefined;this.Rh=undefined;this.qz=undefined;PCCViewer.MouseTools.rX=undefined;this.mt=undefined;this.EH=undefined;this.Gr=undefined;for(var HY in this.cj){if(this.cj.hasOwnProperty(HY)){this.cj[HY].cJ=undefined;this.cj[HY].cl=undefined;this.cj[HY].C=undefined;this.cj[HY]=undefined;}}this.cj=undefined;this.dZ=false;this.xB=true;this.trigger=function Yc(){};this.kw=undefined;this.kw={};}};ViewerControl.prototype.getMarkById=function(markId){var J=this;if(!isNaN(markId)){markId=parseInt(markId,10);}else{throw "The parameter, markId, contains a value that is not a number.";}if(J.cj[markId]){return J.cj[markId];}else{return null;}};ViewerControl.prototype.getMarksByType=function(markType){var SP=[];if(typeof markType!=="string"){throw "The parameter, markType, is not a String.";}ago(markType);if(!this.ab){return SP;}var h=0;var cG=this.cS.get_length();var J=this;function apL(C){var T=J.cj[C.get_markID()];if(T&&T.getType().toLowerCase()===markType.toLowerCase()){SP.push(T);}};for(h=0;h<cG;h++){var am=this.ab.gC(this.cS.getPage(h));if(am){am.forEachMark(apL);}}return SP;};ViewerControl.prototype.getAllMarks=function(){var CD=[];if(!this.ab){return CD;}var cG=this.cS.get_length();var J=this;var h=0;var T;function Sc(C){var T=J.cj[C.get_markID()];if(typeof T!=='undefined'){CD.push(T);}};for(h=0;h<cG;h++){var am=this.ab.gC(this.cS.getPage(h));if(am){am.forEachMark(Sc);}}return CD;};function ago(markType){var eP;switch(markType.toLowerCase()){case "lineannotation":eP=IPCC.Web.UI.MarkType.Line;break;case "rectangleannotation":eP=IPCC.Web.UI.MarkType.Rectangle;break;case "ellipseannotation":eP=IPCC.Web.UI.MarkType.Ellipse;break;case "textannotation":eP=IPCC.Web.UI.MarkType.Text;break;case "stampannotation":eP=IPCC.Web.UI.MarkType.Stamp;break;case "highlightannotation":eP=IPCC.Web.UI.MarkType.HighlightText;break;case "texthyperlinkannotation":eP=IPCC.Web.UI.MarkType.TextHyperlinkAnnotation;break;case "freehandannotation":eP=IPCC.Web.UI.MarkType.Freehand;break;case "rectangleredaction":eP=IPCC.Web.UI.MarkType.RectangleRedaction;break;case "transparentrectangleredaction":eP=IPCC.Web.UI.MarkType.Rectangle;break;case "textredaction":eP=IPCC.Web.UI.MarkType.Text;break;case "stampredaction":eP=IPCC.Web.UI.MarkType.Stamp;break;case "freehandsignature":eP=IPCC.Web.UI.MarkType.SignaturePath;break;case "textsignature":eP=IPCC.Web.UI.MarkType.SignatureText;break;case "textinputsignature":eP=IPCC.Web.UI.MarkType.TextLine;break;case "textareasignature":eP=IPCC.Web.UI.MarkType.TextAreaSignature;break;case "textselectionredaction":eP=IPCC.Web.UI.MarkType.TextSelectionRedaction;break;case "imagestampannotation":eP=IPCC.Web.UI.MarkType.ImageStampAnnotation;break;case "imagestampredaction":eP=IPCC.Web.UI.MarkType.ImageStampRedaction;break;case "polylineannotation":eP=IPCC.Web.UI.MarkType.Polyline;break;case "strikethroughannotation":eP=IPCC.Web.UI.MarkType.Strikethrough;break;default:throw "The parameter, markType, does not specify a valid mark type.";}return eP;};ViewerControl.prototype.addMarkFromSearchResult=function(searchResult,markType){var J=this,gx;if(J.dZ===false){throw "The method addMarkFromSearchResult is not available until 'ViewerReady' state is reached.";}if(!(searchResult instanceof PCCViewer.SearchResult)){throw new PCCViewer.Error("InvalidArgument","searchResult is not a valid instance of PCCViewer.SearchResult");}if([PCCViewer.Mark.Type.TextSelectionRedaction,PCCViewer.Mark.Type.HighlightAnnotation,PCCViewer.Mark.Type.TextHyperlinkAnnotation,PCCViewer.Mark.Type.StrikethroughAnnotation].indexOf(markType)=== -1){throw new PCCViewer.Error("InvalidArgument","The mark type must be: 'TextSelectionRedaction', 'HighlightAnnotation', 'TextHyperlinkAnnotation' or 'StrikethroughAnnotation'.");}if(searchResult.gx.width===0){var Kf=J.bi.cQ.jF(0);gx={width:Kf.ki(),height:Kf.jE()};}else{gx=searchResult.gx;}var amn=IPCC.F.tZ(new Date());var markInfo=[{conversation:{comments:[],data:{}},creationDateTime:amn,data:{},interactionMode:'Full',lineGroups:[{lines:searchResult.aA,pageData:gx,pageNumber:searchResult.pageNumber,startIndex:searchResult.startIndexInPage,textLength:searchResult.text.length}],modificationDateTime:amn,pageNumber:searchResult.pageNumber,pageData:gx,reason:"",selectedText:searchResult.text,startIndex:searchResult.startIndexInPage,textLength:searchResult.text.length,type:markType}];var QQ=J.deserializeMarks(markInfo);return QQ[0];};ViewerControl.prototype.addMark=function(pageNumber,markType){if(this.dZ===false){throw "The method addMark is not available until 'ViewerReady' state is reached.";}var ak;if(typeof(pageNumber)==='number'){ak=pageNumber;}else{if(isNaN(+pageNumber)){throw "The parameter, pageNumber, contains a value that is not a number.";}else{ak=parseInt(pageNumber,10);}}if(ak<1||ak>this.cS.get_length()|| !isFinite(ak)){throw "The specified page is out of range.";}if(typeof markType!=="string"){throw "The parameter, markType, is not a String.";}var T=this.ajT(ak,markType);return this.anr(T);};ViewerControl.prototype.ajT=function(ak,aR,bB){var J=this;bB=bB||{};var eP=ago(aR);var C=new IPCC.Web.UI.Mark(eP);C.ae=ak-1;var OQ={type:aR,igMark:C,pageNumber:ak,uid:bB.uid,viewerControl:this};if(aR.toLowerCase()==="highlightannotation"||aR.toLowerCase()==="textselectionredaction"||aR.toLowerCase()==="strikethroughannotation"||aR.toLowerCase()==="texthyperlinkannotation"){OQ.cS=J.cS;OQ.ab=J.ab;}if(aR.toLowerCase()==="rectangleredaction"||aR.toLowerCase()==="textselectionredaction"){OQ.enableMultipleRedactionReasons=this.bB.enableMultipleRedactionReasons;}var T=new PCCViewer.Mark(OQ);return T;};ViewerControl.prototype.anr=function(T){var J=this;if(J.akU===true){J.akU=false;}else{var vz=J.ju;J.ju=function(sender,eventArgs){J.ju=vz;if(J.sc){J.vu.addMarks(T);}setTimeout(function(){J.trigger('MarkCreated',{mark:T,pageNumber:eventArgs.pageIndex+1,clientX:eventArgs.clientX,clientY:eventArgs.clientY});},0);};}var am=this.ab.gC(this.cS.getPage(T.ak-1));am.addMark(T.C);J.cj[T.C.get_markID()]=T;J.oZ(T,T.ak-1);return T;};ViewerControl.prototype.deleteMarks=function(marks){var J=this;var h=0;var T;if(!this.dZ){throw "The method deleteMarks can not be used until 'ViewerReady' state is reached.";}function LU(ps){var ae=ps.getPageNumber()-1;var bS='';var aT='';var Jy=ae;var am=J.ab.gC(J.cS.getPage(ae));am.removeMark(ps.C);if(J.cj[ps.getId()]){bS=ps.C.bS;aT=ps.getType();delete J.cj[ps.getId()];}var NK=aT.toLowerCase();if((NK==='highlightannotation'||NK==='textselectionredaction'||NK==='strikethroughannotation'||NK==='texthyperlinkannotation')&&(ps.bI&&ps.bI.length)){for(var h=0;h<ps.bI.length;h++){var kA=ps.bI[h];am=J.ab.gC(J.cS.getPage(kA.ae));am.removeMark(kA);J.oZ(kA,kA.ae);}}J.nf.forEach(function(ez){if(ez.hasMark(ps.getId())){ez.removeMarks(ps);}});};if(marks instanceof Array){for(h=0;h<marks.length;h++){T=marks[h];if(!(T instanceof PCCViewer.Mark)){throw "The parameter, marks, contains an item that is not a Mark.";}if(!(J.cj[T.getId()])){throw "The parameter, marks, contains a Mark that is not on the document.";}}for(h=0;h<marks.length;h++){LU(marks[h]);J.oZ(marks[h],marks[h].getPageNumber()-1);}}else{if(marks instanceof PCCViewer.Mark){if(!(J.cj[marks.getId()])){throw "The parameter, marks, contains a Mark that is not on the document.";}LU(marks);J.oZ(marks,marks.getPageNumber()-1);}else{throw "The parameter, marks, is not an Array of Marks or a single Mark.";}}return this;};ViewerControl.prototype.deleteAllMarks=function(){var CD=this.getAllMarks();if(CD.length>0){return this.deleteMarks(CD);}return this;};ViewerControl.prototype.hideMarks=function(marks){adQ(this,marks,false,'hideMarks');return this;};ViewerControl.prototype.showMarks=function(marks){adQ(this,marks,true,'showMarks');return this;};function adQ(bF,bE,vX,aDH){var h=0;var T;if(!bF.dZ){throw new PCCViewer.Error("InvalidArgument","The method "+aDH+" can not be used until 'ViewerReady' state is reached.");}if(bE instanceof Array){for(h=0;h<bE.length;h++){T=bE[h];if(!(T instanceof PCCViewer.Mark)){throw new PCCViewer.Error("InvalidArgument","The parameter, marks, contains an item that is not a Mark.");}if(!(bF.cj[T.getId()])){throw new PCCViewer.Error("InvalidArgument","The parameter, marks, contains a Mark that is not on the document.");}}for(h=0;h<bE.length;h++){bE[h].setVisible(vX);}}else{if(bE instanceof PCCViewer.Mark){if(!(bF.cj[bE.getId()])){throw new PCCViewer.Error("InvalidArgument","The parameter, marks, contains a Mark that is not on the document.");}bE.setVisible(vX);}else{throw new PCCViewer.Error("InvalidArgument","The parameter, marks, is not an Array of Marks or a single Mark.");}}};function zN(asV,mP){var ks=false;var cn=mP.ab.get_displayedPages();for(var h=0;h<cn.get_length();h++){var aO=cn.getPage(h);if(aO.get_pageNumber()===asV){ks=true;break;}}return ks;};ViewerControl.prototype.moveMarkToFront=function(mark){var am;var gu;if(!this.dZ){throw "The method moveMarkToFront is not available until ViewerReady state is reached.";}if(mark instanceof PCCViewer.Mark){gu=mark.getPageNumber();if(mark.getPageNumber()>0){am=this.ab.gC(this.cS.getPage(gu-1));}else{throw "The mark object has not been added to any page yet";}}else{throw "The parameter, mark object is not a PCCViewer.Mark object";}if(!mark.C){throw "The parameter, mark object is probably a templateMark or has not been initialized";}if(am){if(mark.C instanceof IPCC.Web.UI.Mark){mark.C.moveToFront();if(zN(gu-1,this)===true){var mP=this;setTimeout(function(){mP.ab.dN(gu-1);},1);}}else{throw "The mark object has not been initialized yet";}}return this;};ViewerControl.prototype.moveMarkToBack=function(mark){var am;var gu;if(!this.dZ){throw "The method moveMarkToBack is not available until ViewerReady state is reached.";}if(!(mark instanceof PCCViewer.Mark)){throw "The parameter, mark object is not a PCCViewer.Mark object";}gu=mark.getPageNumber();if(gu>=1){am=this.ab.gC(this.cS.getPage(mark.getPageNumber()-1));}else{throw "The mark object has not been added to any page yet";}if(!mark.C){throw "The parameter, mark may be a templateMark or has not been initialized";}if(am){if(mark.C instanceof IPCC.Web.UI.Mark){mark.C.moveToBack();if(zN(gu-1,this)===true){var mP=this;setTimeout(function(){mP.ab.dN(gu-1);},1);}}else{throw "The mark object has not been initialized yet";}}return this;};ViewerControl.prototype.moveMarkForward=function(mark){var am,gu;if(!this.dZ){throw "The method moveMarkForward is not available until 'ViewerReady' state is reached.";}if(!(mark instanceof PCCViewer.Mark)){throw "The parameter, mark object is not a PCCViewer.Mark object";}gu=mark.getPageNumber();if(gu>=1){am=this.ab.gC(this.cS.getPage(mark.getPageNumber()-1));}else{throw "The mark object has not been added to any page yet";}if(!mark.C){throw "The parameter, mark object is probably a templateMark or has not been initialized";}if(am){if(mark.C instanceof IPCC.Web.UI.Mark){mark.C.moveForward();if(zN(gu-1,this)===true){var mP=this;setTimeout(function(){mP.ab.dN(gu-1);},1);}}else{throw "The mark object has not been initialized yet";}}return this;};ViewerControl.prototype.moveMarkBackward=function(mark){var am,gu;if(!this.dZ){throw "The method moveMarkBackward is not available until ViewerReady state is reached.";}if(!(mark instanceof PCCViewer.Mark)){throw "The parameter, mark object is not a PCCViewer.Mark object";}gu=mark.getPageNumber();if(gu>=1){am=this.ab.gC(this.cS.getPage(mark.getPageNumber()-1));}else{throw "The mark object has not been added to any page yet";}if(!mark.C){throw "The parameter, mark object is probably a templateMark or has not been initialized";}if(am){if(mark.C instanceof IPCC.Web.UI.Mark){mark.C.moveBackward();if(zN(gu-1,this)===true){var mP=this;setTimeout(function(){mP.ab.dN(gu-1);},1);}}else{throw "The mark object has not been initialized yet";}}return this;};ViewerControl.prototype.getSelectedMarks=function(){var bE=[];var So=[];if(this.dZ===false){return bE;}var cG=this.cS.get_length(),am,eo;var J=this;function amD(Ox){if(Ox){var QG=Ox.get_type();if(QG===IPCC.Web.UI.MarkType.HighlightText||QG===IPCC.Web.UI.MarkType.TextSelectionRedaction||QG===IPCC.Web.UI.MarkType.Strikethrough||QG===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation){for(var hN in J.cj){if(J.cj.hasOwnProperty(hN)){eo=J.cj[hN];if(Ox.bS===eo.C.bS){for(var h=0;h<So.length;h++){if(eo.C.bS===So[h]){return;}}So.push(eo.C.bS);break;}}}}else{eo=J.cj[Ox.get_markID()];}if(eo&&eo instanceof PCCViewer.Mark){bE.push(eo);}else{return bE;}}};for(var h=0;h<cG;h++){am=this.ab.gC(this.cS.getPage(h));if(am){am.get_selectedMarks().forEach(amD,{});}}return bE;};function adf(bE,aoD,mP){var eo,h;function VS(gN){var ks=false;var cn=mP.ab.get_displayedPages();for(var h=0;h<cn.get_length();h++){var aO=cn.getPage(h);if(aO.get_pageNumber()===gN){ks=true;break;}}return ks;};if(!bE.length){return;}for(h=0;h<bE.length;h++){if(bE[h]instanceof PCCViewer.Mark){eo=mP.cj[parseInt(bE[h].getId(),10)];if(eo&&eo instanceof PCCViewer.Mark){if(eo.C&&eo.C instanceof IPCC.Web.UI.Mark){if(eo.getId()!==eo.C.get_markID().toString()){throw "The mark ID does not match the ID of the mark loaded in the viewer";}}else{throw "The mark provided may not have been added to the document pages in the viewer";}}else{throw "The parameter, marks, contains a Mark that is not on the document.";}}else{throw "The mark provided in the position : "+(h+1)+" is invalid";}}var nM=[];var tp=false;for(h=0;h<bE.length;h++){eo=mP.cj[parseInt(bE[h].getId(),10)];tp=false;if(eo){if(eo.getId()===eo.C.get_markID().toString()){eo.C.set_selected(aoD);if(Array.prototype.IndexOf){tp=(nM.IndexOf(eo.getPageNumber())>=0);}else{tp=(IPCC.Web.iG(nM,eo.getPageNumber())>=0);}}if(!tp){var cK=eo.getPageNumber();if(VS(cK-1)){nM.push(cK);}}}}if(nM.length>0){setTimeout(function(){for(h=0;h<nM.length;h++){mP.ab.dN(nM[h]-1);}},1);}};ViewerControl.prototype.selectMarks=function(marks){if(this.dZ===false){throw "The method selectMarks is not available until 'ViewerReady' state is reached.";}var bE=[];if(marks===undefined){return this;}if(marks&& !(marks instanceof Array)){if(marks instanceof PCCViewer.Mark){bE.push(marks);}}else{bE=marks;}if(bE.length===0){return this;}adf(bE,true,this);return this;};ViewerControl.prototype.deselectMarks=function(marks){if(this.dZ===false){throw "The method deselectMarks is not available until 'ViewerReady' state is reached.";}var bE=[];if(marks===undefined){return this;}if(marks&& !(marks instanceof Array)){if(marks instanceof PCCViewer.Mark){bE.push(marks);}}else{bE=marks;}if(bE.length===0){return this;}adf(bE,false,this);return this;};ViewerControl.prototype.deselectAllMarks=function(){var nM=[];var bE=this.getSelectedMarks();var tp=false,h,eo;for(h=0;h<bE.length;h++){eo=this.cj[parseInt(bE[h].getId(),10)];tp=false;if(eo){if(eo.getId()===eo.C.get_markID().toString()){eo.C.set_selected(false);if(Array.prototype.IndexOf){tp=(nM.IndexOf(eo.getPageNumber())>=0);}else{tp=(IPCC.Web.iG(nM,eo.getPageNumber())>=0);}}if(!tp){var cK=eo.getPageNumber();if(zN(cK-1,this)===true){nM.push(cK);}}}}if(nM.length>0){var mP=this;setTimeout(function(){for(h=0;h<nM.length;h++){mP.ab.dN(nM[h]-1);}},1);}return this;};ViewerControl.prototype.copyMarks=function(marks){var bF=this,QQ;if(marks instanceof PCCViewer.Mark){marks=[marks];}if(marks instanceof Array===false){throw new PCCViewer.Error("InvalidArgument","The parameter, marks, is not an Array of Marks or a single Mark.");}var bE=[];IPCC.F.forEach(marks,function(T){if(T instanceof PCCViewer.Mark){if(bF.cj[T.getId()]===undefined){throw new PCCViewer.Error("InvalidArgument","The parameter, marks, contains a Mark that is not on the document.");}bE.push(T);}else{throw new PCCViewer.Error("InvalidArgument","The parameter, marks, contains an item that is not a Mark.");}});var sF=[];IPCC.F.forEach(bE,function(T,af){ep[T.getType()]({mark:T},function(dz,cJ){cJ.uid=undefined;sF[af]=cJ;});});this.sc=false;QQ=bF.deserializeMarks(sF);this.sc=true;return QQ;};ViewerControl.prototype.enterTextMarkEditingMode=function(T){var bF=this,ab=this.ab;var abK=function(SD){var Bc=false,cn=ab.get_displayedPages();for(var h=0;h<cn.get_length();h++){var aO=cn.getPage(h);if(aO.get_pageNumber()===SD){Bc=true;}ab.qA(aO.get_pageNumber());}return Bc;};if(typeof T==="undefined"||T===null){abK(-1);}else{if(this.dZ===false){throw PCCViewer.Error("ViewerNotReady","The method selectMarks is not available until 'ViewerReady' state is reached.");}if(!(T instanceof PCCViewer.Mark)){throw new PCCViewer.Error("InvalidArgument","The argument 'mark' must be an instance of PCCViewer.Mark.");}var afg=this.cj[parseInt(T.getId(),10)];if(!(afg&&afg instanceof PCCViewer.Mark)){throw new PCCViewer.Error("InvalidArgument","The provided mark is not on the document.");}if(!(T.C&&T.C instanceof IPCC.Web.UI.Mark)){throw new PCCViewer.Error("InvalidArgument","The provided mark may not have been added to the document pages in the viewer");}if(T.getId()!==T.C.get_markID().toString()){throw new PCCViewer.Error("InvalidArgument","The mark ID does not match the ID of the mark loaded in the viewer");}var aR=T.getType();if(aR!==PCCViewer.Mark.Type.TextAnnotation&&aR!==PCCViewer.Mark.Type.TextRedaction&&aR!==PCCViewer.Mark.Type.TextInputSignature&&aR!==PCCViewer.Mark.Type.TextAreaSignature){throw new PCCViewer.Error("InvalidArgument","The mark type must be: 'TextAnnotation', 'TextRedaction', 'TextInputSignature', or 'TextAreaSignature'.");}var Bc=abK(T.getPageNumber()-1);if(Bc){bF.ab.vV(T.getPageNumber()-1,T.C);}}return this;};ViewerControl.prototype.getCharacterIndex=function(sortableObject){if(this.dZ===false){throw new Error("The getCharacterIndex method can not be used until 'ViewerReady' state is reached.");}var HI= -1;var cO;var al;var ak=0;if(sortableObject instanceof PCCViewer.Mark){if(sortableObject.getStartPoint){cO=sortableObject.getStartPoint();}else{al=(sortableObject.C)?sortableObject.C.get_boundingRectangle():sortableObject.getRectangle();cO={x:al.x,y:al.y};}ak=sortableObject.getPageNumber();}else if(sortableObject instanceof PCCViewer.SearchResult){return sortableObject.startIndexInPage;}else if(sortableObject!==undefined&&sortableObject!==null){if(typeof sortableObject.x==='number'&&typeof sortableObject.y==='number'){cO={x: +sortableObject.x,y: +sortableObject.y};}else{if(isNaN(+sortableObject.x)||isNaN(+sortableObject.y)){throw new Error('The parameter sortableObject does not contain valid x and y values.');}else{cO={x:Number(+sortableObject.x),y:Number(+sortableObject.y)};}}if(typeof sortableObject.pageNumber==='number'){ak= +sortableObject.pageNumber;}else{if(isNaN(+sortableObject.pageNumber)){throw new Error('The parameter sortableObject does not contain a valid pageNumber value.');}else{ak=Number(+sortableObject.pageNumber);}}}else{throw new Error('The sortableObject parameter must be a Mark, SearchResult, or Point.');}if(ak<1||ak>this.getPageCount()|| !isFinite(ak)){throw new RangeError("The parameter pageNumber is out of range.");}if(!this.isPageTextReady(ak)){return-2;}var aO=this.cS.getPage(ak-1);var uF=aO.cd().VG();var hc=aO.cd().hB();function ael(bbox,point){if(point.x>bbox.x&&point.x<bbox.x+bbox.width&&point.y>bbox.y&&point.y<bbox.y+bbox.height){return true;}return false;};function abm(cW,eS){var bv=Math.max(Math.min(eS.x,cW.x+cW.width),cW.x);var cA=Math.max(Math.min(eS.y,cW.y+cW.height),cW.y);return(eS.x-bv)*(eS.x-bv)+(eS.y-cA)*(eS.y-cA);};var Ci;var Mz=Number.MAX_VALUE;for(var h=0;h<uF.eF();h++){var hE=uF.aup(h);if(ael(hE.cN(),cO)){for(var bz=hE.aed();bz<hE.aiR();bz++){var Wz=hc.kk(bz);var sv=Wz.tx();if(ael(sv,cO)){return bz;}Ci=abm(sv,cO);if(Ci<Mz){HI=bz;Mz=Ci;}}return HI;}Ci=abm(hE.cN(),cO);if(Ci<Mz){if(hE.cN().y>cO.y){HI=hE.aed()-1;}else{HI=hE.aiR();}Mz=Ci;}}return HI;};ViewerControl.prototype.getCurrentMouseTool=function(){return this.aV.getName();};ViewerControl.prototype.setCurrentMouseTool=function(name){var J=this;if(this.dZ===false){throw "The method setCurrentMouseTool is not available until 'ViewerReady' state is reached.";}var zL=name.toLowerCase();var aV=PCCViewer.MouseTools.getMouseTool(zL);if(!aV){throw new Error("The name argument for setCurrentMouseTool(name) must be the name of a known mouse tool.");}var gJ,hi;switch(aV.getType()){case PCCViewer.MouseTool.Type.Magnifier:gJ=IPCC.Web.UI.MouseTool.Magnifier;break;case PCCViewer.MouseTool.Type.SelectToZoom:gJ=IPCC.Web.UI.MouseTool.RectangleZoom;break;case PCCViewer.MouseTool.Type.PanAndEdit:case PCCViewer.MouseTool.Type.Pan:gJ=IPCC.Web.UI.MouseTool.HandPan;break;case PCCViewer.MouseTool.Type.SelectText:gJ=IPCC.Web.UI.MouseTool.SelectText;break;case PCCViewer.MouseTool.Type.EditMarks:gJ=IPCC.Web.UI.MouseTool.EditMarks;break;case PCCViewer.MouseTool.Type.LineAnnotation:gJ=IPCC.Web.UI.MouseTool.CreateLineMark;hi=aoX(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.RectangleAnnotation:gJ=IPCC.Web.UI.MouseTool.CreateRectangleMark;hi=abP(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.RectangleRedaction:gJ=IPCC.Web.UI.MouseTool.CreateRectangleRedactionMark;hi=azM(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.TransparentRectangleRedaction:gJ=IPCC.Web.UI.MouseTool.CreateRectangleMark;hi=aFQ(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.EllipseAnnotation:gJ=IPCC.Web.UI.MouseTool.CreateEllipseMark;hi=abP(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextAnnotation:gJ=IPCC.Web.UI.MouseTool.CreateTextMark;hi=aFA(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextRedaction:gJ=IPCC.Web.UI.MouseTool.CreateTextMark;hi=Sf(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextInputSignature:gJ=IPCC.Web.UI.MouseTool.CreateTextInputSignatureMark;hi=Sf(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextAreaSignature:gJ=IPCC.Web.UI.MouseTool.CreateTextAreaSignatureMark;hi=Sf(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.StampAnnotation:case PCCViewer.MouseTool.Type.StampRedaction:gJ=IPCC.Web.UI.MouseTool.CreateStampMark;hi=aDM(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.HighlightAnnotation:gJ=IPCC.Web.UI.MouseTool.CreateHighlightTextMark;hi=Rf(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextHyperlinkAnnotation:gJ=IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark;hi=Rf(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.FreehandAnnotation:gJ=IPCC.Web.UI.MouseTool.CreateFreehandMark;hi=aqd(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextSelectionRedaction:gJ=IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction;hi=Rf(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.PlaceSignature:var ari=this.bB.resourcePath+'/placeSignatureCursor.cur';this.ab.set_mouseTool(IPCC.Web.UI.MouseTool.None);this.ab.set_allowMarkEdits(false);this.ab.set_mouseCursor('url('+ari+'), pointer');this.aV=aV;return this;case PCCViewer.MouseTool.Type.ImageStampAnnotation:gJ=IPCC.Web.UI.MouseTool.CreateImageStampAnnotationMark;hi=adL(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.ImageStampRedaction:gJ=IPCC.Web.UI.MouseTool.CreateImageStampRedactionMark;hi=adL(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.PolylineAnnotation:gJ=IPCC.Web.UI.MouseTool.CreatePolylineMark;hi=azb(aV.getTemplateMark());break;case PCCViewer.MouseTool.Type.StrikethroughAnnotation:gJ=IPCC.Web.UI.MouseTool.CreateStrikethroughMark;hi=Rf(aV.getTemplateMark());break;default:throw new Error("An unexpected error occurred. The MouseTool type is not known.");}var axW=this.ab.get_mouseTool();if(this.aV!==aV&&axW===gJ){setTimeout(function(){J.trigger(PCCViewer.EventType.MouseToolChanged,{mouseToolName:J.aV.getName()});},0);}this.aV=aV;if(hi){this.KA=hi.onCreating;this.ju=hi.onAdded;}else{this.KA=undefined;this.ju=undefined;}this.ab.set_mouseTool(gJ);this.ab.set_allowMarkEdits((aV.getType()===PCCViewer.MouseTool.Type.PanAndEdit));return this;};function Tg(bF,Su,kr){if(bF.zT!==true){var Jb=function(){bF.off('PageCountReady',Jb);Tg(bF,Su,kr);};bF.on('PageCountReady',Jb);return;}var az=bF;var wn;var hM={},wA={},pP=[];var gK=az.fG;var kX;var bB;if(Su){bB=Su;}var acQ=[];var QX=az.bi.get_pages();var avb=function(aO,done){var aHr=false;var jF=aO;var ak=aO.get_pageNumber();var fa=jF.get_pageWidth();var eE=jF.get_pageHeight();try{if(jF){var gC=az.ab.gC(jF),EI=0,DE=0,fj="",aGN=false;var getArt=function getArt(){var Ow;if(bB&&bB.AX&&bB.AX[ak]){Ow=IPCC.F.extend({},bB);Ow.AX=bB.AX[ak];}else{Ow=bB;}var bz,TN;var IB=gC.aBS(ak,EI,DE,Ow);if(IB.hM){hM[ak]=IB.hM;}else{var arT=atJ(ak,kX,DE,EI);hM[ak]=arT;}if(IB.pP){for(bz=0;bz<IB.pP.length;bz++){TN=IB.pP[bz];wA[TN.au.imageStampId]=TN;}}done();};if(gC){if(!fa|| !eE){if(gC.get_markCount()>0){az.ab.Na(aO,function(aZ,dk){EI=aZ;if(EI){jF.Nk(EI);}DE=dk;if(DE){jF.Or(DE);}getArt();},function(nD){done(nD);});}else{getArt();}}else{EI=fa;DE=eE;getArt();}}else{done(new Error("No art page was found"));}}}catch(ex){done(new Error("Error while saving annotation, error:"+ex.message));}};QX.forEach(function(aO,aU,hO){acQ.push(function(done){avb(aO,done);});});var Xc=function(bw,aO){var xG="";var h;if(!bw.hl){if(bw.toString()){return bw.toString();}else{return '<![CDATA[]]>';}}if((gK===1||aO===0||(aO>0&&bw.hl!=="documentAnnotations"&&bw.hl!=="pages"))&&bw.hl!=="highlights"){xG='<'+bw.hl;for(var AE in bw.au){if(bw.au.hasOwnProperty(AE)){var abd=bw.au[AE];if(abd===undefined||abd===null){continue;}var au=abd.toString();au=au.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');xG=xG+' '+AE+'="'+au+'"';}}xG+='>';}for(h=0;h<bw.dR.length;h++){xG+=Xc(bw.dR[h],aO);}if(gK===1||(aO===gK-1)||(aO!==gK-1&&bw.hl!=="documentAnnotations"&&bw.hl!=="pages"&&bw.hl!=="highlights")){if(bw.hl!=="highlights"){xG+='</'+bw.hl+'>';}else{xG+='<'+bw.hl+' />';}}return xG;};IPCC.F.SS(acQ,function(dz){if(dz){kr(dz);return;}wn='<?xml version="1.0"?>';for(var h=0;h<(az.fG);h++){wn=wn+Xc(hM[h],h);}var stampImageXml='';for(var Ka in wA){if(wA.hasOwnProperty(Ka)){stampImageXml+=Xc(wA[Ka],1);}}if(stampImageXml.length){var stampImagesXml='<stampImages>'+stampImageXml+'</stampImages></documentAnnotations>';wn=wn.replace('</documentAnnotations>',stampImagesXml);}kr(undefined,wn);});};ViewerControl.prototype.saveMarkup=function(recordName,options){if(this.bB.enableMultipleRedactionReasons){throw new Error('Saving markup as XML is not supported when enableMultipleRedactionReasons is set to true');}var aa=PCCViewer.Deferred();var dC=aa.getPromise();var bB;if(options){bB=options;}else{bB={includeAnnotations:true,includeRedactions:true,includeSignatures:false};}try{if(typeof recordName!=="string"){aa.reject(new PCCViewer.Error("InvalidArgument","The parameter, recordName, is not a String."));return dC;}if(!anW(recordName)){aa.reject(new PCCViewer.Error("InvalidCharactersFilename",'Invalid characters in the annotations filename.'));return dC;}var az=this;this.qz.then(function(sC){var xw=recordName;Tg(az,bB,function(err,wn){if(err){aa.reject(new PCCViewer.Error("Error",err));return dC;}var Rs=IPCC.gI.sV(xw);var bQ;if(!(/^[\x00-\x7F]*$/.test(az.bi.get_documentIdentifier()))){bQ=az.bB.imageHandlerUrl+'/Document/q/Art/q?DocumentID=e'+az.bB.documentID+'&AnnotationID=e'+Rs;}else{bQ=az.bB.imageHandlerUrl+'/Document/q/Art/q?DocumentID=u'+encodeURIComponent(az.bB.documentID)+'&AnnotationID=u'+encodeURIComponent(xw);}function fl(ac){aa.resolve(xw);setTimeout(function(){az.trigger('MarkupSaved',{name:xw});},0);};function eG(aj){aa.reject(new PCCViewer.Error("AjaxError","Status Code "+aj.response.status+" "+aj.response.statusText));};PCCViewer.Ajax.eg({method:'POST',url:bQ,headers:{'Content-Type':'application/xml;charset=utf-8'},body:wn}).then(fl,eG);});});}catch(e){aa.reject(new PCCViewer.Error("Error",e.message));}return dC;};var anW=function(recordName){return!/[\\\/:*?"<>|\x00-\x1f]/.test(recordName);};var VK=function(jN){var bv=jN.firstChild;while(bv.nodeType!==1){bv=bv.nextSibling;}return bv;};var atJ=function(cK,kX,eE,fa){var hM={hl:'documentAnnotations',dR:[],au:{}};var aaf={hl:'pages',dR:[],au:{}};hM.dR.push(aaf);var jH={hl:'highlights',dR:[],au:{}};var aO={hl:'page',dR:[],au:{id:(cK+1).toString(),pageWidth:fa,pageHeight:eE}};hM.dR.push(jH);try{if(kX){var bv=kX.getElementsByTagName("documentAnnotations");if(bv.length>1){throw 'ERROR: Invalid PCC annotations XML';}var PY;var Cx;if(document.documentMode<9){var TE=kX.firstChild.nodeName;if(TE.toLowerCase()==='xml'){PY=kX.firstChild.nextSibling;}else{PY=kX.firstChild;}}else{PY=kX.firstChild;}var cQ=VK(PY);if(cQ.nodeName!=='pages'){throw 'ERROR: Problem with pages node in the PCC annotations XML';}if(cQ.hasChildNodes()){var h;var mH=false;for(h=0;h<cQ.childNodes.length;h++){Cx=cQ.childNodes[h];if(Cx.nodeName!=='page'){continue;}var BH=Cx.getAttribute('id');mH=false;if(BH&&parseFloat(BH)===cK+1){mH=true;for(var bz=0;bz<Cx.childNodes.length;bz++){var by=Cx.childNodes[bz];var ap={hl:'annotation',dR:[],au:{}};if(by.nodeName!=='annotation'){continue;}var Qh=Cx.childNodes[bz].attributes;if(Qh.length>0){for(var cc=0;cc<Qh.length;cc++){ap.au[Qh[cc].name]=Qh[cc].value;}}if(by.childNodes[0].data){ap.dR.push('<![CDATA['+by.childNodes[0].data+']]>');}else{ap.dR.push('');}aO.dR.push(ap);}break;}}}}aaf.dR.push(aO);return hM;}catch(e){throw(e.message);}};ViewerControl.prototype.loadMarkup=function(recordName,options){var HH=recordName;var aa=PCCViewer.Deferred(),dC=aa.getPromise(),az=this;var bB=options||{};var vt=bB.retainExistingMarks;var hZ=bB.markupLayer;var tG=bB.loadAsHidden;this.qz.then(function(sC){var bQ,Rs,ab=az.ab,cS=az.cS;if(typeof HH!=="string"){aa.reject(new PCCViewer.Error("InvalidArgument","The parameter, recordName, is not a String."));}if(vt!==undefined){if(typeof vt!=='boolean'){aa.reject(new PCCViewer.Error('InvalidArgument','The parameter `retainExistingMarks` must be a boolean value if it is specified.'));}}if(hZ!==undefined){if(!(hZ instanceof PCCViewer.MarkupLayer)){aa.reject(new PCCViewer.Error('InvalidArgument','The parameter `markupLayer` must be an instance of PCCViewer.MarkupLayer if it is specified.'));}if(az.nf.getItem(hZ.getId())===undefined){aa.reject(new PCCViewer.Error('InvalidArgument','The parameter `markupLayer` is a markup layer unknown to the viewer.'));}}function fl(ac){var Vy,NP=ac.responseText,RO;if(NP.indexOf('xml')=== -1){aa.reject(new PCCViewer.Error("InvalidAnnotationRecord","Did not receive valid annotation record from web server."));return;}NP=NP.replace(/(comment\s+text=")((?:.|[\r\n])*?)("\s+created=")/g,function(match,p1,p2,p3){return p1+IPCC.F.pD(p2)+p3;});if(window.DOMParser){RO=function(xmlStr){return(new window.DOMParser()).parseFromString(xmlStr,"text/xml");};}else if(typeof window.ActiveXObject!=="undefined"&&new window.ActiveXObject("Microsoft.XMLDOM")){RO=function(xmlStr){var xmlDoc=new window.ActiveXObject("Microsoft.XMLDOM");xmlDoc.async="false";xmlDoc.loadXML(xmlStr);return xmlDoc;};}else{RO=function(){return null;};}Vy=RO(NP);var aln=Vy.getElementsByTagName('stampImage');var pP={};var UY=function(af){T.bo.push(aha.getPoint(af));};for(var h=0;h<aln.length;h++){var UW=aln[h];pP[UW.getAttribute('imageStampId')]={imageStampId:UW.getAttribute('imageStampId'),base64format:UW.getAttribute('base64format')};}ab.set_annotationXmlDom(Vy,pP,vt===true,tG===true);if(vt!==true){az.cj={};}var cG=az.cS.get_length();var T;var aR,eP;var yn={};var HL=[];for(h=0;h<cG;h++){var am=az.ab.gC(az.cS.getPage(h));if(am){var CE={};var bz=0;for(bz=0;bz<am.get_markCount();bz++){var C=am.getMark(bz);if(az.cj[C.get_markID()]!==undefined){continue;}eP=C.get_type();switch(eP){case IPCC.Web.UI.MarkType.Rectangle:if(C.lq()===true){if(C.get_opacity()===255){aR=PCCViewer.Mark.Type.RectangleRedaction;}else{aR=PCCViewer.Mark.Type.TransparentRectangleRedaction;}T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,uid:C.au.kW});}else{aR=PCCViewer.Mark.Type.RectangleAnnotation;T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,uid:C.au.kW});T.lV=C.get_lineWidth();T.cE=C.get_fillColor();T.op=C.get_lineColor();T.cZ=C.get_opacity();}break;case IPCC.Web.UI.MarkType.Ellipse:aR=PCCViewer.Mark.Type.EllipseAnnotation;T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,uid:C.au.kW});T.lV=C.get_lineWidth();T.cE=C.get_fillColor();T.op=C.get_lineColor();T.cZ=C.get_opacity();break;case IPCC.Web.UI.MarkType.Line:aR=PCCViewer.Mark.Type.LineAnnotation;T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,uid:C.au.kW});T.nU=C.get_lineWidth();T.dB=C.get_lineColor();T.cZ=C.get_opacity();if(C.get_endHeadType()===IPCC.Web.UI.LineHeadType.Solid){T.lO="FilledTriangle";}else{T.lO="None";}break;case IPCC.Web.UI.MarkType.Stamp:if(C.lq()===true){aR=PCCViewer.Mark.Type.StampRedaction;T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,uid:C.au.kW});}else{aR=PCCViewer.Mark.Type.StampAnnotation;T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,uid:C.au.kW});T.dB=C.get_fillColor();}T.vd=C.get_text();break;case IPCC.Web.UI.MarkType.Text:if(C.lq()===true){aR=PCCViewer.Mark.Type.TextRedaction;T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,uid:C.au.kW});}else{aR=PCCViewer.Mark.Type.TextAnnotation;T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,uid:C.au.kW});T.lV=C.get_lineWidth();T.cE=C.get_fillColor();T.op=C.get_lineColor();T.cZ=C.get_opacity();}T.gF=C.get_maxLength();T.ew=C.get_fontName();T.gs=C.get_textColor();T.cR=C.get_fontSize();var bZ=C.get_fontStyle();var pK=[];if((bZ&IPCC.Web.UI.FontStyle.Bold)===IPCC.Web.UI.FontStyle.Bold){pK.push("Bold");}if((bZ&IPCC.Web.UI.FontStyle.Italic)===IPCC.Web.UI.FontStyle.Italic){pK.push("Italic");}if((bZ&IPCC.Web.UI.FontStyle.Strikeout)===IPCC.Web.UI.FontStyle.Strikeout){pK.push("Strikeout");}if((bZ&IPCC.Web.UI.FontStyle.Underline)===IPCC.Web.UI.FontStyle.Underline){pK.push("Underline");}T.bZ=pK;var pu;switch(C.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:pu="center";break;case IPCC.Web.UI.HorizontalAlignment.Left:pu="left";break;case IPCC.Web.UI.HorizontalAlignment.Right:pu="right";break;}T.mQ=pu;break;case IPCC.Web.UI.MarkType.TextAreaSignature:aR=PCCViewer.Mark.Type.TextAreaSignature;T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,uid:C.au.kW});T.lV=C.get_lineWidth();T.gF=C.get_maxLength();T.ew=C.get_fontName();T.gs=C.get_textColor();T.il=C.get_maxFontSize();bZ=C.get_fontStyle();pK=[];if((bZ&IPCC.Web.UI.FontStyle.Bold)===IPCC.Web.UI.FontStyle.Bold){pK.push("Bold");}if((bZ&IPCC.Web.UI.FontStyle.Italic)===IPCC.Web.UI.FontStyle.Italic){pK.push("Italic");}if((bZ&IPCC.Web.UI.FontStyle.Strikeout)===IPCC.Web.UI.FontStyle.Strikeout){pK.push("Strikeout");}if((bZ&IPCC.Web.UI.FontStyle.Underline)===IPCC.Web.UI.FontStyle.Underline){pK.push("Underline");}T.bZ=pK;switch(C.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:pu="center";break;case IPCC.Web.UI.HorizontalAlignment.Left:pu="left";break;case IPCC.Web.UI.HorizontalAlignment.Right:pu="right";break;}T.mQ=pu;break;case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.Strikethrough:aR=(eP===IPCC.Web.UI.MarkType.HighlightText)?PCCViewer.Mark.Type.HighlightAnnotation:(eP===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation)?PCCViewer.Mark.Type.TextHyperlinkAnnotation:(eP===IPCC.Web.UI.MarkType.Strikethrough)?PCCViewer.Mark.Type.StrikethroughAnnotation:PCCViewer.Mark.Type.TextSelectionRedaction;var YW=C.bS;if(typeof yn[YW]==='undefined'){T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,cS:cS,ab:ab,uid:C.au.kW});T.bI=[];if(aR===PCCViewer.Mark.Type.HighlightAnnotation){T.cE=C.get_fillColor();}yn[YW]=T;C.ae=h;C.kd=true;}else{C.ae=h;yn[YW].bI.push(C);}break;case IPCC.Web.UI.MarkType.Freehand:aR=PCCViewer.Mark.Type.FreehandAnnotation;T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,uid:C.au.kW});T.nU=C.get_lineWidth();T.dB=C.get_lineColor();T.cZ=C.get_opacity();break;case IPCC.Web.UI.MarkType.SignaturePath:aR=PCCViewer.Mark.Type.FreehandSignature;T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,uid:C.au.kW});T.nU=C.get_lineWidth();T.dB=C.get_lineColor();break;case IPCC.Web.UI.MarkType.SignatureText:aR=PCCViewer.Mark.Type.TextSignature;T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,uid:C.au.kW});T.ew=C.get_fontName();T.dB=C.get_fillColor();T.aD=C.get_text();break;case IPCC.Web.UI.MarkType.TextLine:aR=PCCViewer.Mark.Type.TextInputSignature;T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,uid:C.au.kW});T.ew=C.get_fontName();T.gs=C.get_textColor();T.aD=C.get_text();T.gF=C.get_maxLength();T.hX=C.get_mask();break;case IPCC.Web.UI.MarkType.RectangleRedaction:if(!C.bS){aR=PCCViewer.Mark.Type.RectangleRedaction;T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,cS:cS,ab:ab,uid:C.au.kW});T.lV=C.get_lineWidth();T.cE=C.get_fillColor();T.op=C.get_lineColor();T.cZ=C.get_opacity();}else{if(CE[C.bS]===undefined){CE[C.bS]=[];}CE[C.bS].push(C);}break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:aR=(eP===IPCC.Web.UI.MarkType.ImageStampAnnotation)?PCCViewer.Mark.Type.ImageStampAnnotation:PCCViewer.Mark.Type.ImageStampRedaction;T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,uid:C.au.kW});T.setImage({dataUrl:C.get_image(),id:C.pw});break;case IPCC.Web.UI.MarkType.Polyline:aR=PCCViewer.Mark.Type.PolylineAnnotation;T=new PCCViewer.Mark({type:aR,igMark:C,pageNumber:h+1,uid:C.au.kW});T.nU=C.get_lineWidth();T.dB=C.get_lineColor();T.cZ=C.get_opacity();var aha=C.get_points();T.bo=[];for(var aC=0;aC<aha.get_length();aC++){UY(aC);}break;default:T=undefined;continue;}if(typeof T!=='undefined'&&eP!==IPCC.Web.UI.MarkType.HighlightText&& !(eP===IPCC.Web.UI.MarkType.RectangleRedaction&&C.bS!==undefined)&&eP!==IPCC.Web.UI.MarkType.TextSelectionRedaction&&eP!==IPCC.Web.UI.MarkType.TextHyperlinkAnnotation&&eP!==IPCC.Web.UI.MarkType.Strikethrough){az.cj[C.get_markID()]=T;HL.push(T);}}for(var Ov in CE){if(CE.hasOwnProperty(Ov)&&yn[Ov]){var DN=yn[Ov];var ada=DN.C;if(DN.bI&&DN.bI.length>0){for(var KL=0;KL<DN.bI.length;KL++){if(DN.bI[KL].ae===h){ada=DN.bI[KL];}}}var aA=CE[Ov];for(var Zh=0;Zh<aA.length;Zh++){ada.aA.push(aA[Zh]);}}}}}for(var nH in yn){if(yn.hasOwnProperty(nH)){var xA=yn[nH];az.cj[xA.C.get_markID()]=xA;HL.push(xA);if(xA.bI&&xA.bI.length>0){xA.bI[xA.bI.length-1].lk=true;}else{xA.C.lk=true;}}}aa.resolve(HH);if(hZ!==undefined){hZ.addMarks(HL);}else{az.getActiveMarkupLayer().addMarks(HL);}az.trigger('MarkupLoaded',{name:HH,loadedMarks:HL});};function eG(aj){aa.reject(new PCCViewer.Error("Error","Status Code "+aj.response.status+" "+aj.response.statusText));};Rs=IPCC.gI.sV(HH);if(!(/^[\x00-\x7F]*$/.test(az.bi.get_documentIdentifier()))){bQ=az.bB.imageHandlerUrl+'/Document/q/Art/q?DocumentID=e'+az.bB.documentID+'&AnnotationID=e'+Rs;}else{bQ=az.bB.imageHandlerUrl+'/Document/q/Art/q?DocumentID=u'+encodeURIComponent(az.bB.documentID)+'&AnnotationID=u'+encodeURIComponent(HH);}PCCViewer.Ajax.eg({method:'GET',url:bQ,headers:{'Content-Type':'application/x-www-form-urlencoded'}}).then(fl,eG);});return dC;};function aat(context,message){var nb=document.createElement('div'),Fu=document.createElement('div'),mB=document.createElement('button'),SB=function(){nb.classList.add('open');},Qz=function(){if(nb.parentNode!==null){nb.parentNode.removeChild(nb);}};mB.innerHTML='&#215;';mB.setAttribute('type','button');Fu.innerHTML='<p>PrizmDoc Viewer is running in evaluation mode with a fixed feature set. <b>'+message+'</b>';nb.className='pccPageListNagModal';nb.appendChild(mB);nb.appendChild(Fu);context.cz.appendChild(nb);SB();if(!mB.addEventListener){mB.attachEvent('onclick',Qz);}else{mB.addEventListener('click',Qz,false);}};ViewerControl.prototype.getSavedMarkupNames=function(){var aa=PCCViewer.Deferred();var dC=aa.getPromise();var J=this;try{var h=0,HK=0;var xw='';var bQ=this.bB.imageHandlerUrl+'/AnnotationList/q/Art/q?DocumentID=u'+encodeURIComponent(this.bB.documentID)+'&AnnotationID=u'+encodeURIComponent(xw);var fl=function(ac){var rK;if(typeof ac.responseText!=='unknown'&&ac.responseText.length>0){try{rK=JSON.parse(ac.responseText);}catch(e){}}var Zw=[],HK=0;for(var h=0,ci=rK.annotationFiles.length;h<ci;h++){if(rK.annotationFiles[h].annotationLabel){Zw[HK]={};Zw[HK].name=rK.annotationFiles[h].annotationLabel;HK++;}}aa.resolve(Zw);};var eG=function(aj){var error=new PCCViewer.Error("MarkupListFail","Unable to retrieve markup list from server.");if(aj&&aj.response){var im=aj.response.status;var ni;try{ni=JSON.parse(aj.response.responseText);}catch(e){}if(im===480&&ni&&ni.errorCode==='LicenseCouldNotBeVerified'){aat(J,'Loading annotations is disabled in evaluation mode.');error=new PCCViewer.Error(ni.errorCode,"License error.");}}aa.reject(error);};PCCViewer.Ajax.eg({method:'GET',url:bQ}).then(fl,eG);}catch(e){aa.reject(new PCCViewer.Error("Error",e.message));}return dC;};ViewerControl.prototype.getMarkupLayerCollection=function(){if(!this.nf){this.nf=new PCCViewer.MarkupLayerCollection(this);}return this.nf;};ViewerControl.prototype.requestMarkupLayerNames=function(metadata){var aa=PCCViewer.Deferred(),dC=aa.getPromise(),bQ,aEK=function(obj){var parts=[];for(var key in obj){if(obj.hasOwnProperty(key)&&(typeof obj[key]==='string'||typeof obj[key]==='boolean'||typeof obj[key]==='number')){parts.push(encodeURIComponent(key)+'='+encodeURIComponent(obj[key]));}}return "?"+parts.join('&');};if(!(/^[\x00-\x7F]*$/.test(this.bi.get_documentIdentifier()))){bQ=this.bB.imageHandlerUrl+'/MarkupLayers/e'+this.bB.documentID+'/';}else{bQ=this.bB.imageHandlerUrl+'/MarkupLayers/u'+encodeURIComponent(this.bB.documentID)+'/';}if(metadata){var azF=aEK(metadata);bQ+=azF;}bQ+='?nocache='+new Date().getTime();PCCViewer.Ajax.eg({url:bQ,method:'GET'}).then(function fl(ac){var avl=JSON.parse(ac.responseText);aa.resolve(avl);},function eG(aj){aa.reject(aj.error);});return dC;};ViewerControl.prototype.getActiveMarkupLayer=function(){return this.vu;};ViewerControl.prototype.setActiveMarkupLayer=function(markupLayer){if(!(markupLayer instanceof PCCViewer.MarkupLayer)){throw new PCCViewer.Error('InvalidArgument','The parameter `markupLayer` must be an instance of PCCViewer.MarkupLayer.');}if(this.nf.getItem(markupLayer.getId())===undefined){throw new PCCViewer.Error('InvalidArgument','The parameter `markupLayer` is a markup layer unknown to the viewer.');}this.vu=markupLayer;};ViewerControl.prototype.loadMarkupLayers=function(layerRecordIds,options){var Yj,J=this;Yj=new PCCViewer.LoadMarkupLayersRequest(layerRecordIds,this,options||{});function yM(){setTimeout(function(){Yj.Bl();},20);};function lJ(){J.off(PCCViewer.EventType.PageCountReady,lJ);yM();};if(this.nY===false){J.on(PCCViewer.EventType.PageCountReady,lJ);}else{yM();}return Yj;};ViewerControl.prototype.saveMarkupLayer=function(id){var aa=PCCViewer.Deferred();var dC=aa.getPromise();var J=this;if(typeof id!=='string'|| !id){aa.reject(new PCCViewer.Error('InvalidArgument','The parameter `id` is not a string.'));return dC;}var ez=this.nf?this.nf.getItem(id):undefined;if(!ez){aa.reject(new PCCViewer.Error('UnknownLayerRecord','The layer record '+id+' is not known to ViewerControl'));return dC;}function azJ(qG){var NU=ez.getMarks();if(!NU.length){qG(undefined,[]);}else{J.serializeMarks(NU).then(function gy(bE){qG(undefined,IPCC.F.map(bE,function(T){if(T.conversation&&T.conversation.comments){delete T.conversation.comments;}return T;}));},function _f(fj){qG(fj);});}};function aAz(qG){var NU=ez.getMarks();var To=function(er,hu,kN){var Qt=IPCC.F.filter(hu,function(nZ){return!nZ.hZ||nZ.hZ===ez;});IPCC.F.forEach(Qt,function(cf){var bp=ep.Comment(cf);bp.markUid=kN;er.push(bp);});return er;};var RG=IPCC.F.reduce(NU,function(er,T){var cl=T.getConversation();var hu=cl.getComments();return hu.length?To(er,hu,T.getUid()):er;},[]);qG(undefined,RG);};function aAq(qG){var aAR=IPCC.F.reduce(J.nf.getAll(),function(er,anx){return er.concat(ez===anx?[]:anx.getMarks());},[]);var To=function(er,hu,kN){var Qt=IPCC.F.filter(hu,function(nZ){return nZ.hZ===ez;});IPCC.F.forEach(Qt,function(nZ){var bp=ep.Comment(nZ);bp.markUid=kN;er.push(bp);});return er;};var RG=IPCC.F.reduce(aAR,function(er,T){var cl=T.getConversation();var hu=cl.getComments();return hu.length?To(er,hu,T.getUid()):er;},[]);qG(undefined,RG);};var adR=[],aCs=function(pq){if(pq.markupLayer===ez){adR.push({text:pq.text,data:pq.data,creationDateTime:pq.creationDateTime,markUid:pq.markUid});}};for(var aeq in this.nf.ia){if(this.nf.ia.hasOwnProperty(aeq)){IPCC.F.forEach(this.nf.ia[aeq],aCs);}}var zw={layerRecordId:ez.getRecordId(),name:ez.getName(),originalXmlName:ez.getOriginalXmlName(),comments:adR,data:ep.Data(ez)};var vl;IPCC.F.SS([function(mU){azJ(function(dz,cJ){if(dz&& !vl){vl=dz;}else{zw.marks=cJ;}mU();});},function(mU){aAz(function(dz,cJ){if(dz&& !vl){vl=dz;}else{zw.comments=zw.comments.concat(cJ);}mU();});},function(mU){aAq(function(dz,cJ){if(dz&& !vl){vl=dz;}else{zw.comments=zw.comments.concat(cJ);}mU();});}],function(){if(!vl){aAH(zw);}else{aa.reject(new PCCViewer.Error('SerializationError',vl.message));}});function aAH(aEY){var ym,gD={method:'POST',body:JSON.stringify(zw),headers:{'Content-Type':'application/json;charset=utf-8'}};if(!(/^[\x00-\x7F]*$/.test(J.bi.get_documentIdentifier()))){ym=J.bB.imageHandlerUrl+'/MarkupLayers/e'+J.bB.documentID+'/';}else{ym=J.bB.imageHandlerUrl+'/MarkupLayers/u'+encodeURIComponent(J.bB.documentID)+'/';}if(ez.getRecordId()){gD.url=ym+ez.getRecordId();gD.headers['X-HTTP-Method-Override']='PUT';}else{gD.url=ym;}PCCViewer.Ajax.eg(gD).then(fl,eG);};function fl(ac){if(ac.responseText&&typeof ac.responseText==='string'){var ni;try{ni=JSON.parse(ac.responseText);}catch(e){}if(ni&&ni.layerRecordId){ez.abw=ni.layerRecordId;}}aa.resolve({layerRecordId:ez.getRecordId()});};function eG(aj){var error=new PCCViewer.Error("AjaxError",aj.error.message||'An unknown server error occurred.');if(aj&&aj.response){var im=aj.response.status;var ni;try{ni=JSON.parse(aj.response.responseText);}catch(e){}if(im===480&&ni&&ni.errorCode==='LicenseCouldNotBeVerified'){aat(J,'Saving annotations is disabled in evaluation mode.');error=new PCCViewer.Error(ni.errorCode,'License error.');}}aa.reject(error);};return dC;};ViewerControl.prototype.burnMarkup=function(burnOptions){var kt={burnSignatures:true,burnRedactions:true,burnAnnotations:false};var Jk;var ank;var Tf;var aFH=false;if(burnOptions){if(typeof burnOptions.marks==='object'){if(burnOptions.marks instanceof PCCViewer.Mark){Jk=[burnOptions.marks];}else if(burnOptions.marks instanceof Array){Jk=burnOptions.marks;}kt={marks:Jk};}else{kt.burnSignatures=(burnOptions.burnSignatures!==undefined)? ! !burnOptions.burnSignatures:kt.burnSignatures;kt.burnRedactions=(burnOptions.burnRedactions!==undefined)? ! !burnOptions.burnRedactions:kt.burnRedactions;kt.burnAnnotations=(burnOptions.burnAnnotations!==undefined)? ! !burnOptions.burnAnnotations:kt.burnAnnotations;}if(typeof burnOptions.filename==='string'){kt.filename=burnOptions.filename;}if(burnOptions.removeFormFields!==undefined){if(burnOptions.removeFormFields instanceof Array){if(burnOptions.removeFormFields.length>0){var Rg,IR=true;for(Rg=0;Rg<burnOptions.removeFormFields.length;Rg++){if(burnOptions.removeFormFields[Rg]!=='acroform'){IR=false;}}if(IR){kt.removeFormFields=['acroform'];}else{kt.nD={code:'InvalidArgument',message:'The burnOptions.removeFormFields parameter contains an invalid form type.'};}}else{kt.nD={code:'InvalidArgument',message:'The burnOptions.removeFormFields parameter must specify a valid form type.'};}}else{kt.nD={code:'InvalidArgument',message:'The burnOptions.removeFormFields parameter must be an Array if defined.'};}}}var AB=new PCCViewer.BurnRequest(kt),J=this;if(Jk){var fq=[];for(var h=0,ci=this.getPageCount();h<ci;h++){fq[h]=[];}fq=IPCC.F.reduce(Jk,function(bE,bx){var ak=bx.getPageNumber()-1;if(!(typeof bx==='object'&&bx instanceof PCCViewer.Mark&&bx.C)){AB.ZG(new Error('The burnOptions.marks parameter is an invalid object.'));return bE;}if(!J.getMarkById(bx.dJ)){AB.ZG(new Error('The burnOptions.marks parameter contains a mark not known to Viewer Control.'));return bE;}bE[ak].push(bx.C);if(bx.C.aA){for(var h=0,ci=bx.C.aA.length;h<ci;h++){if(bx.C.aA[h]instanceof IPCC.Web.UI.Mark){bE[ak].push(bx.C.aA[h]);}}}if(bx.bI){for(var bz=0,awn=bx.bI.length;bz<awn;bz++){bE[ak+1+bz].push(bx.bI[bz]);if(bx.bI[bz].aA){for(var cc=0,avZ=bx.bI[bz].aA.length;cc<avZ;cc++){if(bx.bI[bz].aA[cc]instanceof IPCC.Web.UI.Mark){bE[ak+1+bz].push(bx.bI[bz].aA[cc]);}}}}}return bE;},fq);Tf={AX:fq,wy:true};}else{Tf={includeAnnotations:kt.burnAnnotations,includeRedactions:kt.burnRedactions,includeSignatures:kt.burnSignatures,wy:true};}function aeR(){Tg(J,Tf,function(dz,ank){if(dz){setTimeout(function(){AB.ZG(dz);},20);}else{AB.LA({bi:J.bi,bB:J.bB});AB.aoJ(ank);setTimeout(function(){AB.Bl();},20);}});};function lJ(){J.off(PCCViewer.EventType.PageCountReady,lJ);aeR();};if(this.nY===false){J.on(PCCViewer.EventType.PageCountReady,lJ);}else{aeR();}return AB;};ViewerControl.prototype.convertDocument=function(Yt){var vy,J=this,Ah={targetExtension:'pdf',filename:'document'},bB={};tc.rM(bB,Ah,Yt);bB.xR=1;vy=new PCCViewer.ConversionRequest(bB);function yM(){vy.LA({bi:J.bi,bB:J.bB});setTimeout(function(){vy.Bl(bB);},20);};function lJ(){J.off(PCCViewer.EventType.PageCountReady,lJ);yM();};if(this.nY===false){J.on(PCCViewer.EventType.PageCountReady,lJ);}else{yM();}return vy;};ViewerControl.prototype.requestDocumentConversion=function(Yt){var vy,J=this,Ah={targetExtension:'pdf',filename:'document'},bB={};tc.rM(bB,Ah,Yt);bB.xR=2;vy=new PCCViewer.ConversionRequest(bB);function yM(){vy.LA({bi:J.bi,bB:J.bB});setTimeout(function(){vy.Bl(bB);},20);};function lJ(){J.off(PCCViewer.EventType.PageCountReady,lJ);yM();};if(this.nY===false){J.on(PCCViewer.EventType.PageCountReady,lJ);}else{yM();}return vy;};ViewerControl.prototype.loadAttachments=function(){var aa=PCCViewer.Deferred();var dC=aa.getPromise();try{var h=0,HK=0;var xw='';var bQ=this.bB.imageHandlerUrl+'/ViewingSession/u'+encodeURIComponent(this.bB.documentID)+'/Attachments';var azs=function(ac){var Jg=JSON.parse(ac.responseText);if(Jg===null||Jg.status!=='complete'){setTimeout(afA,500);return;}aa.resolve(Jg.attachments||[]);};var eG=function(aj){aa.reject(new PCCViewer.Error("AttachmentListFail","Unable to retrieve attachment list from server."));};var afA=function(){PCCViewer.Ajax.eg({method:'GET',url:bQ}).then(azs,eG);};afA();}catch(e){aa.reject(new PCCViewer.Error("Error",e.message));}return dC;};function qX(){return function(sender,eventArgs){var J=this;var T=J.cj[eventArgs.mark.get_markID()];if(J.sc){J.vu.addMarks(T);}setTimeout(function(){if(T){J.trigger('MarkCreated',{mark:T,pageNumber:eventArgs.pageIndex+1,clientX:eventArgs.clientX,clientY:eventArgs.clientY});}},0);};};function aoX(bj){return{onCreating:function(bu,V){var T=new PCCViewer.Mark({type:bj.getType(),igMark:V.mark,pageNumber:V.pageIndex+1,enableMultipleRedactionReasons:this.bB.enableMultipleRedactionReasons});this.cj[V.mark.get_markID()]=T;T.setThickness(bj.getThickness());T.setColor(bj.getColor());T.setOpacity(bj.getOpacity());T.setEndHeadType(bj.getEndHeadType());PCCViewer.Data.oY(bj,T);PCCViewer.Conversation.pJ(bj.getConversation(),T.getConversation());},onAdded:qX()};};function abP(bj){return{onCreating:function(bu,V){var T=new PCCViewer.Mark({type:bj.getType(),igMark:V.mark,pageNumber:V.pageIndex+1,enableMultipleRedactionReasons:this.bB.enableMultipleRedactionReasons});this.cj[V.mark.get_markID()]=T;T.setBorderThickness(bj.getBorderThickness());T.setFillColor(bj.getFillColor());T.setBorderColor(bj.getBorderColor());T.setOpacity(bj.getOpacity());PCCViewer.Data.oY(bj,T);PCCViewer.Conversation.pJ(bj.getConversation(),T.getConversation());},onAdded:qX()};};function aFQ(bj){return{onCreating:function(bu,V){var T=new PCCViewer.Mark({type:bj.getType(),igMark:V.mark,pageNumber:V.pageIndex+1,enableMultipleRedactionReasons:this.bB.enableMultipleRedactionReasons});this.cj[V.mark.get_markID()]=T;},onAdded:qX()};};function azM(bj){return{onCreating:function(bu,V){var T=new PCCViewer.Mark({type:bj.getType(),igMark:V.mark,pageNumber:V.pageIndex+1,enableMultipleRedactionReasons:this.bB.enableMultipleRedactionReasons});this.cj[V.mark.get_markID()]=T;if(T.os){T.setReasons(bj.getReasons());}else{T.setReason(bj.getReason());}T.setBorderThickness(bj.getBorderThickness());T.setFillColor(bj.getFillColor());T.setBorderColor(bj.getBorderColor());T.setFontColor(bj.getFontColor());PCCViewer.Data.oY(bj,T);PCCViewer.Conversation.pJ(bj.getConversation(),T.getConversation());},onAdded:qX()};};function aFA(bj){return{onCreating:function(bu,V){var T=new PCCViewer.Mark({type:bj.getType(),igMark:V.mark,pageNumber:V.pageIndex+1,enableMultipleRedactionReasons:this.bB.enableMultipleRedactionReasons});this.cj[V.mark.get_markID()]=T;T.setBorderThickness(bj.getBorderThickness());T.setFillColor(bj.getFillColor());T.setBorderColor(bj.getBorderColor());T.setOpacity(bj.getOpacity());T.setFontName(bj.getFontName());T.setFontColor(bj.getFontColor());T.setFontSize(bj.getFontSize());T.setFontStyle(bj.getFontStyle());T.setHorizontalAlignment(bj.getHorizontalAlignment());PCCViewer.Data.oY(bj,T);PCCViewer.Conversation.pJ(bj.getConversation(),T.getConversation());},onAdded:qX()};};function Sf(bj){return{onCreating:function(bu,V){var T=new PCCViewer.Mark({type:bj.getType(),igMark:V.mark,pageNumber:V.pageIndex+1,enableMultipleRedactionReasons:this.bB.enableMultipleRedactionReasons});this.cj[V.mark.get_markID()]=T;T.setFontName(bj.getFontName());T.setFontColor(bj.getFontColor());T.setText(bj.getText());if(T.setFontSize){T.setFontSize(bj.getFontSize());}PCCViewer.Data.oY(bj,T);PCCViewer.Conversation.pJ(bj.getConversation(),T.getConversation());},onAdded:qX()};};function aDM(bj){return{onCreating:function(bu,V){var T=new PCCViewer.Mark({type:bj.getType(),igMark:V.mark,pageNumber:V.pageIndex+1,enableMultipleRedactionReasons:this.bB.enableMultipleRedactionReasons});this.cj[V.mark.get_markID()]=T;if(bj.getType()===PCCViewer.MouseTool.Type.StampAnnotation){T.setColor(bj.getColor());}T.setLabel(bj.getLabel());PCCViewer.Data.oY(bj,T);PCCViewer.Conversation.pJ(bj.getConversation(),T.getConversation());},onAdded:qX()};};var aGt;function Rf(bj){return{onCreating:function(bu,V){},onAdded:qX()};};function aqd(bj){return{onCreating:function(bu,V){var T=new PCCViewer.Mark({type:bj.getType(),igMark:V.mark,pageNumber:V.pageIndex+1,enableMultipleRedactionReasons:this.bB.enableMultipleRedactionReasons});this.cj[V.mark.get_markID()]=T;T.setThickness(bj.getThickness());T.setColor(bj.getColor());T.setOpacity(bj.getOpacity());PCCViewer.Data.oY(bj,T);PCCViewer.Conversation.pJ(bj.getConversation(),T.getConversation());},onAdded:qX()};};function adL(bj){return{onCreating:function(bu,V){var T=new PCCViewer.Mark({type:bj.getType(),igMark:V.mark,pageNumber:V.pageIndex+1,enableMultipleRedactionReasons:this.bB.enableMultipleRedactionReasons});this.cj[V.mark.get_markID()]=T;T.setImage(bj.getImage());PCCViewer.Data.oY(bj,T);PCCViewer.Conversation.pJ(bj.getConversation(),T.getConversation());},onAdded:qX()};};function azb(bj){return{onCreating:function(bu,V){var T=new PCCViewer.Mark({type:bj.getType(),igMark:V.mark,pageNumber:V.pageIndex+1,enableMultipleRedactionReasons:this.bB.enableMultipleRedactionReasons});this.cj[V.mark.get_markID()]=T;T.setThickness(bj.getThickness());T.setColor(bj.getColor());T.setOpacity(bj.getOpacity());PCCViewer.Data.oY(bj,T);PCCViewer.Conversation.pJ(bj.getConversation(),T.getConversation());},onAdded:qX()};};ViewerControl.prototype.setMarkHandleMode=function(markHandleMode){var xN;switch(markHandleMode){case PCCViewer.MarkHandleMode.HideCornerHandlesWhenClose:xN=IPCC.Web.UI.MarkHandleMode.HideCornerHandlesWhenClose;break;case PCCViewer.MarkHandleMode.HideSideHandlesWhenClose:xN=IPCC.Web.UI.MarkHandleMode.HideSideHandlesWhenClose;break;default:throw new RangeError("The value of markHandleMode is not a supported value.");}if(this.ab&&this.ab.set_markHandleMode){this.ab.set_markHandleMode(xN);}else{this.bB.markHandleMode=xN;}return this;};ViewerControl.prototype.getMarkHandleMode=function(){var xN;if(this.ab&&this.ab.get_markHandleMode){xN=this.ab.get_markHandleMode();}else{xN=this.bB.markHandleMode;}if(xN===IPCC.Web.UI.MarkHandleMode.HideCornerHandlesWhenClose){return PCCViewer.MarkHandleMode.HideCornerHandlesWhenClose;}else{return PCCViewer.MarkHandleMode.HideSideHandlesWhenClose;}};ViewerControl.prototype.setConversationDOMFactory=function(factoryFunction){if(typeof(factoryFunction)!=='function'){throw new Error("The parameter factoryFunction is not a function.");}this.mt=factoryFunction;return this;};ViewerControl.prototype.getConversationDOMFactory=function(){return this.mt;};ViewerControl.prototype.refreshConversations=function(conversations){var Wy,aca=(conversations===undefined);function akE(cl,aU){throw new Error(cl+((aU!==undefined)?' (Array index '+aU+')':'')+' is not a valid PCCViewer.Conversation object.');};function aFS(cl,aU){throw new Error(cl+((aU!==undefined)?' (Array index '+aU+')':'')+' is not a known conversation in this ViewerControl.');};if(conversations instanceof PCCViewer.Conversation){Wy=[conversations];}else if(conversations instanceof Array){Wy=conversations;}else if(!aca){akE(conversations);}var amz=IPCC.F.map(this.getAllMarks(),function(bx){return bx.getConversation();});var Ss=IPCC.F.map(Wy||amz,function(bx,h){if(!(bx instanceof PCCViewer.Conversation)){akE(bx,h);}if(!aca&& !IPCC.F.inArray(amz,bx)){aFS(bx,h);}return bx.getMark().dJ;});this.ab.refreshConversations(Ss);return this;};ViewerControl.prototype.openCommentsPanel=function(){if(this.dZ===false){throw new Error("The method openCommentsPanel is not available until 'ViewerReady' state is reached.");}if(this.getPageLayout()===PCCViewer.PageLayout.Horizontal){throw new Error("The page layout must be set to vertical to use the comments panel.");}this.ab.openCommentsPanel();var J=this;setTimeout(function(){J.trigger("CommentsPanelToggled",{isOpen:true});},10);return this;};ViewerControl.prototype.closeCommentsPanel=function(){if(this.dZ===false){throw new Error("The method closeCommentsPanel is not available until 'ViewerReady' state is reached.");}this.ab.closeCommentsPanel();var J=this;setTimeout(function(){J.trigger("CommentsPanelToggled",{isOpen:false});},10);return this;};ViewerControl.prototype.getIsCommentsPanelOpen=function(){if(this.dZ===false){throw new Error("The method getIsCommentsPanelOpen is not available until 'ViewerReady' state is reached.");}if(this.getPageLayout()===PCCViewer.PageLayout.Horizontal){return false;}return this.ab.get_isCommentsPanelOpen();};ViewerControl.prototype.setSelectedConversation=function(conversation){if(this.dZ===false){throw new Error("The method setSelectedConversation is not available until 'ViewerReady' state is reached.");}if(conversation===null||conversation===undefined){this.ab.set_selectedConversation(undefined);return this;}if(!(conversation instanceof PCCViewer.Conversation)){throw new Error("The parameter conversation is not an instance of PCCViewer.Conversation.");}var kA=conversation.getMark();if(kA){var yz=kA.C.get_conversation();this.ab.set_selectedConversation(yz);}else{throw new Error("The conversation is unknown to the viewer control.");}return this;};ViewerControl.prototype.getSelectedConversation=function(){if(this.dZ===false){return null;}var iE=this.ab.get_selectedConversation();if(iE){var kA=this.cj[iE.get_mark().get_markID()];if(kA){return kA.getConversation();}}return null;};ViewerControl.prototype.clearMouseSelectedText=function(textSelection){if(!textSelection){throw new Error('textSelection is a required parameter');}else if(typeof textSelection.startIndex!=='number'||textSelection.startIndex<0){throw new Error('Start index value '+textSelection.startIndex+' is not a valid value.');}else if(typeof textSelection.pageNumber!=='number'||textSelection.pageNumber<1||textSelection.pageNumber>this.getPageCount()){throw new Error('Page number value '+textSelection.pageNumber+' is not a valid value.');}else if(typeof textSelection.length!=='number'||textSelection.length<1){throw new Error('Length value '+textSelection.pageNumber+' is not a valid value.');}var J=this,yf=J.ax;function amb(ae,jA,cG){var Tj=[ae+1];var aO=J.cS.getPage(ae),fg=aO.cd();if(fg.nn()){var aD=fg.Be(),aml=aD.substr(jA);if(aml.length>cG){return Tj;}else{return Tj.concat(amb(ae+1,0,cG-aml.length));}}else{return Tj;}};this.ab.ug();function BU(VP,ak){J.agF(ak,VP);};if(yf&&yf.getResults().length){var cQ=amb(textSelection.pageNumber-1,textSelection.startIndex,textSelection.length),fh=yf.getResults(),ajD=false,Qo={};if(fh.length){IPCC.F.forEach(fh,function(bx){var awl=IPCC.F.contains(cQ,bx.ak);if(awl){ajD=true;Qo[bx.ak]=Qo[bx.ak]||[];Qo[bx.ak].push(bx);}});}if(ajD){IPCC.F.forEach(Qo,function(VP,ak){J.requestPageText(ak).then(BU.bind(null,VP,ak));});}}return this;};ViewerControl.prototype.convertPageToWindowCoordinates=function(pageNumber,points){if(this.dZ===false){throw new Error("The method setSelectedConversation is not available until 'ViewerReady' state is reached.");}if(!pageNumber||typeof pageNumber!=='number'||pageNumber<1||pageNumber>this.getPageCount()){throw new PCCViewer.Error('InvalidArgument','pageNumber is not a known page number in the document');}var yB=function(n){return typeof n==='number'&& !isNaN(n);};var yi,afK=true;if(points&&points.constructor===Array){yi=points;}else{yi=[points];afK=false;}var agq=function(bL,aU,bH){throw new PCCViewer.Error('InvalidArgument',bL+' (Array index '+aU+') does not have a valid '+bH+' property');};if(yi.length===0|| !points){throw new PCCViewer.Error('InvalidArgument','At least one point is required');}IPCC.F.forEach(yi,function(bL,aU){if(!yB(bL.x)){agq(bL,aU,'x');}if(!yB(bL.y)){agq(bL,aU,'y');}});var BC=this.ab.auL(pageNumber,yi);if(BC===null){return null;}else if(afK){return BC;}else{return BC[0];}};ViewerControl.prototype.selectEditorText=function(){if(this.dZ===false){throw new Error("The method selectEditorText is not available until 'ViewerReady' state is reached.");}var J=this;var ab=J.ab;var Ub=ab.Ce();if(!Ub){throw new Error("The method selectEditorText is not available unless there is an active editor on the page.");}if(Ub==='singleline'){ab.Is();}else if(Ub==='multiline'){throw new PCCViewer.Error('InvalidArgument','Only TextInputSignature Marks are supported at this time');}return J;};ViewerControl.prototype.setSharpening=function(amount){if(amount!==Math.floor(amount)||typeof amount!=='number'||amount<0||amount>100){throw new PCCViewer.Error('InvalidArgument','Amount must be an integer between 0 and 100 inclusive');}var J=this;J.acH=amount;if(this.dZ===false){this.qz.then(function(sC){var ab=J.ab;ab.Fk(amount);});}else{var ab=J.ab;ab.Fk(amount);}return J;};ViewerControl.prototype.getSharpening=function(){var J=this;if(this.dZ===false){return J.acH;}else{var ab=J.ab;return ab.auK();}};ViewerControl.prototype.setGamma=function(amount){if(typeof amount!=='number'||amount<0||amount>10){throw new PCCViewer.Error('InvalidArgument','Amount must be a number between 0 and 10 inclusive');}var J=this;J.aic=amount;if(this.dZ===false){this.qz.then(function(sC){var ab=J.ab;ab.Cb(amount);});}else{var ab=J.ab;ab.Cb(amount);}return J;};ViewerControl.prototype.getGamma=function(){var J=this;if(this.dZ===false){return J.aic;}else{var ab=J.ab;return ab.auo();}};ViewerControl.prototype.setSvgLineWidthMultiplier=function(amount){if(typeof amount!=='number'||amount<=0||amount>100){throw new PCCViewer.Error('InvalidArgument','Amount must be greater than 0 and not greater than 100.');}var J=this;J.kh=amount;if(this.dZ===false){this.qz.then(function(sC){J.ab.Ga(amount);});}else{J.ab.Ga(amount);}return J;};ViewerControl.prototype.getSvgLineWidthMultiplier=function(){var J=this;if(this.dZ===false){return J.kh;}else{var ab=J.ab;return ab.auj();}};if(Object.defineProperties){Object.defineProperties(ViewerControl.prototype,{"pageCount":{enumerable:true,get:function(){return this.getPageCount();}},"pageNumber":{enumerable:true,get:function(){return this.getPageNumber();},set:function(value){return this.setPageNumber(value);}},"searchRequest":{enumerable:true,get:function(){return this.ax;}},"selectedSearchResult":{enumerable:true,get:function(){return this.getSelectedSearchResult();},set:function(val){return this.setSelectedSearchResult(val,true);}},"currentMouseTool":{enumerable:true,get:function(){return this.getCurrentMouseTool();},set:function(value){return this.setCurrentMouseTool(value);}},"atMaxScale":{enumerable:true,get:ViewerControl.prototype.getAtMaxScale},"atMinScale":{enumerable:true,get:ViewerControl.prototype.getAtMinScale},"scaleFactor":{enumerable:true,get:function(){return this.getScaleFactor();},set:function(value){return this.setScaleFactor(value);}},"selectedMarks":{enumerable:true,get:ViewerControl.prototype.getSelectedMarks},"viewMode":{enumerable:true,get:function(){return this.getViewMode();},set:function(value){return this.setViewMode(value);}},"isCommentsPanelOpen":{enumerable:true,get:function(){return this.getIsCommentsPanelOpen();}},"selectedConversation":{enumerable:true,get:function(){return this.getSelectedConversation();},set:function(conversation){return this.setSelectedConversation(conversation);}},"redactionViewMode":{enumerable:true,get:function(){return this.getRedactionViewMode();},set:function(value){return this.setRedactionViewMode(value);}},"markHandleMode":{enumerable:true,get:function(){return this.getMarkHandleMode();},set:function(value){return this.setMarkHandleMode(value);}}});}module.exports=ViewerControl;},{"./../IPCC/IPCC":29,"./PCCViewer.EventEmitter":140,"./PCCViewer.Helper":143,"./PCCViewer.MarkDeserializer":147,"./PCCViewer.MarkSerializer":149,"./PCCViewer.Print":157}],169:[function(require,module,exports){var PCCViewer={ViewMode:require('./PCCViewer.ViewMode'),MarkHandleMode:require('./PCCViewer.MarkHandleMode'),RedactionViewMode:require('./PCCViewer.RedactionViewMode'),PageLayout:require('./PCCViewer.PageLayout'),EventType:require('./PCCViewer.EventType'),Event:require('./PCCViewer.Event'),ScaleTrigger:require('./PCCViewer.ScaleTrigger'),FitType:require('./PCCViewer.FitType'),Promise:require('./PCCViewer.Deferred').Promise,Deferred:require('./PCCViewer.Deferred').Deferred,EventEmitter:require('./PCCViewer.EventEmitter'),Util:require('./PCCViewer.Util'),ObservableCollection:require('./PCCViewer.ObservableCollection'),auG:require('prizmdoc-input-mask'),Data:require('./PCCViewer.Data').Data,SessionData:require('./PCCViewer.Data').SessionData,Ajax:require('./PCCViewer.Ajax').Ajax,AjaxResponse:require('./PCCViewer.Ajax').AjaxResponse,Language:require('./PCCViewer.Language'),Error:require('./PCCViewer.Error'),ViewerControl:require('./PCCViewer.ViewerControl'),tc:require('./PCCViewer.Helper'),MouseTool:require('./PCCViewer.MouseTool').MouseTool,MouseTools:require('./PCCViewer.MouseTool').MouseTools,Conversation:require('./PCCViewer.Comments').Conversation,Comment:require('./PCCViewer.Comments').Comment,ImageStamps:require('./PCCViewer.ImageStamps'),DocumentHyperlink:require('./PCCViewer.DocumentHyperlink'),_Search:require('./PCCViewer.Search')._Search,SearchTask:require('./PCCViewer.Search').SearchTask,SearchRequest:require('./searchRequest'),SearchResult:require('./searchResult').SearchResult,XD:require('./PCCViewer.ServerSearch'),SearchTaskResult:require('./searchResult').SearchTaskResult,Rr:require('./PCCViewer.ClientSearch'),Iw:require('prizmdoc-search'),Signatures:require('./PCCViewer.Signature').Signatures,SignatureControl:require('./PCCViewer.Signature').SignatureControl,SignatureDisplay:require('./PCCViewer.Signature').SignatureDisplay,ThumbnailControl:require('./PCCViewer.ThumbnailControl'),Revision:require('./PCCViewer.Revision'),Kz:require('./PCCViewer.RevisionsRequest').Kz,RevisionsRequest:require('./PCCViewer.RevisionsRequest').RevisionsRequest,ConversionRequest:require('./PCCViewer.ConversionRequest'),BurnRequest:require('./PCCViewer.BurnRequest'),PrintRequest:require('./PCCViewer.Print').PrintRequest,PrintControl:require('./PCCViewer.Print').PrintControl,Mark:require('./PCCViewer.Marks'),MarkupLayer:require('./PCCViewer.MarkupLayer'),LoadMarkupLayersRequest:require('./PCCViewer.LoadMarkupLayersRequest'),MarkupLayerCollection:require('./PCCViewer.MarkupLayerCollection'),PasswordProtectedDocumentLoader:require('./PCCViewer.PasswordProtectedDocumentLoader'),};module.exports=PCCViewer;},{"./PCCViewer.Ajax":130,"./PCCViewer.BurnRequest":131,"./PCCViewer.ClientSearch":132,"./PCCViewer.Comments":133,"./PCCViewer.ConversionRequest":134,"./PCCViewer.Data":135,"./PCCViewer.Deferred":136,"./PCCViewer.DocumentHyperlink":137,"./PCCViewer.Error":138,"./PCCViewer.Event":139,"./PCCViewer.EventEmitter":140,"./PCCViewer.EventType":141,"./PCCViewer.FitType":142,"./PCCViewer.Helper":143,"./PCCViewer.ImageStamps":144,"./PCCViewer.Language":145,"./PCCViewer.LoadMarkupLayersRequest":146,"./PCCViewer.MarkHandleMode":148,"./PCCViewer.Marks":150,"./PCCViewer.MarkupLayer":151,"./PCCViewer.MarkupLayerCollection":152,"./PCCViewer.MouseTool":153,"./PCCViewer.ObservableCollection":154,"./PCCViewer.PageLayout":155,"./PCCViewer.PasswordProtectedDocumentLoader":156,"./PCCViewer.Print":157,"./PCCViewer.RedactionViewMode":158,"./PCCViewer.Revision":159,"./PCCViewer.RevisionsRequest":160,"./PCCViewer.ScaleTrigger":161,"./PCCViewer.Search":162,"./PCCViewer.ServerSearch":163,"./PCCViewer.Signature":164,"./PCCViewer.ThumbnailControl":165,"./PCCViewer.Util":166,"./PCCViewer.ViewMode":167,"./PCCViewer.ViewerControl":168,"./searchRequest":170,"./searchResult":171,"prizmdoc-input-mask":2,"prizmdoc-search":7}],170:[function(require,module,exports){var SearchRequest=function(uv){this.kw={};this.dY={};this.fh=[];this.uj=false;this.fv=null;this.cF=null;this.TY=[];if(Object.defineProperties){Object.defineProperties(this,{"searchQuery":{configurable: ! !uv,enumerable:true,get:function(){return this.dY;}},"results":{configurable: ! !uv,enumerable:true,get:function(){return this.fh;}},"isComplete":{configurable: ! !uv,enumerable:true,get:function(){return this.uj;}},"errorCode":{configurable: ! !uv,enumerable:true,get:function(){return this.fv;}},"errorMessage":{configurable: ! !uv,enumerable:true,get:function(){return this.cF;}}});}PCCViewer.EventEmitter.extend(this);};SearchRequest.prototype.getSearchQuery=function(){return this.dY;};SearchRequest.prototype.getResults=function(){return this.fh;};SearchRequest.prototype.getIsComplete=function(){return this.uj;};SearchRequest.prototype.getErrorCode=function(){return this.fv;};SearchRequest.prototype.getErrorMessage=function(){return this.cF;};SearchRequest.prototype.getPagesWithoutText=function(){return this.TY;};SearchRequest.prototype.cancel=function(){this.qO=true;this.trigger('SearchCancelled');};module.exports=SearchRequest;},{}],171:[function(require,module,exports){var SearchResult=function(){this.dJ=0;this.ak=0;this.ad=0;this.aD='';this.ra='';this.rC=0;this.du='';this.AQ=0;this.bb='';this.FY='';this.nz=null;};SearchResult.prototype.getId=function(){return this.dJ;};SearchResult.prototype.getPageNumber=function(){return this.ak;};SearchResult.prototype.getText=function(){return this.aD;};SearchResult.prototype.getHighlightColor=function(){return this.ra;};SearchResult.prototype.getStartIndexInPage=function(){return this.rC;};SearchResult.prototype.getContext=function(){return this.du;};SearchResult.prototype.getStartIndexInContext=function(){return this.AQ;};SearchResult.prototype.getSearchTerm=function(){return this.bb;};SearchResult.prototype.getBoundingRectangle=function(){return this.nz;};if(Object.defineProperties){Object.defineProperties(SearchResult.prototype,{"pageNumber":{enumerable:true,get:function(){return this.ak;}},"id":{enumerable:true,get:function(){return this.dJ;}},"text":{enumerable:true,get:function(){return this.aD;}},"highlightColor":{enumerable:true,get:function(){return this.ra;}},"startIndexInPage":{enumerable:true,get:function(){return this.rC;}},"context":{enumerable:true,get:function(){return this.du;}},"startIndexInContext":{enumerable:true,get:function(){return this.AQ;}},"searchTerm":{enumerable:true,get:function(){return this.bb;}},"boundingRectangle":{enumerable:true,get:function(){return this.getBoundingRectangle();}}});}var SearchTaskResult=function(){this.dJ=0;this.ad=0;this.aD='';this.ra='';this.rC=0;this.du='';this.AQ=0;this.bb='';};SearchTaskResult.prototype.getId=function(){return this.dJ;};SearchTaskResult.prototype.getText=function(){return this.aD;};SearchTaskResult.prototype.getHighlightColor=function(){return this.ra;};SearchTaskResult.prototype.getStartIndexInInput=function(){return this.rC;};SearchTaskResult.prototype.getContext=function(){return this.du;};SearchTaskResult.prototype.getStartIndexInContext=function(){return this.AQ;};SearchTaskResult.prototype.getSearchTerm=function(){return this.bb;};if(Object.defineProperties){Object.defineProperties(SearchTaskResult.prototype,{"id":{enumerable:true,get:function(){return this.dJ;}},"text":{enumerable:true,get:function(){return this.aD;}},"highlightColor":{enumerable:true,get:function(){return this.ra;}},"startIndexInInput":{enumerable:true,get:function(){return this.rC;}},"context":{enumerable:true,get:function(){return this.du;}},"startIndexInContext":{enumerable:true,get:function(){return this.AQ;}},"searchTerm":{enumerable:true,get:function(){return this.bb;}}});}module.exports={SearchTaskResult:SearchTaskResult,SearchResult:SearchResult};},{}],172:[function(require,module,exports){if(typeof window==='undefined'){throw new Error('The viewer-core module can only be used in a browser environment (where a window object exists).');}require('./../css/viewercontrol.css');var IPCC=require('./IPCC/IPCC');var PCCViewer=require('./PCCViewer/PCCViewer');window.IPCC=IPCC;window.PCCViewer=PCCViewer;module.exports=PCCViewer;},{"./../css/viewercontrol.css":11,"./IPCC/IPCC":29,"./PCCViewer/PCCViewer":169}]},{},[172])(172)}); 