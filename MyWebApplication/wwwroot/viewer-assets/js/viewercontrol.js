// See license at https://www.npmjs.com/package/@prizmdoc/viewer-core
// @prizmdoc/viewer-core@13.21.7
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.viewerCore=f()}})(function(){var define,module,exports;return(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){'use strict';var styleElementsInsertedAtTop=[];var insertStyleElement=function(styleElement,options){var head=document.head||document.getElementsByTagName('head')[0];var lastStyleElementInsertedAtTop=styleElementsInsertedAtTop[styleElementsInsertedAtTop.length-1];options=options||{};options.insertAt=options.insertAt||'bottom';if(options.insertAt==='top'){if(!lastStyleElementInsertedAtTop){head.insertBefore(styleElement,head.firstChild);}else if(lastStyleElementInsertedAtTop.nextSibling){head.insertBefore(styleElement,lastStyleElementInsertedAtTop.nextSibling);}else{head.appendChild(styleElement);}styleElementsInsertedAtTop.push(styleElement);}else if(options.insertAt==='bottom'){head.appendChild(styleElement);}else{throw new Error('Invalid value for parameter \'insertAt\'. Must be \'top\' or \'bottom\'.');}};module.exports={createLink:function(href,attributes){var head=document.head||document.getElementsByTagName('head')[0];var link=document.createElement('link');link.href=href;link.rel='stylesheet';for(var key in attributes){if(!attributes.hasOwnProperty(key)){continue;}var value=attributes[key];link.setAttribute('data-'+key,value);}head.appendChild(link);},createStyle:function(cssText,attributes,extraOptions){extraOptions=extraOptions||{};var style=document.createElement('style');style.type='text/css';for(var key in attributes){if(!attributes.hasOwnProperty(key)){continue;}var value=attributes[key];style.setAttribute('data-'+key,value);}if(style.sheet){style.innerHTML=cssText;style.sheet.cssText=cssText;insertStyleElement(style,{insertAt:extraOptions.insertAt});}else if(style.styleSheet){insertStyleElement(style,{insertAt:extraOptions.insertAt});style.styleSheet.cssText=cssText;}else{style.appendChild(document.createTextNode(cssText));insertStyleElement(style,{insertAt:extraOptions.insertAt});}}};},{}],2:[function(require,module,exports){var cursor=require('./util/cursor.js');var mask=require('./util/mask.js');function InputMask(elem,options){var originalPlaceholder=elem.placeholder;var regexMask=mask.getRegex(options.value,options.translations);function onInput(){var cursorPos=cursor.get(elem);var oldVal=elem.value;var newVal=mask.getValue(oldVal,options.value,options.translations,cursorPos);elem.value=newVal.val;setTimeout(function(){cursor.set(elem,cursorPos+newVal.cursorAdjustment);},1);};function clearInvalidValue(){elem.value=mask.fill(elem.value,options.value,options.translations);if(!regexMask.test(elem.value)){elem.value='';}}(function init(){clearInvalidValue();elem.placeholder=mask.getPlaceholder(options.value,options.translations);elem.addEventListener('input',onInput);elem.addEventListener('focusout',clearInvalidValue);elem.addEventListener('blur',clearInvalidValue);}());this.destroy=function(){clearInvalidValue();elem.placeholder=originalPlaceholder;elem.removeEventListener('input',onInput);elem.removeEventListener('focusout',clearInvalidValue);elem.removeEventListener('blur',clearInvalidValue);};};module.exports=InputMask;},{"./util/cursor.js":3,"./util/mask.js":4}],3:[function(require,module,exports){function getCursor(elem){var position=0;if(elem.selectionEnd){position=elem.selectionEnd;}return Number(position);};function setCursor(elem,position){elem.setSelectionRange(position,position);};module.exports={get:getCursor,set:setCursor};},{}],4:[function(require,module,exports){var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reHasRegExpChar=new RegExp(reRegExpChar.source);function getMaskRegex(mask,translations){var maskRegex='';var char,translation,i;for(i=0;i<mask.length;i++){char=mask.charAt(i);translation=translations[char];if(translation){maskRegex+=translation.toString().replace(/.{1}$|^.{1}/g,'');}else if(reHasRegExpChar.test(char)){maskRegex+=char.replace(reRegExpChar,'\\$&');}else{maskRegex+=char;}}return new RegExp(maskRegex);};function getMaskPlaceholder(mask,translations){var placeholder=mask;var key;for(key in translations){if(translations.hasOwnProperty(key)){if(reHasRegExpChar.test(key)){key=key.replace(reRegExpChar,'\\$&');}placeholder=placeholder.replace(new RegExp(key,'g'),'_');}}return placeholder;};function getMaskValue(value,mask,translations,cursorPos){var result={val:'',cursorAdjustment:0};var m=0;var v=0;var lastUntranslatedMaskChar,maskChar,valChar,translation;while(m<mask.length&&v<value.length){maskChar=mask.charAt(m);valChar=value.charAt(v);translation=translations[maskChar];if(translation){if(valChar.match(translation)){result.val+=valChar;m+=1;}else if(v<cursorPos){result.cursorAdjustment-=1;}else if(valChar===lastUntranslatedMaskChar){lastUntranslatedMaskChar=null;}v+=1;}else{result.val+=maskChar;if(valChar===maskChar){v+=1;}else{if(v<cursorPos){result.cursorAdjustment+=1;}lastUntranslatedMaskChar=maskChar;}m+=1;}}return result;};function fillMask(value,mask,translations){var newVal=value;var index=value.length;var maskChar;while(index<mask.length){maskChar=mask[index];if(translations[maskChar]){break;}newVal+=maskChar;index+=1;}return newVal;};module.exports={getRegex:getMaskRegex,getPlaceholder:getMaskPlaceholder,getValue:getMaskValue,fill:fillMask};},{}],5:[function(require,module,exports){var util=require('./util.js');var regexSearch=require('./regex-search.js');var proximitySearch=require('./proximity-search.js');function isSimpleSearchInput(input){return(typeof input.pattern==='string'&&(typeof input.caseSensitive==='boolean'||typeof input.caseSensitive==='undefined'));};function isProximitySearchInput(input){if(!util.isPositiveInteger(input.distance)|| !(input.subTerms instanceof Array)){return false;}return util.every(input.subTerms,isSimpleSearchInput);};function isSearchInput(input){if(util.isPlainObject(input)&&typeof input.type==='string'){if(input.type==='simple'){return isSimpleSearchInput(input);}if(input.type==='proximity'){return isProximitySearchInput(input);}}return false;};function isArrayOfSearchInputs(input){if(!(input instanceof Array)){return false;}return util.every(input,isSearchInput);};function getRegExp(searchInput){return(new RegExp(searchInput.pattern,searchInput.caseSensitive?'g':'gi'));};function cleanSearchResult(searchInput){return function(val){return{input:searchInput,text:val.text,startIndex:val.startIndex};};};function getRegexResults(text,searchInput){var regex=getRegExp(searchInput);var results=regexSearch.getResultsForTerm(text,regex);return results.map(cleanSearchResult(searchInput));};function getProximityResults(text,searchInput){var regexes=searchInput.subTerms.map(getRegExp);var results=proximitySearch.getResults(text,regexes,searchInput.distance);return results.map(cleanSearchResult(searchInput));};function getResults(text,searchInputs){if(typeof text!=='string'){throw util.inputError('text','string');}if(!isArrayOfSearchInputs(searchInputs)){throw util.inputError('searchInputs','array of search inputs');}var combinedResults=[];searchInputs.forEach(function(term,i){if(term.type==='simple'){combinedResults=combinedResults.concat(getRegexResults(text,term));}else if(term.type==='proximity'){combinedResults=combinedResults.concat(getProximityResults(text,term));}else{throw util.inputError('searchInputs['+i+'].type','string equal to "simple" or "proximity"');}});util.sortResults(combinedResults);return combinedResults;};module.exports={getResults:getResults};},{"./proximity-search.js":8,"./regex-search.js":9,"./util.js":10}],6:[function(require,module,exports){var util=require('./util.js');function validateGetContextOptions(options){var rules=[{property:'options',validator:function(){return util.isPlainObject(options);},error:'object'},{property:'options.text',validator:function(){return(typeof options.text==='string');},error:'string'},{property:'options.startIndex',validator:function(){return util.isMinInteger(options.startIndex,0);},error:'integer that is at least 0'},{property:'options.endIndex',validator:function(){return util.isMinInteger(options.endIndex,0);},error:'integer that is at least 0'},{property:'options.padding',validator:function(){return util.isMinInteger(options.padding,0);},error:'integer that is at least 0'},{property:'options.startIndex',validator:function(){return(options.startIndex<options.text.length);},error:'integer that is less than "options.text.length"'},{property:'options.endIndex',validator:function(){return(options.endIndex<options.text.length);},error:'integer that is less than "options.text.length"'},{property:'options.startIndex',validator:function(){return(options.startIndex<=options.endIndex);},error:'integer that is at most "options.endIndex"'}];util.validateInput(rules);};function validateRectangleOptions(options){var rules=[{property:'options',validator:function(){return util.isPlainObject(options);},error:'object'},{property:'options.rectangles',validator:function(){return(options.rectangles instanceof Array);},error:'array'},{property:'options.startIndex',validator:function(){return util.isMinInteger(options.startIndex,0);},error:'integer that is at least 0'},{property:'options.endIndex',validator:function(){return util.isMinInteger(options.endIndex,0);},error:'integer that is at least 0'},{property:'options.startIndex',validator:function(){return util.isMaxInteger(options.startIndex,options.endIndex);},error:'integer that is at most "options.endIndex"'}];util.validateInput(rules);};function getContext(options){validateGetContextOptions(options);var startIndex=Math.max(options.startIndex-options.padding,0);var endIndex=Math.min(options.endIndex+options.padding,options.text.length-1);return{startIndex:(startIndex===0)?options.startIndex:options.padding,context:options.text.substring(startIndex,endIndex+1)};};function getBoundingRectangle(options){validateRectangleOptions(options);var boundingRectangle={left:Number.MAX_VALUE,right:0,top:Number.MAX_VALUE,bottom:0};var rectangle;for(var i=options.startIndex;i<=options.endIndex;i++){rectangle=options.rectangles[i];boundingRectangle.left=Math.min(rectangle[0],boundingRectangle.left);boundingRectangle.right=Math.max(rectangle[0]+rectangle[2],boundingRectangle.right);boundingRectangle.top=Math.min(rectangle[1],boundingRectangle.top);boundingRectangle.bottom=Math.max(rectangle[1]+rectangle[3],boundingRectangle.bottom);}return{x:boundingRectangle.left,y:boundingRectangle.top,width:boundingRectangle.right-boundingRectangle.left,height:boundingRectangle.bottom-boundingRectangle.top};};function getLineRectangles(options){validateRectangleOptions(options);var lineRectangles=[];function processCharacter(rectangle){var character=util.getRectangleObject(rectangle);var line=lineRectangles[lineRectangles.length-1];if(util.isCharacterAtEndOfLine(character,line)){lineRectangles.splice(-1,1,util.joinRectangles(line,character));return;}lineRectangles.push(character);};for(var i=options.startIndex;i<=options.endIndex;i++){processCharacter(options.rectangles[i]);}return lineRectangles;};module.exports={getContext:getContext,getBoundingRectangle:getBoundingRectangle,getLineRectangles:getLineRectangles};},{"./util.js":10}],7:[function(require,module,exports){var formatter=require('./formatter.js');var regexSearch=require('./regex-search.js');var proximitySearch=require('./proximity-search.js');var combinedSearch=require('./combined-search.js');module.exports={formatter:formatter,regex:regexSearch,proximity:proximitySearch,combined:combinedSearch};},{"./combined-search.js":5,"./formatter.js":6,"./proximity-search.js":8,"./regex-search.js":9}],8:[function(require,module,exports){var regexSearch=require('./regex-search.js');var util=require('./util.js');function isAProximityResult(matching,searchTerms){return(Object.keys(matching).length===searchTerms.length);};function getStartIndex(wordIndex,searchResult){var startIndex= -1;for(var i=1;i<wordIndex.length;i++){if(wordIndex[i]>searchResult.startIndex){startIndex=i-1;break;}}if(startIndex=== -1&&searchResult.startIndex>wordIndex[wordIndex.length-1]){startIndex=wordIndex.length-1;}return startIndex;};function getEndIndex(wordIndex,searchResult,termsLength,distance){var startIndex=getStartIndex(wordIndex,searchResult);var endIndex=null;if(distance===0){endIndex=startIndex+termsLength-1;}else{endIndex=startIndex+((termsLength-1)*distance+termsLength)-1;}return wordIndex[endIndex<wordIndex.length?endIndex:wordIndex.length-1];};function getWordIndex(text){if(typeof text!=='string'){throw util.inputError('text','string');}var wordIndex=[];var regex=(/[^\s]+/gm);var regexResult;while((regexResult=regex.exec(text))!==null){wordIndex.push(regexResult.index);}return wordIndex;};function getResults(text,searchTerms,distance){if(!util.isPositiveInteger(distance)){throw util.inputError('distance','integer that is greater than 0');}var wordIndex=getWordIndex(text);var searchResults=regexSearch.getResults(text,searchTerms);var proximityResults=[];searchResults.forEach(function(searchResult,i){var opts={nextIndex: -1,currentIndex:i,matches:{},nextResult:null};opts.endIndex=getEndIndex(wordIndex,searchResult,searchTerms.length,distance);opts.matches[searchResult.term]=true;while(opts.nextIndex<opts.endIndex&& !isAProximityResult(opts.matches,searchTerms)&&opts.currentIndex+1<searchResults.length){opts.nextResult=searchResults[++opts.currentIndex];opts.nextIndex=opts.nextResult.startIndex;if(opts.nextIndex<=opts.endIndex){opts.matches[opts.nextResult.term]=true;}}if(isAProximityResult(opts.matches,searchTerms)){proximityResults.push({text:text.substring(searchResult.startIndex,opts.nextResult.startIndex+opts.nextResult.text.length),startIndex:searchResult.startIndex});}});return proximityResults;};module.exports={getWordIndex:getWordIndex,getResults:getResults};},{"./regex-search.js":9,"./util.js":10}],9:[function(require,module,exports){var util=require('./util.js');function isRegExp(input){return(input instanceof RegExp);};function isArrayOfRegExp(input){if(!(input instanceof Array)){return false;}return util.every(input,isRegExp);};function validateGetResultsForTerm(text,searchTerm){if(typeof text!=='string'){throw util.inputError('text','string');}if(!isRegExp(searchTerm)){throw util.inputError('searchTerm','regular expression');}};function getResultsForTerm(text,searchTerm){validateGetResultsForTerm(text,searchTerm);var searchResults=[];var regexResult;while((regexResult=searchTerm.exec(text))!==null){if(regexResult[0]){searchResults.push({term:searchTerm.toString(),text:regexResult[0],startIndex:regexResult.index});}else{searchTerm.lastIndex+=1;}}return searchResults;};function getResults(text,searchTerms){if(typeof text!=='string'){throw util.inputError('text','string');}if(!isArrayOfRegExp(searchTerms)){throw util.inputError('searchTerms','array of regular expressions');}var combinedResults=[];for(var i=0;i<searchTerms.length;i++){combinedResults=combinedResults.concat(getResultsForTerm(text,searchTerms[i]));}util.sortResults(combinedResults);return combinedResults;};module.exports={getResultsForTerm:getResultsForTerm,getResults:getResults};},{"./util.js":10}],10:[function(require,module,exports){function inputError(property,expected){var a=(['a','e','i','o','u'].indexOf(expected.charAt(0))> -1)?'an':'a';return new Error('Invalid argument. Argument "'+property+'" must be '+a+' '+expected+'.');};function isInteger(input){return(typeof input==='number'&&Math.round(input)===input);};function isMinInteger(input,min){if(typeof min!=='number'){throw inputError('min','number');}return(isInteger(input)&&input>=min);};function isMaxInteger(input,max){if(typeof max!=='number'){throw inputError('max','number');}return(isInteger(input)&&input<=max);};function isPositiveInteger(input){return isMinInteger(input,0);};function isPlainObject(input){return(typeof input==='object'&&input!==null&& !(input instanceof Array)&&input.constructor===Object);};function validateInput(rules){rules.forEach(function(rule){if(!rule.validator()){throw inputError(rule.property,rule.error);}});return true;};function every(obj,fn){for(var key in obj){if(obj.hasOwnProperty(key)){if(!fn(obj[key],key)){return false;}}}return true;};function sortResults(results){results.sort(function(a,b){return a.startIndex-b.startIndex;});};function joinRectangles(rectA,rectB){var left=Math.min(rectA.x,rectB.x);var top=Math.min(rectA.y,rectB.y);var right=Math.max(rectA.x+rectA.width,rectB.x+rectB.width);var bottom=Math.max(rectA.y+rectA.height,rectB.y+rectB.height);return{x:left,y:top,width:right-left,height:bottom-top};};function isCharacterAtEndOfLine(character,line){if(line&&Math.abs(character.y-line.y)<1&&Math.abs(character.height-line.height)<1&&(character.x+character.width)>=(line.x+line.width)){return true;}return false;};function getRectangleObject(rect){return{x:rect[0],y:rect[1],width:rect[2],height:rect[3]};};module.exports={inputError:inputError,isInteger:isInteger,isMinInteger:isMinInteger,isMaxInteger:isMaxInteger,isPositiveInteger:isPositiveInteger,isPlainObject:isPlainObject,validateInput:validateInput,every:every,sortResults:sortResults,joinRectangles:joinRectangles,isCharacterAtEndOfLine:isCharacterAtEndOfLine,getRectangleObject:getRectangleObject};},{}],11:[function(require,module,exports){var css="/* page list specific */\n.pccViewerControl {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  /* promote to a new layer */\n  -webkit-transform: translateZ(0);\n  transform: translateZ(0);\n  /* iOS momentum scrolling */\n  -webkit-overflow-scrolling: touch;\n  /* helps touch zoom not overlap any other element */\n  overflow: hidden;\n}\n/* normalize override */\nsvg:not(:root) {\n  overflow: visible!important;\n}\n.pccPageListContainer {\n  box-sizing: border-box;\n}\n.pccPageListContainerWrapper {\n  -ms-transform: scale(1,1) translate(0px,0px);\n  -moz-transform: scale(1,1) translate(0px,0px);\n  -webkit-transform: scale3d(1,1,1) translate3d(0px,0px,0px);\n  transform: scale3d(1,1,1) translate3d(0px,0px,0px);\n  -ms-transform-origin: 0% 0%;\n  -moz-transform-origin: 0% 0%;\n  -webkit-transform-origin: 0% 0%;\n  transform-origin: 0% 0%;\n  will-change: transform, -webkit-transform;\n}\n.pccPageListLoading {\n  height: 30px;\n  margin: -15px;\n  left: 50%;\n  position: absolute;\n  top: 50%;\n  width: 30px;\n}\n.pccPageListComments {\n  position: relative;\n  min-width: 300px;\n  height: auto;\n  vertical-align: top;\n  display: table-cell;\n  box-sizing: border-box;\n  z-index: 2;\n}\n.pccPageListComments > div {\n  position: absolute;\n}\n.pccHidden {\n  display: none;\n}\n.pccPageListItem {\n  background: #fff;\n  overflow: hidden;\n  margin: 13px;\n  vertical-align: middle;\n  border-bottom: 1px solid #d4d6db;\n}\n/* Single Page view mode */\n.pccSinglePageView .pccPageListItem {\n  -webkit-transform: translateZ(0);\n  transform: translateZ(0);\n  -webkit-animation-duration: 1s;\n  animation-duration: 1s;\n  -webkit-animation-timing-function: ease-out;\n  animation-timing-function: ease-out;\n}\n/* Next and previous page list items for single page view mode */\n.pccSinglePageView .pccNextPage {\n  opacity: 0;\n  z-index: 0;\n}\n.pccSinglePageView .pccPreviousPage {\n  opacity: 0;\n  z-index: 0;\n}\n.pccSinglePageView .pccCurrentPage {\n  opacity: 1;\n  z-index: 1;\n}\n/* Default animations for single page view mode */\n.pccSinglePageView .pccNextPageIn {\n  animation-name: moveInFromRight;\n  -webkit-animation-name: moveInFromRight;\n}\n.pccSinglePageView .pccPreviousPageIn {\n  animation-name: moveInFromLeft;\n  -webkit-animation-name: moveInFromLeft;\n}\n.pccSinglePageView .pccPageForward {\n  animation-name: moveLeft;\n  -webkit-animation-name: moveLeft;\n}\n.pccSinglePageView .pccPageBack {\n  animation-name: moveRight;\n  -webkit-animation-name: moveRight;\n}\n@keyframes moveRight {\n  0% {\n    transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n\n  100% {\n    transform: translate3d(110%, 0, 0);\n    opacity: 0;\n  }\n}\n@-webkit-keyframes moveRight {\n  0% {\n    -webkit-transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n\n  100% {\n    -webkit-transform: translate3d(110%, 0, 0);\n    opacity: 0;\n  }\n}\n@keyframes moveLeft {\n  0% {\n    transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n\n  100% {\n    transform: translate3d(-110%, 0, 0);\n    opacity: 0;\n  }\n}\n@-webkit-keyframes moveLeft {\n  0% {\n    -webkit-transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n\n  100% {\n    -webkit-transform: translate3d(-110%, 0, 0);\n    opacity: 0;\n  }\n}\n@keyframes moveInFromLeft {\n  0% {\n    transform: translate3d(-110%, 0, 0);\n    opacity: 0;\n  }\n\n  100% {\n    transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n}\n@-webkit-keyframes moveInFromLeft {\n  0% {\n    -webkit-transform: translate3d(-110%, 0, 0);\n    opacity: 0;\n  }\n\n  100% {\n    -webkit-transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n}\n@keyframes moveInFromRight {\n  0% {\n    transform: translate3d(110%, 0, 0);\n    opacity: 0;\n  }\n\n  100% {\n    transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n}\n@-webkit-keyframes moveInFromRight {\n  0% {\n    -webkit-transform: translate3d(110%, 0, 0);\n    opacity: 0;\n  }\n\n  100% {\n    -webkit-transform: translate3d(0, 0, 0);\n    opacity: 1;\n  }\n}\n/*\n.pccPageListItem * {\n    -ms-touch-action: pinch-zoom pan-x pan-y;\n    touch-action: pinch-zoom pan-x pan-y;\n} */\n.pccPageListItem .pccPageListItemLoading {\n  margin: 30% auto;\n  display: block;\n  filter: Alpha(Opacity=50);\n  background-color: #fff;\n}\n.pccPageListItem .pccPageLoadFail {\n  margin: 35% auto;\n  text-align: center;\n  line-height: 2;\n  color: #777;\n}\n/* PageList container fix */\n.pccPageListItem .igAnchor,\n.pccPageListItem .igViewerScroller,\n.pccPageListItem .igViewerGraphics,\n.pccThumbnailView .igAnchor {\n  /* never recalculate these values */\n  width: 100% !important;\n  height: 100% !important;\n}\n.igAnchor > svg {\n  width: 100%;\n  height: 100%;\n}\n.igMagnifierFrame .igAnchor > svg {\n  width: auto;\n  height: auto;\n}\n.igViewerScroller,\n.igViewerGraphics,\n.igAnchor,\n.igAnchor > svg,\n.igAnchor svg svg {\n  -webkit-user-select: none !important;\n  -webkit-touch-callout: none !important;\n  -webkit-tap-highlight-color: rgba(0,0,0,0) !important;\n}\n.igAnchor svg svg use {\n  pointer-events: none;\n}\n/* do not show textarea outline on text marks */\n.pccViewerControl textarea {\n  outline: none;\n}\n/* copy text */\n.pccCopyText {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 0;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  opacity: 0;\n  filter: alpha(opacity=0);\n  color: #000;\n}\n/* about modal */\n.pccPageListAboutModal {\n  background: #383a3f;\n  position: absolute;\n  top: -300px;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n  width: 280px;\n  padding: 10px;\n  visibility: hidden;\n  opacity: 0;\n  z-index: 5;\n  border-radius: 3px;\n  text-align: center;\n  -webkit-box-shadow: 0 2px 4px -1px rgba(0, 0, 0, .4);\n  box-shadow: 0 2px 4px -1px rgba(0, 0, 0, .4);\n  -webkit-transition: all 400ms;\n  transition: all 400ms;\n}\n.pccPageListAboutModal * {\n  text-align: left;\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  -webkit-text-size-adjust: 100%;\n  -ms-text-size-adjust: 100%;\n  text-size-adjust: 100%;\n}\n.pccPageListAboutModal h3 {\n  margin: 10px 0;\n  font-size: 18px;\n  color: #fff;\n  font-weight: bold;\n}\n.pccPageListAboutModal p {\n  font-size: 12px;\n  color: #c2c5ce;\n}\n.pccPageListAboutModal p:last-child {\n  color: #c2c5ce;\n}\n.pccPageListAboutModal a {\n  color: #afc3eb;\n}\nhtml .pccPageListAboutModal button {\n  position: absolute;\n  top: 0;\n  right: 0;\n  font-size: 20px;\n  color: #fff;\n  background: none;\n  border: none;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  height: auto;\n}\n.pccPageListAboutModal.open {\n  visibility: visible;\n  opacity: 1;\n  top: 122px;\n}\n/* nag modal */\n.pccPageListNagModal {\n  background: #e7e9ef;\n  position: absolute;\n  top: -300px;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n  width: 480px;\n  padding: 10px;\n  visibility: hidden;\n  opacity: 0;\n  z-index: 5;\n  border-radius: 3px;\n  text-align: center;\n  -webkit-box-shadow: 0 6px 6px -1px rgba(0, 0, 0, .5);\n  box-shadow: 0 6px 6px -1px rgba(0, 0, 0, .5);\n  -webkit-transition: all 400ms;\n  transition: all 400ms;\n}\n.pccPageListNagModal * {\n  text-align: left;\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  -webkit-text-size-adjust: 100%;\n  -ms-text-size-adjust: 100%;\n  text-size-adjust: 100%;\n}\n.pccPageListNagModal h3 {\n  margin: 10px 0;\n  font-size: 18px;\n  color: #000000;\n  font-weight: bold;\n}\n.pccPageListNagModal p {\n  font-size: 12px;\n  color: #000000;\n}\n.pccPageListNagModal p:last-child {\n  color: #000000;\n}\n.pccPageListNagModal a {\n  color: #263fea;\n}\nhtml .pccPageListNagModal button {\n  position: absolute;\n  top: 0;\n  right: 0;\n  font-size: 20px;\n  color: #000000;\n  background: none;\n  border: none;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  height: auto;\n}\n.pccPageListNagModal.open {\n  visibility: visible;\n  opacity: 1;\n  top: 20px;\n}\n.pccEditMarkButton {\n  display: inline-block;\n  background: no-repeat url(../../../../src/img/EditTextMark.png);\n  border: none;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  height: 26px;\n  width: 26px;\n  -webkit-background-size: 26px 26px;\n  background-size: 26px;\n  cursor: pointer !important;\n}\n/* svg elements can have body tags inside them, so we protect styling of them */\n/* viewer marks that do not look correct can likely be affected by conflicting styles */\n.pccViewerControl body {\n  background-color: initial;\n  min-height: initial;\n  position: static;\n  height: 100%;\n}\n/* style for thumbnail views */\n.pccThumbnailWrapper {\n  position: relative;\n  display: block;\n  width: 100px;\n  height: 100px;\n  margin: 5px 0 2em 0;\n}\n.pccThumbnail {\n  width: 100%;\n  height: 100%;\n}\n.pccThumbnailView {\n  /* it's important not to edit these width and height\n     * they are depended upon in the actual size calculation */\n  height: 100%;\n  width: 100%;\n  margin: auto !important;\n}\n.pccThumbnailLabel {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  width: 100%;\n  text-align: center;\n}\n/* mark selection handles */\n.pccMarkHandleTopLeft,\n.pccMarkHandleTopCenter,\n.pccMarkHandleTopRight,\n.pccMarkHandleMidLeft,\n.pccMarkHandleMidRight,\n.pccMarkHandleBottomLeft,\n.pccMarkHandleBottomCenter,\n.pccMarkHandleBottomRight,\n.pccMarkHandlePoint,\n.pccMarkHandleTextSelectionStart,\n.pccMarkHandleTextSelectionEnd {\n  position: absolute;\n  width: 40px;\n  height: 40px;\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkMmJhOTYxOS02NDJjLTQzOTUtYTI2Mi1iZTQ5NzM5MDEzYjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDQ3M0M1RkFDMUM2MTFFNDlBMzZFODY3RUQwOTI4QjgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDQ3M0M1RjlDMUM2MTFFNDlBMzZFODY3RUQwOTI4QjgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowYzJmZjg5Ny1iMWRmLTQ4MGItOGRlNy01N2VkNGE0ZjJmZDgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ZDJiYTk2MTktNjQyYy00Mzk1LWEyNjItYmU0OTczOTAxM2IxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+SvzVDQAAAn9JREFUeNrsWMFr01AcTvvSNsnG1jQqOIeTTQ/z4EA9WFQQPYpn0epFL/4DiiBMFATRf0AvXtSJdwU9bHhY3UlBQQdThxVRUNN2wzVd26R+v/ILVA9r0iVQWR58zXuP9/3yNXnv9/tIrNlsSr3c4lKPt0hgJDASGAn8jwTKgAEMSAEHXU/TgRPAQWC0LV4dWADywDOg1O0NYn5K3ZEbc63riytZevKngTNAqgNtFXgATIHvMD+8J4jgGi7XgP3uXKVmi/xCMf3ll6XKIt4czihWdpe+pCWFzX/gPDAB7lWIrIT2BHnP3gb20qC0Uk/cnSmMTL8zh+q289d+Toi4c3S38e3CsZGC3peo8/Rr4CLghCXwLHCOOp9+VNRLj+YnzN81ZS2C0Z+s3jo1/mZsi2bx1D3gfhinOAPk+MnJlx/P7+kkjhqtobXE4akcxwpc4HH3QNyZLuz4uVxTvRJpLXF4mOJYgQs8RD/LVkOeeW8O+T1c4GxdWbUFDw8HLVDmPCfNfSyl/z0QXho44uWHYpqHo14ziNcbDboBv5qWInXZKA1xV3DMjVOLl4AGdYYNtdrtzbZvUt1UY3PMwASSuEXqHBjTy5SE/YoDx87u1Ms8XHT/cJCvON/ajJrcoArhVyA43/sV2ebhbBhp5gkXfonK1+aBpOWVSGvB+dxmHp6GIbAIPGx5LNTWmyfH31IZ60SiNbQWHPeVUgxzY5oF8oNst64D+9x5qhCzsFvIkRrslrMto1TpQPSlhN1GfwVMkt3y4we7NayCDWvOo2GdolcLvu3XsMbW+fHI4MK/luV/zvs3fMvvoV4PchIuBxU0Fn1+iwRGAiOBkcDebn8EGACEVf6TPnvOjAAAAABJRU5ErkJggg==);\n}\n@media screen and (-webkit-min-device-pixel-ratio: 2), \n       screen and (min-resolution: 2dppx),\n       screen and (min-resolution: 192dpi) {\n  .pccMarkHandleTopLeft,\n  .pccMarkHandleTopCenter,\n  .pccMarkHandleTopRight,\n  .pccMarkHandleMidLeft,\n  .pccMarkHandleMidRight,\n  .pccMarkHandleBottomLeft,\n  .pccMarkHandleBottomCenter,\n  .pccMarkHandleBottomRight,\n  .pccMarkHandlePoint,\n  .pccMarkHandleTextSelectionStart,\n  .pccMarkHandleTextSelectionEnd {\n    -webkit-background-size: 40px 40px;\n    background-size: 40px;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGsAAABrCAYAAABwv3wMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkMmJhOTYxOS02NDJjLTQzOTUtYTI2Mi1iZTQ5NzM5MDEzYjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0QwNDg4NENDNDAzMTFFNDgxM0JDREZDMUY0RTFFODIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0QwNDg4NEJDNDAzMTFFNDgxM0JDREZDMUY0RTFFODIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MjI3ZGMxZS0xNjg1LTQ2YTktOTI5Mi0wYzNkMTM4YjU3MWMiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2YWNjOTM4MC0wYzZkLTExNzgtYmZjOS1jNTk5OGE2MjYzNGUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4Xpv3rAAAGnklEQVR42uycXUxbZRjHT1u++gHjoxTWjTLYxpTBytxUEE3IdiHzxo8tzvmRyIwXRC+cNyaiJk42k11si0a9ME4v/LyYmTeCF1tIJo6YMCgwVMJnmQzKR7cWWr7a+jxyMLjsnNMWes7b0+ef/APJe9r3Of31fc97Tp/n1YRCIY4UH9LSR0CwSASLYJEIFolgESwSwSIRLIJFIlgkgkWwSASLRLAIFolgkQgWwSIRLBLBIlgkgkUiWASLxJ6SVHAOFvA28GZwFjgVbALPghfAbvAt8DDYRbDklRH8CHg/+AGwOYLXToGvg9vBreC5eDpxTRzluu8GPw1+lB896xWOuqvgS+AbBGtjZAfX8X9jJQf4S/4vwYpCOeB68EEZ+8SR9hE/XdJqMEwdAH8lMyjUY/wIO0ALjHuo5tS1//5vaajCL89r4GcUDAlXku/y18hPIL7gmvhoNch/ECnw5x3+2x2R3HNLyf0Tc/rhSb/BtxjQzS8FdGnJuoAhRRfYlqv37cgz+rOMyUsRvi1+YXIhrkYAtkgj6/+gToP3hfua7lGvqcnhynM4PVlj7nmT2JVXA7Zmpc3abRnuQ3bLRHlB+mwE0+JpiK8BgC3QAmPluvkBf+8kKoy02eEyf982Vjgy5U+PtsNCs977XKV1pNZumdKE95Lf+KkxmOiw8Bp1JJyRdLZpsGRo0pexUR0X5Ro8b9QW9cGIC2ek/Qj+OJFh4TTzPj9TCY6mCy3Ord9eG9seCIY0Gx2ATqsJPV9lHTheY7sZxps3gi8nIqwcfnluEjpgcTmofe9i3662fnderIN5aHumq/HIrj9TkrRiUx2OwJfB04l2n1UvBerNb3rL5ACF+n3gtuXE171l2K/Esr4+0W6K7WI3vDjWcUT13PRmyxnUjb+92divxFxzkIvtoy/mYNWJNcI1qkCuEXW3sN8voH+Jw44nCqxysW8mrvpgMVGk5KrnO+gfRrVJ5JA9/HmoHtZTYtPf+ebBnbDqU/SZJfZ/rmlwZyjK81ALLAO4Wqjx505X7oDLt4mFpyoYB8Yjckg1fz6qhSX6w+EPbWM2jiFJxJPKRfEcM55g7RdqcDg9Jud09I+QYiGMB+MSOWSfmmHtFWpo7prM4xhUk8OVH835xDssMyeS3NIxfCebRVidI54siXOyqBGW4L0L/h41cWfByCKscYgL4xM5pCihYPWNzxlYTtvB+ESaN6sRluA0Nzrt1zPMSiq+TDXCEpzmZueXdSzDkojPoEZYgvP+/FKQaVgS8aWoEZZgwkpasjbAMiyJ+BbVCEswr9yQmsQ0LFOaaHw+NcKaEWooNOv9LMMqyBGN77YaYY0KNZTkG30sw5KI71ZCwcIEzPxNqUyW30BcPokE0SE1wpriRBL+Kwoz3CzCgrhmJM7JpUZYqA6hhkN2yziLsCTi6pAzFrlhtQs1YKKlLUfvZQkUxiORANquZlhY/ySYM3600upkCZZEPKuVk6qFhauqVqHGJyosk8UWg4cFUBgHxiNySKuc91hKwEJdEmrA9OUTtcV9Oq1G0QIA7B/j0ER5HmqC1Q3uEmrEcpxjVdYhJWFh/xJlQV38eageFuqCWOMrNbbRyh1ZE0oEhv1i/+uJX22wsCr+sth0ePJwyV9lW9Nn5Axq95b0GexXYvq7wilU1a9kMuVn3EpVxj2F1RxnXyjtkWuEPVic6Tr3YmlPGFUknyr1gSkJC8tmznAribiCwD48et8fL1Vv6cc6qhgtJkL4/meO3d8rAQp1nlOo3OffGYeBysfXwYclVyWjXhOmVm9kxi4uz3HVF2aNccJXPq6O7rBrijGlGTNl15MQijXFzz5sdeJ9FNUURyDcB6OloQpTkU9xEWS4do540n/pnrR0OT3ZY+55YxjV+nN7bBkzj5fnuioKMyJ5rIUbc72N1fpK74PBBCzUevfBwHQx55RfP7ewrFtYDupSk7QBY2pSwGbW+/H3qCj2wVh9SnFydR8MgsXeDjNrr1FM7TDD6kZbWG3yFidScxxDzfKr1KusfSisbrT1K7dSFX9F5n4RUB2LoFgeWWtVAX4VXBrDPnrBn+O6heUPIp528sTymie5lYrDjdhzaplfQPzEyfyLb7SKpz1yO3in88D28kv9nAifmlznjaC8cXT+cTWyhHT37tNp3EpePWZLzXO0+zRTcsU7hHhfDZIIFsEiESwSwSJYJIJFIlgEi0SwSASLYJEIFolgESwSwSIRLIJFIlgkgkWwSASLYJEIFolgJbT+EWAAqiM7sRyeWSQAAAAASUVORK5CYII=);\n  }\n}\n.pccv input.no-ms-clear::-ms-clear {\n  display: none;\n}\n.pcc-image-stamp-img {\n  height: auto;\n  max-height: available;\n  width: 100%;\n  max-width: 100%;\n  position: relative;\n}\n.pcc-load,\n.pccPageListLoading,\n.pccPageListItemLoading {\n  -webkit-animation-duration: 1s;\n  animation-duration: 1s;\n  -webkit-animation-iteration-count: infinite;\n  animation-iteration-count: infinite;\n  -webkit-animation-timing-function: linear;\n  animation-timing-function: linear;\n  -webkit-animation-name: pcc-anim-load;\n  animation-name: pcc-anim-load;\n}\n@-webkit-keyframes pcc-anim-load {\n  0% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n\n  100% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n@keyframes pcc-anim-load {\n  0% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n\n  100% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n}\n.pccPageListLoading svg,\n.pccPageListItemLoading svg {\n  fill: #7d7f85;\n  height: 26px;\n  width: 26px;\n}\n.pccPageListLoading,\n.pccPageListItemLoading {\n  display: block;\n}\n@media print {\n  .no-clip-on-print {\n    clip-path: none !important;\n  }\n\n  .expand-on-print {\n    transform: scale(9999, 9999);\n  }\n}\n";(require("browserify-css").createStyle(css,{"href":"src\\css\\viewercontrol.css"},{"insertAt":"bottom"}));module.exports=css;},{"browserify-css":1}],12:[function(require,module,exports){var lF=function(){this.bJ=false;this.K=false;this.bu=IPCC.aa.AddFreehandMark;};lF.prototype.mt=function(K){this.K=K;};lF.prototype.ep=function(){this.K=false;};lF.prototype.af=function(){if(this.bJ){this.C=null;this.oc=null;this.K.nV(null);this.bJ=false;this.K.dh();}};lF.prototype.rS=function(){this.af();};lF.prototype.lg=function(F){this.af();if(F.domEvent.button===0){this.bJ=true;this.C=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Polyline);this.C.get_points().addPoint(F.imagePoint);this.oc=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Freehand);this.K.nV(this.C,this.oc);this.C.set_lineWidth(this.oc.fw);this.C.set_lineColor(this.oc.hY);this.C.set_opacity(this.oc.dg);this.qb=F.imagePoint;this.oq=F.windowPoint;this.K.dh();}};lF.prototype.lA=function(F){if(F.domEvent.button!==0){this.af();}if(this.bJ){this.C.get_points().addPoint(F.imagePoint);this.K.dh();}};lF.prototype.Al=function(F){if(this.bJ){this.af();}};lF.prototype.jW=function(F){if(this.bJ&&F.domEvent.button===0){this.C.get_points().addPoint(F.imagePoint);var anw=this.C.get_points();var aJ=[];var hf=Number.MAX_VALUE,iW=0,_top=Number.MAX_VALUE,iO=0;var L=0;for(L=0;L<anw.get_length();L++){var sG=anw.getPoint(L);if(sG.x<hf){hf=sG.x;}if(sG.x>iW){iW=sG.x;}if(sG.y<_top){_top=sG.y;}if(sG.y>iO){iO=sG.y;}aJ.push({x:sG.x,y:sG.y});}var zY=3;var sl;var sz=(aJ.length<zY)?aJ:IPCC.J.filter(aJ,function(au){if(sl){var bm=au.x-sl.x,cu=au.y-sl.y,dU=bm*bm+cu*cu;if(Math.sqrt(dU)<4){return false;}}au.x=au.x-hf;au.y=au.y-_top;sl=au;return true;});if(sz.length<zY){sz=[aJ[0],aJ[aJ.length-1]];}var dJ='';sl=undefined;if(sz.length<zY){dJ+=this.OS(sz);}else{dJ='M'+IPCC.J.bspline(sz);dJ=dJ.replace(/\d*\.?\d*/g,function(ai){var JR=ai.indexOf('.');if(ai.length&&JR>0){return ai.substr(0,JR+3);}else if(ai!==""){return ai;}else{return ai;}});}var ap=iW-hf;var aM=iO-_top;if(aM===0&&ap===0){this.af();return;}var oG={clientX:F.domEvent.clientX,clientY:F.domEvent.clientY};this.oc.set_rectangle({x:hf,y:_top,width:ap,height:aM});this.oc.set_pathString(dJ);this.oc.set_pathWidth(ap);this.oc.set_pathHeight(aM);this.K.nV(null);this.K.en().addMark(this.oc,oG);this.K.dh();}this.af();};lF.prototype.OS=function(zG,Fc){var RG=(Fc&&IPCC.J.DY)?'m':'M';var XO=(Fc&&IPCC.J.DY)?'l':'L';return IPCC.J.map(zG,function(au,L){if(L===0){return RG+au.x+','+au.y;}else{return XO+au.x+','+au.y;}}).join('');};lF.prototype.nB=function(F){var as=this.K.fb();if(F.windowPoint.x<=0||F.windowPoint.x>=as.width-2){this.af();}if(F.windowPoint.y<=0||F.windowPoint.y>=as.height-2){this.af();}};lF.prototype.lO=function(){this.af();};module.exports=lF;},{}],13:[function(require,module,exports){var lG=function(){this.bJ=false;this.K=false;this.bu=IPCC.aa.AddLineMark;};lG.prototype.mt=function(K){this.K=K;};lG.prototype.ep=function(){this.K=false;};lG.prototype.af=function(){if(this.bJ){this.C=null;this.K.nV(null);this.bJ=false;this.K.dh();}};lG.prototype.rS=function(){this.af();};lG.prototype.lg=function(F){this.af();if(F.domEvent.button===0){this.bJ=true;this.C=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Line);this.C.get_points().setPoint(0,F.imagePoint);this.C.get_points().setPoint(1,F.imagePoint);this.K.nV(this.C);this.qb=F.imagePoint;this.oq=F.windowPoint;}};lG.prototype.lA=function(F){if(F.domEvent.button!==0){this.af();}if(this.bJ){this.C.get_points().setPoint(1,F.imagePoint);this.K.dh();}};lG.prototype.jW=function(F){if(this.bJ&&F.domEvent.button===0){var eY=F.windowPoint.x-this.oq.x;var gR=eY*eY;eY=F.windowPoint.y-this.oq.y;gR+=eY*eY;if(gR>25){var K=this.K;var oG={clientX:F.domEvent.clientX,clientY:F.domEvent.clientY};this.C.get_points().setPoint(1,F.imagePoint);this.K.nV(null);this.K.en().addMark(this.C,oG);K.dh();}}this.af();};lG.prototype.nB=function(F){var as=this.K.fb();if(F.windowPoint.x<=0||F.windowPoint.x>=as.width-2){this.af();}if(F.windowPoint.y<=0||F.windowPoint.y>=as.height-2){this.af();}};lG.prototype.lO=function(){this.af();};module.exports=lG;},{}],14:[function(require,module,exports){var kC=function(bC){this.bJ=false;this.K=false;this.bC=bC;switch(this.bC){case IPCC.Web.UI.MarkType.Polygon:this.bu=IPCC.aa.AddPolygonMark;break;case IPCC.Web.UI.MarkType.Polyline:this.bu=IPCC.aa.AddPolylineMark;this.Yf=false;break;}};kC.prototype.mt=function(K){this.K=K;};kC.prototype.ep=function(){this.K=false;};kC.prototype.af=function(){if(this.bJ){if(arguments[0]){if(arguments[0]===true){if(this.C&&this.Yf===false){this.K.en().addMark(this.C);this.Yf=true;this.K.dh();}}}this.C=null;this.K.nV(null);this.bJ=false;this.K.dh();}};kC.prototype.rS=function(){this.af();};kC.prototype.lg=function(F){if(F.domEvent.button===0){if(!this.bJ){this.bJ=true;this.C=new IPCC.Web.UI.Mark(this.bC);this.C.get_points().addPoint(F.imagePoint);this.K.nV(this.C);}var aJ=this.C.get_points();if(aJ.get_length()>0){aJ.setPoint(aJ.get_length()-1,F.imagePoint);}aJ.addPoint(F.imagePoint);this.qb=F.imagePoint;this.oq=F.windowPoint;this.K.dh();}else{this.af();}};kC.prototype.Al=function(F){if(this.bJ&&F.domEvent.button===0){var aJ=this.C.get_points(),cr=aJ.get_length(),TI,SQ;if(cr>2){var abX=true;while(abX){cr=aJ.get_length();TI=aJ.getPoint(cr-1);SQ=aJ.getPoint(cr-2);if(TI.x===SQ.x&&TI.y===SQ.y){aJ.removePoint(cr-1);}else{abX=false;}}}if(aJ.get_length()>0){aJ.setPoint(aJ.get_length()-1,F.imagePoint);}this.K.nV(null);var oG={clientX:F.domEvent.clientX,clientY:F.domEvent.clientY};this.K.en().addMark(this.C,oG);this.Yf=true;this.K.dh();}this.af();};kC.prototype.lA=function(F){if(F.domEvent.button!==0){this.af();}if(this.bJ){var aJ=this.C.get_points();if(aJ.get_length()>0){aJ.setPoint(aJ.get_length()-1,F.imagePoint);}this.K.dh();}};kC.prototype.nB=function(F){var as=this.K.fb();if(F.windowPoint.x<=0||F.windowPoint.x>=as.width-2){this.af();}if(F.windowPoint.y<=0||F.windowPoint.y>=as.height-2){this.af();}};kC.prototype.lO=function(){this.af();};module.exports=kC;},{}],15:[function(require,module,exports){var eg=function(bC){this.bJ=false;this.K=false;this.bC=bC;switch(this.bC){case IPCC.Web.UI.MarkType.Rectangle:this.bu=IPCC.aa.AddRectangleMark;break;case IPCC.Web.UI.MarkType.Ellipse:this.bu=IPCC.aa.AddEllipseMark;break;case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:this.bu=IPCC.aa.AddTextMark;break;case IPCC.Web.UI.MarkType.Stamp:this.bu=IPCC.aa.AddStampMark;break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:this.bu=IPCC.aa.AddImageStampMark;break;case IPCC.Web.UI.MarkType.RectangleRedaction:this.bu=IPCC.aa.AddRectangleRedactionMark;break;case IPCC.Web.UI.MarkType.Highlight:case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.Strikethrough:this.bu=IPCC.aa.AddRectangleMark;break;}};eg.prototype.mt=function(K){this.K=K;};eg.prototype.ep=function(){this.K=false;};eg.prototype.af=function(){if(this.bJ){this.C=null;this.K.nV(null);this.bJ=false;this.K.dh();}};eg.prototype.rS=function(){this.af();};eg.prototype.lg=function(F){this.af();if(F.domEvent.button===0){this.bJ=true;this.C=new IPCC.Web.UI.Mark(this.bC);this.C.set_rectangle({x:F.imagePoint.x,y:F.imagePoint.y,width:0,height:0});this.K.nV(this.C);this.qb=F.imagePoint;this.oq=F.windowPoint;}};eg.prototype.lA=function(F){if(F.domEvent.button!==0){this.af();}if(this.bJ){var kP={x:Math.min(F.imagePoint.x,this.qb.x),y:Math.min(F.imagePoint.y,this.qb.y)};kP.width=Math.max(F.imagePoint.x,this.qb.x)-kP.x;kP.height=Math.max(F.imagePoint.y,this.qb.y)-kP.y;this.C.set_rectangle(kP);this.K.dh();}};eg.prototype.jW=function(F){if(this.bJ&&F.domEvent.button===0){var eY=F.windowPoint.x-this.oq.x;var gR=eY*eY;eY=F.windowPoint.y-this.oq.y;gR+=eY*eY;if(gR>25){var kP={x:Math.min(F.imagePoint.x,this.qb.x),y:Math.min(F.imagePoint.y,this.qb.y)};kP.width=Math.max(F.imagePoint.x,this.qb.x)-kP.x;kP.height=Math.max(F.imagePoint.y,this.qb.y)-kP.y;this.K.nV(null);this.C.set_rectangle(kP);var aB=this.C;var K=this.K;var oG={clientX:F.domEvent.clientX,clientY:F.domEvent.clientY};this.K.en().addMark(this.C,oG);if(aB.iJ()===IPCC.Web.UI.MarkType.Text||aB.iJ()===IPCC.Web.UI.MarkType.TextLine||aB.iJ()===IPCC.Web.UI.MarkType.TextAreaSignature){K.wI(aB);}K.dh();}}this.af();};eg.prototype.nB=function(F){var as=this.K.fb();if(F.windowPoint.x<=0||F.windowPoint.x>=as.width-2){this.af();}if(F.windowPoint.y<=0||F.windowPoint.y>=as.height-2){this.af();}};eg.prototype.lO=function(){this.af();};module.exports=eg;},{}],16:[function(require,module,exports){var du={};var att=require('./ArtUIDirector');var Pa=require('./ArtSVGUIDirector');du.tx={Jn:function(){var uR=IPCC.du.tx;if(uR.un===null){
/*@cc_on@if(@_jscript)uR.un=document.documentMode>8;@else@*/ uR.un=true;/*@end@*/}return uR.un;},un:null};du.BJ=1;du.dM=att;du.Pa=Pa;module.exports=du;},{"./ArtSVGUIDirector":17,"./ArtUIDirector":18}],17:[function(require,module,exports){var ang=function(){};ang.prototype={arR:function(K,bq,aQ){this.K=K;this.aT=K.aR();this.bq=bq;this.fm=aQ.width;this.ew=aQ.height;this.Gl=aQ.hy;this.aIa=aQ.gW;bq.CC=this.cL('g');this.cJ(bq.CC,{'fill-opacity':1});bq.zf.appendChild(bq.CC);},auO:function(H){var hS='',h,V=this;switch(H.C.get_type()){case IPCC.Web.UI.MarkType.Rectangle:H.bG=this.cL('rect');if(H.C.hL()&&H.C.get_opacity()===255){H.bG.addEventListener("mouseover",function(F){if(H.C.get_selected()===false&&H.bG&&(F.which===0||F.buttons===0)){H.bG.style.opacity=127/255;}},false);H.bG.addEventListener("mouseout",function(F){if(H.bG&&(F.which===0||F.buttons===0)){H.bG.style.opacity=H.C.get_opacity()/255;}},false);}break;case IPCC.Web.UI.MarkType.HighlightText:hS="highlighttextannotation-"+H.C.kL();H.bG=this.cL('g');H.hU=this.cL('g');H.bG.appendChild(H.hU);H.jH=this.cL('g');H.jH.setAttribute('data-pcc-mark',hS);H.bG.appendChild(H.jH);break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:hS="texthyperlinkannotation-"+H.C.kL();H.bG=this.cL('g');H.bG.style.cursor=IPCC.aa.ee(IPCC.aa.Link);H.hU=this.cL('g');H.bG.appendChild(H.hU);H.jH=this.cL('g');H.jH.style.opacity=IPCC.du.dM.aix();H.jH.style.fill="blue";H.jH.setAttribute('data-pcc-mark',hS);H.bG.appendChild(H.jH);H.kA=this.cL('g');H.kA.style.stroke="blue";H.kA.style.opacity=IPCC.du.dM.IB(false);H.kA.setAttribute('data-pcc-mark',hS);H.bG.appendChild(H.kA);H.bG.addEventListener("mouseover",function(F){if(H.kA){H.kA.style.opacity=IPCC.du.dM.IB(true,H.C.get_selected());}},false);H.bG.addEventListener("mouseout",function(F){if(H.kA){H.kA.style.opacity=IPCC.du.dM.IB(false,H.C.get_selected());}},false);break;case IPCC.Web.UI.MarkType.DocumentHyperlink:hS="documenthyperlink-"+H.C.kL();H.bG=this.cL('g');H.bG.style.cursor=IPCC.aa.ee(IPCC.aa.Link);H.h=this.cL('rect');H.h.style['fill-opacity']=IPCC.du.dM.aix();if(H.C.Mc!=='Underline'){H.h.style.stroke=H.C.hY;H.h.style['stroke-width']=H.C.fw+'px';H.h.style['stroke-opacity']=(H.C.fw===0)?0:H.C.qc/255;if(H.C.Mc==='Dashed'){H.h.style['stroke-dasharray']=H.C.Bx.join(', ');}H.h.setAttribute('rx',H.C.Kn);H.h.setAttribute('ry',H.C.JE);}else{H.tF=this.cL('line');H.tF.style.stroke=H.C.hY;H.tF.style['stroke-opacity']=H.C.qc/255;H.tF.style['stroke-width']=H.C.fw+'px';H.bG.appendChild(H.tF);}H.h.style.fill='transparent';H.h.setAttribute('data-pcc-mark',hS);H.bG.appendChild(H.h);break;case IPCC.Web.UI.MarkType.RectangleRedaction:hS="textmark-"+H.C.kL();H.bG=this.cL('g');H.fo=this.cL('rect');H.ga=this.cL('g');H.ga.setAttribute('data-pcc-mark',hS);if(IPCC.J.tG.azq){H.ga.style.cursor='pointer';}H.zR=document.createTextNode('');if(document.documentMode>8||IPCC.J.tG.Ai){H.co=this.cL('text');H.co.setAttribute('data-pcc-mark',hS);H.co.appendChild(H.zR);H.xE=this.cL('clipPath');H.Bi=this.cL('rect');H.ga.appendChild(H.xE);H.xE.appendChild(H.Bi);H.ga.appendChild(H.co);H.JG="PCC"+IPCC.du.BJ;IPCC.du.BJ++;this.cJ(H.xE,{id:H.JG,clipPathUnits:"userSpaceOnUse"});h=H.C.get_rectangle();this.cJ(H.Bi,{x:0,y:0,width:h.width,height:h.height,"data-pcc-mark":hS});var ams=function(F){if(H.C.get_selected()===false&&H.fo&&(F.which===0||F.buttons===0)){if(V.K.ni()===false){H.bG.style.opacity=0.2;H.co.style.opacity=0;}}};H.bG.addEventListener("mouseover",function(F){ams(F);},false);H.ga.addEventListener("mouseover",function(F){ams(F);},false);H.ga.addEventListener("mouseout",function(F){if(H.fo&&(F.which===0||F.buttons===0)){if(V.K.ni()===false){H.bG.style.opacity=1;H.co.style.opacity=1;}}},false);H.bG.addEventListener("mouseout",function(F){if(H.fo&&(F.which===0||F.buttons===0)){if(V.K.ni()===false){H.bG.style.opacity=1;H.co.style.opacity=1;}}},false);}else{H.mx=document.createElement('div');this.cJ(H.mx,{"data-pcc-mark":hS});H.mx.appendChild(H.zR);H.Nf=document.createElement('div');this.cJ(H.Nf,{"data-pcc-mark":hS});H.Nf.appendChild(H.mx);H.vG=document.createElement('body');this.cJ(H.vG,{xmlns:'http://www.w3.org/1999/xhtml',style:'margin:0;overflow:hidden;background-color:transparent;white-space:pre-wrap;all:initial',"data-pcc-mark":hS});H.vG.appendChild(H.Nf);H.Cs=this.cL('foreignObject');H.Cs.appendChild(H.vG);H.ga.appendChild(H.Cs);H.vG.addEventListener("mouseover",function(F){if(H.C.get_selected()===false&&H.fo&&(F.which===0||F.buttons===0)){H.fo.style.opacity=0.2;H.mx.style.opacity=0;}},false);H.vG.addEventListener("mouseout",function(F){if(H.fo&&(F.which===0||F.buttons===0)){if(V.K.ni()===false){H.fo.style.opacity=1;H.mx.style.opacity=1;}}},false);}H.bG.appendChild(H.fo);break;case IPCC.Web.UI.MarkType.Ellipse:H.bG=this.cL('ellipse');break;case IPCC.Web.UI.MarkType.Highlight:H.bG=this.cL('rect');break;case IPCC.Web.UI.MarkType.TextSelectionRedaction:H.bG=this.cL('g');H.hU=H.bG;break;case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:H.bG=this.cL('g');H.rQ=this.cL('polyline');H.Xl=this.cL('path');H.Tk=this.cL('path');H.bG.appendChild(H.rQ);H.bG.appendChild(H.Xl);H.bG.appendChild(H.Tk);H.rQ.setAttribute('stroke-linejoin','miter');H.rQ.setAttribute('stroke-linecap','butt');H.rQ.setAttribute('stroke-miterlimit','4');break;case IPCC.Web.UI.MarkType.Polygon:H.bG=this.cL('polygon');break;case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.TextAreaSignature:hS="textmark-"+H.C.kL();H.bG=this.cL('g');H.Jc=this.cL('polygon');H.rQ=this.cL('path');H.TQ=this.cL('path');H.ga=this.cL('g');H.bG.appendChild(H.Jc);H.bG.appendChild(H.rQ);H.bG.appendChild(H.TQ);this.cJ(H.Jc,{style:'stroke:none;'});H.ga.setAttribute('data-pcc-mark',hS);H.zR=document.createTextNode('');if(document.documentMode>8||IPCC.J.tG.Ai){H.co=this.cL('text');H.co.setAttribute('data-pcc-mark',hS);H.co.appendChild(H.zR);H.xE=this.cL('clipPath');H.Bi=this.cL('rect');H.ga.appendChild(H.xE);H.xE.appendChild(H.Bi);H.aiI=this.cL('g');H.ga.appendChild(H.aiI);H.ga.appendChild(H.co);H.JG="PCC"+IPCC.du.BJ;IPCC.du.BJ++;this.cJ(H.xE,{id:H.JG,clipPathUnits:"userSpaceOnUse"});h=H.C.get_rectangle();this.cJ(H.Bi,{x:0,y:0,width:h.width,height:h.height,"data-pcc-mark":hS});}else{H.mx=document.createElement('div');H.mx.appendChild(H.zR);H.vG=document.createElement('body');this.cJ(H.vG,{xmlns:'http://www.w3.org/1999/xhtml',style:'margin:0;overflow:hidden;background-color:transparent;white-space:pre-wrap;all:initial',"data-pcc-mark":hS});H.vG.appendChild(H.mx);H.Cs=this.cL('foreignObject');H.Cs.appendChild(H.vG);H.ga.appendChild(H.Cs);}H.Jc.setAttribute('data-pcc-mark',hS);break;case IPCC.Web.UI.MarkType.Stamp:H.bG=this.cL('g');H.uy=this.cL('rect');H.uy.style='fill:rgba(255, 255, 255, 0);stroke:none;';H.fo=this.cL('rect');H.Hm=this.Uc(H);H.bG.appendChild(H.uy);H.bG.appendChild(H.fo);H.bG.appendChild(H.Hm);break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:H.bG=this.cL('g');H.uy=this.cL('rect');H.uy.style='fill:rgba(255, 255, 255, 0);stroke:none;';H.fo=this.cL('rect');H.ahT=this.atv(H);H.ahT.setAttribute('data-pcc-mark',"mark-"+H.C.kL());H.bG.appendChild(H.uy);H.bG.appendChild(H.fo);H.bG.appendChild(H.ahT);break;case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.Freehand:var C=H.C;var abO=C.eT();var ap=abO.width;var aM=abO.height;var HK=C.get_pathWidth();var Hx=C.get_pathHeight();var uH=C.get_pathString();var gu=IPCC.J.zs.Path(uH,{width:ap,height:aM,multiplier:100,thickness:C.get_lineWidth(),color:C.get_lineColor()});var dV=IPCC.J.zs.SVG('0 0 '+HK+' '+Hx,100);var ax=IPCC.J.zs.Rect(HK,Hx,'fill:rgba(255, 255, 255, 0);stroke:none;');dV.appendChild(ax);dV.appendChild(gu);H.bG=dV;H.aEw=gu;H.acY=ax;this.aeF(H.bG,C.im);break;case IPCC.Web.UI.MarkType.SignatureText:H.bG=this.cL('g');H.fo=this.cL('rect');H.fo.style='fill:rgba(255, 255, 255, 0);stroke:none;';H.Hm=this.Uc(H);H.bG.appendChild(H.fo);H.bG.appendChild(H.Hm);H.C.il=false;break;case IPCC.Web.UI.MarkType.TextLine:H.bG=this.cL('g');H.fo=this.cL('rect');H.fo.style='fill:rgba(255, 255, 255, 0);stroke:none;';H.Hm=this.Uc(H);H.bG.appendChild(H.fo);H.bG.appendChild(H.Hm);break;case IPCC.Web.UI.MarkType.Strikethrough:hS="strikethroughannotation-"+H.C.kL();H.bG=this.cL('g');H.hU=this.cL('g');H.bG.appendChild(H.hU);H.jH=this.cL('g');H.jH.setAttribute('data-pcc-mark',hS);H.bG.appendChild(H.jH);H.xY=this.cL('g');H.xY.setAttribute('data-pcc-mark',hS);H.bG.appendChild(H.xY);break;}H.bG.ImGearMarkRelation=H;H.bG.setAttribute('data-pcc-mark',"mark-"+H.C.kL());this.bq.CC.appendChild(H.bG);if(H.ga){H.ga.ImGearMarkRelation=H;this.bq.CC.appendChild(H.ga);}this.agM(H);},Uc:function(H){var C=H.C;var Gs=C.aS;if(!Gs){Gs=C.dK[0];if(!Gs){if(C.get_type()===IPCC.Web.UI.MarkType.Stamp){Gs="APPROVED";}else{Gs="";}}}var h=C.eT();H.co=this.cL('text');H.JG="PCC"+IPCC.du.BJ;IPCC.du.BJ++;var nm=document.createTextNode(Gs);H.co.setAttribute("font-size","22px");if(C.get_type()===IPCC.Web.UI.MarkType.TextLine){H.co.setAttribute("style",'white-space:pre;');}switch(H.C.im){case IPCC.Web.UI.HorizontalAlignment.Left:H.co.setAttribute('text-anchor','start');H.co.setAttribute('x',h.x);break;case IPCC.Web.UI.HorizontalAlignment.Right:H.co.setAttribute('text-anchor','end');H.co.setAttribute("x",h.x+h.width);break;default:H.co.setAttribute('text-anchor','middle');H.co.setAttribute("x",h.x+(h.width/2));break;}H.co.setAttribute('y',h.y+(h.height/2));H.co.appendChild(nm);return H.co;},atv:function(H){var C=H.C;H.ajD=document.createElementNS('http://www.w3.org/2000/svg','svg');H.vF=document.createElementNS('http://www.w3.org/2000/svg','image');H.vF.setAttribute('id','childimg');H.vF.setAttributeNS('http://www.w3.org/1999/xlink','href',C.get_image());H.ajD.appendChild(H.vF);return H.ajD;},arY:function(H,im){var C=H.C;var h=C.eT();var aS=C.aS;var JV=aS.split('\n');var co=H.co;var Wp=0;var Xg=0;var XJ=0;var yB=0;var aiN=0;var adL=this.Gl/72;var agI=C.ck*adL;var xP=[];var aAi=/(.*\s)(.*)/;var nm,hO,Lz,CX,_parent,amx,Hn,GP,alm,AO,ahw,BX;amx=co.childNodes.length;if(amx>=1){_parent=co.parentNode;Hn=this.cL('text');Hn.setAttribute('data-pcc-mark',H.ga.getAttribute('data-pcc-mark'));Hn.setAttribute('width',H.ga.getAttribute('width')-H.C.fw);_parent.replaceChild(Hn,co);H.co=Hn;H.co.appendChild(H.zR);H.ga.appendChild(H.co);co={};co=H.co;}co.style.fontSize=C.ck*this.Gl/72+'px';co.style.fontFamily=C.gb;co.width-=4;GP=(C.fw/2);if(im){switch(im){case IPCC.Web.UI.HorizontalAlignment.Center:GP=(h.width/2)-(C.fw/2);break;case IPCC.Web.UI.HorizontalAlignment.Right:GP=h.width-C.fw;break;}}for(var L=0;L<JV.length;L++){AO='';ahw=1;if(JV[L].length>0){Lz=JV[L].split('');hO=this.cL('tspan');hO.setAttributeNS(null,"x",GP);if(L>0){hO.setAttributeNS(null,"dy",agI*(XJ+1));}nm=window.document.createTextNode(Lz[0]);hO.appendChild(nm);co.appendChild(hO);for(var bj=1;bj<Lz.length;bj++){aiN=hO.firstChild.data.length;CX=Lz[bj];hO.firstChild.data+=Lz[bj];AO+=CX;alm=AO.length*(C.ck*adL);Wp=hO.getComputedTextLength();if(Wp===0){Xg=alm;}else{Xg=Wp;}if(Xg>=(h.width-C.fw-2)){ahw++;AO='';BX=hO.firstChild.data.match(aAi);if(BX){CX=BX[2];}if(BX&&BX[1].length>0){hO.firstChild.data=BX[1];AO+=CX;}else{hO.firstChild.data=hO.firstChild.data.slice(0,aiN);AO+=CX;}if(AO.length>=1){xP.push({bf:yB,anm:hO});hO=this.cL('tspan');hO.setAttributeNS(null,"x",GP);hO.setAttributeNS(null,"dy",agI);nm=window.document.createTextNode(CX);hO.appendChild(nm);co.appendChild(hO);}}}if(hO.firstChild.data.length>0){xP.push({bf:yB,anm:hO});}yB+=hO.firstChild.data.length+1;XJ=0;}else{XJ++;}}return xP;},axO:function(kK,ant,hU,yB){if(kK.length>0){var ajR=ant.getNumberOfChars();if(kK[0].bf>yB+ajR){return;}for(var L=Math.max(kK[0].bf-yB,0);L<ajR;L++){var h=ant.getExtentOfChar(L);var ax=this.cL('rect');this.cJ(ax,{x:h.x,y:h.y,width:h.width,height:h.height,fill:kK[0].Bc});hU.appendChild(ax);if(kK[0].dj===L+yB){kK.shift();if(kK.length===0){return;}L=kK[0].bf-yB-1;}}}},DI:function(cB,tU,tL){var gu='M',L;for(L=0;L<tU.length;L++){if(L>0){gu+=' L';}gu+=tU[L].x+','+tU[L].y;}if(tL){gu+='Z';}this.cJ(cB,{d:gu});},UW:function(cB,tU,tL){var Pp='',L;for(L=0;L<tU.length;L++){if(L>0){Pp+=' ';}Pp+=tU[L].x+','+tU[L].y;}if(tL&&tU.length>2){Pp+=' '+tU[0].x+','+tU[0].y;}this.cJ(cB,{points:Pp});},agk:function(gK,ll,zy,sr,zJ,YW,FE){var cs=this.aqh(gK,ll,zy,sr,zJ);var fB='';fB+='stroke:'+YW+';';switch(zJ){case IPCC.Web.UI.LineHeadType.None:fB='display:none;';break;case IPCC.Web.UI.LineHeadType.Pointer:this.DI(FE,[cs.DA,gK,cs.DP],false);break;case IPCC.Web.UI.LineHeadType.Solid:this.DI(FE,[cs.DA,gK,cs.DP],true);fB+='fill:'+YW+';';break;case IPCC.Web.UI.LineHeadType.Open:this.DI(FE,[cs.DA,gK,cs.DP],true);break;case IPCC.Web.UI.LineHeadType.PointerSolid:this.DI(FE,[cs.DA,gK,cs.DP,cs.Kk],true);fB+='fill:'+YW+';';break;}this.cJ(FE,{style:fB});return cs;},anK:function(H){var C=H.C;var aJ,gQ,L,adC,afL,jl='',BD;aJ=C.get_points();gQ=[];for(L=0;L<aJ.get_length();L++){gQ.push(aJ.getPoint(L));}if(gQ.length<2||C.tL){this.cJ(H.Xl,{style:'display:none;'});this.cJ(H.Tk,{style:'display:none;'});}else{C.Cc=C.hY;BD=this.aeU(gQ,true);adC=this.agk(BD.gK,BD.ll,C.HW,C.Hq,C.Ir,C.Cc,H.Xl);BD=this.aeU(gQ,false);afL=this.agk(BD.gK,BD.ll,C.JH,C.KA,C.nt,C.Cc,H.Tk);gQ[0]=adC.Kk;gQ[gQ.length-1]=afL.Kk;}this.UW(H.rQ,gQ,C.tL);var wv=this.Xf(C.jl);if(wv!==''){jl+='stroke-dasharray:'+wv+';';}this.cJ(H.rQ,{style:jl});},agO:function(H){var Fw=this.aro(H);this.UW(H.Jc,Fw.akE,false);var akz='',jl='fill:none;',rs='fill:none;';if(Fw.aax){akz='stroke:none;';}if(Fw.abV){this.DI(H.rQ,Fw.abV,false);}else{jl+='display:none;';}if(Fw.My){this.DI(H.TQ,Fw.My,false);}else{rs+='display:none;';}var C=H.C;if(C.zW){rs+='stroke:'+C.DJ+';stroke-width:'+C.EJ+';';var wv=this.Xf(C.rs);if(wv!==''){rs+='stroke-dasharray:'+wv+';';}}this.cJ(H.rQ,{style:jl});this.cJ(H.TQ,{style:rs});this.cJ(H.Jc,{style:akz});},aai:function(H){var C=H.C,Dc;if(!C){return;}var h=C.eT();var Bd=C.ck*this.Gl/72;C.Bd=Bd;var qY=h.width,oP=h.height,HE=false,eY;var gj,es=0,eo=0;var uk=1;if(C.il){uk+=C.fw/2;}switch(C.yp){case IPCC.Web.UI.Orientation.TopLeft:gj='1,0,0,1';break;case IPCC.Web.UI.Orientation.TopRight:gj='-1,0,0,1';es=qY-uk;break;case IPCC.Web.UI.Orientation.BottomRight:gj='-1,0,0,-1';es=qY-uk;eo=oP-uk;break;case IPCC.Web.UI.Orientation.BottomLeft:gj='1,0,0,-1';eo=oP-uk;break;case IPCC.Web.UI.Orientation.LeftTop:gj='0,1,1,0';HE=true;break;case IPCC.Web.UI.Orientation.RightTop:gj='0,1,-1,0';es=qY-uk;HE=true;break;case IPCC.Web.UI.Orientation.RightBottom:gj='0,-1,-1,0';es=qY-uk;eo=oP-uk;HE=true;break;case IPCC.Web.UI.Orientation.LeftBottom:gj='0,-1,1,0';eo=oP-uk;HE=true;break;}if(C.cP==="#c0c0c0"){C.cP='#ffffff';}if(C.get_type()===IPCC.Web.UI.MarkType.Text){if(C.hL()===true){C.cP='#ffffff';}else{C.set_opacity(C.dg);}}if(HE){eY=qY;qY=oP;oP=eY;}if(qY<0){qY=0;}if(oP<0){oP=0;}var VX='normal';var cV='normal';var pm='';var rM;pm+='word-wrap:break-word;background-color:transparent;line-height:1;';var Ac=0;if(C.qP.length===7&&C.qP.charAt(0)==='#'){Ac=parseInt(C.qP.slice(1),16);}var dg=Math.min(1,Math.max(0,C.xR/255));if(document.documentMode>8||IPCC.J.tG.Ai){cV='normal';if(C.cV&IPCC.Web.UI.FontStyle.Italic){cV='italic';}VX='normal';if(C.cV&IPCC.Web.UI.FontStyle.Bold){VX='bold';}rM='none';if((C.cV&IPCC.Web.UI.FontStyle.Underline)&&(C.cV&IPCC.Web.UI.FontStyle.Strikeout)){rM='underline line-through';}else if(C.cV&IPCC.Web.UI.FontStyle.Underline){rM='underline';}else if(C.cV&IPCC.Web.UI.FontStyle.Strikeout){rM='line-through';}}else{pm+='color:rgba('+(Ac>>16)+','+((Ac>>8)&255)+','+(Ac&255)+','+dg+');';pm+='font-family:'+C.gb+';';pm+='font-size:'+Bd+'px;';if(C.cV&IPCC.Web.UI.FontStyle.Italic){pm+='font-style:italic;';}if(C.cV&IPCC.Web.UI.FontStyle.Bold){pm+='font-weight:bold;';}if((C.cV&IPCC.Web.UI.FontStyle.Underline)&&(C.cV&IPCC.Web.UI.FontStyle.Strikeout)){pm+='text-decoration:underline line-through;';}else if(C.cV&IPCC.Web.UI.FontStyle.Underline){pm+='text-decoration:underline;';}else if(C.cV&IPCC.Web.UI.FontStyle.Strikeout){pm+='text-decoration:line-through;';}}var BL={x:2,anchor:'start'};switch(C.im){case IPCC.Web.UI.HorizontalAlignment.Left:pm+='text-align:left;';break;case IPCC.Web.UI.HorizontalAlignment.Center:pm+='text-align:center;';BL.x=(h.width/2)-3;BL.anchor='middle';break;case IPCC.Web.UI.HorizontalAlignment.Right:pm+='text-align:right;';BL.x=h.width-8;BL.anchor='end';break;default:break;}if(typeof document.documentMode==='undefined'&& !IPCC.J.tG.Ai){switch(C.yi){case IPCC.Web.UI.VerticalAlignment.Center:if(C.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction){this.cJ(H.Nf,{style:'display:table; width: 100%;'});pm+='display: table-cell; white-space: normal; vertical-align: middle; height:'+oP+'px;';}break;case IPCC.Web.UI.VerticalAlignment.Bottom:break;default:break;}this.cJ(H.mx,{style:pm+'padding:2px;'});this.cJ(H.ga,{transform:'matrix('+gj+','+(es+h.x+(C.fw/2))+','+(eo+h.y+(C.fw/2))+')',});this.cJ(H.Cs,{x:0,y:0,width:qY>C.fw?qY-C.fw:qY,height:oP>C.fw?oP-C.fw:oP,});this.aoA(H);}else{var xP=this.arY(H,C.im);var alj=xP.length;switch(C.yi){case IPCC.Web.UI.VerticalAlignment.Center:if(C.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction){Dc=(h.height/2)+(C.ck/4);if(alj>1){Dc-=(alj-1)*(C.ck/2);}if(Dc<0){Dc=C.ck;}}break;case IPCC.Web.UI.VerticalAlignment.Bottom:break;default:break;}this.cJ(H.Bi,{x:0,y:0,width:h.width-C.fw,height:h.height-C.fw});var aqS="url(#"+H.JG+")";var St={x:BL.x,y:(this.Gl/72)*C.ck,width:h.width-C.fw,height:h.height-C.fw,'font-family':C.gb,'font-size':Bd,fill:'rgba('+(Ac>>16)+', '+((Ac>>8)&255)+', '+(Ac&255)+', '+dg+')','font-weight':VX,'font-style':cV,'text-decoration':rM,'text-anchor':BL.anchor};if(typeof Dc!=='undefined'){delete St.y;St.dy=Dc;}this.cJ(H.co,St);H.co.style.opacity=dg;this.cJ(H.ga,{transform:'matrix('+gj+','+(es+h.x+(C.fw/2))+','+(eo+h.y+(C.fw/2))+')','clip-path':aqS});var hU=H.aiI;while(hU&&hU.firstChild){hU.removeChild(hU.firstChild);}if(C.dY){var kK=this.acU(C.dY);for(var L=0;L<xP.length;L++){this.axO(kK,xP[L].anm,hU,xP[L].bf);}}}},abb:function(H){var C=H.C;if(C.ab===null||C.ab===undefined){return;}if(C.ab.length===0&&C.da>0&&this.K.dr().oS()){C.ab=IPCC.J.XV(this.K.dr().gs(),C.bf,C.bf+C.da-1);}if(!H.bf|| !H.da||H.bf!==C.bf||H.da!==C.da||C.cI===false||C.cI===true){while(H.jH.firstChild){H.jH.removeChild(H.jH.firstChild);}if(H.kA){while(H.kA.firstChild){H.kA.removeChild(H.kA.firstChild);}}if(H.xY){while(H.xY.firstChild){H.xY.removeChild(H.xY.firstChild);}}if(C.cI===false){return;}IPCC.J.forEach(H.C.ab,function(hI){var VZ=this.cL('rect');H.jH.appendChild(VZ);this.cJ(VZ,{x:hI.x,y:hI.y,width:hI.width,height:hI.height});if(H.kA){var tF=this.cL('line');this.cJ(tF,{x1:hI.x,y1:hI.y+hI.height-1,x2:hI.x+hI.width,y2:hI.y+hI.height-1,"stroke-width":2});H.kA.appendChild(tF);}if(H.xY){VZ.setAttribute('fill','transparent');var aeH=this.cL('line');var strikethroughY=hI.y+(hI.height/2);this.cJ(aeH,{x1:hI.x,y1:strikethroughY,x2:hI.x+hI.width,y2:strikethroughY,stroke:H.C.hY,"stroke-width":H.C.fw});H.xY.appendChild(aeH);}},this);H.bf=C.bf;H.da=C.da;}},agM:function(H){var C=H.C;if(!C){return;}var bG=H.bG;var h,fB='',aJ,il=true,nI,wU,wG,UF,ql,GA;var jM=false;switch(C.get_type()){case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:jM=true;this.anK(H);break;case IPCC.Web.UI.MarkType.Rectangle:h=C.get_rectangle();this.cJ(bG,{x:h.x,y:h.y,width:h.width,height:h.height});break;case IPCC.Web.UI.MarkType.HighlightText:this.abb(H);H.jH.style.fill=C.cP;H.jH.style.opacity=(C.dg/255);this.Oo(H);break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:this.abb(H);H.jH.style.fill=C.cP;H.kA.style.stroke=C.cP;if(H.C.get_selected()){H.kA.style.opacity=IPCC.du.dM.IB(false,H.C.get_selected());}else{H.kA.style.opacity=IPCC.du.dM.IB(false,H.C.get_selected());}this.Oo(H);break;case IPCC.Web.UI.MarkType.DocumentHyperlink:h=C.get_rectangle();this.cJ(H.h,{x:h.x,y:h.y,width:h.width,height:h.height});if(H.tF){this.cJ(H.tF,{x1:h.x,y1:h.y+h.height,x2:h.x+h.width,y2:h.y+h.height});}break;case IPCC.Web.UI.MarkType.RectangleRedaction:if(typeof H.fo!=='undefined'){if(this.K.ni()===true){H.fo.style.opacity=0.2;if(typeof H.mx!=='undefined'){H.mx.style.opacity=0.8;}else{H.co.style.opacity=0.8;}}else{H.fo.style.opacity=1;if(typeof H.mx!=='undefined'){H.mx.style.opacity=1;}}}h=C.get_rectangle();this.cJ(bG,{x:h.x,y:h.y,width:h.width,height:h.height});this.cJ(H.fo,{x:h.x,y:h.y,width:h.width,height:h.height});if(this.K.ni()===false){this.aai(H);}break;case IPCC.Web.UI.MarkType.Ellipse:h=C.get_rectangle();this.cJ(bG,{cx:h.x+h.width/2,cy:h.y+h.height/2,rx:h.width/2,ry:h.height/2});break;case IPCC.Web.UI.MarkType.Polygon:aJ=this.SD(C);this.UW(bG,aJ,false);fB+='fill-rule:evenodd;';break;case IPCC.Web.UI.MarkType.Text:this.agO(H);this.aai(H);break;case IPCC.Web.UI.MarkType.TextAreaSignature:var ct=IPCC.J.ahu();var pI=IPCC.J.aiS();pI.nodeValue=C.get_text();var fg=C.fg;var bo=this.K.nZ().jp();h=C.get_rectangle();ct.style.width=(h.width-C.fw/2)+'px';ct.style.height=(h.height-C.fw/2)+'px';ct.style.fontFamily=C.gb;ct.style.padding='2px';ct.style.fontStyle=C.cV;C.ck=IPCC.J.UO(ct,fg,bo)*72/this.Gl;this.agO(H);this.aai(H);break;case IPCC.Web.UI.MarkType.Stamp:h=C.get_rectangle();this.cJ(bG,{x:h.x,y:h.y,width:h.width,height:h.height});this.cJ(H.uy,{x:h.x,y:h.y,width:h.width,height:h.height,'stroke':'none','fill':'rgba(255, 255, 255, 0)'});H.uy.style.opacity=1;this.cJ(H.fo,{x:h.x,y:h.y,width:h.width,height:h.height,'stroke':C.cP,'stroke-width':'5','fill':'none','rx':10,'ry':10});var textFontSize=(h.width/6);if(textFontSize>h.height){textFontSize=(h.height-(h.height/6));}nI=H.C.get_text();if(!nI){nI='APPROVED';}H.co.childNodes[0].data=nI;var sg=nI.length*textFontSize;if(sg>h.width){textFontSize=((h.width/nI.length));}GA=Math.round(textFontSize);C.stampSize=GA.toString();this.cJ(H.co,{x:h.x+(h.width/2),y:h.y+(h.height/2+(textFontSize/3)),'font-size':textFontSize,'stroke':C.cP,'font-family':"Arial"});break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:h=C.get_rectangle();this.cJ(bG,{x:h.x,y:h.y,width:h.width,height:h.height});this.cJ(H.uy,{x:h.x,y:h.y,width:h.width,height:h.height,'stroke':'none','fill':'rgba(255, 255, 255, 0)'});H.uy.style.opacity=1;this.cJ(H.fo,{x:h.x,y:h.y,width:h.width,height:h.height,'stroke':C.cP,'stroke-width':'0','fill':'none'});H.vF.setAttribute('height',h.height);H.vF.setAttribute('width',h.width);H.vF.setAttribute('x',h.x);H.vF.setAttribute('y',h.y);H.vF.setAttributeNS('http://www.w3.org/1999/xlink','href',C.get_image());break;case IPCC.Web.UI.MarkType.TextSelectionRedaction:this.Oo(H);break;case IPCC.Web.UI.MarkType.Highlight:h=C.get_rectangle();if(h.x===0&&h.y===0){var gP=this.K.dr().gs();if(gP.ej()>0){var eU=gP.kI(C.bf);h=eU.aL;}C.ib='y';}this.cJ(bG,{x:h.x,y:h.y,width:h.width,height:h.height});break;case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.Freehand:h=C.get_rectangle();this.cJ(bG,{x:h.x,y:h.y,width:h.width,height:h.height});var Qd=H.aEw;if(C.ana===true){C.ana=false;Qd.setAttribute("d",C.get_pathString());var HK=C.get_pathWidth();var Hx=C.get_pathHeight();bG.setAttribute('viewBox','0 0 '+HK+' '+Hx);H.acY.setAttribute('width',HK);H.acY.setAttribute('height',Hx);}if(C.get_visible()){H.bG.style.display='block';}else{H.bG.style.display='none';}this.aeF(H.bG,C.im);Qd.style.stroke=C.get_lineColor();Qd.style.strokeWidth=C.get_lineWidth()+'px';Qd.style.opacity=C.get_opacity()/255;break;case IPCC.Web.UI.MarkType.SignatureText:h=C.get_rectangle();this.cJ(bG,{x:h.x,y:h.y,width:h.width,height:h.height});this.cJ(H.fo,{x:h.x,y:h.y,width:h.width,height:h.height,'stroke':'none','fill':'rgba(255, 255, 255, 0)'});H.fo.style.opacity=1;var atp=H.C.get_text()||"";H.co.childNodes[0].data=atp;wU=12*h.width/(C.zp||1);wG=12*h.height/(C.Az||1);ql=Math.min(wU,wG);var ate=Math.floor(ql);C.stampSize=ate.toString();switch(C.im){case IPCC.Web.UI.HorizontalAlignment.Left:H.co.setAttribute('text-anchor','start');H.co.setAttribute('x',h.x);break;case IPCC.Web.UI.HorizontalAlignment.Right:H.co.setAttribute('text-anchor','end');H.co.setAttribute("x",h.x+h.width);break;default:H.co.setAttribute('text-anchor','middle');H.co.setAttribute("x",h.x+(h.width/2));break;}this.cJ(H.co,{y:h.y+(h.height/2+(ql/3)),'font-size':ql,'stroke':"none",'fill':C.get_fillColor(),'font-family':C.get_fontName()});if(C.get_visible()){H.bG.style.display='block';}else{H.bG.style.display='none';}break;case IPCC.Web.UI.MarkType.TextLine:this.cJ(bG,{style:'fill:none;opacity:1;'+C.cI?'display:block;':'display:none;'});h=C.get_rectangle();this.cJ(bG,{x:h.x,y:h.y,width:h.width,height:h.height});fB='stroke:'+(C.il?'black':'none')+';stroke-width:1;';this.cJ(H.fo,{x:h.x,y:h.y,width:h.width,height:h.height,'stroke':C.il?'black':'none','fill':'rgba(255, 255, 255, 0)','style':fB});H.co.style.opacity=1;nI=H.C.get_text()||"";H.co.childNodes[0].data=nI;UF=IPCC.J.aiJ(nI,C.get_fontName(),h.width,h.height,{tK:"pre",dV:H.bG});ql=UF.fontSize;if(C.fg){ql=Math.min(ql,C.fg);}C.Bd=ql;C.stampSize=ql;C.HG=true;C.pd=UF;switch(C.im){case IPCC.Web.UI.HorizontalAlignment.Center:H.co.setAttribute('text-anchor','middle');H.co.setAttribute("x",h.x+(h.width/2));break;case IPCC.Web.UI.HorizontalAlignment.Right:H.co.setAttribute('text-anchor','end');H.co.setAttribute("x",h.x+h.width);break;default:H.co.setAttribute('text-anchor','start');H.co.setAttribute('x',h.x);break;}this.cJ(H.co,{y:h.y+(h.height/2+(ql/3)),'font-size':ql,'stroke':"none",'fill':C.get_textColor(),'font-family':C.get_fontName(),'white-space':'pre'});if(C.cP!=='transparent'){H.fo.style.fill=C.cP;}if(C.dg<255){H.fo.style.opacity=C.dg/255;}if(C.hY!=='transparent'){H.fo.style.stroke=C.hY;H.fo.style.strokeWidth=C.fw;}break;case IPCC.Web.UI.MarkType.Strikethrough:this.abb(H);this.Oo(H);break;default:throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('type',C.get_type());}if(C.get_type()!==IPCC.Web.UI.MarkType.SignaturePath&&C.get_type()!==IPCC.Web.UI.MarkType.Freehand&&C.get_type()!==IPCC.Web.UI.MarkType.SignatureText&&C.get_type()!==IPCC.Web.UI.MarkType.HighlightText&&C.get_type()!==IPCC.Web.UI.MarkType.TextHyperlinkAnnotation&&C.get_type()!==IPCC.Web.UI.MarkType.DocumentHyperlink&&C.get_type()!==IPCC.Web.UI.MarkType.Strikethrough&&C.get_type()!==IPCC.Web.UI.MarkType.TextSelectionRedaction){if(jM){fB+='fill:none;';}else{if(C.KB){fB+='fill:'+C.cP+';';}else{fB+='fill:none;';}il=C.il;var wv=this.Xf(C.jl);if(wv!==''){fB+='stroke-dasharray:'+wv+';';}}if(il){fB+='stroke:'+C.get_lineColor()+';';fB+='stroke-width:'+C.fw+';';}else{fB+='stroke:none;';}if(C.get_type()===IPCC.Web.UI.MarkType.SignatureText||C.get_type()===IPCC.Web.UI.MarkType.TextLine){fB+='opacity:'+1+';';}else{fB+='opacity:'+(C.dg/255)+';';}if(!C.cI){fB+='display:none;';if(H.ga){H.ga.style.display='none';}}else{if(H.ga){H.ga.style.display='block';}}this.cJ(bG,{style:fB});}if(C.get_type()===IPCC.Web.UI.MarkType.Freehand){if(!C.cI){fB+='display:none;';}else{fB+='display:block;';}this.cJ(bG,{style:fB});}var bu;if(!this.K.get_areMarksEditable()){bu=this.K.get_cursor();}else if(C.lk===IPCC.Web.UI.MarkInteractionMode.SelectionDisabled&&C.get_type()!==IPCC.Web.UI.MarkType.TextHyperlinkAnnotation&&C.get_type()!==IPCC.Web.UI.MarkType.DocumentHyperlink){bu='default';}else if(C.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||C.get_type()===IPCC.Web.UI.MarkType.DocumentHyperlink){bu=IPCC.aa.Link;}else if(C.get_type()!==IPCC.Web.UI.MarkType.Highlight&&C.get_type()!==IPCC.Web.UI.MarkType.HighlightText&&C.get_type()!==IPCC.Web.UI.MarkType.Strikethrough&&C.get_type()!==IPCC.Web.UI.MarkType.TextSelectionRedaction&& !(C.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&C.aX)){bu=IPCC.aa.Move;}else{bu=IPCC.aa.Arrow;}bG.style.cursor=IPCC.aa.ee(bu);if(H.ga){H.ga.style.cursor=IPCC.aa.ee(bu);}},aeF:function(bG,Gb){switch(Gb){case IPCC.Web.UI.HorizontalAlignment.Left:bG.setAttribute('preserveAspectRatio','xMinYMid');break;case IPCC.Web.UI.HorizontalAlignment.Center:bG.setAttribute('preserveAspectRatio','xMidYMid');break;case IPCC.Web.UI.HorizontalAlignment.Right:bG.setAttribute('preserveAspectRatio','xMaxYMid');break;}},Oo:function(H){var C=H.C,azd=C.get_visible();var h=C.get_rectangle();if(h.x===0&&h.y===0){return;}var hU=H.hU;while(hU.firstChild){hU.removeChild(hU.firstChild);}var iU;for(var L=0;L<C.dY.length;L++){for(var bj=0;bj<C.dY[L].length;bj++){var anq=this.K.dr().gs();if(anq.ej()>0){var aqa=anq.kI(C.dY[L].startIndex+bj);iU=aqa.aL;}var ax=this.cL('rect');this.cJ(ax,{x:iU.x,y:iU.y,width:iU.width,height:iU.height,fill:C.dY[L].color,display:(azd)?'block':'none'});ax.style.opacity=(C.dY[L].opacity)?(C.dY[L].opacity)/255.0:0.5;hU.appendChild(ax);}}},Xf:function(jl){switch(jl){case IPCC.Web.UI.LineStyle.Dash:return '7,7';case IPCC.Web.UI.LineStyle.Dot:return '1,7';case IPCC.Web.UI.LineStyle.DashDot:return '7,7,1,7';case IPCC.Web.UI.LineStyle.DashDotDot:return '7,7,1,7,1,7';default:break;}return '';},MK:function(H){if(H.bG){this.bq.CC.removeChild(H.bG);}if(H.ga){this.bq.CC.removeChild(H.ga);}delete H.bG;},aHV:function(){},aCA:function(){this.bq=undefined;},cL:function(bg){return document.createElementNS('http://www.w3.org/2000/svg',bg);},cJ:function(bG,ah){var L;for(L in ah){if(ah.hasOwnProperty(L)){var attr=ah[L];bG.setAttribute(L,attr!==undefined&&attr!==null?attr.toString():'');}}}};module.exports=ang;},{}],18:[function(require,module,exports){var Pa=require('./ArtSVGUIDirector');var dM=Pa;dM.IB=function(isMouseOver,isSelected){return(isSelected?127:(isMouseOver?127:63))/255;};dM.aix=function(){return 39/255;};dM.aFx=function(isSelected){return isSelected?"purple":"blue";};dM.prototype.aqh=function(gK,ll,zy,sr,zJ){var cs={gK:gK,ll:ll,zy:zy,sr:sr,zJ:zJ};if(gK.x===ll.x&&gK.y===ll.y){cs.zJ=IPCC.Web.UI.LineHeadType.None;}var Oc=Math.atan2(gK.x-ll.x,-(gK.y-ll.y))+Math.PI/2;zy*=Math.PI/180;var ip=Oc+zy;cs.DA={x:gK.x+Math.cos(ip)*sr,y:gK.y+Math.sin(ip)*sr};ip=Oc-zy;cs.DP={x:gK.x+Math.cos(ip)*sr,y:gK.y+Math.sin(ip)*sr};switch(cs.zJ){case IPCC.Web.UI.LineHeadType.Solid:case IPCC.Web.UI.LineHeadType.Open:cs.Kk={x:(cs.DA.x+cs.DP.x)/2,y:(cs.DA.y+cs.DP.y)/2};break;case IPCC.Web.UI.LineHeadType.PointerSolid:cs.Kk={x:gK.x+Math.cos(Oc)*sr/2,y:gK.y+Math.sin(Oc)*sr/2};break;default:cs.Kk=gK;break;}return cs;};dM.prototype.aro=function(H){var C=H.C;var h=C.get_rectangle();var HH={x:C.mF.x+h.x+0.00001,y:C.mF.y+h.y+0.00001};var av={};var fS=[{x:h.x,y:h.y},{x:h.x+h.width,y:h.y},{x:h.x+h.width,y:h.y+h.height},{x:h.x,y:h.y+h.height}];if(!C.xe){av.akE=fS;av.aax= !C.il;return av;}var L,agx=[];for(L=0;L<4;L++){agx.push({x:(fS[L].x+fS[(L+3)%4].x)/2,y:(fS[L].y+fS[(L+3)%4].y)/2,azK:true});}for(L=3;L>=0;L--){fS.splice(L,0,agx[L]);}function akr(Lb){var xL,aaC;xL=(HH.x-(fS[Lb].x+fS[(Lb+1)%8].x)/2)*h.height;aaC=xL*xL;xL=(HH.y-(fS[Lb].y+fS[(Lb+1)%8].y)/2)*h.width;return aaC+xL*xL;};var Vt=0,amb=akr(0),gR;for(L=1;L<8;L++){gR=akr(L);if(gR<amb){amb=gR;Vt=L;}}fS=fS.slice(Vt+1).concat(fS.slice(0,Vt+1));var DH=fS[0],Dm=fS[7];for(L=fS.length-1;L>=0;L--){if(fS[L].azK){fS.splice(L,1);}}switch(C.Co){case IPCC.Web.UI.CalloutType.Triangle:fS.splice(0,0,{x:(DH.x*3+Dm.x)/4,y:(DH.y*3+Dm.y)/4});fS.push({x:(DH.x+Dm.x*3)/4,y:(DH.y+Dm.y*3)/4});if(C.zW){av.aax=true;av.abV=[].concat(fS);av.My=[fS[0],HH,fS[fS.length-1]];}fS.push(HH);break;default:case IPCC.Web.UI.CalloutType.Line:av.My=[{x:(DH.x+Dm.x)/2,y:(DH.y+Dm.y)/2},HH];break;}av.akE=fS;if(!C.il){av.aax=true;delete av.abV;delete av.My;}return av;};dM.prototype.SD=function(C){var aJ=C.get_points();var gQ=[],L;for(L=0;L<aJ.get_length();L++){gQ.push(aJ.getPoint(L));}return gQ;};dM.prototype.aeU=function(gQ,axt){var aD=0,QO=1,aeE=gQ.length-2,gK,ll;if(!axt){aD=gQ.length-1;QO= -1;}gK=gQ[aD];aD+=QO;ll=gQ[aD];aD+=QO;while(gK.x===ll.x&&gK.y===ll.y&&aeE>0){ll=gQ[aD];aD+=QO;aeE--;}return{gK:gK,ll:ll};};dM.prototype.ahH=function(K,bq,an,kT){if(IPCC.J.Ye){return;}if(!bq.mQ){bq.mQ=[];}var mQ=bq.mQ;if(an.length<1&&mQ.length<1){if(bq.AI.firstChild){bq.AI.innerHTML='';}return;}var aY=K.en();var eW=aY.Cd();if(this.gI===undefined){this.gI=40;var zV=document.createElement("div");zV.className='pccMarkHandleTopLeft';zV.visibility='hidden';document.body.appendChild(zV);if(zV.currentStyle){this.gI=parseInt(zV.currentStyle.width,10)||0;}else if(document.defaultView&&document.defaultView.getComputedStyle){var axL=document.defaultView.getComputedStyle(zV);this.gI=parseInt(axL.width,10)||0;}document.body.removeChild(zV);}var L,Gd=[];for(L=0;L<an.length;L++){if(an[L].get_visible()===true){if(eW.FR(an[L])>=0||(an[L].get_selected()===true&&(an[L].kJ===true||an[L].kB===true))||an[L].wq===true){Gd.push(an[L]);}}}for(L=0;L<mQ.length;L++){while(L<mQ.length&&(L>=Gd.length||mQ[L].C!==Gd[L])){bq.AI.removeChild(mQ[L].hC);mQ.splice(L,1);}if(L<mQ.length){this.agd(mQ[L],kT);}}for(L=mQ.length;L<Gd.length;L++){mQ[L]={C:Gd[L]};this.asL(bq.AI,mQ[L]);this.agd(mQ[L],kT);}};dM.prototype.xd=function(hC,asJ,Cp,um,awh,bu,ds){var df=[],L,dc;if(ds===undefined){ds='handle';}for(L=0;L<asJ;L++){dc={bG:document.createElement('div')};dc.bG.ImGearMarkHandle=dc;dc.bu=bu;dc.bg=um;dc.aD=awh+L;hC.appendChild(dc.bG);dc.bG.setAttribute('data-pcc-mark',ds+'-'+hC.ImGearMarkRelation.C.kL());df.push(dc);}return df;};dM.prototype.anG=function(cd){if(cd.df===undefined||this.K.get_areMarksEditable()===false){return;}var L;for(L=0;L<cd.df.length;L++){var dc=cd.df[L];dc.bG.style.cursor=IPCC.aa.ee(dc.bu);}};dM.prototype.asL=function(AI,cd){cd.hC=document.createElement('div');cd.hC.style.width='0px';cd.hC.style.height='0px';cd.hC.style.left='0px';cd.hC.style.top='0px';cd.hC.style.zIndex='1';var L,C=cd.C,dc;cd.hC.ImGearMarkRelation=cd;switch(C.get_type()){case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:cd.df=this.xd(cd.hC,2,this.gI,this.JI,0,IPCC.aa.Move);cd.df=cd.df.concat(this.xd(cd.hC,2,this.gI,this.Go,0,IPCC.aa.Move));break;case IPCC.Web.UI.MarkType.Polygon:cd.df=[];break;case IPCC.Web.UI.MarkType.Freehand:cd.df=[];cd.jC=document.createElement('div');cd.jC.style.border='1px solid gray';cd.jC.style.position='absolute';cd.hC.appendChild(cd.jC);break;case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.SignatureText:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Ellipse:case IPCC.Web.UI.MarkType.Highlight:case IPCC.Web.UI.MarkType.Stamp:case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:if(C.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&C.aX!==undefined){break;}cd.jC=document.createElement('div');cd.jC.style.border='1px solid gray';cd.jC.style.position='absolute';cd.hC.appendChild(cd.jC);cd.df=this.xd(cd.hC,4,this.gI,this.YK,0,-1);cd.df=cd.df.concat(this.xd(cd.hC,4,this.gI,this.Zi,0,-1));for(L=4;L<8;L++){dc=cd.df[L];dc.auK=cd.df[L-4];dc.atQ=cd.df[(L+1)%4];}if(C.get_type()===IPCC.Web.UI.MarkType.Text){cd.df=cd.df.concat(this.xd(cd.hC,1,this.gI,this.ST,0,IPCC.aa.Move));}break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.Strikethrough:cd.df=this.xd(cd.hC,1,this.gI,this.JI,0,IPCC.aa.Move,'texthandlestart');cd.df=cd.df.concat(this.xd(cd.hC,1,this.gI,this.JI,1,IPCC.aa.Move,'texthandleend'));break;}if(C.get_interactionMode()!==IPCC.Web.UI.MarkInteractionMode.TextEditingDisabled&&(C.iJ()===IPCC.Web.UI.MarkType.Text||C.iJ()===IPCC.Web.UI.MarkType.TextLine||C.iJ()===IPCC.Web.UI.MarkType.TextAreaSignature)){var oO=document.createElement('div');oO.className='pccEditMarkButton';oO.setAttribute('data-pcc-mark','edit-'+C.kL());oO.onclick=function(ar){ar=ar||{};ar.stopPropagation?ar.stopPropagation():ar.cancelBubble=true;ar.preventDefault?ar.preventDefault():ar.returnValue=false;var nU;var wB=cd.hC;while(wB&&(wB.parentNode||wB.ownerSVGElement)){if(wB.parentNode.id&&wB.parentNode.id.indexOf("__pViewId")!== -1){nU=wB.parentNode;}wB=wB.ownerSVGElement||wB.parentNode;}nU&&nU.bH.aEZ(ar,C);};cd.hC.appendChild(oO);var aEs={bG:oO};cd.df.push(aEs);}AI.appendChild(cd.hC);};dM.kZ={TopLeft:0,TopRight:1,BottomLeft:2,BottomRight:3,TopCenter:4,MidRight:5,BottomCenter:6,MidLeft:7,Point:8,TextSelectionStart:9,TextSelectionEnd:10,Callout:11};dM.prototype.YK=0;dM.prototype.Zi=1;dM.prototype.Go=2;dM.prototype.JI=3;dM.prototype.ST=4;dM.prototype.alx=function(dc,ayn){switch(ayn){case IPCC.du.dM.kZ.TopLeft:dc.bG.className='pccMarkHandleTopLeft';break;case IPCC.du.dM.kZ.TopCenter:dc.bG.className='pccMarkHandleTopCenter';break;case IPCC.du.dM.kZ.TopRight:dc.bG.className='pccMarkHandleTopRight';break;case IPCC.du.dM.kZ.MidLeft:dc.bG.className='pccMarkHandleMidLeft';break;case IPCC.du.dM.kZ.MidRight:dc.bG.className='pccMarkHandleMidRight';break;case IPCC.du.dM.kZ.BottomLeft:dc.bG.className='pccMarkHandleBottomLeft';break;case IPCC.du.dM.kZ.BottomCenter:dc.bG.className='pccMarkHandleBottomCenter';break;case IPCC.du.dM.kZ.BottomRight:dc.bG.className='pccMarkHandleBottomRight';break;case IPCC.du.dM.kZ.Point:dc.bG.className='pccMarkHandlePoint';break;case IPCC.du.dM.kZ.TextSelectionStart:dc.bG.className='pccMarkHandleTextSelectionStart';break;case IPCC.du.dM.kZ.TextSelectionEnd:dc.bG.className='pccMarkHandleTextSelectionEnd';break;default:dc.bG.className='pccMarkHandlePoint';break;}};dM.prototype.zT=function(dc,aDp,kT,Cp,lW){dc.bx=kT.transform(aDp);dc.bG.style.left=(dc.bx.x-Cp/2)+'px';dc.bG.style.top=(dc.bx.y-Cp/2)+'px';dc.bG.style.display='block';dc.bG.style.zIndex='1';this.alx(dc,lW);};dM.prototype.aat=function(dc,Cp,lW){dc.bG.style.left=(dc.bx.x-Cp/2)+'px';dc.bG.style.top=(dc.bx.y-Cp/2)+'px';dc.bG.style.display='block';dc.bG.style.zIndex='1';this.alx(dc,lW);};dM.prototype.sO=function(dc){dc.bG.style.display='none';};dM.prototype.agd=function(cd,kT){if(this.K.get_areMarksEditable()===true){cd.hC.style.cursor='move';}var L,C=cd.C,df=cd.df,dc;var gQ,h,pV,ko,um,fL;var gR,CV,es,eo,KM;switch(C.get_type()){case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:gQ=this.SD(C);CV=gQ.length+2-df.length;if(CV>0){cd.df=cd.df.concat(this.xd(cd.hC,CV,this.gI,this.Go,df.length-2,IPCC.aa.Move));df=cd.df;}for(L=0;L<gQ.length;L++){this.zT(df[L+2],gQ[L],kT,this.gI,IPCC.du.dM.kZ.Point);}for(L=gQ.length+2;L<df.length;L++){this.sO(df[L+2]);}break;case IPCC.Web.UI.MarkType.Polygon:gQ=this.SD(C);CV=gQ.length-df.length;if(CV>0){cd.df=cd.df.concat(this.xd(cd.hC,CV,this.gI,this.Go,df.length,IPCC.aa.Move));df=cd.df;}for(L=0;L<gQ.length;L++){this.zT(df[L],gQ[L],kT,this.gI,IPCC.du.dM.kZ.Point);}for(L=gQ.length;L<df.length;L++){this.sO(df[L]);}break;case IPCC.Web.UI.MarkType.Freehand:h=C.eT();pV=kT.transform({x:h.x,y:h.y});ko=kT.transform({x:h.x+h.width,y:h.y+h.height});fL={x:Math.min(pV.x,ko.x),y:Math.min(pV.y,ko.y)};fL.width=Math.max(pV.x,ko.x)-fL.x;fL.height=Math.max(pV.y,ko.y)-fL.y;cd.jC.style.left=fL.x+'px';cd.jC.style.top=fL.y+'px';cd.jC.style.width=fL.width+'px';cd.jC.style.height=fL.height+'px';cd.jC.setAttribute('data-pcc-mark','outline-'+C.kL());break;case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Ellipse:case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.Stamp:case IPCC.Web.UI.MarkType.SignatureText:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:if(C.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&C.aX!==undefined){break;}h=C.eT();df[0].bx=kT.transform({x:h.x,y:h.y});df[1].bx=kT.transform({x:h.x+h.width,y:h.y});df[2].bx=kT.transform({x:h.x+h.width,y:h.y+h.height});df[3].bx=kT.transform({x:h.x,y:h.y+h.height});fL={x:Math.min(df[0].bx.x,df[2].bx.x),y:Math.min(df[0].bx.y,df[2].bx.y)};fL.width=Math.max(df[0].bx.x,df[2].bx.x)-fL.x;fL.height=Math.max(df[0].bx.y,df[2].bx.y)-fL.y;KM={x:fL.x+fL.width/2,y:fL.y+fL.height/2};for(L=0;L<4;L++){dc=df[L];um=(dc.bx.x<KM.x)?((dc.bx.y<KM.y)?0:2):((dc.bx.y<KM.y)?1:3);this.aat(dc,this.gI,um);switch(um){case 0:dc.bu=IPCC.aa.ResizeNW;break;case 1:dc.bu=IPCC.aa.ResizeNE;break;case 2:dc.bu=IPCC.aa.ResizeSW;break;case 3:dc.bu=IPCC.aa.ResizeSE;break;}}cd.jC.style.left=fL.x+'px';cd.jC.style.top=fL.y+'px';cd.jC.style.width=fL.width+'px';cd.jC.style.height=fL.height+'px';cd.jC.setAttribute('data-pcc-mark','outline-'+C.kL());var avO=fL.x+fL.width/4;var aqK=fL.x+fL.width*3/4;var axa=fL.y+fL.height/4;var apB=fL.y+fL.height*3/4;if(this.aT.AE()===IPCC.Web.UI.MarkHandleMode.HideCornerHandlesWhenClose){pV=df[0].bx;ko=df[1].bx;var aEv=df[2].bx;es=pV.x-ko.x;eo=ko.y-aEv.y;var asg=es*es;var asy=eo*eo;if(Math.min(asg,asy)<this.gI*this.gI*5){this.sO(df[0]);this.sO(df[1]);this.sO(df[2]);this.sO(df[3]);}}for(L=4;L<8;L++){dc=df[L];pV=dc.auK.bx;ko=dc.atQ.bx;es=pV.x-ko.x;eo=pV.y-ko.y;gR=es*es+eo*eo;if(this.aT.AE()===IPCC.Web.UI.MarkHandleMode.HideSideHandlesWhenClose&&gR<this.gI*this.gI*5){this.sO(dc);}else{dc.bx={x:(pV.x+ko.x)/2,y:(pV.y+ko.y)/2};this.aat(dc,this.gI,L);if(dc.bx.x<avO){dc.bu=IPCC.aa.ResizeW;}else if(dc.bx.x>aqK){dc.bu=IPCC.aa.ResizeE;}else if(dc.bx.y<axa){dc.bu=IPCC.aa.ResizeN;}else if(dc.bx.y>apB){dc.bu=IPCC.aa.ResizeS;}}}if(C.get_type()===IPCC.Web.UI.MarkType.Text){if(C.xe){this.zT(df[8],{x:h.x+C.mF.x,y:h.y+C.mF.y},kT,this.gI,IPCC.du.dM.kZ.Callout);}else{this.sO(df[8]);}}break;case IPCC.Web.UI.MarkType.DocumentHyperlink:return;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.Strikethrough:cd.hC.style.cursor='move';var eU,iU,wo;var BA=this.K.dr();var gP=BA.gs();if(C.kJ===true){wo=C.bf;if(wo>=gP.ej()){eU=gP.kI(gP.ej()-1);iU=eU.rR();this.zT(df[0],new IPCC.Web.UI.Point(iU.x+iU.width,iU.y),kT,this.gI,IPCC.du.dM.kZ.TextSelectionStart);break;}eU=gP.kI(C.bf);iU=eU.rR();this.zT(df[0],new IPCC.Web.UI.Point(iU.x,iU.y),kT,this.gI,IPCC.du.dM.kZ.TextSelectionStart);}else{this.sO(df[0]);}if(C.kB===true){wo=C.bf+C.da-1;if(wo<0){eU=gP.kI(0);iU=eU.rR();this.zT(df[1],new IPCC.Web.UI.Point(iU.x,iU.y+iU.height),kT,this.gI,IPCC.du.dM.kZ.TextSelectionEnd);break;}eU=gP.kI(wo);iU=eU.rR();this.zT(df[1],new IPCC.Web.UI.Point(iU.x+iU.width,iU.y+iU.height),kT,this.gI,IPCC.du.dM.kZ.TextSelectionEnd);}else{this.sO(df[1]);}break;}if(C.get_interactionMode()!==IPCC.Web.UI.MarkInteractionMode.TextEditingDisabled&&(C.get_type()===IPCC.Web.UI.MarkType.Text||C.get_type()===IPCC.Web.UI.MarkType.TextLine||C.get_type()===IPCC.Web.UI.MarkType.TextAreaSignature)){var uD=df[df.length-1];if(uD.bG.className.match(/pcc/)){var SY=cd.jC.clientHeight;var ZW=cd.jC.clientWidth;var anr=cd.jC.offsetTop;var amG=cd.jC.offsetLeft;var aka=uD.bG.clientHeight;var TF=uD.bG.clientWidth;uD.bG.style.position='absolute';uD.bG.style.zIndex='2';if(SY>aka+10&&ZW>TF+10){uD.bG.style.top=(SY-aka)/2+anr+'px';uD.bG.style.left=(ZW-TF)/2+amG+'px';}else{uD.bG.style.top=SY+anr+10+'px';uD.bG.style.left=(ZW-TF)/2+amG+'px';}}}this.anG(cd);};dM.prototype.acU=function(gV,tE){var aCq=IPCC.J.acu(gV,tE||'#ffffff'),aBL=IPCC.J.map(aCq,function(au){return{bf:au.startIndex,dj:au.endIndex,Bc:au.color};});return aBL;};dM.prototype.aoA=function(H){var C=H.C;if(C.dY){var kK=this.acU(C.dY);var EF=C.aS;var Bj='';for(var L=kK.length-1;L>=0;L--){var Wg=kK[L];var bf=Wg.bf;var dj=Wg.dj;var dR=Wg.Bc;var cO=IPCC.J.Ig(EF.substr(bf,dj-bf+1));var arX=IPCC.J.Ig(EF.substr(dj+1,EF.length-dj+1));EF=EF.substr(0,bf);Bj="<span style='background-color:"+dR+";'>"+cO+'</span>'+arX+Bj;}Bj=IPCC.J.Ig(EF)+Bj;Bj=Bj.replace(/\n/g,'<br/>');H.mx.innerHTML=Bj;}else{H.zR.data=C.aS;}};module.exports=dM;},{"./ArtSVGUIDirector":17}],19:[function(require,module,exports){var tx={Jn:function(){var uR=IPCC.tx;if(uR.un===null){
/*@cc_on@if(@_jscript)uR.un=document.documentMode>8;@else@*/ uR.un=true;/*@end@*/}return uR.un;},un:null};module.exports=tx;},{}],20:[function(require,module,exports){var ei=function(Vh,avG){this.K=false;this.Vh=Vh;var kF=IPCC.Web.UI;var bV=avG;if(!bV||bV===null){bV=IPCC.afI;}this.bV=bV;var aqg={aS:bV.zoomInMenuItem,hw:IPCC.fj.aiP,G:1.25};var aqT={aS:bV.zoomOutMenuItem,hw:IPCC.fj.ajt,G:1.25};var auq={aS:bV.fullImageMenuItem,G:kF.FitType.FullImage};var atF={aS:bV.fullWidthMenuItem,G:kF.FitType.FullWidth};var atx={aS:bV.fullHeightMenuItem,G:kF.FitType.FullHeight};var awP={aS:bV.oneToOneRatioMenuItem,G:kF.FitType.OneToOne};var atM={aS:bV.actualSizeMenuItem,G:kF.FitType.ActualSize};var aDn={aS:bV.rotateRightMenuItem,hw:IPCC.fj.Zz,G:90};var aCZ={aS:bV.rotateLeftMenuItem,hw:IPCC.fj.Zz,G: -90};var auL={aS:bV.mirrorHorizontalMenuItem,hw:IPCC.fj.ala};var atw={aS:bV.mirrorVerticalMenuItem,hw:IPCC.fj.amc};var UQ={aS:bV.panToolMenuItem,G:kF.MouseTool.HandPan};var TU={aS:bV.areaSelectionToolMenuItem,G:kF.MouseTool.Select};var VG={aS:bV.zoomRectangleToolMenuItem,G:kF.MouseTool.RectangleZoom};var UM={aS:bV.flyingMagnifierToolMenuItem,G:kF.MouseTool.Magnifier};var aqf={aS:bV.createTextMarkToolMenuItem,G:kF.MouseTool.CreateTextMark};var atP={aS:bV.createLineMarkToolMenuItem,G:kF.MouseTool.CreateLineMark};var arG={aS:bV.createRectangleMarkToolMenuItem,G:kF.MouseTool.CreateRectangleMark};var asN={aS:bV.createEllipseMarkToolMenuItem,G:kF.MouseTool.CreateEllipseMark};var aBA={aS:bV.editMarksToolMenuItem,G:kF.MouseTool.EditMarks};var arT={aS:bV.createStampMarkToolMenuItem,G:kF.MouseTool.CreateStampMark};var avg={aS:bV.createHighlightMarkToolMenuItem,G:kF.MouseTool.CreateHighlightTextMark};var akn={ap:55,cT:[{aS:bV.thicknessMenu.item1,G:1},{aS:bV.thicknessMenu.item2,G:2},{aS:bV.thicknessMenu.item3,G:3},{aS:bV.thicknessMenu.item4,G:4},{aS:bV.thicknessMenu.item5,G:5},{aS:bV.thicknessMenu.item6,G:6},{aS:bV.thicknessMenu.item7,G:7},{aS:bV.thicknessMenu.item8,G:8}]};var awq={ap:145,cT:[{aS:bV.opacityMenu.translucent,G:127},{aS:bV.opacityMenu.opaque,G:255}]};var Oj={aS:bV.borderThicknessMenuItem,hw:IPCC.fj.HB,bz:'lineWidth',nk:akn};var Mx={aS:bV.borderColorMenuItem,hw:IPCC.fj.Ll,bz:'lineColor'};var Ky={aS:bV.fillColorMenuItem,hw:IPCC.fj.Ll,bz:'fillColor'};var agE={aS:bV.lineThicknessMenuItem,hw:IPCC.fj.HB,bz:'lineWidth',nk:akn};var ahe={aS:bV.lineColorMenuItem,hw:IPCC.fj.Ll,bz:'lineColor'};var awT={aS:bV.fontMenuItem,hw:IPCC.fj.ami};var Oq={aS:bV.opacityMenuItem,hw:IPCC.fj.HB,bz:'opacity',nk:awq};var auk={aS:bV.moveToBackMenuItem,hw:IPCC.fj.amt};var auY={aS:bV.moveBackwardMenuItem,hw:IPCC.fj.amY};var avh={aS:bV.moveForwardMenuItem,hw:IPCC.fj.amE};var auz={aS:bV.moveToFrontMenuItem,hw:IPCC.fj.amN};var tw={aS:bV.deleteMarkMenuItem,hw:IPCC.fj.alR};var aqo={ap:180,cT:[auq,atF,atx,awP,atM]};var apO={aS:bV.zoomToFitMenuItem,hw:IPCC.fj.ajr,nk:aqo};var avX={ap:200,cT:[aDn,aCZ,auL,atw]};var awd={aS:bV.orientationMenuItem,nk:avX};var Qe;if(IPCC.du){if(IPCC.hk===false){Qe={ap:180,cT:[UQ,VG,UM,TU,null]};}else{Qe={ap:180,cT:[UQ,VG,UM,TU,null,aBA,aqf,atP,arG,asN,arT,avg]};}}else{Qe={ap:180,cT:[UQ,VG,UM,TU]};}var auU={aS:bV.mouseToolsMenuItem,hw:IPCC.fj.abr,nk:Qe};var aCi={ap:150,cT:[Ky,Oj,Mx,null,Oq]};var aEQ={ap:150,cT:[Ky,Oj,Mx,null,null]};var aBE={ap:150,aS:bV.rectangleMarkPropertiesMenuItem,nk:aCi};var aFL={ap:150,aS:bV.rectangleMarkPropertiesMenuItem,nk:aEQ};var asC={ap:150,cT:[awT,Ky,Oj,Mx,null,null,null,Oq]};var asT={aS:bV.textMarkPropertiesMenuItem,nk:asC};var aDo={ap:150,cT:[Ky,Oj,Mx,null,Oq]};var aEa={aS:bV.polygonMarkPropertiesMenuItem,nk:aDo};var aDw={ap:140,cT:[agE,ahe,null,Oq]};var aDS={aS:bV.polylineMarkPropertiesMenuItem,nk:aDw};var aza={ap:140,cT:[agE,ahe,null,null]};var aAA={aS:bV.lineMarkPropertiesMenuItem,nk:aza};var ato={ap:140,cT:[auz,avh,auY,auk]};var wL={aS:bV.markOrderingMenuItem,nk:ato};var atj={ap:150,cT:[Ky]};var adr={aS:bV.stampMarkPropertiesMenuItem,nk:atj};this.ark={ap:180,cT:[aqg,aqT,apO,awd,auU]};this.arw={ap:140,cT:[asT,wL,tw]};this.aCt={ap:140,cT:[aBE,wL,tw]};this.arD={ap:140,cT:[adr,wL,tw]};this.atd={ap:140,cT:[null,wL,tw]};this.aFF={ap:140,cT:[aFL,wL,tw]};this.aEq={ap:140,cT:[aEa,wL,tw]};this.aEC={ap:140,cT:[aDS,wL,tw]};this.azE={ap:140,cT:[aAA,wL,tw]};this.aye={ap:140,cT:[adr,null,tw]};};ei.prototype.mt=function(K){this.K=K;};ei.prototype.ep=function(){this.K=false;};ei.prototype.af=function(){};ei.prototype.Vn=function(F){var fZ;if(F.mark&&this.Vh){var KE=F.mark.hL();switch(F.mark.get_type()){case IPCC.Web.UI.MarkType.Line:fZ=this.azE;break;case IPCC.Web.UI.MarkType.Polyline:fZ=this.aEC;break;case IPCC.Web.UI.MarkType.Rectangle:fZ=this.aCt;break;case IPCC.Web.UI.MarkType.Ellipse:fZ=this.aFF;break;case IPCC.Web.UI.MarkType.Polygon:fZ=this.aEq;break;case IPCC.Web.UI.MarkType.Text:fZ=this.arw;break;case IPCC.Web.UI.MarkType.Stamp:if(KE===true){fZ=this.atd;}else{fZ=this.arD;}break;case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.Highlight:if(F.mark.ib==='y'){fZ=this.aye;}break;}}if(!fZ){fZ=this.ark;}var tP=document.documentElement.scrollLeft-document.documentElement.clientLeft+document.body.scrollLeft-document.body.clientLeft;var ut=document.documentElement.scrollTop-document.documentElement.clientTop+document.body.scrollTop-document.body.clientTop;var aii=new IPCC.Web.UI.Point(F.domEvent.clientX+tP,F.domEvent.clientY+ut);var V=this;function wd(bw){if(tI){var bB=bw.target;if(bB&&bB===null){return;}var Bu,amn;while(bB&&bB!==document.body&&bB.parentNode!==null){if(bB&&bB!==null){if(bB===tI){amn=true;}if(!Bu&&bB.ImGearCommand){Bu=bB.ImGearCommand;}bB=bB.parentNode;}}if(!amn||Bu){IPCC.Web.UI.by.removeHandler(document.body,'mousedown',wd);IPCC.Web.UI.by.removeHandler(document.body,'mousemove',ade);document.body.removeChild(tI);tI=null;if(Bu){Bu.RF=F;V.aEg(Bu);}}}};function ZC(JJ,Aq,zl,EZ){var cI=false,L,bB;for(L=0;L<Aq.length;L++){if(JJ===Aq[L]){cI=true;}}if(!cI&&JJ.ImGearType==='menu'){JJ.style.display='none';}else{JJ.style.display='block';}bB=JJ.firstChild;while(bB){if(bB.ImGearType==='menuItemHighlight'){if(bB===EZ){bB.style.display='block';}else{bB.style.display='none';}}if(bB.firstChild){ZC(bB,Aq,zl,EZ);}bB=bB.nextSibling;}};function ade(bw){if(tI){var bB=bw.target;if(bB&&bB===null){return;}var Aq=[tI],zl,EZ;while(bB&&bB!==document.body&&bB.parentNode!==null){if(!zl&&bB.ImGearType==='menuItem'){zl=bB;}if(bB.ImGearType==='menu'){Aq.push(bB);}bB=bB.parentNode;}if(zl){bB=zl.firstChild;while(bB){if(bB.ImGearType==='menuItemHighlight'){EZ=bB;}else if(bB.ImGearType==='menu'){Aq.push(bB);}bB=bB.nextSibling;}}ZC(tI,Aq,zl,EZ);}};var aL;if(window.innerWidth){aL={x:window.pageXOffset,y:window.pageYOffset,width:window.innerWidth,height:window.innerHeight};}else if(document.documentElement.clientWidth){aL={x:tP,y:ut,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};}else{aL={x:tP,y:ut,width:document.body.clientWidth,height:document.body.clientHeight};}var tI=this.agl(fZ,false,false,aii,aii,true,aL,document.body,F.mark);ZC(tI,[tI],null,null);document.body.appendChild(tI);IPCC.Web.UI.by.addHandler(document.body,'mousedown',wd);IPCC.Web.UI.by.addHandler(document.body,'mousemove',ade);};ei.prototype.agl=function(fZ,hw,bz,WX,WB,Fx,aL,aGs,C){var amk=24,agt=1;var L,SR=0;for(L=0;L<fZ.cT.length;L++){var auD=fZ.cT[L];if(auD){SR+=amk;}else{SR+=agt;}}var Om;if(Fx){Om=WB.x+fZ.ap;if(Om>aL.x+aL.width){Fx=false;}}if(!Fx){Om=WX.x-fZ.ap;if(Om<aL.x){Fx=true;}}var tk={x:WB.x,y:WB.y};if(!Fx){tk={x:WX.x-fZ.ap-2,y:WX.y-2};}var aey=aL.y+aL.height-SR-8;if(tk.y>aey){tk.y=aey;}if(tk.y<aL.y+2){tk.y=aL.y+2;}function gc(pG){var vy=document.createElement('div');var L;for(L in pG){if(pG.hasOwnProperty(L)){vy.style[L]=pG[L];}}return vy;};var MJ=gc({zIndex:2,width:fZ.ap+'px',left:tk.x+'px',top:tk.y+'px',margin:'0px',padding:'0px',border:'1px solid #C0C0C0',position:'absolute',backgroundColor:'#F0F0F0',color:'Black',fontSize:'11px',fontFamily:'Arial, Helvetica, sans-serif',fontWeight:'bold',boxShadow:'0 2px 3px rgba(0,0,0,.2)'});MJ.ImGearType='menu';for(L=0;L<fZ.cT.length;L++){var vs=fZ.cT[L];var wD;if(vs){wD=gc({position:'relative',height:'24px'});wD.ImGearType='menuItem';var AU=gc({position:'absolute',width:'24px',overflow:'hidden',borderRight:'1px solid #E0E0E0',height:'24px',textAlign:'center'});wD.appendChild(AU);var alF=gc({textOverflow:'ellipsis',whiteSpace:'nowrap',width:fZ.ap-44+'px',position:'absolute',left:'25px',padding:'0 0 0 4px',overflow:'hidden',borderLeft:'1px solid #FFFFFF',height:'24px',lineHeight:'24px'});wD.appendChild(alF);var amh=gc({display:'none',position:'absolute',height:'24px',width:fZ.ap+'px',backgroundColor:'#00C0E0',filter:'progid:DXImageTransform.Microsoft.Alpha(opacity=30)',opacity:'.3'});amh.ImGearType='menuItemHighlight';wD.appendChild(amh);alF.appendChild(document.createTextNode(vs.aS));var Nb=vs.hw||hw;var HM=vs.bz||bz;if(HM){if(Nb===IPCC.fj.HB){var avj=C['get_'+HM]();if(avj===vs.G){if(this.K.vM()){AU.style.backgroundImage='url(\''+this.K.vM()+'/MenuIcons.png'+'\')';}else{AU.style.backgroundImage='url(\''+'<%=WebResource("IPCC.Web.UI.MenuIcons.png")%>'+'\')';}AU.style.backgroundPosition='0px';}}else if(Nb===IPCC.fj.amU){var awy=C['get_'+HM]();if(awy){if(this.K.vM()){AU.style.backgroundImage='url(\''+this.K.vM()+'/MenuIcons.png'+'\')';}else{AU.style.backgroundImage='url(\''+'<%=WebResource("IPCC.Web.UI.MenuIcons.png")%>'+'\')';}AU.style.backgroundPosition='24px 0px';}}}if(!vs.nk){wD.ImGearCommand={hw:Nb,bz:HM,G:vs.G};}else{var avZ={x:aL.x-tk.x,y:aL.y-tk.y,width:aL.width,height:aL.height};this.agl(vs.nk,Nb,HM,{x:0,y: -1},{x:fZ.ap,y: -1},Fx,avZ,wD,C);}tk.y+=amk;}else{wD=gc({height:'1px',overflow:'hidden',backgroundColor:'#E0E0E0'});tk.y+=agt;}MJ.appendChild(wD);}aGs.appendChild(MJ);return MJ;};ei.prototype.aCk=function(C,cG,K){var tP=document.documentElement.scrollLeft-document.documentElement.clientLeft+document.body.scrollLeft-document.body.clientLeft;var ut=document.documentElement.scrollTop-document.documentElement.clientTop+document.body.scrollTop-document.body.clientTop;var aL;if(window.innerWidth){aL={x:window.pageXOffset,y:window.pageYOffset,width:window.innerWidth,height:window.innerHeight};}else if(document.documentElement.clientWidth){aL={x:tP,y:ut,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};}else{aL={x:tP,y:ut,width:document.body.clientWidth,height:document.body.clientHeight};}var lY=aL.x+aL.width/2;var mW=aL.y+aL.height/2;var iu=document.createElement('div');iu.innerHTML='	<div style="z-index:2;border:1px solid #000000;font-size:12px;font-family:Arial, Helvetica, sans-serif;font-weight:normal;font-variant:normal;'+'background-color:#F0F0F0;position:absolute;top:'+(mW-85)+'px;left:'+(lY-80)+'px;width:160px;height:170px;">'+'<div style="padding:4px;background-color:#666666;color:#FFFFFF;font-size:14px;">'+this.bV.selectColor+'</div>'+'<div style="position:relative;">'+'<div style="position:absolute;left:8px;top:10px;width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7">'+this.bV.red+':</div>'+'<input id="ImGearColorRed" type="text" style="position:absolute;left:80px;top:8px;width:52px;" />'+'<div style="position:absolute;left:8px;top:40px;width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7">'+this.bV.green+':</div>'+'<input id="ImGearColorGreen" style="position:absolute;left:80px;top:38px;width:52px" type="text" />'+'<div style="position:absolute;left:8px;top:70px;width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7">'+this.bV.blue+':</div>'+'<input id="ImGearColorBlue" style="position:absolute;left:80px;top:68px;width:52px" type="text" />'+'<button id="ImGearColorOKButton" style="font-size:12px;position:absolute;left:9px;top:108px;width:65px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.bV.ok+'</button>'+'<button id="ImGearColorCancelButton" style="font-size:12px;position:absolute;left:81px;top:108px;width:71px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.bV.cancel+'</button>'+'</div>'+'</div>';document.body.appendChild(iu);var aak=document.getElementById('ImGearColorRed');var aiw=document.getElementById('ImGearColorGreen');var aen=document.getElementById('ImGearColorBlue');var He=document.getElementById('ImGearColorOKButton');var IZ=document.getElementById('ImGearColorCancelButton');var TG=C['get_'+cG]();var Nt;if(TG.length===7&&TG.charAt(0)==='#'){Nt=parseInt(TG.slice(1),16);}aak.value=(Nt>>16);aiw.value=((Nt>>8)&255);aen.value=(Nt&255);function Yi(XB){var G=Math.floor(+(XB.value));if(!isFinite(G)){G=0;}if(G<0){G=0;}if(G>255){G=255;}return G;};function Aa(){IPCC.Web.UI.by.removeHandler(He,'click',ER);IPCC.Web.UI.by.removeHandler(IZ,'click',Hv);IPCC.Web.UI.by.removeHandler(document.body,'mousedown',wd);};function ER(){var dR=Yi(aak)*65536+Yi(aiw)*256+Yi(aen);C['set_'+cG]('#'+(0x1000000+dR).toString(16).slice(1));Aa();document.body.removeChild(iu);iu=null;K.dh();};function Hv(){Aa();document.body.removeChild(iu);iu=null;};function wd(bw){if(iu){var bB=bw.target;var GW;while(bB!==document.body){if(bB===iu){GW=true;}bB=bB.parentNode;}if(!GW){Aa();document.body.removeChild(iu);iu=null;}}};IPCC.Web.UI.by.addHandler(He,'click',ER);IPCC.Web.UI.by.addHandler(IZ,'click',Hv);IPCC.Web.UI.by.addHandler(document.body,'mousedown',wd);aak.focus();};ei.prototype.aBt=function(C,K){var tP=document.documentElement.scrollLeft-document.documentElement.clientLeft+document.body.scrollLeft-document.body.clientLeft;var ut=document.documentElement.scrollTop-document.documentElement.clientTop+document.body.scrollTop-document.body.clientTop;var aL;if(window.innerWidth){aL={x:window.pageXOffset,y:window.pageYOffset,width:window.innerWidth,height:window.innerHeight};}else if(document.documentElement.clientWidth){aL={x:tP,y:ut,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};}else{aL={x:tP,y:ut,width:document.body.clientWidth,height:document.body.clientHeight};}var lY=aL.x+aL.width/2;var mW=aL.y+aL.height/2;var iu=document.createElement('div');iu.innerHTML='<div style="z-index:2;border:1px solid #000000;font-size:12px;font-family:Arial, Helvetica, sans-serif;font-weight:normal;font-variant:normal;'+'background-color:#F0F0F0;position:absolute;top:'+(mW-85)+'px;left:'+(lY-200)+'px;width:400px;height:170px;z-index:2">'+'<div style="padding:4px;background-color:#666666;color:#FFFFFF;font-size:14px;">'+this.bV.selectFont+'</div>'+'<div style="position:relative;">'+'<div style="position:absolute;left:8px;top:10px;width:90px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.bV.font+':</div>'+'<input id="ImGearFontFamily" style="position:absolute;left:100px;top:8px;width:280px" type="text" />'+'<div style="position:absolute;left:8px;top:40px;width:90px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.bV.size+':</div>'+'<input id="ImGearFontSize" style="position:absolute;left:100px;top:38px;width:54px" type="text" />'+'<div style="position:absolute;left:8px;top:70px;"><input id="ImGearFontItalic" type="checkbox" style="float:left"><div style="width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7;">'+this.bV.italic+'</div></div>'+'<div style="position:absolute;left:100px;top:70px;"><input id="ImGearFontBold" type="checkbox" style="float:left"><div style="width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7;">'+this.bV.bold+'</div></div>'+'<div style="position:absolute;left:200px;top:70px;"><input id="ImGearFontUnderline" type="checkbox" style="float:left"><div style="width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7;">'+this.bV.underline+'</div></div>'+'<div style="position:absolute;left:300px;top:70px;"><input id="ImGearFontStrikeout" type="checkbox" style="float:left"><div style="width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.7;">'+this.bV.strikeout+'</div></div>'+'<button id="ImGearFontOKButton" style="font-size:12px;position:absolute;left:240px;top:108px;width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.bV.ok+'</button>'+'<button id="ImGearFontCancelButton" style="font-size:12px;position:absolute;left:315px;top:108px;width:71px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+this.bV.cancel+'</button>'+'</div>'+'</div>';document.body.appendChild(iu);var Wz=document.getElementById('ImGearFontFamily');var aot=document.getElementById('ImGearFontSize');var akI=document.getElementById('ImGearFontItalic');var akk=document.getElementById('ImGearFontBold');var alK=document.getElementById('ImGearFontUnderline');var aoB=document.getElementById('ImGearFontStrikeout');var He=document.getElementById('ImGearFontOKButton');var IZ=document.getElementById('ImGearFontCancelButton');var awr=C.get_fontName();var avV=C.get_fontSize();var sj=C.get_fontStyle();Wz.value=awr;aot.value=avV;akI.checked=sj&IPCC.Web.UI.FontStyle.Italic;akk.checked=sj&IPCC.Web.UI.FontStyle.Bold;alK.checked=sj&IPCC.Web.UI.FontStyle.Underline;aoB.checked=sj&IPCC.Web.UI.FontStyle.Strikeout;function aGm(XB){var G=Math.floor(+(XB.value));if(!isFinite(G)){G=12;}if(G<0.1){G=0.1;}if(G>288){G=288;}return G;};function Aa(){IPCC.Web.UI.by.removeHandler(He,'click',ER);IPCC.Web.UI.by.removeHandler(IZ,'click',Hv);IPCC.Web.UI.by.removeHandler(document.body,'mousedown',wd);};function ER(){C.set_fontName(Wz.value);var ck=aGm(aot);C.set_fontSize(ck);var fB=0;if(akI.checked){fB|=IPCC.Web.UI.FontStyle.Italic;}if(akk.checked){fB|=IPCC.Web.UI.FontStyle.Bold;}if(alK.checked){fB|=IPCC.Web.UI.FontStyle.Underline;}if(aoB.checked){fB|=IPCC.Web.UI.FontStyle.Strikeout;}C.set_fontStyle(fB);Aa();document.body.removeChild(iu);iu=null;K.dh();};function Hv(){Aa();document.body.removeChild(iu);iu=null;};function wd(bw){if(iu){var bB=bw.target;var GW;while(bB!==document.body){if(bB===iu){GW=true;}bB=bB.parentNode;}if(!GW){Aa();document.body.removeChild(iu);iu=null;}}};IPCC.Web.UI.by.addHandler(He,'click',ER);IPCC.Web.UI.by.addHandler(IZ,'click',Hv);IPCC.Web.UI.by.addHandler(document.body,'mousedown',wd);Wz.focus();};ei.prototype.aEg=function(F){var C=F.RF.mark;switch(F.hw){case IPCC.fj.HB:C['set_'+F.bz](F.G);this.K.dh();break;case IPCC.fj.Ll:this.aCk(C,F.bz,this.K);break;case IPCC.fj.ami:this.aBt(C,this.K);break;case IPCC.fj.amU:C['set_'+F.bz](!C['get_'+F.bz]());this.K.dh();break;case IPCC.fj.amt:C.moveToBack();this.K.dh();break;case IPCC.fj.amY:C.moveBackward();this.K.dh();break;case IPCC.fj.amE:C.moveForward();this.K.dh();break;case IPCC.fj.amN:C.moveToFront();this.K.dh();break;case IPCC.fj.alR:C.removeFromPage();this.K.dh();break;default:this.K.aBn(F);break;}};module.exports=ei;},{}],21:[function(require,module,exports){var aa={Default:0,Arrow:1,Crosshair:2,Link:3,HandOpen:4,HandClosed:5,Magnifier:6,None:7,RectangleZoom:8,AddRectangleMark:9,AddEllipseMark:10,AddLineMark:11,AddFreehandLineMark:12,AddPolygonMark:13,AddPolylineMark:14,AddTextMark:15,Move:16,ResizeN:17,ResizeE:18,ResizeS:19,ResizeW:20,ResizeNW:21,ResizeNE:22,ResizeSE:23,ResizeSW:24,EditMarks:25,RunMarks:26,Text:27,AddStampMark:28,AddRectangleRedactionMark:29,AddImageStampMark:30,ee:function(bu){if(typeof bu==='string'){return bu;}switch(bu){case IPCC.aa.Default:case IPCC.aa.Magnifier:case IPCC.aa.None:case IPCC.aa.RunMarks:return 'auto';case IPCC.aa.Arrow:case IPCC.aa.EditMarks:return 'default';case IPCC.aa.Crosshair:case IPCC.aa.RectangleZoom:case IPCC.aa.AddRectangleMark:case IPCC.aa.AddEllipseMark:case IPCC.aa.AddLineMark:case IPCC.aa.AddFreehandLineMark:case IPCC.aa.AddPolygonMark:case IPCC.aa.AddPolylineMark:case IPCC.aa.AddTextMark:case IPCC.aa.AddRectangleRedactionMark:case IPCC.aa.AddImageStampMark:case IPCC.aa.AddStampMark:return 'crosshair';case IPCC.aa.Link:return 'pointer';case IPCC.aa.HandOpen:case IPCC.aa.HandClosed:case IPCC.aa.Move:return 'move';case IPCC.aa.ResizeN:return 'n-resize';case IPCC.aa.ResizeE:return 'e-resize';case IPCC.aa.ResizeS:return 's-resize';case IPCC.aa.ResizeW:return 'w-resize';case IPCC.aa.ResizeNW:return 'nw-resize';case IPCC.aa.ResizeNE:return 'ne-resize';case IPCC.aa.ResizeSE:return 'se-resize';case IPCC.aa.ResizeSW:return 'sw-resize';case IPCC.aa.Text:return 'text';}return 'auto';}};module.exports=aa;},{}],22:[function(require,module,exports){var iG={ru:function(iw,Lv){var bg,dJ,fh;if(iw===null){return 'null';}if(!Lv){Lv=0;}bg=typeof(iw);if(bg==='undefined'){return 'undefined';}else if(bg==='number'||bg==='boolean'){return iw.toString();}else if(bg==='string'){return '\''+iw+'\'';}else if(bg==='function'){return 'function';}else{if(Lv<0){return 'iw';}dJ='{';for(fh in iw){if(iw.hasOwnProperty(fh)){if(dJ.length>2){dJ+=', ';}dJ+=fh;dJ+=': ';dJ+=IPCC.iG.ru(iw[fh],Lv-1);}}dJ+='}';return dJ;}},Qj:function(aS){var traceElement=document.getElementById('TraceConsole');if(traceElement&&(traceElement.tagName.toUpperCase()==='TEXTAREA')){traceElement.value+=aS+'\n';}},aId:function(){var traceElement=document.getElementById('TraceConsole');if(traceElement&&(traceElement.tagName.toUpperCase()==='TEXTAREA')){traceElement.value='';}},mb:function(kr,Kr,bE,BN,Av){var aS="PCC Controls - ";aS+=(BN)?BN:" ";aS+=" parent Div id = ";aS+=(Av)?Av:" ";if(Kr){switch(Kr){case 0:aS+=" FunctionCall ";break;case 1:aS+=" Exception ";break;case 2:aS+=" Custom ";break;case 3:aS+=" UserAction ";break;case 4:aS+=" Warning ";break;default:aS+=" unknown ";}}aS+=" - "+kr;if((typeof(Debug)!=='undefined')&&Debug.writeln){Debug.writeln(aS);}if(window.console&&window.console.log){window.console.log(aS);}if(window.opera){window.opera.postError(aS);}if(window.debugService){window.debugService.trace(aS);}var traceElement=document.getElementById('TraceConsole');if(traceElement&&(traceElement.tagName.toUpperCase()==='TEXTAREA')){traceElement.value+=aS+'\n';}var Nl;try{Nl=onPCCItemLogged;}catch(ex){}if(Nl&&(typeof(Nl)).toLowerCase()==='function'){var di=new IPCC.Web.UI.LogItemEventArgs();di.message=kr;di.cause=Kr;di.level=bE;di.id=Av;Nl(di);}}};module.exports=iG;},{}],23:[function(require,module,exports){var ln=function(){this.bJ=false;this.K=false;};ln.prototype.mt=function(K){this.K=K;this.K.aiG(true);this.aT=K.aR();};ln.prototype.ep=function(){if(arguments[0]){if(arguments[0]===true){this.K=false;return;}}this.K.aiG(false);this.K=false;};ln.prototype.af=function(){if(this.bJ){this.K.Db(true);this.aT.oi();this.bJ=false;this.K.dh();}};ln.prototype.Al=function(F){this.af();var C=F.mark;if(C&&C.iJ()===IPCC.Web.UI.MarkType.Text){this.K.wI(C);this.K.dh();}};ln.prototype.lg=function(F){this.af();var ii=F.domEvent;if(ii.button===0){var cq=ii.target;this.dc=cq.ImGearMarkHandle;if(this.dc){this.um=this.dc.bg;this.lW=this.dc.aD;}else{this.um=null;this.lW=null;}while(!(cq.ImGearMarkRelation)&&cq.parentNode&&cq!==document.body){cq=cq.parentNode;}this.H=cq.ImGearMarkRelation;if(this.H){this.C=this.H.C;}else{this.C=null;}this.bJ=true;this.QJ=F.imagePoint;this.Gf=F.imagePoint;var C=this.C;if(!C||C.get_interactionMode()===IPCC.Web.UI.MarkInteractionMode.SelectionDisabled){if(!ii.shiftKey){this.K.en().Cd().removeAllMarks();}this.aT.Dp(F.imagePoint);}else{var gx,h;switch(this.um){case IPCC.du.dM.prototype.YK:this.jA=C.eT();this.abd=Math.abs(this.jA.width);this.Gq=Math.abs(this.jA.height);gx={x:this.jA.x,y:this.jA.y};this.Sc={x:this.jA.x+this.jA.width,y:this.jA.y+this.jA.height};if(this.lW>0&&this.lW<3){gx.x+=this.jA.width;this.Sc.x-=this.jA.width;}if(this.lW>1){gx.y+=this.jA.height;this.Sc.y-=this.jA.height;}this.aFz=gx;break;case IPCC.du.dM.prototype.Zi:h=C.eT();this.jA=h;gx={x:h.x+h.width/2,y:h.y+h.height/2};switch(this.lW){case 0:this.zr=h.y+h.height;gx.y=h.y;break;case 1:this.zr=h.x;gx.x=h.x+h.width;break;case 2:this.zr=h.y;gx.y=h.y+h.height;break;case 3:this.zr=h.x+h.width;gx.x=h.x;break;}break;case IPCC.du.dM.prototype.Go:this.aJ=C.qt();if(this.lW<0||this.lW>this.aJ.ej()){this.af();}gx=this.aJ.getPoint(this.lW);break;case IPCC.du.dM.prototype.JI:break;case IPCC.du.dM.prototype.ST:h=C.eT();gx={x:h.x+C.mF.x,y:h.y+C.mF.y};break;default:var vl=C.get_selected();if(ii.ctrlKey||ii.shiftKey){vl= !vl;C.set_selected(vl);}else{if(!vl){vl=true;this.K.en().Cd().removeAllMarks();if(C.get_type()===IPCC.Web.UI.MarkType.Highlight){for(var L=0;L<this.K.en().get_markCount();L++){var Si=this.K.en().getMark(L);if(Si.iJ()===608&&Si.aX===C.aX){Si.set_selected(vl);}}}else{C.set_selected(vl);}}}if(!vl){this.af();}break;}if(this.bJ&&gx){this.aBl=gx.x-this.QJ.x;this.aBp=gx.y-this.QJ.y;if(this.dc){this.aT.aoR(this.dc.bu);}}}if(this.bJ){this.K.Db(false);}}this.K.dh();};ln.prototype.lA=function(F){var ii=F.domEvent;var Gf;function aCP(aCH){aCH.Ib(F.imagePoint.x-Gf.x,F.imagePoint.y-Gf.y);};if(ii.button!==0){this.af();}if(this.bJ){var C=this.C;if(!C||C.get_interactionMode()===IPCC.Web.UI.MarkInteractionMode.SelectionDisabled){this.aT.zP(F.imagePoint);}else{var gx={x:F.imagePoint.x+this.aBl,y:F.imagePoint.y+this.aBp};var h;switch(this.um){case IPCC.du.dM.prototype.YK:var qC={x:gx.x,y:gx.y};var kw={x:this.Sc.x,y:this.Sc.y};if(ii.ctrlKey){kw.x=this.jA.x+this.jA.width/2;kw.y=this.jA.y+this.jA.height/2;}if(ii.shiftKey){var rr=Math.abs(qC.x-kw.x);var sN=Math.abs(qC.y-kw.y);if(rr*this.Gq<sN*this.abd){if(this.Gq>0.001){rr=sN*this.abd/this.Gq;}}else{if(this.Gq>0.001){sN=rr*this.Gq/this.abd;}}if(qC.x<kw.x){rr= -rr;}if(qC.y<kw.y){sN= -sN;}qC.x=kw.x+rr;qC.y=kw.y+sN;}if(ii.ctrlKey){kw={x:kw.x-(qC.x-kw.x),y:kw.y-(qC.y-kw.y)};}h={};h.x=Math.min(kw.x,qC.x);h.width=Math.max(kw.x,qC.x)-h.x;h.y=Math.min(kw.y,qC.y);h.height=Math.max(kw.y,qC.y)-h.y;C.set_rectangle(h);break;case IPCC.du.dM.prototype.Zi:h=C.eT();var Bz;if(this.lW&1){if(ii.ctrlKey){Bz=this.jA.x+this.jA.width/2;h.width=Math.abs(gx.x-Bz)*2;h.x=Bz-h.width/2;}else{h.x=Math.min(gx.x,this.zr);h.width=Math.max(gx.x,this.zr)-h.x;}}else{if(ii.ctrlKey){Bz=this.jA.y+this.jA.height/2;h.height=Math.abs(gx.y-Bz)*2;h.y=Bz-h.height/2;}else{h.y=Math.min(gx.y,this.zr);h.height=Math.max(gx.y,this.zr)-h.y;}}C.set_rectangle(h);break;case IPCC.du.dM.prototype.Go:this.aJ=C.qt();gx=this.aJ.setPoint(this.lW,gx);break;case IPCC.du.dM.prototype.JI:break;case IPCC.du.dM.prototype.ST:h=C.eT();C.set_calloutPoint({x:gx.x-h.x,y:gx.y-h.y});break;default:Gf=this.Gf;this.Gf=F.imagePoint;this.K.en().Cd().lf(aCP);break;}}this.K.dh();}};ln.prototype.jW=function(){function aFh(C){var GO=C.amq();if(ahx.contains(GO)&&ahx.contains({x:GO.x+GO.width,y:GO.y+GO.height})){C.set_selected(true);}};if(this.bJ){if(!this.C){var ahx=this.aT.vY();this.K.en().Cu(aFh);this.aT.oi();}this.af();}};ln.prototype.nB=function(F){var as=this.K.fb();if(F.windowPoint.x<=0||F.windowPoint.x>=as.width-2){this.af();}if(F.windowPoint.y<=0||F.windowPoint.y>=as.height-2){this.af();}};ln.prototype.lO=function(){this.af();};module.exports=ln;},{}],24:[function(require,module,exports){var dN=require('./IPCC.Util').regClass;var MG=function(){return this;};MG.registerClass=dN;MG.prototype={};MG.registerClass('IPCC.ExceptionEventArgs');module.exports=MG;},{"./IPCC.Util":28}],25:[function(require,module,exports){var fi=require('./IPCC.Util').regEnum;var pe=function(){};pe.registerEnum=fi;pe.prototype={FitToWidth:0,ShrinkToWidth:1,ActualSize:2,FitToHeight:3,BestFit:4};pe.registerEnum('IPCC.FitType',false);module.exports=pe;},{"./IPCC.Util":28}],26:[function(require,module,exports){var Bm=function(){function Eb(){return Math.floor((Math.random()*10)).toString();};var iA=new Date();return Eb()+Eb()+'_'+iA.getTime()+"_"+Eb()+Eb()+Eb()+Eb();};module.exports=Bm;},{}],27:[function(require,module,exports){var pn=function(){this.bJ=false;this.K=false;};pn.prototype.mt=function(K){this.K=K;};pn.prototype.ep=function(){this.K=false;};pn.prototype.af=function(){if(this.bJ){this.bJ=false;}};pn.prototype.rS=function(){this.af();};pn.prototype.lg=function(F){this.af();if(F.domEvent.button===0){this.bJ=true;this.QJ=F.imagePoint;}};pn.prototype.lA=function(F){if(F.domEvent.button!==0){this.af();}if(this.bJ){var K=this.K;var aT=K.aR();var bn=aT.fA();var as=K.fb();bn.XW(this.QJ,F.windowPoint);bn.ke(K.bY(),as);K.aP('userModifiedViewState',{});aT.je(bn);K.dh();}};pn.prototype.jW=function(){this.af();};pn.prototype.nB=function(F){var as=this.K.fb();if(F.windowPoint.x<=0||F.windowPoint.x>=as.width-2){this.af();}if(F.windowPoint.y<=0||F.windowPoint.y>=as.height-2){this.af();}};pn.prototype.lO=function(){this.af();};module.exports=pn;},{}],28:[function(require,module,exports){var J={};J.Te=(function(){var kz={};var yP=[];kz.get=function aHg(qN){if(yP.length===0){return;}for(var i=0;i<qN.length;i++){if(yP[i]&&yP[i].qN===qN){return yP[i].jv;}}};kz.set=function aEP(qN,jv){yP.push({qN:qN,jv:jv});if(yP.length>10){yP.shift();}};kz.contains=function iC(qN){return kz.get(qN)!==undefined;};kz.cacheReponse=function aHC(qN,jv){if(jv.readyState===4){kz.set(qN,jv);}else{var aAv=jv.onreadystatechange;jv.onreadystatechange=function(){if(jv.readyState===XMLHttpRequest.DONE&&jv.status===200){kz.set(qN,jv);}aAv();};}};return kz;})();J.Ye=false;J.QC=(function(){var QC=false;var sK=navigator.userAgent,YA=((sK.indexOf('Mozilla/5.0')> -1&&sK.indexOf('Android ')> -1&&sK.indexOf('AppleWebKit')> -1)&& !(sK.indexOf('Chrome')> -1)),acD=new RegExp(/AppleWebKit\/([\d.]+)/),aBc=acD.exec(sK),aif=(aBc===null?null:parseFloat(acD.exec(sK)[1]));QC=YA&&aif!==null&&aif<537;return QC;})();J.azb=(function(){var aft=false;var sK=navigator.userAgent,YA=/Android/i.test(sK),azo=/iPhone|iPad|iPod/i.test(sK),aAw=/IEMobile/i.test(sK);aft=(YA||azo||aAw);return aft;})();J.Ba=(function(){var Ba=false;if(document.documentMode===8||document.documentMode===9||document.documentMode===10){Ba=true;}return Ba;})();J.Af=(function(){var apD=navigator.userAgent;if(document.documentMode===10||J.QC){return 'svg';}else if(document.documentMode===9){return 'svga';}else if(/Apple Computer/.test(navigator.vendor||'')&&/Mac OS X.*?Version\/9\..*?Safari/i.test(apD)&& !J.azb){return 'svga';}else{return 'svgb';}})();J.DY=(function(){if(document.documentMode===8){document.namespaces.add('v','urn:schemas-microsoft-com:vml');document.createStyleSheet().addRule("v\\: *","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:roundrect","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:oval","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:roundrect","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:fill","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:line","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:shape","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:polyline","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:stroke","behavior:url(#default#VML); position:absolute");return true;}return false;})();J.De=(function(){return window.navigator.pointerEnabled||window.navigator.msPointerEnabled;})();J.It=J.De||(function(){return('ontouchstart'in document.documentElement);})();J.azD=(function(){return(navigator.platform)? ! !navigator.platform.match(/iPad|iPhone|iPod/g):false;})();J.agc=function(){return J.aFV.btoa((Math.random().toString(36).slice(-4))+'_'+J.wT(new Date())+'_'+(Math.random().toString(36).slice(-6)));};J.inArray=function(cY,cD){for(var i=0,l=cY.length;i<l;i++){if(cY[i]===cD){return true;}}return false;};J.forEach=function(bQ,bN,ci){var qh=[].forEach,ayQ=Object.prototype.hasOwnProperty;if(qh&&bQ.forEach===qh){bN&&bQ.forEach(bN,ci);}else if(bQ.length=== +bQ.length){for(var i=0,length=bQ.length;i<length;i++){bN&&bN.call(ci,bQ[i],i,bQ);}}else{for(var bz in bQ){if(ayQ.call(bQ,bz)){bN&&bN.call(ci,bQ[bz],bz,bQ);}}}};J.map=function(cY,bN,ci){var qh=[].map,vB=[];if(qh&&cY.map===qh){vB=cY.map(bN,ci);}else{J.forEach(cY,function(el,i){vB.push(bN.call(ci,el,i,cY));});}return vB;};J.filter=function(cY,bN,ci){var qh=[].filter,vB=[],afm=false;if(qh&&cY.filter===qh){vB=cY.filter(bN,ci);}else{J.forEach(cY,function(au,i){afm=bN.call(ci,au,i,cY);if(afm){vB.push(au);}});}return vB;};J.find=function(obj,cb,context){var hasProp=Object.prototype.hasOwnProperty;cb=(typeof cb==='function')?cb:function(){};if(obj.length=== +obj.length){for(var i=0,length=obj.length;i<length;i++){if(! !cb.call(context,obj[i],i,obj)){return obj[i];}}}else{for(var name in obj){if(hasProp.call(obj,name)){if(! !cb.call(context,obj[name],name,obj)){return obj[name];}}}}return undefined;};J.remove=function(cY,bN,ci){var Zq=[];var arl=J.filter(cY,bN,ci);J.forEach(arl,function(cD){var aD=J.indexOf(cY,cD);if(aD=== -1){return;}Zq=Zq.concat(cY.splice(aD,1));});return Zq;};J.keys=function(bQ){if(Object&&Object.keys){return Object.keys(bQ);}else{var mz=[];for(var L in bQ){if(bQ.hasOwnProperty&&bQ.hasOwnProperty(L)){mz.push(L);}}return mz;}};J.indexOf=function(cY,ajK,alU){if(Array.prototype.indexOf){return cY.indexOf(ajK,alU);}var k;if(cY==null){throw new TypeError('"cY" is null or not defined');}var O=Object(cY);var len=O.length>>>0;if(len===0){return-1;}var n= +alU||0;if(Math.abs(n)===Infinity){n=0;}if(n>=len){return-1;}k=Math.max(n>=0?n:len-Math.abs(n),0);while(k<len){if(k in O&&O[k]===ajK){return k;}k++;}return-1;};J.reduce=function(cY,bN,fa,ci){var qh=[].reduce;var GI=(arguments.length===2)?undefined:fa;if(qh&&typeof qh==='function'&&cY.reduce===qh&&ci===undefined){if(fa!==undefined){return cY.reduce(bN,fa,ci);}return cY.reduce(bN);}IPCC.J.forEach(cY,function(ai,ao){if(GI===undefined){GI=ai;return;}GI=bN.call(ci,GI,ai,ao,cY);});return GI;};J.reduceLeft=function(cY,bN,fa,ci){var vB=cY.reverse();return J.reduce.call(undefined,vB,bN,fa,ci);};J.contains=function(cY,ai){var cw=cY.length;while(cw--){if(cY[cw]===ai){return true;}}return false;};J.aAS=function(YG,agh){if(YG.length!==agh.length){return false;}for(var i=0,l=YG.length;i<l;i++){if(YG[i]!==agh[i]){return false;}}return true;};J.extend=function(target){"use strict";var source;if(!target){throw new IPCC.Web.UI.ImGearArgumentException("target","target must be defined.");}else if(typeof target!=='object'){throw new IPCC.Web.UI.ImGearArgumentException("target","typeof target must be 'object'");}else{for(var i=1;i<arguments.length;i++){source=arguments[i];for(var property in source){if(source.hasOwnProperty(property)){target[property]=source[property];}}}}return target;};J.trim=function(dJ){if(String.prototype.trim){return dJ.trim();}return dJ.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,'');};J.getPageFromPoint=function(bm,cu,ci){var aES=function(gA){return gA.left<=bm&&bm<=gA.right&&gA.top<=cu&&cu<=gA.bottom;};var aGw=function(){return J.filter(ci.querySelectorAll('[id*=__pViewId]:not(.pccPreviousPage):not(.pccNextPage)'),function(jm){return aES(jm.getBoundingClientRect());});};if(!ci){ci=document;}return aGw(bm,cu)[0];};J.regEnum=function(name,flags){for(var i in this.prototype){if(this.prototype.hasOwnProperty(i)){this[i]=this.prototype[i];}}this.__typeName=name;this.__flags=flags;this.__enum=true;};J.regClass=function(typeName,baseType,interfaceTypes){this.prototype.constructor=this;this.__typeName=typeName;this.__class=true;if(baseType){this.__baseType=baseType;for(var KN in baseType.prototype){if(baseType.prototype.hasOwnProperty(KN)){var atT=baseType.prototype[KN];if(!this.prototype[KN]){this.prototype[KN]=atT;}}}}return this;};J.ajf=function(Xb,RJ,aaq){if(RJ){if(!aaq){RJ.apply(Xb);}else{RJ.apply(Xb,aaq);}}return Xb;};J.ajT=function ajT(wf,aqr,ajc){var oJ;return function(){var ci=this,di=arguments;var azB=function(){oJ=undefined;if(!ajc){wf.apply(ci,di);}};var anQ=ajc&& !oJ;clearTimeout(oJ);oJ=setTimeout(azB,aqr);if(anQ){wf.apply(ci,di);}};};J.agv=function agv(de,sb){if(de.classList){de.classList.add(sb);}else{de.className+=' '+sb;}};J.aky=function aky(de,sb){if(de.classList){de.classList.remove(sb);}else{de.className=de.className.replace(sb,'');}};J.ZI=function(iH){return{width:iH.width||(iH.right-iH.left),height:iH.height||(iH.bottom-iH.top),top:iH.top,bottom:iH.bottom,left:iH.left,right:iH.right};};J.alO=function(alphabet,size){var sS='';for(var L=0;L<size;L++){sS+=alphabet[Math.floor(Math.random()*1000)%alphabet.length];}return sS;};J.aul=function(){var aGo='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';var aAd='AQgw';return J.alO(aGo,21)+J.alO(aAd,1);};J.aju=function(){var jk={'Accusoft-Gid':J.aul(),'Accusoft-Parent-Name':'ViewerControl','Accusoft-Parent-Pid':0,'Accusoft-Parent-Taskid':0};return jk;};J.qL=function(aC){if(aC instanceof J.qL){return aC;}this.jk=J.reduce(aC.headers||{},function(op,ai,bD){bD=bD.toLowerCase();if(op[bD]){op[bD]+=', '+ai;}else{op[bD]=ai;}return op;},{});this.status=aC.status;this.statusText=aC.statusText;this.responseText=aC.responseText;if(typeof aC.responseBody!=='undefined'){this.responseBody=aC.responseBody;}return this;};J.qL.prototype.getResponseHeader=function(Bk){var aC=this.jk[Bk.toLowerCase()];return aC!==undefined?aC:null;};J.oZ=(function(){var zq={};zq.jk={};zq.OW=undefined;function abZ(aiX){if(!aiX){return{};}return aiX.split('\r\n').reduce(function(KV,lK){var aD=lK.indexOf(': ');if(aD>0){var bD=lK.slice(0,aD);var G=lK.slice(aD+2);if(KV[bD]){G=KV[bD]+', '+G;}KV[bD]=G;}return KV;},{});};zq.fE=function(awZ){var Cl={method:'GET',url:null,headers:{},body:null,timeout:null,mimeType:null,cache:false},kH=PCCViewer.Deferred(),cK=kH.getPromise(),sZ;var bP=J.extend({},Cl,awZ);bP.headers=J.extend({},zq.jk,bP.headers);if(typeof zq.OW==='function'){sZ=zq.OW(bP);if(typeof sZ==='object'&&typeof sZ.then==='function'){sZ.then(function(av){kH.resolve(av);},function(av){kH.reject(av);});return cK;}}if(bP.cache&&J.Te.contains(bP.url)){var jv=J.Te.get(bP.url);var aC,uF={};uF={status:jv.status,headers:abZ(jv.getAllResponseHeaders())};try{uF.responseText=jv.responseText;}catch(e){}if(typeof jv.responseBody!=='undefined'){uF.responseBody=jv.responseBody;}aC=new J.qL(uF);if(jv.status>=200&&jv.status<300||status===304){kH.resolve(aC);}else{kH.reject({response:aC,error:new PCCViewer.Error("Error","An AJAX problem occurred: "+jv.status+" "+jv.statusText)});}return cK;}var iE,oJ;try{iE=new XMLHttpRequest();}catch(e){kH.reject(new PCCViewer.Error("Error",e.message));}if(iE){iE.open(bP.method,bP.url,true);if(bP.timeout){oJ=window.setTimeout(function(){iE.abort();kH.reject({error:new PCCViewer.Error("Error","Request timed out")});},bP.timeout);}iE.onreadystatechange=function(){var aC,uF={};if(iE.readyState===4){if(oJ){window.clearTimeout(oJ);}uF={status:iE.status,headers:abZ(iE.getAllResponseHeaders())};try{uF.responseText=iE.responseText;}catch(e){}if(typeof iE.responseBody!=='undefined'){uF.responseBody=iE.responseBody;}aC=new J.qL(uF);if(iE.status>=200&&iE.status<300||status===304){kH.resolve(aC);}else{kH.reject({response:aC,error:new PCCViewer.Error("Error","An AJAX problem occurred: "+iE.status+" "+iE.statusText)});}}};var aaO=J.extend({},bP.headers,J.aju());for(var bD in aaO){if(aaO.hasOwnProperty(bD)){iE.setRequestHeader(bD,aaO[bD]);}}if(typeof bP.mimeType==='string'&&typeof iE.overrideMimeType==='function'){iE.overrideMimeType(bP.mimeType);}if(bP.cache){J.Te.cacheReponse(bP.url,iE);}iE.send(bP.body);}return cK;};return zq;})();J.XV=function(gP,mY,ep){var fV=[],sP=null,ts=null,bj;var aAN=function(ts,sP){if(!sP){return false;}else{return Math.abs(ts.y-sP.y)<1&&Math.abs(ts.height-sP.height)<1&&ts.x+ts.width>=sP.x+sP.width;}};for(bj=mY;bj<ep+1;bj++){ts=gP.kI(bj).aL;if(aAN(ts,sP)){sP.union(ts);}else{sP=ts.clone();fV.push(sP);}}return fV;};J.addEvent=function addEvent(obj,event,handler){if(obj.addEventListener){obj.addEventListener(event,handler,false);}else if(obj.attachEvent){obj.attachEvent('on'+event,handler);}};J.removeEvent=function(obj,event,handler){if(obj.removeEventListener){obj.removeEventListener(event,handler,false);}else if(obj.detachEvent){obj.detachEvent('on'+event,handler);}};J.bspline=(function(){var d3_svg_lineBasisBezier1=[0,2/3,1/3,0],d3_svg_lineBasisBezier2=[0,1/3,2/3,0],d3_svg_lineBasisBezier3=[0,1/6,2/3,1/6];function d3_svg_lineLinear(points){return points.join("L");};function d3_svg_lineDot4(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];};function d3_svg_lineBasisBezier(path,x,y){path.push("C",d3_svg_lineDot4(d3_svg_lineBasisBezier1,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier1,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,y));};function d3_svg_lineBasis(points){if(points.length<3){return d3_svg_lineLinear(points);}var i=1,n=points.length,pi=points[0],x0=pi[0],y0=pi[1],px=[x0,x0,x0,(pi=points[1])[0]],py=[y0,y0,y0,pi[1]],path=[x0,",",y0,"L",d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)];points.push(points[n-1]);while(++i<=n){pi=points[i];px.shift();px.push(pi[0]);py.shift();py.push(pi[1]);d3_svg_lineBasisBezier(path,px,py);}points.pop();path.push("L",pi);return path.join("");};return function(aJ){var aui=J.map(aJ,function(au){return[au.x,au.y];});return d3_svg_lineBasis(aui);};})();J.aJB=function(dJ){if(dJ.match(/[^a-zA-Z0-9\s\,\.]/)){throw new Error('The path data attribute is not valid. It cannot be parsed.');}var axX=J.filter(dJ.replace(/[Mm]/g,'|').split('|'),function(g){return! !g.length;});var auj=J.map(axX,function(el){var aqL=el.replace(/[a-zA-Z]/g,'|').split('|');return J.map(aqL,function(hw){var amM=hw.split(',');return{x: +amM[0],y: +amM[1]};});});return auj;};J.aiJ=function(dJ,jB,jY,kE,bP){bP.ck="12px";var iZ=J.tS(dJ,jB,bP),wU=12*jY/(iZ.width||1),wG=12*kE/(iZ.height||1),asQ=Math.min(wU,wG);bP.ck=asQ;return J.aiO(dJ,jB,jY,kE,bP);};J.aiO=function(dJ,jB,jY,kE,bP,Qi){Qi=Qi||1;var nu={},iZ=J.tS(dJ,jB,bP),ck=bP.ck;nu.width=iZ.width;nu.height=iZ.height;nu.fontSize=ck;if(Qi>3){return nu;}if((iZ.width<jY+1)&&(iZ.height<kE+1)){return nu;}else{var wU=ck*jY/(iZ.width||1),wG=ck*kE/(iZ.height||1),xa=Math.min(wU,wG);if(xa>=bP.ck){return nu;}else{bP.ck=xa;return J.aiO(dJ,jB,jY,kE,bP,Qi+1);}}};J.tS=function(dJ,jB,bP){bP=bP||{};if(document.createElementNS){return J.axF(dJ,jB,bP);}else{return J.aiT(dJ,jB,bP);}};J.axF=function(dJ,jB,bP){var svg,amP=false;if(bP.dV){svg=bP.dV;}else{svg=document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttribute('style','border: 1px solid black');svg.setAttribute('width','600');svg.setAttribute('height','600');amP=true;document.body.appendChild(svg);}var ck=bP.ck||"12px";if(typeof ck==="number"){ck=ck+"px";}var co=document.createElementNS("http://www.w3.org/2000/svg","text");J.forEach({x:0,y:0,'font-size':ck,'stroke':"none",'fill':"#000000",'font-family':jB},function(value,name){co.setAttribute(name,value);});if(bP.tK){co.setAttribute('style','white-space:'+bP.tK);}var nm=document.createTextNode(dJ);co.appendChild(nm);svg.appendChild(co);var uz=co.getBBox(),IL=uz.width,JD=uz.height;svg.removeChild(co);if(amP){document.body.removeChild(svg);}if(IL===0&&JD===0&&dJ!=="M"){return J.tS("M",jB,bP);}else{return{width:IL,height:JD};}};J.aiT=function(dJ,jB,bP){var nm=document.createTextNode(dJ),Do=document.createElement('div');var ck=bP.ck||"12px";if(typeof ck==="number"){ck=ck+"px";}J.forEach({position:'absolute',display:'inline-block',top:0,left:0,visibility:'hidden',fontSize:ck,fontFamily:jB},function(value,name){Do.style[name]=value;});if(bP.tK){Do.style.whiteSpace=bP.tK;}Do.appendChild(nm);document.body.appendChild(Do);var uz=Do.getBoundingClientRect(),IL=uz.width||uz.right-uz.left,JD=uz.height||uz.bottom-uz.top;document.body.removeChild(Do);if(IL===0&&JD===0&&dJ!=="M"){return J.aiT("M",jB,ck);}else{return{width:IL,height:JD};}};J.abf=function(svgPath){var regexp=/[\s,]*(M)[\s,]*([\d\.]+)[\s,]+([\d\.]+)|[\s,]*(C)[\s,]?([\d\.]+)[\s,]+([\d\.]+)[\s,]+([\d\.]+)[\s,]+([\d\.]+)[\s,]+([\d\.]+)[\s,]+([\d\.]+)|[\s,]*(L)[\s,]*([\d\.]+)[\s,]+([\d\.]+)/g;var match=regexp.exec(svgPath);var xArr=[],yArr=[];function updateBounds(x,y){xArr.push(Number(x));yArr.push(Number(y));};while(match!==null){if(match[1]){updateBounds(match[2],match[3]);}else if(match[4]){updateBounds(match[5],match[6]);updateBounds(match[7],match[8]);updateBounds(match[9],match[10]);}else if(match[11]){updateBounds(match[12],match[13]);}match=regexp.exec(svgPath);}return{width:Math.max.apply(Math,xArr),height:Math.max.apply(Math,yArr)};};J.zs={SVG:function SVG(aoM){var dV=document.createElementNS("http://www.w3.org/2000/svg","svg");dV.setAttribute('viewBox',aoM);return dV;},Path:function Path(ww,kc){var gu=document.createElementNS("http://www.w3.org/2000/svg","path");gu.style.fill='none';gu.style.stroke=kc.color||'#000000';gu.style.strokeWidth=kc.thickness||4;if(ww){gu.setAttribute('d',ww.toString().trim());}return gu;},Rect:function Rect(ap,aM,fB){var ax=document.createElementNS("http://www.w3.org/2000/svg","rect");ax.setAttribute('width',ap||0);ax.setAttribute('height',aM||0);if(fB){ax.setAttribute('style',fB);}return ax;}};J.GX=function GX(ku){var regexIso8601=/^(\d{4}|\+\d{6})(?:-(\d{2})(?:-(\d{2})(?:T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,3}))?(?:Z|([\-+])(\d{2}):(\d{2}))?)?)?)?$/;var m=regexIso8601.exec(ku);if(m){return Date.UTC(m[1],(m[2]||1)-1,m[3]||1,m[4]-(m[8]?m[8]+m[9]:0)||0,m[5]-(m[8]?m[8]+m[10]:0)||0,m[6]||0,((m[7]||0)+'00').substr(0,3));}else{return new Error(ku+' cannot be parsed as an ISO 8601 date.');}};J.wT=function aKp(iA){if(iA.toISOString&&typeof iA.toISOString==='function'){return iA.toISOString();}else{return new Error(iA+' is not a Date object.');}};J.uj=function uj(o){return(!o?false:typeof Node==="object"?o instanceof Node:o&&typeof o==="object"&&typeof o.nodeType==="number"&&typeof o.nodeName==="string");};J.Cz=function Cz(o){if(J.uj(o)){while(o.firstChild){o.removeChild(o.firstChild);}}};J.UY=function sync(funcs,done){var counter=funcs.length;var idx=0;var next=function(err){if(err){done(err);}else if(--counter===0){done();}else{setTimeout(function(){funcs[idx++](next);},0);}};funcs[idx++](next);};J.ajq=function(ai){ai=String(ai).replace(/[^0-9a-f]/gi,"");if(ai.length<6){ai=ai[0]+ai[0]+ai[1]+ai[1]+ai[2]+ai[2];}var QM=function(dJ){return parseInt(dJ,16);};var r=QM(ai.substring(0,2));var g=QM(ai.substring(2,4));var b=QM(ai.substring(4,6));return{r:r,g:g,b:b};};J.aDE=function(ai){var RY="";var Qp=function(n){while(n.length<2){n='0'+n;}return n;};var Uh=function(n){return Qp(n.toString(16));};RY+=Uh(Math.floor(ai.r));RY+=Uh(Math.floor(ai.g));RY+=Uh(Math.floor(ai.b));return '#'+RY;};J.arV=function(aBu,aqM,aBk){var Ee=aBk,WN=J.ajq(aBu),ny=J.ajq(aqM);ny.r=(1-Ee)*ny.r+(WN.r*Ee);ny.g=(1-Ee)*ny.g+(WN.g*Ee);ny.b=(1-Ee)*ny.b+(WN.b*Ee);ny.r=Math.floor(ny.r);ny.g=Math.floor(ny.g);ny.b=Math.floor(ny.b);return J.aDE(ny);};J.agj=function(anO,tE){var awW=J.reduceLeft(anO,function(fa,dR){if(dR.opacity===undefined){dR.opacity=127;}var awK=dR.opacity/255;return J.arV(dR.color,fa,awK);},tE);return awW;};J.acu=function(gV){if(gV.length===0){return gV;}var dY=gV.slice(0);dY.sort(function(a,b){return a.startIndex-b.startIndex;});var TX=null;var kK=[];var YX=0,LE=[];var L=dY[0].startIndex;while(dY.length>0){YX=0;LE=null;LE=[];var bj=0;while(bj<dY.length&&dY[bj].startIndex<=L){if(L<=dY[bj].startIndex+dY[bj].length-1){YX++;LE.push(dY[bj]);bj++;}else{dY.splice(bj,1);}}if(YX>0){var Bc=J.agj(LE,'#ffffff');if(Bc===TX){kK[kK.length-1].endIndex=L;}else{kK.push({startIndex:L,endIndex:L,color:Bc});}TX=Bc;L++;}else{if(dY.length>0){L=dY[0].startIndex;}TX=null;}}return kK;};J.Ig=function(ZQ){return ZQ.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");};J.afz=function(bA){var blackListPattern=/^\s*(file|data|javascript|[a-z]):.*$/i;return blackListPattern.test(bA);};J.Qp=function(ih,cw){var dJ=""+ih;while(dJ.length<cw){dJ='0'+dJ;}return dJ;};J.aHN=function(dU){var hu=dU.getTimezoneOffset();hu=((hu<0?'+':'-')+J.Qp(parseInt(Math.abs(hu/60),10),2)+J.Qp(Math.abs(hu%60),2));return hu;};J.agQ=['Sun','Mon','Tue','Wed','Thurs','Fri','Sat'];J.Tx=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];J.afq=function(Wv){var aBO=/^\s*\w+\s+(\w+)\s+(\d+)\s+(\d+):(\d+):(\d+)\s+GMT[+-]?\d+\s+(\d+)\s*$/i,av=aBO.exec(Wv),anc,BI,ahq,ajj,alM,yS,aga;if(!av){return null;}else{anc=av[1].toLowerCase();ahq=av[2];ajj=av[3];alM=av[4];yS=av[5];aga=av[6];for(BI=0;BI<12;BI++){if(J.Tx[BI].toLowerCase()===anc){break;}}if(BI>=12){return null;}return new Date(Date.UTC(aga,BI,ahq,ajj,alM,yS));}};J.aij=function(dU){return(J.agQ[dU.getUTCDay()]+" "+J.Tx[dU.getUTCMonth()]+" "+dU.getUTCDate()+" "+dU.getUTCHours()+':'+dU.getUTCMinutes()+':'+dU.getUTCSeconds()+" "+"GMT+0000 "+dU.getUTCFullYear());};J.ayz=function(dU){return(J.agQ[dU.getUTCDay()]+" "+J.Tx[dU.getUTCMonth()]+" "+dU.getUTCDate()+" "+dU.getUTCFullYear());};J.axQ=function(dU){return(dU.getUTCHours()+':'+dU.getUTCMinutes()+':'+dU.getUTCSeconds()+" "+"GMT+0000");};J.pu=function(text){return text.replace(/[&<>\"\']/g,function(char){switch(char){case "&":return "&amp;";case "<":return "&lt;";case ">":return "&gt;";case "\"":return "&quot;";case "'":return "&apos;";default:throw new Error("Did not find a replacement character.");}});};J.yQ=function(text){return text.replace(/&amp;/g,'&').replace(/&gt;/g,'>').replace(/&lt;/g,'<').replace(/&quot;/g,'"').replace(/&apos;/g,'\'');};J.aFV=(function(chars){chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';function InvalidCharacterError(message){this.message=message;};InvalidCharacterError.prototype=new Error;InvalidCharacterError.prototype.name='InvalidCharacterError';function btoa(input){var str=String(input);for(var block,charCode,idx=0,map=chars,output='';str.charAt(idx|0)||(map='=',idx%1);output+=map.charAt(63&block>>8-idx%1*8)){charCode=str.charCodeAt(idx+=3/4);if(charCode>0xFF){throw new InvalidCharacterError("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");}block=block<<8|charCode;}return output;};function atob(input){var str=String(input).replace(/=+$/,'');if(str.length%4==1){throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.");}for(var bc=0,bs,buffer,idx=0,output='';buffer=str.charAt(idx++);~buffer&&(bs=bc%4?bs*64+buffer:buffer,bc++ %4)?output+=String.fromCharCode(255&bs>>(-2*bc&6)):0){buffer=chars.indexOf(buffer);}return output;};return{btoa:btoa,atob:atob};})();J.ow=(function(){var ow=['down','enter','leave','move','out','over','up'];if(window.navigator.pointerEnabled){var acd={};ow.forEach(function(adn){acd[adn]='pointer'+adn;});return acd;}if(window.navigator.msPointerEnabled){var alG={};for(var L=0;L<ow.length;L++){var Wd=ow[L];var aux='MSPointer'+Wd.charAt(0).toUpperCase()+Wd.slice(1);alG[Wd]=aux;}return alG;}return{};})();J.tG=(function(){return{Ai: ! !navigator.userAgent.match('Edge'),aHy:document.documentMode!==undefined,aHE:document.documentMode===8,aGZ:document.documentMode===9,aGX:document.documentMode===10,aHM:document.documentMode===11,azq:(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)),aEB:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)};})();J.PE=(function(ps){if(!ps|| !IPCC.J.trim(ps)){return 'regular';}return IPCC.J.trim(ps).toLowerCase();});J.aIj=function(arg,value){return typeof arg!=='undefined'?arg:value;};J.Ns=function(value){return Number(value.replace(/[a-z]+$/,''));};J.Pg=function(elem,propertyName){if(elem.currentStyle){return elem.currentStyle[propertyName];}else{return window.getComputedStyle(elem,null).getPropertyValue(propertyName);}};J.aiS=function(){if(this.pI===undefined){this.pI=document.createTextNode('');}return this.pI;};J.ahu=function(){if(this.ct===undefined){this.ct=document.createElement('textarea');this.pI=document.createTextNode('');this.ct.appendChild(J.pI);this.ct.style.position='absolute';this.ct.style.overflow='hidden';this.ct.style.width='80px';this.ct.style.height='80px';this.ct.style.resize='none';this.ct.style.top='-9999px';this.ct.style.left='-9999px';this.ct.style.whiteSpace='pre-wrap';this.ct.style.border=0;this.ct.style.padding='2px';document.body.appendChild(this.ct);}return this.ct;};J.UO=function(ct,fg,bo){var aaM=0.1;var Hd;var aaF=bo;while(aaM<=aaF){Hd=(aaM+aaF)/2;ct.style.fontSize=Hd+'px';if(ct.scrollHeight<=ct.offsetHeight){aaM=Hd+0.1;}else{aaF=Hd-0.1;}}var ali=(Hd-0.5)*0.95;var ck=fg>0?Math.min(ali,fg):ali;ct.style.fontSize=ck+'px';return ck;};J.Ri=function(wf,pM,Tu,sZ){if(wf(pM,Tu)!==Tu){return typeof(sZ)==='number'?sZ:Tu;}return pM;};J.OB=function(pM,auT,sZ){return J.Ri(Math.min,pM,auT,sZ);};J.LK=function(pM,auR,sZ){return J.Ri(Math.max,pM,auR,sZ);};J.are=(function(){var FC;return function(aqn,ky,azG){if(FC!==undefined&& !azG){setTimeout(ky.bind(null,FC),0);return;}arx(aqn,function(sS){FC=sS;ky(sS);});};function arx(OH,ky){var jB='jctqxvjmncyjagibfltptfzhknc';var hQ='@font-face {font-family:'+jB+';src:url(data:application/x-font-woff;charset=utf-8;base64,d09GRk9UVE8AAAQoAAkAAAAAA+QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAAC+AAAARkAAAEZ9R5YPk9TLzIAAAFEAAAAYAAAAGBKDUcOY21hcAAAAqwAAAAsAAAALAAMAFZoZWFkAAAA4AAAADYAAAA2+UdJt2hoZWEAAAEYAAAAJAAAACQIOgMbaG10eAAABBQAAAAUAAAAFAhtAW5tYXhwAAABPAAAAAYAAAAGAAVQAG5hbWUAAAGkAAABBQAAAQVCmPyecG9zdAAAAtgAAAAgAAAAIAADAAAAAQAAAAEAAM9NZw1fDzz1AAAD6AAAAADLUgMfAAAAAMtSAx8Ac//5AxwCmwAAAAgAAgAAAAAAAAABAAACm//5Ag4DHABzAAADHAABAAAAAAAAAAAAAAAAAAAABQAAUAAABQAAAAQCzwGQAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEFDQ1UAQAAfACMCm//5AkACmwAHAAAAAQAAAAAAAAAAAAAAIAAAAAAABgBOAAEAAAAAAAEAGwAAAAEAAAAAAAIABwBRAAEAAAAAAAYAGwBmAAMAAQQJAAEANgAbAAMAAQQJAAIADgBYAAMAAQQJAAYANgCBamN0cXh2am1uY3lqYWdpYmZsdHB0Znpoa25jAGoAYwB0AHEAeAB2AGoAbQBuAGMAeQBqAGEAZwBpAGIAZgBsAHQAcAB0AGYAegBoAGsAbgBjUmVndWxhcgBSAGUAZwB1AGwAYQByamN0cXh2am1uY3lqYWdpYmZsdHB0Znpoa25jAGoAYwB0AHEAeAB2AGoAbQBuAGMAeQBqAGEAZwBpAGIAZgBsAHQAcAB0AGYAegBoAGsAbgBjAAAAAAAAAQADAAEAAAAMAAQAIAAAAAQABAABAAAAI///AAAAIP///+EAAQAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEABAQAAQEBHGpjdHF4dmptbmN5amFnaWJmbHRwdGZ6aGtuYwABAQEq+Bv4HIsMHvgdAvgdA/cHhPmw+S8FiwwfkAwi95sMJPc5DCX3NA/3QREABAEBBg8qRUFkb2JlSWRlbnRpdHkwamN0cXh2am1uY3lqYWdpYmZsdHB0Znpoa25jamN0cXh2am1uY3lqYWdpYmZsdHB0Znpoa25jAAACAAEAAwMAAQAAAAAFAAUBAQIDFDNSDg7Q9xX5JxX5J4uL/Sf9J4sFDtj3LvkOFYv89fj1i4v49QWs/RUV/TaLi/k2+TaLBQ77JvcHixWL+NH4XouL/NEF/FCZFfhCi4v4tfxCiwUOAAEBAQn4HgwmkPeoEosU+WMVAAAAAAAAAAAAAAADFACBAxwAegI9AHM=)}';var fB;var oE;var afT;var afi,aeD;aEy();ass(function(sS){aqN();ky(sS);});function aEy(){fB=document.createElement('style');fB.innerText=hQ;OH.appendChild(fB);oE=document.createElement('div');oE.style.cssText='position: absolute;width: 100%;top:-9999px;left: -9999px;visibility: hidden;pointer-events: none;';afi=aee(oE,'monospace');aeD=aee(oE,'arial');OH.appendChild(oE);};function aqN(){clearInterval(afT);OH.removeChild(oE);OH.removeChild(fB);};function ass(bN){var apu=Date.now();var oJ=500;var aAP=25;afT=setInterval(function(){var ajQ=afi.offsetWidth===aeD.offsetWidth;if(ajQ||Date.now()-apu>oJ){bN(ajQ);}},aAP);};function aee(oE,hQ){var aqm='!!';var adZ=document.createElement('div');var Ho=document.createElement('span');Ho.style.cssText='font-size: 30px; font-weight: normal; font-style: normal; letter-spacing: 0px; white-space: nowrap;';Ho.innerText=aqm;Ho.style.fontFamily=jB+', '+hQ;adZ.appendChild(Ho);oE.appendChild(adZ);return Ho;}}})();J.apC=function(gJ,wy,mn){var we=document.createElement('div');if(!IPCC.J.tG.aEB){gJ=gJ.replace(/href="#/g,'href="#'+mn);gJ=gJ.replace(/url\("?#(.+?)"?\)/g,'url(#'+mn+'$1)');gJ=gJ.replace(/ id="/g,' id="'+mn);we.innerHTML=gJ;return we;}we.innerHTML=gJ;var axh=we.querySelectorAll('[id]');var axW=we.querySelectorAll("*");var asW=wy.replace(/"/g,'\\$&');var azS=['href','xlink:href'];var aoS=['fill','filter','clip-path','mask','marker-start','marker-mid','marker-end'];IPCC.J.forEach(axh,function(au){au.id=mn+au.id;});IPCC.J.forEach(axW,function(au){IPCC.J.forEach(azS,function(pQ){if(au.hasAttribute(pQ)&&au.getAttribute(pQ).indexOf('#')===0){au.setAttribute(pQ,au.getAttribute(pQ).replace('#',wy+'#'+mn));}});IPCC.J.forEach(aoS,function(pQ){if(au.hasAttribute(pQ)&&au.getAttribute(pQ).match(/^url\("?#/)){au.setAttribute(pQ,au.getAttribute(pQ).replace(/^url\("?#(.+?)\"?\)$/,'url("'+wy+'#'+mn+'$1")'));}});if(au.hasAttribute('style')){var Gg=au.style.cssText;Gg=Gg.replace(/url\("?#(.+?)"?\)/g,'url("'+asW+'#'+mn+'$1")');au.style.cssText=Gg;}});return we;};module.exports=J;},{}],29:[function(require,module,exports){var By=require('./Type');By.registerNamespace('IPCC');module.exports={Pagecounter:1,hk:true,afI:null,initializePageViewPlugin:require('./initializePageViewPlugin'),initializePageListPlugin:require('./initializePageListPlugin'),qI:require('./predefinedContextMenu'),YH:require('./indexOf'),PL:require('./setProperties'),aA:require('./PageItem'),Bm:require('./GetUniqueID'),Yl:require('./ViewerState'),tx:require('./Configuration'),aa:require('./Cursor'),jO:require('./Res'),aI:require('./Validate'),iG:require('./Debug'),fj:require('./MenuCommand'),PageLayout:require('./PageLayout'),ViewMode:require('./ViewMode'),FitType:require('./FitType'),ScaleTrigger:require('./ScaleTrigger'),PageEventArgs:require('./PageEventArgs'),ExceptionEventArgs:require('./ExceptionEventArgs'),OpenPageEventArgs:require('./OpenPageEventArgs'),PageList:require('./PageList'),Web:require('./Web/Web'),Type:By,J:require('./IPCC.Util'),du:require('./Art'),jT:require('./SelectTextController'),fD:require('./Matrix'),Xz:require('./ViewerModel'),ei:require('./ContextMenuController'),eE:require('./SvgUIDirector'),pR:require('./PropertyChangedEventArgs'),Ao:require('./StringBuilder'),cl:require('./MultiTouchController'),tj:require('./ImagePyramid'),dE:require('./SingleTouchController'),kC:require('./AddPolyMarkController'),oA:require('./SelectController'),eg:require('./AddRectangularMarkController'),lF:require('./AddFreehandMarkController'),lG:require('./AddLineMarkController'),dO:require('./MouseWheelController'),pn:require('./HandPanController'),mT:require('./RectangleZoomController'),qd:require('./MagnifierController'),ln:require('./EditMarksController'),AV:require('./RunMarksController'),FS:require('./Space'),hE:require('./Image'),Ry:require('./ImagePool'),En:require('./PyramidLevel'),wO:require('./PyramidTile'),};},{"./AddFreehandMarkController":12,"./AddLineMarkController":13,"./AddPolyMarkController":14,"./AddRectangularMarkController":15,"./Art":16,"./Configuration":19,"./ContextMenuController":20,"./Cursor":21,"./Debug":22,"./EditMarksController":23,"./ExceptionEventArgs":24,"./FitType":25,"./GetUniqueID":26,"./HandPanController":27,"./IPCC.Util":28,"./Image":30,"./ImagePool":31,"./ImagePyramid":32,"./MagnifierController":33,"./Matrix":34,"./MenuCommand":35,"./MouseWheelController":36,"./MultiTouchController":37,"./OpenPageEventArgs":38,"./PageEventArgs":39,"./PageItem":40,"./PageLayout":41,"./PageList":42,"./PropertyChangedEventArgs":43,"./PyramidLevel":44,"./PyramidTile":45,"./RectangleZoomController":46,"./Res":47,"./RunMarksController":48,"./ScaleTrigger":49,"./SelectController":50,"./SelectTextController":51,"./SingleTouchController":52,"./Space":53,"./StringBuilder":54,"./SvgUIDirector":55,"./Type":56,"./Validate":57,"./ViewMode":58,"./ViewerModel":59,"./ViewerState":60,"./Web/Web":124,"./indexOf":125,"./initializePageListPlugin":126,"./initializePageViewPlugin":127,"./predefinedContextMenu":128,"./setProperties":129}],30:[function(require,module,exports){var hE=function(lc,aO,ap,aM,hy,gW){IPCC.FS.call(this,0,0,0,0);this.width=ap;this.height=aM;this.hy=hy;this.gW=gW;this.aO=aO||0;this.eP=0;this.qD=true;this.awC={};this.yA=false;var V=this;this.aO=aO;this.get_url=function(gg,eN,aV){eN=eN||'Image';aV=aV||'';var CS=hE.IH(lc);var DX=false;if(/^[\x00-\x7F]*$/.test(CS)){DX=true;}if(aV===null||aV===''){if(eN==='Attributes'){var uZ='';if(!IPCC.tx.Jn()){uZ='&ContentType=png';}if(!DX){return gg+'/Page/q/'+aO.toString()+'/'+eN+'?DocumentID=e'+lc+uZ;}else{return gg+'/Page/q/'+aO.toString()+'/'+eN+'?DocumentID=u'+encodeURIComponent(CS)+uZ;}}else{if(eN==='SvgImage'){if(!DX){return gg+'/Page/q/'+aO.toString()+'?DocumentID=e'+lc+'&'+aV;}else{return gg+'/Page/q/'+aO.toString()+'?DocumentID=u'+encodeURIComponent(CS)+'&'+aV;}}if(!DX){return gg+'/Page/q/'+aO.toString()+'/'+eN+'?DocumentID=e'+lc+'&'+aV;}else{return gg+'/Page/q/'+aO.toString()+'/'+eN+'?DocumentID=u'+encodeURIComponent(CS)+'&'+aV;}}}else{if(eN==='SvgImage'){if(!DX){return gg+'/Page/q/'+aO.toString()+'?DocumentID=e'+lc+'&'+aV;}else{return gg+'/Page/q/'+aO.toString()+'?DocumentID=u'+encodeURIComponent(CS)+'&'+aV;}}if(!DX){return gg+'/Page/q/'+aO.toString()+'/'+eN+'?DocumentID=e'+lc+'&'+aV;}else{return gg+'/Page/q/'+aO.toString()+'/'+eN+'?DocumentID=u'+encodeURIComponent(CS)+'&'+aV;}}};this.get_urlArt=function(gg,eN,aV){eN=eN||'Art';aV=aV||'';if(aV===null||aV===''){if(eN==='Art'){return gg+'/Page/q/'+aO.toString()+'/'+eN+'?DocumentID=e'+lc;}}else{return gg+'/Page/q/'+aO.toString()+'/'+eN+'?DocumentID=e'+lc+'&'+aV;}};this.get_identifier=function(){return IPCC.hE.IH(lc);};this.get_encodedIdentifier=function(){return lc;};this.toString=function(){return 'Image("'+lc+'", '+this.aO+', '+this.width+' x '+this.height+', '+this.hy+', '+this.gW+')';};function amB(asR,K){if(K.abQ()){V.qD=true;V.yA=false;return;}var Yj=asR.split(',');var nb=false;for(var aU=0;aU<Yj.length;aU++){if(Yj[aU]==="SVG"||Yj[aU]==="svg"){if(IPCC.tx.Jn()){V.yA=true;V.qD=false;}else{V.yA=false;}nb=true;break;}}if(!nb){V.yA=false;V.qD=true;}if(K){if(K.RE){K.RE(V.yA);}}};this.TC=function(gg,K,Ae){K.aO=this.aO;var mq=0;var nx=K.BE();if(nx){if(document.documentMode<9){nx=false;}}var sd=true;if(K.kQ()===0){sd=false;}var qZ=function(eB,aC){try{if(eB===null){throw new IPCC.Web.UI.ImGearArgumentException(null,'Unable to load the specified image. Failed to obtain Image attributes. Returned JSON from the server is null');}if(eB.errorCode){if(eB.errorCode==='SvgNotAvailable'){nx=false;V.width= +(eB.pageAttributes.imageWidth);V.height= +(eB.pageAttributes.imageHeight);V.hy= +(eB.pageAttributes.imageXResolution);if(V.hy<=0){V.hy=72;}V.gW= +(eB.pageAttributes.imageYResolution);if(V.gW<=0){V.gW=72;}V.eP= +(eB.pageAttributes.pageCount);V.qD=eB.pageAttributes.isRaster!=='false';amB(eB.pageAttributes.contentType,K);}}else{V.width= +(eB.imageWidth);V.height= +(eB.imageHeight);V.hy= +(eB.imageXResolution);if(V.hy<=0){V.hy=72;}V.gW= +(eB.imageYResolution);if(V.gW<=0){V.gW=72;}V.eP= +(eB.pageCount);V.qD=eB.isRaster!=='false';amB(eB.contentType,K);}var nQ=aC.getResponseHeader("Accusoft-Data-Encrypted");var Kd=false;if(nQ==="true"){Kd=true;}K.ajh(Kd);if(Ae){Ae();}}catch(e){K.aK('openPage',e);if(typeof(K.aP)==='function'){var dn=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dn.exception=e;dn.pageNumber=K.aO;K.aP('pageOpenFailed',dn);}}};function OC(){nx=false;if(mq<1){var gT={method:'GET',url:V.get_url(gg,'Attributes'),headers:{'Content-Type':'application/json'}};if(sd===true){gT.timeout=K.kQ();}IPCC.J.oZ.fE(gT).then(eZ,fM);mq++;}};var aGJ=function(gJ,aC){var ap;var aM;function asw(){var Ug;try{Ug=JSON.parse(gJ);}catch(bw){Ug=undefined;nx=true;}return Ug;};try{ap=gJ.match(/width=\"([0-9.]+)\"/);aM=gJ.match(/height=\"([0-9.]+)\"/);if(ap&&aM){ap=Number(ap[1]);aM=Number(aM[1]);}else{throw "error";}if(isNaN(ap)||isNaN(aM)){throw "error";}V.width=ap;V.height=aM;V.hy=72;V.gW=72;V.yA=true;V.qD=false;if(K){if(typeof(K.RE==='function')){K.RE(V.yA);}}if(Ae){Ae();}}catch(e){var av=asw();if(av){qZ(av,aC);return;}if(nx){if(mq<1){nx=false;setTimeout(OC,10);return;}}K.aK('openPage',e);if(typeof(K.aP)==='function'){var dn=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dn.exception=e;dn.pageNumber=K.aO;K.aP('pageOpenFailed',dn);}}};function eZ(aC){var av=null,dC;try{if(!nx){av=JSON.parse(aC.responseText);qZ(av,aC);}else{var lM;var nQ=aC.getResponseHeader("Accusoft-Data-Encrypted");if(nQ==='true'&&K.jj()===true){var ty=IPCC.Web.fR.sU.uG(aC.getResponseHeader("Accusoft-Data-SK"));var bD=IPCC.Web.Jw(ty,jw);var eS=IPCC.Web.Iq(aC);var uN=IPCC.Web.El(eS,bD,jw);lM=IPCC.Web.fR.FT.nz(uN);}else{lM=aC.responseText;}var aaJ;if(lM.length>=1000){aaJ=lM.substring(0,1000);}else{aaJ=lM.substring(0,lM.length);}aGJ(aaJ,aC);}}catch(ex){if(nx){nx=false;if(mq<1){setTimeout(OC,10);return;}}dC="Attributes parsing error, Error message = "+ex.message;throw new IPCC.Web.UI.ImGearArgumentException(null,dC);}};function fM(av){try{var dC,nn,lD;if(!av.response){throw new IPCC.Web.UI.ImGearHttpException(av.response.status,"Client timed out on load");}if(av.response.status===403){mq++;if(av.response.statusText&&av.response.statusText!==""){dC="Expired viewer session ID, error message from the server: "+av.response.statusText;}else{dC="Expired viewer session ID. Np error text message was received from the server:";}throw new IPCC.Web.UI.ImGearHttpException(av.response.status,dC);}if(nx){nx=false;if(mq<1){setTimeout(OC,10);return;}}lD=av.response.getResponseHeader('Accusoft-Status-Message');if(lD){var rU;nn=av.response.getResponseHeader('Accusoft-Status-Number');if(IPCC.Web.yE(nn)){rU=parseInt(nn,10);}throw new IPCC.Web.UI.ImGearHttpException(av.response.status,lD,rU);}else{if(av.response.statusText&&av.response.statusText!==""){dC="Error message from the service: "+av.response.statusText;}else{dC="HTTP Error was received from the image server but the server did not provide any error description.";}throw new IPCC.Web.UI.ImGearHttpException(av.response.status,dC);}}catch(e){if(nx){nx=false;if(mq<1){setTimeout(OC,10);return;}}K.aK('openPage',e);if(typeof(K.aP)==='function'){var dn=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dn.exception=e;dn.pageNumber=K.aO;K.aP('pageOpenFailed',dn);}}};var jw=IPCC.Web.Gm.ahU(4,IPCC.Web.Qw());var pL=IPCC.Web.fR.Jp.nz(jw);var gT={method:'GET',cache:true};if(!nx){gT.url=this.get_url(gg,'Attributes');gT.headers={'Content-Type':'application/json'};}else{var bA;if(K.jj()===true){jw=IPCC.Web.Gm.Sn(4,IPCC.Web.Qw());pL=IPCC.Web.fR.Jp.nz(jw);bA=this.get_url(gg,'SvgImage','Scale=1&ContentType='+IPCC.J.Af+'&iv='+pL);}else{bA=this.get_url(gg,'SvgImage','Scale=1&ContentType='+IPCC.J.Af);}gT.url=bA;}IPCC.J.oZ.fE(gT).then(eZ,fM);};this.avo=function(gg,K,Ae){K.aO=this.aO;var mq=0;var sd=true;if(K.kQ()===0){sd=false;}var qZ=function(eB,aC){try{if(eB===null){throw new IPCC.Web.UI.ImGearArgumentException(null,'Unable to load the specified image. Failed to obtain Image attributes. Returned JSON from the server is null');}V.width= +(eB.imageWidth);V.height= +(eB.imageHeight);V.hy= +(eB.imageXResolution);if(V.hy<=0){V.hy=72;}V.gW= +(eB.imageYResolution);if(V.gW<=0){V.gW=72;}V.eP= +(eB.pageCount);V.qD=true;var nQ=aC.getResponseHeader("Accusoft-Data-Encrypted");var Kd=false;if(nQ==="true"){Kd=true;}K.ajh(Kd);if(Ae){Ae();}}catch(e){K.aK('openPage',e);if(typeof(K.aP)==='function'){var dn=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dn.exception=e;dn.pageNumber=K.aO;K.aP('pageOpenFailed',dn);}}};function eZ(aC){try{var gl=aC.status,av,dC;if(gl===200){av=null;try{av=JSON.parse(aC.responseText);qZ(av,aC);}catch(ex){dC="Attributes parsing error, Error meesage = "+ex.message;throw new IPCC.Web.UI.ImGearArgumentException(null,dC);}}}catch(e){K.aK('openPageForRaster',e);if(typeof(K.aP)==='function'){var dn=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dn.exception=e;dn.pageNumber=K.aO;K.aP('pageOpenFailed',dn);}}};function fM(av){try{var gl=av.response.status,dC,lD,nn;if(!av.response){throw new IPCC.Web.UI.ImGearHttpException(gl,"Client timed out on load");}if(gl===403){mq++;if(av.response.statusText&&av.response.statusText!==""){dC="Expired viewer session ID, error message from the server: "+av.response.statusText;}else{dC="Expired viewer session ID. No error text message was received from the server:";}throw new IPCC.Web.UI.ImGearHttpException(gl,dC);}lD=av.response.getResponseHeader('Accusoft-Status-Message');if(lD){var rU;nn=av.response.getResponseHeader('Accusoft-Status-Number');if(IPCC.Web.yE(nn)){rU=parseInt(nn,10);}throw new IPCC.Web.UI.ImGearHttpException(gl,lD,rU);}else{if(av.response.statusText&&av.response.statusText!==""){dC="Error message from the service: "+av.response.statusText;}else{dC="HTTP Error was received from the image server but the server did not provide any error description.";}throw new IPCC.Web.UI.ImGearHttpException(gl,dC);}}catch(e){K.aK('openPageForRaster',e);if(typeof(K.aP)==='function'){var dn=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dn.exception=e;dn.pageNumber=K.aO;K.aP('pageOpenFailed',dn);}}};var acb={method:'GET',url:this.get_url(gg,'Attributes'),headers:{'Content-Type':'application/json'}};if(sd===true){acb.timeout=K.kQ();}IPCC.J.oZ.fE(acb).then(eZ,fM);};return this;};hE.prototype.clone=function(){var VT=new hE(this.get_encodedIdentifier(),this.aO,this.width,this.height,this.hy,this.gW);VT.eP=this.eP;VT.qD=this.qD;return VT;};hE.prototype.equals=function(G){if(this.get_encodedIdentifier()!==G.get_encodedIdentifier()){return false;}if(this.aO!==G.aO){return false;}return true;};hE.prototype.qK=8;hE.prototype.sC=0.000001;hE.akA=function(aV){var GN=aV.referenceDocumentIdentifier;var acH=hE.sf(GN);var gD=aV.encodedDocumentIdentifier;var kt=aV.documentIdentifier;var eY;if(gD===''){gD=undefined;}if(kt===''){kt=undefined;}if(GN&&GN!==''){if(gD===acH){gD=undefined;}if(kt===GN){kt=undefined;}}if(kt){eY=IPCC.hE.sf(kt);if(gD){if(gD!==eY){throw new IPCC.Web.UI.ImGearArgumentException('documentIdentifier','When both are specified, documentIdentifier and encodedDocumentIdentifier must reference the same document (and encodedDocumentIdentifier must be base64-encoded).');}}else{gD=eY;}}else{if(gD){kt=IPCC.hE.IH(gD);}}if(!gD){kt=GN;gD=acH;}var bb=aV.pageNumber;var acO=aV.referencePageNumber;if(bb===acO){bb=undefined;}if(bb!==0&& !bb){bb=acO;}aV.encodedDocumentIdentifier=gD;aV.documentIdentifier=kt;aV.pageNumber=bb;};hE.sf=function(jF){if(!jF||jF===''){return '';}var nj=[];var L;for(L=0;L<jF.length;L++){nj.push(jF.charCodeAt(L)%256);nj.push(Math.floor(jF.charCodeAt(L)/256));}nj.push(0);nj.push(0);var PS='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_';var ot=[],vb;for(L=0;L<nj.length-1;L+=3){vb=nj[L]*0x10000+nj[L+1]*0x100+nj[L+2];ot.push(PS.charAt(Math.floor(vb/0x40000)));ot.push(PS.charAt(Math.floor(vb/0x1000)%0x40));ot.push(PS.charAt(Math.floor(vb/0x40)%0x40));ot.push(PS.charAt(vb%0x40));}var Rz=Math.ceil(jF.length*16/6);while(ot.length>Rz){ot.pop();}if((ot.length%4)===3){ot.push('1');}else if((ot.length%4)===2){ot.push('2');}else if((ot.length%4)===0){ot.push('0');}return ot.join('');};hE.IH=function(lc){if(!lc||lc===''){return '';}var afc=lc.length-1;var LG=[],vb;var qF,nj=[],ov=[];var L;for(L=0;L<afc;L++){qF=lc.charCodeAt(L);if(qF>64&&qF<91){ov.push(qF-65);}else if(qF>96&&qF<123){ov.push(qF-97+26);}else if(qF>47&&qF<58){ov.push(qF-48+52);}else if(qF===45){ov.push(62);}else if(qF===95){ov.push(63);}else{return '';}}ov.push(0);ov.push(0);ov.push(0);for(L=0;L<ov.length-3;L+=4){vb=ov[L]*0x40000+ov[L+1]*0x1000+ov[L+2]*0x40+ov[L+3];nj.push(Math.floor(vb/0x10000));nj.push(Math.floor(vb/0x100)%256);nj.push(vb%256);}for(L=0;L<nj.length-1;L+=2){LG.push(String.fromCharCode(nj[L]+nj[L+1]*0x100));}var Rz=Math.floor(afc*6/16);while(LG.length>Rz){LG.pop();}return LG.join('');};module.exports=hE;},{}],31:[function(require,module,exports){var Ry=function(){this.cT=[];this.parentElementID='';this.lockTile=function(fs){var cD,L,VQ,VP;if(this.ZA(fs)){return;}VQ=0;for(L=this.cT.length-1;L>=0;L--){if(!(this.cT[L].locked)){VQ++;VP=L;}}if(VQ>4){cD=this.cT[VP];this.uiDirector.alP(cD);this.cT.splice(VP,1);}cD=new axA();cD.pool=this;this.uiDirector.avy(cD);this.cT.push(cD);cD.locked=true;cD.tile=fs;fs.poolItem=cD;return;};this.ZA=function(fs){var cD,L;if(this.locked){return true;}for(L=0;L<this.cT.length;L++){if(this.cT[L].tile===fs){cD=this.cT[L];cD.locked=true;fs.poolItem=cD;return true;}}return false;};this.agF=function(fs){var ic,L;ic=fs.poolItem;if(ic!==undefined&&ic.locked){this.uiDirector.ayt(ic);ic.locked=false;fs.poolItem=undefined;for(L=0;L<this.cT.length;L++){if(this.cT[L]===ic){this.cT.splice(L,1);this.cT.push(ic);return;}}}};return this;};Ry.prototype.aEc=function(){var L;for(L=0;L<this.cT.length;L++){if(!this.cT[L].locked){this.uiDirector.alP(this.cT[L]);}}};var axA=function(){this.locked=false;this.loaded=false;this.tile=undefined;this.pool=undefined;this.elementID='';return this;};module.exports=Ry;},{}],32:[function(require,module,exports){var tj=function(){this.fH=[];return this;};tj.prototype.aCK=function(bX,ed){var dG=bX.nX();var L,lL,oC;var dg=1;var adp;var yh=[];var wi=[];var vt=[];var DW,MC;oC=this.fH.length;for(L=0;L<this.fH.length;L++){if(this.fH[L].dG>dG){oC=L;break;}}lL=oC-1;if(lL<0){lL=0;}if(oC>=this.fH.length){oC=this.fH.length-1;}if(lL!==oC){adp=(dG-this.fH[lL].dG)/(this.fH[oC].dG-this.fH[lL].dG);dg=adp*1.0;if(dg>=0.15){dg=1;lL=oC;}if(dg<=0.15){dg=1;oC=lL;}}wi=this.fH[lL].Sb(ed);vt=this.fH[oC].Sb(ed);var Rg=function(oy){var L;for(L=0;L<oy.length;L++){oy[L].level.pool.ZA(oy[L]);}};var UC=function(oy){var amS=[];var L;for(L=0;L<oy.length;L++){if(!oy[L].get_isLockedAndLoaded()){amS.push(oy[L]);}}return amS;};var ajg=function(oy){var age=[];var L;for(L=0;L<oy.length;L++){if(oy[L].get_isLockedAndLoaded()){age.push(oy[L]);}}return age;};if(lL>0&&lL===oC&&this.fH[oC].tiles.length>1){lL=oC-1;wi=this.fH[lL].Sb(ed);}Rg(wi);yh=UC(wi);if(yh.length>0){for(DW=lL-1;DW>=0;DW--){MC=this.fH[DW].Sb(ed);Rg(MC);if(UC(MC).length<1){break;}}if(DW<0){wi=ajg(wi);}else{lL=DW;wi=MC;dg=1;}}else{Rg(vt);yh=UC(vt);}Rg(vt);vt=ajg(vt);if(yh.length>3){yh.splice(3,yh.length-3);}function atb(){var av;function Zr(Cy){var av='',L,bE;if(Cy.length<1){return '';}bE=Cy[0].level;av+='level '+bE.id.toString()+' - ';for(L=0;L<Cy.length;L++){if(L>0){av+=', ';}av+='('+(Cy[L].x/bE.os).toString()+','+(Cy[L].y/bE.zZ).toString()+')';if(Cy[L].get_isLockedAndLoaded()){av+='*';}}return av;};av='tilesToRequest: '+Zr(yh)+'<br/>';av+='opaqueTiles: '+Zr(wi)+'<br/>';av+='translucentTiles: '+Zr(vt)+'<br/>';av+='opacity: '+dg.toString()+'<br/>';av+='ati: '+dG.toString()+'<br/>';av+='bX: '+bX.toString()+'<br/>';return av;};return{opaqueTiles:wi,translucentTiles:vt,opacity:dg,tilesToRequest:yh,toString:atb,ati:dG,bX:bX.toString()};};tj.prototype.azh=function(pD){var CR=[];var tW=[];var L,j;var bE,tile;for(L=0;L<this.fH.length;L++){bE=this.fH[L];for(j=0;j<bE.tiles.length;j++){tile=bE.tiles[j];if(tile.poolItem!==undefined){CR.push(tile);}}}var aji=function(WY,amL){var L,j,Ut,Vw;for(L=0;L<amL.length;L++){Ut=amL[L];Vw=true;for(j=0;j<WY.length;j++){if(Ut===WY[j]){Vw=false;break;}}if(Vw){WY.push(Ut);}}};tW=pD.tilesToRequest.concat();aji(tW,pD.opaqueTiles);aji(tW,pD.translucentTiles);for(L=CR.length-1;L>=0;L--){var arO=CR[L];for(j=0;j<tW.length;j++){if(tW[j]===arO){CR.splice(L,1);break;}}}for(L=0;L<CR.length;L++){CR[L].unlock();}for(L=0;L<tW.length;L++){tW[L].relock();}for(L=0;L<tW.length;L++){if(tW[L].poolItem===undefined){tW[L].lock();}}};tj.prototype.unlockAllItems=function(){var L,j,bE;for(L=0;L<this.fH.length;L++){bE=this.fH[L];for(j=0;j<bE.tiles.length;j++){if(bE.tiles[j].poolItem!==undefined){bE.pool.agF(bE.tiles[j]);}}}};tj.prototype.aFB=function(){var L;for(L=0;L<this.fH.length;L++){this.fH[L].pool.aEc();}};tj.prototype.toString=function(){var av='',L,j,bE;for(L=0;L<this.fH.length;L++){bE=this.fH[L];av+='Level '+L.toString()+':   scaleFactor='+bE.dG.toString()+'  image='+bE.width.toString()+'x'+bE.height.toString()+'  tile='+bE.os.toString()+'x'+bE.zZ.toString()+'\n';for(j=0;j<bE.tiles.length;j++){if(j>0){av+=', ';}av+='('+bE.tiles[j].x.toString()+', '+bE.tiles[j].y.toString()+')';}av+='\n';}return av;};tj.prototype.expandTile=function(fs,abR,abn,adM,abY,bE){fs.x=IPCC.J.OB(abR-fs.xH,0,abR,abR-fs.xH);fs.y=IPCC.J.OB(abn-fs.wN,0,abn,abn-fs.wN);fs.ap=IPCC.J.LK(adM+(2*fs.xH),bE.width,adM);fs.aM=IPCC.J.LK(abY+(2*fs.wN),bE.height,abY);if(fs.x+fs.ap>bE.width){fs.x=fs.x-fs.xH;fs.ap=bE.width-fs.x;fs.xH=0;}if(fs.y+fs.aM>bE.height){fs.y=fs.y-fs.wN;fs.wN=0;fs.aM=bE.height-fs.y;}return fs;};tj.prototype.createPyramid=function(ij,K){var auh=6000000;var amR=5000;var os=1024;var auW=os*os*3*150;var adJ=0.5;var atK=2;var aG=K.bY();var zE=aG.width*aG.height*3;var wA;var bE;var dG;var L;var bm,cu;var tile;var Ev,DB;this.fH=[];if(aG.qD){dG=1.0;wA=zE*dG*dG;while(this.fH.length<atK||wA>amR){bE=new IPCC.En();bE.dG=dG;this.fH.unshift(bE);dG*=adJ;wA=zE*dG*dG;}}else{if(K.qk()===true){zE=aG.width*aG.height;}dG=Math.sqrt(amR/zE);var aEL=dG*aG.hy;dG=Math.ceil(aEL)/aG.hy;wA=zE*dG*dG;if(K.qk()===false){while(wA<auW){bE=new IPCC.En();bE.dG=dG;this.fH.push(bE);dG/=adJ;wA=zE*dG*dG;}}else{bE=new IPCC.En();bE.dG=1;this.fH.push(bE);}}aG.qK=this.fH[this.fH.length-1].dG*8;for(L=0;L<this.fH.length;L++){bE=this.fH[L];bE.RU=85;if(L===this.fH.length-1){bE.RU=100;}bE.pyramid=this;bE.id=L;bE.pool=new IPCC.Ry();bE.pool.uiDirector=ij;wA=zE*bE.dG*bE.dG;bE.width=Math.round(aG.width*bE.dG);bE.height=Math.round(aG.height*bE.dG);bE.os=bE.width;bE.zZ=bE.height;if(L>2&&L>this.fH.length-2){bE.os=Math.min(os/2,bE.width);bE.zZ=Math.min(os/2,bE.height);}if(wA>auh){bE.os=Math.min(os,bE.width);bE.zZ=Math.min(os,bE.height);}bE.tiles=[];Ev=bE.os;for(bm=0;bm<bE.width;bm+=Ev){Ev=bE.os;if(bm+Ev*1.25>bE.width){Ev=bE.width-bm;}DB=bE.zZ;for(cu=0;cu<bE.height;cu+=DB){DB=bE.zZ;if(cu+DB*1.25>bE.height){DB=bE.height-cu;}tile=new IPCC.wO();tile.level=bE;if(K.qk()===false){var OZ='jpeg';if(bE.RU>=100){OZ='png';}tile.contentType=OZ;tile.wN=2;tile.xH=2;tile=this.expandTile(tile,bm,cu,Ev,DB,bE);if(tile.ap!==bE.width||tile.aM!==bE.height){tile.url=K.Xj('Tile/'+tile.x.toString()+'/'+tile.y.toString()+'/'+tile.ap.toString()+'/'+tile.aM.toString(),'Scale='+bE.dG.toString()+'&Quality='+bE.RU+'&ContentType='+OZ);}else{tile.url=K.Xj('','Scale='+bE.dG.toString()+'&Quality='+bE.RU+'&ContentType='+OZ);}}else{tile.url=K.Xj('','Scale='+bE.dG.toString()+'&ContentType='+IPCC.J.Af);tile.aIZ=ij.acQ();}tile.right=tile.x+tile.ap;tile.bottom=tile.y+tile.aM;bE.tiles.push(tile);}}}};module.exports=tj;},{}],33:[function(require,module,exports){var qd=function(){this.bJ=false;this.K=false;};qd.prototype.mt=function(K){this.K=K;};qd.prototype.ep=function(){this.K=false;};qd.prototype.af=function(){if(this.bJ){this.K.aR().hideMagnifier();this.bJ=false;}};qd.prototype.rS=function(){this.af();};qd.prototype.lg=function(F){this.af();if(F.domEvent.button===0){this.bJ=true;this.K.aR().showMagnifier(F.windowPoint);this.K.dh();}};qd.prototype.lA=function(F){if(F.domEvent.button!==0){this.af();}if(this.bJ){this.K.aR().showMagnifier(F.windowPoint);this.K.dh();}};qd.prototype.jW=function(){this.af();this.K.dh();};qd.prototype.nB=function(F){var as=this.K.fb();if(F.windowPoint.x<=0||F.windowPoint.x>=as.width-2){this.af();}if(F.windowPoint.y<=0||F.windowPoint.y>=as.height-2){this.af();}};module.exports=qd;},{}],34:[function(require,module,exports){var fD=function(gB,hW,jt,gk,eL,fI){if(arguments.length===0){gB=gk=1;hW=jt=eL=fI=0;}this.ahA=function(){return gB*gk-hW*jt;};this.aHU=function(){return gB===1&&hW===0&&jt===0&&gk===1&&eL===0&&fI===0;};this.rj=function(){return gB;};this.oM=function(){return hW;};this.qz=function(){return jt;};this.rN=function(){return gk;};this.xA=function(){return eL;};this.yw=function(){return fI;};this.append=function(bX){var GT=gB*bX.rj()+hW*bX.qz();var HQ=gB*bX.oM()+hW*bX.rN();var Hk=jt*bX.rj()+gk*bX.qz();var Hc=jt*bX.oM()+gk*bX.rN();var Iz=eL*bX.rj()+fI*bX.qz()+bX.xA();var HA=eL*bX.oM()+fI*bX.rN()+bX.yw();gB=GT;hW=HQ;jt=Hk;gk=Hc;eL=Iz;fI=HA;};this.equals=function(G){if(gB!==G.rj()){return false;}if(hW!==G.oM()){return false;}if(jt!==G.qz()){return false;}if(gk!==G.rN()){return false;}if(eL!==G.xA()){return false;}if(fI!==G.yw()){return false;}return true;};this.vu=function(){if(!this.agJ()){throw new IPCC.Web.UI.ImGearArgumentException(null,'Matrix has no inverse');}var Gj=this.ahA();var GT=gk/Gj;var HQ= -hW/Gj;var Hk= -jt/Gj;var Hc=gB/Gj;var Iz=(jt*fI-gk*eL)/Gj;var HA=(hW*eL-gB*fI)/Gj;gB=GT;hW=HQ;jt=Hk;gk=Hc;eL=Iz;fI=HA;};this.IG=function(bX){var GT=bX.rj()*gB+bX.oM()*jt;var HQ=bX.rj()*hW+bX.oM()*gk;var Hk=bX.qz()*gB+bX.rN()*jt;var Hc=bX.qz()*hW+bX.rN()*gk;var Iz=bX.xA()*gB+bX.yw()*jt+eL;var HA=bX.xA()*hW+bX.yw()*gk+fI;gB=GT;hW=HQ;jt=Hk;gk=Hc;eL=Iz;fI=HA;};this.yK=function(kD,pA,lY,mW){eL-=lY;fI-=mW;this.scale(kD,pA);eL+=lY;fI+=mW;};this.anz=function(){gB=gk=1;hW=jt=eL=fI=0;};this.transform=function(bx){var bm=bx.x*gB+bx.y*jt+eL;var cu=bx.y*gk+bx.x*hW+fI;return new IPCC.Web.UI.Point(bm,cu);};this.nc=function(Zm,Za){eL+=Zm;fI+=Za;};this.aup=function(G){if(Math.abs(gB-G.rj())>1e-8){return false;}if(Math.abs(hW-G.oM())>1e-8){return false;}if(Math.abs(jt-G.qz())>1e-8){return false;}if(Math.abs(gk-G.rN())>1e-8){return false;}if(Math.abs(eL-G.xA())>1e-8){return false;}if(Math.abs(fI-G.yw())>1e-8){return false;}return true;};this.toString=function(){return '{'+gB.toFixed(6)+', '+hW.toFixed(6)+', '+jt.toFixed(6)+', '+gk.toFixed(6)+', '+eL.toFixed(3)+', '+fI.toFixed(3)+'}';};this.parse=function(){};this.clone=function(){return new IPCC.fD(gB,hW,jt,gk,eL,fI);};this.OV=function(hA){gB=hA.rj();hW=hA.oM();jt=hA.qz();gk=hA.rN();eL=hA.xA();fI=hA.yw();};this.aoq=function(aQ,as){gB=1;gk=as.gW*aQ.hy/(aQ.gW*as.hy);hW=jt=eL=fI=0;};this.XA=function(bg,aQ,as){switch(bg){case IPCC.Web.UI.FitType.FullImage:this.aoW(aQ,as);break;case IPCC.Web.UI.FitType.FullWidth:this.agp(aQ,as);break;case IPCC.Web.UI.FitType.FullHeight:this.agu(aQ,as);break;case IPCC.Web.UI.FitType.ActualSize:this.afZ(aQ,as);break;case IPCC.Web.UI.FitType.OneToOne:if(!(aQ.qD)){this.afZ(aQ,as);}else{this.aoJ(aQ,as);}break;}};this.agp=function(aQ,as){var mJ=this.pJ(aQ);var Ca=as.width-2;if(Ca<1){Ca=1;}var ae=Ca/mJ.width;this.scale(ae,ae);mJ=this.pJ(aQ);if(mJ.y<0){this.nc(0,-mJ.y);}};this.agu=function(aQ,as){var mJ=this.pJ(aQ);var Ca=as.height-2;if(Ca<1){Ca=1;}var ae=Ca/mJ.height;this.scale(ae,ae);mJ=this.pJ(aQ);if(mJ.x<0){this.nc(-mJ.x,0);}};this.aoW=function(aQ,as){var kv=this.clone();kv.agp(aQ,as);this.agu(aQ,as);if(Math.max(Math.abs(gB),Math.abs(hW))>Math.max(Math.abs(kv.rj()),Math.abs(kv.oM()))){this.OV(kv);}};this.afZ=function(aQ,as){var mJ=this.pJ({x:0,y:0,width:aQ.hy,height:aQ.gW});var ae=as.hy/mJ.width;this.scale(ae,ae);};this.aoJ=function(aQ,as){var mJ=this.pJ({x:0,y:0,width:1,height:1});var ae=1/Math.min(mJ.width,mJ.height);this.scale(ae,ae);if(Math.abs(gB-1)<0.0001){gB=1;}if(Math.abs(gk-1)<0.0001){gk=1;}};return this;};fD.prototype.agJ=function(){return Math.abs(this.ahA())>1e-14;};fD.prototype.rotate=function(za){this.acl(za,0,0);};fD.prototype.acl=function(za,lY,mW){var Gp=za*Math.PI*2/360;var iy=Math.sin(Gp);var fv=Math.cos(Gp);var bX=new IPCC.fD(fv,iy,-iy,fv,lY*(1-fv)+mW*iy,mW*(1-fv)-lY*iy);this.append(bX);};fD.prototype.aCT=function(za,lY,mW){var Gp=za*Math.PI*2/360;var iy=Math.sin(Gp);var fv=Math.cos(Gp);var bX=new IPCC.fD(fv,iy,-iy,fv,lY*(1-fv)+mW*iy,mW*(1-fv)-lY*iy);this.IG(bX);};fD.prototype.aHm=function(za){this.aCT(za,0,0);};fD.prototype.scale=function(kD,pA){var bX=new IPCC.fD(kD,0,0,pA,0,0);this.append(bX);};fD.prototype.aHQ=function(kD,pA,lY,mW){var bX=new IPCC.fD(kD,0,0,pA,lY*(1-kD),mW*(1-pA));this.IG(bX);};fD.prototype.aHP=function(kD,pA){var bX=new IPCC.fD(kD,0,0,pA,0,0);this.IG(bX);};fD.prototype.skew=function(qp,qR){var bX=new IPCC.fD(1,Math.tan(qR*Math.PI*2/360),Math.tan(qp*Math.PI*2/360),1,0,0);this.append(bX);};fD.prototype.aHa=function(qp,qR){var bX=new IPCC.fD(1,Math.tan(qR*Math.PI*2/360),Math.tan(qp*Math.PI*2/360),1,0,0);this.IG(bX);};fD.prototype.aGV=function(Zm,Za){var bX=new IPCC.fD(1,0,0,1,Zm,Za);this.IG(bX);};fD.prototype.xz=function(h){var fh=this.transform({x:h.x,y:h.y});var lJ=fh.x;var oW=fh.x;var mL=fh.y;var mI=fh.y;fh=this.transform({x:h.x+h.width,y:h.y});lJ=Math.min(lJ,fh.x);oW=Math.max(oW,fh.x);mL=Math.min(mL,fh.y);mI=Math.max(mI,fh.y);fh=this.transform({x:h.x+h.width,y:h.y+h.height});lJ=Math.min(lJ,fh.x);oW=Math.max(oW,fh.x);mL=Math.min(mL,fh.y);mI=Math.max(mI,fh.y);fh=this.transform({x:h.x,y:h.y+h.height});lJ=Math.min(lJ,fh.x);oW=Math.max(oW,fh.x);mL=Math.min(mL,fh.y);mI=Math.max(mI,fh.y);return new IPCC.Web.UI.Rectangle(lJ,mL,oW-lJ,mI-mL);};fD.prototype.apt=function(aQ,as,fL){var agr=this.clone();agr.vu();var aDK=agr.transform({x:fL.x+fL.width/2,y:fL.y+fL.height/2});var ae=Math.min(as.width/fL.width,as.height/fL.height);ae-=1e-10;var jI=this.nX();if(jI*ae>aQ.qK){ae=aQ.qK/jI;}if(jI*ae<aQ.sC){ae=aQ.sC/jI;}this.scale(ae,ae);this.afV(as,aDK);};fD.prototype.NK=function(aQ,as,ed){this.apt(aQ,as,this.xz(ed));};fD.prototype.aHb=function(as){this.yK(1,-1,as.width/2,as.height/2);};fD.prototype.aoe=function(as){this.yK(-1,1,as.width/2,as.height/2);};fD.prototype.XW=function(aDm,air){var acC=this.transform(aDm);this.nc(air.x-acC.x,air.y-acC.y);};fD.prototype.afV=function(as,bW){var ajv=this.transform(bW);this.nc(as.width/2-ajv.x,as.height/2-ajv.y);};fD.prototype.ke=function(aG,as){var bm=0,cu=0,end;var nL=this.pJ(aG);if(nL.width<as.width){bm=(as.width-nL.width)/2-nL.x;}else{end=nL.x+nL.width;if(end<as.width){bm=as.width-end;}if(nL.x>0){bm= -nL.x;}}if(nL.height<as.height){cu=(as.height-nL.height)/2-nL.y;}else{end=nL.y+nL.height;if(end<as.height){cu=as.height-end;}if(nL.y>0){cu= -nL.y;}}this.nc(bm,cu);};fD.prototype.pJ=function(aG){return this.xz({x:0,y:0,width:aG.width,height:aG.height});};fD.prototype.ayD=function(){var iL,CE,iW,xF,acV,ip;iL=this.transform({x:0,y:0});CE=this.transform({x:0,y:1});iW=this.transform({x:1,y:0});xF=Math.atan2(CE.y-iL.y,CE.x-iL.x);acV=Math.atan2(iW.y-iL.y,iW.x-iL.x);ip=xF-acV;if(ip>Math.PI){ip=ip-2*Math.PI;}if(ip< -Math.PI){ip=ip+2*Math.PI;}return ip<0;};fD.prototype.ahC=function(){var iL,CE,xF;iL=this.transform({x:0,y:0});CE=this.transform({x:0,y:1});xF=Math.atan2(CE.y-iL.y,CE.x-iL.x)-Math.PI/2;if(xF<0){xF=xF+2*Math.PI;}return xF*360/(Math.PI*2);};fD.prototype.nX=function(){var gR;var iL,qJ;var es,eo,dG;iL=this.transform({x:0,y:0});qJ=this.transform({x:1,y:0});es=qJ.x-iL.x;eo=qJ.y-iL.y;gR=es*es+eo*eo;qJ=this.transform({x:0,y:1});es=qJ.x-iL.x;eo=qJ.y-iL.y;dG=Math.min(gR,es*es+eo*eo);qJ=this.transform({x:1,y:1});es=qJ.x-iL.x;eo=qJ.y-iL.y;dG=Math.min(gR,es*es+eo*eo);qJ=this.transform({x:1,y: -1});es=qJ.x-iL.x;eo=qJ.y-iL.y;dG=Math.min(gR,es*es+eo*eo);return Math.sqrt(gR);};fD.aGY=function(){return new IPCC.fD(1,0,0,1,0,0);};module.exports=fD;},{}],35:[function(require,module,exports){var fj={aiP:1,ajt:2,Zz:3,ala:4,amc:5,HB:6,Ll:7,ami:8,amU:9,amt:10,amY:11,amE:12,amN:13,alR:14,ajr:15,abr:16};module.exports=fj;},{}],36:[function(require,module,exports){var dO=function(){this.K=false;this.aAZ=1.5;};dO.prototype.mt=function(K){this.K=K;};dO.prototype.ep=function(){this.K=false;};dO.prototype.af=function(){};dO.prototype.lO=function(F){var aT=this.K.aR();var aQ=this.K.bY();var as=this.K.fb();var bn=aT.fA();var Qo=F.wheelDelta/120;if(F.domEvent.ctrlKey){F.domEvent.preventDefault();var ae=((this.aAZ-1)/2)+1;if(Qo<0){ae=1/ae;}var jI=bn.nX();if(jI*ae>aQ.qK){ae=aQ.qK/jI;}if(jI*ae<aQ.sC){ae=aQ.sC/jI;}bn.yK(ae,ae,F.windowPoint.x,F.windowPoint.y);bn.ke(aQ,as);this.K.aP('userModifiedViewState',{});aT.je(bn);}else{var aeM=bn.transform({x:0,y:0});bn.nc(0,Qo*as.gW);bn.ke(aQ,as);var acw=bn.transform({x:0,y:0});if(Math.abs(aeM.x-acw.x)>0.001||Math.abs(aeM.y-acw.y)>0.001){F.domEvent.preventDefault();this.K.aP('userModifiedViewState',{});aT.je(bn);}}this.K.dh();};module.exports=dO;},{}],37:[function(require,module,exports){var cl=function(ajl){this.ajl=ajl;this.Uo=0;this.Pi=1;this.OA=2;this.Vm=3;this.UD=4;this.cS=this.Uo;this.K=false;this.mn=0;};cl.prototype.mt=function(K){this.K=K;this.aT=K.aR();};cl.prototype.ep=function(){this.K=false;};cl.prototype.af=function(){if(this.cS===this.OA){this.K.aR().hideMagnifier();}this.cS=this.Uo;};cl.prototype.Nd=function(F){var bw=F.domEvent.rawEvent;switch(this.cS){case this.Uo:if(bw.touches.length===1){this.aEM(F);}else if(bw.touches.length===2){this.aeB(F);}else if(bw.touches.length===3){this.Rj(F);}else{this.af();}break;case this.Pi:if(bw.touches.length===2){this.aeB(F);}else if(bw.touches.length===3){this.Rj(F);}else{this.af();}break;case this.UD:if(bw.touches.length!==3){this.af();}break;case this.OA:this.af();break;case this.Vm:if(bw.touches.length===3){this.Rj(F);}else if(bw.touches.length!==2){this.af();}break;}};cl.prototype.Np=function(F){switch(this.cS){case this.Pi:this.mn++;break;case this.OA:this.adN(F);break;case this.Vm:this.aED(F);break;case this.UD:this.aCF(F);break;}};cl.prototype.NV=function(){this.af();};cl.prototype.Hh=function(){this.af();};cl.prototype.aEM=function(F){this.cS=this.Pi;this.mn++;var avz=this.mn;var V=this;function avM(){if(V.cS===this.Pi&&avz===V.mn){V.aEt(F);}};setTimeout(avM,1000);};cl.prototype.aEt=function(F){this.K.he('rS',F);this.adN(F);this.cS=this.OA;};cl.prototype.Rj=function(F){var bw=F.domEvent.rawEvent;if(bw.touches.length!==3){this.af();return;}var gv=bw.touches[0];var dw={x:gv.screenX,y:gv.screenY};var bX=this.aT.fA();bX.vu();this.Ps=dw;this.aFn=dw;this.ZF=bX.transform(dw);this.cS=this.UD;this.aHH=this.aT.fA();this.adK=true;this.adx=true;};cl.prototype.aCF=function(F){var bw=F.domEvent.rawEvent;if(bw.touches.length!==3){this.af();return;}var gv=bw.touches[0];var dw={x:gv.screenX,y:gv.screenY};var auQ=Math.abs(dw.x-this.Ps.x);var atU=Math.abs(dw.y-this.Ps.y);if(auQ>35){this.adx=false;}if(atU>35){this.adK=false;}if(this.adK){dw.y=this.Ps.y;}if(this.adx){dw.x=this.Ps.x;}this.aFn=dw;var bn=this.aT.fA();var as=this.K.fb();var aQ=this.K.bY();bn.XW(this.ZF,dw);bn.ke(aQ,as);this.aT.je(bn);};cl.prototype.aFI=function(){};cl.prototype.aja=function(F){var bw=F.domEvent.rawEvent;if(bw.touches.length!==2){this.af();return{};}var Ox=bw.touches[0];var Qk=bw.touches[1];var es=Ox.screenX-Qk.screenX;var eo=Ox.screenY-Qk.screenY;var vZ=Math.sqrt(es*es+eo*eo);var ip=Math.atan2(es,eo)*180/Math.PI;var bx={x:(Ox.screenX+Qk.screenX)/2,y:(Ox.screenY+Qk.screenY)/2};return{vZ:vZ,ip:ip,amz:bx};};cl.prototype.aeB=function(F){this.cS=this.Vm;this.ayu=this.aja(F);this.KZ=this.ayu;var bX=this.aT.fA();bX.vu();this.ZF=bX.transform(this.KZ.amz);this.JW=this.KZ.ip;};cl.prototype.adN=function(F){var bw=F.domEvent.rawEvent;var gv=bw.touches[0];var dw={x:gv.screenX,y:gv.screenY};this.aT.showMagnifier(dw);};cl.prototype.aED=function(F){var wS=this.aja(F);var dG=wS.vZ/this.KZ.vZ;var bn=this.aT.fA();var as=this.K.fb();var aQ=this.K.bY();bn.scale(dG,dG);var CW=this.JW-wS.ip;var ame=this.JW-wS.ip-360;var aoX=this.JW-wS.ip+360;if(Math.abs(CW)>Math.abs(ame)){CW=ame;}if(Math.abs(CW)>Math.abs(aoX)){CW=aoX;}if(CW< -40){bn.rotate(-90);this.JW=wS.ip;}else if(CW>40){bn.rotate(90);this.JW=wS.ip;}bn.XW(this.ZF,wS.amz);bn.ke(aQ,as);this.aT.je(bn);this.KZ=wS;};cl.prototype.aIq=function(F){var bn=this.aT.fA();var as=this.K.fb();var aQ=this.K.bY();bn.XA(IPCC.Web.UI.FitType.FullImage,aQ,as);bn.ke(aQ,as);this.aT.je(bn);};cl.prototype.lO=function(){this.af();};module.exports=cl;},{}],38:[function(require,module,exports){var dN=require('./IPCC.Util').regClass;var NI=function(){return this;};NI.registerClass=dN;NI.prototype={};NI.registerClass('IPCC.OpenPageEventArgs');module.exports=NI;},{"./IPCC.Util":28}],39:[function(require,module,exports){var dN=require('./IPCC.Util').regClass;var Pj=function(){return this;};Pj.registerClass=dN;Pj.prototype={};Pj.registerClass('IPCC.PageEventArgs');module.exports=Pj;},{"./IPCC.Util":28}],40:[function(require,module,exports){var aA=function(aV){this.fu=aV.page;this.bO=0;this.bo=0;this.ho=0;this.hx=0;var bi=new IPCC.Web.UI.jc();this.aeS=undefined;this.hJ=false;this.axp=false;this.GK=0;this.aIg=undefined;this.AC=false;this.wa=false;this.Du=false;this.gz=0;this.CA=0;this.BV=false;this.Fi=false;this.aY=new IPCC.Web.UI.ArtPage();this.ec=new IPCC.Web.UI.ArtPage();this.cA=this.fu.get_pageNumber();this.bF=this.fu.ba.Rk+'_'+this.cA+'__pViewId';this.ba=this.fu.ba;this.dm=function(cG){var R=bi.getHandler('propertyChanged');if(R){R(this,new IPCC.pR(cG));}};return this;};aA.prototype.lv=function(){if(this.fu){return this.fu.kY()||this.bO;}return this.bO;};aA.prototype.qy=function(){if(this.fu){return this.fu.jp()||this.bo;}return this.bo;};aA.prototype.VY=function(bool){bool= ! !bool;if(this.fu){this.fu.BV=bool;}this.BV=bool;};aA.prototype.ajm=function(){if(this.fu){return this.fu.BV||this.BV;}return this.BV;};module.exports=aA;},{}],41:[function(require,module,exports){var fi=require('./IPCC.Util').regEnum;var CT=function(){};CT.registerEnum=fi;CT.prototype={VerticalScrollDirection:0,HorizontalScrollDirection:1};CT.registerEnum('IPCC.PageLayout',false);module.exports=CT;},{"./IPCC.Util":28}],42:[function(require,module,exports){var dN=require('./IPCC.Util').regClass;var auP=function(){this.cE=undefined;return this;};var Nn=function(element){var V=this;var GS=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(func){return setTimeout(func,16);};var ata=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||function(id){return clearTimeout(id);};var bi=new IPCC.Web.UI.jc();var bM=[];var apG;var aW='';var Ek='';var bU='';var kO='';var Kp='';var Jy=0;this.zk=new IPCC.Web.UI.ImGearDocumentCollection();var JC=[];this.aHt=0;this.aIE={x:0,y:0};var ks=0;var nT=IPCC.Web.UI.DebugErrorLevel.Production;var _debug=false;var me=false;var cZ=0;var tA=false;var PQ=[];var Ks='';var cR=1;var tc=0;var mj=1;var qQ=1;var bK=IPCC.Web.UI.MouseTool.None;var zF=false;var sh=true;var bu=IPCC.aa.None;var ig;var ht=0;var hK=0;var akP=0;var eK=0;var ha=15;var ix=0;var fX=15;var oV=0;var mr=0;var qe=0;var nM=0;var atW=0;var gn=0;var fU=0;var pl=1;var eO=IPCC.PageLayout.VerticalScrollDirection;var ce=IPCC.ViewMode.Document;var ng=null;var Xt=null;var KS=0;var Zh=0;var yV=0;var vq=false;var jb=null;var HL=0;var FY='';var BF='';var sT=[];var Dy=0;var uq=3;var Nh=0.5;var Lg=true;var Lt=false;var RS=false;var TL;var sA=IPCC.Web.UI.MarkHandleMode.HideSideHandlesWhenClose;var wQ=true;var lZ;var dP={};var tM=false;var na=function(){return null;};var io=null;var alC="font-size:11px;color:#888;text-align:center;cursor:pointer;";var atC=alC+"padding:18px 0 20px;display:table-caption;caption-side:bottom;";var atz=alC+"white-space:nowrap;line-height:50px;display:table-cell;vertical-align:middle;padding-right:10px;";var cW=96;var aE;function nR(JF){if(!_debug){return false;}return nT>=JF;};this.aK=function(hN,iT){if(!nR(IPCC.Web.UI.DebugErrorLevel.Production)){return;}var cQ=hN+'() threw an exception ('+iT.name+'), "'+iT.message+'"';cQ=cQ.replace(/\n/g," ");IPCC.iG.mb(cQ,IPCC.Web.UI.DebugItemCause.Exception,IPCC.Web.UI.DebugErrorLevel.Production,'PageList',this.oe().id);var oU=new IPCC.ExceptionEventArgs();oU.functionName=hN;oU.exception=iT;this.aP('exceptionThrown',oU);};this.aF=function(hN,kf,pO){if(!nR(IPCC.Web.UI.DebugErrorLevel.Development)){return;}var cQ=hN+'(';var L;for(L=0;L<kf.length;L++){if(L>0){cQ+=', ';}cQ+=IPCC.iG.ru(kf[L],(pO?pO:0));}cQ+=')';this.vP(cQ,IPCC.Web.UI.DebugErrorLevel.Development);};this.AX=function(hN,kf,nu,pO){if(!nR(IPCC.Web.UI.DebugErrorLevel.Development)){return;}var cQ=hN+'(';var L;for(L=0;L<kf.length;L++){if(L>0){cQ+=', ';}cQ+=IPCC.iG.ru(kf[L],(pO?pO:0));}cQ+=') = ';cQ+=IPCC.iG.ru(nu,1);this.vP(cQ,IPCC.Web.UI.DebugErrorLevel.Development);};this.dk=function(hN,kf,nu){if(!nR(IPCC.Web.UI.DebugErrorLevel.Detailed)){return;}var cQ=hN+'(';var L;for(L=0;L<kf.length;L++){if(L>0){cQ+=', ';}cQ+=IPCC.iG.ru(kf[L],0);}cQ+=') = ';cQ+=IPCC.iG.ru(nu,1);this.vP(cQ,IPCC.Web.UI.DebugErrorLevel.Detailed);};this.vP=function(kr,bE){IPCC.iG.mb(kr,IPCC.Web.UI.DebugItemCause.FunctionCall,bE,'PageList',this.oe().id);};this.mb=function(kr){IPCC.iG.mb(kr,IPCC.Web.UI.DebugItemCause.Custom,IPCC.Web.UI.DebugErrorLevel.Production,'PageList',this.oe().id);};this.Jm=function(){return _debug;};this.Uy=function(G){var Kh= ! !G;if(_debug===Kh){return;}_debug=Kh;var cc=jD();var dF=[];if(cc){dF=rk(cc);}var L=0;for(L=0;L<dF.length;L++){var bI;if(bM[dF[L]].bF){bI=document.getElementById(bM[dF[L]].bF).bH;}if(bI){bI.set_debug(_debug);}}this.dm('debug');};this.Ak=function(){return nT;};this.II=function(G){IPCC.aI.ik(G,'value',IPCC.Web.UI.DebugErrorLevel);if(nT===G){return;}nT=G;var cc=jD();var dF=[];if(cc){dF=rk(cc);}var L=0;for(L=0;L<dF.length;L++){var bI;if(bM[dF[L]].bF){bI=document.getElementById(bM[dF[L]].bF).bH;}if(bI){bI.set_debugErrorLevel(nT);}}this.dm('debugErrorLevel');};function cv(dQ,R){bi.addHandler(dQ,R);};function cN(dQ,R){bi.removeHandler(dQ,R);};this.MR=function(R){cv('mouseDown',R);};this.Vb=function(R){cN('mouseDown',R);};this.NP=function(R){cv('mouseMove',R);};this.Vy=function(R){cN('mouseMove',R);};this.NC=function(R){cv('mouseUp',R);};this.Vl=function(R){cN('mouseUp',R);};this.Zu=function(R){cv('selectTextMouseToolCompleted',R);};this.Uu=function(R){cN('selectTextMouseToolCompleted',R);};this.yW=function(R){cv('textPageReady',R);};this.FL=function(R){cN('textPageReady',R);};this.abD=function(R){cv('hyperlinkPageReady',R);};this.adW=function(R){cN('hyperlinkPageReady',R);};this.atX=function(R){cv('allPagesAdded',R);};this.azQ=function(R){cN('allPagesAdded',R);};this.Wq=function(R){cv('pageOpening',R);};this.Sv=function(R){cN('pageOpening',R);};this.WP=function(R){cv('pageOpened',R);};this.Sy=function(R){cN('pageOpened',R);};this.IY=function(R){cv('pageOpenFailed',R);};this.Ge=function(R){cN('pageOpenFailed',R);};this.WW=function(R){cv('pageDisplayed',R);};this.Ws=function(R){cN('pageDisplayed',R);};this.kk=function(R){cv('propertyChanged',R);};this.nv=function(R){cN('propertyChanged',R);};this.abe=function(R){cv('exceptionThrown',R);};this.QI=function(R){cN('exceptionThrown',R);};this.yI=function(R){cv('textExtractionFailed',R);};this.FP=function(R){cN('textExtractionFailed',R);};this.ya=function(R){cv('markAdded',R);};this.Ah=function(R){cN('markAdded',R);};this.abp=function(R){cv('markCreating',R);};this.To=function(R){cN('markCreating',R);};this.Ja=function(R){cv('markChanged',R);};this.Ii=function(R){cN('markChanged',R);};this.Kq=function(R){cv('markReordered',R);};this.FI=function(R){cN('markReordered',R);};this.Kv=function(R){cv('markSelectionChanged',R);};this.Gw=function(R){cN('markSelectionChanged',R);};this.Kx=function(R){cv('markTextSelectionChanged',R);};this.ET=function(R){cN('markTextSelectionChanged',R);};this.xC=function(R){cv('markRemoved',R);};this.AP=function(R){cN('markRemoved',R);};this.auE=function(R){cv('commentAdding',R);};this.aAt=function(R){cN('commentAdding',R);};this.wW=function(R){cv('commentAdded',R);};this.DV=function(R){cN('commentAdded',R);};this.vW=function(R){cv('commentRemoved',R);};this.Es=function(R){cN('commentRemoved',R);};this.rD=function(R){cv('commentChanged',R);};this.ue=function(R){cN('commentChanged',R);};this.Yv=function(R){cv('scaleChanged',R);};this.VW=function(R){cN('scaleChanged',R);};this.Ld=function(){var bH=document.getElementById(bM[cZ].bF).bH;if(bH){return bH.get_currentState();}else{return null;}};this.ane=function(){var aN=IPCC.J.find(bM,function(fh){return fh.cA===cZ;});if(!aN){return;}return aN.fu;};this.azp=function(aO){var aN=IPCC.J.find(bM,function(fh){return fh.cA===cZ;});if(!aN){return;}return aN.bF;};this.nX=function(){return cR;};this.apb=function(dG){jN(dG,undefined,undefined,undefined,undefined,undefined,IPCC.ScaleTrigger.Zoom);};this.LY=function(ae,sm,aaY,fd){fd=fd||IPCC.ScaleTrigger.Zoom;jN(cR*ae,aaY,undefined,undefined,undefined,sm,fd);};this.aqw=function(ae,bm,cu,Bo,fd){fd=fd||IPCC.ScaleTrigger.Zoom;if(cR*ae<8){jN(cR*ae,false,bm,cu,Bo,undefined,fd);}else{jN(8,false,bm,cu,Bo);}};this.ZX=function(ae,fd){fd=fd||IPCC.ScaleTrigger.Zoom;jN(cR/ae,false,undefined,undefined,undefined,undefined,fd);};this.axZ=function(){return VM();};this.afa=function(fd,fp,VC){var Kb,Ji,bO,bo;var SL=0;var L=0;for(L=0;L<bM.length;L++){bO=bM[L].lv();bo=bM[L].qy();if(jg(bM[L].gz)===true){var Im=bO;bO=bo;bo=Im;}if(bO>0&&bo>0){var IP=bO/bo;if(IP>SL){SL=IP;Kb=bo;Ji=bO;}}}if(SL>0){var apS=(aW.offsetWidth-IPCC.Web.oa()-vj()-(ha+fX+mr+nM));var aqY=apS/(Ji*cW/bM[0].ho);var ey=ht;var fC=hK;if(jg(bM[0].gz)===true){ey=hK;fC=ht;}var agi=Kb/fC*aqY;var kn=(aW.clientHeight-(eK+ix+oV+qe))/(fC*cW/bM[0].hx);var Gn=agi;if(VC===true&&agi>kn){Gn=kn;}jN(Gn,true,undefined,undefined,undefined,undefined,fd,fp);}};this.aah=function(fd,fp,VC){var Kb,Ji,bO,bo;var Tz=0;var L=0;for(L=0;L<bM.length;L++){bO=bM[L].lv();bo=bM[L].qy();if(jg(bM[L].gz)===true){var Im=bO;bO=bo;bo=Im;}if(bO>0&&bo>0){var IP=bo/bO;if(IP>Tz){Tz=IP;Kb=bo;Ji=bO;}}}if(Tz>0){var aqC=(aW.offsetHeight-IPCC.Web.oa()-(eK+ix+oV+qe));var aqq=aqC/(Kb*cW/bM[0].hx);var ey=ht;var fC=hK;if(jg(bM[0].gz)===true){ey=hK;fC=ht;}var agY=Ji/ey*aqq;var kn=(aW.clientWidth-vj()-(ha+fX+mr+nM))/(ey*cW/bM[0].ho);var Gn=agY;if(VC===true&&agY>kn){Gn=kn;}jN(Gn,true,undefined,undefined,undefined,undefined,fd,fp);}};this.awM=function(fp,fd){if(V.vN&&typeof V.vN==='function'){V.vN();}var bO;var bo;var eu;var lx=1;fd=fd||IPCC.ScaleTrigger.Fit;if(fp===IPCC.FitType.FitToWidth){if(ce===IPCC.ViewMode.Document){lx=(aW.offsetWidth-IPCC.Web.oa()-vj()-(ha+fX+mr+nM))/(gn/cR);jN(lx,true,undefined,undefined,undefined,undefined,fd,fp);}else if(ce===IPCC.ViewMode.SinglePage){if(jg(bM[cZ].gz)===true){bO=bM[cZ].qy();eu=cW/bM[cZ].hx;}else{bO=bM[cZ].lv();eu=cW/bM[cZ].ho;}lx=(aW.offsetWidth-IPCC.Web.oa()-vj()-(ha+fX+mr+nM))/(bO*eu);jN(lx,true,undefined,undefined,undefined,undefined,fd,fp);}else{if(eO===IPCC.PageLayout.VerticalScrollDirection){Zk(fd,fp);}else{V.afa(fd,fp);}}}else if(fp===IPCC.FitType.ShrinkToWidth){var apw=aW.clientWidth-vj();var aqs=20;var Us=apw-aqs;if(ce===IPCC.ViewMode.SinglePage){if(jg(bM[cZ].gz)===true){bO=bM[cZ].qy();eu=cW/bM[cZ].hx;}else{bO=bM[cZ].lv();eu=cW/bM[cZ].ho;}if(Us<cR*bO*eu){lx=(aW.offsetWidth-IPCC.Web.oa()-vj()-(ha+fX+mr+nM))/(bO*eu);jN(lx,true,undefined,undefined,undefined,undefined,fd,fp);}}else{if(Us<gn){jN(cR*Us/gn,true,undefined,undefined,undefined,undefined,fd,fp);}}}else if(fp===IPCC.FitType.ActualSize){if(ce===IPCC.ViewMode.Document||ce===IPCC.ViewMode.SinglePage){jN(1,true,undefined,undefined,undefined,undefined,fd,fp);}}else if(fp===IPCC.FitType.FitToHeight){if(ce===IPCC.ViewMode.Document){lx=(aW.offsetHeight-IPCC.Web.oa()-(eK+ix+oV+qe))/(fU/cR);jN(lx,true,undefined,undefined,undefined,undefined,fd,fp);}else if(ce===IPCC.ViewMode.SinglePage){if(jg(bM[cZ].gz)===true){bo=bM[cZ].lv();eu=cW/bM[cZ].ho;}else{bo=bM[cZ].qy();eu=cW/bM[cZ].hx;}lx=(aW.offsetHeight-IPCC.Web.oa()-(eK+ix+oV+qe))/(bo*eu);jN(lx,true,undefined,undefined,undefined,undefined,fd,fp);}else{if(eO===IPCC.PageLayout.HorizontalScrollDirection){Zk(fd,fp);}else{V.aah(fd,fp);}}}else if(fp===IPCC.FitType.BestFit){var BC;if(ce===IPCC.ViewMode.Document){lx=(aW.offsetWidth-IPCC.Web.oa()-(ha+fX+mr+nM))/(gn/cR);BC=(aW.offsetHeight-IPCC.Web.oa()-(eK+ix+oV+qe))/(fU/cR);if(BC<lx){lx=BC;}jN(lx,true,undefined,undefined,undefined,undefined,fd,fp);}else if(ce===IPCC.ViewMode.SinglePage){if(jg(bM[cZ].gz)===true){bO=bM[cZ].qy();bo=bM[cZ].lv();eu=cW/bM[cZ].ho;}else{bO=bM[cZ].lv();bo=bM[cZ].qy();eu=cW/bM[cZ].hx;}lx=(aW.offsetWidth-IPCC.Web.oa()-vj()-(ha+fX+mr+nM))/(bO*eu);BC=(aW.offsetHeight-IPCC.Web.oa()-(eK+ix+oV+qe))/(bo*eu);if(BC<lx){lx=BC;}jN(lx,true,undefined,undefined,undefined,undefined,fd,fp);}else{if(eO===IPCC.PageLayout.HorizontalScrollDirection){V.afa(fd,fp,true);}else{V.aah(fd,fp,true);}}}};this.axK=function(bb,aJ){var aN=bM[bb-1];var aq=document.getElementById(aN.bF);var Ce=[];if(aq){var fq,BZ,bx;try{fq=Zn(aq);}catch(e){return null;}Ce=IPCC.J.map(aJ,function(fh){BZ=aq.bH.transformPagePointToWindow(new IPCC.Web.UI.Point(fh.x,fh.y),true);bx=aha(aq,BZ.x,BZ.y,fq);return{clientX:bx.x,clientY:bx.y};});return Ce;}else{return null;}};this.aDH=function(){var L=0;for(L=0;L<bM.length;L++){V.dh(L);}jD();oK();};this.dh=function(aO){var al;if(bM[aO].bF){al=document.getElementById(bM[aO].bF);}V.xB(al,aO);};this.KW=function(aO){var al;if(bM[aO].bF){al=document.getElementById(bM[aO].bF);}if(al){var bI=al.bH;bI.KW();}};this.xB=function(al,aO){if(al&&al.bH&&al.bH.fK()===true){var bI=al.bH;bI.display();bM[aO].hJ=true;if(ce===IPCC.ViewMode.SinglePage){var lT= -1;if(Array.prototype.indexOf){lT=sT.indexOf(aO);}else{lT=IPCC.Web.lw(sT,aO);}if(lT!== -1){sT.splice(lT,1);}}}};function afE(dF){var al;for(var L=0;L<dF.get_length();L++){var aN=dF.getPage(L);var aO=aN.get_pageNumber();if(bM[aO].bF){al=document.getElementById(bM[aO].bF);}if(al&&al.bH&&al.bH.CP()!==null){return al.bH;}}return null;};this.EO=function(){var dF=this.get_displayedPages();var Mt=afE(dF);Mt.EO();};this.DZ=function(ae){var fT=0;var gH=bM.length-1;for(var aU=fT;aU<=gH;aU++){var bI;var al=document.getElementById(bM[aU].bF);if(al){bI=al.bH;}else{continue;}bI.set_sharpening(ae);if(bI&&bM[aU].hJ===true&&bI.fK()===true){bI.display();}}tc=ae;};this.axv=function(){return tc;};this.Gi=function(ae){var fT=0;var gH=bM.length-1;for(var aU=fT;aU<=gH;aU++){var bI;var al=document.getElementById(bM[aU].bF);if(al){bI=al.bH;}else{continue;}bI.set_gamma(ae);if(bI&&bM[aU].hJ===true&&bI.fK()===true){bI.display();}}qQ=ae;};this.ayH=function(){return qQ;};this.DF=function(ae){var fT=0;var gH=bM.length-1;for(var aU=fT;aU<=gH;aU++){var bI;var al=document.getElementById(bM[aU].bF);if(al){bI=al.bH;}else{continue;}bI.set_svgLineWidthMultiplier(ae);if(bI&&bM[aU].hJ===true&&bI.fK()===true){bI.display();}}mj=ae;};this.axV=function(){return mj;};this.CP=function(){var dF=this.get_displayedPages();var Mt=afE(dF);if(Mt){return Mt.CP();}return null;};this.wI=function(aO,C){var al;if(bM[aO].bF){al=document.getElementById(bM[aO].bF);}if(al&&al.bH){al.bH.wI(C);}};this.pY=function(aO){var al;if(bM[aO].bF){al=document.getElementById(bM[aO].bF);}if(al&&al.bH){al.bH.pY();}};var tZ='';this.uY=function(G){tZ=G;};this.oe=function(){return tZ;};this.aP=function(dQ,F){try{var R=bi.getHandler(dQ);if(R!==null){R(V,F);}}catch(e){V.aK(dQ+'Event',e);}};this.dm=function(cG){var R=bi.getHandler('propertyChanged');if(R){R(this,new IPCC.pR(cG));}};this.ayX=function(R){bi.addHandler('currentPageChanged',R);};this.aAX=function(R){bi.removeHandler('currentPageChanged',R);};this.yC=function(cB,G){cB.style.cursor='move';cB.style.cursor='-webkit-'+G;cB.style.cursor='-moz-'+G;cB.style.cursor=G;};this.aeY=function(){return bU.style.cursor||'auto';};this.aof=function(G){bU.style.cursor=G||'auto';var L=0;for(L=0;L<bM.length;L++){if(bM[L].bF){var al=document.getElementById(bM[L].bF);if(al){var bI=al.bH;al.style.cursor=G;if(bI){bI.set_cursor(G);if(bM[L].hJ===true&&bI.fK()===true){bI.display();}}}}}};this.YE=function(){return bK;};this.HD=function(G){IPCC.aI.ik(G,'value',IPCC.Web.UI.MouseTool);var mH=false;if(bK!==G){ig=null;bK=G;switch(bK){case IPCC.Web.UI.MouseTool.HandPan:bu='grab';V.yC(bU,'grab');break;case IPCC.Web.UI.MouseTool.SelectText:V.va();bu=IPCC.aa.Text;bU.style.cursor=IPCC.aa.ee(bu);break;case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:V.va();bu=IPCC.aa.Text;bU.style.cursor=IPCC.aa.ee(bu);break;case IPCC.Web.UI.MouseTool.None:bu=IPCC.aa.None;bU.style.cursor=IPCC.aa.ee(bu);break;case IPCC.Web.UI.MouseTool.Magnifier:bu=IPCC.aa.Magnifier;bU.style.cursor=IPCC.aa.ee(bu);break;case IPCC.Web.UI.MouseTool.RectangleZoom:bu=IPCC.aa.RectangleZoom;bU.style.cursor=IPCC.aa.ee(bu);break;case IPCC.Web.UI.MouseTool.CreateRectangleMark:bu=IPCC.aa.AddRectangleMark;bU.style.cursor=IPCC.aa.ee(bu);mH=true;ig=function(){return[new IPCC.eg(IPCC.Web.UI.MarkType.Rectangle)];};break;case IPCC.Web.UI.MouseTool.CreateRectangleRedactionMark:bu=IPCC.aa.AddRectangleRedactionMark;bU.style.cursor=IPCC.aa.ee(bu);mH=true;ig=function(){return[new IPCC.eg(IPCC.Web.UI.MarkType.RectangleRedaction)];};break;case IPCC.Web.UI.MouseTool.CreateEllipseMark:bu=IPCC.aa.AddEllipseMark;bU.style.cursor=IPCC.aa.ee(bu);mH=true;ig=function(){return[new IPCC.eg(IPCC.Web.UI.MarkType.Ellipse)];};break;case IPCC.Web.UI.MouseTool.CreateLineMark:bu=IPCC.aa.AddLineMark;bU.style.cursor=IPCC.aa.ee(bu);mH=true;ig=function(){return[new IPCC.lG()];};break;case IPCC.Web.UI.MouseTool.CreateStampMark:bu=IPCC.aa.AddStampMark;bU.style.cursor=IPCC.aa.ee(bu);mH=true;ig=function(){return[new IPCC.eg(IPCC.Web.UI.MarkType.Stamp)];};break;case IPCC.Web.UI.MouseTool.CreateImageStampAnnotationMark:bu=IPCC.aa.AddImageStampMark;bU.style.cursor=IPCC.aa.ee(bu);mH=true;ig=function(){return[new IPCC.eg(IPCC.Web.UI.MarkType.ImageStampAnnotation)];};break;case IPCC.Web.UI.MouseTool.CreateImageStampRedactionMark:bu=IPCC.aa.AddImageStampMark;bU.style.cursor=IPCC.aa.ee(bu);mH=true;ig=function(){return[new IPCC.eg(IPCC.Web.UI.MarkType.ImageStampRedaction)];};break;case IPCC.Web.UI.MouseTool.CreateTextMark:bu=IPCC.aa.AddTextMark;bU.style.cursor=IPCC.aa.ee(bu);mH=true;ig=function(){return[new IPCC.eg(IPCC.Web.UI.MarkType.Text)];};break;case IPCC.Web.UI.MouseTool.CreateTextInputSignatureMark:bu=IPCC.aa.AddTextMark;bU.style.cursor=IPCC.aa.ee(bu);mH=true;ig=function(){return[new IPCC.eg(IPCC.Web.UI.MarkType.TextLine)];};break;case IPCC.Web.UI.MouseTool.CreateTextAreaSignatureMark:bu=IPCC.aa.AddTextMark;bU.style.cursor=IPCC.aa.ee(bu);mH=true;ig=function(){return[new IPCC.eg(IPCC.Web.UI.MarkType.TextAreaSignature)];};break;case IPCC.Web.UI.MouseTool.CreateFreehandMark:bu=IPCC.aa.AddFreehandLineMark;bU.style.cursor=IPCC.aa.ee(bu);mH=true;ig=function(){return[new IPCC.lF()];};break;case IPCC.Web.UI.MouseTool.CreatePolylineMark:bu=IPCC.aa.AddPolylineMark;bU.style.cursor=IPCC.aa.ee(bu);mH=true;ig=function(){return[new IPCC.kC(IPCC.Web.UI.MarkType.Polyline)];};break;case IPCC.Web.UI.MouseTool.EditMarks:bu=IPCC.aa.EditMarks;bU.style.cursor=IPCC.aa.ee(bu);mH=true;ig=function(){return[new IPCC.ln(IPCC.Web.UI.MarkType.Text)];};break;default:bu=IPCC.aa.None;bU.style.cursor=IPCC.aa.ee(bu);break;}var L=0;for(L=0;L<bM.length;L++){if(bM[L].bF){var al=document.getElementById(bM[L].bF);if(al){var bI=al.bH;if(bu==='grab'){V.yC(al,'grab');}else{al.style.cursor=IPCC.aa.ee(bu);}if(bI){bI.set_cursor(bu);bI.QQ(bK===IPCC.Web.UI.MouseTool.HandPan||bK===IPCC.Web.UI.MouseTool.EditMarks);if(mH===true){bI.JM(ig());}else{bI.set_mouseTool(IPCC.Web.UI.MouseTool.None);}if(bM[L].hJ===true&&bI.fK()===true){bI.display();}}}}}this.dm('mouseTool');}};this.avb=function(){return zF;};this.aEA=function(bool){zF= ! !bool;};this.AE=function(){return sA;};this.Ie=function(G){if(sA!==G){sA=G;var cc=jD();var dF=[];if(cc){dF=rk(cc);}var L=0;for(L=0;L<dF.length;L++){var al;var bI;al=document.getElementById(bM[dF[L]].bF);bI=al.bH;if(bI){bI.set_markHandleMode(sA);this.xB(al,L);}}this.dm('markHandleMode');}};this.kG=function(){return sh;};this.Je=function(G){if(sh!==G){sh=G;var cc=jD();var dF=[];if(cc){dF=rk(cc);}var L=0;for(L=0;L<dF.length;L++){var bI;if(bM[dF[L]].bF){bI=document.getElementById(bM[dF[L]].bF).bH;}if(bI){bI.set_textRequired(sh);}}this.dm('textRequired');}};this.azf=function(){return uq;};this.anX=function(G){if(G<0){G=0;}if(uq!==G){uq=G;this.dm('maxPrefetch');}};this.atu=function(){return Lg;};this.aBQ=function(G){if(Lg!==G){Lg=G;this.dm('displayPagesWhenScrolling');}};this.azg=function(){return Dy;};this.aoU=function(G){if(G<0){G=0;}if(Dy!==G){Dy=G;this.dm('maxOutOfViewDisplay');}};this.ava=function(){return Lt;};this.aCE=function(G){if(Lt!==G){Lt= ! !G;this.dm('discardOutOfViewText');}};this.azJ=function(){return RS;};this.aoC=function(G){if(RS!==G){RS= ! !G;this.dm('retainPageText');}};this.axY=function(){return Nh;};this.aoo=function(G){if(G<0){G=0;}if(Nh!==G){Nh=G;this.dm('scrollDisplayThreshold');}};this.azX=function(){return eO;};this.apf=function(G){if(eO===G){return;}eO=G;if(aW===''||aW.clientHeight<=0||ce===IPCC.ViewMode.SinglePage){this.dm('pageLayout');return;}var vk=cZ;var Jb=ce;if(ce===IPCC.ViewMode.EqualWidthPages||ce===IPCC.ViewMode.EqualFitPages){V.Ou(IPCC.ViewMode.Document);}aW.scrollLeft=0;aW.scrollTop=0;var L=0;var al;if(eO===IPCC.PageLayout.VerticalScrollDirection){if(Kp){Kp.setAttribute('style',atC);}Ek.insertBefore(kO,Kp);for(L=0;L<bM.length;L++){al=document.getElementById(bM[L].bF);al.style.display='block';if(ht>0){al.style.margin=eK+'px auto '+ix+'px auto';}}bU.style.margin='0px '+ha+'px 0px '+fX+'px';aW.scrollLeft=(gn-aW.clientWidth)/2+ha+mr;}else{if(Kp){Kp.setAttribute('style',atz);}Ek.removeChild(kO);for(L=0;L<bM.length;L++){al=document.getElementById(bM[L].bF);if(al){al.style.display='inline-block';if(ht>0){al.style.margin=eK+'px '+ha+'px '+ix+'px '+fX+'px';}}}bU.style.margin='0px';aW.scrollTop=(fU-aW.clientHeight)/2+eK+oV;}if(Jb===IPCC.ViewMode.EqualWidthPages){V.Ou(IPCC.ViewMode.EqualWidthPages);}else if(Jb===IPCC.ViewMode.EqualFitPages){V.Ou(IPCC.ViewMode.EqualFitPages);}this.pH(vk);oK();this.dm('layout');};this.axI=function(){return ce;};this.Ou=function(G,fd){fd=fd||IPCC.ScaleTrigger.ViewMode;if(ce===G){return;}ce=G;if(aW===''||aW.clientHeight<=0){this.dm('viewMode');return;}var vk=cZ;this.pH(vk);if(ce===IPCC.ViewMode.Document){var kn=1;var bO=ht;var bo=hK;if(jg(pB)===true){bO=hK;bo=ht;}if(eO===IPCC.PageLayout.VerticalScrollDirection){kn=(aW.clientWidth-(ha+fX+mr+nM))/bO;}else{kn=(aW.clientHeight-(eK+ix+oV+qe))/bo;}jN(kn,true,undefined,undefined,undefined,undefined,fd);}else{Zk(fd);}this.pH(vk);this.dm('viewMode');ye(dP,true);kq(dP,true);};var pB=0;this.aAz=function(){return pB;};this.aoV=function(G){if(pB!==G){pB=G;var L=0;for(L=0;L<bM.length;L++){if(bM[L].CA===0){bM[L].gz=pB;}}this.dm('pageRotation');}};this.Uv=function(bb){var cA;if(arguments.length>0){if(!isNaN(bb)){cA=bb;}else{cA=cZ;}}else{cA=cZ;}for(var L=0;L<bM.length;L++){if(cA===L){return bM[L].gz;}}return 0;};var oI=false;this.jj=function(){return oI;};this.nC=function(G){if(typeof G!=="boolean"){return;}if(G===oI){return;}oI=G;};this.auB=function(){return TL;};this.aDu=function(G,re,vA,ug){if(TL!==G){TL=G;for(var L=0;L<bM.length;L++){bM[L].aY.aAU(G,L,bM[L].lv(),bM[L].qy(),bM[L].fu,re,vA,ug);var aGl= !bM[L].lv();bM[L].VY(aGl);}this.dm('annotationXmlDom');}};var qr;this.Kf=function(G){qr=G;};this.vM=function(){return qr;};var rc=false;this.ni=function(){return rc;};this.om=function(G){if(typeof G!=="boolean"){return;}if(G===rc){return;}rc=G;IPCC.J.forEach(bM,function(aA,L){var bI;if(bM[L].bF){var al=document.getElementById(bM[L].bF);if(al){bI=al.bH;}}if(bI){bI.om(rc);bI=undefined;}});};this.aoh=function(G){if(Ks!==G){Ks=G;this.dm('loadingContent');}};this.ayf=function(){return Ks;};this.atR=function(){var cc=jD();var dF=[];if(cc){dF=rk(cc);}var aki=new IPCC.Web.UI.ImGearPageCollection();var L=0;for(L=0;L<dF.length;L++){aki.ahB(bM[dF[L]].fu);}return aki;};this.ayT=function(aO){if(bM[aO]){return bM[aO].bF;}};this.BE=function(){return wQ;};this.JK=function(G){wQ=G;};this.kQ=function(){return lZ;};this.yx=function(G){lZ=G;};this.KR=function(aN,As,Au){var V=this;if(aN.kY()>0||aN.jp()>0){As(aN.kY(),aN.jp());return;}aN.requestPageAttributes(function(ap,aM){if(bM[aN.get_pageNumber()].ajm()===true){var fY=ap/aN.aeA();if(fY!==1){var aY=V.gO(aN);if(aY){ann(aY,fY);}}}bM[aN.get_pageNumber()].VY(false);As(ap,aM);},function(ef){Au(ef);});};this.avP=function(){if(tM===true){return;}tM=true;this.er(kO,'pccHidden');ye(dP,true);kq(dP,true);};this.aqJ=function(){if(tM===false){return;}tM=false;this.jV(kO,'pccHidden');};this.azT=function(){return tM;};this.jV=function(cB,sb){var Hi=new RegExp('(?:^|\\s)'+sb+'(?!\\S)','g');if(cB.className.match(Hi)===null){cB.className=cB.className+' '+sb;}};this.er=function(cB,sb){var Hi=new RegExp('(?:^|\\s)'+sb+'(?!\\S)','g');cB.className=cB.className.replace(Hi,'');};this.atI=function(){return na;};this.aDU=function(G){na=G;};this.ayx=function(){return io;};this.apa=function(G){if(io===G){return;}var C,cE,tz;if(io){C=io.get_mark();tz=dP[C.get_markID()];cE=na(C,{isSelected:true},(tz)?tz.cE:undefined);if(tz){Dn(C,dP,cE);}}C=cE=tz=undefined;io=G;if(io){C=io.get_mark();tz=dP[C.get_markID()];cE=na(C,{isSelected:true},(tz)?tz.cE:undefined);if(tz){Dn(C,dP,cE);}}kq(dP,true);};this.aBa=function(aaj){var hX=xw();IPCC.J.forEach(aaj,function(LQ){var cD=dP[LQ];if(cD){var jJ=na(cD.C,{isSelected:(cD.C.get_conversation()===io)},cD.cE);if(!IPCC.J.uj(jJ)){throw new Error(jJ+' is not a valid HTMLElement');}if(jJ!==cD.cE){Dn(cD.C,dP,jJ);}}});kq(dP,false,hX);};this.aFr=function(){V.aFd={top:aW.scrollTop,left:aW.scrollLeft};};this.aBi=function(){var pq=V.aFd;if(pq){aW.scrollTop=pq.top;aW.scrollLeft=pq.left;}};this.initialize=function(){var dA=this.oe();var L;for(L=dA.childNodes.length-1;L>=0;L--){if(dA.childNodes[L].tagName!=='INPUT'){dA.removeChild(dA.childNodes[L]);}}this.zk.add_documentAdded(aBb);this.zk.add_pageAdded(TJ);this.zk.add_pageRemoved(UV);this.aiW(true);dA.bH=this;afj();var Sm='webkit moz o'.split(' '),Fk='';if(bU.style.animationName!==undefined){FY='animationend';BF='transitionend';return;}for(L=0;L<Sm.length;L++){if(bU.style[Sm[L]+'Animation']!==undefined){Fk=Sm[L];FY=Fk+'AnimationEnd';BF=Fk+'TransitionEnd';break;}}};this.auH=function(){return me;};this.aiW=function(G){me=G;this.dm('enabled');};this.aDG=function(){if(cZ+1<bM.length){V.pH(cZ+1);}};this.aDX=function(){var SZ=cZ-1;if(SZ<0){SZ=0;}V.pH(SZ);};function Ef(F){IPCC.Web.UI.by.removeHandler(F.target,FY,Ef);IPCC.Web.UI.by.removeHandler(F.target,BF,Ef);if(HL>cZ){V.er(F.target,'pccNextPageIn');V.er(F.target,'pccPreviousPageIn');V.er(F.target,'pccCurrentPage');V.er(F.target,'pccPageBack');V.er(F.target,'pccPageForward');V.jV(F.target,'pccNextPage');}else if(HL<cZ){V.er(F.target,'pccNextPageIn');V.er(F.target,'pccPreviousPageIn');V.er(F.target,'pccCurrentPage');V.er(F.target,'pccPageBack');V.er(F.target,'pccPageForward');V.jV(F.target,'pccPreviousPage');}V.er(bU,'pccPageListContainerPageChanging');aW.style.overflow='auto';jb=null;bU.style.overflow='hidden';var oY=IPCC.J.filter(dP,function(au){return au.bb===cZ+1;});kq(oY);setTimeout(function(){oK();},60);};this.pH=function aIl(aO){var Fo=cZ;var oY;if(ce===IPCC.ViewMode.SinglePage){oY=IPCC.J.filter(dP,function(au){return au.bb!==aO+1;});Lm(oY);}else{tA=true;var akG=alH(aO);if(eO===IPCC.PageLayout.VerticalScrollDirection){aW.scrollTop=akG;}else{aW.scrollLeft=akG;}}var zt=[];if(cZ!==aO){cZ=aO;var aA=bM[cZ];var F=new IPCC.PageEventArgs();F.imGearPage=V.get_currentPage();F.pageIndex=cZ;F.pageNodeID=aA.bF;V.aP('currentPageChanged',F);if(ce===IPCC.ViewMode.SinglePage){var gY=document.getElementById(bM[cZ].bF);var rh=document.getElementById(bM[Fo].bF);if(gY===null){gY=Jh(bM[cZ].fu);zt.push(bM[cZ]);gY.className='pccPageListItem pccCurrentPage';sT.push(cZ);if(ht>0){var kc=WC(bM[cZ]);gY.style.width=kc.ap+'px';gY.style.height=kc.aM+'px';}else{gY.style.width=bU.clientWidth-ha-fX+'px';gY.style.height=bU.clientWidth*0.8+'px';}gY.style.display='block';gY.setAttribute('id',bM[cZ].bF);bU.appendChild(gY);}if(BF.length>0){aW.style.overflow='hidden';bU.style.width=gY.style.width;bU.style.height=gY.style.height;bU.style.overflow='visible';if(jb!==null){IPCC.Web.UI.by.removeHandler(jb,FY,Ef);IPCC.Web.UI.by.removeHandler(jb,BF,Ef);if(HL>cZ){this.er(jb,'pccNextPageIn');this.er(jb,'pccPreviousPageIn');this.er(jb,'pccCurrentPage');this.er(jb,'pccPageForward');this.er(jb,'pccPageBack');this.jV(jb,'pccNextPage');}else if(HL<cZ){this.er(jb,'pccNextPageIn');this.er(jb,'pccPreviousPageIn');this.er(jb,'pccCurrentPage');this.er(jb,'pccPageForward');this.er(jb,'pccPageBack');this.jV(jb,'pccPreviousPage');}}IPCC.Web.UI.by.addHandler(rh,FY,Ef);IPCC.Web.UI.by.addHandler(rh,BF,Ef);jb=rh;HL=Fo;this.jV(bU,'pccPageListContainerPageChanging');if(cZ>Fo){this.jV(rh,'pccPageForward');this.er(gY,'pccPageBack');this.er(gY,'pccPreviousPage');this.er(gY,'pccPreviousPageIn');this.er(gY,'pccNextPage');this.jV(gY,'pccCurrentPage');this.jV(gY,'pccNextPageIn');}else{this.jV(rh,'pccPageBack');this.er(gY,'pccPageForward');this.er(gY,'pccPreviousPage');this.er(gY,'pccNextPage');this.er(gY,'pccNextPageIn');this.jV(gY,'pccCurrentPage');this.jV(gY,'pccPreviousPageIn');}}else{bU.style.width=gY.style.width;bU.style.height=gY.style.height;if(cZ>Fo){this.er(rh,'pccNextPage');this.er(rh,'pccCurrentPage');this.jV(rh,'pccPreviousPage');}else{this.er(rh,'pccPreviousPage');this.er(rh,'pccCurrentPage');this.jV(rh,'pccNextPage');}this.er(gY,'pccPreviousPage');this.er(gY,'pccNextPage');this.jV(gY,'pccCurrentPage');oY=IPCC.J.filter(dP,function(el){return el.bb===aO+1;});WQ(oY);setTimeout(function(){oK();},60);}IPCC.J.forEach(zt,alv);}}};this.aEe=function(){if(bM.length>0){V.pH(0);}};this.aEx=function(){if(cZ<bM.length-1){V.pH(bM.length-1);}};this.aEz=function(dq){if(tM===false){return "CommentsPanelClosed";}var ek=dP[dq.get_mark().get_markID()];if(!ek){return "ConversationDivDoesNotExist";}if(ce===IPCC.ViewMode.SinglePage&&ek.bb-1!==cZ){return "SinglePageModePageNotShown";}var aN=document.getElementById(bM[ek.bb-1].bF);if(bM[ek.bb-1].hJ===false||aN===undefined||aN.bH===undefined||aN.bH===null||aN.bH.fK()===false){return "PageOutOfView";}var h=dq.get_mark().get_boundingRectangle();var sR=aN.bH.transformPagePointToWindow(new IPCC.Web.UI.Point(h.x,h.y),true);var zL=aN.bH.transformPagePointToWindow(new IPCC.Web.UI.Point(h.x+h.width,h.y),true);sR.x=bU.offsetWidth;zL.x=bU.offsetWidth+vj();V.akB(aN.offsetTop,aN.offsetLeft,sR,zL);return "Success";};this.aEi=function(aO,h){if(ce===IPCC.ViewMode.SinglePage&&aO!==cZ){return false;}var aN=document.getElementById(bM[aO].bF);if(bM[aO].hJ===false||aN===undefined||aN.bH===undefined||aN.bH===null||aN.bH.fK()===false){return false;}var sR=aN.bH.transformPagePointToWindow(new IPCC.Web.UI.Point(h.x,h.y),true);var zL=aN.bH.transformPagePointToWindow(new IPCC.Web.UI.Point(h.x+h.width,h.y+h.height),true);V.akB(aN.offsetTop,aN.offsetLeft,sR,zL);return true;};this.aDV=function(apX,apZ){aW.scrollTop+=Math.round(apZ);aW.scrollLeft+=Math.round(apX);};this.akB=function(aFU,aFp,sR,zL){var ajk=zL.x-sR.x;var aiQ=zL.y-sR.y;var dw=new IPCC.Web.UI.Point(0,0);if(ajk>aW.clientWidth){dw.x=sR.x;}else{dw.x=sR.x+(ajk/2);}if(aiQ>aW.clientHeight){dw.y=sR.y;}else{dw.y=sR.y+(aiQ/2);}if(eO===IPCC.PageLayout.VerticalScrollDirection){aW.scrollTop=aFU+dw.y-aW.clientHeight/2;aW.scrollLeft=dw.x-aW.clientWidth/2;}else{aW.scrollLeft=aFp+dw.x-aW.clientWidth/2;aW.scrollTop=dw.y-aW.clientHeight/2;}};this.aBF=function(){var L=0;for(L=0;L<bM.length;L++){BO(L,true);}};this.aoH=function(){var cc=jD();var dF=[];if(cc){dF=rk(cc);}var L=0;for(L=0;L<dF.length;L++){BO(dF[L]);}if(V.zk.get_length()>0){V.zk.removeAllDocuments();}};this.Yp=function(aO,bf,dj,dR){if(bM[aO]&&bM[aO].hJ===true){var al=document.getElementById(bM[aO].bF);if(al&&al.bH&&al.bH.fK()===true){if(dR){IPCC.aI.dR(dR,"selectText");var fQ=al.bH.CD();var avs=fQ.hY;var awp=fQ.cP;fQ.hY=dR;fQ.cP=dR;al.bH.showTextSelection(bf,dj);fQ.hY=avs;fQ.cP=awp;}else{al.bH.showTextSelection(bf,dj);}}}};this.aql=function(){var cc=jD();var dF=[];if(cc){dF=rk(cc);}var L;for(L=0;L<dF.length;L++){if(bM[dF[L]].hJ===true){var fr=document.getElementById(bM[dF[L]].bF),bH=fr?fr.bH:undefined;if(bH&&bH.fK()===true){bH.showEmptyTextSelection(0);bH.extendTextSelection(undefined);bH.display();}}}};this.apT=function(aO){if(bM[aO]&&bM[aO].hJ===true){var fr=document.getElementById(bM[aO].bF),bH=fr?fr.bH:undefined;if(bH&&bH.fK()===true){bH.showEmptyTextSelection(0);bH.extendTextSelection(undefined);bH.display();}}};this.va=function(){var aN,de,bH;aE=null;IPCC.J.forEach(PQ,function(L){aN=bM[L];de=document.getElementById(aN.bF);if(de){bH=de.bH;}if(bH){if(bH.fK()&&bH.Bv()){bH.showEmptyTextSelection(0);bH.extendTextSelection(undefined);if(aN.hJ){bH.display();}}}aN=de=bH=undefined;});};this.vm=function(aO,sY){var al;var bI;var adV=function(apm,awG){return(apm+awG)%360;};bM[aO].gz=adV(bM[aO].gz,sY);if(bM[aO].bF){al=document.getElementById(bM[aO].bF);}if(al===undefined||al===null){return;}bI=al.bH;if(bI&&bI.fK()===false){bM[aO].CA=adV(bM[aO].CA,sY);return;}tA=true;if(bI&&bI.fK()===true){bI.rotate(sY);}var bO=0;var bo=0;var ey=ht;var fC=hK;if(jg(pB)===true){ey=hK;fC=ht;}if(jg(bM[aO].gz)===true){if(bI&&bI.fK()===true){bO=bI.get_pageHeight();bo=bI.get_pageWidth();}else{bO=hK;bo=ht;}}else{if(bI&&bI.fK()===true){bO=bI.get_pageWidth();bo=bI.get_pageHeight();}else{bO=ht;bo=hK;}}tA=true;if(ce===IPCC.ViewMode.SinglePage){al.style.width=bO*cR*cW/bM[aO].ho+'px';al.style.height=bo*cR*cW/bM[aO].hx+'px';if(aO===cZ){bU.style.width=bO*cR*cW/bM[aO].ho+'px';bU.style.height=bo*cR*cW/bM[aO].hx+'px';}}else if(ce===IPCC.ViewMode.Document){al.style.width=bO*cR*cW/bM[aO].ho+'px';al.style.height=bo*cR*cW/bM[aO].hx+'px';var L=0;if(eO===IPCC.PageLayout.VerticalScrollDirection){if(bO*cR*cW/bM[aO].ho>gn){gn=bO*cR*cW/bM[aO].ho;}else if(al.clientHeight>=gn-10){gn=0;for(L=0;L<bM.length;L++){al=document.getElementById(bM[L].bF);if(al&&al.clientWidth>gn){gn=al.clientWidth;}}}if(bo*cR*cW/bM[aO].hx>fU){fU=bo*cR*cW/bM[aO].hx;}}else{if(bo*cR*cW/bM[aO].hx>fU){fU=bo*cR*cW/bM[aO].hx;}else if(al.clientWidth>=fU-10){fU=0;for(L=0;L<bM.length;L++){al=document.getElementById(bM[L].bF);if(al&&al.clientHeight>fU){fU=al.clientHeight;}}}if(bO*cR*cW/bM[aO].ho>gn){gn=bO*cR*cW/bM[aO].ho;}}}else{var hm;if(eO===IPCC.PageLayout.VerticalScrollDirection){hm=ey/bO*cR*cW/bM[aO].hx;if(bI&&bI.fK()===true){bI.zoom(hm);}tA=true;al.style.width=ey*cR*cW/bM[aO].ho+'px';al.style.height=hm*bo+'px';}else{hm=fC/bo*cR*cW/bM[aO].hx;if(bI&&bI.fK()===true){bI.zoom(hm);}tA=true;al.style.height=fC*cR*cW/bM[aO].hx+'px';al.style.width=hm*bO+'px';}if(ey*cR*cW/bM[aO].ho>gn){gn=ey*cR*cW/bM[aO].ho;}if(fC*cR*cW/bM[aO].hx>fU){fU=fC*cR*cW/bM[aO].hx;}}if(bI&&bI.fK()===true){tA=true;this.xB(al,aO);setTimeout(function(){if(tM===false){return;}var hX=xw();var oY=IPCC.J.filter(dP,function(el){return aO===el.bb-1;});ye(oY);kq(oY,true,hX);},0);}};this.aEk=function(sY){var vk=cZ;this.vm(cZ,sY);if(ce!==IPCC.ViewMode.SinglePage){var V=this;setTimeout(function(){V.pH(vk);},10);}};this.acp=function(sY){var vk=cZ;var cc=jD();if(ce!==IPCC.ViewMode.SinglePage){this.pH(vk);}var fT=0;var gH=bM.length-1;var L;for(L=fT;L<=gH;L++){this.vm(L,sY);}if(ce!==IPCC.ViewMode.SinglePage){var V=this;setTimeout(function(){abM(cc);V.pH(vk);},10);}};function aeh(Cg,mN){var lN=0;var qX=0;var CU=false;tA=true;var cc=jD();if(cc){IPCC.J.forEach(cc.IV,function(ai){var hu=eO===IPCC.PageLayout.VerticalScrollDirection?ai.aM+eK:ai.ap+ha+fX;var aGF=Cg.IV[ai.ao];if(aGF.yN){CU=true;return;}if(mN&&ai.ao>=mN.kW&&ai.ao<=mN.ly){var al=document.getElementById(bM[ai.ao].bF);if(al){return;}}if(CU){qX+=hu;}else{lN+=hu;}});}return{qX:qX,lN:lN};};function abM(Cg){if(ce===IPCC.ViewMode.SinglePage){return;}var mN=KX(Cg);var rW=aeh(Cg,mN);if(eO===IPCC.PageLayout.VerticalScrollDirection){bU.style.paddingTop=rW.lN+'px';bU.style.paddingBottom=rW.qX+'px';}else{bU.style.paddingLeft=rW.lN+'px';bU.style.paddingRight=rW.qX+'px';}};function aDB(Cg){if(ce===IPCC.ViewMode.SinglePage){return;}var KJ;var mN;if(eO===IPCC.PageLayout.VerticalScrollDirection){KJ=parseInt(window.getComputedStyle(bU,null).getPropertyValue('padding-top'),10);}else{KJ=parseInt(window.getComputedStyle(bU,null).getPropertyValue('padding-left'),10);}mN=KX(Cg);var rW=aeh(Cg,mN);if(eO===IPCC.PageLayout.VerticalScrollDirection){bU.style.paddingTop=rW.lN+'px';bU.style.paddingBottom=rW.qX+'px';aW.scrollTop=aW.scrollTop+rW.lN-KJ;}else{bU.style.paddingLeft=rW.lN+'px';bU.style.paddingRight=rW.qX+'px';aW.scrollLeft=aW.scrollLeft+rW.lN-KJ;}};this.NT=function(aO){IPCC.aI.kd(aO,'pageIndex',0,bM.length-1);var aN=bM[aO];if(aN&&aN.bF&&(aN.Du===true||aN.wa===false)){var bd;var al=document.getElementById(aN.bF);if(al.bH){al.bH.dispose();}akR(al);bd=new IPCC.Web.UI.PageView(al,false,aW);if(bd){bd.set_autoUpdate(false);bd.uY(al);bd.initialize();bd.set_imageHandlerUrl(aN.ba.sv);bd.set_requireRequestsOptimize(wQ);if(lZ!==undefined){bd.set_serviceResponseTimeout(lZ);}bd.set_scrollBars(IPCC.Web.UI.ScrollBars.None);bd.QQ(bK===IPCC.Web.UI.MouseTool.HandPan||bK===IPCC.Web.UI.MouseTool.EditMarks);Zj(bd,aN);WE(bd);Yq(bd);Xu(bd);Ze(bd);}bd.set_textRequired(sh);bd.set_markHandleMode(sA);bd.set_debug(_debug);bd.set_gamma(qQ);bd.set_sharpening(tc);bd.set_svgLineWidthMultiplier(mj);bd.set_debugErrorLevel(nT);bd.nC(V.jj());if(qr){bd.set_resourcePath(qr);}if(ig){bd.JM(ig());}else{bd.set_mouseTool(IPCC.Web.UI.MouseTool.None);}bd.om(V.ni());aN.Du=false;aN.AC=false;var Ap={encodedDocumentIdentifier:aN.ba.get_encodedDocumentIdentifier(),pageNumber:aO,artServiceOption:0,documentArtPage:aN.ec,viewRotationDegreesClockwise:aN.gz};if(aN.aY){Ap.artPage=aN.aY;}if(aN.ec){Ap.documentArtPage=aN.ec;}bd.openPage(Ap);aN.wa=true;ks++;}};function Zk(fd,fp){if(ht<=0){return;}var ey=ht;var fC=hK;var eu=cW/bM[0].ho;if(jg(pB)===true){ey=hK;fC=ht;eu=cW/bM[0].hx;}var kn=1;if(eO===IPCC.PageLayout.VerticalScrollDirection){kn=(aW.clientWidth-vj()-(ha+fX+mr+nM))/(ey*eu);}else{kn=(aW.clientHeight-(eK+ix+oV+qe))/(fC*eu);}var vz;if(cR<=kn){vz=false;}else if(cR>kn){vz=true;}if(isNaN(kn)||kn<=0||Math.abs(kn)===Infinity){return;}cR=kn;gn=0;fU=0;var fT=0;var gH=bM.length-1;var aU=0;var bI;for(aU=fT;aU<=gH;aU++,bI=undefined){var al=document.getElementById(bM[aU].bF);if(al){bI=al.bH;}if(bI===undefined){continue;}var bO=ey;var bo=fC;if(bM[aU].lv()>0){if(jg(bM[aU].gz)===true){bO=bM[aU].qy();bo=bM[aU].lv();}else{bO=bM[aU].lv();bo=bM[aU].qy();}}var hm=1;if(eO===IPCC.PageLayout.VerticalScrollDirection){hm=ey/bO*cR*eu;al.style.width=ey*cR*eu+'px';al.style.height=bo*hm+'px';if(ey*cR*eu>gn){gn=ey*cR*eu;}if(bo*hm*cW/bM[aU].hx>fU){fU=bo*hm*eu;}}else{hm=fC/bo*cR;al.style.height=fC*cR*eu+'px';al.style.width=bO*hm*eu+'px';if(bO*cR*cW/bM[aU].ho>gn){gn=bO*cR*eu;}if(fC*hm*eu>fU){fU=fC*hm*eu;}}if(bI&&bM[aU].hJ===true&&bI.fK()===true){bI.zoom(hm);}if(bI&&bM[aU].hJ===true&&bI.fK()===true){bI.display();}bI=undefined;}jD();oK();setTimeout(function(){ye(dP);kq(dP);},0);V.aP('scaleChanged',{scaleType:(vz)?"scaledDown":"scaledUp",scaleTrigger:fd,fitType:fp,scaleFactor:cR});};function jg(gU){switch(gU){case 90:case 270:case-90:case-270:return true;default:return false;}};function gc(pG){var vy=document.createElement('div');var L;for(L in pG){if(pG.hasOwnProperty(L)){vy.style[L]=pG[L];}}return vy;};this.asV=function(){if(Jy===undefined||Jy===null){Jy=1;}var ds=this.oe().id.toString()+'_'+Jy.toString();Jy++;return ds;};this.Zx=function(){return this.zk;};this.gO=function(ayd){for(var rC=0;rC<bM.length;rC++){var arh=bM[rC];if(ayd===arh.fu){return bM[rC].aY;}}return null;};this.aHe=function(jr){var al=document.getElementById(bM[jr.get_pageNumber()].bF);if(al){return al.bH.lX();}return null;};this.aGA=function(){if(me===false||jb!==null||vq){return;}var cc=jD();aeJ(cc);};function aBb(aH,F){UR(F);};function UR(aV){var hH=aV.imGearDocument;var aCf=V.asV();hH.Rk=aCf;var cz=hH.get_pages();var cr=cz.get_length();if(cr>0){var Pn=document.createDocumentFragment();for(var aU=0;aU<cr;aU++){var aN=cz.getPage(aU);if(!aN.ba){aN.ba=hH;}Jh(aN,aN.get_pageNumber()===0?null:Pn);}bU.appendChild(Pn);}};var aDO=IPCC.J.ajT(function(){if(JC.length>0&&me){var cA;var Ic;var Iy=0;IPCC.J.forEach(JC,aeZ);var aaE=jD();if(!aaE){return;}var kc=aaE.IV;IPCC.J.forEach(JC,function(aN,ao){cA=aN.nJ();Ic=kc[cA];if(eO===IPCC.PageLayout.VerticalScrollDirection){Iy+=Ic.aM+eK;}else{Iy+=Ic.ap+ha;}});if(Iy&&ce!==IPCC.ViewMode.SinglePage){if(eO===IPCC.PageLayout.VerticalScrollDirection){bU.style.paddingBottom=Iy+'px';}else{bU.style.paddingRight=Iy+'px';}}ye(dP,true);kq(dP,true);if(V.zk.Qv(0).eP===bM.length){V.aP('allPagesAdded');}oK();}JC=[];},10);function TJ(aH,F){if(F.imGearPage.get_pageNumber()===0){Jh(F.imGearPage);return;}JC.push(F.imGearPage);aDO();};function UV(aH,F){var cA=F.imGearPage.get_pageNumber();var SJ=F.imGearPage.ba.get_documentIdentifier();for(var aU=0;aU<bM.length;aU++){if(bM[aU].fu.get_pageNumber()===cA&&bM[aU].fu.ba.get_documentIdentifier()===SJ){var al=document.getElementById(bM[aU].bF);if(al){bU.removeChild(al);if(al.bH){al.bH.dispose();var oY=IPCC.J.filter(dP,function(el){return el.bb===bM[aU].cA+1;});Lm(oY);}}bM.splice(aU,1);}}};function aeZ(jr){if(!IPCC.J.contains(bM,jr)){var aA=new IPCC.aA({page:jr});if(pB){aA.gz=pB;}if(!aA.ba){aA.ba=jr.ba;}bM.push(aA);IPCC.Pagecounter++;bM=bM.sort(function(dz,eJ){return dz.cA-eJ.cA;});apI(jr);aqP(jr);aqZ(jr);aA.axp=false;aA.AC=false;apW(aA);arj(aA);Zt(aA);aqk(aA);aqG(aA);aqe(aA);aqb(aA);apR(aA);aqV(aA);aqt(aA);return aA;}};function Jh(aN,Pn){var PU=aN.get_pageNumber();var dA=V.oe();var hH=null;var Yg;var cr=V.get_documents().get_length();for(var bj=0;bj<cr;bj++){hH=V.get_documents().getDocument(bj);if(hH!==null){Yg=hH.Rk;if(Yg===aN.ba.Rk){break;}}}var gS=IPCC.J.find(bM,function(aA){return aA.fu&&aA.fu===aN;});if(!gS){gS=aeZ(aN);}gS.Fi=true;var acj=gS.bF;if(gS.GK===1){return document.getElementById(acj);}gS.GK=1;if(bU===''){afj();}var lj=(function(){var bB;if(ce!==IPCC.ViewMode.SinglePage){bB=gc({overflow:'hidden',position:'relative'});}else{bB=gc({overflow:'hidden',position:'absolute',margin:'0px'});if(gS.cA>cZ){V.jV(bB,'pccNextPage');}else if(gS.cA<cZ){V.jV(bB,'pccPreviousPage');}else{V.jV(bB,'pccCurrentPage');}}sT.push(aN.cA);V.jV(bB,'pccPageListItem');akR(bB);var DE=WC(gS);bB.style.width=DE.ap+'px';bB.style.height=DE.aM+'px';var cc=jD();var ML;if(eO===IPCC.PageLayout.VerticalScrollDirection||ce===IPCC.ViewMode.SinglePage){bB.style.display='block';if(ht>0){bB.style.margin=eK+'px auto '+ix+'px auto';}if(cc.cI.length>0&&ce!==IPCC.ViewMode.SinglePage){ML=cc.cI[0];if(PU<ML.ao){var anH=IPCC.J.Pg(bU,'padding-top');var app=IPCC.J.Ns(anH);var Yx=app-DE.aM-eK;if(Yx<0){Yx=0;}bU.style.paddingTop=Yx+'px';}else{var art=IPCC.J.Pg(bU,'padding-bottom');var asG=IPCC.J.Ns(art);var YO=asG-DE.aM-eK;if(YO<0){YO=0;}bU.style.paddingBottom=YO+'px';}}}else{bB.style.display='inline-block';if(ht>0){bB.style.margin=eK+'px '+ha+'px '+ix+'px '+fX+'px';}if(cc.cI.length>0&&ce!==IPCC.ViewMode.SinglePage){ML=cc.cI[0];if(PU<ML.ao){var asB=IPCC.J.Pg(bU,'padding-left');var asP=IPCC.J.Ns(asB);var Ys=asP-DE.ap-ha;if(Ys<0){Ys=0;}bU.style.paddingLeft=Ys+'px';}else{var apo=IPCC.J.Pg(bU,'padding-right');var aoz=IPCC.J.Ns(apo);var Zl=aoz-DE.ap-ha;if(Zl<0){Zl=0;}bU.style.paddingRight=Zl+'px';}}}bB.setAttribute('id',acj);return bB;}());gS.fu=gS.fu||aN;gS.aeS=gS.aeS||Yg;gS.gz=gS.gz!==undefined?gS.gz:pB;gS.hJ=false;function aCh(fr){var So=fr.childNodes;var axs=IPCC.J.find(bM,function(aA){if(aA.cA<=PU){return;}var jm=IPCC.J.find(So,function(jm){return jm.id&&jm.id===aA.bF;});if(!jm){return;}if(aA.cA>PU){jm.parentElement.insertBefore(lj,jm);return true;}});if(!axs){fr.appendChild(lj);}}(function aGQ(){if(bM.length===1){bU.appendChild(lj);}else{return aCh(Pn||bU);}}());var aDR=false;if(lj&&dA.clientWidth>0){var aog=dA.clientWidth/(lj.clientWidth+(lj.clientLeft*2));var aEK=dA.clientHeight/(lj.clientHeight+(lj.clientTop*2));if(bM.length<(aog*aEK)){aDR=true;}}if(bM.length<2){var bd=new IPCC.Web.UI.PageView(lj,false,aW);if(bd){bd.set_autoUpdate(false);bd.uY(lj);bd.initialize();bd.set_imageHandlerUrl(aN.ba.sv);bd.set_imGearPage(gS.fu);bd.set_artPage(gS.aY);bd.set_documentArtPage(gS.ec);bd.set_requireRequestsOptimize(wQ);if(lZ!==undefined){bd.set_serviceResponseTimeout(lZ);}bd.set_scrollBars(IPCC.Web.UI.ScrollBars.None);bd.set_textRequired(sh);bd.set_markHandleMode(sA);bd.set_debug(_debug);bd.set_gamma(qQ);bd.set_sharpening(tc);bd.set_svgLineWidthMultiplier(mj);bd.set_debugErrorLevel(nT);bd.nC(V.jj());if(qr){bd.set_resourcePath(qr);}if(ig){bd.JM(ig());}else{bd.set_mouseTool(IPCC.Web.UI.MouseTool.None);}bd.om(V.ni());bd.QQ(bK===IPCC.Web.UI.MouseTool.HandPan||bK===IPCC.Web.UI.MouseTool.EditMarks);}Zj(bd,gS);Yq(bd);Xu(bd);WE(bd);Ze(bd);bd.openPage({encodedDocumentIdentifier:aN.ba.get_encodedDocumentIdentifier(),pageNumber:aN.get_pageNumber(),artServiceOption:0,imGearPage:gS.fu,artPage:gS.aY,documentArtPage:gS.ec,viewRotationDegreesClockwise:gS.gz});gS.wa=true;ks++;}return lj;};function ajU(aA){return aA.Fi;};function oK(){if(ks>0||me===false||jb!==null){return;}if(vq){return;}var cc=jD();if(!cc){return;}bM.forEach(function(aN,ao){if(!aN.hJ){return;}V.KW(ao);});var zt=apg(cc);IPCC.J.forEach(zt||[],function(ao){var aN=bM[ao];if(aN){alv(aN);}});IPCC.J.forEach(cc.cI,function(Ic){var aA=bM[Ic.ao];if(ajU(aA)&& !aA.hJ&&aA.GK){OI(aA);}});aeJ(cc);aub();};function aeJ(cc){if(!cc){return;}var mN=KX(cc);for(var ao=mN.kW;ao<=mN.ly;ao++){var aA=bM[ao];if(!ajU(aA)){aA.Fi=true;var YZ=V.Zx();var hH=YZ.Qv(0);var jr=hH.cz.iY(ao);Jh(jr);akL(aA,false);}}};function apg(cc){var ayj=rk(cc);var zt=[];IPCC.J.forEach(ayj,function(ao){var aN=bM[ao];if(aN&&aN.GK===0){var YZ=V.Zx();var hH=YZ.Qv(0);var jr=hH.cz.iY(ao);Jh(jr);zt.push(ao);}});return zt;};function aub(){var uw=aW.scrollTop;var tX=aW.scrollLeft;var vL=aW.clientHeight;var uB=aW.clientWidth;var wH=aW.scrollWidth;var uO=aW.scrollHeight;var cc=aau({uw:uw,tX:tX,vL:vL,uB:uB,wH:wH,uO:uO});var mN=KX(cc);var abw=aoL(cc);var lN=0;var qX=0;var CU=false;IPCC.J.forEach(cc.IV,function(ai){var hu=eO===IPCC.PageLayout.VerticalScrollDirection?ai.aM+eK:ai.ap+ha+fX;var ao= +ai.ao;if(ai.yN||(ce===IPCC.ViewMode.SinglePage&&ao===cZ)){CU=true;return;}if(ao>=mN.kW&&ao<=mN.ly){if(ao>=abw.kW&&ao<=abw.ly){return;}if(CU){if(BO(ao,true)> -1){qX+=hu;}}else{if(BO(ao,true)> -1){lN+=hu;}}return;}if(CU){qX+=hu;BO(ao);}else{lN+=hu;BO(ao);}});if(ce===IPCC.ViewMode.SinglePage){return;}if(eO===IPCC.PageLayout.VerticalScrollDirection){bU.style.paddingTop=lN+'px';bU.style.paddingBottom=qX+'px';}else{bU.style.paddingLeft=lN+'px';bU.style.paddingRight=qX+'px';}};function BO(aU,axd){var aN=bM[aU];if(!aN){return-1;}if(axd===true&& !aN.hJ){return-1;}aN.AC=false;aN.wa=false;aN.hJ=false;aN.GK=0;aN.Fi=false;if(Lt&& !aN.fu.dr().ayN()&&RS!==true){aN.fu.aeG();}var yo=document.getElementById(aN.bF);if(!yo){return-1;}if(yo.bH){yo.bH.dispose();yo.parentElement.removeChild(yo);return aU;}else{yo.parentElement.removeChild(yo);}return-1;};function OI(aA){var bB=document.getElementById(aA.bF);V.xB(bB,aA.cA);};function alv(aA){akL(aA,true);OI(aA);};function akL(aN,atO){var bB=document.getElementById(aN.bF);if(bB===null){return;}var bd=new IPCC.Web.UI.PageView(bB,false,aW);bd.set_autoUpdate(false);bd.uY(document.getElementById(aN.bF));bd.initialize();bd.set_imageHandlerUrl(aN.ba.sv);bd.set_imGearPage(aN.fu);bd.set_artPage(aN.aY);bd.set_requireRequestsOptimize(wQ);if(lZ!==undefined){bd.set_serviceResponseTimeout(lZ);}bd.set_scrollBars(IPCC.Web.UI.ScrollBars.None);bd.set_textRequired(sh);bd.set_markHandleMode(sA);bd.set_debug(_debug);bd.set_gamma(qQ);bd.set_sharpening(tc);bd.set_svgLineWidthMultiplier(mj);bd.set_debugErrorLevel(nT);bd.nC(V.jj());if(qr){bd.set_resourcePath(qr);}if(ig){bd.JM(ig());}else{bd.set_mouseTool(IPCC.Web.UI.MouseTool.None);}bd.om(V.ni());bd.QQ(bK===IPCC.Web.UI.MouseTool.HandPan||bK===IPCC.Web.UI.MouseTool.EditMarks);Zj(bd,aN);Yq(bd);Xu(bd);WE(bd);Ze(bd);if(atO===true){bd.add_pageOpened(function aFK(ar){V.xB(bB,aN.cA);});}if(aN.AC===false&&aN.fu){aN.Fi=true;var Ap={encodedDocumentIdentifier:aN.fu.ba.get_encodedDocumentIdentifier(),pageNumber:aN.fu.get_pageNumber(),imGearPage:aN.fu,viewRotationDegreesClockwise:aN.gz};if(aN.aY){Ap.artPage=aN.aY;}if(aN.ec){Ap.documentArtPage=aN.ec;}bd.openPage(Ap);aN.wa=true;ks++;}};function ann(aY,fY){var ax;aY.forEachMark(function(C){switch(C.get_type()){case IPCC.Web.UI.MarkType.Line:var aJ=C.get_points();var bx=aJ.yl(0);var ko=aJ.yl(1);aJ.setPoint(0,new IPCC.Web.UI.Point(bx.x*fY,bx.y*fY));aJ.setPoint(1,new IPCC.Web.UI.Point(ko.x*fY,ko.y*fY));break;case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Ellipse:case IPCC.Web.UI.MarkType.Stamp:case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Freehand:case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.SignatureText:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:case IPCC.Web.UI.MarkType.TextSelectionRedaction:ax=C.get_rectangle();C.set_rectangle({x:ax.x*fY,y:ax.y*fY,width:ax.width*fY,height:ax.height*fY});break;case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.Strikethrough:ax=C.get_rectangle();C.set_rectangle({x:ax.x*fY,y:ax.y*fY,width:ax.width*fY,height:ax.height*fY});var ab=C.ab,hI;for(var i=0;i<ab.length;i++){hI=ab[i];hI.x=hI.x*fY;hI.y=hI.y*fY;hI.width=hI.width*fY;hI.height=hI.height*fY;}break;default:break;}});};function Zj(bd,aN){function aCL(sender,evnt){var acs=function(ap,aM,bb){var Xi={'width':ap,'height':aM,'pageNumber':bb};V.aP('pageOpening',Xi);};var cA=evnt.pageNumber;var SJ=evnt.documentIdentifier;aN.bO=bd.get_pageWidth();aN.bo=bd.get_pageHeight();var hy=bd.get_pageXResolution();var gW=bd.get_pageYResolution();if(!isNaN(parseFloat(hy))&&isFinite(hy)){aN.ho=hy;}if(!isNaN(parseFloat(gW))&&isFinite(gW)){aN.hx=gW;}bd=null;for(var aU=0;aU<bM.length;aU++){if(me&&bM[aU].fu.get_pageNumber()===cA&&bM[aU].fu.ba.get_documentIdentifier()===SJ){bM[aU].wa=false;bM[aU].AC=true;bM[aU].Du=false;if(ce===IPCC.ViewMode.SinglePage){var lT= -1;if(Array.prototype.indexOf){lT=sT.indexOf(aU);}else{lT=IPCC.Web.lw(sT,aU);}if(lT!== -1){sT.splice(lT,1);}}var ajy=false;for(var bj=0;bj<PQ.length;bj++){if(PQ[bj]===aU){ajy=true;}}if(ajy===false){PQ.push(aU);}var lV=0;var mZ=0;var al=document.getElementById(bM[aU].bF);var bI=al.bH;var ey;var fC;var Zd;if(ht===0&&(aU===0||bM[0].Du===true)){if(al.currentStyle){oV=parseInt(al.currentStyle.borderTopWidth,10)||0;eK=parseInt(al.currentStyle.marginTop,10)||0;mr=parseInt(al.currentStyle.borderLeftWidth,10)||0;ha=parseInt(al.currentStyle.marginLeft,10)||0;qe=parseInt(al.currentStyle.borderBottomWidth,10)||0;ix=parseInt(al.currentStyle.marginBottom,10)||0;nM=parseInt(al.currentStyle.borderRightWidth,10)||0;fX=parseInt(al.currentStyle.marginRight,10)||0;}else if(document.defaultView&&document.defaultView.getComputedStyle){var vE=document.defaultView.getComputedStyle(al);oV=parseInt(vE.borderTopWidth,10)||0;eK=parseInt(vE.marginTop,10)||0;mr=parseInt(vE.borderLeftWidth,10)||0;ha=parseInt(vE.marginLeft,10)||0;qe=parseInt(vE.borderBottomWidth,10)||0;ix=parseInt(vE.marginBottom,10)||0;nM=parseInt(vE.borderRightWidth,10)||0;fX=parseInt(vE.marginRight,10)||0;}if(ce===IPCC.ViewMode.SinglePage){al.style.margin=eK+'px 0px '+ix+'px 0px';bU.style.margin="0px auto";}else{if(eO===IPCC.PageLayout.VerticalScrollDirection){al.style.margin=eK+'px auto '+ix+'px auto';}else{al.style.margin=eK+'px '+fX+'px '+ix+'px '+ha+'px';bU.style.margin='0px '+fX+'px 0px '+ha+'px';}}ht=bI.get_pageWidth();hK=bI.get_pageHeight();akP=hy;ey=ht;fC=hK;var eu=cW/bM[aU].ho;if(jg(bM[aU].gz)===true){fC=ht;ey=hK;eu=cW/bM[aU].hx;}if(ce===IPCC.ViewMode.SinglePage){var ari=(aW.offsetWidth-(ha+fX+mr+nM));var aqc=(aW.offsetHeight-(eK+ix+oV+qe+atW));pl=ari/(ey*eu);Zd=aqc/(fC*eu);if(Zd<pl){pl=Zd;}bI.zoom(pl*eu);}else if(eO===IPCC.PageLayout.VerticalScrollDirection){pl=(aW.offsetWidth-IPCC.Web.oa()-(ha+fX+mr+nM))/(ey*eu);bI.zoom(pl*eu);}else{pl=(aW.offsetHeight-IPCC.Web.oa()-(eK+ix+oV+qe))/(fC*eu);bI.zoom(pl*eu);}lV=ey*pl*eu;mZ=fC*pl*eu;al.style.width=lV+'px';al.style.height=mZ+'px';if(ce===IPCC.ViewMode.SinglePage){bU.style.width=lV+'px';bU.style.height=mZ+'px';}if(ce!==IPCC.ViewMode.SinglePage){for(var rC=0;rC<bM.length;rC++){if(bM[rC].hJ===false&&rC!==aU){if(bM[rC].bF){al=document.getElementById(bM[rC].bF);al.style.width=ey*pl+'px';al.style.height=fC*pl+'px';if(eO===IPCC.PageLayout.VerticalScrollDirection){al.style.margin=eK+'px auto '+ix+'px auto';}else{al.style.margin=eK+'px '+fX+'px '+ix+'px '+ha+'px';}}}}}cR=pl;acs(aN.bO,aN.bo,cA+1);al.bH.display();}else{if(ce===IPCC.ViewMode.Document||ce===IPCC.ViewMode.SinglePage){if(jg(bM[aU].gz)===true){lV=bI.get_pageHeight()*cR*cW/bM[aU].ho;mZ=bI.get_pageWidth()*cR*cW/bM[aU].hx;}else{lV=bI.get_pageWidth()*cR*cW/bM[aU].ho;mZ=bI.get_pageHeight()*cR*cW/bM[aU].hx;}}else{var hm;var bO=bI.get_pageWidth();var bo=bI.get_pageHeight();ey=ht;fC=hK;if(jg(pB)===true){ey=hK;fC=ht;}if(jg(bM[aU].gz)===true){bO=bI.get_pageHeight();bo=bI.get_pageWidth();}if(eO===IPCC.PageLayout.VerticalScrollDirection){hm=ey/bO*cR*cW/bM[0].hx;lV=ey*cR*cW/bM[0].ho;mZ=bo*hm;}else{hm=fC/bo*cR*cW/bM[0].ho;mZ=fC*cR*cW/bM[0].hx;lV=bO*hm;}}if(lV!==Math.round(lV)){lV=Math.floor(lV*100)/100;}if(mZ!==Math.round(mZ)){mZ=Math.floor(mZ*100)/100;}if(al.style.width!==lV+'px'||al.style.height!==mZ+'px'){if(eO===IPCC.PageLayout.VerticalScrollDirection){al.style.width=lV+'px';al.style.height=mZ+'px';}else{al.style.width=lV+'px';al.style.height=mZ+'px';}ye(dP,true);kq(dP,true);}acs(aN.bO,aN.bo,cA+1);}if(lV>gn){gn=lV;if(eO===IPCC.PageLayout.VerticalScrollDirection){aW.scrollLeft=(gn-aW.clientWidth)/2;}}if(mZ>fU){fU=mZ;if(eO===IPCC.PageLayout.HorizontalScrollDirection){aW.scrollTop=(fU-aW.clientHeight)/2;}}if(bM[aU].CA>0){var Wi=document.getElementById(bM[aU].bF).bH;if(Wi){Wi.rotate(bM[aU].CA);Wi.display();bM[aU].CA=0;}}if(ks>0){ks=ks-1;}if(bM[aU].ajm()===true){var jr=bM[aU].fu;var fY=bM[aU].lv()/jr.aeA();if(fY!==1){var aY=V.gO(jr);if(aY){ann(aY,fY);}}}bM[aU].VY(false);jD();var HV=new IPCC.OpenPageEventArgs();HV.pageIndex=evnt.pageNumber;HV.imGearPage=evnt.imGearPage;HV.viewRotationDegreesClockwise=evnt.viewRotationDegreesClockwise;HV.pageNodeID=bM[aU].bF;V.aP('pageOpened',HV);break;}}if(ks===0&&ng===null&&jb===null){setTimeout(function(){oK();},60);}};bd.add_pageOpened(aCL);};function Yq(bd){function aCs(aH,ay){if(me===false){return;}var yZ;if(ay.pageNumber>=0){if(bM[ay.pageNumber].bF){yZ=bM[ay.pageNumber].bF;}}bM[ay.pageNumber].Du=true;bM[ay.pageNumber].wa=false;bM[ay.pageNumber].AC=false;bM[ay.pageNumber].hJ=false;var oU=new IPCC.ExceptionEventArgs();oU.exception=ay.exception;oU.pageIndex=ay.pageNumber;oU.pageNodeID=yZ;V.aP('pageOpenFailed',oU);if(ks>0){ks=ks-1;if(ks===0){setTimeout(function(){oK();},60);}}};bd.add_pageOpenFailed(aCs);};function Xu(bd){function aCd(aH,ay){if(me===false){return;}var F=new IPCC.PageEventArgs();F.pageIndex=ay.bb;F.imGearPage=bM[ay.bb].fu;F.pageNodeID=bM[ay.bb].bF;bM[ay.bb].hJ=true;if(ce===IPCC.ViewMode.SinglePage){var lT= -1;if(Array.prototype.indexOf){lT=sT.indexOf(ay.bb);}else{lT=IPCC.Web.lw(sT,ay.bb);}if(lT!== -1){sT.splice(lT,1);}}V.aP('pageDisplayed',F);setTimeout(function(){var oY=IPCC.J.filter(dP,function(el){if(ce===IPCC.ViewMode.SinglePage){return ay.bb===el.bb-1&&el.bb-1===cZ;}else{return ay.bb===el.bb-1;}});ye(oY);kq(oY);},0);};bd.add_pageDisplayed(aCd);};function aqP(aN){function GG(aH,ay){if(me===false){return;}V.aP('textPageReady',{pageIndex:ay.pageNumber,containsText:ay.containsText});var cc=jD();var dF=[];if(cc){dF=rk(cc);}if(ay.containsText===true&&ay.pageNumber>=dF[0]&&ay.pageNumber<=dF[dF.length-1]){if(bM[ay.pageNumber].aY&&bM[ay.pageNumber].aY.get_markCount()>0){var al=document.getElementById(bM[ay.pageNumber].bF);V.xB(al,ay.pageNumber);}}};aN.yW(GG);};function aqZ(aN){function aBe(aH,ay){if(me===false){return;}var ec=bM[ay.pageNumber].ec;aN.agC().IT().lf(function(gd){var C=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.DocumentHyperlink),ax=gd.eT();C.set_rectangle(new IPCC.Web.UI.Rectangle(ax.x,ax.y,ax.width,ax.height));C.set_href(gd.ago());C.set_lineColor(gd.avd());C.set_lineWidth(gd.awe());C.set_borderPattern(gd.auV());C.set_borderType(gd.avr());C.set_borderHorizontalRadius(gd.auc());C.set_borderVerticalRadius(gd.avI());C.set_borderOpacity(gd.atq());ec.addMark(C);gd.aoj(C);});V.aP('hyperlinkPageReady',{pageIndex:ay.pageNumber});var cc=jD();var dF=[];if(cc){dF=rk(cc);}if(ay.pageNumber>=dF[0]&&ay.pageNumber<=dF[dF.length-1]){var al=document.getElementById(bM[ay.pageNumber].bF);V.xB(al,ay.pageNumber);}};aN.abD(aBe);};function apI(aN){function Fj(aH,ay){if(me===false){return;}var yZ;if(ay.pageNumber>=0){if(bM[ay.pageNumber].bF){yZ=bM[ay.pageNumber].bF;}}V.aP('textExtractionFailed',{'exception':ay.exception,'pageIndex':ay.pageNumber,'pageNodeID':yZ});};aN.yI(Fj);};function WE(bd){function aCQ(aH,ay){if(me===false){return;}var yZ;if(isNaN(ay.pageNumber)===false){if(ay.pageNumber>=0){if(bM[ay.pageNumber].bF){yZ=bM[ay.pageNumber].bF;}}bM[ay.pageNumber].Du=true;bM[ay.pageNumber].wa=false;bM[ay.pageNumber].AC=false;bM[ay.pageNumber].hJ=false;}var oU=new IPCC.ExceptionEventArgs();oU.functionName=ay.function_name;oU.exception=ay.exception;oU.pageIndex=ay.pageNumber;oU.pageNodeID=yZ;V.aP('exceptionThrown',oU);if(ks>0){ks=ks-1;if(ks===0){setTimeout(function(){oK();},60);}}};bd.add_exceptionThrown(aCQ);};function Ze(bd){function Fp(aH,ay){V.aP('markCreating',ay);};bd.add_markCreating(Fp);};function apW(aA){function adv(){if(me===false){return;}var cc=jD();var dF=[];if(cc){dF=rk(cc);}if(aA.cA>=dF[0]&&aA.cA<=dF[dF.length-1]){var al=document.getElementById(aA.bF);V.xB(al,aA.cA);}var F=new IPCC.Web.UI.MarkEventArgs();F.pageIndex=aA.cA;V.aP('marksLoaded',F);};aA.aY.add_marksLoaded(adv);};function arj(aA){function lU(aH,ay){var F=new IPCC.Web.UI.MarkEventArgs();F.pageIndex=aA.cA;F.mark=ay.mark;F.zIndex=ay.zIndex;F.clientX=ay.clientX;F.clientY=ay.clientY;V.aP('markAdded',F);};aA.aY.add_markAdded(lU);};function Zt(aA){var TS,sJ=false,Xq,WG;function If(T,ek){if(tM===false){return;}var hX=xw();amm(T,ek,hX);kq(dP,true,hX);};function aDZ(T,ek){Xq=T;WG=ek;if(sJ&& !TS){TS=GS(function(){sJ=false;TS=undefined;if(Xq&&WG){If(Xq,WG);}else{If(T,ek);}});}};function np(aH,ay){if(ay.mark.wq===true){return;}var F=new IPCC.Web.UI.MarkEventArgs();F.pageIndex=aA.cA;F.mark=ay.mark;F.zIndex=ay.zIndex;F.propertyName=ay.propertyName;V.aP('markChanged',F);var ek=dP[ay.mark.get_markID()];if(ek&&(ay.propertyName==='rectangle'||ay.propertyName==='points'||ay.propertyName==='startPoint'||ay.propertyName==='endPoint')){sJ=true;aDZ(ay.mark,ek);}else if(ek&&ay.propertyName==='visible'){var azi=ay.mark.get_visible();var Ww=(function(cD){return IPCC.J.inArray(Mi(),cD.bb-1);})(ek);if(azi&&Ww){WQ([ek]);kq(dP,true,xw());}else{Lm([ek]);}}};aA.aY.add_markChanged(np);};function aqk(aA){function acK(aH,ay){var F=new IPCC.Web.UI.MarkEventArgs();F.pageIndex=aA.cA;F.mark=ay.mark;F.zIndex=ay.zIndex;F.oldZIndex=ay.oldZIndex;V.aP('markReordered',F);};aA.aY.add_markReordered(acK);};function aqG(aA){function DO(aH,ay){if(ay.mark.wq===true){return;}var F=new IPCC.Web.UI.MarkEventArgs();F.pageIndex=aA.cA;F.mark=ay.mark;F.zIndex=ay.zIndex;V.aP('markSelectionChanged',F);};aA.aY.add_markSelectionChanged(DO);};function aqb(aA){function Dh(aH,ay){if(ay.mark){var F=new IPCC.Web.UI.MarkEventArgs();F.pageIndex=aA.cA;F.mark=ay.mark;F.zIndex=ay.zIndex;V.aP('markRemoved',F);var ek=dP[ay.mark.get_markID()];if(ek){if(ay.mark.get_conversation()===io){io=null;}ek.cE.parentElement.removeChild(ek.cE);delete dP[ay.mark.get_markID()];kq(dP,true);}}};aA.aY.add_markRemoved(Dh);};function aqe(aA){function AT(aH,ay){var F=new IPCC.Web.UI.MarkEventArgs();F.pageIndex=aA.cA;F.mark=ay.mark;F.zIndex=ay.zIndex;V.aP('markTextSelectionChanged',F);};aA.aY.add_markTextSelectionChanged(AT);};function amm(T,ek,MX){var aA=bM[ek.bb-1],aN=document.getElementById(aA.bF),EA=ZZ(T,aA.cA+1);if(aN&&aN.bH){var dw=aN.bH.transformPagePointToWindow(new IPCC.Web.UI.Point(EA.x,EA.y),true);var pP=(eK*aA.cA);var Il=(aN.offsetTop-pP+dw.y)/(MX-(eK*bM.length));ek.ax=EA;ek.TO=Il;}};function Lm(hM,bb){var axy=typeof bb==='undefined';IPCC.J.forEach(hM,function(au){if(au&&(axy||au.pageNumber===bb)){au.cE.style.display='none';au.yN=false;}});};function vj(){if(kO.currentStyle&&kO.currentStyle.display==='none'){return 0;}return kO.clientWidth;};function xw(){if(kO.currentStyle&&kO.currentStyle.display==='none'){return 0;}return kO.offsetHeight;};function WQ(hM,bb){var aoD=typeof bb==='undefined';IPCC.J.forEach(hM,function(el){if(aoD||el.pageNumber===bb){el.cE.style.display='';el.yN=true;if(el&&el.C&&el.C.get_visible()===false){el.cE.style.display='none';el.yN=false;}}});};function ye(hM,aae){if(tM===false){return;}var MT=(! !aae)?IPCC.J.filter(dP,function(cD){return IPCC.J.contains(Mi(),cD.bb-1);}):hM;var hX=xw();IPCC.J.forEach(MT,function(el){amm(el.C,el,hX);});};function awS(a,b){return(a.ax.y!==b.ax.y)?(a.ax.y-b.ax.y):(a.ax.x!==b.ax.x)?(a.ax.x-b.ax.x):(a.xN-b.xN);};function avT(a,b){return(a.ax.x!==b.ax.x)?(a.ax.x-b.ax.x):(a.ax.y!==b.ax.y)?(b.ax.y-a.ax.y):(a.xN-b.xN);};function awI(a,b){return(a.ax.y!==b.ax.y)?(b.ax.y-a.ax.y):(a.ax.x!==b.ax.x)?(b.ax.x-a.ax.x):(a.xN-b.xN);};function awf(a,b){return(a.ax.x!==b.ax.x)?(b.ax.x-a.ax.x):(a.ax.y!==b.ax.y)?(a.ax.y-b.ax.y):(a.xN-b.xN);};function aEn(Ur,hX,Bg){Bg=Bg||0;var _top,amu,IK,QY=(eK*bM.length),VE=hX-QY;IPCC.J.forEach(Ur,function(cD){IK=(eK*(cD.bb-1));amu=(cD.TO*VE)+IK;_top=Math.max(Bg+5,amu);if(cD.cE.style.top!==_top+'px'){cD.cE.style.top=_top+'px';}Bg=_top+cD.XI;});};function aEE(Ur,hX){var Ln,_top,Me,IK,afM,QY=(eK*bM.length),VE=hX-QY;IPCC.J.forEach(Ur,function(cD){IK=(eK*(cD.bb-1));Me=(cD.TO*VE)+IK;if(Ln===undefined){Ln=Me;}if(cD.C.get_conversation()===io){_top=Me;afM=_top+cD.XI;}else{_top=Math.min(Ln-5-cD.XI,Me);}if(cD.cE.style.top!==_top+'px'){cD.cE.style.top=_top+'px';}Ln=_top;});return afM;};function kq(hM,aae,hX){if(tM===false){return;}if(!hX){hX=xw();}var atf=function(a,b){if(a.bb!==b.bb){return(a.bb-b.bb);}var aN=bM[a.bb-1],gU=aN.gz;switch(gU){case 90:return avT(a,b);case 180:return awI(a,b);case 270:return awf(a,b);default:return awS(a,b);}};var MT=(! !aae)?IPCC.J.filter(dP,function(cD){return IPCC.J.inArray(Mi(),cD.bb-1);}):hM;WQ(MT);var aox=IPCC.J.map(MT,function(cD,bD){cD.XI=cD.cE.offsetHeight;return cD;});var WZ=aox.sort(atf);var MO=[],Zb=[],ZD=false;if(io){var aCJ=dP[io.get_mark().get_markID()];if(!IPCC.J.inArray(WZ,aCJ)){ZD=true;}IPCC.J.forEach(WZ,function(cD){if(ZD){Zb.push(cD);}else if(cD.C.get_conversation()===io){MO.unshift(cD);ZD=true;}else{MO.unshift(cD);}});}else{Zb=WZ;}var Bg=0;if(MO.length){Bg=aEE(MO,hX);}aEn(Zb,hX,Bg);};function aun(hM,T,cA){var cD=hM[T.kL()];cD.bb=cA;cD.C=T;cD.ax=ZZ(T,cA);cD.xN=T.en().nH(T);};function Dn(T,hM,jJ){var ek=hM[T.get_markID()];if(ek){ek.cE.parentElement.replaceChild(jJ,ek.cE);ek.cE=jJ;}return ek;};function aqX(T,hM,jJ,aFt,aGp,Il,cA){var ek=new auP();ek.cE=jJ;dP[T.get_markID()]=ek;aun(dP,T,cA);ek.TO=Il;aFt.appendChild(jJ);return ek;};function ZZ(T,bb){var ax=(T.get_boundingRectangle)?T.get_boundingRectangle():{},gU=bM[bb-1].gz;switch(gU){case 90:return{x:ax.x,y:ax.y+(ax.height||0)};case 180:return{x:ax.x+(ax.width||0),y:ax.y+(ax.height||0)};case 270:return{x:ax.x+(ax.width||0),y:ax.y};default:return{x:ax.x,y:ax.y};}};function apR(aA){function Rm(aH,ay){var F=new IPCC.Web.UI.CommentEventArgs();F.pageIndex=aA.cA;F.mark=ay.mark;F.index=ay.index;F.comment=ay.comment;var aN=document.getElementById(aA.bF);V.aP('commentAdding',F);setTimeout(function(){var MX=xw(),ek,cE;if(ay.index===0){cE=na(ay.mark,{isSelected:false},null);if(!cE){return;}else if(!IPCC.J.uj(cE)){throw new Error(cE+' is not a valid HTMLElement');}var EA=ZZ(ay.mark,aA.cA+1),aGh=EA.x,aFe=EA.y;var dw;if(aN&&aN.bH){dw=aN.bH.transformPagePointToWindow(new IPCC.Web.UI.Point(aGh,aFe),true);}else{dw=new IPCC.Web.UI.Point(0,0);}var pP=(eK*(aA.cA));var Il=(alH(aA.cA)-pP+dw.y)/(MX-(eK*bM.length));ek=aqX(ay.mark,dP,cE,kO,dw,Il,aA.cA+1);}else{var JX=ay.mark.get_conversation()===io;var currentConversationDiv=dP[ay.mark.get_markID()];if(!currentConversationDiv){return;}cE=na(ay.mark,{isSelected:JX},currentConversationDiv.cE);if(!cE){return;}else if(!IPCC.J.uj(cE)){throw new Error(cE+' is not a valid HTMLElement');}ek=Dn(ay.mark,dP,cE);}if(IPCC.J.contains(Mi(),aA.cA)){kq(dP,true,MX);}else{Lm([ek]);}V.aP('commentAdded',F);},0);};aA.aY.add_commentAdded(Rm);};function aqV(aA){function Rh(aH,ay){var cE=null;if(dP[ay.mark.get_markID()]){cE=dP[ay.mark.get_markID()].cE;var JX=ay.mark.get_conversation()===io;cE=na(ay.mark,{isSelected:JX},cE);}if(!cE){V.aP('commentChanged',ay);return;}else if(!IPCC.J.uj(cE)){throw new Error(cE+' is not a valid HTMLElement');}if(cE){var hX=xw();Dn(ay.mark,dP,cE);kq(dP,true,hX);}V.aP('commentChanged',ay);};aA.aY.add_commentChanged(Rh);};function aqt(aA){function Rn(aH,ay){var cE=null;if(dP[ay.mark.get_markID()]){cE=dP[ay.mark.get_markID()].cE;}var JX=ay.mark.get_conversation()===io;cE=na(ay.mark,{isSelected:JX},cE);if(IPCC.J.uj(cE)){Dn(ay.mark,dP,cE);}else{var ek=dP[ay.mark.get_markID()];if(ek){if(ay.mark.get_conversation()===io){io=null;}ek.cE.parentElement.removeChild(ek.cE);delete dP[ay.mark.get_markID()];}}kq(dP,true);V.aP('commentRemoved',ay);};aA.aY.add_commentRemoved(Rn);};function VM(){var aM=hK;var ap=ht;var asZ=function(iH){return{width:iH.width||(iH.right-iH.left),height:iH.height||(iH.bottom-iH.top),top:iH.top,bottom:iH.bottom,left:iH.left,right:iH.right};};var agP=asZ(aW.getBoundingClientRect());var mC={height:agP.height/2};mC.width=mC.height*ap/aM;if(mC.width>ap/2){mC.width=ap/2;}if(mC.height>aM/2){mC.height=aM/2;}var Zg=8;var alE={height:aM*Zg,width:ap*Zg};var avN=ap*cR<mC.width+5;var avp=ap*cR>alE.width-5;return{min:mC,max:alE,page:{width:ap,height:aM},viewport:agP,atMin:avN,atMax:avp,maxFactor:Zg,minFactor:mC.width/ap};};function jN(ae,aaY){if(aaY){adU.apply(this,arguments);return;}var vz=(ae<cR)?true:false;var og=VM();if((og.atMin&&vz)||(og.atMax&& !vz)){return;}if(ae>og.maxFactor){ae=og.maxFactor;}else if(ae<og.minFactor){ae=og.minFactor;}if(!og.atMax|| !og.atMin){adU.apply(this,arguments);}};function adU(ae,aHJ,bm,cu,Bo,sm,fd,fp){if(isNaN(ae)||ae<=0||Math.abs(ae)===Infinity){return;}var Tc=cZ;var cc=jD();var vz=(ae<cR)?true:false;var fT=0;var gH=bM.length-1;if(ce===IPCC.ViewMode.SinglePage){if(cZ-uq>=0){fT=cZ-uq;}if(cZ+uq<bM.length-1){gH=cZ+uq;}}var Mb=ae/cR;cR=ae;var Di=aW.getBoundingClientRect();var akJ=(sm&&sm.x!==undefined)?sm.x:aW.scrollLeft+(Di.width/2);var ahf=(sm&&sm.y!==undefined)?sm.y:aW.scrollTop+(Di.height/2);var ayq=sm&&sm.x!==undefined&&sm.y!==undefined;gn=0;fU=0;for(var aU=fT;aU<=gH;aU++){var bI;var al=document.getElementById(bM[aU].bF);if(al){bI=al.bH;}else{continue;}if(aU===Tc){var Nj=al.getBoundingClientRect();if(!ayq){if(eO===IPCC.PageLayout.HorizontalScrollDirection&&Di.height>Nj.height){ahf-=((Di.height-Nj.height)/2);}else if(eO===IPCC.PageLayout.VerticalScrollDirection&&Di.width>Nj.width){akJ-=((Di.width-Nj.width)/2);}}}var gi=ae*cW/bM[aU].ho;var bO=ht;var bo=hK;var ey=ht;var fC=hK;if(jg(pB)===true){ey=hK;fC=ht;}if(bM[aU].lv()>0){if(jg(bM[aU].gz)===true){bO=bM[aU].qy();bo=bM[aU].lv();}else{bO=bM[aU].lv();bo=bM[aU].qy();}}else{gi=ae*cW/bM[0].ho;if(jg(bM[aU].gz)===true){var Im=bO;bO=bo;bo=Im;gi=ae*cW/bM[0].hx;}}var Ga,Gx,hm;if(ce===IPCC.ViewMode.SinglePage){Gx=bO*gi;Ga=bo*gi;al.style.width=Gx+'px';al.style.height=Ga+'px';if(aU===cZ){bU.style.width=Gx+'px';bU.style.height=Ga+'px';}if(bI&&bM[aU].hJ===true&&bI.fK()===true){bI.zoom(gi);}}else if(ce===IPCC.ViewMode.Document){Gx=bO*gi;Ga=bo*gi;al.style.width=Gx+'px';al.style.height=Ga+'px';if(bI&&bM[aU].hJ===true&&bI.fK()===true){bI.zoom(gi);}if(bO*gi>gn){gn=bO*gi;}if(bo*gi>fU){fU=bo*gi;}}else{gi=ae*cW/bM[0].ho;if(eO===IPCC.PageLayout.VerticalScrollDirection){hm=ey/bO*gi;al.style.width=ey*gi+'px';al.style.height=bo*hm+'px';if(ey*gi>gn){gn=ey*gi;}if(bo*gi>fU){fU=bo*gi;}}else{hm=fC/bo*gi;al.style.height=fC*gi+'px';al.style.width=bO*hm+'px';if(bO*gi>gn){gn=bO*gi;}if(fC*gi>fU){fU=fC*gi;}}if(bI&&bM[aU].hJ===true&&bI.fK()===true){bI.zoom(hm);}}if(bI&&bM[aU].hJ===true&&bI.fK()===true){bI.display();if(IPCC.J.tG.Ai){var avi=aW.style.display;aW.style.display='none';aW.style.display=avi;ath();}}}if(eO===IPCC.PageLayout.VerticalScrollDirection){KS=aW.scrollTop;}else{KS=aW.scrollLeft;}var Ro,Pf,Lh=0,LX=0;if(Bo){Ro=Bo.offsetLeft+Mb*bm;Pf=Bo.offsetTop+Mb*cu;aW.scrollLeft=Ro-(aW.clientWidth/2)+Lh;aW.scrollTop=Pf-(aW.clientHeight/2)+LX;aDB(cc);}else{if(eO===IPCC.PageLayout.VerticalScrollDirection){LX=eK*(Tc+1);}else{Lh=fX+((ha+fX)*(Tc+1));}Ro=Mb*(akJ-Lh);Pf=Mb*(ahf-LX);abM(cc);aW.scrollLeft=Ro-(aW.clientWidth/2)+Lh;aW.scrollTop=Pf-(aW.clientHeight/2)+LX;}if(ce!==IPCC.ViewMode.SinglePage&&(fd===IPCC.ScaleTrigger.Pinch||vz===true)){oK();}kq(dP,true);V.aP('scaleChanged',{scaleType:(vz)?"scaledDown":"scaledUp",scaleTrigger:fd,fitType:fp,scaleFactor:cR});};function ath(){var dummy=document.createElement('div');setTimeout(function(){aW.appendChild(dummy);aW.removeChild(dummy);},0);};function aha(aq,et,fk,fq){var hc=aq.igElements;fq=fq||Zn(aq);if(fq&&(fq.right-fq.left)>0&&(fq.bottom-fq.top)>0){return new IPCC.Web.UI.Point(et+fq.left+hc.oQ.scrollLeft,fk+fq.top+hc.oQ.scrollTop);}else{return;}};function Zn(aq){var hc=aq.igElements;var fq=null;if(!aq|| !hc|| !hc.mo){return null;}if(hc.mo.getBoundingClientRect){try{fq=hc.mo.getBoundingClientRect();}catch(bw){return;}}else{var fr=hc.mo;var wc=document.documentElement;fq={left:wc.clientLeft-wc.scrollLeft,top:wc.clientTop-wc.scrollTop};fr=fr.offsetParent;while(fr){fq.top+=fr.offsetTop-fr.scrollTop;fq.left+=fr.offsetLeft-fr.scrollLeft;fr=fr.offsetParent;}}return fq;};function afj(){var dA=V.oe();var Qg=dA.id;var wu;var wV;var mK;var Va;var Uk;var bJ=false;var aq;var ou=[];var vK= -1;var fP=0;var pg;var Be;var xV;var oq={x:0,y:0};var kM=0;var cj=0;var sk=null;var tJ=null;if(bU===''){aW=gc({width:'100%',height:'100%',position:'relative',margin:'0px',overflow:'auto',textAlign:'center'});aW.className='pccPageListContainerWrapper';aW.tabIndex=2;var Sp=function(et,fk){return IPCC.J.getPageFromPoint(et,fk,aW)||false;};var Wc=function(aq,et,fk){var hc=aq.igElements;var fq=Zn(aq);if(fq&&(fq.right-fq.left)>0&&(fq.bottom-fq.top)>0){return new IPCC.Web.UI.Point(et-fq.left-hc.oQ.scrollLeft,fk-fq.top-hc.oQ.scrollTop);}else{return;}};var aoK=function(nU){nU.JM([new IPCC.ln(IPCC.Web.UI.MarkType.Text)]);};var anN=function(nU){nU.set_mouseTool(IPCC.Web.UI.MouseTool.None);};var Og=false,aua="";var ajY=function aGq(bw,jE,aN){if(jE.match(/edit/)){Og=true;return;}aoK(aN.bH);Og=true;aua=jE;aN.bH.GD("touchstart",bw);};var akF=function(aN){Og=false;anN(aN.bH);};var SH=function(bw){if(bw.target&&bw.target.attributes&&bw.target.getAttribute('data-pcc-mark')){return bw.target;}else if(bw.target.parentElement&&bw.target.parentElement.attributes&&bw.target.parentElement.getAttribute('data-pcc-mark')){return bw.target.parentElement;}else if(bw.target.parentNode&&bw.target.parentNode.attributes&&bw.target.parentNode.getAttribute('data-pcc-mark')){return bw.target.parentNode;}else{return undefined;}};var UZ=function(bw){var cB=SH(bw);if(cB){return cB.getAttribute('data-pcc-mark');}return undefined;};var akO=function(nU){if(nU&&nU.en()){nU.en().Cu(function(C){C.set_selected(false);});nU.display();}};var OO,Yd=false;var Qy=function(bw,F){var mG={cq:undefined,C:undefined,aO:null};var lh=SH(bw);if(lh){if(typeof aq!=='undefined'&&aq!==false&&aq.bH&&aq.igElements&&aq.bH.fK()===true){mG.aO=aq.bH.nJ();}if(lh.ImGearMarkRelation){mG.cq='mark';mG.C=lh.ImGearMarkRelation.C;mG.Uw=mG.C.get_selected();return mG;}else{while(!(lh.ImGearMarkRelation)&&lh.parentNode&&lh!==document.body){lh=lh.parentNode;if(lh.ImGearMarkRelation){mG.cq='mark';mG.C=lh.ImGearMarkRelation.C;mG.Uw=mG.C.get_selected();return mG;}}}}if(typeof aq!=='undefined'&&aq!==false&&aq.bH&&aq.igElements&&aq.bH.fK()===true){mG.aO=aq.bH.nJ();var aO=0;for(aO=0;aO<bM.length;aO++){if(bM[aO].bF===aq.id){if(typeof F.targetType==='undefined'||F.targetType===null){mG.cq='page';return mG;}break;}}}return mG;};var Lp=function(aO,sc,ju,aBf){if(aE===null||aE===undefined){return;}var abv=false;if(sc===undefined){sc=aE.sc;abv=true;}if(ju===undefined){ju=aE.ju;abv=true;}var C;var aN=document.getElementById(bM[aO].bF);if(aBf===true){C=aE.wY;}else{C=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.HighlightText);C.set_rectangle({x:0,y:0,width:0,height:0});C.dg=127;C.cP='#3366CC';C.ab=null;aN.bH.lX().addMark(C);}C.set_selected(true);if(abv===true){if(aE.fT===aE.gH){C.bf=fP;C.da=ju-fP+1;C.kJ=true;C.kB=true;aN.bH.display();}else if(aO===aE.fT){C.bf=fP;C.da=aN.bH.dr().gs().ej()-1-sc;C.kJ=true;C.kB=false;aN.bH.display();}else if(aO===aE.gH){C.bf=0;C.da=ju+1;C.kJ=false;C.kB=true;aN.bH.display();}else{C.bf=0;C.da=aN.bH.dr().gs().ej()-1-fP;C.kJ=false;C.kB=false;}}else{if(aE.fT===aE.gH){C.kJ=true;C.kB=true;}else if(aO===aE.fT){C.kJ=true;C.kB=false;}else if(aO===aE.gH){C.kJ=false;C.kB=true;}else{C.kJ=false;C.kB=false;}}aE.fe[aO]=C;};var aiR=function(cB,bm,cu,Sk){if(cB){var MP=cB.getBoundingClientRect();bm=IPCC.J.OB(bm,MP.left+Sk);bm=IPCC.J.LK(bm,MP.right-Sk);cu=IPCC.J.OB(cu,MP.top+Sk);cu=IPCC.J.LK(cu,MP.bottom-Sk);}return{x:bm,y:cu};};var lg=function(bw){if(xV){if(xV.clientX===bw.clientX&&xV.clientY===bw.clientY){if(bw.rawEvent.preventDefault){bw.rawEvent.preventDefault();}else if(bw.preventDefault){bw.preventDefault();}if(bw.rawEvent.stopPropagation){bw.rawEvent.stopPropagation();}else if(bw.stopPropagation){bw.stopPropagation();}Yd=true;xV=undefined;return false;}}OO=bw;aig(bw,bw.clientX,bw.clientY,bw.button);};var aiq=function(bw,F){mK=Qy(bw,F);};var aig=function(bw,et,fk,oO){var F=new IPCC.Web.UI.MouseEventArgs();aq=Sp(et,fk);aiq(bw,F);var jE;var lh=SH(bw);if(lh){jE=lh.getAttribute('data-pcc-mark');}var YS=false;var KT=jE&&jE.substring(0,10);if(jE&&KT==='texthandle'){Be=true;YS=true;KT=jE.substring(10,13);var C=lh.parentNode.ImGearMarkRelation.C;if(aE&&C.ab===null){ou=aE.rZ.slice();ou[F.pageIndex]=undefined;}else{aE=null;ou=[];V.va();}var aeX=function(aBG){fP=aE.sc;var L;for(L=aE.gH;L>=aE.fT;L--){var aN=document.getElementById(bM[L].bF);if(aN.bH===undefined||aN.bH===null){continue;}var yv=fP;if(L!==aE.fT){yv=0;}var qi;if(L===aE.gH){qi=aE.ju;}else{qi=aN.bH.get_textPage().gs().ej()-1;}aBG(aN,yv,qi);if(L!==aE.nY){Lp(L);}}sk=bK;bK=IPCC.Web.UI.MouseTool.SelectText;bJ=true;};var L,aO,aY,LZ,ez,rK,cO;if(KT==='sta'){if(aE===null||aE===undefined){aO=C.aO;aE={};aE.fe=[];aE.fT=aO;aE.sc=C.bf;fP=C.bf;while(aO<bM.length){aY=bM[aO].aY;LZ=aY.get_markCount();for(L=0;L<LZ;L++){ez=aY.getMark(L);if(C.aX===ez.aX&&ez.get_type()===C.get_type()){aE.fe[aO]=ez;for(rK=ez.ab.length-1;rK>=0;rK--){if(ez.ab[rK].set_visible){ez.ab[rK].set_visible(false);}else{ez.set_visible(false);break;}}if(aO===C.aO){tJ=ez;}else{ou[aO]=cO.substring(ez.bf,ez.da);ez.set_selected(false);}cO=ez.cO.substring(ez.da);if(ez.kB===true){aE.ju=ez.bf+ez.da-1;aE.gH=aO;break;}}}aO++;}}pg=aE.ju+1;kM=aE.gH;var aCb=function(aN,yv,qi){aN.bH.showEmptyTextSelection(qi+1);aN.bH.extendTextSelection(undefined);aN.bH.extendTextSelection(qi);aN.bH.extendTextSelection(yv);};aE.fe[aE.fT].wq=true;aE.nY=aE.fT;aE.wY=aE.fe[aE.fT];aeX(aCb);}else if(KT==='end'){if(aE===null||aE===undefined){aO=C.aO;aE={};aE.fe=[];aE.gH=aO;aE.ju=C.bf+C.da-1;while(aO>=0){aY=bM[aO].aY;LZ=aY.get_markCount();for(L=0;L<LZ;L++){ez=aY.getMark(L);if(C.aX===ez.aX&&ez.get_type()===C.get_type()){aE.fe[aO]=ez;for(rK=ez.ab.length-1;rK>=0;rK--){if(ez.ab[rK].set_visible){ez.ab[rK].set_visible(false);}else{ez.set_visible(false);break;}}if(aO===C.aO){cO=ez.cO;}else{ou[aO]=cO.substring(cO.length-ez.da);ez.set_selected(false);}cO=ez.cO.substring(0,cO.length-ez.da);if(ez.kJ===true){aE.sc=ez.bf;fP=ez.bf;aE.fT=aO;tJ=ez;break;}}}aO--;}}pg=aE.sc;kM=aE.fT;var aCD=function(aN,yv,qi){aN.bH.showEmptyTextSelection(yv);aN.bH.extendTextSelection(undefined);aN.bH.extendTextSelection(yv);aN.bH.extendTextSelection(qi);};aE.fe[aE.gH].wq=true;aE.nY=aE.gH;aE.wY=aE.fe[aE.gH];aeX(aCD);}if(tJ){aq.bH.display();}}var xU=bw.target.tagName&&bw.target.tagName.toLowerCase()==='textarea';if(xU){return;}var xJ=bw.target.tagName&&bw.target.tagName.toLowerCase()==='input'&&bw.target.type&&bw.target.type.toLowerCase()==='text';if(xJ){return;}if(bK===IPCC.Web.UI.MouseTool.HandPan&&zF&&jE&&YS===false){if(!mK||mK.C.get_interactionMode()!==IPCC.Web.UI.MarkInteractionMode.SelectionDisabled){ajY(bw,jE,aq);return;}}var bW;var fG;if(aq!==false&&aq.bH&&aq.igElements&&aq.bH.fK()===true){var aD=0;for(aD=0;aD<bM.length;aD++){if(bM[aD].bF===aq.id){F.pageIndex=aD;break;}}F.pointLiesWithinImage=true;fG=Wc(aq,et,fk);if(fG){bW=aq.bH.OM(fG,false);F.imagePoint=bW;F.constrainedImagePoint=bW;}else{F.pointLiesWithinImage=false;}}else{F.pointLiesWithinImage=false;}F.domEvent=bw;F.windowPoint=new IPCC.Web.UI.Point(et,fk);if(YS===true){vK= -1;cj=F.pageIndex;bw.preventDefault();V.aP('mouseDown',F);return;}switch(bK){case IPCC.Web.UI.MouseTool.None:bw.preventDefault();break;case IPCC.Web.UI.MouseTool.HandPan:bw.preventDefault();wu=fk;wV=et;Va=aW.scrollTop;Uk=aW.scrollLeft;bJ=true;V.yC(bU,'grabbing');if(aq&&aq.bH){V.yC(aq,'grabbing');aq.bH.set_cursor('grabbing');aq.bH.display();}break;case IPCC.Web.UI.MouseTool.SelectText:case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:bw.preventDefault();if(oO===0&&aq&&aq.bH&&bW){V.va();ou=[];vK= -1;Be=undefined;fP=undefined;pg=undefined;bJ=true;oq=F.windowPoint;}break;case IPCC.Web.UI.MouseTool.Magnifier:bw.preventDefault();if(oO===0&&aq&&aq.bH&&fG){var kV=IPCC.aa.ee(IPCC.aa.None);bU.style.cursor=kV;aq.bH.showMagnifier(fG);aq.bH.display();}bJ=true;break;case IPCC.Web.UI.MouseTool.RectangleZoom:bw.preventDefault();if(oO===0&&aq&&aq.bH&&bW){bJ=true;wu=fG.y;wV=fG.x;aq.bH.showEmptySelection(bW);aq.bH.display();}break;}V.aP('mouseDown',F);};var lA=function(bw){aiK(bw,bw.clientX,bw.clientY,bw.button);};var aiA=function(F,et,fk,ca){F.windowPoint=new IPCC.Web.UI.Point(et,fk);ca=Sp(et,fk);var bW,fG;if(ca!==false&&ca.bH&&ca.igElements&&ca.bH.fK()===true){F.pointLiesWithinImage=true;fG=Wc(ca,et,fk);if(fG){bW=ca.bH.OM(fG,false);F.imagePoint=bW;F.constrainedImagePoint=bW;}else{F.pointLiesWithinImage=false;}}else{F.pointLiesWithinImage=false;}return{F:F,et:et,fk:fk,ca:ca,bW:bW,fG:fG};};var aiK=function(bw,et,fk,oO){var xU=bw.target.tagName&&bw.target.tagName.toLowerCase()==='textarea';if(xU){return;}var xJ=bw.target.tagName&&bw.target.tagName.toLowerCase()==='input'&&bw.target.type&&bw.target.type.toLowerCase()==='text';if(xJ){return;}var F=new IPCC.Web.UI.MouseEventArgs();var bW,fG,ca;var HU=function(et,fk){var pf=aiA(F,et,fk,ca);F=pf.F;F.domEvent=bw;et=pf.et;fk=pf.fk;ca=pf.ca;bW=pf.bW;fG=pf.fG;};HU(et,fk);var lh=Qy(bw,F);if(lh&&lh.C){F.mark=lh.C;}var kV;switch(bK){case IPCC.Web.UI.MouseTool.None:bw.preventDefault();break;case IPCC.Web.UI.MouseTool.HandPan:bw.preventDefault();if(bJ){var arS=fk;var arN=et;var aFs=wu-arS;var aFa=wV-arN;aW.scrollTop=Va+aFs;aW.scrollLeft=Uk+aFa;}break;case IPCC.Web.UI.MouseTool.SelectText:case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:bw.preventDefault();if(bJ){if(oO!==0){xs();}var gG;if(!ca){V.aP('mouseMove',F);return;}if(fP===undefined){aq=ca;}else if(ca!==aq&&ca.bH&&fG){vK= -1;var iB=0;var L=0;for(L=0;L<bM.length;L++){if(bM[L].bF===ca.id){iB=L;break;}}if(iB>cj){if(iB>kM){gG=aq.bH.get_textPage().gs().ej()-1;if(gG<0){xs();V.aP('mouseMove',F);return;}aq.bH.extendTextSelection(gG);if(aE){gG=aq.bH.get_textPage().gs().ej()-1;aE.fe[cj].set_startIndex(aq.bH.Re());aE.fe[cj].set_textLength(aq.bH.AY());aE.gH=iB;fP=aq.bH.Re();}ou[cj]=aq.bH.getSelectedText();ca.bH.showEmptyTextSelection(0);ca.bH.extendTextSelection(undefined);vK=0;aq.bH.display();aq=ca;}else{fP=0;ou[cj]=undefined;ou[iB]=undefined;aq.bH.showEmptyTextSelection(0);aq.bH.extendTextSelection(undefined);if(aE&&aE.fe[cj]){aE.fe[cj].kJ=false;}aq.bH.display();aq=ca;if(aE&&aE.fe[cj]){aE.fe[cj]=undefined;aE.fT=iB;aE.fe[iB].set_startIndex(0);aE.fe[iB].set_textLength(aE.fe[iB].get_startIndex()+aE.fe[iB].get_textLength());aE.fe[iB].kJ=true;aq.bH.display();}}}else if(iB<cj){if(iB<kM){gG=aq.bH.get_currentTextIndex();if(gG!==0){aq.bH.extendTextSelection(0);}if(aE){aE.fe[cj].set_startIndex(aq.bH.Re());aE.fe[cj].set_textLength(aq.bH.AY());aE.fT=iB;}ou[cj]=aq.bH.getSelectedText();aq.bH.display();gG=ca.bH.dr().gs().ej()-1;vK=gG;fP=0;ca.bH.showEmptyTextSelection(gG+1);ca.bH.extendTextSelection(undefined);aq=ca;aq.bH.display();}else{ou[cj]=undefined;ou[iB]=undefined;aq.bH.showEmptyTextSelection(0);aq.bH.extendTextSelection(undefined);if(aE&&aE.fe[cj]){aE.fe[cj].kB=false;}aq.bH.display();aq=ca;if(aE&&aE.fe[cj]){aE.fe[cj]=undefined;aE.gH=iB;gG=aq.bH.dr().gs().ej()-1;aE.fe[iB].set_textLength(ca.bH.AY());aE.fe[iB].kB=true;aq.bH.display();}}}cj=iB;}var apy=(cj<kM),aqI=(cj>kM);if(aq&&aq.bH&&aq.bH.fK()===true&&fG){fG=Wc(aq,et,fk);bW=aq.bH.OM(fG,false);var dH=aq.bH.transformPagePointToTextIndex(bW);if(fP===undefined){if(dH===undefined){V.aP('mouseMove',F);return;}var Uq=function(aN,wo){var BA=aN.bH.dr();var gP=BA.gs();var eU=gP.kI(wo);return eU.rR();};var ss=Uq(aq,dH);var ajb=aq.bH.transformPagePointToWindow(new IPCC.Web.UI.Point(ss.x,ss.y),true);var aih=aq.bH.transformPagePointToWindow(new IPCC.Web.UI.Point(ss.x+ss.width,ss.y+ss.height),true);var ahL=aih.x-ajb.x;var axC=(fG.x>ajb.x+(ahL*0.3)&&fG.x<aih.x-(ahL*0.3));if(axC){fP=dH;pg=dH;aq.bH.showEmptyTextSelection(dH);aq.bH.extendTextSelection(undefined);aq.bH.extendTextSelection(dH);aq.bH.display();var bj=0;for(bj=0;bj<bM.length;bj++){if(bM[bj].bF===aq.id){kM=bj;cj=bj;break;}}}else{V.aP('mouseMove',F);return;}}else{if(fP=== +fP&&dH=== +dH){if(apy){fP=dH;}else if(!aqI){fP=Math.min(pg,dH);}}}gG=aq.bH.get_currentTextIndex();if(gG===dH||dH===undefined){V.aP('mouseMove',F);return;}if(vK!== -1){if(dH!==vK){aq.bH.extendTextSelection(vK);}vK= -1;}if((dH>pg&&cj===kM)||cj>kM){if(aE){if(aE.fe[cj]===undefined||aE.fe[cj]===null){Lp(cj,0,0,cj===aE.nY);if(cj-1>=0&&aE.fe[cj-1]){aE.fe[cj-1].kB=false;document.getElementById(bM[cj-1].bF).bH.display();}}aE.fe[cj].kB=true;}if(Be===undefined){Be=false;}}else if(dH<pg||cj<kM){if(aE){if(aE.fe[cj]===undefined||aE.fe[cj]===null){Lp(cj,aq.bH.dr().gs().ej()-1,0,cj===aE.nY);if(aE.fe[cj+1]){aE.fe[cj+1].kJ=false;document.getElementById(bM[cj+1].bF).bH.display();}}aE.fe[cj].kJ=true;}if(Be===undefined){Be=true;pg++;aq.bH.showEmptyTextSelection(pg);aq.bH.extendTextSelection(undefined);var qi=aq.bH.dr().gs().ej();if(pg>=qi){aq.bH.extendTextSelection(qi-1);}else{aq.bH.extendTextSelection(pg);}}}aq.bH.extendTextSelection(dH);if(aE&&aE.fe[cj]){aE.fe[cj].set_startIndex(aq.bH.Re());aE.fe[cj].set_textLength(aq.bH.AY());}aq.bH.display();}}break;case IPCC.Web.UI.MouseTool.Magnifier:bw.preventDefault();if(bJ){if(oO!==0||(aq&&aq.bH&&aq!==ca)){aq.bH.hideMagnifier();kV=IPCC.aa.ee(IPCC.aa.Magnifier);bU.style.cursor=kV;aq.bH.display();}if(ca&&ca.bH&&fG){aq=ca;kV=IPCC.aa.ee(IPCC.aa.None);bU.style.cursor=kV;ca.bH.showMagnifier(fG);ca.bH.display();}}break;case IPCC.Web.UI.MouseTool.RectangleZoom:bw.preventDefault();if(bJ){var Kj=aiR(aq,et,fk,1);HU(Kj.x,Kj.y);if(ca&&ca.bH&&bW&&ca===aq){if(oO!==0){ca.bH.hideSelection();ca.bH.display();bJ=false;}else{ca.bH.extendSelection(bW);ca.bH.display();}}}break;}V.aP('mouseMove',F);};var jW=function(bw){if(Yd!==true){VV(bw,bw.clientX,bw.clientY);}else{Yd=false;}};var ait=function(bw,F){F.upTargetType=null;var CF=Qy(bw,F);F.originalEvent=bw.rawEvent;F.clientX=bw.clientX;F.clientY=bw.clientY;F.downTarget={type:undefined,pageIndex:undefined};if(typeof mK!=='undefined'&&typeof mK.cq!=='undefined'){F.downTarget.type=mK.cq;}if(typeof mK!=='undefined'&&typeof mK.aO!=='undefined'){F.downTarget.pageIndex=mK.aO;}if(typeof mK!=='undefined'&&typeof mK.Uw!=='undefined'){F.downTarget.alreadySelected=mK.Uw;}F.downMark=(typeof mK!=='undefined')?mK.C:undefined;F.upMark=CF.C;switch(CF.cq){case 'page':case 'mark':F.upTarget={type:CF.cq,pageIndex:CF.aO};break;}if(F.pointLiesWithinImage===false&&CF.cq==='page'){CF.aO= -1;}};var VV=function(bw,et,fk){var F=new IPCC.Web.UI.MouseEventArgs();var ca;var bW;var fG;var HU=function(et,fk){var pf=aiA(F,et,fk,ca);F=pf.F;F.domEvent=bw;et=pf.et;fk=pf.fk;ca=pf.ca;bW=pf.bW;fG=pf.fG;};HU(et,fk);if(bw){ait(bw,F);V.aP('mouseUp',F);}mK=undefined;var kV;switch(bK){case IPCC.Web.UI.MouseTool.None:bw.preventDefault();break;case IPCC.Web.UI.MouseTool.HandPan:bw.preventDefault();if(bJ){wV=undefined;wu=undefined;Va=undefined;Uk=undefined;bJ=false;kV='move';V.yC(bU,'grab');if(aq&&aq.bH){V.yC(aq,'grab');aq.bH.set_cursor('grab');aq.bH.display();}}break;case IPCC.Web.UI.MouseTool.SelectText:case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:if(bw){bw.preventDefault();}var xD=F.windowPoint.x-oq.x;var yD=F.windowPoint.y-oq.y;if(xD===0&&yD===0){xs();}if(bJ){var qV=new IPCC.Web.UI.TextSelectedEventArgs(),ki=[],L,yk,CO;var ju;var Jz=aq.bH.getSelectedText();var rZ=ou.slice();if(Jz.length>0){rZ[cj]=aq.bH.getSelectedText();}else{if(cj>kM){cj--;aq=document.getElementById(bM[cj].bF);if(rZ[cj]){Jz=rZ[cj];}}else if(cj<kM){cj++;aq=document.getElementById(bM[cj].bF);if(rZ[cj]){Jz=rZ[cj];}}}qV.text=rZ.join('');var SF=true;if(cj>=kM){if(cj===kM){if(aq.bH.get_currentTextIndex()>=pg){SF=false;}ju=fP+Jz.length-1;}else{ju=Jz.length-1;}if(ju<0){ju=0;}yk=kM;CO=cj;}else{SF=false;ju=pg-1;yk=cj;CO=kM;}for(L=yk;L<=CO;L++){ki.push(L);}if(qV.text.length===0){xs();ki=[];}qV.pageNumbers=ki;qV.clientX=et;qV.clientY=fk;if(fP!==undefined){if(bK===IPCC.Web.UI.MouseTool.SelectText){var Uq=function(aN,wo){var BA=aN.bH.dr();var gP=BA.gs();var eU=gP.kI(wo);return eU.rR();};var gG=aq.bH.get_currentTextIndex();var ss=Uq(aq,gG);var eL=0,fI=0;if(SF===false){eL=ss.width;fI=ss.height;}var BZ=aq.bH.transformPagePointToWindow(new IPCC.Web.UI.Point(ss.x+eL,ss.y+fI),true);var dw=aha(aq,BZ.x,BZ.y);qV.handleClientX=dw.x;qV.handleClientY=dw.y;}var aAD=aE===undefined||aE===null;if(tJ){qV.previousFirstMark=tJ;qV.firstMark=aE.fe[yk];if(aE.nY<yk||aE.nY>CO){var Ff=document.getElementById(bM[aE.nY].bF);if(Ff.bH){Ff.bH.lX().removeMark(aE.wY);}}aE.wY.wq=false;V.va();if(sk!==null){bK=sk;}sk=null;}else if(aAD===true){if(bK===IPCC.Web.UI.MouseTool.SelectText){aE={fT:yk,sc:fP,gH:CO,ju:ju,rZ:rZ.slice(),fe:[]};for(L=0;L<ki.length;L++){Lp(ki[L]);}}else{V.va();}}else{if(aE.nY<yk||aE.nY>CO){var ahv=document.getElementById(bM[aE.nY].bF);if(ahv.bH){ahv.bH.lX().removeMark(aE.wY);}}aE.wY.wq=false;aE.fT=yk;aE.sc=fP;aE.gH=CO;aE.ju=ju;aE.rZ=rZ.slice();if(sk!==null){bK=sk;}sk=null;}qV.mouseTool=bK;qV.startIndex=fP;V.aP('selectTextMouseToolCompleted',qV);if(tJ){tJ=null;aE=null;}}bJ=false;}break;case IPCC.Web.UI.MouseTool.Magnifier:bw.preventDefault();if(ca&&ca.bH){ca.bH.hideMagnifier();kV=IPCC.aa.ee(IPCC.aa.Magnifier);bU.style.cursor=kV;ca.bH.display();}bJ=false;break;case IPCC.Web.UI.MouseTool.RectangleZoom:bw.preventDefault();var Kj=aiR(aq,et,fk,1);HU(Kj.x,Kj.y);if(bJ&&fG){var Gc=0;var Ey=0;var WV=0;var WI=0;if(fG.x<wV){Gc=wV-fG.x;WV=fG.x+Gc/2;}else{Gc=fG.x-wV;WV=wV+Gc/2;}if(fG.y<wu){Ey=wu-fG.y;WI=fG.y+Ey/2;}else{Ey=fG.y-wu;WI=wu+Ey/2;}var ahI=aW.clientWidth/Gc;var ahD=aW.clientHeight/Ey;var nD=ahI;if(ahI>ahD){nD=ahD;}if(ca&&ca.bH){ca.bH.oi();ca.bH.display();}bJ=false;if(Gc*2+Ey*2>25){V.aqw(nD,WV,WI,ca);}}break;}var xU=false;var xJ=false;if(bw){xU=bw.target.tagName&&bw.target.tagName.toLowerCase()==='textarea';xJ=bw.target.tagName&&bw.target.tagName.toLowerCase()==='input'&&bw.target.type&&bw.target.type.toLowerCase()==='text';}if(Og&& !xU&& !xJ){akF(aq);}else if(bK===IPCC.Web.UI.MouseTool.HandPan&&OO&& !xU&& !xJ&&bw&&OO.clientX===bw.clientX&&OO.clientY===bw.clientY&&bw.shiftKey!==true&&bw.ctrlKey!==true){akO(aq.bH);}};var ayG=function(){var kV;switch(bK){case IPCC.Web.UI.MouseTool.None:break;case IPCC.Web.UI.MouseTool.HandPan:V.yC(bU,'grab');bJ=false;break;case IPCC.Web.UI.MouseTool.SelectText:xs();break;case IPCC.Web.UI.MouseTool.Magnifier:if(aq&&aq.bH){aq.bH.hideMagnifier();kV=IPCC.aa.ee(IPCC.aa.Magnifier);bU.style.cursor=kV;aq.bH.display();}bJ=false;break;case IPCC.Web.UI.MouseTool.RectangleZoom:if(aq&&aq.bH){aq.bH.hideSelection();aq.bH.display();bJ=false;}break;}};var awm=function(){ayG();};var avE=function(){if(bK===IPCC.Web.UI.MouseTool.Magnifier){if(aq&&aq.bH){aq.bH.hideMagnifier();var kV=IPCC.aa.ee(IPCC.aa.Magnifier);bU.style.cursor=kV;aq.bH.display();}bJ=false;}else if(bK===IPCC.Web.UI.MouseTool.RectangleZoom){if(aq&&aq.bH){aq.bH.hideSelection();aq.bH.display();bJ=false;}}else if(bK===IPCC.Web.UI.MouseTool.SelectText){xs();}};var lO=function(bw){if(bw.ctrlKey){switch(bK){case IPCC.Web.UI.MouseTool.None:break;case IPCC.Web.UI.MouseTool.SelectText:break;default:break;case IPCC.Web.UI.MouseTool.HandPan:var Qo=bw.rawEvent.wheelDelta;bw.preventDefault();if(Qo<0){V.zoomOut(1.5);}else{V.zoomIn(1.5);}break;}}else{bw.preventDefault();aW.scrollTop-=bw.rawEvent.wheelDelta*0.72;}if(bK===IPCC.Web.UI.MouseTool.Magnifier){if(aq&&aq.bH){aq.bH.hideMagnifier();var kV=IPCC.aa.ee(IPCC.aa.Magnifier);bU.style.cursor=kV;aq.bH.display();}bJ=false;}else if(bK===IPCC.Web.UI.MouseTool.RectangleZoom){if(aq&&aq.bH){aq.bH.hideSelection();aq.bH.display();bJ=false;}}else if(bK===IPCC.Web.UI.MouseTool.SelectText){xs();}};var axG=function(ar){var F=new IPCC.Web.UI.MouseEventArgs();F.upTarget={type:'comments',element:ar.target};F.downTarget={type:'comments',element:ar.target};F.originalEvent=ar.rawEvent;F.clientX=ar.clientX;F.clientY=ar.clientY;F.pageIndex=undefined;V.aP('mouseUp',F);};var xs=function(){if(bJ===true){if(aE&&aE.nY!==undefined){if(tJ){VV(null,0,0);return;}else{var Ff=document.getElementById(bM[aE.nY].bF);if(Ff.bH){Ff.bH.lX().removeMark(aE.wY);}aE.wY.wq=false;}}V.va();tJ=null;bJ=false;if(sk!==null){bK=sk;}sk=null;}};Ek=gc({position:'relative',width:'auto',height:'auto',display:'table',tableLayout:'fixed',borderSpacing:'0px',margin:'0px auto',clear:'both',boxSizing:'border-box'});if(ce===IPCC.ViewMode.SinglePage){bU=gc({position:'relative',whiteSpace:'nowrap',width:'auto',height:'auto',overflow:'hidden'});bU.className='pccPageListContainer pccSinglePageView';}else{bU=gc({position:'relative',whiteSpace:'nowrap',width:'auto',height:'auto',display:'table-cell',verticalAlign:'top'});bU.className='pccPageListContainer';}IPCC.Web.UI.by.addHandler(aW,"mousedown",lg);IPCC.Web.UI.by.addHandler(aW,"mouseup",jW);IPCC.Web.UI.by.addHandler(aW,"mousemove",lA);IPCC.Web.UI.by.addHandler(aW,"mouseleave",awm);IPCC.Web.UI.by.addHandler(aW,"mousewheel",lO);IPCC.Web.UI.by.addHandler(aW,"DOMMouseScroll",avE);aW.onscroll=(! !GS)?aGc:aFg;bU.setAttribute('id',Qg+'_ListContainer');aW.setAttribute('id',Qg+'_ListWrapper');apG=Qg+'_ListWrapper';kO=gc();kO.className='pccPageListComments pccHidden';kO.setAttribute('id',Qg+'_CommentsPanel');var Vc=[];if(IPCC.J.azD){Vc.push('touchend');}else{Vc.push('click');}IPCC.J.forEach(Vc,function(evName){IPCC.Web.UI.by.addHandler(kO,evName,axG);});Ek.appendChild(bU);Ek.appendChild(kO);aW.appendChild(Ek);dA.appendChild(aW);if(navigator.userAgent.match('MSIE 10')&&document.documentMode===10){var ap='',aM='',rr='',sN='',qu;var vN=function(){qu=getComputedStyle(dA);rr=qu.getPropertyValue('width');sN=qu.getPropertyValue('height');if(rr!==ap||sN!==aM){ap=rr;aM=sN;aW.style.width=ap;aW.style.height=aM;}};setInterval(vN,1000);window.addEventListener('resize',vN);vN();V.vN=vN;}var axB=IPCC.J.It;if(document.documentElement.getBoundingClientRect&&Array.prototype.forEach&&axB&&window.addEventListener&&document.querySelector){aBH(aW);}var axm=function(bU,aID){var kR;var YN=function(ar){var dQ=ar.rawEvent,gv=dQ.touches[0]||dQ.changedTouches[0];ar.clientX=gv.clientX;ar.clientY=gv.clientY;ar.preventDefault=function(){dQ.preventDefault();};ar.stopPropagation=function(){dQ.stopPropagation();};return ar;};var Fy=function(iF,ar){var F=new IPCC.Web.UI.MouseEventArgs(),Da=(iF==='touchstart')?'mouseDown':(iF==='touchend')?'mouseUp':null;var Eo=(iF==='touchstart')?aig:(iF==='touchmove')?aiK:(iF==='touchend')?VV:null;kR=Sp(ar.clientX,ar.clientY);if(iF==='doubleTap'){kR&&kR.bH&&kR.bH.GD(iF,ar);}var jE;jE=UZ(ar);if(jE){if(jE.substring(0,5)==='texth'){ar.preventDefault();ar.stopPropagation();if(iF==='touchstart'){xV=ar;}Eo&&Eo(ar,ar.clientX,ar.clientY,0);return;}}switch(bK){case IPCC.Web.UI.MouseTool.CreateLineMark:case IPCC.Web.UI.MouseTool.CreatePolylineMark:case IPCC.Web.UI.MouseTool.CreateRectangleMark:case IPCC.Web.UI.MouseTool.CreateRectangleRedactionMark:case IPCC.Web.UI.MouseTool.CreateEllipseMark:case IPCC.Web.UI.MouseTool.CreateTextMark:case IPCC.Web.UI.MouseTool.CreateTextInputSignatureMark:case IPCC.Web.UI.MouseTool.CreateTextAreaSignatureMark:case IPCC.Web.UI.MouseTool.CreateStampMark:case IPCC.Web.UI.MouseTool.CreateFreehandMark:case IPCC.Web.UI.MouseTool.EditMarks:case IPCC.Web.UI.MouseTool.CreateImageStampAnnotationMark:case IPCC.Web.UI.MouseTool.CreateImageStampRedactionMark:kR&&kR.bH&&kR.bH.GD(iF,ar);if(Da==='mouseUp'){ait(ar,F);}else if(Da==='mouseDown'){aiq(ar,F);}V.aP(iF,F);break;case IPCC.Web.UI.MouseTool.SelectText:case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:ar.preventDefault();ar.stopPropagation();if(iF==='touchstart'){xV=ar;if(jE){V.va();break;}}Eo&&Eo(ar,ar.clientX,ar.clientY,0);break;case IPCC.Web.UI.MouseTool.Magnifier:case IPCC.Web.UI.MouseTool.RectangleZoom:ar.preventDefault();ar.stopPropagation();if(iF==='touchstart'){xV=ar;}Eo&&Eo(ar,ar.clientX,ar.clientY,0);break;case IPCC.Web.UI.MouseTool.HandPan:if(jE===undefined){jE=UZ(ar);}var H=Qy(ar,{});if(jE&&zF){if(!H||H.C.get_interactionMode()!==IPCC.Web.UI.MarkInteractionMode.SelectionDisabled){if(iF==='touchstart'){ajY(ar,jE,kR);}else if(iF==='touchmove'){kR&&kR.bH&&kR.bH.GD(iF,ar);}else if(iF==='touchend'){kR&&kR.bH&&kR.bH.GD(iF,ar);akF(kR);}}}break;}};var Dx,AQ,wX;var ayC=function(ar){if(ar.rawEvent.touches.length>1){clearTimeout(wX);wX=AQ=Dx=undefined;return;}ar=YN(ar);Dx=ar;if(bK===IPCC.Web.UI.MouseTool.CreatePolylineMark){ar.preventDefault();}AQ=function(){Fy('touchstart',ar);wX=AQ=Dx=undefined;};wX=setTimeout(function(){AQ();},200);};var Iw,Gv;var axJ=function(ar){ar=YN(ar);sJ=false;var aqp=function(){if(!Gv){return false;}var es=Gv.clientX-ar.clientX;var eo=Gv.clientY-ar.clientY;var gR=es*es+eo*eo;return gR<2500;};var acr=function(){Iw=Gv=undefined;var jE=UZ(ar);if(!jE&&bK===IPCC.Web.UI.MouseTool.HandPan&&zF&&kR){akO(kR.bH);}};var apJ=function(){var ada=AQ;if(Iw&&aqp()){clearTimeout(Iw);Gv=Iw=undefined;ada();Fy('touchend',ar);Fy('doubleTap',ar);}else{Iw=setTimeout(function(){ada();Fy('touchend',ar);acr();},300);Gv=ar;}};if(Dx&&wX){clearTimeout(wX);if(bK===IPCC.Web.UI.MouseTool.CreatePolylineMark){apJ();}else{acr();}wX=AQ=Dx=undefined;return;}Fy('touchend',ar);};var aed,sJ=false;var ayy=function(ar){if(ar.rawEvent.touches.length>1){return;}aed=ar;if(Dx&&wX){clearTimeout(wX);AQ();}aEW();};function aEW(){var ar=YN(aed);Fy('touchmove',ar);};IPCC.Web.UI.by.addHandler(bU,"touchstart",ayC);IPCC.Web.UI.by.addHandler(bU,"touchmove",ayy);IPCC.Web.UI.by.addHandler(bU,"touchend",axJ);};axm(bU,kO);}};function aBH(hi){var acq=function(){},dG=1;function alp(aeo,afr,iL,avH){hi.style['-ms-transform']=aeo;hi.style['-moz-transform']=aeo;hi.style['-webkit-transform']=afr;hi.style['transform']=afr;hi.style['-ms-transform-origin']=iL;hi.style['-moz-transform-origin']=iL;hi.style['-webkit-transform-origin']=iL;hi.style['transform-origin']=iL;hi.style.overflow=avH||'';};function anp(){alp('scale(1,1) translate(0px,0px)','scale3d(1,1,1) translate3d(0px,0px,0px)','0% 0%','auto');};anp();function aGE(nD,hu,Lc,tO,adg){var eL=(-hu.x/nD)-Lc.x,fI=(-hu.y/nD)-Lc.y,aDx="scale3d("+nD+","+nD+",1) translate3d("+eL+"px,"+fI+"px,0px)",aEN="scale("+nD+", "+nD+") translate("+eL+"px,"+fI+"px)";var arb=adg.x+'px '+adg.y+'px';alp(aEN,aDx,arb,'visible');acq=function(){var aL=hi.getBoundingClientRect();var Wx={x:(hi.clientWidth/2+ -aL.left+tO.left)/nD,y:(hi.clientHeight/2+ -aL.top+tO.top)/nD};if(eO===IPCC.PageLayout.VerticalScrollDirection&&tO.aff){Wx.x=Wx.x-(tO.aff/2);}anp();V.LY(nD,Wx,undefined,IPCC.ScaleTrigger.Pinch);vq=false;};return hi;};function amO(x,y,x0,y0){return Math.sqrt((x-=x0)*x+(y-=y0)*y);};function alI(x,y,x0,y0){return{x:(x+x0)/2,y:(y+y0)/2};};function apk(ajV,Ib){return{x:ajV.x-Ib.x,y:ajV.y-Ib.y};};var XF=false;hi.addEventListener('touchstart',function(ev){if(vq){return;}if(!XF&&ev.touches.length===2){afG(ev);}});var standardizeMSTouch=function(ev){var event={};event.identifier=ev.pointerId;event.x=event.clientX=ev.clientX;event.y=event.clientY=ev.clientY;event.preventDefault=ev.preventDefault;event.stopPropagation=ev.stopPropagation;event.rawEvent=ev;event.touches=[event];event.changedTouches=[event];return event;};var yt,ZK=false,xS={};PCCViewer.EventEmitter.extend(xS);hi.addEventListener(IPCC.J.ow['down'],function(ar){ZK=true;ar=standardizeMSTouch(ar);if(yt){var dQ={};dQ.touches=[yt,ar];dQ.changedTouches=[yt,ar];dQ.preventDefault=function(){yt.rawEvent.preventDefault();ar.rawEvent.preventDefault();};dQ.stopPropagation=function(){yt.rawEvent.stopPropagation();ar.rawEvent.stopPropagation();};afG(dQ);}else{yt=ar;}});hi.addEventListener(IPCC.J.ow['move'],function(ar){xS.trigger('touchmove',{rawEvent:ar});});hi.addEventListener(IPCC.J.ow['up'],function(ar){xS.trigger('touchend',{rawEvent:ar});yt=undefined;});function afG(ev){vq=true;var Lc={x:hi.scrollLeft,y:hi.scrollTop};var tO=hi.getBoundingClientRect();var og=VM();var Jd=hi.querySelector('.pccPageListItem');if(eO===IPCC.PageLayout.VerticalScrollDirection&&Jd.clientWidth<tO.width-30){tO.aff=tO.width-Jd.clientWidth;}var hu={x:0,y:0,set:function(ahs){this.x=ahs.x;this.y=ahs.y;return this;}};var sJ=false;XF=true;ev.preventDefault();ev.stopPropagation();function NU(gv){gv.x=gv.clientX||gv.pageX||gv.screenX;gv.y=gv.clientY||gv.pageY||gv.screenY;return gv;};var kW=NU(ev.touches[0]);var yS=NU(ev.touches[1]);var vZ=amO(kW.x,kW.y,yS.x,yS.y);var alJ=alI(kW.x,kW.y,yS.x,yS.y);var AM,zz;function Uz(ar){ar.preventDefault();[].forEach.call(ar.changedTouches,function(t){if(t.identifier===kW.identifier){AM=NU(t);}else if(t.identifier===yS.identifier){zz=NU(t);}});if(!AM|| !zz){return;}var aue=amO(AM.x,AM.y,zz.x,zz.y);var aur=alI(AM.x,AM.y,zz.x,zz.y);dG=aue/vZ;if((cR*dG)<og.minFactor){dG=og.minFactor/cR;}else if((cR*dG)>og.maxFactor){dG=og.maxFactor/cR;}hu.set(apk(alJ,aur));if(!sJ){sJ=true;If();}};function VF(){XF=false;sJ=false;hi.removeEventListener('touchmove',Uz);hi.removeEventListener('touchend',VF);if(ZK){xS.off('touchmove',amX);xS.off('touchend',ani);}if(!AM|| !zz){vq=false;return;}GS(acq);};var amX=function(ar){var acJ=standardizeMSTouch(ar.rawEvent);acJ.preventDefault=function(){};Uz(acJ);};var ani=function(ar){VF(standardizeMSTouch(ar.rawEvent));};hi.addEventListener('touchmove',Uz);hi.addEventListener('touchend',VF);if(ZK){xS.on('touchmove',amX);xS.on('touchend',ani);}function If(){if(sJ){GS(function(){if(!sJ){return;}aGE(dG,hu,Lc,tO,alJ);If();});}}}};function aGc(){if(ce===IPCC.ViewMode.SinglePage){return;}if(vq){return;}if(ng){clearTimeout(ng);}if(Xt){ata(Xt);}auy();ng=setTimeout(function(){ng=null;Xt=GS(function aHu(){if(vq){return;}oK();});},40);};function aFg(){if(me===false||ce===IPCC.ViewMode.SinglePage){return;}jD(true);if(ng!==null){clearTimeout(ng);}var aGa=aW.scrollHeight/bM.length;var OR=0;if(eO===IPCC.PageLayout.VerticalScrollDirection){OR=aW.scrollTop;}else{OR=aW.scrollLeft;}var aEr=OR-KS;KS=OR;var aow=new Date().getTime();var Uj=aow-yV;if(Uj>1000){Uj=1000;}Zh=aEr/aGa*1000/Uj;ng=setTimeout(function(){ng=null;yV=0;yV=new Date().getTime();oK();},1000);yV=new Date().getTime();if(Zh!==0&&Math.abs(Zh)<Nh){if(Lg&&ng!==null){clearTimeout(ng);ng=null;}yV=0;yV=new Date().getTime();setTimeout(function(){if(Lg&&ng!==null){clearTimeout(ng);ng=null;}yV=0;yV=new Date().getTime();oK();},40);}};function ars(){function yc(anU,anB,bL,dg){var Jq=document.createElementNS('http://www.w3.org/2000/svg','circle');Jq.setAttribute('cx',anU);Jq.setAttribute('cy',anB);Jq.setAttribute('r',bL);Jq.setAttribute('opacity',dg);return Jq;};var pr=document.createElementNS('http://www.w3.org/2000/svg','svg');pr.setAttribute('viewBox','0 0 52 52');pr.appendChild(yc(26,13.813,2.813,1));pr.appendChild(yc(24,38.188,2.813,0.4));pr.appendChild(yc(13.813,26,2.813,0.1));pr.appendChild(yc(38.188,26,2.813,0.7));pr.appendChild(yc(34.618,34.618,2.813,0.55));pr.appendChild(yc(17.382,34.618,2.813,0.25));pr.appendChild(yc(34.618,17.382,2.813,0.85));return pr;};function akR(lj){var bj=0;var aiv=false;var NZ;var Ki;var pr;for(bj=0;bj<lj.childNodes.length;bj++){if(lj.childNodes[bj].className==="pccPageListItemLoading"){aiv=true;}}if(aiv===false){Ki=document.createElement('div');Ki.className='pccPageListItemLoading';pr=ars();lj.innerHTML="";lj.appendChild(Ki);Ki.appendChild(pr);if(Ks.length>0){NZ=document.createElement('div');NZ.className='pccPageListItemLoadingContent';NZ.innerHTML=Ks;Ki.appendChild(NZ);}}};function auy(){var uw=aW.scrollTop;var tX=aW.scrollLeft;var vL=aW.clientHeight;var uB=aW.clientWidth;var wH=aW.scrollWidth;var uO=aW.scrollHeight;var cc=aau({uw:uw,tX:tX,vL:vL,uB:uB,wH:wH,uO:uO});var L=cc.adP;if(me&&tA===false&&cZ!==L&&L>=0){cZ=L;var F=new IPCC.PageEventArgs();F.imGearPage=V.get_currentPage();F.pageIndex=cZ;F.pageNodeID=bM[cZ].bF;V.aP('currentPageChanged',F);}};function WC(aA){var ap=aA.bO||ht;var aM=aA.bo||hK;if(aA.gz%180){var qw=ap;ap=aM;aM=qw;}var sS=aA.ho||akP;return{ap:ap*(cR*cW/sS),aM:aM*(cR*cW/sS),aHq:sS,ao:aA.cA};};function Zp(aGu){return IPCC.J.reduce(aGu,function(fa,ai,ao){fa[ao]=WC(ai);return fa;},{});};function alH(aO){var pq,Ej,zO,vU,pP;if(eO===IPCC.PageLayout.VerticalScrollDirection){pq=aW.scrollTop;Ej=aW.scrollHeight;zO=aW.clientHeight;vU='aM';pP=eK;}else{pq=aW.scrollLeft;Ej=aW.scrollWidth;zO=aW.clientWidth;vU='ap';pP=ha+fX;}var kc=Zp(bM);var IF=eO===IPCC.PageLayout.VerticalScrollDirection?eK:ha;var aaQ=false;IPCC.J.forEach(kc,function(ai,ao){if(ai.ao===aO){aaQ=true;}if(aaQ){return;}IF+=ai[vU]+pP;});return IF-(pP/2);};function rk(cc){var EH=IPCC.J.map(cc.cI,function(ai){return+ai.ao;}).sort();var kW=EH[0];var ly=EH[EH.length-1];var eP=bM.length;for(var L=Dy;L;L--){kW-=1;ly+=1;if(kW>=0){EH.unshift(kW);}if(ly<eP){EH.push(ly);}}return EH.sort();};function KX(cc){var kW=Math.max(cc.cI[0].ao-uq,0);var ly=Math.min(cc.cI[cc.cI.length-1].ao+uq,bM.length-1);return{kW:kW,ly:ly};};function aoL(cc){var kW=Math.max(cc.cI[0].ao-Dy,0);var ly=Math.min(cc.cI[cc.cI.length-1].ao+Dy,bM.length-1);return{kW:kW,ly:ly};};function aau(ag){if(ce===IPCC.ViewMode.SinglePage){return amj();}var pq,Ej,zO,vU,pP;if(eO===IPCC.PageLayout.VerticalScrollDirection){pq=ag.uw;Ej=ag.uO;zO=ag.vL;vU='aM';pP=eK;}else{pq=ag.tX;Ej=ag.wH;zO=ag.uB;vU='ap';pP=ha+fX;}var apU=pq;var apz=pq+zO;var kc=Zp(bM);var IF=eO===IPCC.PageLayout.VerticalScrollDirection?eK:ha;var aEd=pq/Ej;var Nv=(aEd*zO)+pq;var ZM=Number.MAX_VALUE;var lK= -1;var cI=[];IPCC.J.forEach(kc,function(ai,ao){var mY=IF;var ep=mY+ai[vU];if(mY<apz&&ep>apU){ai.yN=true;cI.push(ai);}var alW=Math.min(Math.abs(mY-Nv),Math.abs(ep-Nv));if(mY<Nv&&ep>Nv){ZM=0;lK=ao;}else if(alW<ZM){lK=ao;ZM=alW;}IF+=ai[vU]+pP;});if(cI.length===0&&kc[lK]!==undefined){cI.push(kc[lK]);}return{cI:cI,adP:Number(lK)||0,IV:kc};};function amj(){var kc=Zp(bM);var Gk=[cZ];var cI=IPCC.J.filter(kc,function(ai){return IPCC.J.contains(Gk,+ai.ao);});return{cI:cI,adP:cZ,IV:kc};};function Mi(){var cc=jD();if(!cc){return[];}var Gk=IPCC.J.map(cc.cI,function(ai){return ai.ao;});var aym=2;var ano=Math.min.apply(Math,Gk);for(var i=1;i<=aym;i++){if(ano-i>=0){Gk.unshift(ano-i);}}return Gk;};function jD(){if(ce===IPCC.ViewMode.SinglePage){return amj();}if(aW===''||aW.clientHeight<=0){return;}var uw=aW.scrollTop;var tX=aW.scrollLeft;var vL=aW.clientHeight;var uB=aW.clientWidth;var wH=aW.scrollWidth;var uO=aW.scrollHeight;var aqH=aau({uw:uw,tX:tX,vL:vL,uB:uB,wH:wH,uO:uO});tA=false;return aqH;}};Nn.prototype={dispose:function(){this.aF('dispose',arguments);this.aiW(false);this.aoH();},disposeDisplayedPages:function(){this.aBF();},get_debug:function(){try{var bL=this.Jm();this.dk('get_debug',arguments,bL);return bL;}catch(e){this.aK('get_debug',e);throw e;}},set_debug:function(value){try{this.aF('set_debug',arguments);var AK=this.Jm();this.Uy(value);if(!AK){this.aF('set_debug',arguments);}}catch(e){this.aK('set_debug',e);throw e;}},get_debugErrorLevel:function(){try{var bL=this.Ak();this.dk('get_debugErrorLevel',arguments,bL);return bL;}catch(e){this.aK('get_debugErrorLevel',e);throw e;}},set_debugErrorLevel:function(value){try{this.aF('set_debugErrorLevel',arguments);var AK=this.Ak();this.II(value);if(AK<IPCC.Web.UI.DebugErrorLevel.Development){this.aF('set_debugErrorLevel',arguments);}}catch(e){this.aK('set_debugErrorLevel',e);throw e;}},add_mouseDown:function(handler){try{this.MR(handler);}catch(e){this.aK('add_mouseDown',e);throw e;}},remove_mouseDown:function(handler){try{this.Vb(handler);}catch(e){this.aK('remove_mouseDown',e);throw e;}},add_mouseMove:function(handler){try{this.NP(handler);}catch(e){this.aK('add_mouseMove',e);throw e;}},remove_mouseMove:function(handler){try{this.Vy(handler);}catch(e){this.aK('remove_mouseMove',e);throw e;}},add_mouseUp:function(handler){try{this.NC(handler);}catch(e){this.aK('add_mouseUp',e);throw e;}},remove_mouseUp:function(handler){try{this.Vl(handler);}catch(e){this.aK('remove_mouseUp',e);throw e;}},add_selectTextMouseToolCompleted:function(handler){try{this.Zu(handler);}catch(e){this.aK('add_selectTextMouseToolCompleted',e);throw e;}},remove_selectTextMouseToolCompleted:function(handler){try{this.Uu(handler);}catch(e){this.aK('remove_selectTextMouseToolCompleted',e);throw e;}},add_currentPageChanged:function(handler){try{this.ayX(handler);}catch(e){this.aK('add_currentPageChanged',e);throw e;}},remove_currentPageChanged:function(handler){try{this.aAX(handler);}catch(e){this.aK('remove_currentPageChanged',e);throw e;}},add_textPageReady:function(handler){try{this.yW(handler);}catch(e){this.aK('add_textPageReady',e);throw e;}},remove_textPageReady:function(handler){try{this.FL(handler);}catch(e){this.aK('remove_textPageReady',e);throw e;}},add_hyperlinkPageReady:function(handler){try{this.abD(handler);}catch(e){this.aK('add_hyperlinkPageReady',e);throw e;}},remove_hyperlinkPageReady:function(handler){try{this.adW(handler);}catch(e){this.aK('remove_hyperlinkPageReady',e);throw e;}},add_textExtractionFailed:function(handler){this.yI(handler);},remove_textExtractionFailed:function(handler){this.FP(handler);},add_allPagesAdded:function(handler){try{this.atX(handler);}catch(e){this.aK('add_allPagesAdded',e);throw e;}},remove_allPagesAdded:function(handler){try{this.azQ(handler);}catch(e){this.aK('remove_allPagesAdded',e);throw e;}},add_pageOpening:function(handler){try{this.Wq(handler);}catch(e){this.aK('add_pageOpening',e);throw e;}},remove_pageOpening:function(handler){try{this.Sv(handler);}catch(e){this.aK('remove_pageOpening',e);throw e;}},add_pageOpened:function(handler){try{this.WP(handler);}catch(e){this.aK('add_pageOpened',e);throw e;}},remove_pageOpened:function(handler){try{this.Sy(handler);}catch(e){this.aK('remove_pageOpened',e);throw e;}},add_pageOpenFailed:function(handler){try{this.IY(handler);}catch(e){this.aK('add_pageOpenFailed',e);throw e;}},remove_pageOpenFailed:function(handler){try{this.Ge(handler);}catch(e){this.aK('remove_pageOpenFailed',e);throw e;}},add_pageDisplayed:function(handler){try{this.WW(handler);}catch(e){this.aK('add_pageDisplayed',e);throw e;}},remove_pageDisplayed:function(handler){try{this.Ws(handler);}catch(e){this.aK('remove_pageDisplayed',e);throw e;}},add_propertyChanged:function(handler){try{this.kk(handler);}catch(e){this.aK('add_propertyChanged',e);throw e;}},remove_propertyChanged:function(handler){try{this.nv(handler);}catch(e){this.aK('remove_propertyChanged',e);throw e;}},add_markAdded:function(handler){try{this.ya(handler);}catch(e){this.aK('add_markAdded',e);throw e;}},remove_markAdded:function(handler){try{this.Ah(handler);}catch(e){this.aK('remove_markAdded',e);throw e;}},add_markCreating:function(handler){try{this.abp(handler);}catch(e){this.aK('add_markCreating',e);throw e;}},remove_markCreating:function(handler){try{this.To(handler);}catch(e){this.aK('remove_markCreating',e);throw e;}},add_markChanged:function(handler){try{this.Ja(handler);}catch(e){this.aK('add_markChanged',e);throw e;}},remove_markChanged:function(handler){try{this.Ii(handler);}catch(e){this.aK('remove_markChanged',e);throw e;}},add_markReordered:function(handler){try{this.Kq(handler);}catch(e){this.aK('add_markReordered',e);throw e;}},remove_markReordered:function(handler){try{this.FI(handler);}catch(e){this.aK('remove_markReordered',e);throw e;}},add_markSelectionChanged:function(handler){try{this.Kv(handler);}catch(e){this.aK('add_markSelectionChanged',e);throw e;}},remove_markSelectionChanged:function(handler){try{this.Gw(handler);}catch(e){this.aK('remove_markSelectionChanged',e);throw e;}},add_markTextSelectionChanged:function(handler){try{this.Kx(handler);}catch(e){this.aK('add_markTextSelectionChanged',e);throw e;}},remove_markTextSelectionChanged:function(handler){try{this.ET(handler);}catch(e){this.aK('remove_markTextSelectionChanged',e);throw e;}},add_markRemoved:function(handler){try{this.xC(handler);}catch(e){this.aK('add_markRemoved',e);throw e;}},remove_markRemoved:function(handler){try{this.AP(handler);}catch(e){this.aK('remove_markRemoved',e);throw e;}},add_commentAdding:function(handler){try{this.auE(handler);}catch(e){this.aK('add_commentAdding',e);throw e;}},remove_commentAdding:function(handler){try{this.aAt(handler);}catch(e){this.aK('remove_commentAdding',e);throw e;}},add_commentAdded:function(handler){try{this.wW(handler);}catch(e){this.aK('add_commentAdded',e);throw e;}},remove_commentAdded:function(handler){try{this.DV(handler);}catch(e){this.aK('remove_commentAdded',e);throw e;}},add_commentRemoved:function(handler){try{this.vW(handler);}catch(e){this.aK('add_commentRemoved',e);throw e;}},remove_commentRemoved:function(handler){try{this.Es(handler);}catch(e){this.aK('remove_commentRemoved',e);throw e;}},add_commentChanged:function(handler){try{this.rD(handler);}catch(e){this.aK('add_commentChanged',e);throw e;}},remove_commentChanged:function(handler){try{this.ue(handler);}catch(e){this.aK('remove_commentChanged',e);throw e;}},add_scaleChanged:function(handler){try{this.Yv(handler);}catch(e){this.aK('add_scaleChanged',e);throw e;}},remove_scaleChanged:function(handler){try{this.VW(handler);}catch(e){this.aK('remove_scaleChanged',e);throw e;}},add_exceptionThrown:function(handler){this.abe(handler);},remove_exceptionThrown:function(handler){this.QI(handler);},writeToLog:function(message){try{this.mb(message);}catch(e){this.aK('writeToLog',e);throw e;}},get_currentState:function(){try{var bL=this.Ld();this.dk('get_currentState',arguments,bL);return bL;}catch(e){this.aK('get_currentState',e);throw e;}},get_scaleFactor:function(){try{var bL=this.nX();this.dk('get_scaleFactor',arguments,bL);return bL;}catch(e){this.aK('get_scaleFactor',e);throw e;}},set_scaleFactor:function(scaleFactor){try{this.aF('set_scaleFactor',arguments);this.apb(scaleFactor);}catch(e){this.aK('set_scaleFactor',e);throw e;}},zoomIn:function(factor){try{this.aF('zoomIn',arguments);this.LY(factor);}catch(e){this.aK('zoomIn',e);throw e;}},zoomOut:function(factor){try{this.aF('zoomOut',arguments);this.ZX(factor);}catch(e){this.aK('zoomOut',e);throw e;}},getMinMaxZoom:function(){return this.axZ();},displayAll:function(){try{this.aF('displayAll',arguments,1);this.aDH();}catch(e){this.aK('displayAll',e);throw e;}},display:function(pageIndex){try{this.aF('display',arguments);this.dh(pageIndex);}catch(e){this.aK('display',e);throw e;}},get_textRequired:function(){try{var bL=this.kG();this.dk('get_textRequired',arguments,bL);return bL;}catch(e){this.aK('get_textRequired',e);throw e;}},set_textRequired:function(value){try{this.aF('set_textRequired',arguments);this.Je(value);}catch(e){this.aK('set_textRequired',e);throw e;}},selectText:function(pageIndex,startIndex,endIndex,color){try{this.aF('selectText',arguments,1);this.Yp(pageIndex,startIndex,endIndex,color);}catch(e){this.aK('selectText',e);throw e;}},clearSelectedText:function(pageIndex){try{this.aF('clearSelectedText',arguments,1);this.apT(pageIndex);}catch(e){this.aK('clearSelectedText',e);throw e;}},clearAllSelectedText:function(){try{this.aF('clearAllSelectedText',arguments);this.aql();}catch(e){this.aK('clearAllSelectedText',e);throw e;}},get_maxPrefetch:function(){try{var bL=this.azf();this.dk('get_maxPrefetch',arguments,bL);return bL;}catch(e){this.aK('get_maxPrefetch',e);throw e;}},set_maxPrefetch:function(value){try{this.aF('set_maxPrefetch',arguments);this.anX(value);}catch(e){this.aK('set_maxPrefetch',e);throw e;}},get_displayPagesWhenScrolling:function(){try{var bL=this.atu();this.dk('get_displayPagesWhenScrolling',arguments,bL);return bL;}catch(e){this.aK('get_displayPagesWhenScrolling',e);throw e;}},set_displayPagesWhenScrolling:function(value){try{this.aF('set_displayPagesWhenScrolling',arguments);this.aBQ(value);}catch(e){this.aK('set_displayPagesWhenScrolling',e);throw e;}},get_maxOutOfViewDisplay:function(){try{var bL=this.azg();this.dk('get_maxOutOfViewDisplay',arguments,bL);return bL;}catch(e){this.aK('get_maxOutOfViewDisplay',e);throw e;}},set_maxOutOfViewDisplay:function(value){try{this.aF('set_maxOutOfViewDisplay',arguments);this.aoU(value);}catch(e){this.aK('set_maxOutOfViewDisplay',e);throw e;}},get_discardOutOfViewText:function(){try{var bL=this.ava();this.dk('get_discardOutOfViewText',arguments,bL);return bL;}catch(e){this.aK('get_discardOutOfViewText',e);throw e;}},set_discardOutOfViewText:function(value){try{this.aF('set_discardOutOfViewText',arguments);this.aCE(value);}catch(e){this.aK('set_discardOutOfViewText',e);throw e;}},get_scrollDisplayThreshold:function(){try{var bL=this.axY();this.dk('get_scrollDisplayThreshold',arguments,bL);return bL;}catch(e){this.aK('get_scrollDisplayThreshold',e);throw e;}},set_scrollDisplayThreshold:function(value){try{this.aF('set_scrollDisplayThreshold',arguments);this.aoo(value);}catch(e){this.aK('set_scrollDisplayThreshold',e);throw e;}},get_mouseCursor:function(){try{var bL=this.aeY();this.dk('get_mouseCursor',arguments,bL);return bL;}catch(e){this.aK('aeY',e);throw e;}},set_mouseCursor:function(value){try{this.aF('set_mouseCursor',arguments);this.aof(value);}catch(e){this.aK('set_mouseCursor',e);throw e;}},get_mouseTool:function(){try{var bL=this.YE();this.dk('get_mouseTool',arguments,bL);return bL;}catch(e){this.aK('get_mouseTool',e);throw e;}},set_mouseTool:function(value){try{this.aF('set_mouseTool',arguments);this.HD(value);}catch(e){this.aK('set_mouseTool',e);throw e;}},get_markHandleMode:function(){try{var bL=this.AE();this.aF('get_markHandleMode',arguments);return bL;}catch(e){this.aK('get_markHandleMode',e);throw e;}},set_markHandleMode:function(G){try{this.aF('set_markHandleMode',arguments);this.Ie(G);}catch(e){this.aK('set_markHandleMode',e);throw e;}},get_retainPageText:function(){try{var bL=this.azJ();this.aF('get_retainPageText',arguments);return bL;}catch(e){this.aK('get_retainPageText',e);throw e;}},set_retainPageText:function(G){try{this.aF('set_retainPageText',arguments);this.aoC(G);}catch(e){this.aK('set_retainPageText',e);throw e;}},get_allowMarkEdits:function(){try{var bL=this.avb();this.aF('get_allowMarkEdits',arguments);return bL;}catch(e){this.aK('get_allowMarkEdits',e);throw e;}},set_allowMarkEdits:function(bool){try{this.aF('set_allowMarkEdits',arguments);this.aEA(! !bool);}catch(e){this.aK('set_allowMarkEdits',e);throw e;}},get_currentPage:function(){try{var bL=this.ane();this.dk('get_currentPage',arguments,bL);return bL;}catch(e){this.aK('get_currentPage',e);throw e;}},get_pageNodeId:function(pageIndex){try{var als=this.azp(pageIndex);this.dk('get_pageNodeId',arguments,als);return als;}catch(e){this.aK('get_pageNodeId',e);throw e;}},scrollToNextPage:function(){try{this.aF('scrollToNextPage',arguments);this.aDG();}catch(e){this.aK('scrollToNextPage',e);throw e;}},scrollToPreviousPage:function(){try{this.aF('scrollToPreviousPage',arguments);this.aDX();}catch(e){this.aK('scrollToPreviousPage',e);throw e;}},scrollToFirstPage:function(){try{this.aF('scrollToFirstPage',arguments);this.aEe();}catch(e){this.aK('scrollToFirstPage',e);throw e;}},scrollToLastPage:function(){try{this.aF('scrollToLastPage',arguments);this.aEx();}catch(e){this.aK('scrollToLastPage',e);throw e;}},scrollToPage:function(pageIndex){try{this.aF('scrollToPage',arguments,1);this.pH(pageIndex);}catch(e){this.aK('scrollToPage',e);throw e;}},rotate:function(degreesClockwise){try{this.aF('rotate',arguments,1);this.aEk(degreesClockwise);}catch(e){this.aK('rotate',e);throw e;}},rotateAll:function(degreesClockwise){try{this.aF('rotateAll',arguments,1);this.acp(degreesClockwise,true);}catch(e){this.aK('rotateAll',e);throw e;}},get_enabled:function(){try{var bL=this.auH();this.dk('get_enabled',arguments,bL);return bL;}catch(e){this.aK('get_enabled',e);throw e;}},get_pageLayout:function(){try{var bL=this.azX();this.dk('get_pageLayout',arguments,bL);return bL;}catch(e){this.aK('get_pageLayout',e);throw e;}},set_pageLayout:function(value){try{this.aF('set_pageLayout',arguments);this.apf(value);}catch(e){this.aK('set_pageLayout',e);throw e;}},get_viewMode:function(){try{var bL=this.axI();this.dk('get_viewMode',arguments,bL);return bL;}catch(e){this.aK('get_viewMode',e);throw e;}},set_viewMode:function(value){try{this.aF('set_viewMode',arguments);this.Ou(value);}catch(e){this.aK('set_viewMode',e);throw e;}},get_loadingContent:function(){try{var bL=this.ayf();this.dk('get_loadingContent',arguments,bL);return bL;}catch(e){this.aK('get_loadingContent',e);throw e;}},set_loadingContent:function(value){try{this.aF('set_loadingContent',arguments);this.aoh(value);}catch(e){this.aK('set_loadingContent',e);throw e;}},fitPages:function(fitType){try{this.aF('fitPages',arguments,1);this.awM(fitType);}catch(e){this.aK('fitPages',e);throw e;}},openPage:function(pageIndex){try{this.aF('openPage',arguments,1);this.NT(pageIndex);}catch(e){this.aK('openPage',e);throw e;}},requestPageAttributes:function(page,attributesRetrievedCallback,attributesRetrievalFailedCallback){try{this.aF('requestPageAttributes',arguments,1);this.KR(page,attributesRetrievedCallback,attributesRetrievalFailedCallback);}catch(e){this.aK('requestPageAttributes',e);throw e;}},scrollRegionIntoView:function(pageIndex,rectangle){try{this.aF('scrollRegionIntoView',arguments,1);return this.aEi(pageIndex,rectangle);}catch(e){this.aK('scrollRegionIntoView',e);throw e;}},scrollBy:function(xVal,yVal){try{this.aF('scrollBy',arguments,1);return this.aDV(xVal,yVal);}catch(e){this.aK('scrollBy',e);throw e;}},scrollConversationIntoView:function(conversation){try{this.aF('scrollConversationIntoView',arguments,1);return this.aEz(conversation);}catch(e){this.aK('scrollConversationIntoView',e);throw e;}},get_documents:function(){return this.Zx();},get_encryption:function(){try{var bL=this.jj();this.dk('get_encryption',arguments,bL);return bL;}catch(e){this.aK('get_encryption',e);throw e;}},set_encryption:function(value){try{this.aF('set_encryption',arguments);this.nC(value);}catch(e){this.aK('set_encryption',e);throw e;}},get_annotationXmlDom:function(){try{var bL=this.auB();return bL;}catch(e){this.aK('get_annotationXmlDom',e);throw e;}},set_annotationXmlDom:function(value,stampImages,retainExistingMarks,loadAsHidden){try{this.aDu(value,stampImages,retainExistingMarks,loadAsHidden);}catch(e){this.aK('set_annotationXmlDom',e);throw e;}},get_resourcePath:function(){try{var bL=this.vM();this.dk('get_resourcePath',arguments,bL);return bL;}catch(e){this.aK('get_resourcePath',e);throw e;}},set_resourcePath:function(G){try{this.aF('set_resourcePath',arguments);this.Kf(G);}catch(e){this.aK('set_resourcePath',e);throw e;}},get_redactionDraftMode:function(){try{var bL=this.ni();this.dk('get_redactionDraftMode',arguments,bL);return bL;}catch(e){this.aK('get_redactionDraftMode',e);throw e;}},set_redactionDraftMode:function(value){try{this.aF('set_redactionDraftMode',arguments);this.om(value);}catch(e){this.aK('set_redactionDraftMode',e);throw e;}},get_displayedPages:function(){try{var bL=this.atR();this.dk('get_displayedPages',arguments,bL);return bL;}catch(e){this.aK('get_displayedPages',e);throw e;}},get_requireRequestsOptimize:function(){try{var bL=this.BE();this.dk('get_requireRequestsOptimize',arguments,bL);return bL;}catch(e){this.aK('BE',e);throw e;}},set_requireRequestsOptimize:function(value){try{this.aF('set_requireRequestsOptimize',arguments);this.JK(value);}catch(e){this.aK('set_requireRequestsOptimize',e);throw e;}},get_serviceResponseTimeout:function(){try{var bL=this.kQ();this.dk('get_serviceResponseTimeout',arguments,bL);return bL;}catch(e){this.aK('get_serviceResponseTimeout',e);throw e;}},set_serviceResponseTimeout:function(value){try{this.aF('set_serviceResponseTimeout',arguments);this.yx(value);}catch(e){this.aK('set_serviceResponseTimeout',e);throw e;}},get_pageRotation:function(){try{var bL=this.aAz();this.dk('get_pageRotation',arguments,bL);return bL;}catch(e){this.aK('get_pageRotation',e);throw e;}},set_pageRotation:function(value){try{this.aF('set_pageRotation',arguments);this.aoV(value);}catch(e){this.aK('set_pageRotation',e);throw e;}},getNodeID:function(pageIndex){try{this.aF('getNodeID',arguments,1);return this.ayT(pageIndex);}catch(e){this.aK('getNodeID',e);throw e;}},get_isCommentsPanelOpen:function(){try{var bL=this.azT();this.dk('get_isCommentsPanelOpen',arguments,bL);return bL;}catch(e){this.aK('get_isCommentsPanelOpen',e);throw e;}},openCommentsPanel:function(){try{this.aF('openCommentsPanel',arguments);this.avP();}catch(e){this.aK('openCommentsPanel',e);throw e;}},closeCommentsPanel:function(){try{this.aF('closeCommentsPanel',arguments);this.aqJ();}catch(e){this.aK('closeCommentsPanel',e);throw e;}},get_conversationDOMFactory:function(){try{var bL=this.atI();this.dk('get_conversationDOMFactory',arguments,bL);return bL;}catch(e){this.aK('get_conversationDOMFactory',e);throw e;}},set_conversationDOMFactory:function(value){try{this.aF('set_conversationDOMFactory',arguments);this.aDU(value);}catch(e){this.aK('set_conversationDOMFactory',e);throw e;}},get_selectedConversation:function(){try{var bL=this.ayx();this.dk('get_selectedConversation',arguments,bL);return bL;}catch(e){this.aK('get_selectedConversation',e);throw e;}},set_selectedConversation:function(value){try{this.aF('set_selectedConversation',arguments);this.apa(value);}catch(e){this.aK('set_selectedConversation',e);throw e;}},refreshConversations:function(markIDs){try{this.aF('refreshConversations',arguments);this.aBa(markIDs);}catch(e){this.aK('refreshConversations',e);throw e;}},preserveScrollPosition:function(){try{this.aFr();}catch(e){this.aK('preserveScrollPosition',e);throw e;}},restoreScrollPosition:function(){try{this.aBi();}catch(e){this.aK('restoreScrollPosition',e);throw e;}},prefetchPages:function(){try{this.aGA();}catch(e){this.aK('prefetchPages',e);throw e;}}};Nn.registerClass=dN;Nn.registerClass('IPCC.PageList',{});module.exports=Nn;},{"./IPCC.Util":28}],43:[function(require,module,exports){var pR=function(cG,vJ){var V=this;this.cG=cG;this.vJ=vJ;this.aAu=function(){return V.cG;};this.aGM=function(){return V.vJ;};};pR.prototype.get_propertyName=function(){return this.cG;};pR.prototype.get_propertyInfo=function(){return this.vJ;};module.exports=pR;},{}],44:[function(require,module,exports){var En=function(){this.dG=1;this.width=0;this.height=0;this.os=0;this.zZ=0;this.pool=undefined;return this;};En.prototype.Sb=function(ed){if(ed.width<1||ed.height<1){return[];}var lJ=Math.floor(ed.x*this.dG);var mL=Math.floor(ed.y*this.dG);var oW=Math.ceil((ed.x+ed.width)*this.dG);var mI=Math.ceil((ed.y+ed.height)*this.dG);var oy=[];var L,fs;var cr=this.tiles.length;for(L=0;L<cr;L++){fs=this.tiles[L];if(fs.x<=oW&&fs.right>=lJ&&fs.y<=mI&&fs.bottom>=mL){oy.push(fs);}}return oy;};module.exports=En;},{}],45:[function(require,module,exports){var wO=function(){this.x=0;this.y=0;this.right=0;this.bottom=0;this.ap=0;this.aM=0;this.xH=0;this.wN=0;this.url='';this.poolItem=undefined;this.level=undefined;return this;};wO.prototype.unlock=function(){this.level.pool.agF(this);};wO.prototype.lock=function(){this.level.pool.lockTile(this);};wO.prototype.relock=function(){return this.level.pool.ZA(this);};wO.prototype.get_isLockedAndLoaded=function(){if(this.poolItem===undefined|| !this.poolItem.loaded){return false;}return true;};wO.prototype.toString=function(){var av='x:'+this.x.toString()+', y:'+this.y.toString()+', right:'+this.right.toString()+', bottom:'+this.bottom.toString();if(this.level){av='scale:'+this.level.dG.toString()+', '+av;}return av;};module.exports=wO;},{}],46:[function(require,module,exports){var mT=function(){this.bJ=false;this.K=false;};mT.prototype.mt=function(K){this.K=K;};mT.prototype.ep=function(){this.K=false;};mT.prototype.af=function(){if(this.bJ){this.K.aR().oi();this.bJ=false;this.K.dh();}};mT.prototype.rS=function(){this.af();this.K.dh();};mT.prototype.lg=function(F){this.af();if(F.domEvent.button===0){var aT=this.K.aR();this.bJ=true;aT.Dp(F.constrainedImagePoint);this.oq=F.windowPoint;this.K.dh();}};mT.prototype.lA=function(F){if(F.domEvent.button!==0){this.af();}if(this.bJ){var aT=this.K.aR();aT.zP(F.constrainedImagePoint);this.K.dh();}};mT.prototype.jW=function(F){if(this.bJ&&F.domEvent.button===0){var eY=F.windowPoint.x-this.oq.x;var gR=eY*eY;eY=F.windowPoint.y-this.oq.y;gR+=eY*eY;if(gR>25){var K=this.K;var aT=K.aR();var bn=aT.fA();var as=K.fb();var avY=as.width;var awR=as.height;var aQ=K.bY();aT.zP(F.constrainedImagePoint);var ir=aT.vY();aT.oi();K.aP('userModifiedViewState',{});bn.NK(aQ,as,ir);bn.ke(aQ,as);aT.je(bn);K.dh();if(avY!==as.width||awR!==as.height){bn=aT.fA();bn.NK(aQ,as,ir);bn.ke(aQ,as);aT.je(bn);}}}this.af();};mT.prototype.nB=function(F){var as=this.K.fb();if(F.windowPoint.x<=0||F.windowPoint.x>=as.width-2){this.af();}if(F.windowPoint.y<=0||F.windowPoint.y>=as.height-2){this.af();}};mT.prototype.lO=function(){this.af();};module.exports=mT;},{}],47:[function(require,module,exports){var jO={'paramName':'Parameter name: {0}','svctype':'License','argumentNull':'Value cannot be null.','spc':' ','actualValue':'Actual value was {0}.','fwdslash':'/','prodInfo':'prodInfoPass','argumentOutOfRange':'Specified argument was out of the range of valid values.','argumentTypeWithTypes':'Object of type \'{0}\' cannot be converted to type \'{1}\'.','argumentType':'Object cannot be converted to the required type.','invalidOperation':'Operation is not valid due to the current state of the object.','notImplemented':'The method or operation is not implemented.','argument':'Value does not fall within the expected range.','prodFailInfo':'prodInfoFail','svcReqStr':'','viewer':'ClientViewer','querySymb':'?','version':'v=','iv':'iv=','param':'p='};module.exports=jO;},{}],48:[function(require,module,exports){var AV=function(){};AV.prototype.mt=function(K){this.K=K;this.aT=K.aR();};AV.prototype.ep=function(){this.K=false;};AV.prototype.af=function(){};module.exports=AV;},{}],49:[function(require,module,exports){var fi=require('./IPCC.Util').regEnum;var Fu=function(){};Fu.registerEnum=fi;Fu.prototype={Pinch:"Pinch",Zoom:"Zoom",Fit:"Fit",ViewMode:"ViewMode"};Fu.registerEnum('IPCC.ScaleTrigger',false);module.exports=Fu;},{"./IPCC.Util":28}],50:[function(require,module,exports){var oA=function(){this.bJ=false;this.K=false;};oA.prototype.mt=function(K){this.K=K;};oA.prototype.ep=function(){this.K=false;};oA.prototype.af=function(){if(this.bJ){this.K.oi();this.bJ=false;this.K.dh();}};oA.prototype.rS=function(){this.af();};oA.prototype.lg=function(F){this.af();if(F.domEvent.button===0){var aT=this.K.aR();this.bJ=true;aT.Dp(F.constrainedImagePoint);this.K.dh();}};oA.prototype.lA=function(F){if(F.domEvent.button!==0){this.af();}if(this.bJ){var aT=this.K.aR();aT.zP(F.constrainedImagePoint);this.K.dh();}};oA.prototype.jW=function(F){if(F.domEvent.button===0){this.bJ=false;}this.af();};oA.prototype.nB=function(F){var as=this.K.fb();if(F.windowPoint.x<=0||F.windowPoint.x>=as.width-2){this.af();}if(F.windowPoint.y<=0||F.windowPoint.y>=as.height-2){this.af();}};oA.prototype.lO=function(){this.af();};module.exports=oA;},{}],51:[function(require,module,exports){var jT=function(){this.bJ=false;this.K=false;};jT.prototype.mt=function(K){this.K=K;};jT.prototype.ep=function(){this.K=false;};jT.prototype.af=function(){if(this.bJ){this.K.aR().aac();this.bJ=false;}};jT.prototype.rS=function(){this.af();};jT.prototype.lg=function(F){if(F.domEvent.button===0){var aT=this.K.aR();this.bJ=true;var dH=this.K.Jk(F.constrainedImagePoint);this.K.fP=dH;if(!dH){return;}this.K.zd(dH);aT.zd(dH);aT.ud(undefined);this.K.dh();}};jT.prototype.lA=function(F){var K=this.K;K.aAk=true;if(F.domEvent.button!==0){this.af();}if(this.bJ){var aT=K.aR();var dH=K.Jk(F.constrainedImagePoint);var gG=aT.Cj();if(gG===dH){return;}K.ud(dH);K.dh();}};jT.prototype.jW=function(F){if(F.domEvent.button===0){this.bJ=false;}var K=this.K;var aT=this.K.aR();var cw=aT.jf.length;if(cw===0){this.af();return;}var bf=aT.jf[0].dH;var dj=aT.jf[cw-1].dH;if(K.Jr===true){if(bf>dj){bf=dj;}var L;var nP=IPCC.Bm();this.C=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.HighlightText);this.C.bf=bf;this.C.cO=K.Bv();this.C.da=cw;this.C.set_fillColor(K.rw);this.C.ib='y';this.C.aX=nP;for(L=0;L<aT.jf.length;L++){var bQ=aT.jf[L];var EI=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Highlight);var Ay=bQ.C.eT();EI.set_fillColor(K.rw);EI.set_opacity(bQ.C.get_opacity());EI.set_rectangle(Ay);EI.aX=nP;EI.ib='y';this.K.en().addMark(EI);}aT.jf=[];if(cw>0){this.K.en().addMark(this.C);}K.lX().removeAllMarks();}cw=aT.jf.length;var ajX=new IPCC.Web.UI.TextSelectedEventArgs();ajX.text=K.Bv();K.aP('selectTextMouseToolCompleted',ajX);K.dh();this.af();};jT.prototype.nB=function(F){var as=this.K.fb();if(F.windowPoint.x<=0||F.windowPoint.x>=as.width-2){this.af();}if(F.windowPoint.y<=0||F.windowPoint.y>=as.height-2){this.af();}};jT.prototype.lO=function(){this.af();};module.exports=jT;},{}],52:[function(require,module,exports){var dE=function(){this.K=false;this.Ik=0;this.awz=1;this.aaL=2;this.abJ=3;};dE.prototype.mt=function(K){this.K=K;this.cS=this.Ik;};dE.prototype.ep=function(){this.K=false;};dE.prototype.af=function(){this.cS=this.Ik;};dE.prototype.aaP=function(F){var aBj=new Date()-this.aqi;if(aBj<750){var es=this.amo.x-F.windowPoint.x;var eo=this.amo.y-F.windowPoint.y;var gR=es*es+eo*eo;if(gR<2500){return true;}}return false;};dE.prototype.afs=function(F){this.aqi=new Date();this.amo=new IPCC.Web.UI.Point(F.windowPoint.x,F.windowPoint.y);};dE.prototype.Nd=function(F){var bw=F.domEvent.rawEvent;if(bw.touches.length===1){if(this.cS===this.aaL&&this.aaP(F)){this.cS=this.abJ;}else{this.cS=this.awz;}this.afs(F);this.K.he('lg',F);}else{this.cS=this.Ik;this.K.he('rS',F);}};dE.prototype.Np=function(F){var bw=F.domEvent.rawEvent;if(bw.touches.length===1){this.K.he('lA',F);}};dE.prototype.NV=function(F){var bw=F.domEvent.rawEvent;if(bw.touches.length===0){if(this.aaP(F)){if(this.cS===this.abJ){this.cS=this.Ik;this.K.he('jW',F);this.K.he('Al',F);}else{this.afs(F);this.cS=this.aaL;this.K.he('jW',F);}}else{this.cS=this.Ik;this.K.he('jW',F);}}};dE.prototype.Hh=function(F){this.K.he('rS',F);};module.exports=dE;},{}],53:[function(require,module,exports){var FS=function(ap,aM,hy,gW){IPCC.Web.UI.Rectangle.call(this,0,0,0,0);this.width=ap;this.height=aM;this.hy=hy;this.gW=gW;return this;};FS.prototype.toString=function(){return 'Space('+this.width+' x '+this.height+', '+this.hy+', '+this.gW+')';};module.exports=FS;},{}],54:[function(require,module,exports){var Ao=function(Ra){this.vr=(typeof(Ra)!=='undefined'&&Ra!==null&&Ra!=='')?[Ra.toString()]:[];this.G={};this.cr=0;};Ao.prototype.aGT=function(aS){this.vr[this.vr.length]=aS;};Ao.prototype.aGS=function(aS){this.vr[this.vr.length]=((typeof(aS)==='undefined')||(aS===null)||(aS===''))?'\r\n':aS+'\r\n';};Ao.prototype.aHz=function(){this.vr=[];this.G={};this.cr=0;};Ao.prototype.aIV=function(){if(this.vr.length===0){return true;}return this.toString()==='';};Ao.prototype.aIA=function(BK){BK=BK||'';var parts=this.vr;if(this.cr!==parts.length){this.G={};this.cr=parts.length;}var val=this.G;if(typeof(val[BK])==='undefined'){if(BK!==''){for(var i=0;i<parts.length;){if((typeof(parts[i])==='undefined')||(parts[i]==='')||(parts[i]===null)){parts.splice(i,1);}else{i++;}}}val[BK]=this.vr.join(BK);}return val[BK];};module.exports=Ao;},{}],55:[function(require,module,exports){var eE=function(K,rg){this.Sf=false;this.aaB=false;this.Eu=true;this.SC=false;this.Oi=false;this.xn=0;this.xM=0;var aj=this;this.awX='opacity';this.awk=function(dg){return dg.toString();};var anj=function anj(bq,eh,or,aQ,mV,nl){var gj;if(this.K.qk()===true){bq.xW.setAttribute('width',or.width);bq.xW.setAttribute('height',or.height);bq.tE.setAttribute('width',or.width);bq.tE.setAttribute('height',or.height);gj=eh.rj().toString()+','+eh.oM().toString()+','+eh.qz().toString()+','+eh.rN().toString()+','+(eh.xA()+mV).toString()+','+(eh.yw()+nl).toString();this.gq(bq.zf,'transform','matrix('+gj+')');}else{bq.xW.setAttribute('width',or.width);bq.xW.setAttribute('height',or.height);bq.tE.setAttribute('width',or.width);bq.tE.setAttribute('height',or.height);gj=eh.rj().toString()+','+eh.oM().toString()+','+eh.qz().toString()+','+eh.rN().toString()+','+(eh.xA()+mV).toString()+','+(eh.yw()+nl).toString();this.gq(bq.zf,'transform','matrix('+gj+')');}};function awx(bq){var pathList=bq.xW.getElementsByTagName('path');var gList=bq.xW.getElementsByTagName('g');bq.LF=[];function akp(pathItem,index){if(!pathItem.hasAttribute('data-pcc-mark')){if(pathItem.hasAttribute('stroke-width')||pathItem.style.strokeWidth){pathItem.originalStrokeWidth=pathItem.getAttribute('stroke-width')||pathItem.style.strokeWidth;bq.LF.push(pathItem);}}};IPCC.J.forEach(pathList,akp);IPCC.J.forEach(gList,akp);};this.agw=function(bq){var aT=K.aR();var aBZ=1;var mj=aT.axM();function setStrokeWidthToOriginalValue(pathItem,index){if(pathItem.hasAttribute('stroke-width')){pathItem.setAttribute('stroke-width',parseFloat(pathItem.originalStrokeWidth));}else{var strokeWidth=parseFloat(pathItem.originalStrokeWidth);pathItem.style.strokeWidth=strokeWidth;}};function updateStrokeWidthByLineWidthMultiplier(pathItem,index){if(pathItem.hasAttribute('stroke-width')){pathItem.setAttribute('stroke-width',parseFloat(pathItem.originalStrokeWidth*mj));}else{var strokeWidth=parseFloat(pathItem.originalStrokeWidth);pathItem.style.strokeWidth=strokeWidth*mj;}};if(bq.LF===undefined){awx(bq);}if(mj===aBZ){IPCC.J.forEach(bq.LF,setStrokeWidthToOriginalValue);}else{IPCC.J.forEach(bq.LF,updateStrokeWidthByLineWidthMultiplier);}aT.aBU(false);};function atE(bq,ae){bq.sp.setAttribute('exponent',ae);bq.rY.setAttribute('exponent',ae);bq.rJ.setAttribute('exponent',ae);};function atG(bq,ae){var auF=841;var mU=(ae/auF)* -1;var gj;if(IPCC.J.Ba){gj='{00} {01} {02} '+'{10} {11} {12} '+'{20} {21} {22}';gj=gj.replace('{00}',mU).replace('{01}',mU).replace('{02}',mU).replace('{10}',mU).replace('{11}',1).replace('{12}',mU).replace('{20}',mU).replace('{21}',mU).replace('{22}',mU);}else{gj='{00} {01} {02} {03} {04} '+'{10} {11} {12} {13} {14} '+'{20} {21} {22} {23} {24} '+'{30} {31} {32} {33} {34} '+'{40} {41} {42} {43} {44}';gj=gj.replace('{00}',0).replace('{01}',0).replace('{02}',0).replace('{03}',0).replace('{04}',0).replace('{10}',0).replace('{11}',mU).replace('{12}',mU).replace('{13}',mU).replace('{14}',0).replace('{20}',0).replace('{21}',mU).replace('{22}',1).replace('{23}',mU).replace('{24}',0).replace('{30}',0).replace('{31}',mU).replace('{32}',mU).replace('{33}',mU).replace('{34}',0).replace('{40}',0).replace('{41}',0).replace('{42}',0).replace('{43}',0).replace('{44}',0);}bq.kU.setAttribute('kernelMatrix',gj);};this.anW=function(bq){var aT=K.aR();var qQ=aT.aAj();var tc=aT.ayV();if(tc===0&&qQ===1){bq.zf.removeAttribute('filter','url(#'+bq.IX+')');}else{bq.zf.setAttribute('filter','url(#'+bq.IX+')');}atE(bq,qQ);atG(bq,tc);};var WU,XM;this.ahg=function(bq,eh,or,aQ,mV,nl){if(bq.XC.match('maglevel')){anj.apply(this,arguments);return;}var aL=bq.eD.parentElement.getBoundingClientRect();var kD=aL.width/aQ.width;var afp=function(val){return Math.abs(val)<1.0e-14;};var eL=0,fI=0;var ayv=function(){var qp=eh.oM();if(afp(qp)){qp=0;}var qR=eh.qz();if(afp(qR)){qR=0;}var avv=eh.rj();var gU=(qp>=0&&qR<0)?90:(qp<0&&qR>=0)?270:(avv<0)?180:(qp>=0&&qR>=0)?0:0;switch(gU){case 90:eL=aL.width;break;case 180:eL=aL.width;fI=aL.height;break;case 270:fI=aL.height;break;}return gU*(Math.PI/180);};var gU=ayv();if(parseInt(gU,10)===1||parseInt(gU,10)===4){kD=aL.height/aQ.width;}if(kD===WU&&gU===XM){return;}else{WU=kD;XM=gU;}var fv=1,iy=0;if(gU!==0){fv=Math.cos(gU);iy=Math.sin(gU);}var bn={kD:fv*kD,pA:fv*kD,qp:iy*kD,qR:iy* -1*kD,eL:eL,fI:fI};var ayA=new IPCC.fD(bn.kD,bn.qp,bn.qR,bn.pA,bn.eL,bn.fI);eh.OV(ayA);K.aR().je(eh);var gj='matrix({scaleX},{skewX},{skewY},{scaleY},{moveX},{moveY})';gj=gj.replace('{scaleX}',bn.kD).replace('{scaleY}',bn.pA).replace('{skewX}',bn.qp).replace('{skewY}',bn.qR).replace('{moveX}',bn.eL).replace('{moveY}',bn.fI);this.gq(bq.zf,'transform',gj);};this.aqU=function(){WU=undefined;XM=undefined;};this.ayk(K);this.arz=function(cB){var as=new IPCC.FS(cB.clientWidth,cB.clientHeight,96,96);return as;};this.anf=function(bw){bw.preventDefault();aj.lg(bw);};this.ans=function(bw){bw.preventDefault();aj.lA(bw);};this.ama=function(bw){bw.preventDefault();aj.jW(bw);};this.amW=function(bw){aj.lg(bw);};this.amw=function(bw){aj.Al(bw);};this.anE=function(bw){aj.lA(bw);};this.Su=function(bw){aj.lO(bw);};this.aoP=function(bw){aj.jW(bw);};this.acf=function(bw){aj.Al(bw);};this.aln=function(bw){aj.Vn(bw);};this.Nx=function(bw){if(bw.target!==document.activeElement){aj.awB(bw);}};this.ajH=function(bw){if(bw.target!==document.activeElement){aj.avm(bw);}};this.nB=function(bw){try{bw.preventDefault();var F=new IPCC.Web.UI.MouseEventArgs();F.domEvent=bw;aj.pU(F);K.aBr(F);}catch(ex){K.aK('mouseOut',ex);}};this.Nd=function(bw){try{bw.preventDefault();var F=new IPCC.Web.UI.MouseEventArgs();F.domEvent=bw;aj.pU(F);K.aCn(F);}catch(ex){K.aK('touchStart',ex);}};this.Np=function(bw){try{bw.preventDefault();var F=new IPCC.Web.UI.MouseEventArgs();F.domEvent=bw;aj.pU(F);K.aCy(F);}catch(ex){K.aK('touchMove',ex);}};this.NV=function(bw){try{bw.preventDefault();var F=new IPCC.Web.UI.MouseEventArgs();F.domEvent=bw;aj.pU(F);K.aCo(F);}catch(ex){K.aK('touchEnd',ex);}};this.Hh=function(bw){try{bw.preventDefault();var F=new IPCC.Web.UI.MouseEventArgs();F.domEvent=bw;aj.pU(F);K.aCa(F);}catch(ex){K.aK('touchCancel',ex);}};this.aly=function(bw){try{bw.preventDefault();}catch(ex){K.aK('dragStart',ex);}};this.awi=function(){var eG=K.pa().igElements.mo;IPCC.Web.UI.by.addHandler(eG,"mousewheel",this.Su);IPCC.Web.UI.by.addHandler(eG,"DOMMouseScroll",this.Su);if(rg){IPCC.Web.UI.by.addHandler(eG,"touchstart",this.Nd);IPCC.Web.UI.by.addHandler(eG,"touchmove",this.Np);IPCC.Web.UI.by.addHandler(eG,"touchend",this.NV);IPCC.Web.UI.by.addHandler(eG,"touchcancel",this.Hh);}IPCC.Web.UI.by.addHandler(eG,"mouseout",this.nB);IPCC.Web.UI.by.addHandler(eG,"dragstart",this.aly);};this.aCS=function(){var eG=K.pa().igElements.mo;IPCC.Web.UI.by.removeHandler(eG,"DOMMouseScroll",this.Su);IPCC.Web.UI.by.removeHandler(eG,"mouseout",this.nB);if(rg){IPCC.Web.UI.by.removeHandler(eG,"touchstart",this.Nd);IPCC.Web.UI.by.removeHandler(eG,"touchmove",this.Np);IPCC.Web.UI.by.removeHandler(eG,"touchend",this.NV);IPCC.Web.UI.by.removeHandler(eG,"touchcancel",this.Hh);}IPCC.Web.UI.by.removeHandler(eG,"dragstart",this.aly);};function asO(bq,jx){var qn=document.createElementNS('http://www.w3.org/2000/svg','filter');var IX='filter'+jx;bq.IX=IX;qn.setAttribute('id',IX);qn.setAttribute('x','0');qn.setAttribute('y','0');qn.setAttribute('filterUnits','objectBoundingBox');qn.setAttribute('color-interpolation-filters','sRGB');return qn;};function arE(jx){var kU=document.createElementNS('http://www.w3.org/2000/svg','feConvolveMatrix');kU.setAttribute('in','SourceGraphic');kU.setAttribute('result',jx+'kU');kU.setAttribute('preserveAlpha','true');if(IPCC.J.Ba){kU.setAttribute('order','3 3');kU.setAttribute('kernelMatrix','0 0 0 0 1 0 0 0 0');}else{kU.setAttribute('order','5 5');kU.setAttribute('kernelMatrix','0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0');}return kU;};function asl(jx){var pW=document.createElementNS('http://www.w3.org/2000/svg','feComponentTransfer');pW.setAttribute('in',jx+'kU');pW.setAttribute('result',jx+'pW');return pW;};function arA(jx){var sp=document.createElementNS('http://www.w3.org/2000/svg','feFuncR');sp.setAttribute('type','gamma');sp.setAttribute('amplitude','1');sp.setAttribute('exponent','1');sp.setAttribute('offset','0');var rY=document.createElementNS('http://www.w3.org/2000/svg','feFuncG');rY.setAttribute('type','gamma');rY.setAttribute('amplitude','1');rY.setAttribute('exponent','1');rY.setAttribute('offset','0');var rJ=document.createElementNS('http://www.w3.org/2000/svg','feFuncB');rJ.setAttribute('type','gamma');rJ.setAttribute('amplitude','1');rJ.setAttribute('exponent','1');rJ.setAttribute('offset','0');return{sp:sp,rY:rY,rJ:rJ};};function aCI(bq,jx){var Kg=document.createElementNS('http://www.w3.org/2000/svg','feMerge');var alA=document.createElementNS('http://www.w3.org/2000/svg','feMergeNode');var alk=document.createElementNS('http://www.w3.org/2000/svg','feMergeNode');alA.setAttribute('in',jx+'kU');alk.setAttribute('in',jx+'pW');Kg.appendChild(alA);Kg.appendChild(alk);return Kg;};this.arJ=function(bq,eD,sL,jx){var L,bE,cB,Yh;var LJ=function(bg,ds,ah){var cB=document.createElementNS('http://www.w3.org/2000/svg',bg);var L;if(ds){cB.setAttribute('id',ds);}for(L in ah){if(ah.hasOwnProperty(L)){cB.setAttribute(L,ah[L]);}}return cB;};var dV=LJ('svg',null,{xmlns:'http://www.w3.org/2000/svg',version:'1.1',xlink:'http://www.w3.org/1999/xlink','image-rendering':'optimizeQuality'});var qn=asO(bq,jx);bq.aHT=qn;var kU=arE(jx);bq.kU=kU;qn.appendChild(kU);var pW=asl(jx);bq.pW=pW;qn.appendChild(pW);var EB=arA();pW.appendChild(EB.sp);pW.appendChild(EB.rY);pW.appendChild(EB.rJ);bq.sp=EB.sp;bq.rY=EB.rY;bq.rJ=EB.rJ;var Kg=aCI(bq,jx);qn.appendChild(Kg);dV.appendChild(qn);bq.tE=LJ('rect',null,{x:0,y:0,'fill-opacity':'0.005',fill:'#808080'});dV.appendChild(bq.tE);var SS=LJ('g',null,{});bq.zf=SS;dV.appendChild(SS);var cr;if(K.qk()===false){cr=sL.fH.length;}else{cr=1;}for(L=0;L<cr;L++){bE=sL.fH[L];bE.pool.parentElementID=jx+L.toString();Yh=1/bE.dG;cB=LJ('g',bE.pool.parentElementID,{transform:'matrix('+Yh.toString()+',0,0,'+Yh.toString()+',0,0)'});SS.appendChild(cB);}bq.xW=dV;eD.appendChild(dV);};this.avy=function(ic){var aqy=this.acQ();ic.elementID=aqy;};this.ayt=function(ic){var cB=document.getElementById(ic.elementID);this.gq(cB,'display','none');};this.alP=function(ic){var cB=document.getElementById(ic.elementID);if(cB===null){ic.elementID='';return;}cB.setAttributeNS('http://www.w3.org/1999/xlink','href','');cB.parentNode.removeChild(cB);ic.elementID='';};var avW=function(bw){try{bw.target.onload=undefined;bw.target.onerror=undefined;bw.target.onabort=undefined;var ic=bw.target.poolItem;ic.loaded=true;aj.AN();}catch(ex){K.aK('downloadImage',ex);}};var alq=function(bw){try{bw.target.onload=undefined;bw.target.onerror=undefined;bw.target.onabort=undefined;bw.target.setAttributeNS('http://www.w3.org/1999/xlink','href','');bw.target.setAttribute('display','none');throw new IPCC.Web.UI.ImGearException('An image failed to download or the user cancelled it',{name:'IPCC.Web.UI.ImGearHttpException'});}catch(ex){K.aK('downloadImage',ex);var dn=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dn.exception=ex;dn.pageNumber=K.aO;K.aP('pageOpenFailed',dn);}};this.aAE=function(zx){var L;var cr=zx.length;if(K.qk()===false){cr=zx.length;}else{cr=1;}for(L=0;L<cr;L++){var dW=zx[L];var cB=document.getElementById(dW.poolItem.elementID);if(cB===null){var ic=dW.poolItem;var Ql=ic.pool;var eD=document.getElementById(Ql.parentElementID);cB=document.createElementNS('http://www.w3.org/2000/svg','image');this.gq(cB,'id',ic.elementID);this.gq(cB,'externalResourcesRequired','true');cB.poolItem=ic;cB.onload=avW;cB.onerror=alq;cB.onabort=alq;if(document.documentMode>8||IPCC.J.tG.Ai){ic.loaded=true;}cB.setAttributeNS('http://www.w3.org/1999/xlink','href','data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7');this.avL(cB,dW.url,'image/'+dW.contentType);eD.appendChild(cB);this.gq(cB,'display','block');var ap=dW.right-dW.x;var aM=dW.bottom-dW.y;this.gq(cB,'x',dW.x);this.gq(cB,'y',dW.y);this.gq(cB,'width',ap);this.gq(cB,'height',aM);if(cr>1){var ara=ap-dW.xH;var ard=aM-dW.wN;var KH=document.createElementNS('http://www.w3.org/2000/svg','clipPath');KH.id=cB.id+'_clip';var fo=document.createElementNS('http://www.w3.org/2000/svg','rect');this.gq(fo,'x',dW.x-dW.xH);this.gq(fo,'y',dW.y-dW.wN);this.gq(fo,'width',ara);this.gq(fo,'height',ard);this.gq(fo,'class','expand-on-print');KH.appendChild(fo);var insertBeforeElement=null;for(var i=0;i<eD.childNodes.length;i++){if(eD.childNodes.item(i).getAttribute('x')<dW.x||eD.childNodes.item(i).getAttribute('y')<dW.y){insertBeforeElement=eD.childNodes.item(i);break;}}eD.insertBefore(cB,insertBeforeElement);eD.appendChild(KH);this.gq(cB,'style','clip-path: url(#'+KH.id+')');this.gq(cB,'class','no-clip-on-print');}}this.gq(cB,'display','block');}if((document.documentMode>8||IPCC.J.tG.Ai)&&zx.length>0){aj.AN();}};this.avL=function(cB,bA,uZ){var sd=true;var mq=0;if(K.kQ()===0){sd=false;}function eZ(aC){var dC,dn;try{var eS=IPCC.Web.Iq(aC),YV;var nQ=aC.getResponseHeader("Accusoft-Data-Encrypted");if(nQ==='true'&&K.jj()===true){var ty=IPCC.Web.fR.sU.uG(aC.getResponseHeader("Accusoft-Data-SK"));var bD=IPCC.Web.Jw(ty,jw);var uN=IPCC.Web.El(eS,bD,jw);YV=IPCC.Web.fR.sU.nz(uN,0,0);}else{YV=IPCC.Web.fR.sU.nz(eS,0,0);}cB.setAttributeNS('http://www.w3.org/1999/xlink','href','data:'+uZ+';base64,'+YV);}catch(ex){dC="Image error, Error message = "+ex.message;dn=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dn.exception=ex;dn.pageNumber=K.aO;K.aP('pageOpenFailed',dn);throw new IPCC.Web.UI.ImGearArgumentException(null,dC);}};function fM(av){var gl=av.response.status,dC,lD,nn;if(!av.response){throw new IPCC.Web.UI.ImGearHttpException(gl,"Client Image load timeout");}if(gl===403){mq++;if(av.response.statusText&&av.response.statusText!==""){dC="Expired viewer session ID, error message from the server: "+av.response.statusText;}else{dC="Expired viewer session ID. No error text message was received from the server:";}throw new IPCC.Web.UI.ImGearHttpException(gl,dC);}lD=av.response.getResponseHeader('Accusoft-Status-Message');if(lD){var rU;nn=av.response.getResponseHeader('Accusoft-Status-Number');if(IPCC.Web.yE(nn)){rU=parseInt(nn,10);}throw new IPCC.Web.UI.ImGearHttpException(gl,lD,rU);}else{if(av.response.statusText&&av.response.statusText!==""){dC=av.response.statusText;}else{dC="HTTP Error was received from the image server but the server did not provide any error description.";}throw new IPCC.Web.UI.ImGearHttpException(gl,dC);}};var gT={method:'GET'};if(sd===true){gT.timeout=K.kQ();}if(K.azA()&&K.jj()===true){var jw=IPCC.Web.Gm.ahU(4);var pL=IPCC.Web.fR.Jp.nz(jw);var aEj=bA+'&iv='+pL;gT.url=aEj;}else{gT.mimeType='text/plain; charset=x-user-defined';gT.url=bA;}IPCC.J.oZ.fE(gT).then(eZ,fM);};this.aAr=function(bq){var V=this;if(bq.Wo){return;}var mq=0;var dW=bq.sL.fH[0].tiles[0];if(!dW){return;}var Ql=dW.level.pool;var eD=document.getElementById(Ql.parentElementID);var sd=true;if(K.kQ()===0){sd=false;}var ws=K.YQ();if(bq.Iu){if(ws===2){delete bq.Iu;if(eD.childNodes.length>0){eD.removeChild(eD.childNodes[0]);}}else if(ws===1){if(eD.childNodes.length>0){eD.removeChild(eD.childNodes[0]);}}else{if(eD.childNodes.length===0){eD.appendChild(bq.asI);}}K.xu=true;return;}if(ws>0){return;}function eZ(aC){var dn,dC;bq.Wo=false;try{try{var lM;var nQ=aC.getResponseHeader("Accusoft-Data-Encrypted");if(nQ==='true'&&K.jj()===true){var ty=IPCC.Web.fR.sU.uG(aC.getResponseHeader("Accusoft-Data-SK"));var bD=IPCC.Web.Jw(ty,jw);var eS=IPCC.Web.Iq(aC);var uN=IPCC.Web.El(eS,bD,jw);lM=IPCC.Web.fR.FT.nz(uN);}else{lM=aC.responseText;}ayp(lM);}catch(ex){dC="SVG image error, Error message = "+ex.message;dn=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dn.exception=ex;dn.pageNumber=K.aO;K.aP('pageOpenFailed',dn);throw new IPCC.Web.UI.ImGearArgumentException(null,dC);}}catch(e){K.aK('openPage',e);if(typeof(K.aP)==='function'){dn=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dn.exception=e;dn.pageNumber=K.aO;K.aP('pageOpenFailed',dn);}}};function fM(av){var dn,dC,lD,nn;bq.Wo=false;try{if(!av.response){throw new IPCC.Web.UI.ImGearHttpException(0,"Client SVG load timeout");}var gl=av.response.status;if(gl===480){mq++;if(av.response.statusText&&av.response.statusText!==""){dC=dC="PDF file password required, error message from the server: "+av.response.statusText;}else{dC="PDF file password required.";}throw new IPCC.Web.UI.ImGearHttpException(gl,dC);}if(gl===403){mq++;if(av.response.statusText&&av.response.statusText!==""){dC="Expired viewer session ID, error message from the server: "+av.response.statusText;}else{dC="Expired viewer session ID. No error text message was received from the server:";}throw new IPCC.Web.UI.ImGearHttpException(gl,dC);}lD=av.response.getResponseHeader('Accusoft-Status-Message');if(lD){var rU;nn=av.response.getResponseHeader('Accusoft-Status-Number');if(IPCC.Web.yE(nn)){rU=parseInt(nn,10);}throw new IPCC.Web.UI.ImGearHttpException(gl,lD,rU);}else{if(av.response.statusText&&av.response.statusText!==""){dC=av.response.statusText;}else{dC="HTTP Error was received from the image server but the server did not provide any error description.";}throw new IPCC.Web.UI.ImGearHttpException(gl,dC);}}catch(e){K.aK('openPage',e);if(typeof(K.aP)==='function'){dn=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dn.exception=e;dn.pageNumber=K.aO;K.aP('pageOpenFailed',dn);}}};var aqE=function(){var aT=K.aR();var zw=aT.aho();K.xu=true;K.aP('pageDisplayed',{bb:K.aO});if(zw){V.agw(bq);}};var ayp=function(gJ){var mn=Ql.parentElementID.toString();var MW=(IPCC.J.Ba||IPCC.J.Ye)?'':window.location.href.replace(window.location.hash,'').replace(/#$/,'');var we=IPCC.J.apC(gJ,MW,mn);var qu=we.querySelectorAll('style');IPCC.J.forEach(qu,function(au){var Gg=(au.styleSheet)?au.styleSheet.cssText:au.textContent;if(au.styleSheet){au.styleSheet.cssText=Gg;}else{au.appendChild(document.createTextNode(Gg));}});var la=null;var HF=we.firstChild;while(HF!==null){if(HF.nodeName==='svg'){la=HF;break;}HF=HF.nextSibling;}if(la===null){throw new IPCC.Web.UI.ImGearInvalidOperationException('Unable to process SVG image data.');}if(!bq.Iu){bq.asI=la;eD.appendChild(la);bq.Iu=true;if(!K.xu&&bq.Iu){setTimeout(aqE,1);}}};var bA;var jw,pL;K.xu=false;if(K.jj()===true){jw=IPCC.Web.Gm.Sn(4,IPCC.Web.Qw());pL=IPCC.Web.fR.Jp.nz(jw);bA=dW.url+'&iv='+pL;}else{bA=dW.url;}var gT={method:'GET',url:bA,cache:true};if(sd===true){gT.timeout=K.kQ();}bq.Wo=true;IPCC.J.oZ.fE(gT).then(eZ,fM);};this.asF=function(dW,dg){if(!dW){return;}var BH=document.getElementById(dW.poolItem.elementID);this.gq(BH,'x',dW.x);this.gq(BH,'y',dW.y);this.gq(BH,'width',dW.right-dW.x);this.gq(BH,'height',dW.bottom-dW.y);this.gq(BH,'opacity',dg);this.gq(BH,'display','block');};this.adD=function(zx,dg,eh){var L;if(K.qk()===false){for(L=0;L<zx.length;L++){this.asF(zx[L],dg);}}};return this;};eE.viewerCounter=0;eE.tileCounter=0;eE.imageIDCounter=0;eE.prototype.ayk=function(K){this.jx=IPCC.eE.viewerCounter.toString();IPCC.eE.viewerCounter++;this.K=K;if(IPCC.du){this.qH=new IPCC.Web.UI.MarkCollection();}var V=this;function aDb(aH,F){V.avq(F);};function yF(aH,F){V.axb(F);};K.kk(aDb);K.add_markAdded(yF);K.add_markChanged(yF);K.add_inProgressMarkChanged(yF);K.add_markRemoved(yF);K.add_markReordered(yF);K.add_marksLoaded(yF);K.add_markSelectionChanged(yF);K.add_markTextSelectionChanged(yF);};eE.prototype.acQ=function(){var ds='igtile'+IPCC.eE.tileCounter.toString();IPCC.eE.tileCounter++;return ds;};eE.prototype.AN=function(){this.Sf=true;this.Eu=this.Eu&&this.aaB;var V=this;var aDJ=function(){if(!V.Sf){return;}V.dh(V.K.bY(),V.K.aR(),V.K.fb());V.Eu=true;};window.setTimeout(aDJ,0);};eE.prototype.avq=function(F){var tY=F.get_propertyName();switch(tY){case 'magnifierWindowSize':case 'magnifierWindowPosition':case 'magnifierMagnification':if(!this.K.aR().get_magnifierIsVisible()){return;}break;case 'cursor':case 'markCursor':this.Fz=true;if(this.K.Aw()===true){this.AN();}return;case 'displayedPageRectangle':if(this.K.xu===true){this.AN();return;}break;case 'redactionDraftMode':this.Fz=true;this.AN();return;}if(this.K.Aw()===true){this.AN();}};eE.prototype.axb=function(F){if(F.mark&& !this.Fz){this.qH.addMark(F.mark);}else{this.Fz=true;}if(this.K.Aw()===true){this.AN();}};eE.prototype.abT=function(){this.jU=this.eh.clone();this.jU.nc(this.aio,this.aiy);this.jU.ke(this.K.bY(),this.K.fb());this.rV=this.jU.clone();this.rV.vu();};eE.prototype.dh=function(aG,aT,as){try{this.Sf=false;if(this.Na===true){return;}var dA=this.K.pa();if(dA===null){return;}var dp=dA.igElements;try{this.Na=true;if(this.HY===undefined||aG===undefined|| !(this.HY.equals(aG))){if(this.SC){if(this.iV){this.aCS(this.iV);var eG=dp.mo;IPCC.Web.UI.by.removeHandler(eG,"mousedown",this.amW);IPCC.Web.UI.by.removeHandler(eG,"mousemove",this.anE);IPCC.Web.UI.by.removeHandler(eG,"mouseup",this.aoP);IPCC.Web.UI.by.removeHandler(eG,"dblclick",this.acf);IPCC.Web.UI.by.removeHandler(eG,"contextmenu",this.aln);IPCC.Web.UI.by.removeHandler(dp.eH,"blur",this.Nx);IPCC.Web.UI.by.removeHandler(dp.gC,"blur",this.ajH);IPCC.Web.UI.by.removeHandler(dp.ct,"blur",this.Nx);}delete this.iV;this.aom(dp.qq);this.aom(dp.BB);this.SC=false;if(this.Gy!==undefined){this.Gy.unlockAllItems();}if(this.HJ!==undefined){this.HJ.unlockAllItems();}this.Gy=undefined;this.HJ=undefined;dA.igElements.oQ.onscroll=null;dA.igElements.oQ.onresize=null;}if(dA.querySelectorAll){if(dA.querySelectorAll(".pccPageLoadFail").length===0){dA.innerHTML='';}}this.K.pY(true);if(aG===undefined){this.Na=false;this.HY=undefined;this.aqU();return;}this.HY=aG.clone();this.Gy=new IPCC.tj();this.Gy.createPyramid(this,this.K);this.HJ=new IPCC.tj();this.HJ.createPyramid(this,this.K);this.SC=true;this.arB(this.jx);}this.eh=aT.fA();var QZ=this.eh.pJ(aG);this.eh.nc(-QZ.x,-QZ.y);this.ayK=this.eh.clone();this.ayK.vu();this.aio=Math.round(QZ.x);this.aiy=Math.round(QZ.y);this.abT();this.aoE(aG,aT,as);if(aG.aO===0){this.abT();}}finally{this.Na=false;this.Fz=false;if(this.qH){this.qH.removeAllMarks();}}this.adB(true);}catch(e){this.K.aK('display',e);throw e;}};eE.prototype.apn=function(xp,xI,xj){if(xp[xI]===xj){return;}xp[xI]=xj;};eE.prototype.gq=function(xp,xI,xj){if(xp.getAttribute(xI)===xj){return;}xp.setAttribute(xI,xj);};eE.prototype.zu=function(xp,xI,xj){if(xp.style[xI]===xj){return;}xp.style[xI]=xj;};eE.prototype.adB=function(apH){if(this.Na){return;}if(this.Sf&& !this.Eu){return;}if(!apH){try{this.aaB=true;var dA=this.K.pa();if(dA){this.xn=dA.igElements.oQ.scrollLeft;this.xM=dA.igElements.oQ.scrollTop;}this.anR();this.abT();this.K.aR().je(this.jU);this.K.aP('userModifiedViewState',{});this.K.pY(false);}finally{this.aaB=false;}}};eE.prototype.aCm=function(bq,eh,aDQ){var sL=bq.sL;var pD=sL.aCK(eh,aDQ);if(!this.K.xu&&pD.tilesToRequest.length===0&&(pD.opaqueTiles.length+pD.translucentTiles.length)>0){this.K.xu=true;this.K.aP('pageDisplayed',{bb:this.K.aO});}sL.azh(pD);if(this.K.qk()===false){this.aAE(pD.tilesToRequest);this.adD(pD.opaqueTiles,1,eh);this.adD(pD.translucentTiles,pD.opacity,eh);}};eE.prototype.arB=function(jx){var K=this.K;var dA=K.pa();var aT=K.aR();var aj=this;function gc(pG){var vy=document.createElement('div');var L;for(L in pG){if(pG.hasOwnProperty(L)){vy.style[L]=pG[L];}}return vy;};var dp={};dA.igElements=dp;var kb=gc({width:'100%',height:'100%',position:'relative',overflow:aT.get_overflow(),margin:'0px',borderWidth:'0px','-moz-user-select':'text','-webkit-user-select':'text'});dp.oQ=kb;kb.setAttribute('class','igViewerScroller');kb.onscroll=function(){aj.adB(false);};kb.onresize=function(){var as=K.fb();as.width=kb.clientWidth;as.height=kb.clientHeight;K.aP('resize',{});};var eG=gc({width:'2px',height:'2px',position:'relative',overflow:'hidden',margin:'0px',left:'0',top:'0','-ms-touch-action':'none'});kb.appendChild(eG);dp.mo=eG;eG.setAttribute('class','igViewerGraphics');this.AF=2;this.AS=2;this.xn=0;this.xM=0;var bq={};bq.sL=this.Gy;bq.XC='ig'+jx+'level';dp.qq=bq;this.afv(bq,eG,gc);bq.qo=this.qo;var lu;if(K.qk()===false){lu=gc({position:'absolute',display:'none',width:(aT.vi().width+4)+'px',height:(aT.vi().height+4)+'px',backgroundColor:'#000000'});}else{lu=gc({position:'absolute',display:'none',width:(aT.vi().width+4)+'px',height:(aT.vi().height+4)+'px',backgroundColor:'#cccccc'});}eG.appendChild(lu);dp.lu=lu;lu.setAttribute('class','igMagnifierFrame');var ra=gc({width:'0px',height:'0px',position:'absolute',overflow:'hidden',margin:'0px',left:'0',top:'0'});dp.ra=ra;lu.appendChild(ra);bq={};bq.sL=this.HJ;bq.XC='ig'+jx+'maglevel';dp.BB=bq;this.afv(bq,ra,gc);bq.qo=this.aAC;var Qm=document.createTextNode('');dp.Qm=Qm;var eH=document.createElement('textarea');eH.appendChild(Qm);eH.style.position='absolute';eH.style.overflow='auto';eH.style.width='80px';eH.style.height='80px';eH.style.resize='none';eH.style.display='none';kb.appendChild(eH);dp.eH=eH;var SM=document.createTextNode('');dp.SM=SM;var gC=document.createElement('input');gC.type="text";gC.style.position='absolute';gC.style.overflow='hidden';gC.style.width='80px';gC.style.height='80px';gC.style.resize='none';gC.style.display='none';gC.style.padding='0px';gC.style.margin='0px';gC.style.lineHeight='normal';gC.className="no-ms-clear";var akW=function(ev){var yz=gC,ap=parseFloat(yz.style['width']),aM=parseFloat(yz.style['height']),jB=yz.style['fontFamily'];var aus=yz.value.length>yz.placeholder.length?yz.value:yz.placeholder;var iZ=IPCC.J.tS(aus,jB,{tK:'pre',dV:dp.qq.xW}),wU=12*ap/(iZ.width||1),wG=12*aM/(iZ.height||1),xa=Math.floor(Math.min(wU,wG))*0.9;var ake=K.CQ();if(ake.fg){var dG=K.aR().fA().nX();var fg=ake.fg*dG;xa=Math.min(xa,fg);}yz.style.fontSize=xa+'px';};gC.onkeyup=akW;gC.onfocus=function(ev){akW(ev);if(gC.setSelectionRange){var gA=gC.value.length*2;gC.setSelectionRange(gA,gA);}};kb.appendChild(gC);dp.gC=gC;var pI=document.createTextNode('');dp.pI=pI;var ct=document.createElement('textarea');ct.appendChild(pI);ct.style.position='absolute';ct.style.overflow='hidden';ct.style.width='80px';ct.style.height='80px';ct.style.resize='none';ct.style.display='none';ct.style.whiteSpace='pre-wrap';ct.style.border=0;ct.style.padding='2px';ct.style.fontStyle='normal';var awO=function(ar){var atZ=K.CQ();var dG=K.aR().fA().nX();var fg=atZ.fg*dG;var bo=K.nZ().jp()*dG;IPCC.J.UO(ct,fg,bo);};ct.onkeyup=awO;kb.appendChild(ct);dp.ct=ct;this.iV={};this.awi(this.iV);IPCC.Web.UI.by.addHandler(eG,"mousedown",this.amW);IPCC.Web.UI.by.addHandler(eG,"mousemove",this.anE);IPCC.Web.UI.by.addHandler(eG,"mouseup",this.aoP);IPCC.Web.UI.by.addHandler(eG,"dblclick",this.acf);IPCC.Web.UI.by.addHandler(eG,"contextmenu",this.aln);IPCC.Web.UI.by.addHandler(eH,"blur",this.Nx);IPCC.Web.UI.by.addHandler(gC,"blur",this.ajH);IPCC.Web.UI.by.addHandler(ct,"blur",this.Nx);dA.appendChild(kb);};eE.prototype.afv=function(bq,eD,gc){var sV=gc({width:'2px',height:'2px',position:'absolute'});bq.eD=eD;eD.appendChild(sV);bq.ahc=sV;sV.setAttribute('class','igAnchor');this.arJ(bq,sV,bq.sL,bq.XC);bq.AI=gc({position:'absolute',width:'10px',height:'10px',left:'0px',top:'0px',overflow:'visible'});sV.appendChild(bq.AI);var ir=gc({overflow:'hidden',display:'none',position:'absolute',backgroundColor:'#00C0E0',border:'#006070 2px solid'});ir.style[this.awX]=this.awk(0.5);sV.appendChild(ir);bq.ir=ir;};eE.prototype.aom=function(bq){if(bq&&bq.Oi){bq.qo.aCA();bq.Oi=false;}bq.eD=null;};eE.prototype.aoE=function(aG,aT,as){var K=this.K;var nf=this.jU.pJ(aG);var dA=K.pa();var anF=K.axc();var zI=K.atm();var dp=dA.igElements;var qq=dp.qq;var BB=dp.BB;var kb=dp.oQ;var eG=dp.mo;var sV=qq.ahc;var lu=dp.lu;var ra=dp.ra;var agS=BB.ahc;var FB=Math.max(0,-nf.x);var FU=Math.max(0,-nf.y);var ayg=Math.max(nf.width,as.width);var ayO=Math.max(nf.height,as.height);var mV=Math.max(0,nf.x);var nl=Math.max(0,nf.y);var aiY=false;var FA=false;if(aT.Bs()){FA=aT.vY();}var aFC=this.AF;this.AF=Math.floor(ayg-1);if(this.AF<0){this.AF=0;}var aGg=this.AS;this.AS=Math.floor(ayO-1);if(this.AS<0){this.AS=0;}if(K.qk()===true){if(this.AS===0){this.AS=2;}if(this.AF===0){this.AF=2;}}var aGH=this.xn;var aEY=this.xM;if(!this.Eu){this.xn=Math.floor(FB);this.xM=Math.floor(FU);}if(this.afw){this.zu(sV,'left',mV+'px');this.zu(sV,'top',nl+'px');}var eh=aT.fA();eh.nc(FB-mV,FU-nl);this.agG(qq,aT.fA(),eh,aG,as,FA,mV,nl);this.zu(kb,'overflow',aT.get_overflow());if(as.width!==kb.clientWidth||as.height!==kb.clientHeight){as.width=kb.clientWidth;as.height=kb.clientHeight;aiY=true;}this.apn(sV.style,'visibility','visible');if(aT.get_magnifierIsVisible()){var vd=aT.get_magnifierWindowPosition();var yL=aT.vi();var Lq=aT.MH();var Mo=aT.Md();var QN=aT.azI();var atD=Math.round(vd.x-yL.width/2+FB+Lq);var atB=Math.round(vd.y-yL.height/2+FU+Mo);var MZ=QN.pJ(aG);var auo=Math.max(0,-MZ.x);var auI=Math.max(0,-MZ.y);this.zu(agS,'left',MZ.x+'px');this.zu(agS,'top',MZ.y+'px');var ND=2;lu.style.width=(yL.width+ND*2)+'px';lu.style.height=(yL.height+ND*2)+'px';ra.style.width=yL.width+'px';ra.style.height=yL.height+'px';ra.style.left=ND+'px';ra.style.top=ND+'px';lu.style.left=atD+'px';lu.style.top=atB+'px';var aaG=QN.clone();aaG.nc(auo,auI);this.agG(BB,QN,aaG,aG,yL,FA,0,0);lu.style.display='block';}else{lu.style.display='none';}if(K.afO()){var hV=K.CQ();var atS=hV.eT();var gr=this.jU.xz(atS);var mC=(hV.get_type()===IPCC.Web.UI.MarkType.Text)?64:0;var ahn=hV.fw* -1,ahl=hV.fw* -1;if(gr.width<mC){gr.width=mC;}if(gr.height<mC){gr.height=mC;}if(gr.width>as.width){gr.width=as.width;}if(gr.height>as.height){gr.height=as.height;}if(gr.x<0){gr.x=0;}if(gr.y<0){gr.y=0;}if(gr.x+gr.width+1>=as.width){gr.x=as.width-gr.width;ahn= -8;}if(gr.y+gr.height+1>=as.height){gr.y=as.height-gr.height;ahl= -8;}var iI=this.JP(hV);iI.style.left=this.xn+gr.x+1+(hV.fw/2)+'px';iI.style.top=this.xM+gr.y+1+(hV.fw/2)+'px';iI.style.width=gr.width+ahn-1+'px';iI.style.height=gr.height+ahl-1+'px';if(iI.style.display!=='block'){iI.style.display='block';iI.style.whiteSpace='pre-wrap';var sj=hV.cV;var rM='';if(sj&IPCC.Web.UI.FontStyle.Italic){iI.style.fontStyle="italic";}if(sj&IPCC.Web.UI.FontStyle.Bold){iI.style.fontWeight="bold";}if(sj&IPCC.Web.UI.FontStyle.Underline){rM+="underline";}if(sj&IPCC.Web.UI.FontStyle.Strikeout){if(sj&IPCC.Web.UI.FontStyle.Underline){rM+=" line-through";}else{rM="line-through";}}iI.style.textDecoration=rM;iI.style.color=hV.qP;if(hV.get_type()!==IPCC.Web.UI.MarkType.TextLine&&hV.get_type()!==IPCC.Web.UI.MarkType.TextAreaSignature){iI.style.backgroundColor=hV.cP;}iI.style.fontFamily=hV.gb;iI.style['z-index']=100;var xa=hV.Bd*this.jU.nX();if(xa){iI.style.fontSize=xa+"px";}switch(hV.im){case IPCC.Web.UI.HorizontalAlignment.Center:iI.style.textAlign='center';break;case IPCC.Web.UI.HorizontalAlignment.Right:iI.style.textAlign='right';break;default:iI.style.textAlign='left';break;}if(hV.hD){setTimeout(function(){dp.eH.maxLength=hV.hD;dp.gC.maxLength=hV.hD;dp.ct.maxLength=hV.hD;},0);}if(hV.hT){if(zI){zI.destroy();K.TP(null);}K.TP(new PCCViewer.ayl(iI,hV.hT));}if(hV.iJ()===IPCC.Web.UI.MarkType.TextAreaSignature){var ct=IPCC.J.ahu();ct.style.width=dp.ct.style.width;ct.style.height=dp.ct.style.height;ct.style.fontFamily=dp.ct.style.fontFamily;ct.style.fontStyle=dp.ct.style.fontStyle;ct.style.fontWeight=dp.ct.style.fontWeight;var dG=K.aR().fA().nX();var fg=hV.fg*dG;var bo=K.nZ().jp()*dG;IPCC.J.aiS().nodeValue=hV.aS||'m';dp.ct.style.fontSize=IPCC.J.UO(ct,fg,bo)+'px';}iI.focus();}}else{dp.eH.style.display='none';dp.gC.style.display='none';dp.ct.style.display='none';dp.eH.removeAttribute('maxlength');dp.gC.removeAttribute('maxlength');dp.ct.removeAttribute('maxlength');if(zI){zI.destroy();K.TP(null);}if(document.activeElement===dp.eH){dp.eH.blur();}if(document.activeElement===dp.gC){dp.gC.blur();}if(document.activeElement===dp.ct){dp.ct.blur();}}if(aiY){K.aP('resize',{});}if(this.AF!==aFC){this.zu(eG,'width','100%');}if(this.AS!==aGg){this.zu(eG,'height','100%');}if(this.xn!==aGH){kb.scrollLeft=this.xn;}if(this.xM!==aEY){kb.scrollTop=this.xM;}if(anF==="PageView"&& !this.Eu){aT=K.aR();var bn=aT.fA();var yg=(+bn.nX().toFixed(6));if(K.LA!==yg){K.LA=yg;setTimeout(function(){K.aP('scaleChanged',{scaleFactor:yg,pageNumber:K.aO});},1);K.aP('scaleChanged',{scaleFactor:yg,pageNumber:K.aO});}}};eE.prototype.agG=function(bq,jU,eh,aQ,as,FA,mV,nl){var nf=jU.pJ(aQ);var or={};or.width=Math.max(nf.width,as.width);or.height=Math.max(nf.height,as.height);this.aoa(bq,jU,eh,aQ,as,mV,nl);this.ahg(bq,eh,or,aQ,mV,nl);if(this.K.qk()===false){this.ahz(bq,as,jU,eh);}else{this.aAr(bq);var aT=this.K.aR();var zw=aT.aho();if(this.K.xu&&zw){this.agw(bq);}}this.anW(bq);if(FA){var Ep=eh.xz(FA);if(this.afw){bq.ir.style.left=(Ep.x-2)+'px';bq.ir.style.top=(Ep.y-2)+'px';}else{bq.ir.style.left=(Ep.x-2+mV)+'px';bq.ir.style.top=(Ep.y-2+nl)+'px';}bq.ir.style.width=Ep.width+'px';bq.ir.style.height=Ep.height+'px';bq.ir.style.display='block';}else{bq.ir.style.display='none';}};eE.prototype.ahz=function(bq,as,jU,eh){var aeV=this.K.axn();var Fn={x:0,y:0,width:as.width,height:as.height};if(aeV){var xy=aeV.getBoundingClientRect();var gw=bq.eD.getBoundingClientRect();var QV;if(gw.left<xy.left){QV=xy.left-gw.left;Fn.x=(QV/gw.width)*as.width;}if(gw.right>xy.right){Fn.width=xy.width;}if(gw.top<xy.top){QV=xy.top-gw.top;Fn.y=(QV/gw.height)*as.height;}if(gw.bottom>xy.bottom){Fn.height=xy.height;}}var rV=jU.clone();rV.vu();var aqA=rV.xz(Fn);this.aCm(bq,eh,aqA);};eE.prototype.aoa=function(bq,jU,eh,aQ,as,mV,nl){var aY=this.K.en();var fO=this.K.lX();var ec=this.K.Lk();var aaw=0;var V=this;if(bq.mO){aaw=bq.mO.length;}if(!bq.qo|| !aY){return;}var nN=this.K.azy();if(aY.get_markCount()<=0&&fO.get_markCount()<=0&&ec.get_markCount()<=0&&aaw<=0&& !nN){return;}if(!bq.Oi){bq.qo.arR(this.K,bq,aQ);bq.mO=[];bq.Oi=true;}fO=this.K.lX();var an=[];function aBm(C){if((V.K.kG()&&V.K.dr().oS()===true)||C.get_type()!==IPCC.Web.UI.MarkType.Highlight){an.push(C);}};function ajZ(C){an.push(C);};ec.forEachMark(ajZ);fO.forEachMark(ajZ);aY.forEachMark(aBm);if(nN){an.push(nN);}var L,mO=bq.mO;for(L=0;L<mO.length;L++){while(L<mO.length&&(L>=an.length||mO[L].C!==an[L])){bq.qo.MK(mO[L]);mO.splice(L,1);}if(L<mO.length&&(this.Fz||this.qH.contains(mO[L].C))){bq.qo.agM(mO[L]);}}for(L=mO.length;L<an.length;L++){mO[L]={C:an[L]};var H=mO[L];if(!H){continue;}bq.qo.auO(mO[L]);}if(this.afw){bq.qo.ahH(this.K,bq,an,eh,this.K.agR());}else{var adF=eh.clone();adF.nc(mV,nl);bq.qo.ahH(this.K,bq,an,adF,this.K.agR());}};eE.prototype.ahg=function(){};eE.prototype.anR=function(){var dA=this.K.pa();if(dA){this.aio=dA.igElements.mo.offsetLeft-this.xn;this.aiy=dA.igElements.mo.offsetTop-this.xM;}};eE.prototype.pU=function(F,dh){var hc=this.K.pa().igElements;var ii=F.domEvent;var fq;if(hc.mo.getBoundingClientRect){fq=hc.mo.getBoundingClientRect();}else{var fr=hc.mo;var wc=document.documentElement;fq={left:wc.clientLeft-wc.scrollLeft,top:wc.clientTop-wc.scrollTop};fr=fr.offsetParent;while(fr){fq.top+=fr.offsetTop-fr.scrollTop;fq.left+=fr.offsetLeft-fr.scrollLeft;fr=fr.offsetParent;}}if(ii.rawEvent.touches){if(ii.rawEvent.touches.length>0){this.NR=new IPCC.Web.UI.Point(ii.rawEvent.touches[0].clientX-hc.oQ.scrollLeft-fq.left,ii.rawEvent.touches[0].clientY-hc.oQ.scrollTop-fq.top);}if(!this.NR){this.NR=new IPCC.Web.UI.Point(0,0);}F.windowPoint=new IPCC.Web.UI.Point(this.NR.x,this.NR.y);ii.button=0;}else{F.windowPoint=new IPCC.Web.UI.Point(ii.clientX-fq.left-hc.oQ.scrollLeft,ii.clientY-fq.top-hc.oQ.scrollTop);}var RZ=this.rV.transform(F.windowPoint);F.imagePoint=new IPCC.Web.UI.Point(RZ.x,RZ.y);F.constrainedImagePoint=new IPCC.Web.UI.Point(RZ.x,RZ.y);F.constrainedImagePoint.x=Math.min(Math.max(F.constrainedImagePoint.x,0),this.HY.width);F.constrainedImagePoint.y=Math.min(Math.max(F.constrainedImagePoint.y,0),this.HY.height);F.pointLiesWithinImage=(F.constrainedImagePoint.x===F.imagePoint.x&&F.constrainedImagePoint.y===F.imagePoint.y);F.mark=null;try{var cq=ii.target;while(!(cq.ImGearMarkRelation)&&cq.parentNode&&cq!==document.body){cq=cq.parentNode;}if(cq.ImGearMarkRelation){F.mark=cq.ImGearMarkRelation.C;}}catch(bw){}};eE.prototype.lg=function(bw){try{bw.preventDefault();var F=new IPCC.Web.UI.MouseEventArgs();F.domEvent=bw;this.pU(F);this.K.aBq(F);}catch(ex){this.K.aK('mouseDown',ex);}};eE.prototype.lA=function(bw){try{bw.preventDefault();var F=new IPCC.Web.UI.MouseEventArgs();F.domEvent=bw;this.pU(F);this.K.aAY(F);}catch(ex){this.K.aK('mouseMove',ex);}};eE.prototype.lO=function(bw){try{var F=new IPCC.Web.UI.MouseEventArgs();F.domEvent=bw;this.pU(F);if(!bw.rawEvent.wheelDelta){F.wheelDelta= -bw.rawEvent.detail*120;}else{F.wheelDelta=bw.rawEvent.wheelDelta;}this.K.aBM(F);}catch(ex){this.K.aK('mouseWheel',ex);}};eE.prototype.Al=function(bw){try{bw.preventDefault();var F=new IPCC.Web.UI.MouseEventArgs();F.domEvent=bw;this.pU(F);this.K.aBz(F);}catch(ex){this.K.aK('mouseDoubleClick',ex);}};eE.prototype.jW=function(bw){try{bw.preventDefault();var F=new IPCC.Web.UI.MouseEventArgs();F.domEvent=bw;this.pU(F);this.K.aCj(F);}catch(ex){this.K.aK('mouseUp',ex);}};eE.prototype.Vn=function(bw){try{bw.preventDefault();var F=new IPCC.Web.UI.MouseEventArgs();F.domEvent=bw;this.pU(F);this.K.aBR(F);}catch(ex){this.K.aK('contextMenu',ex);}};eE.prototype.awB=function(bw){try{this.K.pY(true);}catch(ex){this.K.aK('textAreaBlur',ex);}};eE.prototype.avm=function(bw){try{this.K.pY(true);}catch(ex){this.K.aK('textInputBlur',ex);}};eE.prototype.azw=function(C){var eH=this.JP(C);eH.value=C.aS||"";};eE.prototype.aCX=function(){var K=this.K;var C=K.CQ();if(!C|| !K.afO()){return;}var Xw=this.JP(C);if(document.activeElement===Xw){Xw.blur();}var aS=Xw.value;aS=aS.replace(/(\n|\n\r|\r\n|\r)/g,'\n');C.set_text(aS);};eE.prototype.JP=function(C){var hc=this.K.pa().igElements,eH=null;if(C.get_type()===IPCC.Web.UI.MarkType.TextLine){eH=hc.gC;}else if(C.get_type()===IPCC.Web.UI.MarkType.TextAreaSignature){eH=hc.ct;}else if(C.get_type()===IPCC.Web.UI.MarkType.Text){eH=hc.eH;}return eH;};module.exports=eE;},{}],56:[function(require,module,exports){var By={};By.registerNamespace=function(namespacePath){var rootObject=window;var namespaceParts=namespacePath.split('.');var getTypeName=function(){return this.__typeName;};for(var i=0;i<namespaceParts.length;i++){var currentPart=namespaceParts[i];var ns=rootObject[currentPart];var nsType=typeof(ns);if((nsType!=="undefined")&&(ns!==null)){if(nsType==="function"){throw new Error("namespace error: "+namespacePath);}if((typeof(ns)!=="object")||(ns instanceof Array)){throw new Error("Name space error: "+ns);}}if(!ns){ns=rootObject[currentPart]={};}if(!ns.__namespace){ns.__namespace=true;ns.__typeName=namespaceParts.slice(0,i+1).join('.');ns.getName=getTypeName;}rootObject=ns;}};module.exports=By;},{}],57:[function(require,module,exports){var ImGearExceptions=require('./Web/UI/ImGearExceptions');var aI={bg:function(G,bz,bg){if(typeof(G)!==bg){throw new ImGearExceptions.ze(bz,typeof(G),bg);}},ku:function(G,bz){aI.bg(G,bz,'string');},iA:function(G,bz){if(!(G instanceof Date)){throw new ImGearExceptions.ze(bz,typeof(G),"Date");}},ih:function(G,bz){aI.bg(G,bz,'number');if(!isFinite(G)){throw new ImGearExceptions.rG(bz,G,'The value must be a number.');}},kd:function(G,bz,wp,vv){aI.bg(G,bz,'number');if(G<wp||G>vv|| !isFinite(G)){throw new ImGearExceptions.rG(bz,G,'The value must be a number between '+wp+' and '+vv+' inclusive.');}},UK:function(G,bz,GU){aI.bg(G,bz,'number');var L;for(L=0;L<GU.length;L++){if(G===GU[L]){return;}}var OU='';for(L=0;L<GU.length;L++){if(L>0){if(L===GU.length-1){OU+=' or ';}else{OU+=', ';}}OU+=GU[L];}throw new ImGearExceptions.rG(bz,G,'The value must be '+OU+'.');},nq:function(G,bz,wp,vv){aI.kd(G,bz,wp,vv);if(G!==Math.floor(G)){throw new ImGearExceptions.rE(bz,'The value must be an integer.');}},dR:function(G,bz){aI.bg(G,bz,'string');if(!G.match(/#[0-9A-Fa-f]{6}/)){throw new ImGearExceptions.rE(bz,'Colors must be strings that begin with a # symbol, followed by 6 hexadecimal digits.');}},aaH:function(G,bz){aI.bg(G,bz,'string');if(!G.match(/#[0-9A-Fa-f]{6}|transparent/)){throw new ImGearExceptions.rE(bz,'Colors must be strings that begin with a # symbol, followed by 6 hexadecimal digits or comply with other W3C accepted color values like "transparent".');}},ik:function(G,bz,ik,agf){aI.bg(G,bz,'number');var cG;var SV=0;for(cG in ik){if(ik.hasOwnProperty(cG)){if(agf){SV|=ik[cG];}else{if(G===ik[cG]){return;}}}}var dJ="";if(agf){if((G|SV)===SV){return;}else{throw new ImGearExceptions.rG(bz,G,'The value must be zero or more members of the '+dJ+' enumeration.');}}throw new ImGearExceptions.rG(bz,G,'The value must be a member of the '+dJ+' enumeration.');},bx:function(G,bz){aI.ih(G.x,bz+'.x');aI.ih(G.y,bz+'.y');},h:function(G,bz){aI.ih(G.x,bz+'.x');aI.ih(G.y,bz+'.y');aI.ih(G.width,bz+'.width');aI.ih(G.height,bz+'.height');},xb:function(G,bz){if(!Array.isArray(G)){throw new ImGearExceptions.rE(bz,'The value must be an array.');}}};module.exports=aI;},{"./Web/UI/ImGearExceptions":85}],58:[function(require,module,exports){var fi=require('./IPCC.Util').regEnum;var Df=function(){};Df.registerEnum=fi;Df.prototype={Document:0,EqualWidthPages:1,SinglePage:2,EqualFitPages:3};Df.registerEnum('IPCC.ViewMode',false);module.exports=Df;},{"./IPCC.Util":28}],59:[function(require,module,exports){var Xz=function(rg){var aT;var aG;var ij;var as;var aj=this;var Av;var BN='';var _debug=false;var nT=IPCC.Web.UI.DebugErrorLevel.Production;var nh=[];var bi=new IPCC.Web.UI.jc();var aY;var ec;var nN=null;var JS=false;var vo=false;var yH;var amT=IPCC.Web.UI.ImGearArtDataServices.None;var Jj=false;var tZ='';var qr;var afh=false;var adm=false;var ws=0;var sh=true;var jr;var fO;var wQ=false;var ajS=true,oI=false;var agW=false;var zI=null;var Qx;var ZN=false;var bu=null;this.LA=0.0;this.nR=function(JF){if(!_debug){return false;}return nT>=JF;};this.mb=function(kr,Kr,bE){IPCC.iG.mb(kr,Kr,bE,BN,Av);};this.aK=function(hN,iT){if(!this.nR(IPCC.Web.UI.DebugErrorLevel.Production)){return;}var cQ=hN+'() threw an exception ('+iT.name+'), "'+iT.message+'"';cQ=cQ.replace(/\n/g," ");this.mb(cQ,IPCC.Web.UI.DebugItemCause.Exception,IPCC.Web.UI.DebugErrorLevel.Production);aj.aP('exceptionThrown',{"function_name":hN,"exception":iT,"pageNumber":aj.aO});};this.JP=function(C){var hc=this.pa().igElements,eH=null;if(C.get_type()===IPCC.Web.UI.MarkType.TextLine){eH=hc.gC;}else if(C.get_type()===IPCC.Web.UI.MarkType.TextAreaSignature){eH=hc.ct;}else if(C.get_type()===IPCC.Web.UI.MarkType.Text){eH=hc.eH;}return eH;};this.get_debug=function(){return _debug;};this.set_debug=function(G){var Kh= ! !G;if(_debug===Kh){return;}_debug=Kh;this.dm('debug');};this.Ak=function(){return nT;};this.II=function(G){if(nT===G){return;}nT=G;this.dm('debugErrorLevel');};this.get_areMarksEditable=function(){return ZN;};this.set_areMarksEditable=function(G){if(ZN===G){return;}ZN=G;this.dm('areMarksEditable');};this.get_cursor=function(){return bu;};this.set_cursor=function(G){if(bu===G){return;}bu=G;this.dm('cursor');};this.aEH=function(G){BN=G;};this.axc=function(){return BN;};this.anT=function(G){Av=G;};this.aov=function(G){Qx=G;};this.axn=function(){return Qx;};this.eA=function(aws){this.pY(false);var L;for(L=nh.length-1;L>=0;L--){if(nh[L]instanceof IPCC.kC){nh[L].af(true);}else{nh[L].af();}if(nh[L]instanceof IPCC.ln){nh[L].ep(true);}else{nh[L].ep();}}nh=aws;for(L=0;L<nh.length;L++){nh[L].mt(this);}};this.aFf=function(){var L;for(L=0;L<nh.length;L++){nh[L].af();}};this.he=function(aaS,F){var L;for(L=0;L<nh.length;L++){if(F&&F.ajo&&F.ajo()){return;}if(nh[L][aaS]){nh[L][aaS](F);}}};this.aBJ=function(iF,di){switch(iF){case 'touchstart':ij.anf&&ij.anf(di);break;case 'touchmove':ij.ans&&ij.ans(di);break;case 'touchend':ij.ama&&ij.ama(di);break;case 'doubleTap':ij.amw&&ij.amw(di);break;}};this.kk=function(R){bi.addHandler('propertyChanged',R);};this.nv=function(R){bi.removeHandler('propertyChanged',R);};this.add_mouseDown=function(R){bi.addHandler('mouseDown',R);};this.remove_mouseDown=function(R){bi.removeHandler('mouseDown',R);};this.add_mouseMove=function(R){bi.addHandler('mouseMove',R);};this.remove_mouseMove=function(R){bi.removeHandler('mouseMove',R);};this.add_mouseUp=function(R){bi.addHandler('mouseUp',R);};this.remove_mouseUp=function(R){bi.removeHandler('mouseUp',R);};this.add_contextMenu=function(R){bi.addHandler('contextMenu',R);};this.remove_contextMenu=function(R){bi.removeHandler('contextMenu',R);};this.atV=function(R){bi.addHandler('contextMenuCommand',R);};this.aHk=function(R){bi.removeHandler('contextMenuCommand',R);};this.add_mouseWheel=function(R){bi.addHandler('mouseWheel',R);};this.remove_mouseWheel=function(R){bi.removeHandler('mouseWheel',R);};this.add_mouseOut=function(R){bi.addHandler('mouseOut',R);};this.remove_mouseOut=function(R){bi.removeHandler('mouseOut',R);};this.aAJ=function(R){bi.addHandler('resize',R);};this.aHo=function(R){bi.removeHandler('resize',R);};this.aAL=function(R){bi.addHandler('userModifiedViewState',R);};this.aJX=function(R){bi.removeHandler('userModifiedViewState',R);};this.add_scaleChanged=function(R){bi.addHandler('scaleChanged',R);};this.remove_scaleChanged=function(R){bi.removeHandler('scaleChanged',R);};this.add_markAdded=function(R){bi.addHandler('markAdded',R);};this.remove_markAdded=function(R){bi.removeHandler('markAdded',R);};this.add_markCreating=function(R){bi.addHandler('markCreating',R);};this.remove_markCreating=function(R){bi.removeHandler('markCreating',R);};this.add_markChanged=function(R){bi.addHandler('markChanged',R);};this.remove_markChanged=function(R){bi.removeHandler('markChanged',R);};this.add_inProgressMarkChanged=function(R){bi.addHandler('inProgressMarkChanged',R);};this.remove_inProgressMarkChanged=function(R){bi.removeHandler('inProgressMarkChanged',R);};this.add_markRemoved=function(R){bi.addHandler('markRemoved',R);};this.remove_markRemoved=function(R){bi.removeHandler('markRemoved',R);};this.add_markReordered=function(R){bi.addHandler('markReordered',R);};this.remove_markReordered=function(R){bi.removeHandler('markReordered',R);};this.add_marksLoaded=function(R){bi.addHandler('marksLoaded',R);};this.remove_marksLoaded=function(R){bi.removeHandler('marksLoaded',R);};this.add_marksSaved=function(R){bi.addHandler('marksSaved',R);};this.remove_marksSaved=function(R){bi.removeHandler('marksSaved',R);};this.add_markSelectionChanged=function(R){bi.addHandler('markSelectionChanged',R);};this.remove_markSelectionChanged=function(R){bi.removeHandler('markSelectionChanged',R);};this.add_markTextSelectionChanged=function(R){bi.addHandler('markTextSelectionChanged',R);};this.remove_markTextSelectionChanged=function(R){bi.removeHandler('markTextSelectionChanged',R);};this.add_pageOpenFailed=function(R){bi.addHandler('pageOpenFailed',R);};this.add_pageDisplayed=function(R){bi.addHandler('pageDisplayed',R);};this.remove_pageOpenFailed=function(R){bi.removeHandler('pageOpenFailed',R);};this.add_textPageReady=function(R){bi.addHandler('textPageReady',R);};this.remove_textPageReady=function(R){bi.removeHandler('textPageReady',R);};this.add_selectTextMouseToolCompleted=function(R){bi.addHandler('selectTextMouseToolCompleted',R);};this.remove_selectTextMouseToolCompleted=function(R){bi.removeHandler('selectTextMouseToolCompleted',R);};this.add_exceptionThrown=function(R){bi.cv('exceptionThrown',R);};this.remove_exceptionThrown=function(R){bi.cN('exceptionThrown',R);};this.add_textExtractionFailed=function(R){bi.cv('textExtractionFailed',R);};this.remove_textExtractionFailed=function(R){bi.cN('textExtractionFailed',R);};this.dm=function(cG,vJ){var R=bi.getHandler("propertyChanged");if(R){R(this,new IPCC.pR(cG,vJ));}};this.pa=function(){var _parent=document.getElementById(Av);return _parent;};this.aR=function(){return aT;};this.aIF=function(){return bi;};function Ez(aH,F){Jj=true;F.pageIndex=aj.aO;aj.aP('markAdded',F);aj.he('lU',F);};function Dv(aH,F){Jj=true;F.pageIndex=aj.aO;aj.aP('markChanged',F);aj.he('np',F);};function anv(aH,F){F=new IPCC.Web.UI.MarkEventArgs();F.mark=nN;F.pageIndex=aj.aO;aj.aP('inProgressMarkChanged',F);aj.he('_onInProgressMarkChanged',F);};function Dq(aH,F){Jj=true;F.pageIndex=aj.aO;aj.aP('markRemoved',F);aj.he('Dh',F);};function avQ(aH,F){aj.aP('textPageReady',F);};function avC(aH,F){aj.aP('textExtractionFailed',F);};function FJ(aH,F){Jj=true;F.pageIndex=aj.aO;aj.aP('markReordered',F);aj.he('acK',F);};function Et(aH,F){F.pageIndex=aj.aO;aj.aP('marksLoaded',F);aj.he('adv',F);};function GF(aH,F){F.pageIndex=aj.aO;aj.aP('markSelectionChanged',F);aj.he('DO',F);};function ady(aH,F){F.pageIndex=aj.aO;aj.aP('markTextSelectionChanged',F);};this.aBN=function(aH,F){this.he('_onTextMarkEditCompleted',F);};function BM(aH,F){F.pageIndex=aj.aO;aj.aP('propertyChanged',F);};this.mg=function(G){if(G===aY){return;}if(aY){aY.remove_markAdded(Ez);aY.remove_markChanged(Dv);aY.remove_markRemoved(Dq);aY.remove_markReordered(FJ);aY.remove_marksLoaded(Et);aY.remove_markSelectionChanged(GF);aY.nv(BM);aY.Db(true);}aY=G;if(aY){aY.add_markAdded(Ez);aY.add_markChanged(Dv);aY.add_markRemoved(Dq);aY.add_markReordered(FJ);aY.add_marksLoaded(Et);aY.add_markSelectionChanged(GF);aY.add_markTextSelectionChanged(ady);aY.kk(BM);}this.dm('artPage');};this.en=function(){return aY;};this.Kz=function(G){if(G===ec){return;}if(ec){ec.remove_markAdded(Ez);ec.remove_markChanged(Dv);ec.remove_markRemoved(Dq);ec.remove_markReordered(FJ);ec.remove_marksLoaded(Et);ec.remove_markSelectionChanged(GF);ec.nv(BM);ec.Db(true);}ec=G;if(ec){ec.add_markAdded(Ez);ec.add_markChanged(Dv);ec.add_markRemoved(Dq);ec.add_markReordered(FJ);ec.add_marksLoaded(Et);ec.add_markSelectionChanged(GF);ec.add_markTextSelectionChanged(ady);ec.kk(BM);}this.dm('documentArtPage');};this.Lk=function(){return ec;};this.lX=function(){return fO;};this.DC=function(G){if(G===fO){return;}if(fO){fO.remove_markAdded(Ez);fO.remove_markChanged(Dv);fO.remove_markRemoved(Dq);fO.remove_markReordered(FJ);fO.remove_marksLoaded(Et);fO.remove_markSelectionChanged(GF);fO.nv(BM);}fO=G;if(fO){fO.add_markAdded(Ez);fO.add_markChanged(Dv);fO.add_markRemoved(Dq);fO.add_markReordered(FJ);fO.add_marksLoaded(Et);fO.add_markSelectionChanged(GF);fO.kk(BM);}this.dm('transientArtPage');};var fQ;this.CD=function(){if(!fQ){if(IPCC.Web.UI.Mark){fQ=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Highlight);fQ.set_opacity(100);fQ.set_fillColor('#3366CC');fQ.set_fillVisible(true);}}return fQ;};this.Yn=function(G){amT=G;this.dm('artServiceOption');};this.Ru=function(){return amT;};this.nV=function(C,oc){if(nN===C){return;}if(nN){nN.remove_propertyChanged(anv);}if(C&& !nN){var F=new IPCC.Web.UI.MarkEventArgs();F.mark=oc?oc:C;F.pageIndex=this.aO;this.aP('markCreating',F);}nN=C;if(nN){nN.add_propertyChanged(anv);}this.dm('inProgressMark');};this.azy=function(){return nN;};this.yd=function(G){if(G===aG){return;}aG=G;this.xu=false;aT.oi();this.dm('image');};this.bY=function(){return aG;};this.aiG=function(G){if(G===JS){return;}JS=G;this.dm('JS');};this.agR=function(){return JS;};this.EO=function(){var yH=this.CQ();var alZ=this.JP(yH);var arM=alZ.value;setTimeout(function(){alZ.setSelectionRange(0,arM.length);},1);};this.wI=function(C){this.pY(false);ij.azw(C);vo=true;yH=C;this.dm('vo');};this.aci=function(bf,cw){if(this.kG()&&this.dr().oS()===true){var gP=this.dr().gs();var L=bf;for(;L<bf+cw;L++){var eU=gP.kI(L);var tN='#3366CC';var IO='#3366CC';fO.ZE(eU.aL,IO,tN,false,L);}}};this.aHx=function(ax){var L;try{var aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Highlight);if(!fQ){fQ=aj.CD();}for(L in fQ){if(fQ.hasOwnProperty(L)){aB[L]=fQ[L];}}aB.set_rectangle({x:ax.x,y:ax.y,width:ax.width,height:ax.height});aj.nV(aB);fO.addMark(aB);return aB;}catch(aDC){var atH=aDC.message;window.console.log(atH);}};this.Jk=function(bW){var BA;var gP;var QT;BA=aj.dr();gP=aj.dr().gs();function asm(RA){var sF=RA.rR();if((bW.x>=sF.x-10&&bW.x<=sF.x+sF.width+1)&&(bW.y>=sF.y-1&&bW.y<=sF.y+sF.height+1)){return true;}sF=undefined;};if(!QT){for(var L=0;L<gP.ej();L++){if(asm(gP.kI(L))){QT=L;break;}}}return QT;};this.aAk=false;this.zd=function(dH){if(dH===undefined){return;}if(aj.kG()&&aj.dr().oS()===true){var Ip=aj.dr().gs().ej();IPCC.aI.nq(dH,'textIndex',0,Ip);aj.aR().zd(dH);aj.lX().Cu(function(C){if(C.wq!==true&&C.get_type()!==IPCC.Web.UI.MarkType.ImageStampAnnotation){aj.lX().vD(C);}});if(aj.Aw()===true){aj.dh();}}};this.UN=function(){var Bw=aj.aR().get_transientHighlightMarks();while(Bw.length>0){aj.lX().removeMark(Bw.pop());}};this.KF=function(vg,cw){if(aj.kG()&&aj.dr().oS()===true){var L=vg;var gP=this.dr().gs();var dj=vg+cw;if(!fQ){fQ=aj.CD();}var Bw=aj.aR().get_transientHighlightMarks();for(;L<dj;L++){var eU=gP.kI(L);Bw.push(fO.aCG(eU.aL,fQ,L));}}};this.aHG=function(aHc,cw){var aT=aj.aR();for(var bj=cw-1;bj>cw;bj--){var bQ=aT.jf[bj];fO.removeMark(bQ.C);}};this.ud=function(dH){if(dH===undefined){return;}var eU;var aT=aj.aR();var gG=aT.Cj();var tN='#3366CC';var IO='#3366CC';var dg=100;if(!fQ){fQ=aj.CD();}dg=fQ.get_opacity();if(!dg){dg=100;}tN=fQ.get_fillColor();if(tN===undefined){tN='#3366CC';}var gP=aj.dr().gs();if(gG===undefined){eU=gP.kI(dH);var C=fO.ZE(eU.aL,IO,tN,false,dg,dH);aT.ud(dH,C,eU.kl);return;}var bj;function alr(aD,asH){for(bj=aT.jf.length-1;bj>=0;bj--){var bQ=aT.jf[bj];if(bQ.dH===aD){aT.jf.splice(bj,1);fO.removeMark(bQ.C);aT.aCu(asH);aT.aoG(aD);return bj;}}return-1;};function QX(aD){eU=gP.kI(aD);var ahF=fO.ZE(eU.aL,IO,tN,false,dg,aD);if(aT.ud(aD,ahF,eU.kl)===false){fO.removeMark(ahF);}};var Rq=aT.afW();var L;if(dH>gG){for(L=gG;L<=dH;L++){if(L===dH){if(L<Rq){continue;}QX(L);}else if(L>=Rq){if(L===gG){continue;}QX(L);}else{alr(L,dH);}}}else if(dH<gG){for(L=gG;L>=dH;L--){if(L===dH){if(L>=Rq){continue;}QX(L);}else if(L<Rq){if(L===gG){continue;}QX(L);}else{alr(L,dH);}}}};this.Bv=function(){var aeC="";try{var aT=aj.aR();if(aj.aR().IQ()){var apK=aj.dr().gs();if(aT.jf.length>0){var ED=[];for(var L=0;L<aT.jf.length;L++){ED.push(aT.jf[L].dH);}if(ED[0]>ED[1]){ED.reverse();}for(L=0;L<ED.length;L++){aeC+=apK.kI(ED[L]).awL();}}}return aeC;}catch(e){window.console.log(e.message);}};this.pY=function(aDc){if(vo){if(aDc){ij.aCX();}vo=false;yH=null;this.aBN();this.dm('vo');aj.dh();}};this.afO=function(){return vo;};this.CQ=function(){return yH;};this.CP=function(){var yH=this.CQ();if(!yH){return null;}var UU=yH.iJ();if(UU===IPCC.Web.UI.MarkType.TextLine){return 'singleline';}else if(UU===IPCC.Web.UI.MarkType.TextAreaSignature){return 'multiline';}else if(UU===IPCC.Web.UI.MarkType.Text){return 'multiline';}};this.alQ=function(G){adm=G;};this.abQ=function(){return adm;};this.TP=function(G){zI=G;};this.atm=function(){return zI;};this.adY=function(G){if(G===ws){return;}ws=G;this.dm('ws');};this.YQ=function(){return ws;};this.Db=function(G){if(aY){aY.Db(G);}};this.Lu=function(){if(aY){return aY.Lu();}return true;};this.ayL=function(aJP){var as=ij.arz(this.pa());this.aoZ(as);};this.aoZ=function(G){if(G===as){return;}as=G;this.dm('windowSpace');};this.fb=function(){return as;};this.dh=function(){ij.dh(aG,aT,as);};this.KW=function(){if(this.qk()===false){var jU=aT.fA();var K=this;var nf=jU.pJ(aG);var dA=K.pa();var dp=dA.igElements;var bq=dp.qq;var FB=Math.max(0,-nf.x);var FU=Math.max(0,-nf.y);var mV=Math.max(0,nf.x);var nl=Math.max(0,nf.y);var eh=aT.fA();eh.nc(FB-mV,FU-nl);ij.ahz(bq,as,jU,eh);}};this.Kf=function(G){qr=G;};this.vM=function(){return qr;};this.dr=function(){return jr.dr();};var lZ=0;this.nZ=function(){return jr;};this.DK=function(G){if(G===this.nZ()){return;}jr=G;if(jr){jr.yW(avQ);jr.yI(avC);}};this.kG=function(){return sh;};this.Je=function(G){sh=G;this.dm('textRequired');};this.BE=function(){return wQ;};this.JK=function(G){if(wQ===G){return;}wQ=G;this.dm('requireRequestsOptimize');};this.Aw=function(){return ajS;};this.SX=function(G){ajS=G;this.dm('autoUpdate');};var rc=false;this.ni=function(){return rc;};this.om=function(G){if(typeof G!=="boolean"){return;}if(G===rc){return;}rc=G;if(aY){var alw=false;aY.forEachMark(function(C){if(C.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction){alw=true;}});if(alw===true){aY.om(rc);}}};this.kQ=function(){return lZ;};this.yx=function(G){if(lZ===G){return;}if(isNaN(G)){return;}lZ=G;this.dm('serviceResponseTimeout');};var nG='';this.Xj=function(eN,aV){if(eN!==''){eN='/'+eN;}aV=aV||'';if(aV===null||aV===''){if(eN==='/Attributes'){if(/^[\x00-\x7F]*$/.test(aG.get_identifier())){return nG+'/Page/q/'+aG.aO.toString()+eN+'?DocumentID=u'+encodeURIComponent(aG.get_identifier());}else{return nG+'/Page/q/'+aG.aO.toString()+eN+'?DocumentID=e'+aG.get_encodedIdentifier();}}else{if(/^[\x00-\x7F]*$/.test(aG.get_identifier())){return nG+'/Page/q/'+aG.aO.toString()+eN+'?DocumentID=u'+encodeURIComponent(aG.get_identifier())+'&Quality=85&ContentType=jpeg';}else{return nG+'/Page/q/'+aG.aO.toString()+eN+'?DocumentID=e'+aG.get_encodedIdentifier()+'&Quality=85&ContentType=jpeg';}}}else{if(/^[\x00-\x7F]*$/.test(aG.get_identifier())){return nG+'/Page/q/'+aG.aO.toString()+eN+'?DocumentID=u'+encodeURIComponent(aG.get_identifier())+'&'+aV;}else{return nG+'/Page/q/'+aG.aO.toString()+eN+'?DocumentID=e'+aG.get_encodedIdentifier()+'&'+aV;}}};this.aAo=function(eN,aV){eN=eN||'Art';aV=aV||'';if(aV===null||aV===''){if(eN==='Art'){return nG+'/Page/q/'+aG.aO.toString()+'/'+eN+'?DocumentID=e'+aG.get_encodedIdentifier();}}else{return nG+'/Page/q/'+aG.aO.toString()+'/'+eN+'?DocumentID=e'+aG.get_encodedIdentifier()+'&'+aV;}};this.Ti=function(GB){if(Jj===false){if(GB){GB();}return;}IPCC.J.oZ.fE({method:'POST',url:this.aAo('Art'),headers:{'Content-Type':'application/json'},body:aY.saveToJson()}).then(function(){if(GB){GB();}});};this.uT=function(){return nG;};this.abL=function(G){nG=G;this.dm('imageHandlerUrl');};this.qk=function(){return afh;};this.RE=function(G){afh=G;};this.azA=function(){return agW;};this.ajh=function(G){agW=G;};this.oe=function(){return tZ;};this.uY=function(G){tZ=G;tZ.tabIndex= -1;};this.jj=function(){return oI;};this.nC=function(G){if(typeof G!=="boolean"){return;}if(G===oI){return;}oI=G;};this.aBq=function(F){if(vo){this.pY(true);}else{this.aP('mouseDown',F);this.he('lg',F);}};this.aAY=function(F){this.aP('mouseMove',F);this.he('lA',F);};this.aCj=function(F){this.aP('mouseUp',F);this.he('jW',F);};this.aBM=function(F){this.aP('mouseWheel',F);this.he('lO',F);};this.aBz=function(F){this.aP('mouseDoubleClick',F);this.he('Al',F);};this.aBR=function(F){this.aP('contextMenu',F);this.he('Vn',F);};this.aBn=function(F){this.aP('contextMenuCommand',F);};this.aBr=function(F){this.aP('mouseOut',F);this.he('nB',F);};this.aCn=function(F){this.aP('touchStart',F);this.he('lg',F);};this.aCy=function(F){this.aP('touchMove',F);this.he('lA',F);};this.aCo=function(F){this.aP('touchEnd',F);this.he('jW',F);};this.aCa=function(F){this.aP('touchCancel',F);this.he('Hh',F);};this.aP=function(dQ,F){var R=bi.getHandler(dQ);if(R!==null){R(aj,F);}};var ahN=function(K,rg){aT=new IPCC.Yl();function AR(aH,F){aj.aP('propertyChanged',F);};aT.kk(AR);ij=new IPCC.eE(K,rg);if(IPCC.du){ij.qo=new IPCC.du.dM(K);ij.aAC=new IPCC.du.dM(K);}};if(rg===false){ahN(this,false);}else{ahN(this,true);}return this;};module.exports=Xz;},{}],60:[function(require,module,exports){var Yl=function(){var tc=0;var qQ=1;var mj=1;var zw=false;var bX=new IPCC.fD();var DR=false;var tC;var pK;var LH=false;var CI=new IPCC.FS(200,150,96,96);var vd={x:0,y:0};var KP=3;var Lq=0,Mo=0;var gI=0.2;var sA=IPCC.Web.UI.MarkHandleMode.HideSideHandlesWhenClose;var BQ=new IPCC.fD();var IM=0;var Kw=0;var CY=false;var aao;this.jf=[];var abN=IPCC.Web.UI.ScrollBars.Auto;var Bw=[];this.get_transientHighlightMarks=function(){return Bw;};this.get_scrollBars=function(){return abN;};this.get_overflow=function(){switch(abN){case IPCC.Web.UI.ScrollBars.None:return 'hidden';case IPCC.Web.UI.ScrollBars.Both:return 'scroll';}return 'auto';};this.set_scrollBars=function(G){abN=G;this.dm('scrollBars');};var bi=new IPCC.Web.UI.jc();this.kk=function(R){bi.addHandler('propertyChanged',R);};this.nv=function(R){bi.removeHandler('propertyChanged',R);};this.dm=function(cG){var R=bi.getHandler('propertyChanged');if(R){R(this,new IPCC.pR(cG));}};var onSelectionChanged=function(aT){var F={};F.selectionIsVisible=DR;F.selectionRectangle=aT.vY();aT.dm('selection');};this.oi=function(){tC={x:0,y:0};pK={x:0,y:0};if(!DR){return;}DR=false;onSelectionChanged(this);};this.showSelection=function(ed){tC.x=ed.x;tC.y=ed.y;pK.x=ed.x+ed.width;pK.y=ed.y+ed.height;DR=true;onSelectionChanged(this);};this.Dp=function(bW){tC.x=bW.x;tC.y=bW.y;pK.x=bW.x;pK.y=bW.y;DR=true;onSelectionChanged(this);};this.zP=function(bW){pK.x=bW.x;pK.y=bW.y;onSelectionChanged(this);};this.Bs=function(){return DR;};this.vY=function(){var h=new IPCC.Web.UI.Rectangle(Math.min(tC.x,pK.x),Math.min(tC.y,pK.y),0,0);h.width=Math.max(tC.x,pK.x)-h.x;h.height=Math.max(tC.y,pK.y)-h.y;return h;};var EP=function(){if(!LH){BQ.anz();return;}BQ.OV(bX);BQ.nc(-vd.x,-vd.y);BQ.scale(KP,KP);BQ.nc(CI.width/2,CI.height/2);};this.hideMagnifier=function(){LH=false;EP();this.dm('magnifierIsVisible');};this.showMagnifier=function(dw){vd.x=dw.x;vd.y=dw.y;LH=true;EP();this.dm('magnifierWindowPosition');this.dm('magnifierIsVisible');};this.get_magnifierIsVisible=function(){return LH;};this.get_magnifierWindowPosition=function(){return{x:vd.x,y:vd.y};};this.get_magnifierMagnification=function(){return KP;};this.set_magnifierMagnification=function(G){KP=G;EP();this.dm('magnifierMagnification');};this.MH=function(){return Lq;};this.Ub=function(G){Lq=G;this.dm('magnifierXOffset');};this.Md=function(){return Mo;};this.aas=function(G){Mo=G;this.dm('magnifierYOffset');};this.vi=function(){return{width:CI.width,height:CI.height};};this.set_magnifierWindowSize=function(newMagnifierSize){CI.width=newMagnifierSize.width;CI.height=newMagnifierSize.height;EP();this.dm('magnifierWindowSize');};this.azI=function(){return BQ.clone();};this.fA=function(){return bX.clone();};this.Yb=function(){return gI;};this.Xc=function(G){gI=G;this.dm('markHandleSize');};this.AE=function(){return sA;};this.Ie=function(G){sA=G;this.dm('markHandleMode');};this.je=function(G){if(G===bX||G.aup(bX)){return;}if(!G.agJ()){throw new IPCC.Web.UI.ImGearInvalidOperationException('The viewing state of the control is invalid.');}bX.OV(G);EP();this.dm('displayedPageRectangle');};var aew='0';this.get_presentationQuality=function(){return aew;};this.set_presentationQuality=function(G){aew=G;this.dm('presentationQuality');};this.aAj=function(){return qQ;};this.Gi=function(G){qQ=G;};this.ayV=function(){return tc;};this.DZ=function(G){tc=G;};this.axM=function(){return mj;};this.DF=function(G){if(G!==mj){zw=true;}mj=G;};this.aBU=function(G){zw=G;};this.aho=function(){return zw;};var Zw=IPCC.aa.Default;this.aJn=function(){return Zw;};this.aoR=function(G){if(Zw!==G){Zw=G;this.dm('markCursor');}};this.zd=function(dH){IM=dH;CY=false;Kw=0;};this.KF=function(vg,cw){if(vg!==IM){IM=vg;}Kw=cw;CY=true;};this.aac=function(){if(CY===true){for(var L=0;L<this.jf.length;L++){this.jf[L].C.set_visible(false);}CY=false;}};this.IQ=function(){return CY;};this.ud=function(dH,C,kl){aao=dH;if(dH!==undefined){if(this.jf.length>0&&this.jf[this.jf.length-1].dH===dH){return false;}this.jf.push({dH:dH,C:C,kl:kl});CY=true;Kw++;}else{this.jf=[];Kw=0;}return true;};this.Cj=function(){return aao;};this.aCu=function(G){if(G===undefined){return;}aao=G;};var aev;this.aIc=function(){return aev;};this.aoG=function(G){if(G===undefined){return;}aev=G;};this.afW=function(){return IM;};this.aHf=function(){return IM+Kw;};this.AY=function(){return this.jf.length;};this.oi();this.hideMagnifier();return this;};module.exports=Yl;},{}],61:[function(require,module,exports){var Bf={};Bf.ail=function(bD){if(!this.Er[0][0][0]){this.Rf();}var L,bj,eC,IW,Ya,kX=this.Er[0][4],tp=this.Er[1],tm=bD.length,Lf=1;if(tm!==4&&tm!==6&&tm!==8){throw new IPCC.Web.UI.ImGearArgumentException('none',"invalid aes key size");}this.bD=[IW=bD.slice(0),Ya=[]];for(L=tm;L<4*tm+28;L++){eC=IW[L-1];if(L%tm===0||(tm===8&&L%tm===4)){eC=kX[eC>>>24]<<24^kX[eC>>16&255]<<16^kX[eC>>8&255]<<8^kX[eC&255];if(L%tm===0){eC=eC<<8^eC>>>24^Lf<<24;Lf=Lf<<1^(Lf>>7)*283;}}IW[L]=IW[L-tm]^eC;}for(bj=0;L;bj++,L--){eC=IW[bj&3?L:L-4];if(L<=4||bj<4){Ya[bj]=eC;}else{Ya[bj]=tp[0][kX[eC>>>24]]^tp[1][kX[eC>>16&255]]^tp[2][kX[eC>>8&255]]^tp[3][kX[eC&255]];}}};Bf.ail.prototype={Xo:function(cX){return this.arC(cX,1);},Er:[[[],[],[],[],[]],[[],[],[],[],[]]],Rf:function(){var Mp=this.Er[0],tp=this.Er[1],kX=Mp[4],aEp=tp[4],L,bm,yu,dU=[],ald=[],Sq,aiE,aia,iy,Qc,NY;for(L=0;L<256;L++){ald[(dU[L]=L<<1^(L>>7)*283)^L]=L;}for(bm=yu=0;!kX[bm];bm^=Sq||1,yu=ald[yu]||1){iy=yu^yu<<1^yu<<2^yu<<3^yu<<4;iy=iy>>8^iy&255^99;kX[bm]=iy;aEp[iy]=bm;aia=dU[aiE=dU[Sq=dU[bm]]];NY=aia*0x1010101^aiE*0x10001^Sq*0x101^bm*0x1010100;Qc=dU[iy]*0x101^iy*0x1010100;for(L=0;L<4;L++){Mp[L][bm]=Qc=Qc<<24^Qc>>>8;tp[L][iy]=NY=NY<<24^NY>>>8;}}for(L=0;L<5;L++){Mp[L]=Mp[L].slice(0);tp[L]=tp[L].slice(0);}},arC:function(pM,Js){if(pM.length!==4){throw new IPCC.Web.UI.ImGearArgumentException('blocksize','Invalid block size');}var bD=this.bD[Js],dz=pM[0]^bD[0],eJ=pM[Js?3:1]^bD[1],fv=pM[2]^bD[2],dU=pM[Js?1:3]^bD[3],uJ,aks,afC,avt=bD.length/4-2,L,Bb=4,eV=[0,0,0,0],Is=this.Er[Js],Ov=Is[0],PV=Is[1],Pl=Is[2],OE=Is[3],kX=Is[4];for(L=0;L<avt;L++){uJ=Ov[dz>>>24]^PV[eJ>>16&255]^Pl[fv>>8&255]^OE[dU&255]^bD[Bb];aks=Ov[eJ>>>24]^PV[fv>>16&255]^Pl[dU>>8&255]^OE[dz&255]^bD[Bb+1];afC=Ov[fv>>>24]^PV[dU>>16&255]^Pl[dz>>8&255]^OE[eJ&255]^bD[Bb+2];dU=Ov[dU>>>24]^PV[dz>>16&255]^Pl[eJ>>8&255]^OE[fv&255]^bD[Bb+3];Bb+=4;dz=uJ;eJ=aks;fv=afC;}for(L=0;L<4;L++){eV[Js?3& -L:L]=kX[dz>>>24]<<24^kX[eJ>>16&255]<<16^kX[fv>>8&255]<<8^kX[dU&255]^bD[Bb++];uJ=dz;dz=eJ;eJ=fv;fv=dU;dU=uJ;}return eV;}};module.exports=Bf;},{}],62:[function(require,module,exports){var fR={};fR.FT={nz:function(cY){var eV="",qM=IPCC.Web.hn.wM(cY),L,eC;for(L=0;L<qM/8;L++){if((L&3)===0){eC=cY[L/4];}eV+=String.fromCharCode(eC>>>24);eC<<=8;}return decodeURIComponent(escape(eV));},uG:function(dJ){dJ=unescape(encodeURIComponent(dJ));var eV=[],L,eC=0;for(L=0;L<dJ.length;L++){eC=eC<<8|dJ.charCodeAt(L);if((L&3)===3){eV.push(eC);eC=0;}}if(L&3){eV.push(IPCC.Web.hn.Jf(8*(L&3),eC));}return eV;}};fR.sU={yn:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nz:function(cY,awU,bA){var eV="",L,eS=0,fv=IPCC.Web.fR.sU.yn,ys=0,qM=IPCC.Web.hn.wM(cY);if(bA){fv=fv.substr(0,62)+'-_';}for(L=0;eV.length*6<qM;){eV+=fv.charAt((ys^cY[L]>>>eS)>>>26);if(eS<6){ys=cY[L]<<(6-eS);eS+=26;L++;}else{ys<<=6;eS-=6;}}while((eV.length&3)&& !awU){eV+="=";}return eV;},uG:function(dJ,bA){dJ=dJ.replace(/\s|=/g,'');var eV=[],L,eS=0,fv=IPCC.Web.fR.sU.yn,ys=0,bm;if(bA){fv=fv.substr(0,62)+'-_';}for(L=0;L<dJ.length;L++){bm=fv.indexOf(dJ.charAt(L));if(bm<0){throw new IPCC.Web.UI.ImGearArgumentException('base64','Invalid base64');}if(eS>26){eS-=26;eV.push(ys^bm>>>eS);ys=bm<<(32-eS);}else{eS+=6;ys^=bm<<(32-eS);}}if(eS&56){eV.push(IPCC.Web.hn.Jf(eS&56,ys,1));}return eV;}};fR.Jp={nz:function(cY){return IPCC.Web.fR.sU.nz(cY,1,1);},uG:function(dJ){return IPCC.Web.fR.sU.uG(dJ,1);}};module.exports=fR;},{}],63:[function(require,module,exports){var qA={};qA.WJ=function(qA){if(!this.bD[0]){this.Rf();}if(qA){this.eQ=qA.eQ.slice(0);this.zg=qA.zg.slice(0);this.cw=qA.cw;}else{this.aes();}};qA.WJ.qA=function(cX){return(new IPCC.Web.qA.WJ()).anA(cX).awA();};qA.WJ.prototype={aHX:512,aes:function(){this.eQ=this.ajx.slice(0);this.zg=[];this.cw=0;return this;},anA:function(cX){if(typeof cX==="string"){cX=IPCC.Web.Codec.FT.uG(cX);}var L,eJ=this.zg=IPCC.Web.hn.Vp(this.zg,cX),ako=this.cw,avk=this.cw=ako+IPCC.Web.hn.wM(cX);for(L=512+ako& -512;L<=avk;L+=512){this.oE(eJ.splice(0,16));}return this;},awA:function(){var L,eJ=this.zg,eQ=this.eQ;eJ=IPCC.Web.hn.Vp(eJ,[IPCC.Web.hn.Jf(1,1)]);for(L=eJ.length+2;L&15;L++){eJ.push(0);}eJ.push(Math.floor(this.cw/0x100000000));eJ.push(this.cw|0);while(eJ.length){this.oE(eJ.splice(0,16));}this.aes();return eQ;},ajx:[],bD:[],Rf:function(){var L=0,FG=2,ae;function acL(bm){return(bm-Math.floor(bm))*0x100000000|0;};aww:for(;L<64;FG++){for(ae=2;ae*ae<=FG;ae++){if(FG%ae===0){continue aww;}}if(L<8){this.ajx[L]=acL(Math.pow(FG,1/2));}this.bD[L]=acL(Math.pow(FG,1/3));L++;}},oE:function(apF){var L,eC,dz,eJ,jS=apF.slice(0),eQ=this.eQ,cg=this.bD,WK=eQ[0],sa=eQ[1],JB=eQ[2],Ng=eQ[3],sy=eQ[4],MD=eQ[5],FQ=eQ[6],abG=eQ[7];for(L=0;L<64;L++){if(L<16){eC=jS[L];}else{dz=jS[(L+1)&15];eJ=jS[(L+14)&15];eC=jS[L&15]=((dz>>>7^dz>>>18^dz>>>3^dz<<25^dz<<14)+(eJ>>>17^eJ>>>19^eJ>>>10^eJ<<15^eJ<<13)+jS[L&15]+jS[(L+9)&15])|0;}eC=(eC+abG+(sy>>>6^sy>>>11^sy>>>25^sy<<26^sy<<21^sy<<7)+(FQ^sy&(MD^FQ))+cg[L]);abG=FQ;FQ=MD;MD=sy;sy=Ng+eC|0;Ng=JB;JB=sa;sa=WK;WK=(eC+((sa&JB)^(Ng&(sa^JB)))+(sa>>>2^sa>>>13^sa>>>22^sa<<30^sa<<19^sa<<10))|0;}eQ[0]=eQ[0]+WK|0;eQ[1]=eQ[1]+sa|0;eQ[2]=eQ[2]+JB|0;eQ[3]=eQ[3]+Ng|0;eQ[4]=eQ[4]+sy|0;eQ[5]=eQ[5]+MD|0;eQ[6]=eQ[6]+FQ|0;eQ[7]=eQ[7]+abG|0;}};module.exports=qA;},{}],64:[function(require,module,exports){var Cq={};Cq.aoF={bz:"cbc",aeP:function(NF,VR,hB,vX){if(vX&&vX.length){throw new IPCC.Web.UI.ImGearArgumentException('data','cannot authenticate data');}if(IPCC.Web.hn.wM(hB)!==128){throw new IPCC.Web.UI.ImGearArgumentException('iv','invalid data');}var L,jS=IPCC.Web.hn,Sd=jS.aiU,qM=jS.wM(VR),aeW=0,rm=[];if(qM&7){throw new IPCC.Web.UI.ImGearInvalidOperationException('padding works only for multiple bytes');}for(L=0;aeW+128<=qM;L+=4,aeW+=128){hB=NF.aeP(Sd(hB,VR.slice(L,L+4)));rm.splice(L,0,hB[0],hB[1],hB[2],hB[3]);}qM=(16-((qM>>3)&15))*0x1010101;hB=NF.aeP(Sd(hB,jS.Vp(VR,[qM,qM,qM,qM]).slice(L,L+4)));rm.splice(L,0,hB[0],hB[1],hB[2],hB[3]);return rm;},Xo:function(NF,RI,hB,vX){if(vX&&vX.length){throw new IPCC.Web.UI.ImGearArgumentException(vX,"cbc can't authenticate data");}if(IPCC.Web.hn.wM(hB)!==128){throw new IPCC.Web.UI.ImGearArgumentException('iv',"cbc iv must be 128 bits");}if((IPCC.Web.hn.wM(RI)&127)|| !RI.length){throw new IPCC.Web.UI.ImGearInvalidOperationException("cbc ciphertext must be a positive multiple of the block size");}var L,jS=IPCC.Web.hn,Sd=jS.aiU,su,sQ,rm=[];vX=vX||[];for(L=0;L<RI.length;L+=4){su=RI.slice(L,L+4);sQ=Sd(hB,NF.Xo(su));rm.splice(L,0,sQ[0],sQ[1],sQ[2],sQ[3]);hB=su;}su=rm[L-1]&255;if(su===0||su>16){throw new IPCC.Web.UI.ImGearInvalidOperationException('pkcs#5 padding corrupt');}sQ=su*0x1010101;if(!jS.aEo(jS.Tl([sQ,sQ,sQ,sQ],0,su*8),jS.Tl(rm,rm.length*32-su*8,rm.length*32))){throw new IPCC.Web.UI.ImGearInvalidOperationException('2pkcs#5 padding corrupt');}return jS.Tl(rm,0,rm.length*32-su*8);}};module.exports=Cq;},{}],65:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var LT=function(){var an=[];var bi=new IPCC.Web.UI.jc();var eW=new IPCC.Web.UI.MarkCollection();var V=this;var JA=true;this.axi=[];function onMarkSelectionChanged(aH,F){var C=F.mark;if(C.ab&&C.ab[0]&&C.ab[0].cI===false){return;}var fJ;var aBY=F.mark.get_selected();if(C.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&C.aX!==undefined){eW.remove_markAdded(onMarkSelectionChanged);eW.remove_markRemoved(onMarkSelectionChanged);for(var L=0;L<an.length;L++){if(an[L].aX===C.aX){if(an[L].get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction){fJ=an[L];}else{an[L].set_selected(F.mark.get_selected());}}}eW.add_markAdded(onMarkSelectionChanged);eW.add_markRemoved(onMarkSelectionChanged);if(fJ){fJ.set_selected(aBY);}return;}else if(C.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction){eW.remove_markAdded(onMarkSelectionChanged);eW.remove_markRemoved(onMarkSelectionChanged);for(var aU=0;aU<C.ab.length;aU++){C.ab[aU].set_selected(F.mark.get_selected());}eW.add_markAdded(onMarkSelectionChanged);eW.add_markRemoved(onMarkSelectionChanged);}var fz=new IPCC.Web.UI.MarkEventArgs();fz.mark=C;fz.zIndex=V.nH(C);fz.length=1;V.aP('markSelectionChanged',fz);};eW.add_markAdded(onMarkSelectionChanged);eW.add_markRemoved(onMarkSelectionChanged);var awu=eW.addMark;eW.addMark=function(C){if(V.nH(C)<0){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot select a Mark that is not associated with the ArtPage.');}if(!eW.contains(C)){awu.call(eW,C);C.dm('selected');}};var avK=eW.addMarks;eW.addMarks=function(Ag){var qH=[];function Ss(C){if(V.nH(C)<0){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot select a Mark that is not associated with the ArtPage.');}if(!eW.contains(C)){qH.push(C);}};Ag.forEach(Ss,{});avK.call(eW,Ag);var L;for(L=0;L<qH.length;L++){qH[L].dm('selected');}};var avF=eW.removeMark;eW.removeMark=function(C){if(eW.contains(C)){avF.call(eW,C);C.dm('selected');}};var awE=eW.removeAllMarks;eW.removeAllMarks=function(){var qH=[];function Ss(C){if(eW.contains(C)){qH.push(C);}};eW.forEach(Ss,{});awE.call(eW);var L;for(L=0;L<qH.length;L++){qH[L].dm('selected');}};function alX(jZ){IPCC.aI.nq(jZ,'zIndex',0,an.length-1);};this.WM=function(){return an.length;};this.agK=function(){var L=0;for(;L<an.length;L++){if(an[L].get_type()!==IPCC.Web.UI.MarkType.HighlightText&&an[L].get_type()!==IPCC.Web.UI.MarkType.Highlight&& !(an[L].get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&an[L].aX!==undefined)){break;}}return L;};this.Cd=function(){return eW;};this.Db=function(G){if(G===JA){return;}JA=G;this.dm('JA');};this.Lu=function(){return JA;};var rc=false;this.ni=function(){return rc;};this.om=function(G){if(typeof G!=="boolean"){return;}rc=G;this.dm('redactionDraftMode');};function np(aH,F){if(F.get_propertyName()==='selected'){return;}var fz=new IPCC.Web.UI.MarkEventArgs();fz.mark=aH;fz.zIndex=V.nH(aH);fz.propertyName=F.cG;fz.length=1;if(fz.mark.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction||(fz.mark.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&fz.mark.aX!=='undefined')){V.aok(aH);}V.aP('markChanged',fz);};function AT(aH){var fz=new IPCC.Web.UI.MarkEventArgs();fz.mark=aH;fz.zIndex=V.nH(aH);fz.length=1;V.aP('markTextSelectionChanged',fz);};function Rm(aH,F){var fz=new IPCC.Web.UI.CommentEventArgs();fz.mark=aH;fz.comment=F.comment;fz.index=F.index;V.aP('commentAdded',fz);};function Rn(aH,F){var fz=new IPCC.Web.UI.CommentEventArgs();fz.mark=aH;fz.comment=F.comment;fz.index=F.index;V.aP('commentRemoved',fz);};function Rh(aH,F){var fz=new IPCC.Web.UI.CommentEventArgs();fz.mark=aH;fz.comment=F.comment;fz.index=F.index;V.aP('commentChanged',fz);};this.Qh=function(C,oG){oG=oG||{};var jZ=this.nH(C);if(jZ>=0){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot add a Mark to an ArtPage if the mark is already associated with the ArtPage.');}if(C.en()){throw new IPCC.Web.UI.ImGearInvalidOperationExceptionException('You cannot add a Mark to an ArtPage if the mark is already associated with a different ArtPage.');}an.push(C);C.mg(this);C.add_propertyChanged(np);C.add_markTextSelectionChanged(AT);C.wW(Rm);C.vW(Rn);C.rD(Rh);var F=new IPCC.Web.UI.MarkEventArgs();F.mark=C;if(C.get_type()===IPCC.Web.UI.MarkType.Highlight||C.get_type()===IPCC.Web.UI.MarkType.HighlightText||C.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||C.get_type()===IPCC.Web.UI.MarkType.DocumentHyperlink||C.get_type()===IPCC.Web.UI.MarkType.Strikethrough||(C.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&C.aX!==undefined)){this.aaD(C,0);}else{F.zIndex=an.length-1;}F.clientX=oG.clientX;F.clientY=oG.clientY;F.length=1;V.aP('markAdded',F);};this.Cu=function(jh,ci){var GL=[].concat(an);var L;for(L=0;L<GL.length;L++){jh.call(ci,GL[L],L,this);}};this.Qf=function(jZ){alX(jZ);return an[jZ];};this.nH=function(C){var L;for(L=0;L<an.length;L++){if(an[L]===C){return L;}}return-1;};this.aAs=function(eB){var fl=JSON.parse(eB);this.Ud();var IC=[];var L;var LW=fl.m;if(LW){for(L=0;L<LW.length;L++){var aB=new IPCC.Web.UI.Mark(LW[L].t);aB.aAe(LW[L]);aB.mg(this);aB.add_propertyChanged(np);aB.add_markTextSelectionChanged(AT);IC.push(aB);}}an=IC;V.aP('marksLoaded',{});};var ALPHA_CHAR_CODES=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70];this.aqD=function(){var jG=new Array(36);var aD=0;var L;var bj;for(L=0;L<8;L++){jG[aD++]=ALPHA_CHAR_CODES[Math.floor(Math.random()*16)];}for(L=0;L<3;L++){jG[aD++]=45;for(bj=0;bj<4;bj++){jG[aD++]=ALPHA_CHAR_CODES[Math.floor(Math.random()*16)];}}jG[aD++]=45;var apY=new Date().getTime();var aqR=("0000000"+apY.toString(16).toUpperCase()).substr(-8);for(L=0;L<8;L++){jG[aD++]=aqR.charCodeAt(L);}for(L=0;L<4;L++){jG[aD++]=ALPHA_CHAR_CODES[Math.floor(Math.random()*16)];}return String.fromCharCode.apply(null,jG);};function Sx(la){var bm=la.firstChild;while(bm.nodeType!==1){bm=bm.nextSibling;}return bm;};function Pd(vR,alz,anS){var aDh=parseFloat(vR.getAttribute(alz));var aDi=parseFloat(vR.getAttribute(alz+'Xa'));return anS/(aDh/aDi);};function apN(PK,bO,bo){if(bO<=0&&bo<=0){return 1;}var akv=PK.getAttribute('pageWidth');var akV=PK.getAttribute('pageHeight');var MU,Tf,ae,vR,L;if(akv&&akV){MU=parseFloat(akv);Tf=parseFloat(akV);if(isFinite(MU)&&isFinite(Tf)&&MU>0&&Tf>0){return bO/MU;}}for(L=0;L<PK.childNodes.length;L++){vR=PK.childNodes[L];if(vR.nodeName!=='annotation'){continue;}ae=Pd(vR,'width',bO);if(isFinite(ae)&&ae>0){return ae;}ae=Pd(vR,'height',bo);if(isFinite(ae)&&ae>0){return ae;}ae=Pd(vR,'x',bO);if(isFinite(ae)&&ae>0){return ae;}ae=Pd(vR,'y',bo);if(isFinite(ae)&&ae>0){return ae;}}return 1;};this.aAU=function(le,bb,bO,bo,SP,stampImages,vA,ug){var V=this;if(vA!==true){this.Ud();}if(le){var kg;if(IPCC.tx.Jn()){kg=le.firstChild;}else{var Vs=le.firstChild.nodeName;if(Vs.toLowerCase()==='xml'){kg=le.firstChild.nextSibling;}else{kg=le.firstChild;}}var cz=Sx(kg);if(cz.nodeName!=='pages'){throw 'ERROR: pages';}if(cz.hasChildNodes()){var L;for(L=0;L<cz.childNodes.length;L++){var aN=cz.childNodes[L];if(aN.nodeName!=='page'){continue;}var Ad=aN.getAttribute('id');var nb=false;var uS;var ri='';var Iv=[];var hQ;var nS,aU=0;var da,cO,bf;if(SP){var ajF=aN.getAttribute('pageWidth'),ajB=aN.getAttribute('pageHeight');if(ajF){SP.agH(ajF);}if(ajB){SP.afb(ajB);}}var mc=[],PG={},ab;if((Ad&&parseInt(Ad,10))===(bb+1)){nb=true;var IC=[];var bj;var aB;var jR,hl,pE,sD,sB,hD;var ml=1;var amH=apN(aN,bO,bo);if(amH>0){ml=amH;}for(bj=0;bj<aN.childNodes.length;bj++){var bk=aN.childNodes[bj];if(bk.nodeName!=='annotation'){continue;}var iz=parseFloat(bk.getAttribute('width'))*ml;var iX=parseFloat(bk.getAttribute('height'))*ml;var hh=parseFloat(bk.getAttribute('x'))*ml;var gF=parseFloat(bk.getAttribute('y'))*ml;var YT=bk.getAttribute('fillColor'),Um,pz,Zo=bk.getAttribute('lineColor'),ajC,iQ,acG=bk.getAttribute('fontColor'),ahK,zC;if(YT==='transparent'){Um=pz=YT;}else{Um=parseInt(YT||0,10);pz=parseInt(Um,10).toString(16);while(pz.length<6){pz='0'+pz;}pz='#'+pz;}if(Zo==='transparent'){iQ=Zo;}else{ajC=parseInt(Zo||0,10);iQ=parseInt(ajC,10).toString(16);while(iQ.length<6){iQ='0'+iQ;}iQ='#'+iQ;}if(acG){ahK=parseInt(acG||0,10);zC=parseInt(ahK,10).toString(16);while(zC.length<6){zC='0'+zC;}zC='#'+zC;}var axS=bk.getAttribute('stampSize');var Qn=bk.getAttribute('dragDirection');var Ly=parseInt(bk.getAttribute('opacity'),10);if(isNaN(Ly)){Ly=255;}if(bk.nodeName==='annotation'){var ahQ=bk.getAttribute('label');if(!ahQ){ahQ='';}var kj=bk.getAttribute('drawType');var lb;switch(kj){case 'imagestamp':case 'imagestamp_redact':var pF=bk.getAttribute('imageStampId');var bC=(kj==='imagestamp')?IPCC.Web.UI.MarkType.ImageStampAnnotation:IPCC.Web.UI.MarkType.ImageStampRedaction;aB=new IPCC.Web.UI.Mark(bC);aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});aB.set_image(stampImages[pF].base64format);aB.pF=pF;jR=true;if(kj==='imagestamp_redact'){aB.jL(true);}break;case 'circle':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Ellipse);aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});jR=true;aB.set_lineColor(iQ);aB.set_fillVisible(false);aB.set_lineWidth(parseFloat(bk.getAttribute('lineWidth')));break;case 'circle_filled':case 'circle_trans':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Ellipse);aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});jR=true;aB.set_fillColor(pz);aB.set_lineColor(iQ);aB.set_fillVisible(true);aB.set_lineWidth(parseFloat(bk.getAttribute('lineWidth')));break;case 'text':case 'text_redact':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Text);aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});aB.set_fontName('verdana');aB.set_fontSize(10);aB.set_opacity(0);uS=undefined;aB.set_fillColor('#000000');if(kj==='text_redact'){aB.jL(true);}if(kj==='text'){aB.set_fillColor(pz);aB.set_lineColor(iQ);aB.set_lineWidth(parseFloat(bk.getAttribute('lineWidth')));aB.set_fillVisible(true);aB.set_opacity(Ly);}hD=parseInt(bk.getAttribute('maxLength'));if(!isNaN(hD)){aB.set_maxLength(hD);}mc=[];hl=bk.firstChild;while((hl)&&(hl.nodeType!==4)){hl=hl.nextSibling;}if((hl)&&(hl.nodeType===4)){lb=hl.innerText||hl.textContent||hl.data;aB.ah.aS=lb;nS=lb.split("</TEXTFORMAT>");ri='';Iv=[];for(aU=0;aU<nS.length;aU++){if(nS[aU].match(/<TEXTFORMAT/)){nS[aU]=nS[aU]+"</TEXTFORMAT>";mc.push(nS[aU]);}}for(aU=0;aU<mc.length;aU++){if(mc[aU].match(/<P/)){uS=this.aie(mc[aU]);Iv.push(uS);ri+=uS+" ";if(aU===0){hQ=this.aiV(mc[aU]);amr(hQ,aB);}}ri=ri.replace(/\s+$/g,"");aB.set_text(ri);var Gb=this.aiL(mc[aU]);switch(Gb){case 'CENTER':aB.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Center);break;case 'RIGHT':aB.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Right);break;default:aB.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Left);break;}}}break;case 'line':case 'arrow':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Line);var aJ=aB.qt();if(Qn==='br'){aJ.setPoint(1,new IPCC.Web.UI.Point(hh+iz,gF+iX));aJ.setPoint(0,new IPCC.Web.UI.Point(hh,gF));}else if(Qn==='bl'){aJ.setPoint(1,new IPCC.Web.UI.Point(hh,gF+iX));aJ.setPoint(0,new IPCC.Web.UI.Point(hh+iz,gF));}else if(Qn==='tr'){aJ.setPoint(1,new IPCC.Web.UI.Point(hh+iz,gF));aJ.setPoint(0,new IPCC.Web.UI.Point(hh,gF+iX));}else if(Qn==='tl'){aJ.setPoint(1,new IPCC.Web.UI.Point(hh,gF));aJ.setPoint(0,new IPCC.Web.UI.Point(hh+iz,gF+iX));}aB.set_lineColor(iQ);aB.set_lineWidth(parseFloat(bk.getAttribute('lineWidth')));if(kj==='arrow'){aB.set_headFillColor(iQ);aB.set_endHeadType(IPCC.Web.UI.LineHeadType.Solid);aB.set_startHeadAngle(30);aB.set_startHeadLength(35);aB.set_lineWidth(parseFloat(bk.getAttribute('lineWidth')));}break;case 'stamp':case 'stamp_redact':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Stamp);aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});aB.set_fillColor(iQ);if(kj==='stamp_redact'){aB.jL(true);aB.set_fillColor('#000000');}hl=bk.firstChild;while((hl)&&(hl.nodeType!==4)){hl=hl.nextSibling;}if((hl)&&(hl.nodeType===4)){lb=hl.innerText||hl.textContent||hl.data;aB.ah.aS=lb;aB.set_text(lb);}break;case 'highlightText':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.HighlightText);aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});aB.set_fillColor(iQ);aB.aX=bk.getAttribute('highlightGroupID');if(bk.getAttribute('textLength')){aB.da=parseInt(bk.getAttribute('textLength'),10);}aB.cO=bk.getAttribute('selectedText');if(bk.getAttribute('startIndex')){aB.bf=parseInt(bk.getAttribute('startIndex'),10);}aB.ib=bk.getAttribute('isHighlight');aB.set_opacity(127);ab=YI(bk,ml);if(ab){aB.ab=ab;}break;case 'rectangle_filled_redact':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.RectangleRedaction);aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});aB.set_fillColor(pz||'#000000');aB.set_lineColor(iQ);aB.set_lineWidth(parseFloat(bk.getAttribute('lineWidth')));aB.set_textColor(zC||'#ffffff');aB.set_fillVisible(true);aB.jL(true);pE=bk.getAttribute('highlightGroupID');aB.set_text(IPCC.J.yQ(bk.getAttribute('meta')));if(pE){aB.set_lineWidth(0);aB.aX=pE;var fJ=PG[pE];if(!fJ){fJ=PG[pE]=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextSelectionRedaction);fJ.aX=pE;fJ.set_rectangle(aB.get_rectangle());fJ.jL(true);fJ.set_text(IPCC.J.yQ(bk.getAttribute('meta')));}else{var Kl=false;var ob=fJ.get_rectangle();var hf=ob.x,iW=ob.x+ob.width,_top=ob.y,iO=ob.y+ob.height;if(ob.x>hh){Kl=true;hf=hh;}if(ob.y>gF){Kl=true;_top=gF;}if(ob.x+ob.width<hh+iz){Kl=true;iW=hh+iz;}if(ob.y+ob.height<gF+iX){Kl=true;iO=gF+iX;}if(Kl===true){fJ.set_rectangle({x:hf,y:_top,width:iW-hf,height:iO-_top});}}}break;case 'text_selection_redaction':pE=bk.getAttribute('highlightGroupID');aB=PG[pE];if(!aB){aB=PG[pE]=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextSelectionRedaction);aB.aX=pE;aB.set_rectangle({x:0,y:0,width:0,height:0});aB.jL(true);aB.set_text(bk.getAttribute('meta'));}da=bk.getAttribute('textLength');if(da){aB.da=parseInt(da,10);}cO=bk.getAttribute('selectedText');if(cO){aB.cO=cO;}bf=bk.getAttribute('startIndex');if(bf){aB.bf=parseInt(bf,10);}break;case 'text_hyperlink_annotation':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextHyperlinkAnnotation);aB.set_fillColor(iQ);pE=bk.getAttribute('highlightGroupID');aB.aX=pE;var mu=bk.getAttribute('href');if(mu){aB.set_href(IPCC.J.yQ(mu));}da=bk.getAttribute('textLength');if(da){aB.da=parseInt(da,10);}cO=bk.getAttribute('selectedText');if(cO){aB.cO=cO;}bf=bk.getAttribute('startIndex');if(bf){aB.bf=parseInt(bf,10);}var ib=bk.getAttribute('isHighlight');aB.ib=ib?ib:'n';aB.ab=YI(bk,ml);aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});break;case 'rectangle':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Rectangle);aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});aB.set_lineVisible(true);aB.set_lineColor(iQ);aB.set_fillVisible(false);aB.set_lineWidth(parseFloat(bk.getAttribute('lineWidth')));break;case 'rectangle_filled':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Rectangle);aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});aB.set_fillColor(pz);aB.set_lineColor(iQ);aB.set_fillVisible(true);aB.set_lineWidth(parseFloat(bk.getAttribute('lineWidth')));break;case 'rectangle_trans':case 'rectangle_trans_redact':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Rectangle);aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});aB.set_fillColor(pz);aB.set_lineColor(iQ);aB.set_fillVisible(true);if(kj==='rectangle_trans_redact'){aB.jL(true);}aB.set_lineWidth(parseFloat(bk.getAttribute('lineWidth')));break;case 'freehand':case 'signature_path':if(kj==='freehand'){aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Freehand);}else{aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.SignaturePath);switch(bk.getAttribute('align').toUpperCase()){case 'LEFT':aB.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Left);break;case 'RIGHT':aB.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Right);break;default:aB.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Center);break;}}aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});aB.set_pathWidth(parseFloat(bk.getAttribute('pathWidth')));aB.set_pathHeight(parseFloat(bk.getAttribute('pathHeight')));aB.set_lineWidth(parseFloat(bk.getAttribute('lineWidth')));aB.set_lineColor(iQ);var tQ=bk.firstChild;while((tQ)&&(tQ.nodeType!==4)){tQ=tQ.nextSibling;}if((tQ)&&(tQ.nodeType===4)){lb=tQ.innerText||tQ.textContent||tQ.data;aB.ah.aS=lb;aB.set_pathString(lb);}break;case 'signature_text':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.SignatureText);aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});aB.set_fontSize(10);aB.set_lineWidth=0;aB.set_fillVisible(true);aB.set_opacity(1);hl=bk.firstChild;this.Vv(hl,aB);aB.zp=parseFloat(bk.getAttribute('fontWidth'));aB.Az=parseFloat(bk.getAttribute('fontHeight'));break;case 'text_area_signature':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextAreaSignature);aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});aB.set_fontName('verdana');uS=undefined;hD=parseInt(bk.getAttribute('maxLength'));if(!isNaN(hD)){aB.set_maxLength(hD);}var fg=parseInt(bk.getAttribute('maxFontSize'));if(!isNaN(fg)){aB.set_maxFontSize(fg);}hl=bk.firstChild;this.Vv(hl,aB);break;case 'text_input_signature':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextLine);aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});hl=bk.firstChild;this.Vv(hl,aB);aB.zp=parseFloat(bk.getAttribute('fontWidth'));aB.Az=parseFloat(bk.getAttribute('fontHeight'));aB.set_lineVisible(false);hD=parseInt(bk.getAttribute('maxLength'));if(!isNaN(hD)){aB.set_maxLength(hD);}aCV(bk,aB);break;case 'polyline':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Polyline);aB.set_lineWidth(parseFloat(bk.getAttribute('lineWidth')));aB.set_lineColor(iQ);var uW=bk.firstChild;while((uW)&&(uW.nodeType!==4)){uW=uW.nextSibling;}var Hu;if((uW)&&(uW.nodeType===4)){lb=uW.innerText||uW.textContent||uW.data;if(lb&&lb!=='undefined'){Hu=JSON.parse(lb);aJ=aB.qt();if(Hu){for(L=0;L<Hu.length;L++){aJ.addPoint(new IPCC.Web.UI.Point(Hu[L].x*ml,Hu[L].y*ml));}}}}break;case 'strikethrough':aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Strikethrough);aB.set_rectangle({x:hh,y:gF,width:iz,height:iX});aB.set_lineWidth(parseFloat(bk.getAttribute('lineWidth')));aB.set_lineColor(iQ);aB.aX=bk.getAttribute('highlightGroupID');var textLength=bk.getAttribute('textLength');if(textLength){aB.da=parseInt(textLength,10);}aB.cO=bk.getAttribute('selectedText');var startIndex=bk.getAttribute('startIndex');if(startIndex){aB.bf=parseInt(startIndex,10);}aB.ib=bk.getAttribute('isHighlight');ab=YI(bk,ml);if(ab){aB.ab=ab;}break;default:}if(aB){aB.ah.kS=bk.getAttribute('nodeId');if(Ly>=0&&(kj==='rectangle_trans_redact'|| !aB.hL())&&kj!=='stamp'&&kj!=='imagestamp'&&kj!=='imagestamp_redact'&&kj!=='text_hyperlink_annotation'&&kj!=='text_input_signature'&&kj!=='text_area_signature'&&kj!=='strikethrough'){aB.set_opacity(Ly);}aB.ah.GA=axS;aB.ah.aHL=kj;aB.ah.fw=bk.getAttribute('lineWidth');aB.ah.cP=bk.getAttribute('fillColor');aB.ah.hY=bk.getAttribute('lineColor');aB.ah.aHw=bk.getAttribute('dragDirection');aB.ah.Ad=Ad;aB.ah.bm=bk.getAttribute('x');aB.ah.cu=bk.getAttribute('y');aB.ah.aM=bk.getAttribute('height');aB.ah.ap=bk.getAttribute('width');aB.ah.aGW=bk.getAttribute('x_percent');aB.ah.aFi=bk.getAttribute('y_percent');aB.ah.aHr=bk.getAttribute('height_percent');aB.ah.aHR=bk.getAttribute('width_percent');aB.ah.aHK=bk.getAttribute('formUser');aB.ah.aHF=bk.getAttribute('created');aB.ah.aIr=bk.getAttribute('modified');aB.ah.aIu=bk.getAttribute('saveDate');aB.ah.aHO=bk.getAttribute('saveTime');aB.ah.kc=bk.getAttribute('meta');var Cx=bk.firstChild;while((Cx)&&(Cx.nodeType!==4)){Cx=Cx.nextSibling;}if((Cx)&&(Cx.nodeType===4)){aB.dK.push(Cx.data);}else{aB.dK.push('');}var lk=parseInt(bk.getAttribute('interactionMode'))||IPCC.Web.UI.MarkInteractionMode.Full;aB.set_interactionMode(lk);aB.mg(this);aB.add_propertyChanged(np);aB.add_markTextSelectionChanged(AT);aB.wW(Rm);aB.vW(Rn);aB.rD(Rh);IC.push(aB);aEm(bk,aB);sD=IPCC.J.afq(bk.getAttribute('created'));sB=IPCC.J.afq(bk.getAttribute('modified'));sD=sD||new Date();sB=sB||new Date();aB.initializeDates(sD,sB);if(ug){aB.set_visible(false);}}}}an=an.concat(IC);V.aP('marksLoaded',{});}if(nb){atk(le,bb);break;}}}}};this.Vv=function(xc,aB){var L,lb,nS,ri,Iv,uS,mc=[],xZ=aB.get_type()===IPCC.Web.UI.MarkType.SignatureText,aBP=xZ?IPCC.Web.UI.HorizontalAlignment.Center:IPCC.Web.UI.HorizontalAlignment.Left,hQ;while((xc)&&(xc.nodeType!==4)){xc=xc.nextSibling;}if((xc)&&(xc.nodeType===4)){lb=xc.innerText||xc.textContent||xc.data;aB.ah.aS=lb;nS=lb.split("</TEXTFORMAT>");for(L=0;L<nS.length;L++){if(nS[L].match(/<TEXTFORMAT/)){nS[L]=nS[L]+"</TEXTFORMAT>";mc.push(nS[L]);}}ri='';Iv=[];for(L=0;L<mc.length;L++){if(mc[L].match(/<P/)){uS=this.aie(mc[L]);Iv.push(uS);ri+=uS+" ";if(L===0){hQ=this.aiV(mc[L]);amr(hQ,aB);}}ri=ri.replace(/\s+$/g,"");aB.set_text(ri);var Gb=this.aiL(mc[L]);switch(Gb){case 'LEFT':aB.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Left);break;case 'CENTER':aB.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Center);break;case 'RIGHT':aB.set_textHorizontalAlignment(IPCC.Web.UI.HorizontalAlignment.Right);break;default:aB.set_textHorizontalAlignment(aBP);break;}}}};function Tm(ahE,cX){for(var i=0;i<ahE.childNodes.length;i++){var Zc=ahE.childNodes[i];if(Zc.nodeName==='kvp'){var bD=Zc.getAttribute("key");var G=Zc.getAttribute("value");cX.set_data(bD,G);}}};function aDT(Pw,dq){var cC=new IPCC.Web.UI.Comment(IPCC.J.yQ(Pw.getAttribute("text")));cC.set_creationTime(Pw.getAttribute("created"));dq.addComment(cC);for(var i=0;i<Pw.childNodes.length;i++){var amJ=Pw.childNodes[i];if(amJ.nodeName==='data'){Tm(amJ,cC.get_data());}}};function aEJ(alg,dq){for(var i=0;i<alg.childNodes.length;i++){var Nc=alg.childNodes[i];if(Nc.nodeName==='comments'){var gX=Nc;for(var j=0;j<gX.childNodes.length;j++){var amy=gX.childNodes[j];if(amy.nodeName==='comment'){aDT(amy,dq);}}}else if(Nc.nodeName==='data'){Tm(Nc,dq.get_data());}}};function aEm(LP,C){for(var i=0;i<LP.childNodes.length;i++){var ub=LP.childNodes[i];if(ub.nodeName==='conversation'){aEJ(ub,C.get_conversation());}else if(ub.nodeName==='data'){Tm(ub,C.get_data());}}};function aCV(LP,C){var G=null,GR={};for(var i=0;i<LP.childNodes.length;i++){var ub=LP.childNodes[i];if(ub.nodeName==='inputMask'){G=IPCC.J.yQ(ub.getAttribute('value'));for(var j=0;j<ub.childNodes.length;j++){var We=ub.childNodes[j];if(We.nodeName==='translation'){GR[IPCC.J.yQ(We.getAttribute('key'))]=new RegExp(IPCC.J.yQ(We.getAttribute('value').replace(/(^\/|\/$)/g,'')));}}break;}}if(G!==null){C.set_mask({value:G,translations:GR});}};function YI(sM,wJ){var fV=null,jm;for(var i=0;i<sM.childNodes.length;i++){jm=sM.childNodes[i];if(jm.nodeName==='line-rectangles'){if(!fV){fV=aDd(jm,wJ);}else{throw new Error("An XML annotation node cannot have more than one line-rectangles child node.");}}}return fV;};function aDd(sM,wJ){var fV=[],jm;for(var i=0;i<sM.childNodes.length;i++){jm=sM.childNodes[i];if(jm.nodeName==='rectangle'){fV.push(aEu(jm,wJ));}}return fV;};function aEu(sM,wJ){var bm=parseFloat(sM.getAttribute("x"))*wJ;var cu=parseFloat(sM.getAttribute("y"))*wJ;var ap=parseFloat(sM.getAttribute("width"))*wJ;var aM=parseFloat(sM.getAttribute("height"))*wJ;return new IPCC.Web.UI.Rectangle(bm,cu,ap,aM);};this.ZE=function(ax,IO,tN,il,dg,aD){var aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Highlight);aB.set_rectangle({x:ax.x,y:ax.y,width:ax.width,height:ax.height});aB.set_fillColor(tN);aB.set_fillVisible(true);aB.bf=aD;aB.da=1;if(dg){aB.set_opacity(dg);}else{aB.set_opacity(127);}V.addMark(aB);return aB;};this.aCG=function(ax,Wf,aD){var aB=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.Highlight);aB.set_rectangle({x:ax.x,y:ax.y,width:ax.width,height:ax.height});aB.set_fillColor(Wf.get_fillColor());aB.set_fillVisible(true);aB.bf=aD;aB.da=1;if(Wf.get_opacity()){aB.set_opacity(Wf.get_opacity());}else{aB.set_opacity(127);}V.addMark(aB);return aB;};function amr(hQ,aB){for(var cg=0;cg<hQ.length;cg++){var cT=hQ[cg].attribs;var nb=false;if(hQ[cg].attribs.length>1&& !nb&&hQ[cg].Ha==='font'){nb=true;for(var bj=0;bj<cT.length;bj++){if(cT[bj].bz==="FACE"){aB.set_fontName(cT[bj].G);}else if(cT[bj].bz==="SIZE"&&aB.get_type()!==IPCC.Web.UI.MarkType.TextLine&&aB.get_type()!==IPCC.Web.UI.MarkType.TextAreaSignature){var rv=parseFloat(cT[bj].G);aB.set_fontSize(rv);}else if(cT[bj].bz==="COLOR"){var ahi=cT[bj].G;if(aB.get_type()===IPCC.Web.UI.MarkType.SignatureText){aB.set_fillColor(ahi);}else{aB.set_textColor(ahi);}}}var km=false;if(hQ[cg+1]&&aB.get_type()!==IPCC.Web.UI.MarkType.TextLine){if(hQ[cg+1].tagName==='font'){break;}else{var xK=hQ[cg+1].Ha;if(xK==='b'||xK==='i'||xK==='u'||xK==='s'){if(xK==='b'){aB.set_fontStyle(IPCC.Web.UI.FontStyle.Bold);}else if(xK==='i'){aB.set_fontStyle(IPCC.Web.UI.FontStyle.Italic);}else if(xK==='u'){aB.set_fontStyle(IPCC.Web.UI.FontStyle.Underline);}else if(xK==='s'){aB.set_fontStyle(IPCC.Web.UI.FontStyle.Strikeout);}km=true;}}if(hQ[cg+2]){var atc=hQ[cg+2].Ha;km=TK(aB,km,atc);}if(hQ[cg+3]){var asD=hQ[cg+3].Ha;km=TK(aB,km,asD);}if(hQ[cg+4]){var asY=hQ[cg+4].Ha;km=TK(aB,km,asY);}if(nb){break;}}}}};function TK(C,agL,ym){var km=agL;var aB=C;if(agL){if(ym==='b'){aB.set_fontStyle(aB.get_fontStyle()|IPCC.Web.UI.FontStyle.Bold);km=true;}else if(ym==='i'){aB.set_fontStyle(aB.get_fontStyle()|IPCC.Web.UI.FontStyle.Italic);km=true;}else if(ym==='u'){aB.set_fontStyle(aB.get_fontStyle()|IPCC.Web.UI.FontStyle.Underline);km=true;}else if(ym==='s'){aB.set_fontStyle(aB.get_fontStyle()|IPCC.Web.UI.FontStyle.Strikeout);km=true;}}else{if(ym==='b'){aB.set_fontStyle(IPCC.Web.UI.FontStyle.Bold);km=true;}else if(ym==='i'){aB.set_fontStyle(IPCC.Web.UI.FontStyle.Italic);km=true;}else if(ym==='u'){aB.set_fontStyle(IPCC.Web.UI.FontStyle.Underline);km=true;}else if(ym==='s'){aB.set_fontStyle(IPCC.Web.UI.FontStyle.Strikeout);km=true;}}return km;};function EQ(str){var obj={},items=str.split(",");for(var i=0;i<items.length;i++){obj[items[i]]=true;}return obj;};var adR=/^<([\-A-Za-z0-9_]+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,aef=/^<\/([\-A-Za\-z0-9_]+)[^>]*>/,aER=/([\-A-Za\-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\[\w\W]|[^"])*)")|(?:'((?:\\[\w\W]|[^'])*)')|([^>\s]+)))?/g;var aGe=EQ("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed");var oE=EQ("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul");var ayb=EQ("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var");var anM=EQ("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");var aFT=EQ("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected");var arP=EQ("script,style");this.ajp=function(html,handler){var aD,yn,uK,mk=[],ly=html;function parseEndTag(tag,tagName){var gA;if(!tagName){gA=0;}else{for(gA=mk.length-1;gA>=0;gA--){if(mk[gA]===tagName){break;}}}if(gA>=0){for(var i=mk.length-1;i>=gA;i--){if(handler.end){handler.end(mk[i]);}}mk.length=gA;}};function parseStartTag(tag,tagName,rest,unary){tagName=tagName.toLowerCase();if(oE[tagName]){while(mk.last()&&ayb[mk.last()]){parseEndTag("",mk.last());}}if(anM[tagName]&&mk.last()===tagName){parseEndTag("",tagName);}unary=aGe[tagName]|| ! !unary;if(!unary){mk.push(tagName);}if(handler.start){var attrs=[];rest.replace(aER,function(uK,name){var value=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:aFT[name]?name:"";attrs.push({name:name,value:value,escaped:value.replace(/(^|[^\\])"/g,'$1\\\"')});});if(handler.start){handler.start(tagName,attrs,unary);}}};mk.last=function(){return this[this.length-1];};function aGD(all,text){text=text.replace(/<!--([\w\W]*?)-->/g,"$1").replace(/<!\[CDATA\[([\w\W]*?)\]\]\]>/g,"$1");if(handler.chars){handler.chars(text);}return "";};while(html){yn=true;if(!mk.last()|| !arP[mk.last()]){if(html.indexOf("<!--")===0){aD=html.indexOf("-->");if(aD>=0){if(handler.comment){handler.comment(html.substring(4,aD));}html=html.substring(aD+3);yn=false;}}else if(html.indexOf("</")===0){uK=html.match(aef);if(uK){html=html.substring(uK[0].length);uK[0].replace(aef,parseEndTag);yn=false;}}else if(html.indexOf("<")===0){uK=html.match(adR);if(uK){html=html.substring(uK[0].length);uK[0].replace(adR,parseStartTag);yn=false;}}if(yn){aD=html.indexOf("<");var text=aD<0?html:html.substring(0,aD);text=IPCC.J.yQ(text);html=aD<0?"":html.substring(aD);if(handler.chars){handler.chars(text);}}}else{html=html.replace(new RegExp("(.*)<\/"+mk.last()+"[^>]*>"),aGD);parseEndTag("",mk.last());}if(html===ly){throw " Parse Error in annotation Html Text: "+html;}ly=html;}parseEndTag();};this.aie=function(html){var results="";this.ajp(html,{start:function(){},end:function(){},chars:function(text){results+=text;},comment:function(){}});return results;};this.aiV=function(html){var eb=[];this.ajp(html,{start:function(tag,attrs){var eY;eY=tag;if(tag==='font'||tag==='b'||tag==='i'||tag==='u'||tag==='s'){var xi={};xi.Ha=tag;xi.attribs=[];if(tag==='b'){xi.aIB=true;}else if(tag==='i'){xi.aIp=true;}else if(tag==='u'){xi.aHh=true;}else if(tag==='s'){xi.aHI=true;}else{for(var i=0;i<attrs.length;i++){var AH={};AH.bz=attrs[i].name;AH.G=attrs[i].value;xi.attribs.push(AH);}}eb.push(xi);}},end:function(){},chars:function(){},comment:function(){}});return eb;};this.aiL=function(html){var parts=html.toUpperCase().split('ALIGN="');var alignment=parts[1].split('"')[0];return alignment;};function atk(le,aEG){var mE=le.getElementsByTagName("highlights")[0];if(mE.hasChildNodes()){var lz;var cA;for(var L=0;L<mE.childNodes.length;L++){lz=mE.childNodes[L];if(lz.nodeType===1){cA=lz.getAttribute('page');if(cA&&parseInt(cA,10)===aEG+1){var iM=new IPCC.Web.UI.Yy();iM.axN=lz.nodeName;switch(iM.axN){case 'tag':iM.EW=IPCC.Web.UI.HighLightType.Tag;break;case 'highlight':iM.EW=IPCC.Web.UI.HighLightType.InlineHighLight;break;case 'link':iM.EW=IPCC.Web.UI.HighLightType.Link;break;case 'redaction':iM.EW=IPCC.Web.UI.HighLightType.Redaction;break;case 'strikethrough':iM.EW=IPCC.Web.UI.HighLightType.Strikethrough;break;default:iM.EW=undefined;}if(lz.childNodes[0].data){iM.dK.push(lz.childNodes[0].data);}iM.ah.ds=lz.getAttribute('id');iM.ah.aHY=lz.getAttribute('userid');iM.ah.aHv=lz.getAttribute('mode');iM.ah.dR=lz.getAttribute('color');iM.ah.aIy=lz.getAttribute('occurence');iM.ah.bk=lz.getAttribute('annotation');iM.ah.aN=lz.getAttribute('page');iM.ah.aGP=lz.getAttribute('documentname');iM.ah.aGU=lz.getAttribute('tooltip');iM.ah.aIf=lz.getAttribute('allowdelete');iM.ah.mY=lz.getAttribute('start');iM.ah.aIb=lz.getAttribute('end');V.axi.push(iM);}}}}};this.Ud=function(){var F;if(an.length<1){return;}eW.removeAllMarks();var L;for(L=an.length-1;L>=0;L--){an[L].remove_propertyChanged(np);an[L].remove_markTextSelectionChanged(AT);an[L].mg(null);F=new IPCC.Web.UI.MarkEventArgs();F.length=an.length;F.zIndex=0;F.mark=an.pop();V.aP('markRemoved',F);}F=new IPCC.Web.UI.MarkEventArgs();F.length=an.length;F.zIndex=0;V.aP('markRemoved',F);};this.vD=function(C){var jZ=this.nH(C);var vV=C.aX;if(jZ>=0){C.remove_propertyChanged(np);C.remove_markTextSelectionChanged(AT);C.mg(null);an.splice(jZ,1);eW.removeMark(C);var F=new IPCC.Web.UI.MarkEventArgs();F.mark=C;F.zIndex=jZ;F.length=1;V.aP('markRemoved',F);if(vV){this.aAW(vV);}}};this.aIx=function(od){var ur=an.length;var vV=od.aX;while(ur--){var C=an[ur];if(C.aX===vV){C.set_fillColor(od.get_fillColor());}}};this.aok=function(od){var ur=an.length;var vV=od.aX;if(!vV){od.set_text(od.get_text());return;}while(ur--){var C=an[ur];if(C.aX===vV){if(C.get_text()!==od.get_text()){C.set_text(od.get_text());}if(C.get_fontName()!==od.get_fontName()){C.set_fontName(od.get_fontName());}if(C.get_fontSize()!==od.get_fontSize()){C.set_fontSize(od.get_fontSize());}}}};this.aAW=function(vV){var ur=an.length;while(ur--){var C=an[ur];if(C.aX===vV){var jZ=this.nH(C);eW.removeMark(C);an.splice(ur,1);var F=new IPCC.Web.UI.MarkEventArgs();F.mark=C;F.zIndex=jZ;F.length=1;}}};this.aaD=function(C,jZ){var PF=this.nH(C);if(PF<0){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot reorder a Mark unless it is currently associated with the ArtPage.');}if(PF===jZ){return;}alX(jZ);an.splice(PF,1);an.splice(jZ,0,C);if(C.get_type()===IPCC.Web.UI.MarkType.Highlight||C.get_type()===IPCC.Web.UI.MarkType.HighlightText||C.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||C.get_type()===IPCC.Web.UI.MarkType.DocumentHyperlink||C.get_type()===IPCC.Web.UI.MarkType.Strikethrough||(C.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&C.aX!==undefined)){return;}var F=new IPCC.Web.UI.MarkEventArgs();F.mark=C;F.zIndex=jZ;F.oldZIndex=PF;F.length=1;V.aP('markReordered',F);};function XZ(fV,fm,ew){if(!fV){return undefined;}var jP={hG:'line-rectangles',dK:[],ah:{}};IPCC.J.forEach(fV,function(h){jP.dK.push({hG:'rectangle',dK:[],ah:{x:h.x,y:h.y,height:h.height,width:h.width}});});return jP;};function aCw(hT){if(!hT){return undefined;}var jP={hG:'inputMask',dK:[],ah:{value:IPCC.J.pu(hT.value)}};IPCC.J.forEach(hT.translations,function(G,bD){jP.dK.push({hG:'translation',dK:[],ah:{key:IPCC.J.pu(bD),value:IPCC.J.pu(G.toString())}});});return jP;};function VA(cX){if(!cX){return undefined;}var mz=cX.get_dataKeys();if(mz.length===0){return undefined;}var jP={hG:'data',dK:[],ah:{}};IPCC.J.forEach(mz,function(bD){var G=cX.get_data(bD);jP.dK.push({hG:'kvp',dK:[],ah:{key:bD,value:G}});});return jP;};function apL(cC){if(!cC){return undefined;}var At={hG:'comment',dK:[],ah:{}};At.ah.text=IPCC.J.pu(cC.get_text());At.ah.created=cC.get_creationTime();var jP=VA(cC.get_data());if(jP){At.dK.push(jP);}return At;};function arH(dq){if(!dq||dq.get_length()===0){return undefined;}var Wb={hG:'conversation',dK:[],ah:{}};var aik={hG:'comments',dK:[],ah:{}};Wb.dK.push(aik);dq.forEach(function(cC){var At=apL(cC);if(At){aik.dK.push(At);}});var jP=VA(dq.get_data());if(jP){Wb.dK.push(jP);}return Wb;};this.atL=function(C,fm,ew,uQ){var bC=C.get_type();var jM=false;var js;var hv;var akf;var Xh;var hF,rO,qS,aS;var aZ={hG:'annotation',dK:[],ah:{}};if(!C.ah.kS){aZ.ah.nodeId=V.aqD();}else{aZ.ah.nodeId=C.ah.kS;}var JZ,Bp="",oH="";if(C.get_lineColor()){var Yr=C.get_lineColor();if(Yr==='transparent'){aZ.ah.lineColor=Yr;}else{JZ=Yr.replace(/#/,"");Bp=parseInt(JZ,16);oH=Bp.toString();aZ.ah.lineColor=oH;}}aZ.ah.interactionMode=C.get_interactionMode();aZ.ah.stampSize='122';var Qa={};Qa[IPCC.Web.UI.MarkType.Stamp]=true;Qa[IPCC.Web.UI.MarkType.ImageStampAnnotation]=true;Qa[IPCC.Web.UI.MarkType.ImageStampRedaction]=true;if((bC===IPCC.Web.UI.MarkType.Rectangle&&C.get_opacity()<255|| !C.hL())&&Qa[bC]!==true){aZ.ah.opacity=C.get_opacity();}if(C.get_conversation().get_length()>0){aZ.dK.push(arH(C.get_conversation()));}var jP=VA(C.get_data());if(jP){aZ.dK.push(jP);}jM=false;switch(bC){case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.Ellipse:hv=C.get_fillColor();if(hv==='transparent'){aZ.ah.fillColor=hv;}else if(hv){js=hv.replace(/#/,"");aZ.ah.fillColor=parseInt(js,16).toString();}else{aZ.ah.fillColor=oH;}if(C.get_fillVisible()){if(C.get_type()===IPCC.Web.UI.MarkType.Rectangle){if(C.get_opacity()===255){if(C.hL()===true){aZ.ah.drawType='rectangle_filled_redact';if(C.aX){aZ.ah.highlightGroupID=C.aX;}}else{aZ.ah.drawType='rectangle_filled';}}else{if(C.hL()===true){aZ.ah.drawType='rectangle_trans_redact';}else{aZ.ah.drawType='rectangle_trans';}}}else{if(C.get_opacity()===255){aZ.ah.drawType='circle_filled';if(C.hL()){aZ.ah.drawType='circle_filled_redact';}}else{aZ.ah.drawType='circle_trans';if(C.hL()){aZ.ah.drawType='circle_trans_redact';}}}}else{if(C.get_type()===IPCC.Web.UI.MarkType.Rectangle){aZ.ah.drawType='rectangle';aZ.ah.fillColor=oH;}else{aZ.ah.drawType='circle';aZ.ah.fillColor=oH;}}aZ.ah.dragDirection='br';var h=C.get_rectangle();aZ.ah.x=h.x;aZ.ah.y=h.y;aZ.ah.x_percent=h.x/fm;aZ.ah.y_percent=h.y/ew;aZ.ah.height_percent=h.height/ew;aZ.ah.width_percent=h.width/fm;aZ.ah.height=h.height;aZ.ah.width=h.width;break;case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:aZ.ah.lineWidth=C.get_lineWidth();jM=true;break;case IPCC.Web.UI.MarkType.TextSelectionRedaction:aZ.ah.highlightGroupID=C.aX;aZ.ah.drawType='text_selection_redaction';if(C.cO&&C.cO.length>0){aZ.ah.startIndex=C.bf;aZ.ah.selectedText=C.cO;aZ.ah.textLength=C.da;}break;case IPCC.Web.UI.MarkType.Text:var jQ=C.get_rectangle();aZ.ah.x=jQ.x;aZ.ah.y=jQ.y;aZ.ah.x_percent=jQ.x/fm;aZ.ah.y_percent=jQ.y/ew;aZ.ah.height_percent=jQ.height/ew;aZ.ah.width_percent=jQ.width/fm;aZ.ah.height=jQ.height;aZ.ah.width=jQ.width;aZ.ah.maxLength=C.get_maxLength();hv=C.get_fillColor();if(C.hL()===true){aZ.ah.drawType='text_redact';}else{aZ.ah.drawType='text';aZ.ah.opacity=C.get_opacity();}if(hv==='transparent'){aZ.ah.fillColor=hv;}else if(hv){js=hv.replace(/#/,"");aZ.ah.fillColor=parseInt(js,16).toString();}else{aZ.ah.fillColor='16776960';}var be='';be="<TEXTFORMAT LEADING=\"2\">";switch(C.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:be+="<P ALIGN=\"center\" ";break;case IPCC.Web.UI.HorizontalAlignment.Left:be+="<P ALIGN=\"left\" ";break;case IPCC.Web.UI.HorizontalAlignment.Right:be+="<P ALIGN=\"right\" ";break;}be+=">";be+="<FONT ";rO=C.get_fontName();be+="FACE="+"\""+rO+"\" ";qS=C.get_fontSize().toString();be+="SIZE= \""+qS+"\" ";hF="\""+C.get_textColor()+"\" ";be+="COLOR="+hF+" ";be+="LETTERSPACING=\"0\" ";be+="KERNING=\"0\" ";be+=">";var cV=C.get_fontStyle();if(cV&IPCC.Web.UI.FontStyle.Bold){be+="<B>";}if(cV&IPCC.Web.UI.FontStyle.Italic){be+="<I>";}if(cV&IPCC.Web.UI.FontStyle.Underline){be+="<U>";}if(cV&IPCC.Web.UI.FontStyle.Strikeout){be+="<S>";}aS=C.get_text();aS=IPCC.J.pu(aS);be+=aS;if(cV&IPCC.Web.UI.FontStyle.Strikeout){be+="</S>";}if(cV&IPCC.Web.UI.FontStyle.Underline){be+="</U>";}if(cV&IPCC.Web.UI.FontStyle.Italic){be+="</I>";}if(cV&IPCC.Web.UI.FontStyle.Bold){be+="</B>";}be+="</FONT>";be+="</P>";be+="</TEXTFORMAT>";break;case IPCC.Web.UI.MarkType.Highlight:h=C.get_rectangle();aZ.ah.x=h.x;aZ.ah.y=h.y;aZ.ah.x_percent=h.x/fm;aZ.ah.y_percent=h.y/ew;aZ.ah.height_percent=h.height/ew;aZ.ah.width_percent=h.width/fm;aZ.ah.height=h.height;aZ.ah.width=h.width;aZ.ah.drawType='highlight';aZ.ah.highlightGroupID=C.aX;aZ.ah.isHighlight=C.ib;hv=C.get_fillColor();if(hv){js=hv.replace(/#/,"");aZ.ah.fillColor=parseInt(js,16).toString();aZ.ah.lineColor=parseInt(js,16).toString();}else{aZ.ah.fillColor=oH;}break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:h=C.get_rectangle();aZ.ah.x=h.x;aZ.ah.y=h.y;aZ.ah.height=h.height;aZ.ah.width=h.width;aZ.ah.drawType='text_hyperlink_annotation';aZ.ah.href=IPCC.J.pu(C.mu);aZ.ah.startIndex=C.bf;aZ.ah.selectedText=C.cO;aZ.ah.textLength=C.da;aZ.ah.highlightGroupID=C.aX;aZ.ah.isHighlight=C.ib;hv=C.get_fillColor();if(hv){js=hv.replace(/#/,"");aZ.ah.fillColor=parseInt(js,16).toString();aZ.ah.lineColor=parseInt(js,16).toString();}else{aZ.ah.fillColor=oH;}aZ.dK.push(XZ(C.ab,fm,ew));break;case IPCC.Web.UI.MarkType.HighlightText:h=C.get_rectangle();aZ.ah.x=h.x;aZ.ah.y=h.y;aZ.ah.x_percent=h.x/fm;aZ.ah.y_percent=h.y/ew;aZ.ah.height_percent=h.height/ew;aZ.ah.width_percent=h.width/fm;aZ.ah.height=h.height;aZ.ah.width=h.width;aZ.ah.drawType='highlightText';aZ.ah.startIndex=C.bf;aZ.ah.selectedText=C.cO;aZ.ah.textLength=C.da;aZ.ah.highlightGroupID=C.aX;aZ.ah.isHighlight=C.ib;hv=C.get_fillColor();if(hv){js=hv.replace(/#/,"");aZ.ah.fillColor=parseInt(js,16).toString();aZ.ah.lineColor=parseInt(js,16).toString();}else{aZ.ah.fillColor=oH;}aZ.dK.push(XZ(C.ab,fm,ew));break;case IPCC.Web.UI.MarkType.RectangleRedaction:h=C.get_rectangle();aZ.ah.drawType='rectangle_filled_redact';aZ.ah.x=h.x;aZ.ah.y=h.y;aZ.ah.x_percent=h.x/fm;aZ.ah.y_percent=h.y/ew;aZ.ah.height_percent=h.height/ew;aZ.ah.width_percent=h.width/fm;aZ.ah.height=h.height;aZ.ah.width=h.width;aZ.ah.meta=IPCC.J.pu(C.get_text());aZ.ah.stampSize=C.get_fontSize();aZ.ah.lineWidth=C.get_lineWidth();hv=C.get_fillColor();if(hv){js=hv.replace(/#/,"");aZ.ah.fillColor=parseInt(js,16).toString();}else{aZ.ah.fillColor=oH;}JZ=C.get_lineColor();if(JZ){Bp=JZ.replace(/#/,"");aZ.ah.lineColor=parseInt(Bp,16).toString();}else{aZ.ah.lineColor=oH;}Xh=C.get_textColor();if(Xh){akf=Xh.replace(/#/,"");aZ.ah.fontColor=parseInt(akf,16).toString();}else{aZ.ah.fontColor=oH;}if(C.aX){aZ.ah.highlightGroupID=C.aX;}break;case IPCC.Web.UI.MarkType.Stamp:hv=C.get_fillColor();if(hv){js=hv.replace(/#/,"");aZ.ah.fillColor=parseInt(js,16).toString();aZ.ah.lineColor=parseInt(js,16).toString();}else{aZ.ah.fillColor=oH;}h=C.get_rectangle();aZ.ah.x=h.x;aZ.ah.y=h.y;aZ.ah.x_percent=h.x/fm;aZ.ah.y_percent=h.y/ew;aZ.ah.height_percent=h.height/ew;aZ.ah.width_percent=h.width/fm;aZ.ah.height=h.height;aZ.ah.width=h.width;if(C.hL()===true){aZ.ah.drawType='stamp_redact';}else{aZ.ah.drawType='stamp';}aS=C.get_text();aZ.ah.stampSize=C.stampSize;aZ.dK.push('<![CDATA['+aS+']]>');break;case IPCC.Web.UI.MarkType.Freehand:case IPCC.Web.UI.MarkType.SignaturePath:if(C.get_type()===IPCC.Web.UI.MarkType.Freehand){aZ.ah.drawType='freehand';}else{aZ.ah.drawType='signature_path';switch(C.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:aZ.ah.align='center';break;case IPCC.Web.UI.HorizontalAlignment.Left:aZ.ah.align='left';break;case IPCC.Web.UI.HorizontalAlignment.Right:aZ.ah.align='right';break;}}be=C.get_pathString();aZ.ah.pathWidth=C.get_pathWidth();aZ.ah.pathHeight=C.get_pathHeight();h=C.get_rectangle();aZ.ah.x=h.x;aZ.ah.y=h.y;aZ.ah.x_percent=h.x/fm;aZ.ah.y_percent=h.y/ew;aZ.ah.height_percent=h.height/ew;aZ.ah.width_percent=h.width/fm;aZ.ah.height=h.height;aZ.ah.width=h.width;break;case IPCC.Web.UI.MarkType.SignatureText:hv=C.get_fillColor();var cP;if(hv){js=hv.replace(/#/,"");aZ.ah.fillColor="";aZ.ah.lineColor="";cP=parseInt(js,16).toString();}else{aZ.ah.fillColor="";cP=oH;}h=C.get_rectangle();aZ.ah.x=h.x;aZ.ah.y=h.y;aZ.ah.x_percent=h.x/fm;aZ.ah.y_percent=h.y/ew;aZ.ah.height_percent=h.height/ew;aZ.ah.width_percent=h.width/fm;aZ.ah.height=h.height;aZ.ah.width=h.width;aZ.ah.opacity=0;aZ.ah.drawType='signature_text';aZ.ah.stampSize=C.stampSize;aZ.ah.fontWidth=C.zp;aZ.ah.fontHeight=C.Az;be='';be="<TEXTFORMAT LEADING=\"2\">";switch(C.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:be+="<P ALIGN=\"center\" ";break;case IPCC.Web.UI.HorizontalAlignment.Left:be+="<P ALIGN=\"left\" ";break;case IPCC.Web.UI.HorizontalAlignment.Right:be+="<P ALIGN=\"right\" ";break;}be+=">";be+="<FONT ";rO=C.get_fontName();be+="FACE="+"\""+rO+"\" ";qS=C.stampSize.toString();be+="SIZE= \""+qS+"\" ";hF="\""+C.get_fillColor()+"\" ";be+="COLOR="+hF+" ";be+="LETTERSPACING=\"0\" ";be+="KERNING=\"0\" ";be+=">";aS=IPCC.J.pu(C.get_text());be+=aS;be+="</FONT>";be+="</P>";be+="</TEXTFORMAT>";break;case IPCC.Web.UI.MarkType.TextAreaSignature:jQ=C.get_rectangle();aZ.ah.x=jQ.x;aZ.ah.y=jQ.y;aZ.ah.x_percent=jQ.x/fm;aZ.ah.y_percent=jQ.y/ew;aZ.ah.height_percent=jQ.height/ew;aZ.ah.width_percent=jQ.width/fm;aZ.ah.height=jQ.height;aZ.ah.width=jQ.width;aZ.ah.maxLength=C.hD;aZ.ah.maxFontSize=C.fg;if(uQ){aZ.ah.drawType='text';}else{aZ.ah.drawType='text_area_signature';}aZ.ah.fillColor='transparent';be='';be="<TEXTFORMAT LEADING=\"2\">";switch(C.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:be+="<P ALIGN=\"center\" ";break;case IPCC.Web.UI.HorizontalAlignment.Left:be+="<P ALIGN=\"left\" ";break;case IPCC.Web.UI.HorizontalAlignment.Right:be+="<P ALIGN=\"right\" ";break;}be+=">";be+="<FONT ";rO=C.get_fontName();be+="FACE="+"\""+rO+"\" ";qS=C.ck.toString();be+="SIZE= \""+qS+"\" ";hF="\""+C.get_textColor()+"\" ";be+="COLOR="+hF+" ";be+="LETTERSPACING=\"0\" ";be+="KERNING=\"0\" ";be+=">";cV=C.get_fontStyle();if(cV&IPCC.Web.UI.FontStyle.Bold){be+="<B>";}if(cV&IPCC.Web.UI.FontStyle.Italic){be+="<I>";}if(cV&IPCC.Web.UI.FontStyle.Underline){be+="<U>";}if(cV&IPCC.Web.UI.FontStyle.Strikeout){be+="<S>";}aS=C.get_text();aS=IPCC.J.pu(aS);be+=aS;if(cV&IPCC.Web.UI.FontStyle.Strikeout){be+="</S>";}if(cV&IPCC.Web.UI.FontStyle.Underline){be+="</U>";}if(cV&IPCC.Web.UI.FontStyle.Italic){be+="</I>";}if(cV&IPCC.Web.UI.FontStyle.Bold){be+="</B>";}be+="</FONT>";be+="</P>";be+="</TEXTFORMAT>";break;case IPCC.Web.UI.MarkType.TextLine:if(!uQ){h=C.get_rectangle();aZ.ah.x=h.x;aZ.ah.y=h.y;aZ.ah.x_percent=h.x/fm;aZ.ah.y_percent=h.y/ew;aZ.ah.height_percent=h.height/ew;aZ.ah.maxLength=C.get_maxLength();aZ.ah.width_percent=h.width/fm;aZ.ah.height=h.height;aZ.ah.width=h.width;aZ.ah.opacity=0;aZ.ah.drawType='text_input_signature';aZ.ah.stampSize=C.stampSize;aZ.ah.fontWidth=C.zp;aZ.ah.fontHeight=C.Az;be='';be="<TEXTFORMAT LEADING=\"2\">";switch(C.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:be+="<P ALIGN=\"center\" ";break;case IPCC.Web.UI.HorizontalAlignment.Left:be+="<P ALIGN=\"left\" ";break;case IPCC.Web.UI.HorizontalAlignment.Right:be+="<P ALIGN=\"right\" ";break;}be+=">";be+="<FONT ";rO=C.get_fontName();be+="FACE="+"\""+rO+"\" ";qS=C.stampSize.toString();be+="SIZE= \""+qS+"\" ";hF="\""+C.get_textColor()+"\" ";be+="COLOR="+hF+" ";be+="LETTERSPACING=\"0\" ";be+="KERNING=\"0\" ";be+=">";aS=IPCC.J.pu(C.get_text());be+=aS;be+="</FONT>";be+="</P>";be+="</TEXTFORMAT>";var aiD=aCw(C.get_mask());if(aiD){aZ.dK.push(aiD);}}else{h=C.get_rectangle();var EK=C.stampSize;var pd;if(!C.HG|| !C.pd){var asd=IPCC.J.aiJ(C.get_text(),C.get_fontName(),h.width,h.height,{tK:"pre",ck:EK+"px"});pd=asd;C.HG=true;C.pd=pd;}else{pd=C.pd;}EK=pd.fontSize;var fY=pd.width/h.width,dG=1.0,MIN_BUFFER=0.85;if(/mono/i.test(C.get_fontName())){MIN_BUFFER=0.75;}if(fY>MIN_BUFFER){dG=MIN_BUFFER*h.width/pd.width;EK=EK*dG;}var adA=h.width,aFJ=pd.height*dG,afN=h.height-(h.height-aFJ)/2,aez=h.x,akU=h.y+(h.height-pd.height)/2+(pd.height*(1-dG));aZ.ah.x=aez;aZ.ah.y=akU;aZ.ah.x_percent=aez/fm;aZ.ah.y_percent=akU/ew;aZ.ah.height_percent=afN/ew;aZ.ah.width_percent=adA/fm;aZ.ah.height=afN;aZ.ah.width=adA;aZ.ah.opacity=0;aZ.ah.drawType='text_redact';be='';be="<TEXTFORMAT>";switch(C.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:be+="<P ALIGN=\"center\" ";break;case IPCC.Web.UI.HorizontalAlignment.Left:be+="<P ALIGN=\"left\" ";break;case IPCC.Web.UI.HorizontalAlignment.Right:be+="<P ALIGN=\"right\" ";break;}be+=">";be+="<FONT ";rO=C.get_fontName();be+="FACE="+"\""+rO+"\" ";if(C.awN){qS=(EK/C.awN).toString();}else{qS=EK.toString();}be+="SIZE= \""+qS+"\" ";hF="\""+C.get_textColor()+"\" ";be+="COLOR="+hF+" ";be+="LETTERSPACING=\"0\" ";be+="KERNING=\"0\" ";be+=">";aS=IPCC.J.pu(C.get_text());be+=aS;be+="</FONT>";be+="</P>";be+="</TEXTFORMAT>";}break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:aZ.ah.drawType=(bC===IPCC.Web.UI.MarkType.ImageStampRedaction)?'imagestamp_redact':'imagestamp';h=C.get_rectangle();aZ.ah.x=h.x;aZ.ah.y=h.y;aZ.ah.height=h.height;aZ.ah.width=h.width;aZ.ah.lineWidth=C.get_lineWidth();aZ.ah.x_percent=h.x/fm;aZ.ah.y_percent=h.y/ew;aZ.ah.height_percent=h.height/ew;aZ.ah.width_percent=h.width/fm;aZ.ah.imageStampId=C.pF;break;case IPCC.Web.UI.MarkType.Strikethrough:h=C.get_rectangle();aZ.ah.x=h.x;aZ.ah.y=h.y;aZ.ah.height=h.height;aZ.ah.width=h.width;aZ.ah.drawType='strikethrough';aZ.ah.startIndex=C.bf;aZ.ah.selectedText=C.cO;aZ.ah.textLength=C.da;aZ.ah.highlightGroupID=C.aX;aZ.ah.isHighlight=C.ib;aZ.dK.push(XZ(C.ab,fm,ew));break;}if(jM){aZ.ah.lineWidth=C.get_lineWidth();var ax=C.get_boundingRectangle();aZ.ah.x=ax.x;aZ.ah.y=ax.y;aZ.ah.x_percent=ax.x/fm;aZ.ah.y_percent=ax.y/ew;aZ.ah.height_percent=ax.height/ew;aZ.ah.width_percent=ax.width/fm;aZ.ah.height=ax.height;aZ.ah.width=ax.width;if(bC===IPCC.Web.UI.MarkType.Line){if(C.get_endHeadType()===IPCC.Web.UI.LineHeadType.None){aZ.ah.drawType='line';}else{aZ.ah.drawType='arrow';}}else{aZ.ah.drawType='polyline';}aZ.ah.lineWidth=C.get_lineWidth();var aJ=C.get_points();if(bC===IPCC.Web.UI.MarkType.Line){if((aJ.getPoint(0).x<aJ.getPoint(1).x)&&(aJ.getPoint(0).y>aJ.getPoint(1).y)){aZ.ah.dragDirection='tr';}else if((aJ.getPoint(0).x>aJ.getPoint(1).x)&&(aJ.getPoint(0).y>aJ.getPoint(1).y)){aZ.ah.dragDirection='tl';}else if((aJ.getPoint(0).x>aJ.getPoint(1).x)&&(aJ.getPoint(0).y<aJ.getPoint(1).y)){aZ.ah.dragDirection='bl';}else if((aJ.getPoint(0).x<aJ.getPoint(1).x)&&(aJ.getPoint(0).y<aJ.getPoint(1).y)){aZ.ah.dragDirection='br';}else{aZ.ah.dragDirection='br';}}else{var wk=[];var cr=aJ.get_length(),bx;if(cr>1){for(var bj=0;bj<aJ.get_length();bj++){bx=aJ.getPoint(bj);wk.push({x:bx.x,y:bx.y});}be=JSON.stringify(wk);}}if(Bp){aZ.ah.fillColor=Bp;}else{aZ.ah.fillColor="";}}else{aZ.ah.lineWidth=C.get_lineWidth();aZ.ah.dragDirection='br';}if(C.get_type()!==IPCC.Web.UI.MarkType.RectangleRedaction){aZ.ah.meta='';}aZ.ah.label='';var dU=new Date();aZ.ah.saveDate=IPCC.J.ayz(dU);aZ.ah.saveTime=IPCC.J.axQ(dU);aZ.ah.uuid='';aZ.ah.formUser='';aZ.ah.created=IPCC.J.aij(C.get_dateCreated());aZ.ah.modified=IPCC.J.aij(C.get_dateModified());if(C.get_type()===IPCC.Web.UI.MarkType.Text||C.get_type()===IPCC.Web.UI.MarkType.Freehand||C.get_type()===IPCC.Web.UI.MarkType.SignaturePath||C.get_type()===IPCC.Web.UI.MarkType.SignatureText||C.get_type()===IPCC.Web.UI.MarkType.Polyline||C.get_type()===IPCC.Web.UI.MarkType.TextAreaSignature||C.get_type()===IPCC.Web.UI.MarkType.TextLine){aZ.dK.push('<![CDATA['+be+']]>');}else{aZ.dK.push('');}return aZ;};this.aDN=function(bb,fm,ew,bP){var kg={hG:'documentAnnotations',dK:[],ah:{}};var cz={hG:'pages',dK:[],ah:{}};kg.dK.push(cz);var mE={hG:'highlights',dK:[],ah:{}};kg.dK.push(mE);var uE={},re=[];var aN={hG:'page',dK:[],ah:{id:(bb+1).toString(),pageWidth:fm,pageHeight:ew}};cz.dK.push(aN);bP=bP||{};var aiH=(bP.includeAnnotations!==undefined)? ! !bP.includeAnnotations:true,aib=(bP.includeRedactions!==undefined)? ! !bP.includeRedactions:true,ajE=(bP.includeSignatures!==undefined)? ! !bP.includeSignatures:false,uQ=(bP.uQ!==undefined)? ! !bP.uQ:false,RH=(bP.Ft!==undefined)?bP.Ft:false,aDI= ! !uQ,amA=RH?RH:an;for(var L=0;L<amA.length;L++){var C=amA[L];var bC=C.get_type();if(C.get_type()===IPCC.Web.UI.MarkType.Highlight){continue;}if(aDI&& !C.get_visible()){continue;}if(!RH){if(aiH===false&&aib===false&&ajE===false){break;}if(aiH===false){if(bC===IPCC.Web.UI.MarkType.Rectangle||bC===IPCC.Web.UI.MarkType.Ellipse||bC===IPCC.Web.UI.MarkType.Line||bC===IPCC.Web.UI.MarkType.Text||bC===IPCC.Web.UI.MarkType.Stamp||bC===IPCC.Web.UI.MarkType.Highlight||bC===IPCC.Web.UI.MarkType.Strikethrough||bC===IPCC.Web.UI.MarkType.HighlightText||bC===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||bC===IPCC.Web.UI.MarkType.Freehand||bC===IPCC.Web.UI.MarkType.ImageStampAnnotation||bC===IPCC.Web.UI.MarkType.Polyline){if(C.hL()===false){continue;}}}if(aib===false){if(C.hL()===true){continue;}if(bC===IPCC.Web.UI.MarkType.RectangleRedaction||bC===IPCC.Web.UI.MarkType.TextSelectionRedaction||bC===IPCC.Web.UI.MarkType.ImageStampRedaction){continue;}}if(ajE===false){if(bC===IPCC.Web.UI.MarkType.SignaturePath||bC===IPCC.Web.UI.MarkType.SignatureText||bC===IPCC.Web.UI.MarkType.SignatureImage||bC===IPCC.Web.UI.MarkType.TextAreaSignature||bC===IPCC.Web.UI.MarkType.TextLine){continue;}}}switch(bC){case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:uE[C.pF]={hG:'stampImage',dK:[],ah:{imageStampId:C.pF,base64format:C.bY()}};break;}aN.dK.push(this.atL(C,fm,ew,uQ));}for(var GY in uE){if(uE.hasOwnProperty(GY)){re.push(uE[GY]);}}return{kg:kg,re:re};};this.aDj=function(){var fl={m:[]};var L;for(L=0;L<an.length;L++){fl.m.push(an[L].aEf());}V.aP('marksSaved',{});var aeq="";aeq=JSON.stringify(fl);return aeq;};this.ya=function(R){bi.addHandler('markAdded',R);};this.Ah=function(R){bi.removeHandler('markAdded',R);};this.Ja=function(R){bi.addHandler('markChanged',R);};this.Ii=function(R){bi.removeHandler('markChanged',R);};this.xC=function(R){bi.addHandler('markRemoved',R);};this.AP=function(R){bi.removeHandler('markRemoved',R);};this.Kq=function(R){bi.addHandler('markReordered',R);};this.FI=function(R){bi.removeHandler('markReordered',R);};this.Xy=function(R){bi.addHandler('marksLoaded',R);};this.VS=function(R){bi.removeHandler('marksLoaded',R);};this.aIm=function(R){bi.addHandler('marksSaved',R);};this.aIn=function(R){bi.removeHandler('marksSaved',R);};this.Kv=function(R){bi.addHandler('markSelectionChanged',R);};this.Gw=function(R){bi.removeHandler('markSelectionChanged',R);};this.Kx=function(R){bi.addHandler('markTextSelectionChanged',R);};this.ET=function(R){bi.removeHandler('markTextSelectionChanged',R);};this.wW=function(R){bi.addHandler('commentAdded',R);};this.DV=function(R){bi.removeHandler('commentAdded',R);};this.vW=function(R){bi.addHandler('commentRemoved',R);};this.Es=function(R){bi.removeHandler('commentRemoved',R);};this.rD=function(R){bi.addHandler('commentChanged',R);};this.ue=function(R){bi.removeHandler('commentChanged',R);};this.kk=function(R){bi.addHandler('propertyChanged',R);};this.nv=function(R){bi.removeHandler('propertyChanged',R);};this.aP=function(dQ,F){var R=bi.getHandler(dQ);if(R!==null){R(this,F);}};this.dm=function(cG){var R=bi.getHandler("propertyChanged");if(R){R(this,new IPCC.pR(cG));}};return this;};LT.prototype={get_markCount:function(){return this.WM();},get_selectedMarks:function(){return this.Cd();},toString:function(){return 'ArtPage with '+this.get_markCount()+' marks';},addMark:function(mark,mouseLocation){this.Qh(mark,mouseLocation);},forEachMark:function(method,context){this.Cu(method,context);},getMark:function(zIndex){return this.Qf(zIndex);},getZIndexOfMark:function(mark){return this.nH(mark);},loadFromJson:function(json){this.aAs(json);},removeAllMarks:function(){this.Ud();},removeMark:function(mark){this.vD(mark);},reorderMark:function(mark,zIndex){this.aaD(mark,zIndex);},saveToJson:function(){return this.aDj();},add_markAdded:function(handler){this.ya(handler);},remove_markAdded:function(handler){this.Ah(handler);},add_markChanged:function(handler){this.Ja(handler);},remove_markChanged:function(handler){this.Ii(handler);},add_markRemoved:function(handler){this.xC(handler);},remove_markRemoved:function(handler){this.AP(handler);},add_markReordered:function(handler){this.Kq(handler);},remove_markReordered:function(handler){this.FI(handler);},add_marksLoaded:function(handler){this.Xy(handler);},remove_marksLoaded:function(handler){this.VS(handler);},add_markSelectionChanged:function(handler){this.Kv(handler);},remove_markSelectionChanged:function(handler){this.Gw(handler);},add_markTextSelectionChanged:function(handler){this.Kx(handler);},remove_markTextSelectionChanged:function(handler){this.ET(handler);},add_commentAdded:function(handler){this.wW(handler);},remove_commentAdded:function(handler){this.DV(handler);},add_commentRemoved:function(handler){this.vW(handler);},remove_commentRemoved:function(handler){this.Es(handler);},add_commentChanged:function(handler){this.rD(handler);},remove_commentChanged:function(handler){this.ue(handler);}};LT.registerClass=dN;LT.registerClass('IPCC.Web.UI.ArtPage');module.exports=LT;},{"../../IPCC.Util":28}],66:[function(require,module,exports){var fi=require('../../IPCC.Util').regEnum;var Oe=function(){};Oe.registerEnum=fi;Oe.prototype={Line:0,Triangle:1};Oe.registerEnum('IPCC.Web.UI.CalloutType',false);module.exports=Oe;},{"../../IPCC.Util":28}],67:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var Mh=function(text){var bi=new IPCC.Web.UI.jc();var cX=new IPCC.Web.UI.Data();this.YM=IPCC.J.wT(new Date());this.aS=text;this.anP=function(aS){if(aS===this.aS){return;}this.aS=aS;var F=new IPCC.Web.UI.CommentEventArgs();F.comment=this;F.length=1;this.aP('commentChanged',F);};this.axf=function(){return this.aS;};this.aBs=function(azN){this.YM=azN;};this.auw=function(){return this.YM;};this.rD=function(R){bi.addHandler('commentChanged',R);};this.ue=function(R){bi.removeHandler('commentChanged',R);};this.aP=function(dQ,F){var R=bi.getHandler(dQ);if(R!==null){R(this,F);}};this.vn=function(){return cX;};return this;};Mh.prototype={toString:function(){return 'Comment('+this.creationTime+', '+this.text+')';},add_commentChanged:function(handler){this.rD(handler);},remove_commentChanged:function(handler){this.ue(handler);},get_text:function(){return this.axf();},set_text:function(text){this.anP(text);},get_creationTime:function(){return this.auw();},set_creationTime:function(isoTimeString){this.aBs(isoTimeString);},get_data:function(){return this.vn();}};Mh.registerClass=dN;Mh.registerClass('IPCC.Web.UI.Comment');module.exports=Mh;},{"../../IPCC.Util":28}],68:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var LV=function(){return this;};LV.registerClass=dN;LV.prototype={};LV.registerClass('IPCC.Web.UI.CommentEventArgs');module.exports=LV;},{"../../IPCC.Util":28}],69:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var Ny=function(avS){var gX=[];var bi=new IPCC.Web.UI.jc();var cX=new IPCC.Web.UI.Data();var C=avS;var V=this;function PM(aH,F){V.aP('commentChanged',F);};this.Fm=function(cC){cC.add_commentChanged(PM);gX.push(cC);var F=new IPCC.Web.UI.CommentEventArgs();F.comment=cC;F.length=1;F.index=gX.length-1;this.aP('commentAdded',F);};this.aCB=function(cC){var TA= -1;IPCC.J.forEach(gX,function(el,idx){if(el===cC){TA=idx;}});if(TA=== -1){throw new IPCC.Web.UI.ImGearArgumentException('comment',"The provided comment was not found in the conversation.");}var aal=gX.splice(TA,1)[0];aal.ue(PM);var F=new IPCC.Web.UI.CommentEventArgs();F.comment=aal;F.length=1;this.aP('commentRemoved',F);};this.lf=function(jh,ci){var L;for(L=0;L<gX.length;L++){jh.call(ci,gX[L],L,this);}};this.ej=function(){return gX.length;};this.wW=function(R){bi.addHandler('commentAdded',R);};this.DV=function(R){bi.removeHandler('commentAdded',R);};this.rD=function(R){bi.addHandler('commentChanged',R);};this.ue=function(R){bi.removeHandler('commentChanged',R);};this.vW=function(R){bi.addHandler('commentRemoved',R);};this.Es=function(R){bi.removeHandler('commentRemoved',R);};this.vn=function(){return cX;};this.KC=function(){return C;};this.aP=function(dQ,F){var R=bi.getHandler(dQ);if(R!==null){R(this,F);}};return this;};Ny.prototype={toString:function(){return 'Conversation with '+this.get_length()+' comments';},addComment:function(comment){this.Fm(comment);},removeCommentInstance:function(comment){this.aCB(comment);},forEach:function(method,context){this.lf(method,context);},get_length:function(){return this.ej();},add_commentAdded:function(handler){this.wW(handler);},remove_commentAdded:function(handler){this.DV(handler);},add_commentChanged:function(handler){this.rD(handler);},remove_commentChanged:function(handler){this.ue(handler);},add_commentRemoved:function(handler){this.vW(handler);},remove_commentRemoved:function(handler){this.Es(handler);},get_data:function(){return this.vn();},get_mark:function(){return this.KC();}};Ny.registerClass=dN;Ny.registerClass('IPCC.Web.UI.Conversation');module.exports=Ny;},{"../../IPCC.Util":28}],70:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var RD=function(){this.cX={};this.vn=function(key){if(typeof key==='undefined'){return IPCC.J.extend({},this.cX);}else if(typeof key==='string'){return this.cX[key];}else{throw new IPCC.Web.UI.ImGearArgumentException("key","The argument must be a string.");}};this.aBx=function(key,value){if(typeof key!=='string'){throw new IPCC.Web.UI.ImGearArgumentException("key","The argument must be a string.");}if(typeof value==='string'){this.cX[key]=value;}else if(typeof value==='undefined'){delete this.cX[key];}else{throw new IPCC.Web.UI.ImGearArgumentException("value","The argument must be a string.");}return this;};this.auu=function(){var keys=[];IPCC.J.forEach(this.cX,function(value,key){keys.push(key);});return keys;};return this;};RD.prototype={toString:function(){return 'Data('+this.creationTime+', '+this.text+')';},get_data:function(key){return this.vn(key);},set_data:function(key,value){return this.aBx(key,value);},get_dataKeys:function(){return this.auu();}};RD.registerClass=dN;RD.registerClass('IPCC.Web.UI.Data');module.exports=RD;},{"../../IPCC.Util":28}],71:[function(require,module,exports){var fi=require('./../../IPCC.Util').regEnum;var Ok=function(){};Ok.prototype={Production:0,Development:1,Detailed:2};Ok.registerEnum=fi;Ok.registerEnum('IPCC.Web.UI.DebugErrorLevel',false);module.exports=Ok;},{"./../../IPCC.Util":28}],72:[function(require,module,exports){var fi=require('./../../IPCC.Util').regEnum;var MI=function(){};MI.prototype={FunctionCall:0,Exception:1,Custom:2,UserAction:3,Warning:4};MI.registerEnum=fi;MI.registerEnum('IPCC.Web.UI.DebugItemCause',false);module.exports=MI;},{"./../../IPCC.Util":28}],73:[function(require,module,exports){var dN=require('./../../IPCC.Util').regClass;var by=function(aDa){var ar=aDa;var aet=this.type=ar.type.toLowerCase();var MF=typeof ar.changedTouches!=='undefined';this.rawEvent=ar;this.altKey=ar.altKey;if(typeof(ar.button)!=='undefined'){this.button=(typeof(ar.which)!=='undefined')?ar.button:(ar.button===4)?IPCC.Web.UI.MouseButton.middleButton:(ar.button===2)?IPCC.Web.UI.MouseButton.rightButton:IPCC.Web.UI.MouseButton.leftButton;}if(aet==='keypress'){this.charCode=ar.charCode||ar.keyCode;}else if(ar.keyCode&&(ar.keyCode===46)){this.keyCode=127;}else{this.keyCode=ar.keyCode;}this.clientX=(MF)?ar.changedTouches[0].clientX:ar.clientX;this.clientY=(MF)?ar.changedTouches[0].clientY:ar.clientY;this.ctrlKey=ar.ctrlKey;this.target=ar.target?ar.target:ar.srcElement;function arU(au){var bm=0;var cu=0;while(au&& !isNaN(au.offsetLeft)&& !isNaN(au.offsetTop)){bm+=au.offsetLeft-au.scrollLeft;cu+=au.offsetTop-au.scrollTop;if(au.offsetparent){au=au.offsetParent;}else{au=au.parentNode;}}return{top:cu,left:bm};};var eC=""+aet;var Fk='key';if(eC.substr(0,Fk.length)!==Fk){if((typeof(ar.offsetX)!=='undefined')&&(typeof(ar.offsetY)!=='undefined')){this.offsetX=ar.offsetX;this.offsetY=ar.offsetY;}else if(this.target&&(this.target.nodeType!==3)&&(typeof(ar.clientX)==='number')){var MW=arU(this.target);var fr=this.target;var hH=fr.ownerDocument||fr.document||fr;var jS=hH.defaultView||hH.parentWindow;this.offsetX=(jS.pageXOffset||0)+ar.clientX-MW.left;this.offsetY=(jS.pageYOffset||0)+ar.clientY-MW.top;}}this.screenX=(MF)?ar.changedTouches[0].screenX:ar.screenX;this.screenY=(MF)?ar.changedTouches[0].screenY:ar.screenY;this.shiftKey=ar.shiftKey;};by.prototype={preventDefault:function(){if(arguments.length!==0){throw new IPCC.Web.UI.ImGearParameterCountException();}if(this.rawEvent.preventDefault){this.rawEvent.preventDefault();}else if(window.event){this.rawEvent.returnValue=false;}},stopPropagation:function(){if(arguments.length!==0){throw new IPCC.Web.UI.ImGearParameterCountException();}if(this.rawEvent.stopPropagation){this.rawEvent.stopPropagation();}else if(window.event){this.rawEvent.cancelBubble=true;}}};by.registerClass=dN;by.registerClass('IPCC.Web.UI.by');by.addHandler=function(element,eventName,handler,autoRemove){IPCC.Web.UI.by.Tg(element);if(eventName==="error"){throw new IPCC.Web.UI.ImGearInvalidOperationException(IPCC.jO.addHandlerCantBeUsedForError);}if(!element.bi){element.bi={};}var eventCache=element.bi[eventName];if(!eventCache){element.bi[eventName]=eventCache=[];}var browserHandler;if(element.addEventListener){browserHandler=function(e){return handler.call(element,new IPCC.Web.UI.by(e));};element.addEventListener(eventName,browserHandler,false);}else if(element.attachEvent){browserHandler=function(){var e={};try{var doc=element.ownerDocument||element.document||element;var fr=doc.defaultView||doc.parentWindow;e=fr.event;}catch(ex){}return handler.call(element,new IPCC.Web.UI.by(e));};element.attachEvent('on'+eventName,browserHandler);}eventCache[eventCache.length]={handler:handler,browserHandler:browserHandler,autoRemove:autoRemove};if(autoRemove){var d=element.dispose;if(d!==IPCC.Web.UI.by.adS){element.dispose=IPCC.Web.UI.by.adS;if(typeof(d)!=="undefined"){element.ahj=d;}}}};by.clearHandlers=function(element){IPCC.Web.UI.by.Tg(element);IPCC.Web.UI.by.agg(element,false);};by.agg=function(element,autoRemoving){if(element.bi){var cache=element.bi;for(var name in cache){if(cache.hasOwnProperty(name)){var handlers=cache[name];for(var i=handlers.length-1;i>=0;i--){var entry=handlers[i];if(!autoRemoving||entry.autoRemove){IPCC.Web.UI.by.removeHandler(element,name,entry.handler);}}}}element.bi=null;}};by.adS=function(){IPCC.Web.UI.by.agg(this,true);var d=this.ahj,type=typeof(d);if(type!=="undefined"){this.dispose=d;this.ahj=null;if(type==="function"){this.dispose();}}};by.removeHandler=function(element,eventName,handler){IPCC.Web.UI.by.cN(element,eventName,handler);};by.cN=function(element,eventName,handler){IPCC.Web.UI.by.Tg(element);var browserHandler=null;if((typeof(element.bi)!=='object')|| !element.bi){throw new IPCC.Web.UI.ImGearInvalidOperationException('DOM event handler was not added through the DomEvent.addHandler method.');}var cache=element.bi[eventName];if(!(cache instanceof Array)){throw new IPCC.Web.UI.ImGearInvalidOperationException('DOM event handler was not added through the DomEvent.addHandler method.');}for(var i=0,l=cache.length;i<l;i++){if(cache[i].handler===handler){browserHandler=cache[i].browserHandler;break;}}if(typeof(browserHandler)!=='function'){throw new IPCC.Web.UI.ImGearInvalidOperationException('Handler was not added through the IPCC.Web.UI.by.addHandler method.');}if(element.removeEventListener){element.removeEventListener(eventName,browserHandler,false);}else if(element.detachEvent){element.detachEvent('on'+eventName,browserHandler);}cache.splice(i,1);};by.Tg=function(element){if(element.tagName&&(element.tagName.toUpperCase()==="SCRIPT")){return;}var doc=element.ownerDocument||element.document||element;if((typeof(element.document)!=='object')&&(element!==doc)&&(typeof(element.nodeType)!=='number')){throw new IPCC.Web.UI.ImGearArgumentException("element",IPCC.jO.argumentDomNode);}};module.exports=by;},{"./../../IPCC.Util":28}],74:[function(require,module,exports){var fi=require('../../IPCC.Util').regEnum;var pe=function(){};pe.registerEnum=fi;pe.prototype={FullImage:0,FullWidth:1,FullHeight:2,ActualSize:3,OneToOne:4,Rectangle:5};pe.registerEnum('IPCC.Web.UI.FitType',false);module.exports=pe;},{"../../IPCC.Util":28}],75:[function(require,module,exports){var fi=require('../../IPCC.Util').regEnum;var OY=function(){};OY.registerEnum=fi;OY.prototype={Regular:0,Bold:1,Italic:2,Underline:4,Strikeout:8};OY.registerEnum('IPCC.Web.UI.FontStyle',true);module.exports=OY;},{"../../IPCC.Util":28}],76:[function(require,module,exports){var fi=require('../../IPCC.Util').regEnum;var Sj=function(){};Sj.registerEnum=fi;Sj.prototype={Tag:0,InlineHighLight:1,Link:2,Redaction:3,Strikethrough:4};Sj.registerEnum('IPCC.Web.UI.HighLight',false);module.exports=Sj;},{"../../IPCC.Util":28}],77:[function(require,module,exports){var fi=require('../../IPCC.Util').regEnum;var Rc=function(){};Rc.registerEnum=fi;Rc.prototype={Left:0,Center:16,Right:32};Rc.registerEnum('IPCC.Web.UI.HorizontalAlignment',false);module.exports=Rc;},{"../../IPCC.Util":28}],78:[function(require,module,exports){var fi=require('./../../IPCC.Util').regEnum;var Qr=function(){};Qr.registerEnum=fi;Qr.prototype={None:0,ArtDataService:1};Qr.registerEnum('IPCC.Web.UI.ImGearArtDataServices',false);module.exports=Qr;},{"./../../IPCC.Util":28}],79:[function(require,module,exports){var dN=require('./../../IPCC.Util').regClass;var BY=function(aV){var kt='';var gD='';var V=this;this.cz=new IPCC.Web.UI.ImGearPageCollection();this.Rk=undefined;this.cz.ba=this;var RX=false;this.sv=undefined;var eP=0;var Pe=IPCC.Web.UI.ImGearPageCountStatus.UnRequested;var bi=new IPCC.Web.UI.jc();this.jw=IPCC.Web.Gm.Sn(4,IPCC.Web.Qw());this.pL=IPCC.Web.fR.Jp.nz(this.jw);var xg=[];var lE=0;var mD=[];var Ea=[];var gZ={startPage:0,lastPage:0,requestCount:0,stopRequests:false,lastTimeout:1000};var VU=false;this.aP=function(dQ,F){var R=bi.getHandler(dQ);if(R!==null){try{R(V,F);}catch(e){IPCC.iG.Qj('raise event error in ImGearDocument, error: '+e.message);IPCC.iG.mb(e.message,IPCC.Web.UI.ImGearDocument,IPCC.Web.UI.DebugErrorLevel.Production,'ImGearDocument','');}}};function TJ(aH,F){if(F.length>0){V.aP('pageAdded',F);}};function UV(aH,F){if(F.length>0){V.aP('pageRemoved',F);}};function Ij(aH,F){V.aP('pageChanged',F);};this.cz.add_pageAdded(TJ);this.cz.add_pageRemoved(UV);this.cz.add_pageChanged(Ij);function aBW(){function aEI(hN,iT){var cQ=hN+'() threw an exception ';if(iT.name){cQ+='( '+iT.name+" ";}else{cQ+=".";}if(iT.message){cQ+="  exception message = "+iT.message;}if(iT.statusCode){cQ+="  exception statusCode = "+iT.statusCode;}cQ=cQ.replace(/\n/g," ");IPCC.iG.mb(cQ,IPCC.Web.UI.DebugItemCause.Exception,IPCC.Web.UI.DebugErrorLevel.Production,'ImGearDocument',"document");};this.aK=aEI;this.aP=function(dQ,F){var R=bi.getHandler(dQ);if(R!==null){R(V,F);}};};if(arguments.length===0){var cQ="ImGearDocument object creation requires parameters";throw new IPCC.Web.UI.ImGearArgumentException('ImGearDocument',cQ);}if(arguments.length>0){if(aV.documentIdentifier!==undefined){kt=aV.documentIdentifier;gD=IPCC.hE.sf(kt);}if(aV.encodedDocumentIdentifier!==undefined){var xL=aV.encodedDocumentIdentifier;if(aV.documentIdentifier!==undefined){gD=IPCC.hE.sf(kt);if(xL!==gD){throw new IPCC.Web.UI.ImGearArgumentException('documentIdentifier','When both are specified, documentIdentifier and encodedImageIdentifier must reference the same document.');}}else{kt=IPCC.hE.IH(aV.encodedDocumentIdentifier);}}if(aV.imageServicePath!==undefined){this.sv=aV.imageServicePath;}else{throw new IPCC.Web.UI.ImGearArgumentException('ImGearDocument','Document creation requires imageServicePath.');}var sI;if(aV.includeAllPages!==undefined){RX=aV.includeAllPages;if(RX===true){var awv=new aBW();var Xp=0;V.aG=new IPCC.hE(gD,0,0,0,0,0);var qZ=function(){eP=V.aG.eP;Pe=IPCC.Web.UI.ImGearPageCountStatus.Known;for(;Xp<eP;Xp++){var amZ=new IPCC.Web.UI.ImGearPage({pageNumber:Xp,ba:V});amZ.ba=V;V.cz.addPage(amZ);}};Pe=IPCC.Web.UI.ImGearPageCountStatus.RequestPending;try{this.aG.TC(this.sv,awv,qZ);}catch(e){Pe=IPCC.Web.UI.ImGearPageCountStatus.Failed;var dn=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dn.exception=e;V.aP('pageOpenFailed',dn);throw e;}}}else if(aV.pages!==undefined){if(aV.pages.length>0){var L=0;for(L=0;L<aV.pages.length;L++){var aA=aV.pages[L];aA.document=this;this.cz.addPage(aA);}}}else if(aV.pageNumber!==undefined){if(aV.pageRangeCount!==undefined){var pS=aV.pageRangeCount;if(pS>0){var aU;for(aU=aV.pageNumber;aU<=pS;aU++){sI=new IPCC.Web.UI.ImGearPage(aU);sI.ba=V;this.cz.addPage(sI);}}else if(pS===0){sI=new IPCC.Web.UI.ImgearPage({pageNumber:aV.pageNumber,ba:V});sI.ba=V;V.cz.addPage(sI);}}else{if(aV.selected){sI=new IPCC.Web.UI.ImGearPage({pageNumber:aV.pageNumber,ba:V,selected:true});}else{sI=new IPCC.Web.UI.ImGearPage({pageNumber:aV.pageNumber,ba:V});}sI.ba=V;V.cz.addPage(sI);}}}this.Jt=function(){return kt;};this.KI=function(){return gD;};this.aei=function(){return this.cz;};this.azx=function(){return eP;};this.azv=function(){return Pe;};this.aAc=function(){return RX;};this.aor=function(G){RX=G;this.dm('includeAllPages');};var oI=false;this.jj=function(){return oI;};this.nC=function(G){oI=G;};this.JL=function(R){bi.addHandler('pageAdded',R);};this.GM=function(R){bi.removeHandler('pageAdded',R);};this.IS=function(R){bi.addHandler('pageRemoved',R);};this.Gh=function(R){bi.removeHandler('pageRemoved',R);};this.IY=function(R){bi.addHandler('pageOpenFailed',R);};this.Ge=function(R){bi.removeHandler('pageOpenFailed',R);};this.kk=function(R){bi.addHandler('propertyChanged',R);};this.nv=function(R){bi.removeHandler('propertyChanged',R);};this.JQ=function(R){bi.addHandler('pageChanged',R);};this.HI=function(R){bi.removeHandler('pageChanged',R);};this.dm=function(cG){var R=bi.getHandler('propertyChanged');if(R){R(this,new IPCC.pR(cG));}};this.aAf=function(R){bi.addHandler('textPagesReceived',R);};this.azt=function(R){bi.removeHandler('textPagesReceived',R);};this.aAb=function(){return Ea.length;};this.azn=function(){return xg;};this.aAM=function(){return xg.length;};this.axH=function(){return gZ;};this.axj=function(){return VU;};this.aHl=function(G){VU=G;};this.aqu=function(gf){if(gZ.stopRequests===true){var F={};F.error=0;F.textPagesReceived=OJ(gf);if(F.textPagesReceived.length===0){if(lE>0&&lE<gf){for(var cg=lE;cg<gf;cg++){F.textPagesReceived.push(cg);}}}F.length=2;V.aP('textPagesReceived',F);return;}var iC=true;var JO=false;for(var L=0;L<lE;L++){if(Array.prototype.indexOf){if(xg.indexOf(L)<0){iC=false;JO=true;break;}}else{if(IPCC.Web.lw(xg,L)<0){JO=true;break;}}}if(JO){V.QK(L,undefined,gf);}else if(lE<gf){for(var bj=0;bj<gf;bj++){if(Array.prototype.indexOf){if(mD.indexOf(bj)<0){iC=false;break;}}else{if(IPCC.Web.lw(mD,bj)<0){iC=false;break;}}}if(!iC){JO=true;V.QK(bj,undefined,gf);}else{V.QK(lE,undefined,gf);}}else{JO=false;}};function OJ(gf){var YB=[],cg;if(mD.length>0){var iC=true;for(cg=0;cg<gf;cg++){iC=true;if(Array.prototype.indexOf){if(mD.indexOf(cg)<0){iC=false;}}else{if(IPCC.Web.lw(mD,cg)<0){iC=false;}}if(!iC){mD.push(cg);Ea.push(cg);YB.push(cg);}}}else{for(cg=0;cg<gf;cg++){mD.push(cg);Ea.push(cg);YB.push(cg);}}return YB;};this.QK=function(adf,aeN,gf){VU=true;var bf;if(!isNaN(adf)){bf=adf;}else{bf=0;}var BP;if(!isNaN(gf)){BP=gf;}var dj;if(!isNaN(aeN)){dj=aeN;}else if(!isNaN(BP)){dj=BP-1;}else{BP=gf;if(!isNaN(BP)){dj=BP-1;}}if(isNaN(dj)){dj=bf+1;}if(dj-bf>9){dj=bf+9;}function Ot(aS){var Vg=lE;var Ui=[];var iC=true;var az;for(var aN=0;aN<aS.pages.length;aN++){if(Array.prototype.indexOf){if(xg.indexOf(aS.pages[aN].number)<0){iC=false;}}else{if(IPCC.Web.lw(xg,aS.pages[aN].number)<0){iC=false;}}if(!iC){xg.push(aS.pages[aN].number);if(V.cz.iY(aS.pages[aN].number).dr().Cr()===false){az=V.cz.iY(aS.pages[aN].number);az.afF(aS.pages[aN]);az.agb(aS.pages[aN]);az.agy(aS.pages[aN].markup,aS.pages[aN].height,aS.pages[aN].width);}lE++;Ui.push(aS.pages[aN].number);mD.push(aS.pages[aN].number);if(!aS.pages[aN].text){Ea.push(aS.pages[aN].number);}}}var F={};if(aS.hasOwnProperty("errorCode")){F.error=0;V.pageExtractionFailed=true;F.textPagesReceived=Ui;F.length=2;for(var xO=gZ.startPage;xO<gZ.lastPage+1;xO++){iC=true;if(Array.prototype.indexOf){if(mD.indexOf(xO)<0){iC=false;}}else{if(IPCC.Web.lw(mD,xO)<0){iC=false;}}if(!iC){mD.push(xO);Ea.push(xO);F.textPagesReceived.push(xO);}}V.aP('textPagesReceived',F);gZ.stopRequests=true;return;}if(lE>Vg){F.textPagesReceived=Ui;F.length=2;F.error=0;}var nF=gZ.lastTimeout;if(gZ.startPage===bf&&gZ.lastPage===dj&&lE===Vg){if(gZ.requestCount<25){nF=nF+1000;gZ.requestCount++;}else{F.error=0;F.textPagesReceived=[];F.length=2;iC=true;var cg;for(cg=gZ.startPage;cg<gZ.lastPage+1;cg++){iC=true;if(Array.prototype.indexOf){if(mD.indexOf(cg)<0){iC=false;}}else{if(IPCC.Web.lw(mD,cg)<0){iC=false;}}if(!iC){mD.push(cg);Ea.push(cg);F.textPagesReceived.push(cg);}}if(F.textPagesReceived.length===0){if(lE>0&&lE<gf){for(cg=lE;cg<gf;cg++){F.textPagesReceived.push(cg);}}}gZ.stopRequests=true;V.aP('textPagesReceived',F);return;}}else{nF=1000;gZ.requestCount=0;}gZ.lastTimeout=nF;gZ.startPage=bf;gZ.lastPage=dj;setTimeout(function(){V.aqu(gf);},nF);if(lE>Vg){V.aP('textPagesReceived',F);}};function eZ(aC){var F={},gJ,av;try{var nQ=aC.getResponseHeader("Accusoft-Data-Encrypted");if(nQ==='true'){var ty=IPCC.Web.fR.sU.uG(aC.getResponseHeader("Accusoft-Data-SK"));var bD=IPCC.Web.Jw(ty,V.jw);var eS=IPCC.Web.Iq(aC);var uN=IPCC.Web.El(eS,bD,V.jw);gJ=IPCC.Web.fR.FT.nz(uN);}else{gJ=aC.responseText;}av=JSON.parse(gJ);Ot(av);}catch(e){F.error= -1;OJ(gf);F.textPagesReceived=[];F.length=2;V.aP('textPagesReceived',F);return;}};function fM(av){var F={},gl;try{gl=av.response.status;if(av.response.responseText){av=JSON.parse(av.response.responseText);if(av.hasOwnProperty("errorCode")){F.error=0;if(lE>0){if(av.pages){if(av.pages.length>0){Ot(av);return;}}}else{F.error= -1;}if(mD.length===0){F.error= -1;}V.pageExtractionFailed=true;F.textPagesReceived=[];F.length=2;F.textPagesReceived=OJ(gf);V.aP('textPagesReceived',F);return;}else{throw new IPCC.Web.UI.ImGearHttpException(gl,"Unable to obtain text");}}else{throw new IPCC.Web.UI.ImGearHttpException(gl,"Unable to obtain text");}}catch(e){F.error= -1;OJ(gf);F.textPagesReceived=[];F.length=2;V.aP('textPagesReceived',F);return;}};var jF=kt;var gg=V.sv;if(!(/^[\x00-\x7F]*$/.test(jF))){jF='e'+gD;}else{jF='u'+jF;}var bA;if(V.jj()){bA=gg+'/Document/q/'+bf.toString()+'-'+dj.toString()+'/Text?DocumentID='+jF+'&iv='+V.pL;}else{bA=gg+'/Document/q/'+bf.toString()+'-'+dj.toString()+'/Text?DocumentID='+jF;}IPCC.J.oZ.fE({method:'GET',url:bA,headers:{'accept':'application/json'}}).then(eZ,fM);};return this;};BY.encodeDocumentIdentifier=function(kt){var gD;if(kt!==undefined){gD=IPCC.hE.sf(kt);}return gD;};BY.decodeDocumentIdentifier=function(gD){var agz;if(gD!==undefined){agz=IPCC.hE.IH(gD);}return agz;};BY.prototype={get_documentIdentifier:function(){var bL=this.Jt();return bL;},get_encodedDocumentIdentifier:function(){var bL=this.KI();return bL;},get_pages:function(){return this.aei();},get_pageCountStatus:function(){var r=this.azv();return r;},set_pageCountStatus:function(value){this.aFo(value);},get_pageCount:function(){var r=this.azx();return r;},get_includeAllPages:function(){try{var bL=this.aAc();return bL;}catch(e){throw e;}},set_includeAllPages:function(value){try{this.aor(value);}catch(e){throw e;}},get_encryption:function(){var bL=this.jj();return bL;},set_encryption:function(value){this.nC(value);},add_pageChanged:function(handler){this.JQ(handler);},remove_pageChanged:function(handler){this.HI(handler);},add_pageRemoved:function(handler){this.IS(handler);},remove_pageRemoved:function(handler){this.Gh(handler);},add_pageAdded:function(handler){this.JL(handler);},remove_pageAdded:function(handler){this.GM(handler);},add_pageOpenFailed:function(handler){this.IY(handler);},remove_pageOpenFailed:function(handler){this.Ge(handler);},get_textRequestInfo:function(){try{var bL=this.axH();return bL;}catch(e){throw e;}},get_pagesWithText:function(){try{var bL=this.azn();return bL;}catch(e){throw e;}},get_numberOfPagesWithText:function(){try{var bL=this.aAM();return bL;}catch(e){throw e;}},get_numberOfPagesWithoutText:function(){try{var bL=this.aAb();return bL;}catch(e){throw e;}},add_textPagesReceived:function(handler){try{this.aAf(handler);}catch(e){throw e;}},remove_textPagesReceived:function(handler){try{this.azt(handler);}catch(e){this.aK('remove_textPagesReceived',e);throw e;}},add_propertyChanged:function(handler){this.kk(handler);},remove_propertyChanged:function(handler){this.nv(handler);}};BY.registerClass=dN;BY.registerClass('IPCC.Web.UI.ImGearDocument');module.exports=BY;},{"./../../IPCC.Util":28}],80:[function(require,module,exports){var dN=require('./../../IPCC.Util').regClass;var RV=function(){var iP=[];var bi=new IPCC.Web.UI.jc();var V=this;function atN(aH,F){if(F){var Op=new IPCC.Web.UI.ImGearDocumentEventArgs();Op.document=aH;Op.propertyName=F.get_propertyName();Op.length=2;V.aP('documentChanged',Op);}};this.UR=function(azL){this.agU(iP.length,azL);};this.agU=function(aD,ba){var bj;var cr=iP.length;if(aD>iP.length||(aD<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aD,'document index is out of range');}for(bj=0;bj<cr;bj++){if(iP[bj]===ba){throw new IPCC.Web.UI.ImGearInvalidOperationException('The document instance object to be inserted already exists in the collection. You cannot use the same instance of a document object.');}}var aiF=bi.getHandler('pageAdded');if(aiF){ba.add_pageAdded(aiF);}var ahO=bi.getHandler('pageRemoved');if(ahO){ba.add_pageRemoved(ahO);}var aiM=bi.getHandler('pageChanged');if(aiM){ba.add_pageChanged(aiM);}ba.add_propertyChanged(atN);iP.splice(aD,0,ba);var F=new IPCC.Web.UI.ImGearDocumentEventArgs();F.imGearDocument=ba;F.index=aD;F.length=1;this.aP('documentAdded',F);};function kN(aD){if(aD>iP.length-1||(aD<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aD,'document index is out of range');}};this.Qv=function(aD){kN(aD);return iP[aD];};this.ej=function(){return iP.length;};this.aHi=function(jh,ci){var aay=[].concat(iP);var L;for(L=0;L<aay.length;L++){jh.call(ci,aay[L],L,this);}};this.abz=function(aD){kN(aD);var F=new IPCC.Web.UI.ImGearDocumentEventArgs();F.imGearDocument=iP[aD];F.length=1;iP[aD].get_pages().removeAllPages();iP.splice(aD,1);this.aP('documentRemoved',F);};this.azj=function(){var L=0;while(iP.length>0){this.abz(L);}};this.aAF=function(R){bi.addHandler('documentAdded',R);};this.aCM=function(R){bi.removeHandler('documentAdded',R);};this.aAm=function(R){bi.addHandler('documentRemoved',R);};this.aBV=function(R){bi.removeHandler('documentRemoved',R);};this.aAx=function(R){bi.addHandler('documentChanged',R);};this.aAH=function(R){bi.removeHandler('documentChanged',R);};this.JL=function(R){bi.addHandler('pageAdded',R);};this.GM=function(R){bi.removeHandler('pageAdded',R);for(var bj=0;bj<iP.length;bj++){iP[bj].remove_pageAdded(R);}};this.JQ=function(R){bi.addHandler('pageChanged',R);};this.HI=function(R){bi.removeHandler('pageChanged',R);for(var bj=0;bj<iP.length;bj++){iP[bj].remove_pageChanged(R);}};this.IS=function(R){bi.addHandler('pageRemoved',R);};this.Gh=function(R){bi.removeHandler('pageRemoved',R);for(var bj=0;bj<iP.length;bj++){iP[bj].remove_pageRemoved(R);}};this.aP=function(dQ,F){var R=bi.getHandler(dQ);if(R!==null){try{R(V,F);}catch(e){IPCC.iG.Qj('event raise, ImGearDocumentCollection, error: '+e.message);}}};return this;};RV.prototype={addDocument:function(imGearDocument){this.UR(imGearDocument);},insertDocument:function(index,imGearDocument){this.agU(index,imGearDocument);},forEach:function(method,context){this.lf(method,context);},getDocument:function(index){return this.Qv(index);},get_length:function(){return this.ej();},removeDocument:function(imGearDocument){this.abz(imGearDocument);},removeAllDocuments:function(){this.azj();},add_documentAdded:function(handler){this.aAF(handler);},remove_documentAdded:function(handler){this.aCM(handler);},add_documentRemoved:function(handler){this.aAm(handler);},remove_documentRemoved:function(handler){this.aBV(handler);},add_documentChanged:function(handler){this.aAx(handler);},remove_documentChanged:function(handler){this.aAH(handler);},add_pageAdded:function(handler){this.JL(handler);},remove_pageAdded:function(handler){this.GM(handler);},add_pageRemoved:function(handler){this.IS(handler);},remove_pageRemoved:function(handler){this.Gh(handler);},add_pageChanged:function(handler){this.JQ(handler);},remove_pageChanged:function(handler){this.HI(handler);}};RV.registerClass=dN;RV.registerClass('IPCC.Web.UI.ImGearDocumentCollection');module.exports=RV;},{"./../../IPCC.Util":28}],81:[function(require,module,exports){var dN=require('./../../IPCC.Util').regClass;var Qt=function(){return this;};Qt.registerClass=dN;Qt.prototype={};Qt.registerClass('IPCC.Web.UI.ImGearDocumentCreateArgs');module.exports=Qt;},{"./../../IPCC.Util":28}],82:[function(require,module,exports){var dN=require('./../../IPCC.Util').regClass;var QE=function(){return this;};QE.registerClass=dN;QE.prototype={};QE.registerClass('IPCC.Web.UI.ImGearDocumentEventArgs');module.exports=QE;},{"./../../IPCC.Util":28}],83:[function(require,module,exports){var axl=function(kp){var bm=0,cu=0,ap=0,aM=0,mu=kp.href||"",aCx=kp.borderStyle||"Solid",lp=kp.borderThickness||0,Bx=kp.borderPattern||[1],Kn=kp.borderHorizontalRadius||0,JE=kp.borderHorizontalRadius||0,jK=kp.borderColor||"#0000FF",qc=kp.borderOpacity||255,h,C;if(typeof qc==='string'){qc=parseInt(qc,10);}if(kp.rectangle){bm=kp.rectangle.x;cu=kp.rectangle.y;ap=kp.rectangle.width;aM=kp.rectangle.height;}h=new IPCC.Web.UI.Rectangle(bm,cu,ap,aM);this.eT=function(){var abB=new IPCC.Web.UI.Rectangle(h.x,h.y,h.width,h.height);return abB;};this.Dr=function(kP){h.x=kP.x;h.y=kP.y;h.width=kP.width;h.height=kP.height;};this.ago=function(){return mu;};this.avr=function(){return aCx;};this.awe=function(){return lp;};this.auV=function(){return Bx;};this.auc=function(){return Kn;};this.avI=function(){return JE;};this.avd=function(){return jK;};this.atq=function(){return qc;};this.KC=function(){return C;};this.aoj=function(awo){C=awo;};this.azR=function(){return IPCC.J.afz(mu);};};module.exports=axl;},{}],84:[function(require,module,exports){var jc=function jc(){if(arguments.length!==0){throw new IPCC.Web.UI.ImGearParameterCountException();}this.Jg={};};jc.prototype.cv=function(ds,R){var cY=this.QG(ds,true);cY[cY.length]=R;};jc.prototype.addHandler=function(ds,R){this.cv(ds,R);};jc.prototype.cN=function(ds,R){var si=this.QG(ds);if(!si){return;}var aD=IPCC.YH(si,R);if(aD>=0){si.splice(aD,1);}};jc.prototype.removeHandler=function(ds,R){this.cN(ds,R);};jc.prototype.getHandler=function(ds){var si=this.QG(ds);if(!si||(si.length===0)){return null;}var cY=si.slice();si=cY;return function(source,args){for(var L=0,qg=si.length;L<qg;L++){si[L](source,args);}};};jc.prototype.QG=function(ds,asE){if(!this.Jg[ds]){if(!asE){return null;}this.Jg[ds]=[];}return this.Jg[ds];};module.exports=jc;},{}],85:[function(require,module,exports){var dN=require('./../../IPCC.Util').regClass;var Ec=function(message,errorInfo){this.message=message;var V=this;if(errorInfo){for(var Wt in errorInfo){if(errorInfo.hasOwnProperty(Wt)){V[Wt]=errorInfo[Wt];}}}};Ec.prototype=new Error();Ec.registerClass=dN;Ec.registerClass('IPCC.Web.UI.ImGearException');var Bl=function(statusCode,message,customErrorCode){var gh="IPCC.Web.UI.ImGearHttpException: ";if(message){gh+=message;}this.message=gh;this.statusCode=statusCode;this.customErrorCode=customErrorCode;};Bl.prototype=new Error();Bl.registerClass=dN;Bl.registerClass('IPCC.Web.UI.ImGearHttpException');var rE=function(paramName,message){var gh="IPCC.Web.UI.ImGearArgumentException: "+(message?message:IPCC.jO.argument);if(paramName){if(typeof(paramName)!=="undefined"&&paramName!==null){gh+="\n"+IPCC.Web.AG(IPCC.jO.paramName,paramName);}}this.message=gh;this.paramName=paramName;};rE.prototype=new Error();rE.registerClass=dN;rE.registerClass('IPCC.Web.UI.ImGearArgumentException');var CN=function(paramName,message){var gh="IPCC.Web.UI.ImGearArgumentNullException: "+(message?message:IPCC.jO.argumentNull);if(paramName){if(typeof(paramName)!=="undefined"&&paramName!==null){gh+="\n"+IPCC.Web.AG(IPCC.Res.paramName,paramName);}}this.message=gh;this.paramName=paramName;};CN.prototype=new Error();CN.registerClass=dN;CN.registerClass('IPCC.Web.UI.ImGearArgumentNullException');var rG=function(paramName,actualValue,message){var gh="IPCC.Web.UI.ImGearArgumentOutOfRangeException: "+(message?message:IPCC.jO.argumentOutOfRange);if(paramName){if(typeof(paramName)!=="undefined"&&paramName!==null){gh+="\n"+IPCC.Web.AG(IPCC.jO.paramName,paramName);}}if(typeof(actualValue)!=="undefined"&&actualValue!==null){gh+="\n"+IPCC.Web.AG(IPCC.jO.actualValue,actualValue);}this.message=gh;this.paramName=paramName;this.actualValue=actualValue;};rG.prototype=new Error();rG.registerClass=dN;rG.registerClass('IPCC.Web.UI.ImGearArgumentOutOfRangeException');var ze=function(paramName,actualType,expectedType,message){var gh="IPCC.Web.UI.ImGearArgumentTypeException ";if(message){gh+=message;}else if(actualType&&expectedType){if(typeof(actualType.getName)==='function'&&typeof(expectedType.getName)==='function'){gh+=IPCC.Web.AG(IPCC.jO.argumentTypeWithTypes,actualType.getName(),expectedType.getName());}else{gh+="actualType = "+actualType+" expectedType =  "+expectedType;}}else{gh+=IPCC.jO.argumentType;}if(paramName){if(typeof(paramName)!=="undefined"&&paramName!==null){gh+="\n"+IPCC.Web.AG(IPCC.jO.paramName,paramName);}}this.message=gh;this.paramName=paramName;this.actualType=actualType;this.expectedType=expectedType;};ze.prototype=new Error();ze.registerClass=dN;ze.registerClass('IPCC.Web.UI.ImGearArgumentTypeException');var DN=function(paramName,message){var gh="IPCC.Web.UI.ImGearArgumentUndefinedException: "+(message?message:IPCC.jO.argumentUndefined);if(paramName){if(typeof(paramName)!=="undefined"&&paramName!==null){gh+="\n"+IPCC.Web.AG(IPCC.Res.paramName,paramName);}}this.message=gh;this.paramName=paramName;};DN.prototype=new Error();DN.registerClass=dN;DN.registerClass('IPCC.Web.UI.ImGearArgumentUndefinedException');var CK=function(message){var gh="IPCC.Web.UI.ImGearInvalidOperationException: "+(message?message:IPCC.jO.invalidOperation);this.message=gh;};CK.prototype=new Error();CK.registerClass=dN;CK.registerClass('IPCC.Web.UI.ImGearInvalidOperationException');var BS=function(message){var gh="IPCC.Web.UI.ImGearNotImplementedException: "+(message?message:IPCC.jO.notImplemented);this.message=gh;};BS.prototype=new Error();BS.registerClass=dN;BS.registerClass('IPCC.Web.UI.ImGearNotImplementedException');var BU=function(message){var gh="IPCC.Web.UI.ImGearParameterCountException: "+(message?message:IPCC.jO.parameterCount);this.message=gh;};BU.prototype=new Error();BU.registerClass=dN;BU.registerClass('IPCC.Web.UI.ImGearParameterCountException');module.exports={Ec:Ec,Bl:Bl,rE:rE,CN:CN,rG:rG,ze:ze,DN:DN,CK:CK,BS:BS,BU:BU};},{"./../../IPCC.Util":28}],86:[function(require,module,exports){var axU=function(){var Hg=[];this.aAK=function(ayr){Hg.push(ayr);};this.cw=function(){return Hg.length;};this.lf=function(jh,ci){IPCC.J.forEach(Hg,jh,ci);};this.azC=function(){if(Hg.length<1){return;}Hg=[];};return this;};module.exports=axU;},{}],87:[function(require,module,exports){var ayw=function(){var IA=new IPCC.Web.UI.ImGearHyperlinkCollection();this.IT=function(){return IA;};};module.exports=ayw;},{}],88:[function(require,module,exports){var dN=require('./../../IPCC.Util').regClass;var Rv=function(aV){this.ba=undefined;var bb=0;var bO=0,abE=0,adk=0;var bo=0,ajN=0,akx=0;var V=this;var bi=new IPCC.Web.UI.jc();this.aJF=undefined;this.gZ={qW:0,afo:false,qT:1000,NH:false};var ff=new IPCC.Web.UI.ImGearTextPage();var RN=new IPCC.Web.UI.ImGearHyperlinkPage();var lZ=0;var oI=false;var Dk=false,Dz=0,DU=0;function aml(o){return!isNaN(o-0);};if(aV.pageNumber!==undefined){if(aml(aV.pageNumber)){bb=aV.pageNumber;}else{throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException("pageNumber","",'The value must be a number.');}}this.nJ=function(){return bb;};this.aFR=function(G){if(aml(aV.pageNumber)){bb=G;}};this.kY=function(){return bO;};function amf(){if(!ff){ff=new IPCC.Web.UI.ImGearTextPage();}var asp=ff.gs();var po=bO/Dz,pk=bo/DU;asp.aDs(po,pk);};function aoQ(){var IA=RN.IT();var po=bO/Dz,pk=bo/DU;IA.lf(function(gd){gd.Dr(gd.eT().scale(po,pk));var ahR=gd.KC();ahR.set_rectangle(ahR.get_rectangle().scale(po,pk));});};this.Os=function(G){bO=G;if(Dk&&bO&&bO!==Dz&&bo&&bo!==DU){amf();aoQ();Dk=false;}};this.jp=function(){return bo;};this.NG=function(G){bo=G;if(Dk&&bO&&bO!==Dz&&bo&&bo!==DU){amf();aoQ();Dk=false;}};this.aeA=function(){return abE;};this.agH=function(G){abE=G;};this.aKd=function(){return ajN;};this.afb=function(G){ajN=G;};this.aKh=function(){return adk;};this.aFl=function(G){adk=G;};this.aJZ=function(){return akx;};this.aET=function(G){akx=G;};this.aut=function(){return this.ba;};this.dr=function(){if(!ff){ff=new IPCC.Web.UI.ImGearTextPage();}return ff;};this.kQ=function(){return lZ;};this.yx=function(G){if(lZ===G){return;}if(isNaN(G)){return;}lZ=G;this.dm('serviceResponseTimeout');};this.jj=function(){return oI;};this.nC=function(G){oI=G;};this.kk=function(R){bi.addHandler('propertyChanged',R);};this.nv=function(R){bi.removeHandler('propertyChanged',R);};this.yW=function(R){bi.addHandler('textPageReady',R);};this.FL=function(R){bi.removeHandler('textPageReady',R);};this.agC=function(){return RN;};this.abD=function(R){bi.addHandler('hyperlinkPageReady',R);};this.adW=function(R){bi.removeHandler('hyperlinkPageReady',R);};this.yI=function(R){bi.cv('textExtractionFailed',R);};this.FP=function(R){bi.cN('textExtractionFailed',R);};this.afF=function(ge){if(bO===0&&bo===0){Dk=true;Dz=ge.width;DU=ge.height;}};this.agb=function(ge){if(!ff){ff=new IPCC.Web.UI.ImGearTextPage();}ff.apd(ge.width);ff.aBh(ge.height);if(ff.gs().ej()>0){return;}else if(ge.errorCode){var mw=new IPCC.Web.UI.ImGearException(ge.errorDescription,{name:'Text Extraction'});var dn=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dn.exception=mw;dn.pageNumber=V.get_pageNumber();V.aP('textExtractionFailed',dn);return;}var apv=ff.gs();var Nr=false;var adh;function Ig(ZQ){return ZQ;};var pk=1;var po=1;if(ge.height&&ge.height>0&&bo>0){if(ge.height!==bo){pk=bo/ge.height;}}if(ge.width&&ge.width>0&&bO>0){if(ge.width!==bO){po=bO/ge.width;}}var gL;var afg= -1;var LU;var iK,zD;for(var L=0;L<ge.rectangles.length;L++){iK=ge.rectangles[L];zD=Ig(ge.text[L]);Nr=false;if(iK[2]===0){zD="\n";Nr=true;if(L>0){adh=ge.rectangles[L-1];iK[2]=adh[2];}}if(po===1&&pk===1){LU=new IPCC.Web.UI.ImGearTextCharacter(iK[0],iK[1],iK[2],iK[3],zD,Nr);}else{LU=new IPCC.Web.UI.ImGearTextCharacter(iK[0]*po,iK[1]*pk,iK[2]*po,iK[3]*pk,zD,Nr);}if(LU){apv.ayP(LU);}if(gL===undefined||afg!==iK[1]||iK[0]<gL.eT().x){if(gL){ff.YD().ahP(gL);}gL=new IPCC.Web.UI.ImGearTextSection();gL.Dr(new IPCC.Web.UI.Rectangle(iK[0],iK[1],iK[2],iK[3]));gL.apj(L);}else{if(iK[0]+iK[2]-gL.eT().x>gL.eT().width){gL.eT().width=iK[0]+iK[2]-gL.eT().x;}}gL.aBd(L);afg=iK[1];}if(gL){ff.YD().ahP(gL);}ff.aDf(ge.text);if(ge.text.length>0){ff.LM(true);V.aP('textPageReady',{pageNumber:V.nJ(),containsText:true});}else{ff.LM(false);V.aP('textPageReady',{pageNumber:V.nJ(),containsText:false});}};this.agy=function(afH,MA,MV){if(!afH){return;}RN.IT().azC();var pk=1;var po=1;if(MA&&MA>0&&bo>0){if(MA!==bo){pk=bo/MA;}}if(MV&&MV>0&&bO>0){if(MV!==bO){po=bO/MV;}}IPCC.J.forEach(afH,function(adO){var gd;switch(adO.markType){case "DocumentHyperlink":gd=new IPCC.Web.UI.ImGearDocumentHyperlink(adO.properties);gd.Dr(gd.eT().scale(po,pk));if(!gd.azR()){RN.IT().aAK(gd);}break;default:break;}});V.aP('hyperlinkPageReady',{pageNumber:V.nJ()});};this.ayc=function(){V.zS();};this.zS=function(){if(!ff){ff=new IPCC.Web.UI.ImGearTextPage();}if(!V.ba){throw new IPCC.Web.UI.ImGearInvalidOperationException('You must add this Page to a valid ImGearDocument object which has a valid ImageServicePath property.');}if(ff.Cr()){return;}var agn=true;if(V.kQ()===0){agn=false;}function Ot(aS){if(aS.pages){var aO;if(aS.pages.length>0){if(aS.pages[0].number!==V.nJ()){for(var L=0;L<aS.pages.length;L++){if(aS.pages[L].number===V.nJ()){aO=L;break;}}if(!aO){V.gZ.NH=false;return;}}else{aO=0;}var ge=aS.pages[aO];V.gZ.NH=true;if(aS.pages[aO].text&&aS.pages[aO].text.length>0){ff.LM(true);}else{ff.LM(false);}V.gZ.qT=1000;V.afF(ge);V.agb(ge);V.agy(ge.markup,ge.height,ge.width);return;}}var nF=V.gZ.qT;if(!V.gZ.NH){if(V.gZ.qW<6){if(V.gZ.qW<2){nF=nF+1000;}else{nF=nF+3000;}V.gZ.qW++;V.gZ.qT=nF;setTimeout(V.ayc,nF);}else{V.gZ.afo=true;}}};function eZ(aC){var jw=V.ba.jw,av;try{var gJ;var nQ=aC.getResponseHeader("Accusoft-Data-Encrypted");if(nQ==='true'){var ty=IPCC.Web.fR.sU.uG(aC.getResponseHeader("Accusoft-Data-SK"));var bD=IPCC.Web.Jw(ty,jw);var eS=IPCC.Web.Iq(aC);var uN=IPCC.Web.El(eS,bD,jw);gJ=IPCC.Web.fR.FT.nz(uN);}else{gJ=aC.responseText;}av=JSON.parse(gJ);Ot(av);}catch(e){var dn=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dn.exception=e;dn.pageNumber=V.get_pageNumber();V.aP('textExtractionFailed',dn);return;}};function fM(av){try{if(!av.response){throw new IPCC.Web.UI.ImGearHttpException(0,"Text extraction timeout");}else{if(av.response.statusText){throw new IPCC.Web.UI.ImGearHttpException(av.response.status,"Unable to obtain text, Error from the service = "+av.response.statusText);}else{throw new IPCC.Web.UI.ImGearHttpException(av.response.status,"Unable to obtain text from the service");}}}catch(e){var dn=new IPCC.Web.UI.ImGearPageOpenFailedEventArgs();dn.exception=e;dn.pageNumber=V.get_pageNumber();V.aP('textExtractionFailed',dn);return;}};var bf=V.get_pageNumber();var jF=V.ba.get_documentIdentifier();if(!(/^[\x00-\x7F]*$/.test(jF))){jF='e'+V.ba.get_encodedDocumentIdentifier();}else{jF='u'+encodeURIComponent(jF);}var gg=V.ba.sv;var pL=V.ba.pL;var bA;if(V.jj()){bA=gg+'/Document/q/'+bf.toString()+'-'+bf.toString()+'/Text?DocumentID='+jF+'&iv='+pL;}else{bA=gg+'/Document/q/'+bf.toString()+'-'+bf.toString()+'/Text?DocumentID='+jF;}var gT={method:'GET',url:bA,headers:{'accept':'application/json'}};if(agn===true){gT.timeout=V.kQ();}IPCC.J.oZ.fE(gT).then(eZ,fM);};this.dr=function(){if(!ff){ff=new IPCC.Web.UI.ImGearTextPage();}return ff;};this.aIk=function(G){if(typeof G.oS!=='function'){return;}ff=G;};this.aeG=function(){ff=undefined;V.gZ={qW:0,afo:false,qT:1000,NH:false};Dk=false;Dz=0;DU=0;};this.KR=function(As,Au){var V=this;function eZ(aC){var av;av=JSON.parse(aC.responseText);if(av.imageWidth&&av.imageHeight){V.Os(av.imageWidth);V.NG(av.imageHeight);As(av.imageWidth,av.imageHeight);}else{Au("Unable to obtain document information from the server");}};function fM(av){Au("Unable to obtain document information from the server");};if(V.kY()>0||V.jp()>0){As(V.kY(),V.jp());}else{var qf=IPCC.hE.sf(V.ba.get_documentIdentifier());if(!qf||qf===""){Au("Invalid encoded Identifier");}var uZ='';if(!IPCC.tx.Jn()){uZ='&ContentType=png';}var bA;if(!(/^[\x00-\x7F]*$/.test(qf))){bA=V.ba.sv+'/Page/q/'+(V.get_pageNumber())+'/Attributes?DocumentID=e'+qf+uZ;}else{bA=V.ba.sv+'/Page/q/'+(V.get_pageNumber())+'/Attributes?DocumentID=u'+encodeURIComponent(V.ba.get_documentIdentifier())+uZ;}IPCC.J.oZ.fE({method:'GET',url:bA,headers:{'Content-Type':'application/json'}}).then(eZ,fM);}};this.dm=function(cG){var R=bi.getHandler('propertyChanged');if(R){R(this,new IPCC.pR(cG));}};this.aP=function(dQ,F){var R=bi.getHandler(dQ);if(R!==null){try{R(V,F);}catch(e){IPCC.iG.Qj('event raise, ImGearPage, error: '+e.message);}}};return this;};Rv.prototype={get_pageNumber:function(){var bL=this.nJ();return bL;},get_pageWidth:function(){var bL=this.kY();return bL;},get_pageHeight:function(){var bL=this.jp();return bL;},get_textPage:function(){var bL=this.dr();return bL;},get_encryption:function(){var bL=this.jj();return bL;},set_encryption:function(value){this.nC(value);},get_hyperlinkPage:function(){return this.agC();},get_document:function(){var bL=this.aut();return bL;},add_propertyChanged:function(handler){this.kk(handler);},remove_propertyChanged:function(handler){this.nv(handler);},requestPageAttributes:function(attributesRetrievedCallback,attributesRetrievalFailedCallback){this.KR(attributesRetrievedCallback,attributesRetrievalFailedCallback);}};Rv.registerClass=dN;Rv.registerClass('IPCC.Web.UI.ImGearPage');module.exports=Rv;},{"./../../IPCC.Util":28}],89:[function(require,module,exports){var dN=require('./../../IPCC.Util').regClass;var Rx=function(){var V=this;var cz=[];var bi=new IPCC.Web.UI.jc();this.aFE=false;this.aFZ=true;this.ba=undefined;this.ahB=function(aN){this.agT(cz.length,aN);};function kN(aD){if(aD>cz.length-1||(aD<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aD,'page index is out of range in the page collection');}};this.agT=function(aD,aN){var bj;var cr=cz.length;if(aD>cz.length||(aD<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aD,'index of the page Collection is out of range');}if(V.aFZ&&V.aFE){if(cr>0){throw new IPCC.Web.UI.ImGearInvalidOperationException('You must first remove the existing selected page before adding a new one to the selected page collection).');}}for(bj=0;bj<cr;bj++){if(cz[bj]===aN){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot duplicate same page instance in a page collection).');}}if(V.ba){if(!aN.ba){aN.ba=V.ba;}}aN.add_propertyChanged(Ij);cz.splice(aD,0,aN);var F=new IPCC.Web.UI.ImGearPageEventArgs();F.imGearPage=aN;F.length=1;V.aP('pageAdded',F);};this.iY=function(aD){kN(aD);var fh=cz[aD];return fh;};this.aph=function(aD,aN){kN(aD);var SO=cz[aD];if(SO===aN){return;}cz[aD]=aN;var F=new IPCC.Web.UI.ImGearPageEventArgs();F.imGearPage=aN;F.length=1;this.aP('pageAdded',F);SO.remove_propertyChanged(Ij);var yT=new IPCC.Web.UI.ImGearPageEventArgs();yT.imGearPage=SO;yT.length=1;this.aP('pageRemoved',yT);};this.ej=function(){return cz.length;};this.lf=function(jh,ci){var abS=[].concat(cz);var L;for(L=0;L<abS.length;L++){jh.call(ci,abS[L],L,this);}};this.adE=function(aD){kN(aD);var F=new IPCC.Web.UI.ImGearPageEventArgs();F.imGearPage=cz[aD];cz[aD].remove_propertyChanged(Ij);F.length=1;cz.splice(aD,1);V.aP('pageRemoved',F);};this.aIC=function(aN){var cw=cz.length;for(var L=0;L<cw;L++){if(aN===cz[L]){return L;}}return-1;};this.aAR=function(){var L=0;while(cz.length>0){this.adE(L);}};function Ij(aH,F){var yT=new IPCC.Web.UI.ImGearPageEventArgs();yT.imGearPage=aH;yT.length=1;V.aP('pageChanged',yT);};this.JL=function(R){bi.addHandler('pageAdded',R);};this.GM=function(R){bi.removeHandler('pageAdded',R);};this.JQ=function(R){bi.addHandler('pageChanged',R);};this.HI=function(R){bi.removeHandler('pageChanged',R);};this.IS=function(R){bi.addHandler('pageRemoved',R);};this.Gh=function(R){bi.removeHandler('pageRemoved',R);};this.aP=function(dQ,F){var R=bi.getHandler(dQ);if(R!==null){try{R(V,F);}catch(e){IPCC.iG.Qj('raise event error in ImGearPageCollection, Error: '+e.message);}}};return this;};Rx.prototype={addPage:function(page){this.ahB(page);},insertPage:function(index,page){this.agT(index,page);},forEach:function(method,context){this.lf(method,context);},getPage:function(index){return this.iY(index);},setPage:function(index,page){this.aph(index,page);},get_length:function(){return this.ej();},removePage:function(index){this.adE(index);},removeAllPages:function(){this.aAR();},add_pageAdded:function(handler){this.JL(handler);},remove_pageAdded:function(handler){this.GM(handler);},add_pageChanged:function(handler){this.JQ(handler);},remove_pageChanged:function(handler){this.HI(handler);},add_pageRemoved:function(handler){this.IS(handler);},remove_pageRemoved:function(handler){this.Gh(handler);}};Rx.registerClass=dN;Rx.registerClass('IPCC.Web.UI.ImGearPageCollection');module.exports=Rx;},{"./../../IPCC.Util":28}],90:[function(require,module,exports){var fi=require('./../../IPCC.Util').regEnum;var QU=function(){};QU.registerEnum=fi;QU.prototype={UnRequested:0,RequestPending:1,Known:2,Failed:3};QU.registerEnum('IPCC.Web.UI.ImGearPageCountStatus',false);module.exports=QU;},{"./../../IPCC.Util":28}],91:[function(require,module,exports){var dN=require('./../../IPCC.Util').regClass;var QP=function(){};QP.registerClass=dN;QP.prototype={};QP.registerClass('IPCC.Web.UI.ImGearPageCreateArgs');module.exports=QP;},{"./../../IPCC.Util":28}],92:[function(require,module,exports){var dN=require('./../../IPCC.Util').regClass;var Rs=function(){return this;};Rs.prototype={};Rs.registerClass=dN;Rs.registerClass('IPCC.Web.UI.ImGearPageEventArgs');module.exports=Rs;},{"./../../IPCC.Util":28}],93:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var QF=function(){return this;};QF.registerClass=dN;QF.prototype={};QF.registerClass('IPCC.Web.UI.ImGearPageOpenFailedEventArgs');module.exports=QF;},{"../../IPCC.Util":28}],94:[function(require,module,exports){var axr=function(bm,cu,ap,aM,zD,azP){this.aL=new IPCC.Web.UI.Rectangle(bm,cu,ap,aM);this.kl=zD;this.IE=azP;this.awL=function(){return zD;};this.rR=function(){var abB=new IPCC.Web.UI.Rectangle(this.aL.x,this.aL.y,this.aL.width,this.aL.height);return abB;};this.aGK=function(){return this.IE;};};module.exports=axr;},{}],95:[function(require,module,exports){var axP=function(){var ji=[];this.ayP=function(lq){ji.push(new IPCC.Web.UI.ImGearTextCharacter(lq.aL.x,lq.aL.y,lq.aL.width,lq.aL.height,lq.kl,lq.IE));};this.aHB=function(atY){function ky(lq){ji.push(lq);};atY.forEach(ky,{});};this.axo=function(){var adj=[];for(var bj=0;bj<this.ej();bj++){var RW=this.kI(bj).aL;var h=[];h.push(RW.x);h.push(RW.y);h.push(RW.width);h.push(RW.height);adj.push(h);}return adj;};this.aHD=function(aD,akd){var bj;var cr=ji.length;if(aD>ji.length||(aD<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aD,'index of theText Character Collection is out of range');}for(bj=0;bj<cr;bj++){if(ji[bj]===akd){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot duplicate same aS Character instance in a lq collection).');}}ji.splice(aD,0,akd);};this.aDs=function(aaV,abo){IPCC.J.forEach(ji,function(kl){kl.aL.width=kl.aL.width*aaV;kl.aL.height=kl.aL.height*abo;kl.aL.x=kl.aL.x*aaV;kl.aL.y=kl.aL.y*abo;});};this.lf=function(jh,ci){var XR=[].concat(ji);var L;for(L=0;L<XR.length;L++){jh.call(ci,new IPCC.Web.UI.ImGearTextCharacter(XR[L].x,XR[L].y),L,this);}};function kN(aD){if(aD>ji.length-1||(aD<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aD);}};this.kI=function(aD){kN(aD);var qw=ji[aD];return new IPCC.Web.UI.ImGearTextCharacter(qw.aL.x,qw.aL.y,qw.aL.width,qw.aL.height,qw.kl,qw.IE);};this.aHj=function(aD,lq){kN(aD);var DM=ji[aD];if(DM.aL.x===lq.aL.x&&DM.aL.y===lq.y&&DM.aL.width===lq.aL.width&&DM.aL.height===lq.aL.height&&DM.kl===lq.kl&&DM.IE===lq.IE){return;}ji[aD]=lq;};this.ej=function(){return ji.length;};this.aHn=function(aD){kN(aD);ji.splice(aD,1);};this.aIv=function(){if(ji.length<1){return;}ji=[];};return this;};module.exports=axP;},{}],96:[function(require,module,exports){var ayY=function(){var avf=new IPCC.Web.UI.ImGearTextCharacterCollection();var Zv=false;var ajL=false;var VN="";var vH=new IPCC.Web.UI.ImGearTextSectionCollection();var ZS=false;var ap=0;var aM=0;this.gs=function(){return avf;};this.oS=function(){return Zv;};this.LM=function(G){ajL=true;if(G===Zv){return;}if((G===true)||(G===false)){Zv=G;}};this.Cr=function(){return ajL;};this.Ew=function(){return VN;};this.aDf=function(G){if(G===VN){return;}VN=G;};this.YD=function(){return vH;};this.ayN=function(){return ZS;};this.ajs=function(G){if(G===ZS){return;}if((G===true)||(G===false)){ZS=G;}};this.ayM=function(){return ap;};this.apd=function(G){if(G===ap){return;}ap=G;};this.aAG=function(){return aM;};this.aBh=function(G){if(G===aM){return;}aM=G;};};module.exports=ayY;},{}],97:[function(require,module,exports){var aya=function(){var h=null;var bf=0;var dj=0;this.eT=function(){return h;};this.Dr=function(G){h=G;};this.aiC=function(){return bf;};this.apj=function(G){bf=G;};this.agZ=function(){return dj;};this.aBd=function(G){dj=G;};};module.exports=aya;},{}],98:[function(require,module,exports){var axe=function(){var vH=[];this.ahP=function(gL){vH.push(gL);};function kN(aD){if(aD>vH.length-1||(aD<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aD);}};this.axD=function(aD){kN(aD);return vH[aD];};this.ej=function(){return vH.length;};return this;};module.exports=axe;},{}],99:[function(require,module,exports){var fi=require('./../../IPCC.Util').regEnum;var Mu=function(){if(arguments.length!==0){throw new IPCC.Web.UI.ImGearParameterCountException();}throw new IPCC.Web.UI.ImGearNotImplementedException();};Mu.registerEnum=fi;Mu.prototype={backspace:8,tab:9,enter:13,esc:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,del:127};Mu.registerEnum("IPCC.Web.UI.Key");module.exports=Mu;},{"./../../IPCC.Util":28}],100:[function(require,module,exports){var fi=require('../../IPCC.Util').regEnum;var Oa=function(){};Oa.registerEnum=fi;Oa.prototype={Pointer:0,Solid:1,Open:2,PointerSolid:3,None:4};Oa.registerEnum('IPCC.Web.UI.LineHeadType',false);module.exports=Oa;},{"../../IPCC.Util":28}],101:[function(require,module,exports){var fi=require('../../IPCC.Util').regEnum;var Nm=function(){};Nm.registerEnum=fi;Nm.prototype={Solid:0,Dash:1,Dot:2,DashDot:3,DashDotDot:4};Nm.registerEnum('IPCC.Web.UI.LineStyle',false);module.exports=Nm;},{"../../IPCC.Util":28}],102:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var MQ=function(){return this;};MQ.registerClass=dN;MQ.prototype={};MQ.registerClass('IPCC.Web.UI.LogItemEventArgs');module.exports=MQ;},{"../../IPCC.Util":28}],103:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var LO=function(type){var bg=type;type=undefined;var sD=new Date();var sB=new Date();var aY=null;var h;var aJ;var dq;var cX=new IPCC.Web.UI.Data();var bi=new IPCC.Web.UI.jc();var V=this;var jq;this.eR=function(ia,cG){if((jq&ia)===0){throw new IPCC.Web.UI.ImGearInvalidOperationException(cG+' is not a valid property for this type of Mark.');}};if(bg===IPCC.Web.UI.MarkType.SignatureText){this.hY='#000000';this.jl=IPCC.Web.UI.LineStyle.Solid;this.fw=0;}else{this.hY='#000000';this.jl=IPCC.Web.UI.LineStyle.Solid;this.fw=1;}this.dg=255;this.lk=IPCC.Web.UI.MarkInteractionMode.Full;var jM=false;switch(bg){case IPCC.Web.UI.MarkType.Line:jM=true;aJ=new IPCC.Web.UI.PointCollection();aJ.addPoint({x:0,y:0});aJ.addPoint({x:0,y:0});jq=1;this.hY='#18385F';this.fw=6;break;case IPCC.Web.UI.MarkType.Polyline:jM=true;this.tL=false;aJ=new IPCC.Web.UI.PointCollection();jq=2;this.fw=2;break;case IPCC.Web.UI.MarkType.Rectangle:h=new IPCC.Web.UI.Rectangle(0,0,0,0);jq=4;this.cP='#FB0404';this.fw=4;break;case IPCC.Web.UI.MarkType.Ellipse:h=new IPCC.Web.UI.Rectangle(0,0,0,0);jq=8;this.cP='#FB0404';this.fw=4;break;case IPCC.Web.UI.MarkType.Polygon:aJ=new IPCC.Web.UI.PointCollection();jq=16;break;case IPCC.Web.UI.MarkType.Text:this.DJ='#000000';this.zW=false;this.rs=IPCC.Web.UI.LineStyle.Solid;this.EJ=1;this.mF=new IPCC.Web.UI.Point(0,0);this.Co=IPCC.Web.UI.CalloutType.Triangle;this.xe=false;this.gb='Arial';this.ck=12;this.cV=IPCC.Web.UI.FontStyle.Regular;this.jl=IPCC.Web.UI.LineStyle.Solid;this.hD=0;h=new IPCC.Web.UI.Rectangle(0,0,0,0);this.aS='';this.im=IPCC.Web.UI.HorizontalAlignment.Left;this.yi=IPCC.Web.UI.VerticalAlignment.Top;this.qP='#000000';this.xR=255;this.yp=IPCC.Web.UI.Orientation.TopLeft;this.dY=[];this.fw=4;this.dg=127;this.cP='#FFFFFF';jq=32;break;case IPCC.Web.UI.MarkType.Stamp:h=new IPCC.Web.UI.Rectangle(0,0,0,0);jq=128;break;case IPCC.Web.UI.MarkType.Highlight:h=new IPCC.Web.UI.Rectangle(0,0,0,0);this.aX='';this.ib='n';this.bf=0;this.cO='';this.da=0;this.dg=127;jq=256;break;case IPCC.Web.UI.MarkType.HighlightText:h=new IPCC.Web.UI.Rectangle(0,0,0,0);this.aX='';this.ib='n';this.bf=0;this.cO='';this.da=0;this.dg=127;this.cP='#FFFF00';jq=512;this.dY=[];this.ab=[];break;case IPCC.Web.UI.MarkType.Freehand:h=new IPCC.Web.UI.Rectangle(0,0,0,0);jq=64;this.fw=4;this.hY='#000000';this.il=false;this.Vi=1;this.Vk=1;this.uH='M0,0';break;case IPCC.Web.UI.MarkType.SignaturePath:h=new IPCC.Web.UI.Rectangle(0,0,0,0);jq=1024;this.im=IPCC.Web.UI.HorizontalAlignment.Center;this.fw=4;this.hY='#000000';this.il=false;this.Vi=1;this.Vk=1;this.uH='M0,0';break;case IPCC.Web.UI.MarkType.SignatureText:h=new IPCC.Web.UI.Rectangle(0,0,0,0);jq=2048;this.im=IPCC.Web.UI.HorizontalAlignment.Center;this.aS='John Doe';this.qP='#000000';this.cP='#000000';this.gb="";break;case IPCC.Web.UI.MarkType.RectangleRedaction:h=new IPCC.Web.UI.Rectangle(0,0,0,0);jq=4096;this.gb='Arial';this.ck=8;this.cV=IPCC.Web.UI.FontStyle.Regular;this.aS='';this.im=IPCC.Web.UI.HorizontalAlignment.Center;this.yi=IPCC.Web.UI.VerticalAlignment.Center;this.cP='#000000';this.qP='#FFFFFF';this.xR=255;this.yp=IPCC.Web.UI.Orientation.TopLeft;break;case IPCC.Web.UI.MarkType.TextSelectionRedaction:h=new IPCC.Web.UI.Rectangle(0,0,0,0);this.ab=[];this.aX='';this.ef='';this.aS='';this.gb='Arial';this.ck=8;this.bf=0;this.da=0;jq=8192;this.dY=[];break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:h=new IPCC.Web.UI.Rectangle(0,0,0,0);this.mu='';this.fw=2;this.cO='';this.aX='';this.ib='n';this.bf=0;this.da=0;this.cP='#3B00FF';jq=1<<14;this.dY=[];this.ab=[];break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:h=new IPCC.Web.UI.Rectangle(0,0,0,0);jq=16384;this.aG='';this.pF='';break;case IPCC.Web.UI.MarkType.DocumentHyperlink:h=new IPCC.Web.UI.Rectangle(0,0,0,0);this.mu='';this.Mc='';this.Bx='';this.Kn=0;this.JE=0;this.qc=255;jq=32768;break;case IPCC.Web.UI.MarkType.TextLine:jq=65536;h=new IPCC.Web.UI.Rectangle(0,0,0,0);this.im=IPCC.Web.UI.HorizontalAlignment.Left;this.aS='';this.qP='#000000';this.gb="Courier New";this.fw=1;this.il=true;this.hD=0;this.GA=0;this.HG=false;var iZ=IPCC.J.tS("M",this.gb,{tK:'pre'});this.zp=iZ.width;this.Az=iZ.height;this.hT=null;this.fg=0;this.cP='transparent';this.hY='transparent';break;case IPCC.Web.UI.MarkType.TextAreaSignature:this.DJ='#000000';this.zW=false;this.rs=IPCC.Web.UI.LineStyle.Solid;this.EJ=1;this.mF=new IPCC.Web.UI.Point(0,0);this.Co=IPCC.Web.UI.CalloutType.Triangle;this.xe=false;this.gb='Courier New';this.fg=0;this.hD=0;this.ck=12;this.cV=IPCC.Web.UI.FontStyle.Regular;h=new IPCC.Web.UI.Rectangle(0,0,0,0);this.aS='';this.im=IPCC.Web.UI.HorizontalAlignment.Left;this.yi=IPCC.Web.UI.VerticalAlignment.Top;this.qP='#000000';this.xR=255;this.yp=IPCC.Web.UI.Orientation.TopLeft;this.dY=[];this.fw=1;this.il=false;this.cP='transparent';this.hY='transparent';this.dg=0;jq=1<<18;break;case IPCC.Web.UI.MarkType.Strikethrough:h=new IPCC.Web.UI.Rectangle(0,0,0,0);this.aX='';this.hY='#000000';this.fw=2;this.ib='n';this.bf=0;this.cO='';this.da=0;jq=1<<17;this.dY=[];this.ab=[];break;default:throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('type',bg);}if(bg!==IPCC.Web.UI.MarkType.SignaturePath&&bg!==IPCC.Web.UI.MarkType.Freehand&&bg!==IPCC.Web.UI.MarkType.SignatureText&&bg!==IPCC.Web.UI.MarkType.DocumentHyperlink&&bg!==IPCC.Web.UI.MarkType.HighlightText&&bg!==IPCC.Web.UI.MarkType.Strikethrough&&bg!==IPCC.Web.UI.MarkType.TextLine){if(jM){this.JH=15;this.KA=25;this.nt=IPCC.Web.UI.LineHeadType.None;this.Cc='#000000';this.HW=15;this.Hq=25;this.Ir=IPCC.Web.UI.LineHeadType.None;}else{this.KB=true;this.il=true;if(bg===IPCC.Web.UI.MarkType.Highlight){this.il=false;this.dg=100;}}}this.abA=IPCC.Web.UI.aum++;this.cI=true;this.ah={};this.dK=[];var KE=false;function aqd(aH,F){V.aP('commentAdded',F);};function apP(aH,F){V.aP('commentRemoved',F);};function PM(aH,F){V.aP('commentChanged',F);};dq=new IPCC.Web.UI.Conversation(V);dq.add_commentAdded(aqd);dq.add_commentChanged(PM);dq.add_commentRemoved(apP);this.aP=function(dQ,F){var R=bi.getHandler(dQ);if(R!==null){R(this,F);}};function Vz(aH,F){var ael='points';if(bg===IPCC.Web.UI.MarkType.Line){ael=F.index===0?'startPoint':'endPoint';}V.dm(ael,F);};if(aJ){aJ.add_pointAdded(Vz);aJ.add_pointChanged(Vz);aJ.add_pointRemoved(Vz);}this.iJ=function(){return bg;};this.afS=function(){return sD;};this.ain=function(G){sD=G;};this.agV=function(){return sB;};this.VO=function(G){sB=G;};this.en=function(){return aY;};this.mg=function(value){if(aY!==value){aY=value;this.dm('artPage');}};this.hL=function(){return KE;};this.jL=function(G){KE=G;};this.amq=function(){var lH=new IPCC.Web.UI.Rectangle(0,0,0,0);switch(bg){case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:case IPCC.Web.UI.MarkType.Polygon:return aJ.rR();case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Ellipse:case IPCC.Web.UI.MarkType.Stamp:case IPCC.Web.UI.MarkType.Highlight:case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.DocumentHyperlink:case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.SignatureText:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:case IPCC.Web.UI.MarkType.Freehand:case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:case IPCC.Web.UI.MarkType.Strikethrough:return h.clone();case IPCC.Web.UI.MarkType.Text:var iW=h.x+h.width,iO=h.y+h.height;var ajP=h.x+this.mF.x,ajM=h.y+this.mF.y;lH.x=Math.min(h.x,Math.min(iW,ajP));lH.y=Math.min(h.y,Math.min(iO,ajM));lH.width=Math.max(h.x,Math.max(iW,ajP))-lH.x;lH.height=Math.max(h.y,Math.max(iO,ajM))-lH.y;break;}return lH;};this.eT=function(){return h.clone();};this.yd=function(G){this.Dj(16384,'image','aG',G);};this.bY=function(){return this.aG;};this.qt=function(){return aJ;};this.ave=function(){return dq;};this.vn=function(){return cX;};this.Dr=function(G){var sg;if(!h.equals(G)){h=new IPCC.Web.UI.Rectangle(G.x,G.y,G.width,G.height);if(bg===IPCC.Web.UI.MarkType.Stamp||bg===IPCC.Web.UI.MarkType.SignatureText||bg===IPCC.Web.UI.MarkType.TextLine){if(document.documentMode<9){sg=0;if(h.width>=h.height){sg=(h.width/14)/2;}else{sg=h.width/15;}if(sg*15>=h.width){sg=(h.width/15)/2;}this.stampSize=Math.round(sg);}else{var textFontSize=(h.width/6);if(textFontSize>h.height){textFontSize=(h.height-(h.height/6));}var nI=this.get_text();if(!nI){nI=(bg===IPCC.Web.UI.MarkType.Stamp)?'APPROVED':'';}sg=nI.length*textFontSize;if(sg>h.width){textFontSize=((h.width/nI.length));}var GA=Math.round(textFontSize);this.stampSize=GA.toString();}}this.dm('rectangle');}};this.kL=function(){return this.abA;};this.Ib=function(es,eo){if(es!==0||eo!==0){switch(bg){case IPCC.Web.UI.MarkType.Line:case IPCC.Web.UI.MarkType.Polyline:case IPCC.Web.UI.MarkType.Polygon:aJ.amF(es,eo);break;case IPCC.Web.UI.MarkType.Rectangle:case IPCC.Web.UI.MarkType.RectangleRedaction:case IPCC.Web.UI.MarkType.Ellipse:case IPCC.Web.UI.MarkType.Text:case IPCC.Web.UI.MarkType.Stamp:case IPCC.Web.UI.MarkType.SignaturePath:case IPCC.Web.UI.MarkType.SignatureText:case IPCC.Web.UI.MarkType.TextLine:case IPCC.Web.UI.MarkType.TextAreaSignature:case IPCC.Web.UI.MarkType.Freehand:case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:case IPCC.Web.UI.MarkType.Freehand:if(bg===IPCC.Web.UI.MarkType.RectangleRedaction&&this.aX!==undefined){break;}h.x+=es;h.y+=eo;this.dm('rectangle');break;case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.Highlight:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.Strikethrough:break;}}};this.Yp=function(VK){if(this.dY&&VK!==this.dY){while(this.dY.length>0){this.dY.pop();}if(VK){this.dY=VK.slice(0);}this.aP('markTextSelectionChanged',{});}};this.Kx=function(R){if(this.dY){bi.addHandler('markTextSelectionChanged',R);}};this.ET=function(R){if(this.dY){bi.removeHandler('markTextSelectionChanged',R);}};this.wW=function(R){bi.addHandler('commentAdded',R);};this.DV=function(R){bi.removeHandler('commentAdded',R);};this.vW=function(R){bi.addHandler('commentRemoved',R);};this.Es=function(R){bi.removeHandler('commentRemoved',R);};this.rD=function(R){bi.addHandler('commentChanged',R);};this.ue=function(R){bi.removeHandler('commentChanged',R);};this.kk=function(R){bi.addHandler('propertyChanged',R);};this.nv=function(R){bi.removeHandler('propertyChanged',R);};this.dm=function(cG){var R=bi.getHandler('propertyChanged');if(R){R(this,new IPCC.pR(cG));}};this.kk(function(C){C.VO(new Date());});return this;};LO.prototype={toString:function(){switch(this.get_type()){case IPCC.Web.UI.MarkType.Line:return 'Line Mark from '+this.qt().getPoint(0)+' to '+this.qt().getPoint(1);case IPCC.Web.UI.MarkType.Polyline:return 'Polyline Mark with '+this.qt().ej()+' vertices';case IPCC.Web.UI.MarkType.Rectangle:return 'Rectangle Mark at '+this.eT();case IPCC.Web.UI.MarkType.RectangleRedaction:return 'Rectangle Redaction Mark at '+this.eT();case IPCC.Web.UI.MarkType.Ellipse:return 'Ellipse Mark at '+this.eT();case IPCC.Web.UI.MarkType.Polygon:return 'Polygon Mark with '+this.qt().ej()+' vertices';case IPCC.Web.UI.MarkType.Text:return 'Text Mark, "'+this.aS+'", at '+this.eT();case IPCC.Web.UI.MarkType.Stamp:return 'Stamp Mark at '+this.eT();case IPCC.Web.UI.MarkType.Highlight:return 'Rectangle Mark at '+this.eT();case IPCC.Web.UI.MarkType.HighlightText:return 'Highlight Mark at '+this.eT();case IPCC.Web.UI.MarkType.TextSelectionRedaction:return 'Text Selection Redaction at '+this.eT();case IPCC.Web.UI.MarkType.TextSelectionRedaction:return 'Text Hyperlink Annotation at '+this.eT();case IPCC.Web.UI.MarkType.TextSelectionRedaction:return 'Document Hyperlink at '+this.eT();case IPCC.Web.UI.MarkType.SignaturePath:return 'Signature Path Mark, "'+this.uH+'", at '+this.eT();case IPCC.Web.UI.MarkType.Freehand:return 'Freehand Mark, "'+this.uH+'", at '+this.eT();case IPCC.Web.UI.MarkType.SignatureText:return 'Signature Text Mark at '+this.eT();case IPCC.Web.UI.MarkType.TextLine:return 'Text Line Mark at '+this.eT();case IPCC.Web.UI.MarkType.TextAreaSignature:return 'Text Area Signature Mark at '+this.eT();case IPCC.Web.UI.MarkType.ImageStampAnnotation:return 'ImageStamp Mark at '+this.eT();case IPCC.Web.UI.MarkType.ImageStampRedaction:return 'ImageStamp Redaction Mark at '+this.eT();case IPCC.Web.UI.MarkType.Strikethrough:return 'Strikethrough Mark at '+this.eT();}return 'Mark';},initializeDates:function(sD,sB){IPCC.aI.iA(sD,"dateCreated");IPCC.aI.iA(sB,"dateModified");this.ain(sD);this.VO(sB);},get_dateCreated:function(){return this.afS();},get_dateModified:function(){return this.agV();},jX:function(ia,cG,kx,G){this.eR(ia,cG);if(this[kx]!==G){this[kx]=G;this.dm(cG);}},Km:function(ia,cG,kx,G){IPCC.aI.aaH(G,cG);this.jX(ia,cG,kx,G);},yJ:function(ia,cG,kx,G){IPCC.aI.ih(G,cG);this.jX(ia,cG,kx,G);},xf:function(ia,cG,kx,G,wp,vv){IPCC.aI.kd(G,cG,wp,vv);this.jX(ia,cG,kx,G);},Yo:function(ia,cG,kx,G,wp,vv){IPCC.aI.nq(G,cG,wp,vv);this.jX(ia,cG,kx,G);},Dj:function(ia,cG,kx,G){IPCC.aI.bg(G,cG,'string');this.jX(ia,cG,kx,G);},uV:function(ia,cG,kx,G,ik){IPCC.aI.ik(G,cG,ik);this.jX(ia,cG,kx,G);},apl:function(ia,cG,kx,G,ik){IPCC.aI.ik(G,cG,ik,true);this.jX(ia,cG,kx,G);},aoy:function(ia,cG,kx,G){IPCC.aI.bx(G,cG);this.jX(ia,cG,kx,G);},get_artPage:function(){return this.en();},get_boundingRectangle:function(){return this.amq();},get_selected:function(){var aY=this.en();if(!aY){return false;}var eW=aY.Cd();return eW.contains(this);},set_selected:function(value){var aY=this.en();if(aY){if(this.lk!==IPCC.Web.UI.MarkInteractionMode.SelectionDisabled|| !value){var eW=aY.Cd();if(value!==eW.contains(this)){if(value){eW.Qh(this);}else{eW.vD(this);}this.dm('selected');}}}else{if(value){throw new IPCC.Web.UI.ImGearInvalidOperationException('A Mark cannot be selected unless it is associated with an ArtPage.');}}},get_calloutLineColor:function(){this.eR(32,'calloutLineColor');return this.DJ;},set_calloutLineColor:function(value){this.Km(32,'calloutLineColor','DJ',value);},get_calloutLineIsDistinct:function(){this.eR(32,'calloutLineIsDistinct');return this.zW;},set_calloutLineIsDistinct:function(value){this.jX(32,'calloutLineIsDistinct','zW',value);},get_calloutLineStyle:function(){this.eR(32,'calloutLineStyle');return this.rs;},set_calloutLineStyle:function(value){this.uV(32,'calloutLineStyle','rs',value,IPCC.Web.UI.LineStyle);},get_calloutLineWidth:function(){this.eR(32,'calloutLineWidth');return this.EJ;},set_calloutLineWidth:function(value){this.xf(32,'calloutLineWidth','EJ',value,0,50);},get_calloutPoint:function(){this.eR(32,'calloutPoint');return this.mF;},set_calloutPoint:function(value){this.aoy(32,'calloutPoint','mF',value);},get_calloutType:function(){this.eR(32,'calloutType');return this.Co;},set_calloutType:function(value){this.uV(32,'calloutType','Co',value,IPCC.Web.UI.CalloutType);},get_calloutVisible:function(){this.eR(32,'calloutVisible');return this.xe;},set_calloutVisible:function(value){if(!this.xe&&value&&this.iJ()===IPCC.Web.UI.MarkType.Text){if(this.mF.x===0&&this.mF.y===0){var h=this.eT();this.set_calloutPoint({x:h.width,y:h.height*1.5});}}this.jX(32,'calloutVisible','xe',value);},get_endHeadAngle:function(){this.eR(3,'endHeadAngle');return this.JH;},set_endHeadAngle:function(value){this.xf(3,'endHeadAngle','JH',value,0,180);},get_endHeadLength:function(){this.eR(3,'endHeadLength');return this.KA;},set_endHeadLength:function(value){this.xf(3,'endHeadLength','KA',value,0,100);},get_endHeadType:function(){this.eR(3,'endHeadType');return this.nt;},set_endHeadType:function(value){this.uV(3,'endHeadType','nt',value,IPCC.Web.UI.LineHeadType);},get_href:function(){this.eR(1<<14|1<<15,'href');return this.mu;},set_href:function(value){this.Dj(1<<14|1<<15,'href','mu',value);},has_unsafe_href:function(){return(! !this.mu&&IPCC.J.afz(this.mu));},get_mask:function(){this.eR(65536,'mask');return this.hT;},set_mask:function(value){this.jX(65536,'mask','hT',value);},get_borderType:function(){this.eR(32768,'borderType');return this.Mc;},set_borderType:function(value){this.Dj(32768,'borderType','Mc',value);},get_borderHorizontalRadius:function(){this.eR(32768,'borderHorizontalRadius');return this.Kn;},set_borderHorizontalRadius:function(value){this.yJ(32768,'borderHorizontalRadius','Kn',value);},get_borderVerticalRadius:function(){this.eR(1<<15,'borderVerticalRadius');return this.JE;},set_borderVerticalRadius:function(value){this.yJ(32768,'borderVerticalRadius','JE',value);},get_borderOpacity:function(){this.eR(32768,'qc');return this.qc;},set_borderOpacity:function(value){this.Yo(32768,'qc','qc',value,0,255);},get_borderPattern:function(){this.eR(32768,'Bx');return this.Bx;},set_borderPattern:function(value){this.jX(32768,'Bx','Bx',value,0,255);},get_fillColor:function(){this.eR(16380+(1<<14)+65536+(1<<18),'fillColor');return this.cP;},set_fillColor:function(value){this.Km(16380+(1<<14)+65536+(1<<18),'fillColor','cP',value);},get_fillVisible:function(){this.eR(16380,'fillVisible');return this.KB;},set_fillVisible:function(value){this.jX(16380,'fillVisible','KB',value);},get_fontName:function(){this.eR(6176+8192+65536+(1<<18),'fontName');return this.gb;},set_fontName:function(value){this.Dj(6176+8192+65536+(1<<18),'fontName','gb',value);if(this.iJ()===IPCC.Web.UI.MarkType.SignatureText||this.iJ()===IPCC.Web.UI.MarkType.TextLine){var bP=(this.iJ()===IPCC.Web.UI.MarkType.TextLine)?{tK:'pre'}:{};var iZ=IPCC.J.tS(this.aS,this.gb,bP);this.zp=iZ.width;this.Az=iZ.height;}if(this.iJ()===IPCC.Web.UI.MarkType.TextLine){this.HG=false;}},get_fontSize:function(){this.eR(32+2048+4096+8192,'fontSize');return this.ck;},set_fontSize:function(value){this.xf(32+2048+4096+8192,'fontSize','ck',value,0.1,288);},get_fontStyle:function(){this.eR(6176+(1<<18),'fontStyle');return this.cV;},set_fontStyle:function(value){this.apl(6176+(1<<18),'fontStyle','cV',value,IPCC.Web.UI.FontStyle);},get_headFillColor:function(){this.eR(3,'headFillColor');return this.Cc;},set_headFillColor:function(value){this.Km(3,'headFillColor','Cc',value);},get_interactionMode:function(){this.eR(~0,'interactionMode');return this.lk;},set_interactionMode:function(value){this.uV(~0,'interactionMode','lk',value,IPCC.Web.UI.MarkInteractionMode);if(value===IPCC.Web.UI.MarkInteractionMode.SelectionDisabled){this.set_selected(false);}},get_maxLength:function(){this.eR(32+65536+(1<<18),'maxLength');return this.hD;},set_maxLength:function(value){this.yJ(32+65536+(1<<18),'maxLength','hD',value);},get_maxFontSize:function(){this.eR(65536+(1<<18),'maxFontSize');return this.fg;},set_maxFontSize:function(value){this.yJ(65536+(1<<18),'maxFontSize','fg',value);},get_isClosed:function(){this.eR(2,'isClosed');return this.tL;},set_isClosed:function(value){this.jX(2,'isClosed','tL',value);},get_lineColor:function(){return this.hY;},set_lineColor:function(value){this.Km(13567+32768+(1<<17)+65536+(1<<18),'lineColor','hY',value);},get_lineStyle:function(){return this.jl;},set_lineStyle:function(value){this.uV(63+32768,'lineStyle','jl',value,IPCC.Web.UI.LineStyle);},get_lineWidth:function(){return this.fw;},set_lineWidth:function(value){this.xf(13567+32768+(1<<17)+65536+(1<<18),'lineWidth','fw',value,0,50);},get_lineVisible:function(){this.eR(172+65536,'lineVisible');return this.il;},set_lineVisible:function(value){this.jX(172+65536,'lineVisible','il',value);},get_opacity:function(){return this.dg;},set_opacity:function(value){this.Yo(895+2048+1024+65536+(1<<18),'opacity','dg',value,0,255);},get_points:function(){this.eR(19,'points');return this.qt();},get_conversation:function(){return this.ave();},get_data:function(){return this.vn();},get_image:function(){this.eR(16384,'image');return this.bY();},set_image:function(value){this.eR(16384,'image');this.yd(value);},get_rectangle:function(){this.eR((1<<18)+(1<<17)+65536+32768+16384+8192+4096+2048+1024+512+256+128+64+32+8+4,'rectangle');return this.eT();},set_rectangle:function(value){this.eR((1<<18)+(1<<17)+65536+32768+16384+8192+4096+2048+1024+512+256+128+64+32+8+4,'rectangle');IPCC.aI.h(value,'rectangle');this.Dr(value);if(this.iJ()===IPCC.Web.UI.MarkType.TextLine){this.HG=false;}},get_startHeadAngle:function(){this.eR(3,'startHeadAngle');return this.HW;},set_startHeadAngle:function(value){this.xf(3,'startHeadAngle','HW',value,0,180);},get_startHeadLength:function(){this.eR(3,'startHeadLength');return this.Hq;},set_startHeadLength:function(value){this.xf(3,'startHeadLength','Hq',value,0,100);},get_startHeadType:function(){this.eR(3,'startHeadType');return this.Ir;},set_startHeadType:function(value){this.uV(3,'startHeadType','Ir',value,IPCC.Web.UI.LineHeadType);},get_text:function(){this.eR(14496+65536+(1<<17)+(1<<18),'text');return this.aS;},set_text:function(value){if(this.aS===value){return;}this.Dj(14496+65536+(1<<17)+(1<<18),'text','aS',value);if(this.iJ()===IPCC.Web.UI.MarkType.SignatureText||this.iJ()===IPCC.Web.UI.MarkType.TextLine){var bP=(this.iJ()===IPCC.Web.UI.MarkType.TextLine)?{tK:'pre'}:{};var iZ=IPCC.J.tS(this.aS,this.gb,bP);this.zp=iZ.width;this.Az=iZ.height;}if(this.dY){while(this.dY.length>0){this.dY.pop();}}},get_textHorizontalAlignment:function(){this.eR(32+1024+2048+65536+(1<<18),'textHorizontalAlignment');return this.im;},set_textHorizontalAlignment:function(value){this.uV(32+1024+2048+65536+(1<<18),'textHorizontalAlignment','im',value,IPCC.Web.UI.HorizontalAlignment);},get_textVerticalAlignment:function(){this.eR(32,'textVerticalAlignment');return this.yi;},set_textVerticalAlignment:function(value){this.uV(32,'textVerticalAlignment','yi',value,IPCC.Web.UI.VerticalAlignment);},get_textColor:function(){this.eR(6176+65536+(1<<18),'textColor');return this.qP;},set_textColor:function(value){this.Km(6176+65536+(1<<18),'textColor','qP',value);},get_textOpacity:function(){this.eR(32,'textOpacity');return this.xR;},set_textOpacity:function(value){this.Yo(32,'textOpacity','xR',value,0,255);},get_textOrientation:function(){this.eR(32,'textOrientation');return this.yp;},set_textOrientation:function(value){this.uV(32,'textOrientation','yp',value,IPCC.Web.UI.Orientation);},get_type:function(){return this.iJ();},get_visible:function(){return this.cI;},set_visible:function(value){this.jX((1<<17)+65536+32768+16384+8192+4096+2048+1024+512+256+128+64+63,'visible','cI',value);},get_markID:function(){return this.kL();},get_pathString:function(){return this.uH;},set_pathString:function(value){var uH=this.get_pathString();if(uH!==value){this.ana=true;}this.Dj(1088,'pathString','uH',value);},get_pathWidth:function(){return this.Vi;},set_pathWidth:function(value){this.yJ(1088,'pathWidth','Vi',value);},get_pathHeight:function(){return this.Vk;},set_pathHeight:function(value){this.yJ(1088,'pathHeight','Vk',value);},get_startIndex:function(){this.eR((1<<17)+(1<<14)+8192+512,'startIndex');return this.bf;},set_startIndex:function(value){this.yJ((1<<17)+(1<<14)+8192+512,'startIndex','bf',value);},get_textLength:function(){this.eR((1<<17)+(1<<14)+8192+512,'textLength');return this.da;},set_textLength:function(value){this.yJ((1<<17)+(1<<14)+8192+512,'textLength','da',value);},add_propertyChanged:function(handler){this.kk(handler);},remove_propertyChanged:function(handler){this.nv(handler);},add_markTextSelectionChanged:function(handler){this.Kx(handler);},remove_markTextSelectionChanged:function(handler){this.ET(handler);},move:function(deltaX,deltaY){IPCC.aI.ih(deltaX,'deltaX');IPCC.aI.ih(deltaY,'deltaY');this.Ib(deltaX,deltaY);},moveBackward:function(){if(this.en()){var index=this.en().nH(this);var cs=this.en().agK();if(index>cs){this.en().reorderMark(this,index-1);}}else{throw new IPCC.Web.UI.ImGearInvalidOperationException('A Mark cannot be reordered unless it is associated with an ArtPage.');}},moveForward:function(){if(this.en()){var index=this.en().nH(this);if(index<this.en().WM()-1){this.en().reorderMark(this,index+1);}}else{throw new IPCC.Web.UI.ImGearInvalidOperationException('A Mark cannot be reordered unless it is associated with an ArtPage.');}},moveToBack:function(){if(this.en()){var cs=0;cs=this.en().agK();this.en().reorderMark(this,cs);}else{throw new IPCC.Web.UI.ImGearInvalidOperationException('A Mark cannot be reordered unless it is associated with an ArtPage.');}},moveToFront:function(){if(this.en()){this.en().reorderMark(this,this.en().WM()-1);}else{throw new IPCC.Web.UI.ImGearInvalidOperationException('A Mark cannot be reordered unless it is associated with an ArtPage.');}},removeFromPage:function(){if(this.en()){this.en().removeMark(this);}},selectText:function(textRanges){this.Yp(textRanges);},aEf:function(){var fl={};var V=this;var aJ,YY,bx,h,L;function dv(cG,LB){fl[LB]=V[cG];};var jM=false;var jR=false;var wZ=false;switch(this.get_type()){case IPCC.Web.UI.MarkType.Line:jM=true;wZ=true;fl.__type='LineMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.Polyline:jM=true;wZ=true;fl.__type='PolyLineMark:#IPCC.Web';dv('tL','ic');break;case IPCC.Web.UI.MarkType.Rectangle:jR=true;fl.__type='RectangleMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.RectangleRedaction:jR=true;fl.__type='RectangleRedactionMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.Ellipse:jR=true;fl.__type='EllipseMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.Polygon:wZ=true;fl.__type='PolygonMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.Text:jR=true;fl.__type='TextMark:#IPCC.Web';dv('DJ','clc');dv('zW','clid');dv('rs','cls');dv('EJ','clw');dv('Co','ct');dv('xe','cv');dv('gb','fn');dv('ck','fs');dv('cV','fst');dv('jl','ls');dv('aS','te');dv('im','tha');dv('yi','tva');dv('qP','tc');dv('xR','to');dv('yp','tor');bx=this.mF;if(bx.x!==0||bx.y!==0){fl.cp={x:bx.x,y:bx.y};}break;case IPCC.Web.UI.MarkType.Stamp:jR=true;fl.__type='StampMark:#IPCC.Web';break;case IPCC.Web.UI.MarkType.Highlight:case IPCC.Web.UI.MarkType.HighlightText:jR=true;fl.__type='HighlightText:#IPCC.Web';break;}if(jM){dv('JH','eha');dv('KA','ehl');dv('nt','eht');dv('Cc','hfc');dv('HW','sha');dv('Hq','shl');dv('Ir','sht');}else{dv('cP','fc');dv('KB','fv');dv('il','lv');}if(jR){h=this.get_rectangle();fl.r={x:h.x,y:h.y,width:h.width,height:h.height};}fl.t=this.get_type();dv('hY','lc');dv('jl','ls');dv('fw','lw');dv('dg','o');dv('cI','v');if(wZ){aJ=this.qt();YY=[];for(L=0;L<aJ.get_length();L++){bx=aJ.getPoint(L);YY.push({x:bx.x,y:bx.y});}fl.p=YY;}return fl;},aAe:function(fl){var V=this;var aJ,L;function dv(cG,LB){if(fl.hasOwnProperty(LB)){V[cG]=fl[LB];}};var jM=false;var jR=false;var wZ=false;switch(this.get_type()){case IPCC.Web.UI.MarkType.Line:jM=true;if(fl.p&&fl.p.length===2){aJ=this.qt();aJ.setPoint(0,new IPCC.Web.UI.Point(fl.p[0].x,fl.p[0].y));aJ.setPoint(1,new IPCC.Web.UI.Point(fl.p[1].x,fl.p[1].y));}break;case IPCC.Web.UI.MarkType.Polyline:jM=true;wZ=true;dv('tL','ic');break;case IPCC.Web.UI.MarkType.Rectangle:jR=true;break;case IPCC.Web.UI.MarkType.RectangleRedaction:jR=true;break;case IPCC.Web.UI.MarkType.Ellipse:jR=true;break;case IPCC.Web.UI.MarkType.Polygon:wZ=true;break;case IPCC.Web.UI.MarkType.Text:jR=true;dv('DJ','clc');dv('zW','clid');dv('rs','cls');dv('EJ','clw');dv('Co','ct');dv('xe','cv');dv('gb','fn');dv('ck','fs');dv('cV','fst');dv('jl','ls');dv('aS','te');dv('im','tha');dv('yi','tva');dv('qP','tc');dv('xR','to');dv('yp','tor');if(fl.cp){this.mF=new IPCC.Web.UI.Point(fl.cp.x,fl.cp.y);}break;case IPCC.Web.UI.MarkType.Stamp:jR=true;break;case IPCC.web.UI.MarkType.Highlight:case IPCC.web.UI.MarkType.HighlightText:case IPCC.web.UI.MarkType.Strikethrough:jR=true;break;}if(jM){dv('JH','eha');dv('KA','ehl');dv('nt','eht');dv('Cc','hfc');dv('HW','sha');dv('Hq','shl');dv('Ir','sht');}else{dv('cP','fc');dv('KB','fv');dv('il','lv');}if(jR){if(fl.r){this.set_rectangle(new IPCC.Web.UI.Rectangle(fl.r.x,fl.r.y,fl.r.width,fl.r.height));}}fl.t=this.get_type();dv('hY','lc');dv('jl','ls');dv('fw','lw');dv('dg','o');dv('cI','v');if(fl.p&&wZ){aJ=this.qt();for(L=0;L<fl.p.length;L++){aJ.addPoint(new IPCC.Web.UI.Point(fl.p[L].x,fl.p[L].y));}}return fl;}};LO.registerClass=dN;LO.registerClass('IPCC.Web.UI.Mark');module.exports=LO;},{"../../IPCC.Util":28}],104:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var KG=function(){var an=[];var bi=new IPCC.Web.UI.jc();this.Qh=function(C){if(this.FR(C)=== -1){an.push(C);var F=new IPCC.Web.UI.MarkEventArgs();F.mark=C;this.aP('markAdded',F);}};this.azM=function(Ag){var F=new IPCC.Web.UI.MarkEventArgs();F.length=Ag.get_length();var V=this;function ky(C){if(V.FR(C)=== -1){an.push(C);}};Ag.forEach(ky,{});if(F.length>0){this.aP('markAdded',F);}};this.lf=function(jh,ci){var GL=[].concat(an);var L;for(L=0;L<GL.length;L++){jh.call(ci,GL[L],L,this);}};this.ej=function(){return an.length;};this.vD=function(C){var L=this.FR(C);if(L> -1){an.splice(L,1);var F=new IPCC.Web.UI.MarkEventArgs();F.mark=C;this.aP('markRemoved',F);}};this.FR=function(C){var L;for(L=0;L<an.length;L++){if(an[L]===C){return L;}}return-1;};this.ya=function(R){bi.addHandler('markAdded',R);};this.Ah=function(R){bi.removeHandler('markAdded',R);};this.xC=function(R){bi.addHandler('markRemoved',R);};this.AP=function(R){bi.removeHandler('markRemoved',R);};this.aP=function(dQ,F){var R=bi.getHandler(dQ);if(R!==null){R(this,F);}};return this;};KG.prototype={toString:function(){return 'MarkCollection with '+this.get_length()+' marks';},addMark:function(mark){this.Qh(mark);},addMarks:function(markCollection){this.azM(markCollection);},forEach:function(method,context){this.lf(method,context);},get_length:function(){return this.ej();},contains:function(mark){return this.FR(mark)> -1;},removeMark:function(mark){this.vD(mark);},removeAllMarks:function(){this.lf(function(C,aD,Ag){Ag.vD(C);});},add_markAdded:function(handler){this.ya(handler);},remove_markAdded:function(handler){this.Ah(handler);},add_markRemoved:function(handler){this.xC(handler);},remove_markRemoved:function(handler){this.AP(handler);}};KG.registerClass=dN;KG.registerClass('IPCC.Web.UI.MarkCollection');module.exports=KG;},{"../../IPCC.Util":28}],105:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var Mr=function(){return this;};Mr.registerClass=dN;Mr.prototype={};Mr.registerClass('IPCC.Web.UI.MarkEventArgs');module.exports=Mr;},{"../../IPCC.Util":28}],106:[function(require,module,exports){var fi=require('../../IPCC.Util').regEnum;var Bh=function(){};Bh.registerEnum=fi;Bh.prototype={HideSideHandlesWhenClose:0,HideCornerHandlesWhenClose:1};Bh.registerEnum('IPCC.Web.UI.MarkHandleMode',false);module.exports=Bh;},{"../../IPCC.Util":28}],107:[function(require,module,exports){var fi=require('../../IPCC.Util').regEnum;var Lw=function(){};Lw.registerEnum=fi;Lw.prototype={Full:0,SelectionDisabled:1,TextEditingDisabled:2};Lw.registerEnum('IPCC.Web.UI.MarkInteractionMode',false);module.exports=Lw;},{"../../IPCC.Util":28}],108:[function(require,module,exports){var fi=require('../../IPCC.Util').regEnum;var KK=function(){};KK.registerEnum=fi;KK.prototype={Line:3,Polyline:502,Rectangle:600,Ellipse:601,Polygon:604,Text:605,Highlight:606,Stamp:607,HighlightText:608,SignaturePath:609,Freehand:610,SignatureText:611,SignatureImage:612,RectangleRedaction:613,TextSelectionRedaction:614,ImageStampAnnotation:615,ImageStampRedaction:616,TextHyperlinkAnnotation:617,DocumentHyperlink:618,TextLine:619,Strikethrough:620,TextAreaSignature:621};KK.registerEnum('IPCC.Web.UI.MarkType',false);module.exports=KK;},{"../../IPCC.Util":28}],109:[function(require,module,exports){var fi=require('./../../IPCC.Util').regEnum;var Ts=function(){if(arguments.length!==0){throw new IPCC.Web.UI.ImGearParameterCountException();}throw new IPCC.Web.UI.ImGearNotImplementedException();};Ts.registerEnum=fi;Ts.prototype={leftButton:0,middleButton:1,rightButton:2};Ts.registerEnum("IPCC.Web.UI.MouseButton");},{"./../../IPCC.Util":28}],110:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var Pk=function(){var ahM=false;this.aFG=function(){ahM=true;};this.ajo=function(){return ahM;};return this;};Pk.prototype={preventDefault:function(){this.aFG();}};Pk.registerClass=dN;Pk.registerClass('IPCC.Web.UI.MouseEventArgs');module.exports=Pk;},{"../../IPCC.Util":28}],111:[function(require,module,exports){var fi=require('../../IPCC.Util').regEnum;var OT=function(){};OT.registerEnum=fi;OT.prototype={None:0,Magnifier:1,RectangleZoom:2,HandPan:3,Select:4,CreateRectangleMark:5,CreateEllipseMark:6,CreateLineMark:7,CreatePolylineMark:8,CreateFreehandMark:9,CreatePolygonMark:10,CreateTextMark:11,EditMarks:12,RunMarks:13,SelectText:14,CreateStampMark:15,CreateHighlightTextMark:16,CreateTextSelectionRedaction:17,CreateRectangleRedactionMark:18,CreateImageStampAnnotationMark:19,CreateImageStampRedactionMark:20,CreateTextHyperlinkMark:21,CreateTextInputSignatureMark:22,CreateStrikethroughMark:23,CreateTextAreaSignatureMark:24};OT.registerEnum('IPCC.Web.UI.MouseTool',false);module.exports=OT;},{"../../IPCC.Util":28}],112:[function(require,module,exports){var fi=require('../../IPCC.Util').regEnum;var Or=function(){};Or.registerEnum=fi;Or.prototype={TopLeft:1,TopRight:2,BottomRight:3,BottomLeft:4,LeftTop:5,RightTop:6,RightBottom:7,LeftBottom:8};Or.registerEnum('IPCC.Web.UI.Orientation',false);module.exports=Or;},{"../../IPCC.Util":28}],113:[function(require,module,exports){var abH=function(element,rg,Qx){var hs=this;var am;var K;var xk=0;var NM='';var RQ=false;var bi=new IPCC.Web.UI.jc();var dX=null;var qI=IPCC.qI;var akQ=IPCC.qI;var Fg=0.0;var Jr=false;var Ma=0;var adt= -1;var acR= -1;var acI= -1;function nR(JF){if(!K){return false;}return K.nR(JF);};this.aK=function(hN,iT){if(nR(IPCC.Web.UI.DebugErrorLevel.Production)){K.aK(hN,iT);}};this.aF=function(hN,kf,pO){if(!nR(IPCC.Web.UI.DebugErrorLevel.Development)){return;}var cQ=hN+'(';var L;for(L=0;L<kf.length;L++){if(L>0){cQ+=', ';}cQ+=IPCC.iG.ru(kf[L],(pO?pO:0));}cQ+=')';this.vP(cQ,IPCC.Web.UI.DebugErrorLevel.Development);};this.AX=function(hN,kf,nu,pO){if(!nR(IPCC.Web.UI.DebugErrorLevel.Development)){return;}var cQ=hN+'(';var L;for(L=0;L<kf.length;L++){if(L>0){cQ+=', ';}cQ+=IPCC.iG.ru(kf[L],(pO?pO:0));}cQ+=') = ';cQ+=IPCC.iG.ru(nu,1);this.vP(cQ,IPCC.Web.UI.DebugErrorLevel.Development);};this.dk=function(hN,kf,nu){if(!nR(IPCC.Web.UI.DebugErrorLevel.Detailed)){return;}var cQ=hN+'(';var L;for(L=0;L<kf.length;L++){if(L>0){cQ+=', ';}cQ+=IPCC.iG.ru(kf[L],0);}cQ+=') = ';cQ+=IPCC.iG.ru(nu,1);this.vP(cQ,IPCC.Web.UI.DebugErrorLevel.Detailed);};this.vP=function(kr,bE){if(K){K.mb(kr,IPCC.Web.UI.DebugItemCause.FunctionCall,bE);}};this.mb=function(kr){if(K){K.mb(kr,IPCC.Web.UI.DebugItemCause.Custom,IPCC.Web.UI.DebugErrorLevel.Production);}};this.Jm=function(){return K.get_debug();};this.Uy=function(G){K.set_debug(G);};this.Ak=function(){return K.Ak();};this.II=function(G){IPCC.aI.ik(G,'value',IPCC.Web.UI.DebugErrorLevel);K.II(G);};this.aGn=function(G){Jr=G;};this.aIh=function(){return Jr;};var pp=function(){if(K.bY()===undefined){throw new IPCC.Web.UI.ImGearInvalidOperationException('You cannot perform this operation unless an image is open (and it has completed the opening process).');}};function cv(dQ,R){bi.addHandler(dQ,R);};function cN(dQ,R){bi.removeHandler(dQ,R);};this.GD=function(iF,di){K.aBJ(iF,di);};this.aEZ=function(di,C){K.wI(C);K.dh();};this.Wq=function(R){cv('pageOpening',R);};this.Sv=function(R){cN('pageOpening',R);};this.WP=function(R){cv('pageOpened',R);};this.Sy=function(R){cN('pageOpened',R);};this.azs=function(R){cv('pageClosed',R);};this.azO=function(R){cN('pageClosed',R);};this.IY=function(R){cv('pageOpenFailed',R);};this.Ge=function(R){cN('pageOpenFailed',R);};this.WW=function(R){cv('pageDisplayed',R);};this.Ws=function(R){cN('pageDisplayed',R);};this.MR=function(R){cv('mouseDown',R);};this.Vb=function(R){cN('mouseDown',R);};this.NP=function(R){cv('mouseMove',R);};this.Vy=function(R){cN('mouseMove',R);};this.NC=function(R){cv('mouseUp',R);};this.Vl=function(R){cN('mouseUp',R);};this.auN=function(R){cv('contextMenu',R);};this.aBI=function(R){cN('contextMenu',R);};this.ya=function(R){cv('markAdded',R);};this.Ah=function(R){cN('markAdded',R);};this.abp=function(R){cv('markCreating',R);};this.To=function(R){cN('markCreating',R);};this.Ja=function(R){cv('markChanged',R);};this.Ii=function(R){cN('markChanged',R);};this.xC=function(R){cv('markRemoved',R);};this.AP=function(R){cN('markRemoved',R);};this.Kq=function(R){cv('markReordered',R);};this.FI=function(R){cN('markReordered',R);};this.Xy=function(R){cv('marksLoaded',R);};this.VS=function(R){cN('marksLoaded',R);};this.Kv=function(R){cv('markSelectionChanged',R);};this.Gw=function(R){cN('markSelectionChanged',R);};this.yW=function(R){cv('textPageReady',R);};this.FL=function(R){cN('textPageReady',R);};this.Zu=function(R){cv('selectTextMouseToolCompleted',R);};this.Uu=function(R){cN('selectTextMouseToolCompleted',R);};this.abe=function(R){cv('exceptionThrown',R);};this.Yv=function(R){cv('scaleChanged',R);};this.VW=function(R){cN('scaleChanged',R);};this.QI=function(R){cN('exceptionThrown',R);};this.yI=function(R){cv('textExtractionFailed',R);};this.FP=function(R){cN('textExtractionFailed',R);};this.kk=function(R){cv('propertyChanged',R);};this.nv=function(R){cN('propertyChanged',R);};var aP=function(dQ,F){try{var R;R=bi.getHandler(dQ);if(R){R(hs,F);}}catch(e){hs.aK(dQ+'Event',e);}};var qm=function(dQ){function AR(aH,F){aP(dQ,F);};K['add_'+dQ](AR);};var JY=function(dQ){function AR(aH,F){if(RQ&&K.Lu()){FN();}aP(dQ,F);};K['add_'+dQ](AR);};function FN(){var fN,mR,XS;if(NM!==''){XS=document.getElementById(NM);if(XS){fN=hs.Ld();mR='{encodedDocumentIdentifier:"'+fN.encodedDocumentIdentifier;mR+='",pageNumber:'+fN.pageNumber.toString();mR+=',viewFitType:'+fN.viewFitType.toString();if(fN.viewRectangle&&fN.viewFitType===IPCC.Web.UI.FitType.Rectangle){mR+=',viewRectangle:{x:'+fN.viewRectangle.x.toFixed(5);mR+=',y:'+fN.viewRectangle.y.toFixed(5);mR+=',width:'+fN.viewRectangle.width.toFixed(5);mR+=',height:'+fN.viewRectangle.height.toFixed(5);mR+='}';}if(fN.viewRotationDegreesClockwise){mR+=',viewRotationDegreesClockwise:'+fN.viewRotationDegreesClockwise.toString();}if(fN.viewMirror){mR+=',viewMirror:'+fN.viewMirror.toString();}if(fN.viewZoomFactor){mR+=',viewZoomFactor:'+fN.viewZoomFactor.toString();}if(RQ){var aY=K.en();if(aY){mR+=',artPageJson:"'+IPCC.hE.sf(aY.saveToJson())+'"';}}mR+='}';XS.value=mR;}}};var aty=function(){function AR(aH,F){var Ue=true;switch(F.get_propertyName()){case 'documentIdentifier':case 'pageNumber':case 'artPage':case 'includeArtInPostBack':case 'displayedPageRectangle':FN();break;case 'magnifierWindowPosition':case 'magnifierIsVisible':case 'cursor':case 'markCursor':case 'inProgressMark':case 'JS':case 'vo':Ue=false;break;case 'JA':if(K.Lu()){FN();}Ue=false;break;}if(Ue){aP('propertyChanged',F);}};K.kk(AR);};this.Vr=function(bg){IPCC.aI.ik(bg,'type',IPCC.Web.UI.FitType);if(bg===IPCC.Web.UI.FitType.Rectangle){throw new IPCC.Web.UI.ImGearArgumentException('type','The value must be a member of the IPCC.Web.UI.FitType enumeration (other than Rectangle).');}pp();dX={aCO:true,viewFitType:bg};Yt();};this.fK=function(){return K.bY()!==undefined;};this.kY=function(){pp();return K.bY().width;};this.jp=function(){pp();return K.bY().height;};this.aAy=function(){pp();return K.bY().hy;};this.azY=function(){return K.aR().fA().ahC();};this.aAl=function(){pp();return K.bY().gW;};this.Jt=function(){if(!K|| !(K.bY())){return '';}return K.bY().get_identifier();};this.KI=function(){if(!K|| !(K.bY())){return '';}return K.bY().get_encodedIdentifier();};this.nJ=function(){if(!K|| !(K.bY())){return-1;}return K.bY().aO;};this.auX=function(){if(!K|| !(K.bY())){return 0;}return K.bY().eP;};this.ahy=function(){var aG=K.bY();if(!aG){return new IPCC.Web.UI.Rectangle(0,0,0,0);}var as=K.fb();as.x=as.y=0;var rV=K.aR().fA();rV.vu();var ed=rV.xz(as);if(ed.x<0){ed.width+=ed.x;ed.x=0;}if(ed.y<0){ed.height+=ed.y;ed.y=0;}if(ed.x+ed.width>aG.width){ed.width=aG.width-ed.x;}if(ed.y+ed.height>aG.height){ed.height=aG.height-ed.y;}return ed;};function PH(){var cS={},bX=K.aR().fA();cS.documentIdentifier=hs.Jt();cS.encodedDocumentIdentifier=hs.KI();cS.pageNumber=hs.nJ();cS.artPage=hs.en();cS.referenceDocumentIdentifier=hs.Jt();cS.referencePageNumber=hs.nJ();cS.viewFitType=IPCC.Web.UI.FitType.Rectangle;cS.viewRectangle=hs.ahy();cS.imGearPage=hs.nZ();cS.transientArtPage=hs.lX();var gU=bX.ahC();if(gU!==0){cS.viewRotationDegreesClockwise=gU;}if(bX.ayD()){cS.viewMirror=true;}return cS;};this.aci=function(bf,cw){K.aci(bf,cw);};this.Ld=function(){var cS;if(am){cS=new IPCC.Web.UI.PageViewState();cS.documentIdentifier=am.documentIdentifier;cS.encodedDocumentIdentifier=am.encodedDocumentIdentifier;cS.pageNumber=am.pageNumber;cS.artPage=am.artPage;cS.artPageJson=am.artPageJson;cS.referenceDocumentIdentifier=am.documentIdentifier;cS.referencePageNumber=am.pageNumber;cS.viewFitType=am.viewFitType;cS.viewRectangle=am.viewRectangle;cS.viewRotationDegreesClockwise=am.viewRotationDegreesClockwise;cS.viewMirror=am.viewMirror;cS.viewZoomFactor=am.viewZoomFactor;cS.transientArtPage=am.transientArtPage;}else{cS=PH();}return cS;};this.LY=function(ae){var as=K.fb();this.ajA(ae,{x:as.width/2,y:as.height/2});};this.ajA=function(ae,dw){IPCC.aI.kd(ae,'factor',1.01,20);IPCC.aI.bx(dw,'point');pp();var aT=K.aR();var bn=aT.fA();var aQ=K.bY();var jI=bn.nX();if(jI*ae>aQ.qK){ae=aQ.qK/jI;}bn.yK(ae,ae,dw.x,dw.y);bn.ke(aQ,K.fb());dX=null;aT.je(bn);};this.ZX=function(ae){var as=K.fb();this.ajn(ae,{x:as.width/2,y:as.height/2});};this.ajn=function(ae,dw){IPCC.aI.kd(ae,'factor',1.01,20);IPCC.aI.bx(dw,'point');pp();var aT=K.aR();var bn=aT.fA();var aQ=K.bY();var jI=bn.nX();if(jI/ae<aQ.sC){ae=jI/aQ.sC;}bn.yK(1/ae,1/ae,dw.x,dw.y);bn.ke(aQ,K.fb());dX=null;aT.je(bn);};this.jN=function(ae){var as=K.fb();this.aqF(ae,{x:as.width/2,y:as.height/2});};this.DZ=function(ae){var aT=K.aR();dX=null;aT.DZ(ae);};this.Gi=function(ae){var aT=K.aR();dX=null;aT.Gi(ae);};this.DF=function(ae){var aT=K.aR();dX=null;aT.DF(ae);};this.aqF=function(ae,dw){IPCC.aI.bx(dw,'point');pp();var aT=K.aR();var bn=aT.fA();var aQ=K.bY();var jI=bn.nX();if(ae>aQ.qK){ae=aQ.qK;}else if(ae<aQ.sC){ae=aQ.sC;}bn.yK(ae/jI,ae/jI,dw.x,dw.y);bn.ke(aQ,K.fb());dX=null;aT.je(bn);};this.vm=function(sY){IPCC.aI.UK(sY,'degreesClockwise',[90,180,270,-90,-180,-270]);pp();var aT=K.aR();var bn=aT.fA();var as=K.fb();bn.acl(sY,as.width/2,as.height/2);bn.ke(K.bY(),K.fb());dX=null;aT.je(bn);};this.amK=function(){pp();var aT=K.aR();var bn=aT.fA();var as=K.fb();bn.yK(-1,1,as.width/2,as.height/2);bn.ke(K.bY(),K.fb());dX=null;aT.je(bn);};this.asc=function(ed){IPCC.aI.h(ed,'pageRectangle');pp();var aT=K.aR();var bn=aT.fA();var as=K.fb();var aQ=K.bY();bn.NK(aQ,as,ed);bn.ke(aQ,K.fb());dX=null;aT.je(bn);};this.asS=function(bW){IPCC.aI.bx(bW,'imagePoint');pp();var aT=K.aR();var bn=aT.fA();var as=K.fb();bn.afV(as,bW);bn.ke(K.bY(),K.fb());dX=null;aT.je(bn);};this.akt=function(){pp();dX=null;var aT=K.aR();var bn=aT.fA();var as=K.fb();bn.yK(1,-1,as.width/2,as.height/2);bn.ke(K.bY(),K.fb());dX=null;aT.je(bn);};this.dh=function(){K.dh();};this.KW=function(){K.KW();};var Yt=function(){var aQ=K.bY();var as=K.fb();var bn;if(!dX){bn=K.aR().fA();bn.ke(aQ,as);K.aR().je(bn);return;}if(dX.aCO){bn=K.aR().fA();}else{bn=new IPCC.fD();bn.aoq(aQ,as);if(dX.viewRotationDegreesClockwise){bn.rotate(dX.viewRotationDegreesClockwise);}if(dX.viewMirror){bn.aoe(as);}}if(dX.viewZoomFactor){if(dX.viewZoomFactor>aQ.qK){dX.viewZoomFactor=aQ.qK;}else if(dX.viewZoomFactor<aQ.sC){dX.viewZoomFactor=aQ.sC;}dX.viewFitType=IPCC.Web.UI.FitType.ActualSize;bn.XA(dX.viewFitType,aQ,as);bn.scale(dX.viewZoomFactor,dX.viewZoomFactor);}else{if(!dX.viewFitType&&dX.viewFitType!==0){dX.viewFitType=IPCC.Web.UI.FitType.FullImage;}if(dX.viewFitType===IPCC.Web.UI.FitType.Rectangle&& !dX.viewRectangle){dX.viewFitType=IPCC.Web.UI.FitType.FullImage;}if(dX.viewFitType!==IPCC.Web.UI.FitType.Rectangle){bn.XA(dX.viewFitType,aQ,as);}else{bn.NK(aQ,as,dX.viewRectangle);}}bn.ke(aQ,as);K.aR().je(bn);};var aiB=function(GZ){dX=GZ;Ma=0;Yt();};this.NT=function(aV){xk++;var Wk=xk;var ayB={};Fg=0.0;K.LA=0.0;IPCC.hE.akA(aV);if(nR(IPCC.Web.UI.DebugErrorLevel.Development)){var cQ='opening documentIdentifier "'+aV.documentIdentifier+'", pageNumber '+aV.pageNumber;this.vP(cQ,IPCC.Web.UI.DebugErrorLevel.Development);}am=new IPCC.Web.UI.PageViewState();var L;for(L in aV){if(aV.hasOwnProperty(L)){am[L]=aV[L];}}if(aV.documentIdentifier===''){this.Ni();return;}if(IPCC.Web.UI.ArtPage){if(am){if(!am.artPage){var aY=new IPCC.Web.UI.ArtPage();if(am.artPageJson){aY.loadFromJson(am.artPageJson);}am.artPage=aY;}if(!am.documentArtPage){var ec=new IPCC.Web.UI.ArtPage();am.documentArtPage=ec;}if(this.kG()===true){if(!am.imGearPage){var hH=new IPCC.Web.UI.ImGearDocument({documentIdentifier:aV.documentIdentifier,imageServicePath:this.uT()});am.imGearPage=new IPCC.Web.UI.ImGearPage({pageNumber:aV.pageNumber,ba:hH});hH.get_pages().addPage(am.imGearPage);}if(!am.transientArtPage){am.transientArtPage=new IPCC.Web.UI.ArtPage();}}}}if(am.viewRotationDegreesClockwise){IPCC.aI.UK(am.viewRotationDegreesClockwise,'parameters.viewRotationDegreesClockwise',[0,90,180,270,-90,-180,-270]);}if(am.viewFitType){IPCC.aI.ik(am.viewFitType,'parameters.viewFitType',IPCC.Web.UI.FitType);}if(am.viewZoomFactor){IPCC.aI.kd(am.viewZoomFactor,'parameters.viewZoomFactor',0,20);}aP('pageOpening',aV);var aG=new IPCC.hE(aV.encodedDocumentIdentifier,aV.pageNumber,0,0,0,0);var qZ=function(){if(Wk!==xk){return;}var so=null;if(K.bY()){so=PH();}K.aR().oi();K.yd(aG);aiB(am);if(aV.artServiceOption===IPCC.Web.UI.ImGearArtDataServices.ArtDataService){if(am){if(am.artPage){K.mg(am.artPage);K.en().loadFromJson(aG.awC);}}}else{if(am){if(am.artPage){K.mg(am.artPage);}if(am.documentArtPage){K.Kz(am.documentArtPage);}if(K.kG()===true){if(am.imGearPage){var WL=am.imGearPage.get_pageWidth();var aag=am.imGearPage.get_pageHeight();am.imGearPage.nC(hs.jj());if(!WL){am.imGearPage.Os(hs.get_pageWidth());}if(!aag){am.imGearPage.NG(hs.get_pageHeight());}K.DK(am.imGearPage);if(typeof(K.nZ().zS==='function')){if(!K.nZ().dr().Cr()){am.imGearPage.yx(hs.kQ());setTimeout(K.nZ().zS,1000);}}}if(am.transientArtPage){K.DC(am.transientArtPage);}}}}am=null;if(so){aP('pageClosed',so);}FN();aP('pageOpened',aV);};if(aV.artServiceOption===IPCC.Web.UI.ImGearArtDataServices.ArtDataService){if(am){if(!am.artPageJson){aG.aIo(K.uT(),K,qZ,ayB);}else{aG.TC(K.uT(),K,qZ);}}}else{aG.TC(K.uT(),K,qZ);}};this.Ni=function(){xk++;if(!(K.bY())){return;}var so=PH();K.yd(undefined);K.mg(undefined);K.DK(undefined);K.DC(undefined);this.dh();FN();so=undefined;am=undefined;dX=undefined;var dA;dA=hs.oe();if(dA.igElements){if(dA.igElements.qq){dA.igElements.qq.zf=null;dA.igElements.qq.xW=null;dA.igElements.qq.Iu=null;dA.igElements.qq=null;}dA.igElements.BB=null;dA.igElements.eH=null;dA.igElements.gC=null;dA.igElements.ct=null;dA.igElements.oQ=null;dA.igElements.mo=null;dA.igElements.lu=null;dA.igElements.ra=null;dA.igElements.Qm=null;dA.igElements.SM=null;dA.igElements.pI=null;}hs=null;dA.bH=null;aP('pageClosed',so);};this.awH=function(aV){xk++;var Wk=xk;Fg=0.0;K.LA=0.0;IPCC.hE.akA(aV);if(nR(IPCC.Web.UI.DebugErrorLevel.Development)){var cQ='opening documentIdentifier "'+aV.documentIdentifier+'", pageNumber '+aV.pageNumber;this.vP(cQ,IPCC.Web.UI.DebugErrorLevel.Development);}am=new IPCC.Web.UI.PageViewState();var L;for(L in aV){if(aV.hasOwnProperty(L)){am[L]=aV[L];}}if(aV.documentIdentifier===''){this.Ni();return;}if(IPCC.Web.UI.ArtPage){if(am){if(!am.artPage){var aY=new IPCC.Web.UI.ArtPage();am.artPage=aY;}if(!am.documentArtPage){var ec=new IPCC.Web.UI.ArtPage();am.documentArtPage=ec;}if(this.kG()===true){if(!am.imGearPage){var hH=new IPCC.Web.UI.ImGearDocument({documentIdentifier:aV.documentIdentifier,imageServicePath:this.uT()});am.imGearPage=new IPCC.Web.UI.ImGearPage({pageNumber:aV.pageNumber,ba:hH});hH.get_pages().addPage(am.imGearPage);}if(!am.transientArtPage){am.transientArtPage=new IPCC.Web.UI.ArtPage();}}}}if(am.viewRotationDegreesClockwise){IPCC.aI.UK(am.viewRotationDegreesClockwise,'parameters.viewRotationDegreesClockwise',[0,90,180,270,-90,-180,-270]);}if(am.viewFitType){IPCC.aI.ik(am.viewFitType,'parameters.viewFitType',IPCC.Web.UI.FitType);}if(am.viewZoomFactor){IPCC.aI.kd(am.viewZoomFactor,'parameters.viewZoomFactor',0,20);}aP('pageOpening',aV);var aG=new IPCC.hE(aV.encodedDocumentIdentifier,aV.pageNumber,0,0,0,0);var qZ=function(){if(Wk!==xk){return;}var so=null;if(K.bY()){so=PH();}K.aR().oi();K.yd(aG);aiB(am);if(am){if(am.artPage){K.mg(am.artPage);}if(am.documentArtPage){K.Kz(am.documentArtPage);}if(K.kG()===true){if(am.imGearPage){var WL=am.imGearPage.get_pageWidth();var aag=am.imGearPage.get_pageHeight();am.imGearPage.nC(hs.jj());if(!WL){am.imGearPage.Os(hs.get_pageWidth());}if(!aag){am.imGearPage.NG(hs.get_pageHeight());}K.DK(am.imGearPage);if(typeof(K.nZ().zS==='function')){if(!K.nZ().dr().Cr()){am.imGearPage.yx(hs.kQ());setTimeout(K.nZ().zS,1000);}}}if(am.transientArtPage){K.DC(am.transientArtPage);}}}am=null;if(so){aP('pageClosed',so);}FN();aP('pageOpened',aV);};aG.avo(K.uT(),K,qZ);};this.aHs=function(){xk++;if(!(K.bY())){return;}var aG=K.bY();K.yd(undefined);this.dh();K.yd(aG);};this.Ti=function(GB){K.Ti(GB);};this.mg=function(G){K.mg(G);};this.en=function(){return K.en();};this.Kz=function(G){K.Kz(G);};this.Lk=function(){return K.Lk();};this.lX=function(){return K.lX();};this.DC=function(G){K.DC(G);};this.CD=function(){return K.CD();};this.apq=function(G){K.apq(G);};this.Kf=function(G){K.Kf(G);};this.vM=function(){return K.vM();};this.aDY=function(G){akQ=this.anV(G);};this.jd=function(){return akQ;};this.alQ=function(G){K.alQ(G);};this.abQ=function(){return K.abQ();};this.ni=function(){return K.ni();};this.om=function(G){K.om(G);};this.adY=function(G){K.adY(G);};this.YQ=function(){return K.YQ();};this.Yn=function(avl){K.Yn(avl);};this.Ru=function(){return K.Ru();};this.anV=function(bV){var bD='',Oy='',VI=function(bQ){var rv=0,bD;for(bD in bQ){if(bQ.hasOwnProperty(bD)){rv+=1;}}return rv;};for(bD in qI){if(qI.hasOwnProperty(bD)){if(typeof bV[bD]==='undefined'){bV[bD]=qI[bD];}if(typeof bV[bD]==='object'){if(!VI(bV[bD])){bV[bD]=qI[bD];}else if(VI(bV[bD])!==VI(qI[bD])){for(Oy in qI[bD]){if(typeof bV[bD][Oy]==='undefined'){bV[bD][Oy]=qI[bD][Oy];}}}}}}return bV;};this.aou=function(aop){if(aop===false){IPCC.hk=false;K.eA([new IPCC.mT(),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}else{IPCC.hk=true;IPCC.afI=this.jd();K.eA([new IPCC.mT(),new IPCC.dO(),new IPCC.ei(),new IPCC.dE(),new IPCC.cl(false)]);}};this.oi=function(){var aT=K.aR();if(!aT.Bs()){return;}K.aR().oi();};this.asj=function(ed){IPCC.aI.h(ed,'pageRectangle');var aG=K.bY();if(aG){K.aR().showSelection(ed);}};this.Dp=function(bW){IPCC.aI.bx(bW,'imagePoint');if(K.bY()){K.aR().Dp(new IPCC.Web.UI.Point(bW.x,bW.y));}};this.zP=function(bW){IPCC.aI.bx(bW,'imagePoint');if(K.bY()){K.aR().zP(new IPCC.Web.UI.Point(bW.x,bW.y));}};this.vY=function(){if(K.bY()&&K.aR().Bs()){return K.aR().vY();}return new IPCC.Web.UI.Rectangle(0,0,0,0);};this.axq=function(){if(K.bY()&&K.aR().Bs()){var ed=K.aR().vY();return K.aR().fA().xz(ed);}return new IPCC.Web.UI.Rectangle(0,0,0,0);};this.Bs=function(){return! !(K.bY()&&K.aR().Bs());};this.uT=function(){return K.uT();};this.abL=function(G){IPCC.aI.ku(G,'value');K.abL(G);};this.avD=function(){return NM;};this.aEb=function(G){IPCC.aI.ku(G,'value');NM=G;};this.aAa=function(){return RQ;};this.aoO=function(G){RQ=G;};var tZ='';this.uY=function(G){K.uY(G);tZ=G;};this.oe=function(){return tZ;};this.axR=function(){return K.aR().get_magnifierMagnification();};this.anJ=function(G){IPCC.aI.kd(G,'value',1.5,8);K.aR().set_magnifierMagnification(G);};this.azu=function(){return K.aR().vi().width;};this.apc=function(G){IPCC.aI.kd(G,'value',25,500);var rv=K.aR().vi();rv.width=G;K.aR().set_magnifierWindowSize(rv);};this.ayR=function(){return K.aR().vi().height;};this.ape=function(G){IPCC.aI.kd(G,'value',25,500);var rv=K.aR().vi();rv.height=G;K.aR().set_magnifierWindowSize(rv);};this.MH=function(){return K.aR().MH();};this.Ub=function(G){IPCC.aI.kd(G,'value',-500,500);K.aR().Ub(G);};this.Md=function(){return K.aR().Md();};this.aas=function(G){IPCC.aI.kd(G,'value',-500,500);K.aR().aas(G);};this.Yb=function(){return K.aR().Yb();};this.Xc=function(G){IPCC.aI.kd(G,'value',0.1,0.5);K.aR().Xc(G);};this.AE=function(){return K.aR().AE();};this.Ie=function(G){K.aR().Ie(G);};this.raisePropertyChanged=function(cG,vJ){if(K){K.dm(cG,vJ);}};var bK= -1;this.YE=function(){return bK;};this.aGb=function(G){K.rw=G;};this.QQ=function(G){K.set_areMarksEditable(G);};this.aIw=function(){return K.set_areMarksEditable();};this.HD=function(G){IPCC.aI.ik(G,'value',IPCC.Web.UI.MouseTool);if(bK!==G){bK=G;var ie="None";switch(bK){case IPCC.Web.UI.MouseTool.None:K.eA([]);break;case IPCC.Web.UI.MouseTool.Magnifier:if(IPCC.hk===true){K.eA([new IPCC.qd(),new IPCC.dO(),new IPCC.ei(false,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.qd(),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);ie="Magnifier";}break;case IPCC.Web.UI.MouseTool.RectangleZoom:if(IPCC.hk===true){K.eA([new IPCC.mT(),new IPCC.dO(),new IPCC.ei(false,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.mT(),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="RectangleZoom";break;case IPCC.Web.UI.MouseTool.HandPan:if(IPCC.hk===true){K.eA([new IPCC.pn(),new IPCC.dO(),new IPCC.ei(false,this.jd()),new IPCC.dE(),new IPCC.cl(true)]);}else{K.eA([new IPCC.pn(),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(true)]);}ie="HandPan";break;case IPCC.Web.UI.MouseTool.Select:if(IPCC.hk===true){K.eA([new IPCC.oA(),new IPCC.dO(),new IPCC.ei(false,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.oA(),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="Select";break;case IPCC.Web.UI.MouseTool.CreateRectangleMark:if(IPCC.hk===true){K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.Rectangle),new IPCC.dO(),new IPCC.ei(true,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.Rectangle),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="CreateRectangleMark";break;case IPCC.Web.UI.MouseTool.CreateRectangleRedactionMark:if(IPCC.hk===true){K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.RectangleRedaction),new IPCC.dO(),new IPCC.ei(true,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.RectangleRedaction),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="CreateRectangleRedactionMark";break;case IPCC.Web.UI.MouseTool.CreateEllipseMark:if(IPCC.hk===true){K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.Ellipse),new IPCC.dO(),new IPCC.ei(true,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.Ellipse),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="CreateEllipseMark";break;case IPCC.Web.UI.MouseTool.CreateLineMark:if(IPCC.hk===true){K.eA([new IPCC.lG(),new IPCC.dO(),new IPCC.ei(true,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.lG(),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="CreateLineMark";break;case IPCC.Web.UI.MouseTool.CreatePolylineMark:if(IPCC.hk===true){K.eA([new IPCC.kC(IPCC.Web.UI.MarkType.Polyline),new IPCC.dO(),new IPCC.ei(true,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.kC(IPCC.Web.UI.MarkType.Polyline),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="CreatePolylineMark";break;case IPCC.Web.UI.MouseTool.CreateFreehandMark:if(IPCC.hk===true){K.eA([new IPCC.lF(),new IPCC.dO(),new IPCC.ei(true,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.lF(),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="CreateFreehandMark";break;case IPCC.Web.UI.MouseTool.CreatePolygonMark:if(IPCC.hk===true){K.eA([new IPCC.kC(IPCC.Web.UI.MarkType.Polygon),new IPCC.dO(),new IPCC.ei(true,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.kC(IPCC.Web.UI.MarkType.Polygon),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="CreatePolygonMark";break;case IPCC.Web.UI.MouseTool.CreateTextMark:if(IPCC.hk===true){K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.Text),new IPCC.dO(),new IPCC.ei(true,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.Text),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="CreateTextMark";break;case IPCC.Web.UI.MouseTool.CreateTextInputSignatureMark:if(IPCC.hk===true){K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.TextLine),new IPCC.dO(),new IPCC.ei(true,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.TextLine),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="CreateTextInputSignatureMark";break;case IPCC.Web.UI.MouseTool.CreateTextAreaSignatureMark:K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.TextAreaSignature),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);ie="CreateTextAreaSignatureMark";break;case IPCC.Web.UI.MouseTool.EditMarks:if(IPCC.hk===true){K.eA([new IPCC.ln(IPCC.Web.UI.MarkType.Text),new IPCC.dO(),new IPCC.ei(true,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.ln(IPCC.Web.UI.MarkType.Text),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="EditMarks";break;case IPCC.Web.UI.MouseTool.RunMarks:if(IPCC.hk===true){K.eA([new IPCC.AV(IPCC.Web.UI.MarkType.Text),new IPCC.dO(),new IPCC.ei(false,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.AV(IPCC.Web.UI.MarkType.Text),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="RunMarks";break;case IPCC.Web.UI.MouseTool.CreateStampMark:if(IPCC.hk===true){K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.Stamp),new IPCC.dO(),new IPCC.ei(true,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.Stamp),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="CreateStampMark";break;case IPCC.Web.UI.MouseTool.CreateImageStampAnnotationMark:if(IPCC.hk===true){K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.ImageStampAnnotation),new IPCC.dO(),new IPCC.ei(true,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.ImageStampAnnotation),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="CreateImageStampAnnotationMark";break;case IPCC.Web.UI.MouseTool.CreateImageStampRedactionMark:if(IPCC.hk===true){K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.ImageStampRedaction),new IPCC.dO(),new IPCC.ei(true,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.eg(IPCC.Web.UI.MarkType.ImageStampRedaction),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="CreateImageStampRedactionMark";break;case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:K.Jr=true;if(IPCC.hk===true){K.eA([new IPCC.jT(),new IPCC.dO(),new IPCC.ei(false,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.jT(),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="CreateHighlightTextMark";break;case IPCC.Web.UI.MouseTool.SelectText:K.Jr=false;if(IPCC.hk===true){K.eA([new IPCC.jT(),new IPCC.dO(),new IPCC.ei(false,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.jT(),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="SelectText";break;case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:if(IPCC.hk===true){K.eA([new IPCC.jT(),new IPCC.dO(),new IPCC.ei(true,this.jd()),new IPCC.dE(),new IPCC.cl(false)]);}else{K.eA([new IPCC.jT(),new IPCC.dO(),new IPCC.dE(),new IPCC.cl(false)]);}ie="CreateStrikethroughMark";break;}this.raisePropertyChanged('mouseTool',{mouseToolType:ie});}};this.JM=function(asi){bK= -1;K.eA(asi);};this.azF=function(){return K.aR().get_presentationQuality();};this.aos=function(G){IPCC.aI.kd(G,'value',0,100);K.aR().set_presentationQuality(G);};this.ayJ=function(){return K.aR().get_scrollBars();};this.anZ=function(G){IPCC.aI.ik(G,'value',IPCC.Web.UI.ScrollBars);K.aR().set_scrollBars(G);};this.aqj=function(bW,asA){IPCC.aI.bx(bW,'imagePoint');if(!(K.bY())){return new IPCC.Web.UI.Point(0,0);}var dw=K.aR().fA().transform(bW);if(asA){dw.constrain(K.fb());}return dw;};this.OM=function(dw,arI){IPCC.aI.bx(dw,'windowPoint');var aG=K.bY();if(!aG){return new IPCC.Web.UI.Point(0,0);}var rV=K.aR().fA();rV.vu();var bW=rV.transform(dw);if(arI){bW.constrain(aG);}return bW;};function aGk(){var dA;dA=hs.oe();var ajW=dA.clientWidth;var alc=dA.clientHeight;var aBK=(dX&&dX.viewFitType===adt&&ajW===acR&&alc===acI);if(aBK){if(Ma>2){return;}Ma++;}else{adt=dX?dX.viewFitType: -1;acR=ajW;acI=alc;Ma=0;}Yt();};function atr(){dX=null;};function arn(aH,F){switch(F.hw){case IPCC.fj.aiP:hs.ajA(1.25,F.RF.windowPoint);break;case IPCC.fj.ajt:hs.ajn(1.25,F.RF.windowPoint);break;case IPCC.fj.Zz:hs.vm(F.G);break;case IPCC.fj.ala:hs.akt();break;case IPCC.fj.amc:hs.amK();break;case IPCC.fj.ajr:hs.Vr(F.G);break;case IPCC.fj.abr:hs.HD(F.G);break;}};this.kG=function(){return K.kG();};this.Je=function(G){K.Je(G);};this.dr=function(){return K.dr();};this.nZ=function(){return K.nZ();};this.DK=function(G){K.DK(G);};this.BE=function(){return K.get_requireRequestsOptimize();};this.JK=function(G){K.JK(G);};this.kQ=function(){return K.kQ();};this.yx=function(G){K.yx(G);};this.Jk=function(bW){IPCC.aI.bx(bW,'imagePoint');return K.Jk(bW);};this.zd=function(dH){K.zd(dH);};this.UN=function(){K.UN();};this.KF=function(vg,cw){var Ip=K.dr().gs().ej();IPCC.aI.nq(vg,'vg',0,Ip-1);K.KF(vg,cw);};this.ud=function(dH){if(dH===undefined){K.aR().ud(dH);return false;}var Ip=K.dr().gs().ej();IPCC.aI.nq(dH,'textIndex',0,Ip-1);K.ud(dH);return true;};this.IQ=function(){return! !(K.bY()&&K.kG()&&K.dr().oS()===true&&K.aR().IQ());};this.aac=function(){var aT=K.aR();aT.aac();};this.Re=function(){if(K.kG()&&K.dr().oS()===true){return Math.min(K.aR().afW(),K.aR().Cj());}};this.AY=function(){if(K.kG()&&K.dr().oS()===true){return K.aR().AY();}};this.Bv=function(){if(K.kG()&&K.dr().oS()===true&&K.aR().IQ()){return K.Bv();}else{return "";}};this.Cj=function(){return K.aR().Cj();};this.atn=function(){return K.get_cursor();};this.aCc=function(G){K.set_cursor(G);};this.Aw=function(){return K.Aw();};this.SX=function(G){K.SX(G);};this.jj=function(){return K.jj();};this.nC=function(G){K.nC(G);};this.axk=function(){K.aR().hideMagnifier();};this.arL=function(dw){K.aR().showMagnifier(dw);};this.wI=function(C){if(K.pa().igElements){K.wI(C);K.dh();}};this.EO=function(){K.EO();};this.CP=function(){return K.CP();};this.pY=function(){if(K.pa().igElements){K.pY(true);}};function aFj(aH,F){var yg=F.scaleFactor;var ay={scaleType:"scaledDown",pageNumber:F.pageNumber};if(Fg!==yg){if(yg>Fg){ay.scaleType="scaledUp";}Fg=yg;aP('scaleChanged',ay);}};this.initialize=function(){K.anT(this.oe().id);K.uY(this.oe().id);if(bK=== -1){this.HD(IPCC.Web.UI.MouseTool.RectangleZoom);}qm('mouseDown');qm('mouseMove');qm('mouseUp');qm('contextMenu');qm('markCreating');qm('pageOpenFailed');qm('textPageReady');qm('pageDisplayed');qm('exceptionThrown');qm('selectTextMouseToolCompleted');JY('markAdded');JY('markChanged');JY('markRemoved');qm('textExtractionFailed');JY('markReordered');JY('marksLoaded');qm('markSelectionChanged');aty();K.aAJ(aGk);K.aAL(atr);K.atV(arn);K.add_scaleChanged(aFj);K.ayL();var dA=this.oe();dA.bH=this;};rg=(rg!==false);K=new IPCC.Xz(rg);K.aEH('PageView');K.aov(Qx);};abH.prototype={dispose:function(){this.aF('dispose',arguments);this.Ni();},get_debug:function(){try{var bL=this.Jm();this.dk('get_debug',arguments,bL);return bL;}catch(e){this.aK('get_debug',e);throw e;}},set_debug:function(value){try{this.aF('set_debug',arguments);var AK=this.Jm();this.Uy(value);if(!AK){this.aF('set_debug',arguments);}}catch(e){this.aK('set_debug',e);throw e;}},get_debugErrorLevel:function(){try{var bL=this.Ak();this.dk('get_debugErrorLevel',arguments,bL);return bL;}catch(e){this.aK('get_debugErrorLevel',e);throw e;}},set_debugErrorLevel:function(value){try{this.aF('set_debugErrorLevel',arguments);var AK=this.Ak();this.II(value);if(AK<IPCC.Web.UI.DebugErrorLevel.Development){this.aF('set_debugErrorLevel',arguments);}}catch(e){this.aK('set_debugErrorLevel',e);throw e;}},get_artServiceOption:function(){try{var bL=this.Ru();this.dk('get_artServiceOption',arguments,bL);return bL;}catch(e){this.aK('get_artServiceOption',e);throw e;}},set_artServiceOption:function(value){try{this.aF('set_artServiceOption',arguments);this.Yn(value);}catch(e){this.aK('set_artServiceOption',e);throw e;}},add_pageOpening:function(handler){try{this.Wq(handler);}catch(e){this.aK('add_pageOpening',e);throw e;}},remove_pageOpening:function(handler){try{this.Sv(handler);}catch(e){this.aK('remove_pageOpening',e);throw e;}},add_pageOpened:function(handler){try{this.WP(handler);}catch(e){this.aK('add_pageOpened',e);throw e;}},remove_pageOpened:function(handler){try{this.Sy(handler);}catch(e){this.aK('remove_pageOpened',e);throw e;}},add_pageClosed:function(handler){try{this.azs(handler);}catch(e){this.aK('add_pageClosed',e);throw e;}},remove_pageClosed:function(handler){try{this.azO(handler);}catch(e){this.aK('remove_pageClosed',e);throw e;}},add_pageOpenFailed:function(handler){try{this.IY(handler);}catch(e){this.aK('add_pageOpenFailed',e);throw e;}},remove_pageOpenFailed:function(handler){try{this.Ge(handler);}catch(e){this.aK('remove_pageOpenFailed',e);throw e;}},add_pageDisplayed:function(handler){try{this.WW(handler);}catch(e){this.aK('add_pageDisplayed',e);throw e;}},remove_pageDisplayed:function(handler){try{this.Ws(handler);}catch(e){this.aK('remove_pageDisplayed',e);throw e;}},add_mouseDown:function(handler){try{this.MR(handler);}catch(e){this.aK('add_mouseDown',e);throw e;}},remove_mouseDown:function(handler){try{this.Vb(handler);}catch(e){this.aK('remove_mouseDown',e);throw e;}},add_mouseMove:function(handler){try{this.NP(handler);}catch(e){this.aK('add_mouseMove',e);throw e;}},remove_mouseMove:function(handler){try{this.Vy(handler);}catch(e){this.aK('remove_mouseMove',e);throw e;}},add_mouseUp:function(handler){try{this.NC(handler);}catch(e){this.aK('add_mouseUp',e);throw e;}},remove_mouseUp:function(handler){try{this.Vl(handler);}catch(e){this.aK('remove_mouseUp',e);throw e;}},add_contextMenu:function(handler){try{this.auN(handler);}catch(e){this.aK('add_contextMenu',e);throw e;}},remove_contextMenu:function(handler){try{this.aBI(handler);}catch(e){this.aK('remove_contextMenu',e);throw e;}},add_markAdded:function(handler){try{this.ya(handler);}catch(e){this.aK('add_markAdded',e);throw e;}},remove_markAdded:function(handler){try{this.Ah(handler);}catch(e){this.aK('remove_markAdded',e);throw e;}},add_markCreating:function(handler){try{this.abp(handler);}catch(e){this.aK('add_markCreating',e);throw e;}},remove_markCreating:function(handler){try{this.To(handler);}catch(e){this.aK('remove_markCreating',e);throw e;}},add_markChanged:function(handler){try{this.Ja(handler);}catch(e){this.aK('add_markChanged',e);throw e;}},remove_markChanged:function(handler){try{this.Ii(handler);}catch(e){this.aK('remove_markChanged',e);throw e;}},add_markRemoved:function(handler){try{this.xC(handler);}catch(e){this.aK('add_markRemoved',e);throw e;}},remove_markRemoved:function(handler){try{this.AP(handler);}catch(e){this.aK('remove_markRemoved',e);throw e;}},add_markReordered:function(handler){try{this.Kq(handler);}catch(e){this.aK('add_markReordered',e);throw e;}},remove_markReordered:function(handler){try{this.FI(handler);}catch(e){this.aK('remove_markReordered',e);throw e;}},add_marksLoaded:function(handler){try{this.Xy(handler);}catch(e){this.aK('add_marksLoaded',e);throw e;}},remove_marksLoaded:function(handler){try{this.VS(handler);}catch(e){this.aK('remove_marksLoaded',e);throw e;}},add_markSelectionChanged:function(handler){try{this.Kv(handler);}catch(e){this.aK('add_markSelectionChanged',e);throw e;}},remove_markSelectionChanged:function(handler){try{this.Gw(handler);}catch(e){this.aK('remove_markSelectionChanged',e);throw e;}},add_selectTextMouseToolCompleted:function(handler){try{this.Zu(handler);}catch(e){this.aK('add_selectTextMouseToolCompleted',e);throw e;}},remove_selectTextMouseToolCompleted:function(handler){try{this.Uu(handler);}catch(e){this.aK('remove_selectTextMouseToolCompleted',e);throw e;}},add_textPageReady:function(handler){try{this.yW(handler);}catch(e){this.aK('add_textPageReady',e);throw e;}},remove_textPageReady:function(handler){try{this.FL(handler);}catch(e){this.aK('remove_textPageReady',e);throw e;}},add_exceptionThrown:function(handler){this.abe(handler);},remove_exceptionThrown:function(handler){this.QI(handler);},add_scaleChanged:function(handler){try{this.Yv(handler);}catch(e){this.aK('add_scaleChanged',e);throw e;}},remove_scaleChanged:function(handler){try{this.VW(handler);}catch(e){this.aK('remove_scaleChanged',e);throw e;}},add_propertyChanged:function(handler){try{this.kk(handler);}catch(e){this.aK('add_propertyChanged',e);throw e;}},remove_propertyChanged:function(handler){try{this.nv(handler);}catch(e){this.aK('remove_propertyChanged',e);throw e;}},add_textExtractionFailed:function(handler){this.yI(handler);},remove_textExtractionFailed:function(handler){this.FP(handler);},writeToLog:function(message){try{this.mb(message);}catch(e){this.aK('writeToLog',e);throw e;}},fitPage:function(type){try{this.aF('fitPage',arguments);this.Vr(type);}catch(e){this.aK('fitPage',e);throw e;}},get_pageIsOpen:function(){try{var bL=this.fK();this.dk('get_pageIsOpen',arguments,bL);return bL;}catch(e){this.aK('get_pageIsOpen',e);throw e;}},get_pageWidth:function(){try{var bL=this.kY();this.dk('get_pageWidth',arguments,bL);return bL;}catch(e){this.aK('get_pageWidth',e);throw e;}},get_pageHeight:function(){try{var bL=this.jp();this.dk('get_pageHeight',arguments,bL);return bL;}catch(e){this.aK('get_pageHeight',e);throw e;}},get_pageXResolution:function(){try{var bL=this.aAy();this.dk('get_pageXResolution',arguments,bL);return bL;}catch(e){this.aK('get_pageXResolution',e);throw e;}},get_pageYResolution:function(){try{var bL=this.aAl();this.dk('get_pageYResolution',arguments,bL);return bL;}catch(e){this.aK('get_pageYResolution',e);throw e;}},get_documentIdentifier:function(){try{var bL=this.Jt();this.dk('get_documentIdentifier',arguments,bL);return bL;}catch(e){this.aK('get_documentIdentifier',e);throw e;}},get_encodedDocumentIdentifier:function(){try{var bL=this.KI();this.dk('get_encodedDocumentIdentifier',arguments,bL);return bL;}catch(e){this.aK('get_encodedDocumentIdentifier',e);throw e;}},get_pageNumber:function(){try{var bL=this.nJ();this.dk('get_pageNumber',arguments,bL);return bL;}catch(e){this.aK('get_pageNumber',e);throw e;}},get_documentPageCount:function(){try{var bL=this.auX();this.dk('get_documentPageCount',arguments,bL);return bL;}catch(e){this.aK('get_documentPageCount',e);throw e;}},get_displayedPageRectangle:function(){try{var bL=this.ahy();this.dk('get_displayedPageRectangle',arguments,bL);return bL;}catch(e){this.aK('get_displayedPageRectangle',e);throw e;}},get_currentState:function(){try{var bL=this.Ld();this.dk('get_currentState',arguments,bL);return bL;}catch(e){this.aK('get_currentState',e);throw e;}},zoomIn:function(factor){try{this.aF('zoomIn',arguments);this.LY(factor);}catch(e){this.aK('zoomIn',e);throw e;}},zoomOut:function(factor){try{this.aF('zoomOut',arguments);this.ZX(factor);}catch(e){this.aK('zoomOut',e);throw e;}},set_sharpening:function(factor){try{this.aF('set_sharpening',arguments);this.DZ(factor);}catch(e){this.aK('set_sharpening',e);throw e;}},set_gamma:function(factor){try{this.aF('set_gamma',arguments);this.Gi(factor);}catch(e){this.aK('set_gamma',e);throw e;}},set_svgLineWidthMultiplier:function(factor){try{this.aF('set_svgLineWidthMultiplier',arguments);this.DF(factor);}catch(e){this.aK('set_svgLineWidthMultiplier',e);throw e;}},zoom:function(factor){try{this.aF('zoom',arguments);this.jN(factor);}catch(e){this.aK('zoom',e);throw e;}},rotate:function(degreesClockwise){try{this.aF('rotate',arguments);this.vm(degreesClockwise);}catch(e){this.aK('rotate',e);throw e;}},showPageRectangle:function(imageRectangle){try{this.aF('showPageRectangle',arguments,1);this.asc(imageRectangle);}catch(e){this.aK('showPageRectangle',e);throw e;}},showPagePointAtCenter:function(imagePoint){try{this.aF('showPagePointAtCenter',arguments,1);this.asS(imagePoint);}catch(e){this.aK('showPagePointAtCenter',e);throw e;}},mirror:function(){try{this.aF('mirror',arguments);this.amK();}catch(e){this.aK('mirror',e);throw e;}},flip:function(){try{this.aF('flip',arguments);this.akt();}catch(e){this.aK('flip',e);throw e;}},display:function(){try{this.aF('display',arguments);this.dh();}catch(e){this.aK('display',e);throw e;}},openPage:function(parameters){try{this.aF('openPage',arguments,1);this.NT(parameters);}catch(e){this.aK('openPage',e);throw e;}},closePage:function(){try{this.aF('closePage',arguments);this.Ni();}catch(e){this.aK('closePage',e);throw e;}},hideSelection:function(){try{this.aF('hideSelection',arguments);this.oi();}catch(e){this.aK('hideSelection',e);throw e;}},showSelection:function(imageRectangle){try{this.aF('showSelection',arguments);this.asj(imageRectangle);}catch(e){this.aK('showSelection',e);throw e;}},showEmptySelection:function(imagePoint){try{this.aF('showEmptySelection',arguments);this.Dp(imagePoint);}catch(e){this.aK('showEmptySelection',e);throw e;}},extendSelection:function(imagePoint){try{this.aF('extendSelection',arguments);this.zP(imagePoint);}catch(e){this.aK('extendSelection',e);throw e;}},saveArtPage:function(onSave){try{this.aF('saveArtPage',arguments);this.Ti(onSave);}catch(e){this.aK('saveArtPage',e);throw e;}},get_selectionPageRectangle:function(){try{var bL=this.vY();this.dk('get_selectionPageRectangle',arguments,bL);return bL;}catch(e){this.aK('get_selectionPageRectangle',e);throw e;}},get_selectionWindowRectangle:function(){try{var bL=this.axq();this.dk('get_selectionWindowRectangle',arguments,bL);return bL;}catch(e){this.aK('get_selectionWindowRectangle',e);throw e;}},get_selectionIsVisible:function(){try{var bL=this.Bs();this.dk('get_selectionIsVisible',arguments,bL);return bL;}catch(e){this.aK('get_selectionIsVisible',e);throw e;}},get_controlStateElementId:function(){try{var bL=this.avD();this.dk('get_controlStateElementId',arguments,bL);return bL;}catch(e){this.aK('get_controlStateElementId',e);throw e;}},set_controlStateElementId:function(value){try{this.aF('set_controlStateElementId',arguments);this.aEb(value);}catch(e){this.aK('set_controlStateElementId',e);throw e;}},get_includeArtInPostBack:function(){try{var bL=this.aAa();this.dk('get_includeArtInPostBack',arguments,bL);return bL;}catch(e){this.aK('get_includeArtInPostBack',e);throw e;}},set_includeArtInPostBack:function(value){try{this.aF('set_includeArtInPostBack',arguments);this.aoO(value);}catch(e){this.aK('set_includeArtInPostBack',e);throw e;}},get_artPage:function(){try{var bL=this.en();this.dk('get_artPage',arguments,bL);return bL;}catch(e){this.aK('get_artPage',e);throw e;}},set_artPage:function(value){try{this.aF('set_artPage',arguments);this.mg(value);}catch(e){this.aK('set_artPage',e);throw e;}},get_documentArtPage:function(){try{var bL=this.Lk();this.dk('get_documentArtPage',arguments,bL);return bL;}catch(e){this.aK('get_documentArtPage',e);throw e;}},set_documentArtPage:function(value){try{this.aF('set_documentArtPage',arguments);this.Kz(value);}catch(e){this.aK('set_documentArtPage',e);throw e;}},get_transientArtPage:function(){try{var bL=this.lX();this.dk('get_transientArtPage',arguments,bL);return bL;}catch(e){this.aK('get_transientArtPage',e);throw e;}},set_transientArtPage:function(value){try{this.aF('set_transientArtPage',arguments);this.DC(value);}catch(e){this.aK('set_transientArtPage',e);throw e;}},get_imageHandlerUrl:function(){try{var bL=this.uT();this.dk('get_imageHandlerUrl',arguments,bL);return bL;}catch(e){this.aK('get_imageHandlerUrl',e);throw e;}},set_imageHandlerUrl:function(value){try{this.aF('set_imageHandlerUrl',arguments);this.abL(value);}catch(e){this.aK('set_imageHandlerUrl',e);throw e;}},get_resourcePath:function(){try{var bL=this.vM();this.dk('get_resourcePath',arguments,bL);return bL;}catch(e){this.aK('get_resourcePath',e);throw e;}},set_resourcePath:function(G){try{this.aF('set_resourcePath',arguments);this.Kf(G);}catch(e){this.aK('set_resourcePath',e);throw e;}},get_contextMenuLanguageDictionary:function(){try{var bL=this.jd();this.dk('get_contextMenuLanguageDictionary',arguments,bL);return bL;}catch(e){this.aK('get_contextMenuLanguageDictionary',e);throw e;}},set_contextMenuLanguageDictionary:function(G){try{this.aF('set_contextMenuLanguageDictionary',arguments);this.aDY(G);}catch(e){this.aK('set_contextMenuLanguageDictionary',e);throw e;}},get_textRequired:function(){try{var bL=this.kG();this.dk('get_textRequired',arguments,bL);return bL;}catch(e){this.aK('get_textRequired',e);throw e;}},set_textRequired:function(G){try{this.aF('set_textRequired',arguments);this.Je(G);}catch(e){this.aK('set_textRequired',e);throw e;}},get_textPage:function(){try{var bL=this.dr();this.dk('get_textPage',arguments,bL);return bL;}catch(e){this.aK('get_textPage',e);throw e;}},get_textSelectionIsVisible:function(){try{var bL=this.IQ();this.AX('textSelectionIsVisible',arguments,bL,1);return bL;}catch(e){this.aK('textSelectionIsVisible',e);throw e;}},getSelectedText:function(){try{var bL=this.Bv();this.AX('getSelectedText',arguments,bL,1);return bL;}catch(e){this.aK('getSelectedText',e);throw e;}},get_requireRequestsOptimize:function(){try{var bL=this.BE();this.dk('get_requireRequestsOptimize',arguments,bL);return bL;}catch(e){this.aK('BE',e);throw e;}},set_requireRequestsOptimize:function(value){try{this.aF('set_requireRequestsOptimize',arguments);this.JK(value);}catch(e){this.aK('set_requireRequestsOptimize',e);throw e;}},get_magnifierMagnification:function(){try{var bL=this.axR();this.dk('get_magnifierMagnification',arguments,bL);return bL;}catch(e){this.aK('get_magnifierMagnification',e);throw e;}},set_magnifierMagnification:function(value){try{this.aF('set_magnifierMagnification',arguments);this.anJ(value);}catch(e){this.aK('set_magnifierMagnification',e);throw e;}},get_magnifierWidth:function(){try{var bL=this.azu();this.dk('get_magnifierWidth',arguments,bL);return bL;}catch(e){this.aK('get_magnifierWidth',e);throw e;}},set_magnifierWidth:function(value){try{this.aF('set_magnifierWidth',arguments);this.apc(value);}catch(e){this.aK('set_magnifierWidth',e);throw e;}},get_magnifierHeight:function(){try{var bL=this.ayR();this.dk('get_magnifierHeight',arguments,bL);return bL;}catch(e){this.aK('get_magnifierHeight',e);throw e;}},set_magnifierHeight:function(value){try{this.aF('set_magnifierHeight',arguments);this.ape(value);}catch(e){this.aK('set_magnifierHeight',e);throw e;}},get_magnifierXOffset:function(){try{var bL=this.MH();this.dk('get_magnifierXOffset',arguments,bL);return bL;}catch(e){this.aK('get_magnifierXOffset',e);throw e;}},set_magnifierXOffset:function(value){try{this.aF('set_magnifierXOffset',arguments);this.Ub(value);}catch(e){this.aK('set_magnifierXOffset',e);throw e;}},get_magnifierYOffset:function(){try{var bL=this.Md();this.dk('get_magnifierYOffset',arguments,bL);return bL;}catch(e){this.aK('get_magnifierYOffset',e);throw e;}},set_magnifierYOffset:function(value){try{this.aF('set_magnifierYOffset',arguments);this.aas(value);}catch(e){this.aK('set_magnifierYOffset',e);throw e;}},showMagnifier:function(windowPoint){try{this.aF('showMagnifier',arguments,1);this.arL(windowPoint);}catch(e){this.aK('showMagnifier',e);throw e;}},hideMagnifier:function(){try{this.aF('hideMagnifier',arguments);this.axk();}catch(e){this.aK('hideMagnifier',e);throw e;}},get_markHandleSize:function(){try{var bL=this.Yb();this.dk('get_markHandleSize',arguments,bL);return bL;}catch(e){this.aK('get_markHandleSize',e);throw e;}},set_markHandleSize:function(value){try{this.aF('set_markHandleSize',arguments);this.Xc(value);}catch(e){this.aK('set_markHandleSize',e);throw e;}},get_markHandleMode:function(){try{var bL=this.AE();this.dk('get_markHandleMode',arguments,bL);return bL;}catch(e){this.aK('get_markHandleMode',e);throw e;}},set_markHandleMode:function(value){try{this.aF('set_markHandleMode',arguments);this.Ie(value);}catch(e){this.aK('set_markHandleMode',e);throw e;}},get_mouseTool:function(){try{var bL=this.YE();this.dk('get_mouseTool',arguments,bL);return bL;}catch(e){this.aK('get_mouseTool',e);throw e;}},set_mouseTool:function(value){try{this.aF('set_mouseTool',arguments);this.HD(value);}catch(e){this.aK('set_mouseTool',e);throw e;}},get_presentationQuality:function(){try{var bL=this.azF();this.dk('get_presentationQuality',arguments,bL);return bL;}catch(e){this.aK('get_presentationQuality',e);throw e;}},set_presentationQuality:function(value){try{this.aF('set_presentationQuality',arguments);this.aos(value);}catch(e){this.aK('set_presentationQuality',e);throw e;}},get_scrollBars:function(){try{var bL=this.ayJ();this.dk('get_scrollBars',arguments,bL);return bL;}catch(e){this.aK('get_scrollBars',e);throw e;}},set_scrollBars:function(value){try{this.aF('set_scrollBars',arguments);this.anZ(value);}catch(e){this.aK('set_scrollBars',e);throw e;}},get_imGearPage:function(){try{var bL=this.nZ();this.dk('get_imGearPage',arguments,bL);return bL;}catch(e){this.aK('get_imGearPage',e);throw e;}},set_imGearPage:function(value){try{this.aF('set_imGearPage',arguments);this.DK(value);}catch(e){this.aK('set_imGearPage',e);throw e;}},get_serviceResponseTimeout:function(){try{var bL=this.kQ();this.dk('get_serviceResponseTimeout',arguments,bL);return bL;}catch(e){this.aK('get_serviceResponseTimeout',e);throw e;}},set_serviceResponseTimeout:function(value){try{this.aF('set_serviceResponseTimeout',arguments);this.yx(value);}catch(e){this.aK('set_serviceResponseTimeout',e);throw e;}},get_currentTextIndex:function(){try{var bL=this.Cj();this.dk('get_currentTextIndex',arguments,bL);return bL;}catch(e){this.aK('get_currentTextIndex',e);throw e;}},get_cursor:function(){try{var bL=this.atn();this.dk('get_cursor',arguments,bL);return bL;}catch(e){this.aK('get_cursor',e);throw e;}},set_cursor:function(value){try{this.aF('set_cursor',arguments);this.aCc(value);}catch(e){this.aK('set_cursor',e);throw e;}},get_encryption:function(){try{var bL=this.jj();this.dk('get_encryption',arguments,bL);return bL;}catch(e){this.aK('get_encryption',e);throw e;}},set_encryption:function(value){try{this.aF('set_encryption',arguments);this.nC(value);}catch(e){this.aK('set_encryption',e);throw e;}},transformPagePointToWindow:function(imagePoint,constrainResultToWindow){try{var bL=this.aqj(imagePoint,constrainResultToWindow);this.AX('transformPagePointToWindow',arguments,bL,1);return bL;}catch(e){this.aK('transformPagePointToWindow',e);throw e;}},transformWindowPointToPage:function(windowPoint,constrainResultToImage){try{var bL=this.OM(windowPoint,constrainResultToImage);this.AX('transformWindowPointToPage',arguments,bL,1);return bL;}catch(e){this.aK('transformWindowPointToPage',e);throw e;}},transformPagePointToTextIndex:function(pagePoint){try{var bL=this.Jk(pagePoint);this.AX('transformPagePointToTextIndex',arguments,bL,1);return bL;}catch(e){this.aK('transformPagePointToTextIndex',e);throw e;}},removeAllHighlights:function(){try{this.aF('removeAllHighlights',arguments);this.UN();}catch(e){this.aK('removeAllHighlights',e);throw e;}},showTextSelection:function(indexOfFirstCharacter,length){try{this.aF('showTextSelection',arguments);this.KF(indexOfFirstCharacter,length);}catch(e){this.aK('showTextSelection',e);throw e;}},showEmptyTextSelection:function(textIndex){try{this.aF('showEmptyTextSelection',arguments);this.zd(textIndex);}catch(e){this.aK('showEmptyTextSelection',e);throw e;}},extendTextSelection:function(textIndex){try{this.aF('extendTextSelection',arguments);this.ud(textIndex);}catch(e){this.aK('extendTextSelection',e);throw e;}},initializeViewControllers:function(showArtContextMenu){try{this.aF('initializeViewControllers',arguments);this.aou(showArtContextMenu);}catch(e){this.aK('initializeViewControllers',e);throw e;}},get_autoUpdate:function(){try{var bL=this.Aw();this.dk('get_autoUpdate',arguments,bL);return bL;}catch(e){this.aK('get_autoUpdate',e);throw e;}},set_autoUpdate:function(value){try{this.aF('set_autoUpdate',arguments);this.SX(value);}catch(e){this.aK('set_autoUpdate',e);throw e;}}};module.exports=abH;},{}],114:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var pe=require('./FitType');var NJ=function(){return this;};NJ.prototype={documentIdentifier:'',encodedDocumentIdentifier:'',pageNumber:0,viewFitType:pe.FullImage,viewRectangle:null,viewRotationDegreesClockwise:0,viewMirror:false,viewZoomFactor:undefined,encryption:false};NJ.registerClass=dN;NJ.registerClass('IPCC.Web.UI.PageViewState');module.exports=NJ;},{"../../IPCC.Util":28,"./FitType":74}],115:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var vQ=function(x,y){this.x=x;this.y=y;return this;};vQ.prototype={toString:function(){return 'Point('+this.x+', '+this.y+')';},constrain:function(rectangle){this.x=Math.min(Math.max(this.x,rectangle.x),rectangle.x+rectangle.width);this.y=Math.min(Math.max(this.y,rectangle.y),rectangle.y+rectangle.height);}};vQ.registerClass=dN;vQ.registerClass('IPCC.Web.UI.Point');module.exports=vQ;},{"../../IPCC.Util":28}],116:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var Qb=function(){var aJ=[];var bi=new IPCC.Web.UI.jc();this.axT=function(bx){var F=new IPCC.Web.UI.PointEventArgs();F.point=bx;F.length=1;aJ.push(new IPCC.Web.UI.Point(bx.x,bx.y));F.index=aJ.length-1;this.aP('pointAdded',F);};this.ayo=function(aeT){var F=new IPCC.Web.UI.PointEventArgs();F.index=aJ.length;F.length=aeT.get_length();function ky(bx){aJ.push(bx);};aeT.forEach(ky,{});if(F.length>0){this.aP('pointAdded',F);}};this.lf=function(jh,ci){var XN=[].concat(aJ);var L;for(L=0;L<XN.length;L++){jh.call(ci,new IPCC.Web.UI.Point(XN[L].x,XN[L].y),L,this);}};this.yl=function(aD){kN(aD);var fh=aJ[aD];return new IPCC.Web.UI.Point(fh.x,fh.y);};this.aps=function(aD,bx){kN(aD);IPCC.aI.bx(bx,'point');var Pm=aJ[aD];if(Pm.x===bx.x&&Pm.y===bx.y){return;}Pm.x=bx.x;Pm.y=bx.y;var F=new IPCC.Web.UI.PointEventArgs();F.point=bx;F.index=aD;F.length=1;this.aP('pointChanged',F);};this.ej=function(){return aJ.length;};this.aCp=function(aD){kN(aD);var F=new IPCC.Web.UI.PointEventArgs();F.point=aJ[aD];F.index=aD;F.length=1;aJ.splice(aD,1);this.aP('pointRemoved',F);};this.azz=function(){if(aJ.length<1){return;}var F=new IPCC.Web.UI.PointEventArgs();F.index=0;F.length=aJ.length;aJ=[];this.aP('pointRemoved',F);};this.amF=function(es,eo){if(es===0&&eo===0){return;}IPCC.aI.ih(es,'deltaX');IPCC.aI.ih(eo,'deltaY');var L;for(L=0;L<aJ.length;L++){aJ[L].x+=es;aJ[L].y+=eo;}var F=new IPCC.Web.UI.PointEventArgs();F.index=0;F.length=aJ.length;this.aP('pointChanged',F);};this.rR=function(){if(aJ.length<1){return new IPCC.Web.UI.Rectangle(0,0,0,0);}var L,hf=aJ[0].x,iW=aJ[0].x,_top=aJ[0].y,iO=aJ[0].y;for(L=1;L<aJ.length;L++){var bx=aJ[L];hf=Math.min(hf,bx.x);iW=Math.max(iW,bx.x);_top=Math.min(_top,bx.y);iO=Math.max(iO,bx.y);}return new IPCC.Web.UI.Rectangle(hf,_top,iW-hf,iO-_top);};function kN(aD){if(aD>aJ.length-1||(aD<0)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('index',aD);}};this.aAT=function(R){bi.addHandler('pointAdded',R);};this.aAq=function(R){bi.removeHandler('pointAdded',R);};this.aAh=function(R){bi.addHandler('pointChanged',R);};this.azc=function(R){bi.removeHandler('pointChanged',R);};this.aAg=function(R){bi.addHandler('pointRemoved',R);};this.aAV=function(R){bi.removeHandler('pointRemoved',R);};this.aP=function(dQ,F){var R=bi.getHandler(dQ);if(R!==null){R(this,F);}};return this;};Qb.prototype={toString:function(){return 'PointCollection with '+this.get_length()+' points';},addPoint:function(point){this.axT(point);},addPoints:function(pointCollection){this.ayo(pointCollection);},forEach:function(method,context){this.lf(method,context);},getPoint:function(index){return this.yl(index);},setPoint:function(index,point){this.aps(index,point);},get_length:function(){return this.ej();},removePoint:function(index){this.aCp(index);},removeAllPoints:function(){this.azz();},moveAllPoints:function(deltaX,deltaY){this.amF(deltaX,deltaY);},add_pointAdded:function(handler){this.aAT(handler);},remove_pointAdded:function(handler){this.aAq(handler);},add_pointChanged:function(handler){this.aAh(handler);},remove_pointChanged:function(handler){this.azc(handler);},add_pointRemoved:function(handler){this.aAg(handler);},remove_pointRemoved:function(handler){this.aAV(handler);}};Qb.registerClass=dN;Qb.registerClass('IPCC.Web.UI.PointCollection');module.exports=Qb;},{"../../IPCC.Util":28}],117:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var Py=function(){return this;};Py.registerClass=dN;Py.prototype={};Py.registerClass('IPCC.Web.UI.PointEventArgs');module.exports=Py;},{"../../IPCC.Util":28}],118:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var QL=function(x,y,width,height){if(width<0){x+=width;width= -width;}if(height<0){y+=height;height= -height;}this.x=x;this.y=y;this.width=width;this.height=height;return this;};QL.prototype={intersect:function(rectangle){var bm=Math.max(this.x,rectangle.x);var ap=Math.min(this.x+this.width,rectangle.x+rectangle.width)-bm;var cu=Math.max(this.y,rectangle.y);var aM=Math.min(this.y+this.height,rectangle.y+rectangle.height)-cu;if(ap<=0||aM<=0){bm=cu=ap=aM=0;}this.x=bm;this.y=cu;this.width=ap;this.height=aM;},union:function(rectangle){var hf=Math.min(this.x,rectangle.x);var _top=Math.min(this.y,rectangle.y);var iW=Math.max(this.x+this.width,rectangle.x+rectangle.width);var iO=Math.max(this.y+this.height,rectangle.y+rectangle.height);this.x=hf;this.y=_top;this.width=iW-hf;this.height=iO-_top;return this;},scale:function(WF,QH){QH=QH||WF;var hf=this.x*WF;var _top=this.y*QH;var ap=this.width*WF;var aM=this.height*QH;this.x=hf;this.y=_top;this.width=ap;this.height=aM;return this;},toString:function(){return 'Rectangle('+this.x+', '+this.y+', '+this.width+', '+this.height+')';},contains:function(point){return point.x>=this.x&&point.y>=this.y&&point.x<this.x+this.width&&point.y<this.y+this.height;},clone:function(){return new IPCC.Web.UI.Rectangle(this.x,this.y,this.width,this.height);},equals:function(other){return this.x===other.x&&this.y===other.y&&this.width===other.width&&this.height===other.height;}};QL.registerClass=dN;QL.registerClass('IPCC.Web.UI.Rectangle');module.exports=QL;},{"../../IPCC.Util":28}],119:[function(require,module,exports){var fi=require('../../IPCC.Util').regEnum;var Pz=function(){};Pz.registerEnum=fi;Pz.prototype={None:0,Both:3,Auto:4};Pz.registerEnum('IPCC.Web.UI.ScrollBars',false);module.exports=Pz;},{"../../IPCC.Util":28}],120:[function(require,module,exports){var dN=require('../../IPCC.Util').regClass;var Ob=function(){return this;};Ob.registerClass=dN;Ob.prototype={};Ob.registerClass('IPCC.Web.UI.TextSelectedEventArgs');module.exports=Ob;},{"../../IPCC.Util":28}],121:[function(require,module,exports){var By=require('./../../Type');var ZO={aum:1,ImGearDocumentHyperlink:require('./ImGearDocumentHyperlink'),ImGearTextCharacter:require('./ImGearTextCharacter'),ImGearTextCharacterCollection:require('./ImGearTextCharacterCollection'),ImGearHyperlinkCollection:require('./ImGearHyperlinkCollection'),ImGearHyperlinkPage:require('./ImGearHyperlinkPage'),ImGearTextPage:require('./ImGearTextPage'),ImGearTextSection:require('./ImGearTextSection'),ImGearTextSectionCollection:require('./ImGearTextSectionCollection'),ImGearPageCountStatus:require('./ImGearPageCountStatus'),ImGearPageCreateArgs:require('./ImGearPageCreateArgs'),ImGearPage:require('./ImGearPage'),ImGearPageEventArgs:require('./ImGearPageEventArgs'),ImGearPageCollection:require('./ImGearPageCollection'),ImGearDocumentCreateArgs:require('./ImGearDocumentCreateArgs'),ImGearDocument:require('./ImGearDocument'),ImGearDocumentEventArgs:require('./ImGearDocumentEventArgs'),ImGearDocumentCollection:require('./ImGearDocumentCollection'),ImGearPageOpenFailedEventArgs:require('./ImGearPageOpenFailedEventArgs'),ImGearExceptions:require('./ImGearExceptions'),ImGearException:require('./ImGearExceptions').Ec,ImGearHttpException:require('./ImGearExceptions').Bl,ImGearArgumentException:require('./ImGearExceptions').rE,ImGearArgumentNullException:require('./ImGearExceptions').CN,ImGearArgumentOutOfRangeException:require('./ImGearExceptions').rG,ImGearArgumentTypeException:require('./ImGearExceptions').ImGearArgumentTypeException,ImGearArgumentUndefinedException:require('./ImGearExceptions').DN,ImGearInvalidOperationException:require('./ImGearExceptions').CK,ImGearNotImplementedException:require('./ImGearExceptions').BS,ImGearParameterCountException:require('./ImGearExceptions').BU,jc:require('./ImGearEventHandlerList'),ImGearArtDataServices:require('./ImGearArtDataServices'),MouseButton:require('./MouseButton'),MouseTool:require('./MouseTool'),by:require('./DomEvent'),DebugErrorLevel:require('./DebugErrorLevel'),DebugItemCause:require('./DebugItemCause'),PageView:require('./PageView'),PageViewState:require('./PageViewState'),ArtPage:require('./ArtPage'),Key:require('./Key'),FitType:require('./FitType'),ScrollBars:require('./ScrollBars'),Rectangle:require('./Rectangle'),Point:require('./Point'),PointCollection:require('./PointCollection'),LogItemEventArgs:require('./LogItemEventArgs'),MouseEventArgs:require('./MouseEventArgs'),PointEventArgs:require('./PointEventArgs'),CommentEventArgs:require('./CommentEventArgs'),TextSelectedEventArgs:require('./TextSelectedEventArgs'),HighLightType:require('./HighlightType'),LineStyle:require('./LineStyle'),LineHeadType:require('./LineHeadType'),CalloutType:require('./CalloutType'),FontStyle:require('./FontStyle'),HorizontalAlignment:require('./HorizontalAlignment'),VerticalAlignment:require('./VerticalAlignment'),Orientation:require('./Orientation'),MarkHandleMode:require('./MarkHandleMode'),MarkInteractionMode:require('./MarkInteractionMode'),MarkType:require('./MarkType'),MarkEventArgs:require('./MarkEventArgs'),MarkCollection:require('./MarkCollection'),Mark:require('./Mark'),Comment:require('./Comment'),Conversation:require('./Conversation'),Data:require('./Data'),Yy:require('./highlightItem')};By.registerNamespace('IPCC.Web.UI');module.exports=ZO;},{"./../../Type":56,"./ArtPage":65,"./CalloutType":66,"./Comment":67,"./CommentEventArgs":68,"./Conversation":69,"./Data":70,"./DebugErrorLevel":71,"./DebugItemCause":72,"./DomEvent":73,"./FitType":74,"./FontStyle":75,"./HighlightType":76,"./HorizontalAlignment":77,"./ImGearArtDataServices":78,"./ImGearDocument":79,"./ImGearDocumentCollection":80,"./ImGearDocumentCreateArgs":81,"./ImGearDocumentEventArgs":82,"./ImGearDocumentHyperlink":83,"./ImGearEventHandlerList":84,"./ImGearExceptions":85,"./ImGearHyperlinkCollection":86,"./ImGearHyperlinkPage":87,"./ImGearPage":88,"./ImGearPageCollection":89,"./ImGearPageCountStatus":90,"./ImGearPageCreateArgs":91,"./ImGearPageEventArgs":92,"./ImGearPageOpenFailedEventArgs":93,"./ImGearTextCharacter":94,"./ImGearTextCharacterCollection":95,"./ImGearTextPage":96,"./ImGearTextSection":97,"./ImGearTextSectionCollection":98,"./Key":99,"./LineHeadType":100,"./LineStyle":101,"./LogItemEventArgs":102,"./Mark":103,"./MarkCollection":104,"./MarkEventArgs":105,"./MarkHandleMode":106,"./MarkInteractionMode":107,"./MarkType":108,"./MouseButton":109,"./MouseEventArgs":110,"./MouseTool":111,"./Orientation":112,"./PageView":113,"./PageViewState":114,"./Point":115,"./PointCollection":116,"./PointEventArgs":117,"./Rectangle":118,"./ScrollBars":119,"./TextSelectedEventArgs":120,"./VerticalAlignment":122,"./highlightItem":123}],122:[function(require,module,exports){var fi=require('../../IPCC.Util').regEnum;var LN=function(){};LN.registerEnum=fi;LN.prototype={Top:0,Center:1,Bottom:2};LN.registerEnum('IPCC.Web.UI.VerticalAlignment',false);module.exports=LN;},{"../../IPCC.Util":28}],123:[function(require,module,exports){var Yy=function(){this.hG=undefined;this.dK=[];this.ah={};};module.exports=Yy;},{}],124:[function(require,module,exports){var ZO=require('././UI/UI');var J=require('./../IPCC.Util');var Bf=require('./Cipher');var ayZ=require('./Hash');var fR=require('./Codec');var Cq=require('./Mode');var hd={};hd.awt=[];hd.yE=function(bm){return!isNaN(bm-0)&&bm!==null;};hd.AG=function(rH,di){return IPCC.Web.alS(false,arguments);};hd.agB=function(rH,di){return IPCC.Web.alS(true,arguments);};hd.alS=function(useLocale,di){var av='';var rH=di[0];for(var L=0;;){var fE=rH.indexOf('{',L);var mf=rH.indexOf('}',L);if((fE<0)&&(mf<0)){av+=rH.slice(L);break;}if((mf>0)&&((mf<fE)||(fE<0))){if(rH.charAt(close+1)!=='}'){throw new IPCC.Web.UI.ImGearArgumentException('format','The format string contains an unmatched opening or closing brace.');}av+=rH.slice(L,mf+1);L=mf+2;continue;}av+=rH.slice(L,fE);L=fE+1;if(rH.charAt(L)==='{'){av+='{';L++;continue;}if(mf<0){throw new IPCC.Web.UI.ImGearArgumentException('format','The format string contains an unmatched opening or closing brace.');}var QS=rH.substring(L,mf);var NA=QS.indexOf(':');var aim=parseInt((NA<0)?QS:QS.substring(0,NA),10)+1;if(isNaN(aim)){throw new IPCC.Web.UI.ImGearArgumentException('format','The format string is invalid.');}var Zf=(NA<0)?'':QS.substring(NA+1);var uv=di[aim];if(typeof(uv)==="undefined"||uv===null){uv='';}if(uv.toFormattedString){av+=uv.toFormattedString(Zf);}else if(useLocale&&uv.agB){av+=uv.agB(Zf);}else if(uv.format){av+=uv.format(Zf);}else{av+=uv.toString();}L=mf+1;}return av;};hd.aIP=function(xb){var qv=xb.length;var wK=Math.ceil(qv/4),RM;var eS=[];eS.length=wK;for(var lB=0,hj=0;lB<wK;lB++,hj+=4){eS[lB]=((xb[hj]&0xff)<<24)+((xb[hj+1]&0xff)<<16)+((xb[hj+2]&0xff)<<8)+(xb[hj+3]&0xff);}if(hj<qv){RM[lB]=0;for(var wx=0;hj<qv;hj++,wx++){RM[lB]+=(xb[hj++]&0xff)<<(3-wx);}}return eS;};hd.asn=function(aS){var qv=aS.length;var wK=Math.ceil(qv/4);var eS=[];eS.length=wK;for(var lB=0,hj=0;lB<wK;lB++,hj+=4){eS[lB]=((aS.charCodeAt(hj)&0xff)<<24)+((aS.charCodeAt(hj+1)&0xff)<<16)+((aS.charCodeAt(hj+2)&0xff)<<8)+((aS.charCodeAt(hj+3)&0xff));}if(hj<qv){eS[lB]=0;for(var wx=0;hj<qv;hj++,wx++){eS[lB]+=(aS.charCodeAt(hj++)&0xff)<<(3-wx);}}return eS;};hd.aIz=function(zg){var GE=new Uint8Array(zg);var qv=GE.length;var wK=Math.ceil(qv/4),RM;var eS=[];eS.length=wK;for(var lB=0,hj=0;lB<wK;lB++,hj+=4){eS[lB]=(GE[hj]<<24)+(GE[hj+1]<<16)+(GE[hj+2]<<8)+GE[hj+3];}if(hj<qv){eS[lB]=0;for(var wx=0;hj<qv;hj++,wx++){RM[lB]+=GE[hj++]<<(3-wx);}}return eS;};hd.Jw=function(eS,hB){var bD=[0x116D0662,0xA8BB5E38,0x4D7F93C8,0xA61D2F6B,0xADB1384D,0x3D4AC7FB,0x4E6EB64E,0x6F4D7E8F];return IPCC.Web.El(eS,bD,hB);};hd.El=function(eS,bD,hB){try{var ayU=new IPCC.Web.Bf.ail(bD);var cX=IPCC.Web.Cq.aoF.Xo(ayU,eS,hB);return cX;}catch(bw){return;}};hd.Iq=function(Fh){return IPCC.Web.asn(Fh.responseText);};hd.Qw=function(){var Ei=new Date();var awY=new Date(Ei.getYear(),Ei.getMonth(),Ei.getDate(),Ei.getHours(),Ei.getMinutes(),Ei.getSeconds());return(+awY);};hd.lw=function(cY,elt){var len=cY.length>>>0;var from=Number(arguments[2])||0;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len;}for(;from<len;from++){if(from in cY&&cY[from]===elt){return from;}}return-1;};hd.aug=function aFX(){var la=0xefc8249d;var tg=function(cX){cX=cX.toString();for(var L=0;L<cX.length;L++){la+=cX.charCodeAt(L);var eQ=0.02519603282416938*la;la=eQ>>>0;eQ-=la;eQ*=la;la=eQ>>>0;eQ-=la;la+=eQ*0x100000000;}return(la>>>0)*2.3283064365386963e-10;};tg.zj='Mash 0.9';return tg;};hd.aid=function aGz(){return(function(di){var EV=0;var Fv=0;var zH=0;var fv=1;if(di.length===0){di=[+new Date()];}var tg=IPCC.Web.aug();EV=tg(' ');Fv=tg(' ');zH=tg(' ');for(var L=0;L<di.length;L++){EV-=tg(di[L]);if(EV<0){EV+=1;}Fv-=tg(di[L]);if(Fv<0){Fv+=1;}zH-=tg(di[L]);if(zH<0){zH+=1;}}tg=null;var wR=function(){var qw=2091639*EV+fv*2.3283064365386963e-10;EV=Fv;Fv=zH;zH=qw-(fv=qw|0);return zH;};wR.amC=function(){return wR()*0x100000000;};wR.aGR=function(){return wR()+(wR()*0x200000|0)*1.1102230246251565e-16;};wR.zj='Alea 0.9';wR.di=di;return wR;}(Array.prototype.slice.call(arguments)));};hd.oa=function(){if(this.akX===undefined){var zv=document.createElement("div");zv.style.overflow='scroll';zv.style.position='absolute';zv.style.top='-9999px';document.body.appendChild(zv);this.akX=zv.offsetWidth-zv.clientWidth;document.body.removeChild(zv);}return this.akX;};hd.Gm={ahU:function(hz){var Hb=[];var Yk=IPCC.Web.aid().amC;for(var L=0;L<hz;L++){Hb.push(Yk());}return Hb;},Sn:function(hz,fa){var Hb=[];var Yk=IPCC.Web.aid(fa).amC;for(var L=0;L<hz;L++){Hb.push(Yk());}return Hb;},aGL:function(hB,awn){var hz,mY=true,eV="",Kc,abF,WT,KU,Pb,aoN;for(hz=0;hz<4;hz++){if(!mY){eV+='-';}else{mY=false;}Pb=0;for(Kc=0;Kc<4;Kc++){KU=hz*32+Kc*8;abF=IPCC.Web.hn.XL(hB,KU,4);eV+=abF.toString(16).toUpperCase();WT=IPCC.Web.hn.XL(hB,KU+4,4);eV+=WT.toString(16).toUpperCase();aoN=(abF*16+WT+IPCC.Web.hn.XL(IPCC.Web.bD,KU,8))%256;Pb=Pb|(aoN<<(24-(Kc*8)));}awn.awt[hz]=Pb;}return eV;}};hd.bD=[0x4B1C9AAE,0x25AE1AB6,0x48E3F1C8,0x8D61FC1A];hd.hn={Tl:function(dz,rI,acA){dz=IPCC.Web.hn.adX(dz.slice(rI/32),32-(rI&31)).slice(1);return(acA===undefined)?dz:IPCC.Web.hn.Ri(dz,acA-rI);},XL:function(dz,rI,Tp){var bm,WR=Math.floor((-rI-Tp)&31);if((rI+Tp-1^rI)& -32){bm=(dz[rI/32|0]<<(32-WR))^(dz[rI/32+1|0]>>>WR);}else{bm=dz[rI/32|0]>>>WR;}return bm&((1<<Tp)-1);},Vp:function(zo,uJ){if(zo.length===0||uJ.length===0){return zo.concat(uJ);}var ly=zo[zo.length-1],rX=IPCC.Web.hn.Vq(ly);if(rX===32){return zo.concat(uJ);}else{return IPCC.Web.hn.adX(uJ,rX,ly|0,zo.slice(0,zo.length-1));}},wM:function(dz){var qg=dz.length,bm;if(qg===0){return 0;}bm=dz[qg-1];return(qg-1)*32+IPCC.Web.hn.Vq(bm);},Ri:function(dz,cr){if(dz.length*32<cr){return dz;}dz=dz.slice(0,Math.ceil(cr/32));var qg=dz.length;cr=cr&31;if(qg>0&&cr){dz[qg-1]=IPCC.Web.hn.Jf(cr,dz[qg-1]&0x80000000>>(cr-1),1);}return dz;},Jf:function(cr,bm,ep){if(cr===32){return bm;}return(ep?bm|0:bm<<(32-cr))+cr*0x10000000000;},Vq:function(bm){return Math.round(bm/0x10000000000)||32;},aEo:function(dz,eJ){if(IPCC.Web.hn.wM(dz)!==IPCC.Web.hn.wM(eJ)){return false;}var bm=0,L;for(L=0;L<dz.length;L++){bm|=dz[L]^eJ[L];}return(bm===0);},adX:function(dz,rX,Ke,eV){var L,aeK=0,ZP;if(eV===undefined){eV=[];}for(;rX>=32;rX-=32){eV.push(Ke);Ke=0;}if(rX===0){return eV.concat(dz);}for(L=0;L<dz.length;L++){eV.push(Ke|dz[L]>>>rX);Ke=dz[L]<<(32-rX);}aeK=dz.length?dz[dz.length-1]:0;ZP=IPCC.Web.hn.Vq(aeK);eV.push(IPCC.Web.hn.Jf(rX+ZP&31,(rX+ZP>32)?Ke:eV.pop(),1));return eV;},aiU:function(bm,cu){return[bm[0]^cu[0],bm[1]^cu[1],bm[2]^cu[2],bm[3]^cu[3]];}};hd.Bf=Bf;hd.qA=ayZ;hd.fR=fR;hd.Cq=Cq;hd.ajf=J.ajf;hd.UI=ZO;hd.regEnum=J.regEnum;hd.regClass=J.regClass;module.exports=hd;},{"./../IPCC.Util":28,"././UI/UI":121,"./Cipher":61,"./Codec":62,"./Hash":63,"./Mode":64}],125:[function(require,module,exports){var YH=function ImageGearIndexOf(array,item,start){if(typeof(item)==="undefined"){return-1;}var length=array.length;if(length!==0){start=start-0;if(isNaN(start)){start=0;}else{if(isFinite(start)){start=start-(start%1);}if(start<0){start=Math.max(0,length+start);}}for(var i=start;i<length;i++){if((typeof(array[i])!=="undefined")&&(array[i]===item)){return i;}}}return-1;};module.exports=YH;},{}],126:[function(require,module,exports){var ayI=function(JU,bP){var QA=new IPCC.PageList(JU);if(bP){IPCC.PL(QA,bP);}QA.uY(JU);QA.initialize();return QA;};module.exports=ayI;},{}],127:[function(require,module,exports){var ayW=function(JU,Wa){var rg=Wa.handleTouchEvents!==false;var RO=new IPCC.Web.UI.PageView(JU,rg);if(Wa){IPCC.PL(RO,Wa);}RO.uY(JU);RO.initialize();return RO;};module.exports=ayW;},{}],128:[function(require,module,exports){var qI={zoomInMenuItem:"Zoom In 25%",zoomOutMenuItem:"Zoom Out 25%",fullImageMenuItem:"Full Image",fullWidthMenuItem:"Full Width",fullHeightMenuItem:"Full Height",oneToOneRatioMenuItem:"1 to 1 Ratio",actualSizeMenuItem:"Actual Size",rotateRightMenuItem:"Rotate Clockwise",rotateLeftMenuItem:"Rotate Counter-Clockwise",mirrorHorizontalMenuItem:"Mirror Horizontal",mirrorVerticalMenuItem:"Mirror Vertical",panToolMenuItem:"Pan Tool",areaSelectionToolMenuItem:"Area Selection Tool",zoomRectangleToolMenuItem:"Zoom Rectangle Tool",flyingMagnifierToolMenuItem:"Flying Magnifier Tool",createTextMarkToolMenuItem:"Create Text Mark",createLineMarkToolMenuItem:"Create Line Mark",createPolygonMarkToolMenuItem:"Create Polygon Mark",createPolylineMarkToolMenuItem:"Create Polyline Mark",createRectangleMarkToolMenuItem:"Create Rectangle Mark",createEllipseMarkToolMenuItem:"Create Ellipse Mark",createFreehandMarkToolMenuItem:"Create Freehand Mark",editMarksToolMenuItem:"Edit Marks",runMarksToolMenuItem:"Run Marks",createStampMarkToolMenuItem:"Create Stamp Mark",createHighlightMarkToolMenuItem:"Create Highlight Mark",thicknessMenu:{item1:"1",item2:"2",item3:"3",item4:"4",item5:"5",item6:"6",item7:"7",item8:"8"},opacityMenu:{translucent:"Translucent (127)",opaque:"Opaque (255)"},calloutTypeMenu:{line:"Line",triangle:"Triangle"},borderThicknessMenuItem:"Border Thickness",borderColorMenuItem:"Border Color...",fillColorMenuItem:"Fill Color...",lineThicknessMenuItem:"Thickness",lineColorMenuItem:"Color...",fontMenuItem:"Font...",opacityMenuItem:"Opacity",calloutTypeMenuItem:"Callout Type",calloutVisibleMenuItem:"Callout Visible",moveToBackMenuItem:"Move to Back",moveBackwardMenuItem:"Move Backward",moveForwardMenuItem:"Move Forward",moveToFrontMenuItem:"Move to Front",deleteMarkMenuItem:"Delete Mark",zoomToFitMenuItem:"Zoom to Fit",orientationMenuItem:"Orientation",mouseToolsMenuItem:"Mouse Tools",rectangleMarkPropertiesMenuItem:"Properties",textMarkPropertiesMenuItem:"Properties",polygonMarkPropertiesMenuItem:"Properties",polylineMarkPropertiesMenuItem:"Properties",lineMarkPropertiesMenuItem:"Properties",markOrderingMenuItem:"Ordering",stampMarkPropertiesMenuItem:"Properties",selectColor:"Select Color",selectFont:"Select Font",ok:"OK",cancel:"CANCEL",red:"Red",green:"Green",blue:"Blue",font:"Font",size:"Size",italic:"Italic",bold:"Bold",underline:"Underline",strikeout:"Strikeout"};module.exports=qI;},{}],129:[function(require,module,exports){var PL=function(cq,kp){var lK;for(var bz in kp){if(kp.hasOwnProperty(bz)){var ai=kp[bz];var axg=cq["get_"+bz];var aek=cq["set_"+bz];if(typeof(aek)==='function'){aek.apply(cq,[ai]);}else if(ai instanceof Array){lK=axg.apply(cq);if(!(lK instanceof Array)){throw new new IPCC.Web.UI.ImGearInvalidOperationException(bz+" is not an Array property");}for(var L=0,bj=lK.length,qg=ai.length;L<qg;L++,bj++){lK[bj]=ai[L];}}}}};module.exports=PL;},{}],130:[function(require,module,exports){"use strict";var alb=function(aC){if(aC instanceof PCCViewer.AjaxResponse){return aC;}else if(!(this instanceof PCCViewer.AjaxResponse)){return new PCCViewer.AjaxResponse(aC);}this.qL=new IPCC.J.qL(aC);this.status=this.qL.status;this.statusText=this.qL.statusText;this.responseText=this.qL.responseText;if(typeof this.qL.responseBody!=='undefined'){this.responseBody=this.qL.responseBody;}return this;};alb.prototype.getResponseHeader=function(Bk){return this.qL.getResponseHeader(Bk);};var Bn=(function(){function asx(){return IPCC.J.extend({},IPCC.J.oZ.jk);};function avn(jk){if(!(typeof jk==='undefined'||(typeof jk==='object'&&jk!==null&& !(jk instanceof Array)))){throw new Error('Headers should be an object or undefined.');}if(typeof jk==='object'){var aDW=Object.keys(IPCC.J.aju());Object.keys(jk).forEach(function(Bk){if(aDW.indexOf(Bk)!== -1){throw new Error('Cannot overwrite the header "'+Bk+'".');}});}IPCC.J.oZ.jk=IPCC.J.extend({},jk);return PCCViewer.Ajax;};function asr(){return IPCC.J.oZ.OW;};function awJ(jh){if(typeof jh!=='undefined'&&typeof jh!=='function'){throw new Error('Method should be a function or undefined.');}IPCC.J.oZ.OW=jh;return PCCViewer.Ajax;};function fE(bP){var bp=PCCViewer.Deferred();if(!(typeof bP==='undefined'||(typeof bP==='object'&&bP!==null&& !(bP instanceof Array)))){throw new Error('Options should be an object or undefined.');}function eZ(aC){if(!(aC instanceof PCCViewer.AjaxResponse)){aC=new PCCViewer.AjaxResponse(aC);}bp.resolve(aC);};function fM(av){if(av.response){av.response=new PCCViewer.AjaxResponse(av.response);}bp.reject(av);};IPCC.J.oZ.fE(bP).then(eZ,fM);return bp.getPromise();};return{getHeaders:asx,setHeaders:avn,getOverrideMethod:asr,setOverrideMethod:awJ,fE:fE,};})();if(Object.defineProperties){Object.defineProperties(Bn,{"headers":{enumerable:true,get:function(){return Bn.getHeaders();},set:function(jk){return Bn.setHeaders(jk);}},"overrideMethod":{enumerable:true,get:function(){return Bn.getOverrideMethod();},set:function(jh){return Bn.setOverrideMethod(jh);}}});}module.exports={AjaxResponse:alb,Ajax:Bn};},{}],131:[function(require,module,exports){var BurnRequest=function(bP){this.pb="";this.fN="";this.lm=0;this.rm="";this.fc="";this.qW=0;this.gN=false;this.qT=0;this.VD="";this.qj=false;this.bp=PCCViewer.Deferred();this.cK=this.bp.getPromise();this.then=this.cK.then;this.bP=bP;this.fc=null;this.eI=undefined;this.rF=false;this.Sg=null;PCCViewer.EventEmitter.extend(this);var V=this;if(bP.mw){var mw=new PCCViewer.Error(bP.mw.code,bP.mw.message);delete V.bP.mw;setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnCancelled,{});V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.fc=mw.code;V.bp.reject(mw);},0);}};BurnRequest.EventType={BurnProgress:"BurnProgress",BurnCompleted:"BurnCompleted",BurnFailed:"BurnFailed",BurnCancelled:"BurnCancelled",BurnWorkerCreated:"BurnWorkerCreated"};BurnRequest.prototype.cancel=function(){var V=this;this.qj=true;this.fc="User Cancelled";setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnCancelled,{});V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.bp.reject(new PCCViewer.Error("UserCancelled","User Cancelled"));},0);return this;};BurnRequest.prototype.getProgress=function(){return this.lm;};BurnRequest.prototype.getWorkerID=function(){return this.pb;};BurnRequest.prototype.getOptions=function(){return this.bP;};BurnRequest.prototype.getErrorCode=function(){return this.fc;};BurnRequest.prototype.getBurnedDocumentDownloadURL=function(){return this.Sg;};BurnRequest.prototype.anC=function(jP){this.VD=jP;};BurnRequest.prototype.La=function(eI){this.eI=eI;};BurnRequest.prototype.aab=function(){var V=this;this.fc="Failure to generate Markup XML";setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.bp.reject(new PCCViewer.Error("MarkupXMLFail",V.fc));},0);return this;};BurnRequest.prototype.Gu=function(){function eZ(aC){var gJ,av;try{gJ=aC.responseText;if(!gJ){setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.bp.reject(new PCCViewer.Error("ResponseEmpty","Empty/invalid response from the server"));},0);V.rF=true;return;}else{av=JSON.parse(gJ);setTimeout(function(){aFq(av);},0);}}catch(e){setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.bp.reject(new PCCViewer.Error("BurnFailErrorCode","Burn process failed, error: "+e.message));},0);V.rF=true;return;}};function fM(av){V.gN=false;var cQ=av.response.status+" "+av.response.statusText;setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.bp.reject(new PCCViewer.Error("StatusCode","Status Code "+cQ));},0);V.rF=true;return;};try{if(!this.VD){throw new Error("XMl Markup data for burn is missing");}var V=this;var acc=function(){var WD;if(!(/^[\x00-\x7F]*$/.test(V.eI.ba.get_documentIdentifier()))){WD=V.eI.bP.imageHandlerUrl+'/ViewingSession/e'+V.eI.bP.documentID+'/MarkupBurner/'+V.pb;}else{WD=V.eI.bP.imageHandlerUrl+'/ViewingSession/u'+encodeURIComponent(V.eI.bP.documentID)+'/MarkupBurner/'+V.pb;}PCCViewer.Ajax.fE({method:'GET',url:WD,headers:{'Content-Type':'application/json'}}).then(eZ,fM);};var aFq=function(gp){if(gp){if(V.qj===true){V.gN=false;return;}if(gp.percentComplete>=0&&V.gN===true){if(gp.percentComplete===100&&gp.state==='complete'){if(gp.processId){V.gN=false;V.pb=gp.processId;V.fN=gp.state;V.qW+=1;V.qT=1000;V.lm= +(gp.percentComplete);var Fs;if(!(/^[\x00-\x7F]*$/.test(V.eI.ba.get_documentIdentifier()))){Fs=V.eI.bP.imageHandlerUrl+'/ViewingSession/e'+V.eI.bP.documentID+'/MarkupBurner/'+V.pb+"/Document";}else{Fs=V.eI.bP.imageHandlerUrl+'/ViewingSession/u'+encodeURIComponent(V.eI.bP.documentID)+'/MarkupBurner/'+V.pb+"/Document";}if(V.bP.filename){Fs+="?ContentDispositionFilename="+V.bP.filename;}V.Sg=Fs;V.rF=true;var aDM= +(gp.percentComplete);setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnCompleted,{});V.trigger(PCCViewer.BurnRequest.EventType.BurnProgress,{progress:aDM});V.bp.resolve(Fs);},10);return;}}else{if(gp.state==='error'){V.gN=false;V.fc=gp.errorCode;setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.bp.reject(new PCCViewer.Error("BurnFailError","BurnProcess failed, errorCode: "+V.fc));},0);V.gN=false;V.rF=true;return;}if(gp.processId){var Xa= +(gp.percentComplete);if(V.lm!==Xa){setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnProgress,{progress:Xa});},10);}if(!V.pb){V.pb=gp.processId;setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnWorkerCreated,{});},0);V.fN=gp.state;V.qW=1;V.gN=true;V.qT=1000;V.lm= +(gp.percentComplete);}if(gp.percentComplete<100){if(V.qW>1){V.qT+=1000;}V.qW+=1;V.fN=gp.state;V.lm= +(gp.percentComplete);if(V.gN===true&&V.qj===false&&V.rF===false){setTimeout(acc,V.qT);}}}}}else{if(V.rF===false){var XH=false;if(V.gN===false){if(gp.state==='complete'){if(!V.Sg){XH=true;}else{V.rF=true;setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnCompleted,{});V.bp.resolve(V.Sg);},10);return;}}if(gp.state==='processing'&&gp.errorCode===null){if(gp.percentComplete>=0&&gp.percentComplete<100){if(V.qW>1){V.qT+=1000;}V.qW+=1;V.gN=true;V.fN=gp.state;V.lm= +(gp.percentComplete);if(V.gN===true&&V.qj===false){setTimeout(acc,V.qT);}}else{XH=true;}}if(gp.state==='error'||XH===true){V.gN=false;V.fc=gp.errorCode;setTimeout(function(){V.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});V.bp.reject(new PCCViewer.Error("BurnFailError","BurnProcess failed, errorCode: "+gp.errorCode));},0);V.gN=false;V.rF=true;return;}}}}}};var bA;if(!(/^[\x00-\x7F]*$/.test(V.eI.ba.get_documentIdentifier()))){bA=V.eI.bP.imageHandlerUrl+'/ViewingSession/e'+V.eI.bP.documentID+'/MarkupBurner';}else{bA=V.eI.bP.imageHandlerUrl+'/ViewingSession/u'+encodeURIComponent(V.eI.bP.documentID)+'/MarkupBurner';}var NB=[];if(V.bP.removeFormFields){NB.push('RemoveFormFields=acroform');}if(V.bP.redactionOptions){NB.push(V.bP.redactionOptions.mode===PCCViewer.RedactionViewMode.Draft.toLowerCase()?'redactionMode=draft':'redactionMode=normal');}if(NB.length>0){bA+=('?'+NB.join('&'));}PCCViewer.Ajax.fE({method:'POST',url:bA,headers:{'Content-Type':'application/xml;charset=utf-8'},body:V.VD}).then(eZ,fM);V.gN=true;}catch(e){this.gN=false;var aj=this,kr=e.message;setTimeout(function(){aj.trigger(PCCViewer.BurnRequest.EventType.BurnFailed,{});aj.bp.reject(new PCCViewer.Error("BurnFailErrorCode","The burn process failed, error: "+kr));},0);this.rF=true;}};if(Object.defineProperties){Object.defineProperties(BurnRequest.prototype,{"options":{enumerable:true,get:function(){return this.getOptions();}},"progress":{enumerable:true,get:function(){return this.getProgress();}},"workerID":{enumerable:true,get:function(){return this.getWorkerID();}},"errorCode":{enumerable:true,get:function(){return this.getErrorCode();}},"burnedDocumentDownloadURL":{enumerable:true,get:function(){return this.getBurnedDocumentDownloadURL();}}});}module.exports=BurnRequest;},{}],132:[function(require,module,exports){function aon(ba,aO){var aN=ba.cz.iY(aO);var ff=aN.dr();return ff.Ew();};function anL(ba,aO){var aN=ba.cz.iY(aO);var ff=aN.dr();var Jg=ff.gs();return Jg.axo();};function aqW(yj,aGy){var cr=yj.length;if(cr===0){return false;}if(cr!==aGy){return false;}for(var L=0;L<cr;L++){if(yj[L]!==true){return false;}}return true;};var Rr=function(){var V=this;this.EU=false;this.yj=[];this.sH=[];this.xr=[];this.aby=0;this.ao=0;this.iT=false;function qB(GZ,UG){switch(GZ){case 'failed':setTimeout(function(){V.bh.trigger('SearchFailed',UG);},10);break;case 'complete':V.bh.eb=V.sH;V.bh.Ty=V.xr;V.bh.wt=true;setTimeout(function(){V.bh.trigger('SearchResultsAvailable',{completedSearchResults:(V.sH)});},10);break;case 'cancelled':break;}setTimeout(function(){V.bh.trigger('SearchCompleted',{completedSearchResults:(V.sH)});},10);};function awQ(){V.bh.dC='Unable to communicate with server, please retry loading the document.';V.bh.fc='1011';V.bh.wt=true;qB('failed',{errorMessage:('Unable to communicate with server, please retry loading the document.')});V.iT=true;};function alu(bP,aBX){var aCR=IPCC.J.trim(bP.type||'').toLowerCase();var av;switch(aCR){case 'taskresult':av=new PCCViewer.SearchTaskResult();break;default:av=new PCCViewer.SearchResult();break;}IPCC.J.extend(av,aBX);var aap=av.rn+av.text.length-1;var ci=PCCViewer.FM.formatter.getContext({text:bP.searchText,startIndex:av.rn,endIndex:aap,padding:av.bv.contextPadding});av.ci=ci.context;av.zM=ci.startIndex;if(bP.rectangles){var adz={rectangles:bP.rectangles,startIndex:av.rn,endIndex:aap};av.lH=PCCViewer.FM.formatter.getBoundingRectangle(adz);av.ab=PCCViewer.FM.formatter.getLineRectangles(adz);}return av;};function afQ(mh,wj,IU,fV,gy){var FD=[];var Xr= !fV;var vZ=wj.distance;var zi=[];IPCC.J.forEach(wj.dI,function(dI){zi.push(dI.searchTerm);});var aFY=PCCViewer.FM.proximity.getResults(IU,zi,vZ);IPCC.J.forEach(aFY,function(av){var gm=alu({type:Xr?'TaskResult':'Result',searchText:IU,rectangles:fV},{gy:gy,bv:wj.uo,mh:mh,rw:wj.highlightColor,rn:av.startIndex,aS:av.text});FD.push(gm);});return FD;};function RK(mh,dI,IU,fV,gy){var Xr= !fV;var FD=[];var Nz=[dI.searchTerm];var eb=PCCViewer.FM.regex.getResults(IU,Nz);IPCC.J.forEach(eb,function(av){if(dI.uo.matchingOptions.wildcard&&(av.text[0]===" "||av.text[0]==="\n")){av.text=av.text.substring(1);av.startIndex+=1;}var gm=alu({type:Xr?'TaskResult':'Result',searchText:IU,rectangles:fV},{gy:gy,mh:mh,dI:dI,bv:dI.uo,rn:av.startIndex,aS:av.text,rw:dI.highlightColor});FD.push(gm);});return FD;};function aoi(adb,aO,ba,fV){var TW=[];var mh=Date.now();IPCC.J.forEach(V.dI,function(dI,L){var eb;var ps=IPCC.J.PE(dI.type);var aN=ba.cz.iY(aO);var ff=aN.dr();var gy={width:aN.kY()||ff.ayM(),height:aN.jp()||ff.aAG()};switch(ps){case 'proximity':eb=afQ(mh,dI,adb,fV,gy);break;default:eb=RK(mh,dI,adb,fV,gy);break;}IPCC.J.forEach(eb,function(av){av.ds=V.ao;av.bb=aO+1;av.Ve=ba.get_documentIdentifier();V.sH[V.ao]=av;V.ao++;TW.push(av);});});V.bh.eb=V.sH;if(TW.length){setTimeout(function(){V.bh.trigger('PartialSearchResultsAvailable',{partialSearchResults:(TW),pagesWithoutText:(V.xr)});},10);}};function aod(aS){var mh=Date.now();IPCC.J.forEach(V.dI,function(dI,L){var ps=IPCC.J.PE(dI.type);var eb;switch(ps){case 'proximity':eb=afQ(mh,dI,aS);break;default:eb=RK(mh,dI,aS);break;}IPCC.J.forEach(eb,function(av){av.ds=V.ao;V.sH[V.ao]=av;V.ao++;});});V.bh.eb=V.sH;};function abk(AL,ba){for(var L=0;L<AL.length;L++){if(V.yj[AL[L]]===false){V.yj[AL[L]]=true;var aS=aon(ba,AL[L]);var fV=anL(ba,AL[L]);if(!aS&&aS!==null){V.xr[V.aby]=AL[L];V.aby++;continue;}aoi(aS,AL[L],ba,fV);if(V.bh.qj){if(V.EU){qB('cancelled');V.EU=false;ba.remove_textPagesReceived(PB);return;}break;}}}if(aqW(V.yj,ba.eP)&& !V.bh.wt){qB('complete');V.EU=false;ba.remove_textPagesReceived(PB);}};function PB(sender,F){if(F.error=== -1){awQ();return V.bh;}try{if(V.iT===false){abk(F.textPagesReceived,sender);}}catch(e){V.bh.dC=e.message;V.bh.fc='1010';V.bh.wt=true;qB('failed',{errorMessage:(e.message)});V.iT=true;return V.bh;}};this.Yz=function(ba,dI,cn,bh){V.dI=dI;V.bh=bh;V.bh.cn=cn;V.bh.on('SearchCancelled',function(){qB('cancelled');V.EU=false;ba.remove_textPagesReceived(PB);});for(var L=0;L<ba.eP;L++){V.yj[L]=false;}if(ba.aei().ej()>ba.get_numberOfPagesWithText()){V.EU=true;ba.add_textPagesReceived(PB);}if(ba.get_numberOfPagesWithText()>0){abk(ba.get_pagesWithText(),ba);}return V.bh;};this.aDP=function(aS){this.bh=new PCCViewer.SearchRequest();try{aod(aS);}catch(e){V.bh.dC=e.message;V.bh.fc='1010';return;}};};module.exports=Rr;},{}],133:[function(require,module,exports){var Comment=function Comment(comment,conversation){if(!(comment instanceof IPCC.Web.UI.Comment)&&(typeof comment!=='string')){throw new Error(comment+' is not a string.');}if(!(conversation instanceof PCCViewer.Conversation)){throw new Error(conversation+' is not a PCCViewer.Conversation object.');}this.getConversation=function aIi(){return conversation;};if(typeof comment==='string'){this.oh=new IPCC.Web.UI.Comment(comment);}else{this.oh=comment;}this.oh.Ih=this;this.cX=this.oh.get_data();PCCViewer.Data.extend(this);this.Fe=new IPCC.Web.UI.Data();PCCViewer.SessionData.extend(this);};Comment.prototype.getMarkupLayer=function aHS(){return this.jy;};Comment.prototype.getText=function aHA(){return this.oh.get_text();};Comment.prototype.setText=function aFW(text){if(typeof text!=='string'){throw new Error(text+' is not a string.');}this.oh.set_text(text);return this;};Comment.prototype.getCreationTime=function aGO(){var aBB=IPCC.J.GX(this.oh.get_creationTime());return new Date(aBB);};Comment.prototype.setCreationTime=function aIe(time){function akm(){throw new Error(time+' is not a valid string or Date object.');};if(typeof time==='string'){var aec=IPCC.J.GX(time);if(aec instanceof Error){akm();}time=new Date(aec);}if(!(time instanceof Date)){akm();}this.oh.set_creationTime(IPCC.J.wT(time));return this;};if(Object.defineProperties){Object.defineProperties(Comment.prototype,{"text":{enumerable:true,get:function(){return this.getText();},set:function(text){return this.setText(text);}},"creationTime":{enumerable:true,get:function(){return this.getCreationTime();},set:function(time){return this.setCreationTime(time);}}});}var Conversation=function Conversation(mark){if(!(mark instanceof PCCViewer.Mark)){throw new Error(mark+' is not a PCCViewer.Mark object.');}this.getMark=function Qf(){return mark;};this.hM=new PCCViewer.ObservableCollection();if(typeof mark.T!=="undefined"){this.vC=mark.T.get_conversation();this.vC.forEach(function(oh){var cC=new PCCViewer.Comment(oh,this);this.hM.add(cC);},this);}else{this.vC=new IPCC.Web.UI.Conversation();}this.cX=this.vC.get_data();PCCViewer.Data.extend(this);this.Fe=new IPCC.Web.UI.Data();PCCViewer.SessionData.extend(this);};Conversation.prototype.addComment=function Fm(commentText){var cC=new PCCViewer.Comment(commentText,this);this.hM.add(cC);this.vC.addComment(cC.oh);return cC;};Conversation.prototype.deleteComments=function(comments){var V=this;var akq=this.hM.toArray();var afy=function(cC){for(var i=0,length=akq.length;i<length;i++){if(akq[i]===cC){return true;}}return false;};function akT(cC,ao){throw new Error(cC+((ao!==undefined)?' (Array index '+ao+')':'')+' is not a PCCViewer.Comment object.');};function alD(cC,ao){throw new Error(((ao!==undefined)?' (Array index '+ao+')':'')+' is not part of this Conversation object.');};if(comments instanceof PCCViewer.Comment){if(!afy(comments)){alD(comments);}V.hM.remove(comments);V.vC.removeCommentInstance(comments.oh);}else if(comments instanceof Array){IPCC.J.forEach(comments,function(el,idx){if(!(el instanceof PCCViewer.Comment)){akT(el,idx);}if(!afy(el)){alD(el,idx);}});IPCC.J.forEach(comments,function(el){V.hM.remove(el);V.vC.removeCommentInstance(el.oh);});}else{akT(comments);}return this;};Conversation.prototype.getComments=function(){return this.hM.toArray().sort(function(a,b){return a.getCreationTime().getTime()-b.getCreationTime().getTime();});};Conversation.qs=function(hA,oz){if(typeof hA.getComments!=="function"||typeof oz.addComment!=="function"){throw new Error("Arguments `_source` and `_destination` must be Conversation objects.");}PCCViewer.Data.oX(hA,oz);var gX=hA.getComments(),i,length=gX.length;for(i=0;i<length;i++){var aeL=gX[i];var aCW=oz.addComment(aeL.getText());PCCViewer.Data.oX(aeL,aCW);}};module.exports={Conversation:Conversation,Comment:Comment};},{}],134:[function(require,module,exports){var ConversionRequest=function(bP){this.pb="";this.fN="";this.lm=0;this.fc="";this.gN=false;this.qj=false;this.bP=bP;this.zK=null;this.AW=null;this.eI=undefined;this.bp=PCCViewer.Deferred();this.cK=this.bp.getPromise();this.then=this.cK.then;PCCViewer.EventEmitter.extend(this);};ConversionRequest.EventType={ConversionProgress:"ConversionProgress",ConversionCompleted:"ConversionCompleted",ConversionFailed:"ConversionFailed",ConversionCancelled:"ConversionCancelled",ConversionWorkerCreated:"ConversionWorkerCreated"};ConversionRequest.prototype.cancel=function(){var V=this;this.qj=true;this.fc="User Cancelled";setTimeout(function(){V.trigger(PCCViewer.ConversionRequest.EventType.ConversionCancelled,{});V.trigger(PCCViewer.ConversionRequest.EventType.ConversionFailed,{});V.bp.reject(new PCCViewer.Error("UserCancelled","User Cancelled"));},0);return this;};ConversionRequest.prototype.getProgress=function(){return this.lm;};ConversionRequest.prototype.getWorkerID=function(){return this.pb;};ConversionRequest.prototype.getOptions=function(){return this.bP;};ConversionRequest.prototype.getErrorCode=function(){return this.fc;};ConversionRequest.prototype.getConvertedDocumentDownloadURL=function(){return this.zK;};ConversionRequest.prototype.getConvertedDocumentDownloadURLs=function(){if(this.AW){return this.AW.slice();}return null;};ConversionRequest.prototype.La=function(eI){this.eI=eI;};ConversionRequest.prototype.Gu=function(){var V=this;V.gN=true;V.azl().then(function onResolve(pZ){V.pb=pZ.processId;V.lm=pZ.percentComplete;V.fN=pZ.state;V.trigger(PCCViewer.ConversionRequest.EventType.ConversionWorkerCreated,{});V.aCU(pZ).then(function onResolve(aFS){V.gN=false;V.AW=[];if(V.bP.zj>1){for(var L=0;L<V.aCz;L++){var zK=V.eI.bP.imageHandlerUrl+'/v2/viewingSessions/'+V.eI.bP.documentID+'/contentConverters/'+V.pb+'/results/'+L+'/file?ContentDispositionFilename='+encodeURIComponent(V.bP.filename);V.AW.push(zK);}V.bp.resolve(V.AW);}else{V.zK=V.eI.bP.imageHandlerUrl+'/WorkFile/'+aFS+"?ContentDispositionFilename="+encodeURIComponent(V.bP.filename);if(pZ.affinityToken){V.zK+="&affinityToken="+encodeURIComponent(pZ.affinityToken);}V.AW.push(V.zK);V.bp.resolve(V.zK);}V.trigger(PCCViewer.ConversionRequest.EventType.ConversionCompleted,{});},function onReject(reason){V.gN=false;V.fc=reason.error.code;V.bp.reject(reason);V.trigger(PCCViewer.ConversionRequest.EventType.ConversionFailed,{});});},function onReject(reason){V.gN=false;V.bp.reject(reason);V.trigger(PCCViewer.ConversionRequest.EventType.ConversionFailed,{});});};ConversionRequest.prototype.azl=function(){var bA,kH=PCCViewer.Deferred();var aaW;if(this.bP.zj>1){bA=this.eI.bP.imageHandlerUrl+'/v2/viewingSessions/'+this.eI.bP.documentID+'/contentConverters/';aaW={url:bA,method:'POST',headers:{"Content-Type":"application/json"}};}else{bA=this.eI.bP.imageHandlerUrl+'/contentConverters/';aaW={url:bA,method:'POST',headers:{"Content-Type":"application/json"},body:JSON.stringify({viewingSessionId:this.eI.bP.documentID})};}PCCViewer.Ajax.fE(aaW).then(function eZ(aC){var av=JSON.parse(aC.responseText);kH.resolve(av);},function fM(av){kH.reject(av.error);});return kH.getPromise();};ConversionRequest.prototype.aCU=function(pZ){var bA,kH=PCCViewer.Deferred(),V=this,jk;if(V.bP.zj>1){bA=this.eI.bP.imageHandlerUrl+'/v2/viewingSessions/'+this.eI.bP.documentID+'/contentConverters/'+pZ.processId;}else{bA=this.eI.bP.imageHandlerUrl+'/contentConverters/'+pZ.processId;}if(pZ.affinityToken){jk={"Accusoft-Affinity-Token":pZ.affinityToken};}(function poll(){setTimeout(function(){PCCViewer.Ajax.fE({method:'GET',url:bA,headers:jk}).then(function eZ(aC){var av=JSON.parse(aC.responseText);V.pb=av.processId;V.lm=av.percentComplete;V.fN=av.state;if(V.bP.zj>1&&av.output){V.aCz=av.output.results.length;}V.trigger(PCCViewer.ConversionRequest.EventType.ConversionProgress,{progress:V.lm});if(av.percentComplete===100){if(av.state==="error"){kH.reject({response:aC,error:new PCCViewer.Error("CouldNotConvert","Could not convert document")});}else{kH.resolve(av.output.results[0].fileId);}}else{poll();}},function fM(av){kH.reject(av.error);});},3000);})();return kH.getPromise();};if(Object.defineProperties){Object.defineProperties(ConversionRequest.prototype,{"options":{enumerable:true,get:function(){return this.getOptions();}},"progress":{enumerable:true,get:function(){return this.getProgress();}},"workerID":{enumerable:true,get:function(){return this.getWorkerID();}},"errorCode":{enumerable:true,get:function(){return this.getErrorCode();}},"convertedDocumentDownloadURL":{enumerable:true,get:function(){return this.getConvertedDocumentDownloadURL();}},"convertedDocumentDownloadURLs":{enumerable:true,get:function(){return this.getConvertedDocumentDownloadURLs();}}});}module.exports=ConversionRequest;},{}],135:[function(require,module,exports){"use strict";var Data=(function(){function getData(key){return this.cX.get_data(key);};function setData(key,value){this.cX.set_data(key,value);return this;};function getDataKeys(){return this.cX.get_dataKeys();};return{extend:function(o){o.getData=getData;o.setData=setData;o.getDataKeys=getDataKeys;},oX:function(hA,oz){if(typeof hA.getData!=="function"||typeof hA.setData!=="function"||typeof hA.getDataKeys!=="function"||typeof oz.getData!=="function"||typeof oz.setData!=="function"||typeof oz.getDataKeys!=="function"){throw new Error("Arguments `_source` and `_destination` must be extended with the Data Mixin.");}var mz=hA.getDataKeys(),i,length=mz.length;for(i=0;i<length;i++){var bD=mz[i];oz.setData(bD,hA.getData(bD));}}};})();var SessionData=(function(){function getSessionData(key){return this.Fe.get_data(key);};function setSessionData(key,value){this.Fe.set_data(key,value);return this;};function getSessionDataKeys(){return this.Fe.get_dataKeys();};return{extend:function(o){o.getSessionData=getSessionData;o.setSessionData=setSessionData;o.getSessionDataKeys=getSessionDataKeys;},aFA:function(hA,oz){if(typeof hA.getSessionData!=="function"||typeof hA.setSessionData!=="function"||typeof hA.getSessionDataKeys!=="function"||typeof oz.getSessionData!=="function"||typeof oz.setSessionData!=="function"||typeof oz.getSessionDataKeys!=="function"){throw new Error("Arguments `_source` and `_destination` must be extended with the SessionData Mixin.");}var mz=hA.getSessionDataKeys(),i,length=mz.length;for(i=0;i<length;i++){var bD=mz[i];oz.setSessionData(bD,hA.getSessionData(bD));}}};})();module.exports={SessionData:SessionData,Data:Data};},{}],136:[function(require,module,exports){'use strict';function PromiseDeferred(){this.fN=PromiseDeferred.States.Pending;this.G=null;this.ef=null;this.hq=[];};PromiseDeferred.prototype.then=function(onFulfilled,onRejected){var Ck=new PromiseDeferred();var Tq,abI;if(onFulfilled&&typeof onFulfilled==='function'){var avA=function(G){try{var bL=onFulfilled(G);Ck.resolve(bL);}catch(e){Ck.reject(e);}};Tq=avA;}else{var awb=function(G){Ck.resolve(G);};Tq=awb;}if(onRejected&&typeof onRejected==='function'){var awa=function(ef){try{var bL=onRejected(ef);aaK(Ck,bL);}catch(e){Ck.reject(e);}};abI=awa;}else{var awD=function(ef){Ck.reject(ef);};abI=awD;}this.hq.push({aud:Tq,azr:abI});if(this.fN===PromiseDeferred.States.Fulfilled){this.afP();}if(this.fN===PromiseDeferred.States.Rejected){this.ahk();}return Ck;};PromiseDeferred.prototype.resolve=function(x){if(!this.apr()){return;}aaK(this,x);};PromiseDeferred.prototype.reject=function(reason){if(!this.apr()){return;}this.CJ(reason);};PromiseDeferred.prototype.SN=function(bm){this.fN=PromiseDeferred.States.Fulfilled;this.G=bm;this.afP();};PromiseDeferred.prototype.afP=function(){var callback;while(this.hq.length>0){callback=this.hq.shift().aud;(function(ky,G){setTimeout(function(){ky(G);},0);})(callback,this.G);}};PromiseDeferred.prototype.ahk=function(){var callback;while(this.hq.length>0){callback=this.hq.shift().azr;(function(ky,G){setTimeout(function(){ky(G);},0);})(callback,this.ef);}};function aaK(cK,bm){if(cK===bm){cK.CJ(new TypeError("A Promise cannot be resolved with a value that is itself."));return;}if(bm&&bm.abt&&cK.adu&&cK.adu===bm){cK.CJ(new TypeError("A Promise cannot be resolved with a value that is itself."));return;}if(bm&&bm.abt&&bm.abt==="PCCViewer.Promise"){bm.then(function(aqB){cK.SN(aqB);},function(arf){cK.CJ(arf);});}else if(bm!==null&&(typeof bm==='object'||typeof bm==='function')){var TM;try{TM=bm.then;}catch(e){cK.CJ(e);return;}if(typeof TM==='function'){var FV=true;var arm=function(cu){if(FV){aaK(cK,cu);FV=false;}};var apA=function(bL){if(FV){cK.CJ(bL);FV=false;}};try{TM.call(bm,arm,apA);}catch(e){if(FV){cK.CJ(e);}}}else{cK.SN(bm);}}else{cK.SN(bm);}};PromiseDeferred.prototype.CJ=function(reason){this.fN=PromiseDeferred.States.Rejected;this.ef=reason;this.ahk();};PromiseDeferred.prototype.apr=function(){return this.fN===PromiseDeferred.States.Pending;};PromiseDeferred.States={Pending:"Pending",Fulfilled:"Fulfilled",Rejected:"Rejected"};var Deferred=function(){var ZU=new PromiseDeferred();function Promise(cK){this.then=function(onFulfilled,onRejected){return new Promise(cK.then(onFulfilled,onRejected));};this.abt="PCCViewer.Promise";cK.adu=this;};var promise=new Promise(ZU);return{getPromise:function(){return promise;},resolve:function(value){ZU.resolve(value);},reject:function(reason){ZU.reject(reason);}};};var Promise={all:function(promises){var i,bp=new PCCViewer.Deferred(),Vu=bp.getPromise();if(Object.prototype.toString.call(promises)!=='[object Array]'){throw new TypeError("The 'promises' argument must be an array.");}function createPushFunction(promise){return function(results){return wrapWithPromise(promise).then(function(value){results.push(value);return results;});};};function wrapWithPromise(value){var bp=new PCCViewer.Deferred();bp.resolve(value);return bp.getPromise();};bp.resolve([]);for(i=0;i<promises.length;i++){Vu=Vu.then(createPushFunction(promises[i]));}return Vu;}};if(typeof exports!=='undefined'&&module.exports){module.exports.Deferred=Deferred;module.exports.Promise=Promise;}},{}],137:[function(require,module,exports){var DocumentHyperlink=function DocumentHyperlink(parameters){this.Ct=parameters.Ct;this.bb=parameters.bb;};DocumentHyperlink.prototype.getHref=function(){return this.Ct.ago();};DocumentHyperlink.prototype.getPageNumber=function(){return this.bb;};DocumentHyperlink.prototype.getRectangle=function(){return this.Ct.eT();};if(Object.defineProperties){Object.defineProperties(DocumentHyperlink.prototype,{"href":{enumerable:true,get:function(){return this.getHref();}},"pageNumber":{enumerable:true,get:function(){return this.getPageNumber();}},"rectangle":{enumerable:true,get:function(){return this.getRectangle();}}});}module.exports=DocumentHyperlink;},{}],138:[function(require,module,exports){var Jx=function(code,message){var afK=Error.call(null,message);this.code=code;function atg(cq,hA){Object.getOwnPropertyNames(hA).forEach(function(propName){Object.defineProperty(cq,propName,Object.getOwnPropertyDescriptor(hA,propName));});return cq;};function ase(cq,hA){for(var i in hA){if(hA.hasOwnProperty(i)){cq[i]=hA[i];}}return cq;};if(typeof Object.create==='function'){atg(this,afK);}else{ase(this,afK);}};var awg=(function(){var eY=function(){};return function(acE){if(arguments.length>1){throw Error('Second argument not supported');}if(typeof acE!=='object'){throw TypeError('Argument must be an object');}eY.prototype=acE;var av=new eY();eY.prototype=null;return av;};})();if(typeof Object.create==='function'){Jx.prototype=Object.create(Error.prototype);}else{Jx.prototype=awg(Error.prototype);}Jx.prototype.constructor=Jx;module.exports=Jx;},{}],139:[function(require,module,exports){"use strict";function Event(target,type){this.cq=target;this.bg=type;};Event.prototype.getTarget=function(){return this.cq;};Event.prototype.getType=function(){return this.bg;};if(Object.defineProperties){Object.defineProperties(Event.prototype,{"target":{enumerable:true,get:function(){return this.getTarget();}},"type":{enumerable:true,get:function(){return this.getType();}}});}module.exports=Event;},{}],140:[function(require,module,exports){var EventEmitter=(function(){function on(eventType,handler){if(!this.iV){this.iV={};}var lowerCaseEventType=eventType.toLowerCase(),handlers=this.iV[lowerCaseEventType];if(!handlers){handlers=this.iV[lowerCaseEventType]=[];}handlers.push(handler);return this;};function off(eventType,handler){if(!this.iV){this.iV={};}var lowerCaseEventType=eventType.toLowerCase(),handlers=this.iV[lowerCaseEventType];if(handlers){var i=handlers.length;for(;i>=0;i--){if(handlers[i]===handler){handlers.splice(i,1);}}}return this;};function trigger(eventType,properties){if(!this.iV){this.iV={};}var lowerCaseEventType=eventType.toLowerCase(),event=new PCCViewer.Event(this,lowerCaseEventType),handlers=this.iV[lowerCaseEventType],i,length=0;if(properties){PCCViewer.rz.sq(event,properties);}if(handlers){length=handlers.length;handlers=handlers.slice(0);for(i=0;i<length;i++){handlers[i](event);}}return this;};return{extend:function(o){o.on=on;o.off=off;o.trigger=trigger;}};})();module.exports=EventEmitter;},{}],141:[function(require,module,exports){"use strict";var tq=function(eventEmitter){this.ac=eventEmitter;this.Hz=true;this.Xk={};};tq.prototype.on=function(eventType,handler){this.ac.on(eventType,handler);return this.ac;};tq.prototype.off=function(eventType,handler){this.ac.off(eventType,handler);return this.ac;};tq.prototype.trigger=function(eventType,properties){if(this.Hz){var lowerCaseEventType=eventType.toLowerCase();if(this.Xk[lowerCaseEventType]){var event=new PCCViewer.Event(this.ac,lowerCaseEventType);if(properties){PCCViewer.rz.sq(event,properties);}this.Xk[lowerCaseEventType](event);}else{this.ac.trigger(eventType,properties);}}return this.ac;};tq.prototype.stop=function(){this.Hz=false;};tq.prototype.resume=function(){this.Hz=true;};tq.prototype.intercept=function(eventType,handler){var lowerCaseEventType=eventType.toLowerCase();this.Xk[lowerCaseEventType]=handler;};module.exports=tq;},{}],142:[function(require,module,exports){var aDg={ViewerReady:"ViewerReady",PageCountReady:"PageCountReady",EstimatedPageCountReady:"EstimatedPageCountReady",PageChanged:"PageChanged",PageLoadFailed:"PageLoadFailed",PageDisplayed:"PageDisplayed",PageRotated:"PageRotated",DocumentRotated:"DocumentRotated",ScaleChanged:"ScaleChanged",DocumentPrinted:"DocumentPrinted",TextSelected:"TextSelected",MouseToolChanged:"MouseToolChanged",SearchPerformed:"SearchPerformed",PartialSearchResultsAvailable:"PartialSearchResultsAvailable",SearchCompleted:"SearchCompleted",SearchFailed:"SearchFailed",SearchCancelled:"SearchCancelled",SearchResultsAvailable:"SearchResultsAvailable",SearchCleared:"SearchCleared",SearchResultSelectionChanged:"SearchResultSelectionChanged",RevisionsRetrievalCompleted:"RevisionsRetrievalCompleted",RevisionsRetrievalFailed:"RevisionsRetrievalFailed",RevisionsAvailable:"RevisionsAvailable",PartialRevisionsAvailable:"PartialRevisionsAvailable",PrintRequested:"PrintRequested",MarkupLoaded:"MarkupLoaded",MarkupSaved:"MarkupSaved",MarkChanged:"MarkChanged",MarkCreated:"MarkCreated",MarkRemoved:"MarkRemoved",MarkReordered:"MarkReordered",MarkSelectionChanged:"MarkSelectionChanged",MarkMouseEnter:"MarkMouseEnter",MarkMouseOver:"MarkMouseOver",MarkMouseLeave:"MarkMouseLeave",CommentsPanelToggled:"CommentsPanelToggled",CommentCreated:"CommentCreated",CommentRemoved:"CommentRemoved",CommentChanged:"CommentChanged",PageTextReady:"PageTextReady",Click:"Click",PageOpening:"PageOpening",ViewingSessionChanging:"ViewingSessionChanging",ViewingSessionChanged:"ViewingSessionChanged"};module.exports=aDg;},{}],143:[function(require,module,exports){var pe={FullWidth:"FullWidth",ShrinkToWidth:"ShrinkToWidth",ActualSize:"ActualSize",FullHeight:"FullHeight",FullPage:"FullPage"};module.exports=pe;},{}],144:[function(require,module,exports){var rz={};rz.sq=function(target){var source;if(!target){throw new Error("target must be defined.");}else if(typeof target!=='object'){throw new Error("typeof target must be 'object'");}else{for(var i=1;i<arguments.length;i++){source=arguments[i];for(var property in source){if(source.hasOwnProperty(property)){target[property]=source[property];}}}}return target;};module.exports=rz;},{}],145:[function(require,module,exports){var ImageStamps=function(Options){this.bP=PCCViewer.rz.sq({},Options);};ImageStamps.prototype.requestImageStampList=function(){var bp=PCCViewer.Deferred();var cK=bp.getPromise();try{var bA=this.bP.imageHandlerUrl+'/ImageStampList';PCCViewer.Ajax.fE({method:'GET',url:bA}).then(function eZ(aC){var uf;if(aC.responseText.length>0){uf=JSON.parse(aC.responseText);if(aC.status===200){bp.resolve(uf);}else{bp.reject(new PCCViewer.Error("ImageStampListFail","Unable to retrieve ImageStamp list from server."));}}},function fM(av){bp.reject(av.error);});}catch(e){bp.reject(new PCCViewer.Error("Error",e.message));}return cK;};ImageStamps.prototype.requestImageSourceBase64=function(imageStampId){if(!imageStampId){throw new Error("Parameter imageStampId is not valid.");}if(typeof imageStampId!=='string'){throw new Error("Parameter imageStampId should be of type string.");}var bp=PCCViewer.Deferred();var cK=bp.getPromise();try{var bA=this.bP.imageHandlerUrl+'/ImageStamp/'+imageStampId+'/q?format=Base64';PCCViewer.Ajax.fE({method:'GET',url:bA,}).then(function eZ(aC){var uf;if(aC.responseText.length>0){uf=JSON.parse(aC.responseText);if(aC.status===200){bp.resolve(uf);}else{bp.reject(new PCCViewer.Error("ImageStampDataFail","Unable to retrieve image stamp data URL and dataHash from server."));}}},function fM(av){bp.reject(av.error);});}catch(e){bp.reject(new PCCViewer.Error("Error",e.message));}return cK;};ImageStamps.prototype.reqestImageSourceBase64=function(imageStampId){return this.requestImageSourceBase64(imageStampId);};ImageStamps.prototype.getImageSourceURL=function(ImageStampID){if(!ImageStampID){throw new Error("Parameter imageStampId is not valid.");}if(typeof ImageStampID!=='string'){throw new Error("Parameter imageStampId should be of type string.");}return this.bP.imageHandlerUrl+'/ImageStamp/'+ImageStampID+'/q?format=Image';};module.exports=ImageStamps;},{}],146:[function(require,module,exports){var aAp={data:{},initializeData:function(aAQ){PCCViewer.Language.data=IPCC.J.extend({},aAQ);return PCCViewer.Language;},getData:function(){return PCCViewer.Language.data;},getValue:function(ahp){if(typeof PCCViewer.Language.data==='undefined'){throw new Error('Language data is not set.');}var mz=ahp.split('.'),bQ=PCCViewer.Language.data,bD;while(mz.length){bD=mz.shift();bQ=bQ[bD];if(typeof bQ==='undefined'){bQ=ahp;break;}}return bQ;}};module.exports=aAp;},{}],147:[function(require,module,exports){var LoadMarkupLayersRequest=function(layerRecordIds,viewerControl,options){this.vO=layerRecordIds;this.cF=viewerControl;this.aw=viewerControl.aw;this.fc="";this.gN=false;this.qj=false;this.lm=0;this.bp=PCCViewer.Deferred();this.cK=this.bp.getPromise();this.then=this.cK.then;this.ug=options.loadAsHidden===true;PCCViewer.EventEmitter.extend(this);};LoadMarkupLayersRequest.EventType={LoadMarkupLayersFailed:"LoadMarkupLayersFailed",LoadMarkupLayersCompleted:"LoadMarkupLayersCompleted",LoadMarkupLayersCancelled:"LoadMarkupLayersCancelled",LoadMarkupLayersProgress:"LoadMarkupLayersProgress"};LoadMarkupLayersRequest.prototype.getProgress=function(){return this.lm;};LoadMarkupLayersRequest.prototype.cancel=function(){var V=this;this.qj=true;this.fc="User Cancelled";setTimeout(function(){V.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersCancelled,{});V.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersFailed,{});V.bp.reject(new PCCViewer.Error("UserCancelled","User Cancelled"));},0);return this;};LoadMarkupLayersRequest.prototype.getViewerControl=function(){return this.cF;};LoadMarkupLayersRequest.prototype.getErrorCode=function(){return this.fc;};LoadMarkupLayersRequest.prototype.Gu=function(){var V=this,XK=1,XG,ZB=[];var ug=this.ug;var ads=function(){V.gN=false;if(V.cF.qE){V.bp.reject(new PCCViewer.Error('ViewerControlDestroyed','ViewerControl has been destroyed.'));}else{V.bp.reject(new PCCViewer.Error('ViewingSessionChanged','Current Viewing Session has been changed.'));}V.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersFailed,{});};var ve=function(ags){function eZ(aC){if(V.aw.qE){ads();return;}var qU=JSON.parse(aC.responseText),Mv=V.aGt(qU),dS,sx=[],an,gM=[],amQ={},LL=0,Od;for(var ma in Mv.gM){if(Mv.gM.hasOwnProperty(ma)){gM=gM.concat(Mv.gM[ma]);}}dS=new PCCViewer.MarkupLayer(V.cF,gM);dS.aFk={bA:bA};IPCC.J.forEach(Mv.sx,function(aht){sx.push(aht);LL++;amQ[aht.uid]=true;});if(qU.name){dS.setName(qU.name);}if(qU.originalXmlName){dS.setOriginalXmlName(qU.originalXmlName);}if(LL>0){Od=function(ev){if(amQ[ev.mark.getUid()]){LL--;}if(!LL){V.aw.ac.off(PCCViewer.EventType.MarkCreated,Od);V.aw.wl=true;}};V.aw.ac.on(PCCViewer.EventType.MarkCreated,Od);V.aw.wl=false;try{an=V.aw.deserializeMarks(sx);}catch(db){V.gN=false;V.aw.ac.off(PCCViewer.EventType.MarkCreated,Od);V.aw.wl=true;V.bp.reject(new PCCViewer.Error('Error',db.message));V.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersFailed,{});return;}if(ug){IPCC.J.forEach(an,function(C){C.setVisible(false);});}dS.addMarks(an);}dS.YL=ags;for(var tY in qU.data){if(qU.data.hasOwnProperty(tY)){dS.setData(tY,qU.data[tY]);}}V.aw.getMarkupLayerCollection().addItem(dS);ZB.push(dS);XK--;V.lm=(V.vO.length-XK)/V.vO.length;V.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersProgress,{progress:V.lm});if(V.lm===1){V.gN=false;V.bp.resolve(ZB);V.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersCompleted,{markupLayers:ZB});}};function fM(av){V.gN=false;V.bp.reject(av.error);V.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersFailed,{});};var bA=XG+ags+'?'+new Date().getTime();PCCViewer.Ajax.fE({url:bA,method:'GET'}).then(eZ,fM);};if(this.aw.qE){ads();return;}if(!(/^[\x00-\x7F]*$/.test(this.aw.ba.get_documentIdentifier()))){XG=this.aw.bP.imageHandlerUrl+'/MarkupLayers/e'+this.aw.bP.documentID+'/';}else{XG=this.aw.bP.imageHandlerUrl+'/MarkupLayers/u'+encodeURIComponent(this.aw.bP.documentID)+'/';}if(this.qj){return;}if(Object.prototype.toString.call(this.vO)==='[object Array]'&&this.vO.length>0){XK=this.vO.length;this.gN=true;IPCC.J.forEach(this.vO,ve,this);}else if(typeof this.vO==="string"){this.gN=true;ve(this.vO);}else{this.gN=false;this.bp.reject(new PCCViewer.Error("InvalidParameter",'layerRecordIds parameter is missing or invalid.'));this.trigger(PCCViewer.LoadMarkupLayersRequest.EventType.LoadMarkupLayersFailed,{});return;}};LoadMarkupLayersRequest.prototype.aGt=function(qU){var Mw={},Ph={};IPCC.J.forEach(qU.marks,function(Yc){Yc.conversation.comments=[];Mw[Yc.uid]=Yc;},this);IPCC.J.forEach(qU.comments,function(wn){if(Mw[wn.markUid]){Mw[wn.markUid].conversation.comments.push(wn);}else if(Ph[wn.markUid]){Ph[wn.markUid].push(wn);}else{Ph[wn.markUid]=[wn];}},this);return{sx:Mw,gM:Ph};};if(Object.defineProperties){Object.defineProperties(LoadMarkupLayersRequest.prototype,{"errorCode":{enumerable:true,get:function(){return this.getErrorCode();}},"progress":{enumerable:true,get:function(){return this.getProgress();}},"viewerControl":{enumerable:true,get:function(){return this.getViewerControl();}}});}module.exports=LoadMarkupLayersRequest;},{}],148:[function(require,module,exports){var cU={setMask:function(C,hT){var GR={};IPCC.J.forEach(hT.translations,function(ai,bD){GR[bD]=new RegExp(ai.replace(/^\/|\/$/g,''));});C.setMask({value:hT.value,translations:GR});},calculateRectangle:function(bQ,bP){if(bQ.pageData===undefined||(bQ.pageData.width===bP.bO&&bQ.pageData.height===bP.bo)){return bQ.rectangle;}else{var ml=bP.bO/bQ.pageData.width;return{x:bQ.rectangle.x*ml,y:bQ.rectangle.y*ml,width:bQ.rectangle.width*ml,height:bQ.rectangle.height*ml};}},setRectangle:function(C,bQ,bP){C.setRectangle(cU.calculateRectangle(bQ,bP));},setLines:function(C,bQ,bP){var ack,pj,dj=bQ.textLength+bQ.startIndex-1,cO=bQ.selectedText,cs={startIndex:bQ.startIndex,length:bQ.textLength};pj=[];var aO,Ay;ack=IPCC.J.reduce(bQ.lineGroups,function(fa,ox){aO=ox.pageNumber-1;fa[aO]=IPCC.J.map(ox.lines,function(gA){if(ox.pageData!==undefined){Ay=cU.calculateRectangle({rectangle:gA,pageData:ox.pageData},bP);return new IPCC.Web.UI.Rectangle(Ay.x,Ay.y,Ay.width,Ay.height);}else{return new IPCC.Web.UI.Rectangle(gA.x,gA.y,gA.width,gA.height);}});pj.push({pageIndex:aO,endIndex:ox.startIndex+ox.textLength-1});return fa;},{});C.Ia(pj,dj,cO,cs,ack);},postCreate:function(C,bQ){C.T.ain(new Date(IPCC.J.GX(bQ.creationDateTime)));C.T.VO(new Date(IPCC.J.GX(bQ.modificationDateTime)));return C;},calculatePoint:function(bx,gy,bP){if(gy===undefined||(gy.width===bP.bO&&gy.height===bP.bo)){return bx;}else{return{x:bx.x*bP.bO/gy.width,y:bx.y*bP.bo/gy.height};}},Data:function(bQ,cX){IPCC.J.forEach(cX,function(ai,bD){bQ.setData(bD,ai);});},Comment:function(dq,cC){var nA=dq.addComment(cC.text);nA.setCreationTime(cC.creationDateTime);cU.Data(nA,cC.data);},Conversation:function(C,dq){var anl=C.getConversation();IPCC.J.forEach(dq.comments?dq.comments:[],function(nA){cU.Comment(anl,nA);});cU.Data(anl,dq.data);},Common:function(bQ,bP){if(bQ.uid===undefined){bQ.uid=IPCC.J.agc();}var C=this.adH(bQ.pageNumber,bQ.type,{uid:bQ.uid});if(bQ.rectangle&&C.setRectangle){cU.setRectangle(C,bQ,bP);}if(bQ.startPoint&&C.setStartPoint){C.setStartPoint(cU.calculatePoint(bQ.startPoint,bQ.pageData,bP));}if(bQ.endPoint&&C.setEndPoint){C.setEndPoint(cU.calculatePoint(bQ.endPoint,bQ.pageData,bP));}if(bQ.points&&C.setPoints){C.setPoints(IPCC.J.map(bQ.points,function(bx){return cU.calculatePoint(bx,bQ.pageData,bP);}));}if(bQ.lineGroups&&C.Ia){C.aX=bQ.uid;cU.setLines(C,bQ,bP);}if(bQ.interactionMode){C.setInteractionMode(bQ.interactionMode);}C=this.ahY(C);cU.Data(C,bQ.data);cU.Conversation(C,bQ.conversation);return C;},EllipseAnnotation:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.borderColor){C.setBorderColor(bQ.borderColor);}if(bQ.borderThickness){C.setBorderThickness(bQ.borderThickness);}if(bQ.fillColor){C.setFillColor(bQ.fillColor);}if(bQ.opacity){C.setOpacity(bQ.opacity);}return cU.postCreate(C,bQ);},FreehandAnnotation:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.color){C.setColor(bQ.color);}if(bQ.opacity){C.setOpacity(bQ.opacity);}if(bQ.path){C.setPath(bQ.path);}if(bQ.thickness){C.setThickness(bQ.thickness);}return cU.postCreate(C,bQ);},FreehandSignature:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.color){C.setColor(bQ.color);}if(bQ.path){C.setPath(bQ.path);}if(bQ.thickness){C.setThickness(bQ.thickness);}if(bQ.horizontalAlignment){C.setHorizontalAlignment(bQ.horizontalAlignment);}return cU.postCreate(C,bQ);},HighlightAnnotation:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.fillColor){C.setFillColor(bQ.fillColor);}return cU.postCreate(C,bQ);},ImageStampAnnotation:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.imageDataUrl&&bQ.imageId){C.setImage({id:bQ.imageId,dataUrl:bQ.imageDataUrl});}return cU.postCreate(C,bQ);},ImageStampRedaction:function(bQ,bP){return cU.ImageStampAnnotation.apply(this,arguments);},LineAnnotation:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.color){C.setColor(bQ.color);}if(bQ.endHeadType){C.setEndHeadType(bQ.endHeadType);}if(bQ.opacity){C.setOpacity(bQ.opacity);}if(bQ.thickness){C.setThickness(bQ.thickness);}return cU.postCreate(C,bQ);},PolylineAnnotation:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.color){C.setColor(bQ.color);}if(bQ.opacity){C.setOpacity(bQ.opacity);}if(bQ.thickness){C.setThickness(bQ.thickness);}return cU.postCreate(C,bQ);},RectangleAnnotation:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.borderColor){C.setBorderColor(bQ.borderColor);}if(bQ.borderThickness){C.setBorderThickness(bQ.borderThickness);}if(bQ.fillColor){C.setFillColor(bQ.fillColor);}if(bQ.opacity){C.setOpacity(bQ.opacity);}return cU.postCreate(C,bQ);},RectangleRedaction:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(C.oR){var hb=bQ.reasons||bQ.reason;if(hb&& !Array.isArray(hb)){hb=[hb];}if(hb){C.setReasons(hb);}}else{if(bQ.reason){C.setReason(bQ.reason);}}if(bQ.fillColor){C.setFillColor(bQ.fillColor);}if(bQ.borderColor){C.setBorderColor(bQ.borderColor);}if(bQ.borderThickness){C.setBorderThickness(bQ.borderThickness);}if(bQ.fontColor){C.setFontColor(bQ.fontColor);}return cU.postCreate(C,bQ);},StampAnnotation:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.label){C.setLabel(bQ.label);}if(bQ.color){C.setColor(bQ.color);}return cU.postCreate(C,bQ);},StampRedaction:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.label){C.setLabel(bQ.label);}return cU.postCreate(C,bQ);},StrikethroughAnnotation:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.color){C.setColor(bQ.color);}if(bQ.thickness){C.setThickness(bQ.thickness);}return cU.postCreate(C,bQ);},TextAnnotation:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.borderColor){C.setBorderColor(bQ.borderColor);}if(bQ.borderThickness){C.setBorderThickness(bQ.borderThickness);}if(bQ.fillColor){C.setFillColor(bQ.fillColor);}if(bQ.fontColor){C.setFontColor(bQ.fontColor);}if(bQ.fontName){C.setFontName(bQ.fontName);}if(bQ.fontSize){C.setFontSize(bQ.fontSize);}if(bQ.fontStyle){C.setFontStyle(bQ.fontStyle);}if(bQ.maxLength){C.setMaxLength(bQ.maxLength);}if(bQ.horizontalAlignment){C.setHorizontalAlignment(bQ.horizontalAlignment);}if(bQ.opacity){C.setOpacity(bQ.opacity);}if(bQ.text){C.setText(bQ.text);}return cU.postCreate(C,bQ);},TextAreaSignature:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.text){C.setText(bQ.text);}if(bQ.fontColor){C.setFontColor(bQ.fontColor);}if(bQ.fontName){C.setFontName(bQ.fontName);}if(bQ.maxFontSize){C.setMaxFontSize(bQ.maxFontSize);}if(bQ.fontStyle){C.setFontStyle(bQ.fontStyle);}if(bQ.maxLength){C.setMaxLength(bQ.maxLength);}if(bQ.horizontalAlignment){C.setHorizontalAlignment(bQ.horizontalAlignment);}return cU.postCreate(C,bQ);},TextHyperlinkAnnotation:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.fillColor){C.setFillColor(bQ.fillColor);}if(bQ.href){C.setHref(bQ.href);}return cU.postCreate(C,bQ);},TextInputSignature:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.fontColor){C.setFontColor(bQ.fontColor);}if(bQ.fontName){C.setFontName(bQ.fontName);}if(bQ.text){C.setText(bQ.text);}if(bQ.maxLength){C.setMaxLength(bQ.maxLength);}if(bQ.mask){cU.setMask(C,bQ.mask);}if(bQ.horizontalAlignment){C.setHorizontalAlignment(bQ.horizontalAlignment);}return cU.postCreate(C,bQ);},TextRedaction:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.fontColor){C.setFontColor(bQ.fontColor);}if(bQ.fontName){C.setFontName(bQ.fontName);}if(bQ.fontSize){C.setFontSize(bQ.fontSize);}if(bQ.maxLength){C.setMaxLength(bQ.maxLength);}if(bQ.text){C.setText(bQ.text);}if(bQ.horizontalAlignment){C.setHorizontalAlignment(bQ.horizontalAlignment);}return cU.postCreate(C,bQ);},TextSelectionRedaction:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(C.oR){var hb=bQ.reasons||bQ.reason;if(hb&& !Array.isArray(hb)){hb=[hb];}if(hb){C.setReasons(hb);}}else{if(bQ.reason){C.setReason(bQ.reason);}}return cU.postCreate(C,bQ);},TextSignature:function(bQ,bP){var C=cU.Common.apply(this,arguments);if(bQ.color){C.setColor(bQ.color);}if(bQ.fontName){C.setFontName(bQ.fontName);}if(bQ.text){C.setText(bQ.text);}if(bQ.horizontalAlignment){C.setHorizontalAlignment(bQ.horizontalAlignment);}return cU.postCreate(C,bQ);},TransparentRectangleRedaction:function(bQ,bP){var C=cU.Common.apply(this,arguments);return cU.postCreate(C,bQ);}};module.exports=cU;},{}],149:[function(require,module,exports){var Bh={HideSideHandlesWhenClose:"HideSideHandlesWhenClose",HideCornerHandlesWhenClose:"HideCornerHandlesWhenClose"};module.exports=Bh;},{}],150:[function(require,module,exports){var eF={serializeMask:function(hT){var agA={value:hT.value,translations:{}};IPCC.J.forEach(hT.translations,function(ai,bD){agA.translations[bD]=ai.toString();});return agA;},copyRectangle:function(h){return{x:h.x,y:h.y,width:h.width,height:h.height};},Common:function(ag,bN){var bo;var bO;if(ag.page){bo=ag.page.get_pageHeight();bO=ag.page.get_pageWidth();}else{bo=null;bO=null;}var bb=ag.mark.getPageNumber();var bQ={uid:ag.mark.getUid(),interactionMode:ag.mark.getInteractionMode(),pageNumber:bb,type:ag.mark.getType(),creationDateTime:IPCC.J.wT(ag.mark.T.afS()),modificationDateTime:IPCC.J.wT(ag.mark.T.agV()),data:eF.Data(ag.mark),conversation:eF.Conversation(ag.mark.getConversation())};function yl(bx){return{x:bx.x,y:bx.y};};function apV(){var JV=IPCC.J.map([].concat(ag.mark.T,ag.mark.ad),function(T){if(bO!==null){return{pageNumber:T.aO+1,pageData:{width:bO,height:bo},startIndex:T.get_startIndex(),textLength:T.get_textLength(),lines:IPCC.J.map(T.ab,function(ax){if(ax.get_rectangle){return eF.copyRectangle(ax.get_rectangle());}else{return eF.copyRectangle(ax);}})};}else{return{pageNumber:T.aO+1,startIndex:T.get_startIndex(),textLength:T.get_textLength(),lines:IPCC.J.map(T.ab,function(ax){if(ax.get_rectangle){return eF.copyRectangle(ax.get_rectangle());}else{return eF.copyRectangle(ax);}})};}});bQ.lineGroups=JV;};function ahJ(){if(ag.mark.getRectangle){bQ.rectangle=eF.copyRectangle(ag.mark.getRectangle());if(bO!==null){bQ.pageData={width:bO,height:bo};}}if(ag.mark.getStartPoint){bQ.startPoint=yl(ag.mark.getStartPoint());if(bO!==null){bQ.pageData=bQ.pageData||{width:bO,height:bo};}}if(ag.mark.getEndPoint){bQ.endPoint=yl(ag.mark.getEndPoint());if(bO!==null){bQ.pageData=bQ.pageData||{width:bO,height:bo};}}if(ag.mark.getPoints){var aJ=ag.mark.getPoints();bQ.points=IPCC.J.map(aJ,yl);if(bO!==null){bQ.pageData={width:bO,height:bo};}}if(ag.mark.T.ab){apV();}};if(bO!==undefined&&bo!==undefined&&bO!==0&&bo!==0){ahJ();bN(undefined,bQ);}else{ag.vc.requestPageAttributes(bb).then(function aKk(pQ){bo=pQ.height;bO=pQ.width;ahJ();bN(undefined,bQ);},function aHp(ef){bN(ef);});}},Data:function(bQ){return IPCC.J.reduce(bQ.getDataKeys(),function(fa,bD){fa[bD]=bQ.getData(bD);return fa;},{});},Comment:function(cC){return{text:cC.getText(),data:eF.Data(cC),creationDateTime:IPCC.J.wT(cC.getCreationTime())};},Conversation:function(dq){return{comments:IPCC.J.map(dq.getComments(),function(cC){return eF.Comment(cC);}),data:eF.Data(dq)};},EllipseAnnotation:function(ag,bN){eF.RectangleAnnotation(ag,bN);},FreehandAnnotation:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}bQ=IPCC.J.extend(bQ,{color:ag.mark.getColor(),opacity:ag.mark.getOpacity(),path:ag.mark.getPath(),thickness:ag.mark.getThickness()});bN(undefined,bQ);});},FreehandSignature:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}bQ=IPCC.J.extend(bQ,{color:ag.mark.getColor(),path:ag.mark.getPath(),thickness:ag.mark.getThickness(),horizontalAlignment:ag.mark.getHorizontalAlignment()});bN(undefined,bQ);});},HighlightAnnotation:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}var cs=ag.mark.getPosition();bQ=IPCC.J.extend(bQ,{fillColor:ag.mark.getFillColor(),textLength:cs.length,startIndex:cs.startIndex,selectedText:ag.mark.getText()});bN(undefined,bQ);});},ImageStampAnnotation:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}var aG=ag.mark.getImage();bQ=IPCC.J.extend(bQ,{imageDataUrl:aG.dataUrl,imageId:aG.id});bN(undefined,bQ);});},ImageStampRedaction:function(ag,bN){eF.ImageStampAnnotation(ag,bN);},LineAnnotation:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}bQ=IPCC.J.extend(bQ,{color:ag.mark.getColor(),endHeadType:ag.mark.getEndHeadType(),opacity:ag.mark.getOpacity(),thickness:ag.mark.getThickness()});bN(undefined,bQ);});},PolylineAnnotation:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}bQ=IPCC.J.extend(bQ,{color:ag.mark.getColor(),opacity:ag.mark.getOpacity(),thickness:ag.mark.getThickness()});bN(undefined,bQ);});},RectangleAnnotation:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}bQ=IPCC.J.extend(bQ,{borderColor:ag.mark.getBorderColor(),borderThickness:ag.mark.getBorderThickness(),fillColor:ag.mark.getFillColor(),opacity:ag.mark.getOpacity()});bN(undefined,bQ);});},RectangleRedaction:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}bQ=IPCC.J.extend(bQ,{fillColor:ag.mark.getFillColor(),borderColor:ag.mark.getBorderColor(),borderThickness:ag.mark.getBorderThickness(),fontColor:ag.mark.getFontColor()});if(ag.mark.oR){bQ.reasons=ag.mark.getReasons();}else{bQ.reason=ag.mark.getReason();}bN(undefined,bQ);});},StampAnnotation:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}bQ=IPCC.J.extend(bQ,{label:ag.mark.getLabel(),color:ag.mark.getColor()});bN(undefined,bQ);});},StampRedaction:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}bQ=IPCC.J.extend(bQ,{label:ag.mark.getLabel()});bN(undefined,bQ);});},StrikethroughAnnotation:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}var cs=ag.mark.getPosition();bQ=IPCC.J.extend(bQ,{color:ag.mark.getColor(),thickness:ag.mark.getThickness(),textLength:cs.length,startIndex:cs.startIndex,selectedText:ag.mark.getText()});bN(undefined,bQ);});},TextAnnotation:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}bQ=IPCC.J.extend(bQ,{borderColor:ag.mark.getBorderColor(),borderThickness:ag.mark.getBorderThickness(),fillColor:ag.mark.getFillColor(),fontColor:ag.mark.getFontColor(),fontName:ag.mark.getFontName(),fontSize:ag.mark.getFontSize(),fontStyle:ag.mark.getFontStyle(),maxLength:ag.mark.getMaxLength(),horizontalAlignment:ag.mark.getHorizontalAlignment(),opacity:ag.mark.getOpacity(),text:ag.mark.getText()});bN(undefined,bQ);});},TextAreaSignature:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}bQ=IPCC.J.extend(bQ,{text:ag.mark.getText(),fontColor:ag.mark.getFontColor(),fontName:ag.mark.getFontName(),fontStyle:ag.mark.getFontStyle(),maxFontSize:ag.mark.getMaxFontSize(),maxLength:ag.mark.getMaxLength(),horizontalAlignment:ag.mark.getHorizontalAlignment(),});bN(undefined,bQ);});},TextHyperlinkAnnotation:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}var cs=ag.mark.getPosition();bQ=IPCC.J.extend(bQ,{href:ag.mark.getHref(),fillColor:ag.mark.getFillColor(),textLength:cs.length,startIndex:cs.startIndex,selectedText:ag.mark.getText()});bN(undefined,bQ);});},TextInputSignature:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}bQ=IPCC.J.extend(bQ,{fontColor:ag.mark.getFontColor(),fontName:ag.mark.getFontName(),text:ag.mark.getText(),mask:ag.mark.getMask(),maxLength:ag.mark.getMaxLength(),horizontalAlignment:ag.mark.getHorizontalAlignment()});if(ag.mark.getMask()){bQ.mask=eF.serializeMask(ag.mark.getMask());}bN(undefined,bQ);});},TextRedaction:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}bQ=IPCC.J.extend(bQ,{fontColor:ag.mark.getFontColor(),fontName:ag.mark.getFontName(),fontSize:ag.mark.getFontSize(),text:ag.mark.getText(),maxLength:ag.mark.getMaxLength(),horizontalAlignment:ag.mark.getHorizontalAlignment()});bN(undefined,bQ);});},TextSelectionRedaction:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}var cs=ag.mark.getPosition();bQ=IPCC.J.extend(bQ,{textLength:cs.length,startIndex:cs.startIndex,selectedText:ag.mark.getText()});if(ag.mark.oR){bQ.reasons=ag.mark.getReasons();}else{bQ.reason=ag.mark.getReason();}bN(undefined,bQ);});},TextSignature:function(ag,bN){eF.Common(ag,function(db,bQ){if(db){bN(db);return;}bQ=IPCC.J.extend(bQ,{color:ag.mark.getColor(),fontName:ag.mark.getFontName(),text:ag.mark.getText(),horizontalAlignment:ag.mark.getHorizontalAlignment()});bN(undefined,bQ);});},TransparentRectangleRedaction:function(ag,bN){eF.Common(ag,bN);}};module.exports=eF;},{}],151:[function(require,module,exports){'use strict';var IPCC=require('./../IPCC/IPCC');var Data=require('./PCCViewer.Data').Data;var SessionData=require('./PCCViewer.Data').SessionData;function Mark(parameters){this.bb=0;this.ds=undefined;this.xZ=false;this.lk=Mark.InteractionMode.Full;this.cI=true;this.oR=parameters.enableMultipleRedactionReasons;if(parameters.uid&&parameters.viewerControl){(function(an,jG){IPCC.J.forEach(an,function validateMark(kv){if(kv.getUid()===jG){throw new Error('Uid '+jG+' already exists in the document and cannot be duplicated.');}});})(parameters.viewerControl.getAllMarks(),parameters.uid);}var jG=parameters.uid||IPCC.J.agc();if(parameters.igMark&&parameters.igMark instanceof IPCC.Web.UI.Mark){this.T=parameters.igMark;this.ds=this.T.get_markID().toString();this.cX=this.T.get_data();}else{this.cX=new IPCC.Web.UI.Data();}Data.extend(this);this.Fe=new IPCC.Web.UI.Data();SessionData.extend(this);if(parameters.pageNumber!==undefined){IPCC.aI.ih(parameters.pageNumber,'pageNumber');this.bb=parameters.pageNumber;}if(parameters.id!==undefined){IPCC.aI.ku(parameters.id,'id');this.ds=parameters.id;}if(parameters.type&&parameters.type==='PlaceSignature'&&parameters.xZ){this.bg=parameters.type;this.xZ=true;}else if(parameters.type!==undefined){IPCC.aI.ku(parameters.type,'type');var HN=QR(parameters.type,Mark.Type);if(HN===null){throw new RangeError("The value of mark type was invalid.");}this.bg=HN;}if('dB'in parameters){this.dB=parameters.dB;}if('bS'in parameters){this.bS=parameters.bS;}addPropertiesToMark(this);addMethodsToMark(this);this.getUid=function(){return jG;};if(Object.defineProperties&&Object.defineProperty){Object.defineProperty(this,'uid',{value:jG,enumerable:true,writable:false});}};Mark.prototype.getType=function(){return this.bg;};Mark.prototype.getId=function(){return this.ds;};Mark.prototype.getPageNumber=function(){return this.bb;};Mark.prototype.getConversation=function(){if(!this.dq){this.dq=new PCCViewer.Conversation(this);}return this.dq;};Mark.prototype.getBoundingRectangle=function(){if(this.T){var ax=this.T.get_boundingRectangle();if(ax instanceof IPCC.Web.UI.Rectangle){this.lH={width:ax.width,height:ax.height,x:ax.x,y:ax.y};}}return this.lH;};Mark.prototype.getInteractionMode=function(){if(this.T){switch(this.T.get_interactionMode()){case IPCC.Web.UI.MarkInteractionMode.SelectionDisabled:return PCCViewer.Mark.InteractionMode.SelectionDisabled;case IPCC.Web.UI.MarkInteractionMode.Full:return PCCViewer.Mark.InteractionMode.Full;case IPCC.Web.UI.MarkInteractionMode.TextEditingDisabled:return 'TextEditingDisabled';default:return PCCViewer.Mark.InteractionMode.Full;}}return this.lk;};Mark.prototype.setInteractionMode=function(interactionMode){var lk,QD;if(typeof interactionMode==='string'&&interactionMode.toLowerCase()==='texteditingdisabled'){lk='TextEditingDisabled';QD=IPCC.Web.UI.MarkInteractionMode.TextEditingDisabled;}else{lk=QR(interactionMode,PCCViewer.Mark.InteractionMode);switch(lk){case PCCViewer.Mark.InteractionMode.SelectionDisabled:QD=IPCC.Web.UI.MarkInteractionMode.SelectionDisabled;break;case PCCViewer.Mark.InteractionMode.Full:QD=IPCC.Web.UI.MarkInteractionMode.Full;break;default:throw new Error("The specified interactionMode is not valid.");}}if(this.T){this.T.set_interactionMode(QD);}this.lk=lk;return this;};Mark.prototype.reset=function(){var bZ=new Mark({type:this.bg,xZ:this.xZ});this.cX={};if(this.setBorderColor&&bZ.getBorderColor){this.setBorderColor(bZ.getBorderColor());}if(this.setBorderThickness&&bZ.getBorderThickness){this.setBorderThickness(bZ.getBorderThickness());}if(this.setColor&&bZ.getColor){this.setColor(bZ.getColor());}if(this.setEndHeadType&&bZ.getEndHeadType){this.setEndHeadType(bZ.getEndHeadType());}if(this.setEndPoint&&bZ.getEndPoint){this.setEndPoint(bZ.getEndPoint());}if(this.setFillColor&&bZ.getFillColor){this.setFillColor(bZ.getFillColor());}if(this.setFontColor&&bZ.getFontColor){this.setFontColor(bZ.getFontColor());}if(this.setFontName&&bZ.getFontName){this.setFontName(bZ.getFontName());}if(this.setFontSize&&bZ.getFontSize){this.setFontSize(bZ.getFontSize());}if(this.setFontStyle&&bZ.getFontStyle){this.setFontStyle(bZ.getFontStyle());}if(this.setHorizontalAlignment&&bZ.getHorizontalAlignment){this.setHorizontalAlignment(bZ.getHorizontalAlignment());}if(this.setLabel&&bZ.getLabel){this.setLabel(bZ.getLabel());}if(this.setPosition&&this.T&&bZ.getPosition){this.setPosition(bZ.getPosition());}if(this.setReason&&bZ.getReason&&this.oR!==true){this.setReason(bZ.getReason());}if(this.setReasons&&bZ.getReasons&&this.oR!==false){this.setReasons(bZ.getReasons());}if(this.setOpacity&&bZ.getOpacity){this.setOpacity(bZ.getOpacity());}if(this.setRectangle&&bZ.getRectangle){this.setRectangle(bZ.getRectangle());}if(this.setStartPoint&&bZ.getStartPoint){this.setStartPoint(bZ.getStartPoint());}if(this.setText&&bZ.getText){this.setText(bZ.getText());}if(this.setThickness&&bZ.getThickness){this.setThickness(bZ.getThickness());}if(this.setPath&&bZ.getPath){this.setPath(bZ.getPath());}if(this.setHref&&bZ.getHref){this.setHref(bZ.getHref());}if(this.setImage&&bZ.getImage){this.setImage(bZ.getImage());}if(this.setInteractionMode&&bZ.getInteractionMode){this.setInteractionMode(bZ.getInteractionMode());}if(this.setPoints&&bZ.getPoints){this.setPoints(bZ.getPoints());}if(this.setMask&&bZ.getMask){this.setMask(bZ.getMask());}if(this.setMaxLength&&bZ.getMaxLength){this.setMaxLength(bZ.getMaxLength());}if(this.setMaxFontSize&&bZ.getMaxFontSize){this.setMaxFontSize(bZ.getMaxFontSize());}};if(Object.defineProperties){Object.defineProperties(Mark.prototype,{"type":{enumerable:true,get:function(){return this.getType();}},"pageNumber":{enumerable:true,get:function(){return this.getPageNumber();}},"id":{enumerable:true,get:function(){return this.getId();}},"conversation":{enumerable:true,get:function(){return this.getConversation();}},"boundingRectangle":{enumerable:true,get:function(){return this.getBoundingRectangle();}},"interactionMode":{enumerable:true,get:function(){return this.getInteractionMode();},set:function(value){return this.setInteractionMode(value);}}});}Mark.Type={LineAnnotation:"LineAnnotation",RectangleAnnotation:"RectangleAnnotation",EllipseAnnotation:"EllipseAnnotation",TextAnnotation:"TextAnnotation",StampAnnotation:"StampAnnotation",HighlightAnnotation:"HighlightAnnotation",RectangleRedaction:"RectangleRedaction",TransparentRectangleRedaction:"TransparentRectangleRedaction",TextHyperlinkAnnotation:"TextHyperlinkAnnotation",TextRedaction:"TextRedaction",StampRedaction:"StampRedaction",FreehandAnnotation:"FreehandAnnotation",FreehandSignature:"FreehandSignature",TextSignature:"TextSignature",TextInputSignature:"TextInputSignature",TextAreaSignature:"TextAreaSignature",TextSelectionRedaction:"TextSelectionRedaction",ImageStampAnnotation:"ImageStampAnnotation",ImageStampRedaction:"ImageStampRedaction",PolylineAnnotation:"PolylineAnnotation",StrikethroughAnnotation:"StrikethroughAnnotation"};Mark.LineHeadType={None:"None",FilledTriangle:"FilledTriangle"};Mark.FontStyles={Bold:"Bold",Italic:"Italic",Strikeout:"Strikeout",Underline:"Underline"};Mark.InteractionMode={Full:"Full",SelectionDisabled:"SelectionDisabled"};Mark.HorizontalAlignment={Center:"Center",Left:"Left",Right:"Right"};function QR(YJ,bg){var aaT=YJ.toLowerCase();for(var standardType in bg){if(bg.hasOwnProperty(standardType)&&standardType.toLowerCase&&standardType.toLowerCase()===aaT){return standardType;}}return null;};function addMethodsToMark(C){function aqv(C){C.highlightText=function(highlights){if(!this.T){throw new Error("It is invalid to highlight text on this mark.");}var mE;if(highlights!==null&&typeof highlights!=="undefined"){if(Object.prototype.toString.call(highlights)!=='[object Array]'){mE=[highlights];}else{mE=highlights;}for(var i=0;i<mE.length;i++){auZ(mE[i]);}}else{mE=[];}var bg=C.getType();switch(bg){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:C.T.selectText(mE);break;case Mark.Type.HighlightAnnotation:case Mark.Type.TextSelectionRedaction:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.StrikethroughAnnotation:var V=this;var PR=[];var sq=false,OP=0,Qz,DG;var afJ=function(Fa,arq,gV){var yq;var aam= -1,Rw=[];var wb=(Fa.bf+Fa.da);if(sq===true&&Qz>=0&&DG>=0){if(Fa.aO-1===Qz){yq=0;if(OP<=wb){Rw.push({startIndex:yq,length:OP,color:gV[DG].color,opacity:(gV[DG].opacity)?gV[DG].opacity:127});sq=false;OP=0;Qz= -1;DG= -1;}}}for(var bj=0;bj<gV.length;bj++){yq=Fa.bf+gV[bj].startIndex-arq;if(yq<0){continue;}if(Array.prototype.indexOf){aam=PR.indexOf(bj);}else{aam=IPCC.Web.lw(PR,bj);}var dg=127;if(aam=== -1){if(yq+gV[bj].length<=wb){if(gV[bj].opacity){dg=gV[bj].opacity;}Rw.push({startIndex:yq,length:gV[bj].length,color:gV[bj].color,opacity:dg});PR.push(bj);V.Ci.push(gV[bj]);}else{var Tw=wb-yq;if(Tw>0){OP=gV[bj].length-Tw;dg=127;if(gV[bj].opacity){dg=gV[bj].opacity;}Rw.push({startIndex:yq,length:Tw,color:gV[bj].color,opacity:dg});PR.push(bj);V.Ci.push(gV[bj]);sq=true;DG=bj;Qz=Fa.aO;}}}}return Rw;};this.Ci=[];var dY=afJ(this.T,0,mE);C.clearHighlights();if(dY.length>0){V.T.selectText(dY);}dY=[];var hu=this.T.da;if(this.ad&&this.ad.length){for(var L=0;L<this.ad.length;L++){dY=[];dY=afJ(this.ad[L],hu,mE);hu+=this.ad[L].da;if(dY.length>0){this.ad[L].selectText(dY);}}}break;}return this;};function auZ(ES){IPCC.aI.nq(ES.startIndex,'highlight.startIndex',0,C.getText().length);IPCC.aI.nq(ES.length,'highlight.length',1,Number.MAX_VALUE);IPCC.aI.dR(ES.color,'highlight.color');if(ES.opacity){IPCC.aI.nq(ES.opacity,"highlight.opacity",0,255);}};C.clearHighlights=function(){if(this.T){if(!this.T){throw new Error("It is invalid to clear highlights on this mark.");}}var bg=C.getType();switch(bg){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:C.T.selectText();break;case Mark.Type.HighlightAnnotation:case Mark.Type.TextSelectionRedaction:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.StrikethroughAnnotation:this.T.selectText();if(this.ad&&this.ad.length){for(var L=0;L<this.ad.length;L++){this.ad[L].selectText();}}break;}return this;};};var bg=C.getType();switch(bg){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.HighlightAnnotation:case Mark.Type.TextSelectionRedaction:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.StrikethroughAnnotation:aqv(C);break;default:break;}};function addPropertiesToMark(C){C.lH={x:0,y:0,width:0,height:0};var bg=C.getType();switch(bg){case Mark.Type.LineAnnotation:C.dR='#18385F';C.jl=IPCC.Web.UI.LineStyle.Solid;C.nK=6;C.dg=255;C.Mj={x:0,y:0};C.wb={x:0,y:0};C.nt="None";break;case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:C.cP='#FB0404';C.dg=255;C.jK='#000000';C.lp=4;C.h={x:0,y:0,width:0,height:0};break;case Mark.Type.RectangleRedaction:C.ef="";C.hb=[];C.cP='#000000';C.jK='#000000';C.lp=1;C.hF='#FFFFFF';C.h={x:0,y:0,width:0,height:0};C.oj=true;if(C.T){C.T.jL(C.oj);}break;case Mark.Type.TransparentRectangleRedaction:C.h={x:0,y:0,width:0,height:0};C.oj=true;if(C.T){C.T.jL(C.oj);C.T.set_fillColor('#FFFF00');C.T.set_opacity(127);C.T.set_lineWidth(1);C.T.set_lineColor('#FFFF00');}break;case Mark.Type.TextAnnotation:C.aS='';C.cP='#FFFFFF';C.dg=127;C.jK='#000000';C.lp=4;C.hF='#000000';C.gb="Arial";C.ck=12;C.cV=[];C.lQ="Left";C.hD=0;C.h={x:0,y:0,width:0,height:0};break;case Mark.Type.StampAnnotation:case Mark.Type.StampRedaction:C.vf="Approved";C.h={x:0,y:0,width:0,height:0};if(bg===Mark.Type.StampRedaction){C.oj=true;if(C.T){C.T.jL(C.oj);C.T.set_fillColor('#000000');}}else{C.dR="#000000";}break;case Mark.Type.HighlightAnnotation:C.cP="#FFFF00";C.aS='';C.cO='';if(C.T){if(C.T.cO){C.aS=C.T.cO;}}C.cs={startIndex:0,length:0};C.Ci=[];C.ad=[];break;case Mark.Type.TextSelectionRedaction:C.ef="";C.hb=[];C.aS='';C.cs={startIndex:0,length:0};if(C.T){C.T.set_fillColor('#000000');if(C.T.cO){C.aS=C.T.cO;}}C.Ci=[];C.ad=[];break;case Mark.Type.TextHyperlinkAnnotation:C.mu='';C.cP="#3B00FF";C.aS='';if(C.T){if(C.T.cO){C.aS=C.T.cO;}}C.cs={startIndex:0,length:0};C.Ci=[];C.ad=[];break;case Mark.Type.TextRedaction:C.aS='';C.hF='#000000';C.gb="Arial";C.ck=12;C.h={x:0,y:0,width:0,height:0};C.oj=true;C.hD=0;if(C.T){C.T.jL(C.oj);C.T.set_fillColor('#FFFFFF');}C.lQ="Left";break;case Mark.Type.FreehandAnnotation:C.dg=255;C.h={x:0,y:0,width:0,height:0};C.nK=4;C.dR='#000000';C.gu='M0,0';break;case Mark.Type.FreehandSignature:C.h={x:0,y:0,width:0,height:0};C.nK=4;C.dR='#000000';C.lQ="Center";C.gu='M0,0';break;case Mark.Type.TextSignature:C.aS="John Doe";C.h={x:0,y:0,width:0,height:0};C.dR="#000000";if(C.T){C.dR=C.T.cP||'#000000';C.T.jL(C.oj);C.T.set_fillColor(C.dR);}C.lQ="Center";C.gb="";break;case Mark.Type.TextInputSignature:C.aS="";C.h={x:0,y:0,width:0,height:0};C.hF="#000000";C.hD=0;if(C.T){C.hF=C.T.get_textColor()||'#000000';C.T.jL(false);C.T.set_fillColor('transparent');C.T.set_opacity(255);C.T.set_lineColor('transparent');C.T.set_lineWidth(0);}C.lQ="Left";C.gb="Courier New";C.hT=null;C.fg=0;C.cP="transparent";C.dg=255;C.jK="transparent";C.lp=1;break;case Mark.Type.TextAreaSignature:C.aS="";C.h={x:0,y:0,width:0,height:0};C.hF="#000000";if(C.T){C.hF=C.T.get_textColor()||'#000000';C.T.jL(false);C.T.set_fillColor('transparent');C.T.set_opacity(255);C.T.set_lineColor('transparent');C.T.set_lineWidth(0);}C.lQ="Left";C.gb="Courier New";C.cV=[];C.hD=0;C.fg=0;C.cP="transparent";C.dg=255;C.jK="transparent";C.lp=1;break;case 'PlaceSignature':C.ld=undefined;C.h={x:0,y:0,width:0,height:0};break;case Mark.Type.ImageStampAnnotation:case Mark.Type.ImageStampRedaction:C.aG="";C.pF="";C.h={x:0,y:0,width:0,height:0};if(C.T&&bg===Mark.Type.ImageStampRedaction){C.oj=true;C.T.jL(C.oj);}break;case Mark.Type.PolylineAnnotation:C.dR='#000000';C.jl=IPCC.Web.UI.LineStyle.Solid;C.nK=2;C.dg=255;C.aJ=[{x:0,y:0},{x:0,y:0}];break;case Mark.Type.StrikethroughAnnotation:C.dR='#000000';C.jl=IPCC.Web.UI.LineStyle.Solid;C.nK=2;C.aS='';C.cO='';if(C.T){if(C.T.cO){C.aS=C.T.cO;}}C.cs={startIndex:0,length:0};C.Ci=[];C.ad=[];break;}function getSignature(){return this.ld||undefined;};function setSignature(signature){if(typeof signature==='undefined'){this.ld=undefined;return;}else if(typeof signature!=='object'){throw new Error("The parameter `signature` is not an Object.");}if(!signature.path&& !signature.text){throw new Error("The parameter `signature` should have at least one of these properties: text, path");}else{if(signature.path){if(signature.path.length<1){throw new Error("The property `signature.path` cannot be empty.");}else if(signature.path.match(/[^MLC0-9,.\s]/)){throw new Error("The property `signature.path` has invalid characters.");}}else if(signature.text){if(signature.text.length<1){signature.text='';}}}this.ld=signature;return this;};if(C.ld||C.bg==='PlaceSignature'){C.getSignature=getSignature;C.setSignature=setSignature;if(Object.defineProperties){Object.defineProperties(C,{"signature":{enumerable:true,get:function(){return this.getSignature();},set:function(value){return this.setSignature(value);}}});}}function getColor(){if(this.T){switch(this.bg){case Mark.Type.LineAnnotation:case Mark.Type.PolylineAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.FreehandAnnotation:case Mark.Type.StrikethroughAnnotation:this.dR=this.T.get_lineColor()||this.dR;break;case Mark.Type.StampAnnotation:case Mark.Type.TextSignature:this.dR=this.T.get_fillColor()||this.dR;break;}}return this.dR;};function setColor(value){IPCC.aI.dR(value,'color');this.dR=value;if(this.T){switch(this.bg){case Mark.Type.LineAnnotation:case Mark.Type.PolylineAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.FreehandAnnotation:this.T.set_lineColor(value);break;case Mark.Type.StampAnnotation:this.T.set_fillColor(value);break;case Mark.Type.TextSignature:this.T.set_textColor(value);this.T.set_fillColor(value);break;case Mark.Type.StrikethroughAnnotation:this.T.set_lineColor(value);if(this.ad&&this.ad.length){for(var L=0;L<this.ad.length;L++){this.ad[L].set_lineColor(value);}}break;}}return this;};if(C.dR!==undefined){C.getColor=getColor;C.setColor=setColor;if(Object.defineProperties){Object.defineProperties(C,{"color":{enumerable:true,get:function(){return this.getColor();},set:function(value){return this.setColor(value);}}});}}function getFillColor(){if(this.T){switch(this.bg){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.HighlightAnnotation:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.cP=this.T.get_fillColor()||this.cP;break;}}return this.cP;};function setFillColor(value){if(this.bg===PCCViewer.Mark.Type.HighlightAnnotation||this.bg===PCCViewer.Mark.Type.TextHyperlinkAnnotation){IPCC.aI.dR(value,'fillColor');}else{IPCC.aI.aaH(value,'fillColor');}this.cP=value;if(this.T){switch(this.bg){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.T.set_fillColor(value);break;case Mark.Type.HighlightAnnotation:case Mark.Type.TextHyperlinkAnnotation:this.T.set_fillColor(value);if(this.ad&&this.ad.length){for(var L=0;L<this.ad.length;L++){this.ad[L].set_fillColor(value);}}break;}}return this;};if(C.cP!==undefined){C.getFillColor=getFillColor;C.setFillColor=setFillColor;if(Object.defineProperties){Object.defineProperties(C,{"fillColor":{enumerable:true,get:function(){return this.getFillColor();},set:function(value){return this.setFillColor(value);}}});}}function getImage(){var retVal={dataUrl:this.aG,id:this.pF};return retVal;};function setImage(params){IPCC.aI.ku(params.dataUrl,'string');IPCC.aI.ku(params.id,'string');this.aG=params.dataUrl;this.pF=params.id;if(this.T){switch(this.bg){case Mark.Type.ImageStampAnnotation:case Mark.Type.ImageStampRedaction:this.T.set_image(params.dataUrl);this.T.pF=params.id;break;}}return this;};if(C.aG!==undefined){C.getImage=getImage;C.setImage=setImage;if(Object.defineProperties){Object.defineProperties(C,{"image":{enumerable:true,get:function(){return this.getImage();},set:function(params){return this.setImage(params);}}});}}function getBorderColor(){if(this.T){switch(this.bg){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.jK=this.T.get_lineColor()||this.jK;break;}}return this.jK;};function setBorderColor(value){IPCC.aI.aaH(value,'borderColor');this.jK=value;if(this.T){switch(this.bg){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.T.set_lineColor(value);break;}}return this;};if(C.jK!==undefined){C.getBorderColor=getBorderColor;C.setBorderColor=setBorderColor;if(Object.defineProperties){Object.defineProperties(C,{"borderColor":{enumerable:true,get:function(){return this.getBorderColor();},set:function(value){return this.setBorderColor(value);}}});}}function getOpacity(){if(this.T){switch(this.bg){case Mark.Type.LineAnnotation:case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.FreehandAnnotation:case Mark.Type.PolylineAnnotation:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.dg=this.T.get_opacity()||this.dg;break;}}return this.dg;};function setOpacity(value){IPCC.aI.nq(value,'opacity',0,255);this.dg=value;if(this.T){switch(this.bg){case Mark.Type.LineAnnotation:case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.FreehandAnnotation:case Mark.Type.PolylineAnnotation:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.T.set_opacity(value);break;}}return this;};if(C.dg!==undefined&&C.dg>=0){C.getOpacity=getOpacity;C.setOpacity=setOpacity;if(Object.defineProperties){Object.defineProperties(C,{"opacity":{enumerable:true,get:function(){return this.getOpacity();},set:function(value){return this.setOpacity(value);}}});}}function getThickness(){if(this.T){switch(this.bg){case Mark.Type.LineAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.FreehandAnnotation:case Mark.Type.PolylineAnnotation:case Mark.Type.StrikethroughAnnotation:this.nK=this.T.get_lineWidth()||this.nK;break;}}return this.nK;};function setThickness(value){IPCC.aI.kd(value,'thickness',1,50);this.nK=value;if(this.T){switch(this.bg){case Mark.Type.LineAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.FreehandAnnotation:case Mark.Type.PolylineAnnotation:this.T.set_lineWidth(value);break;case Mark.Type.StrikethroughAnnotation:this.T.set_lineWidth(value);if(this.ad&&this.ad.length){for(var L=0;L<this.ad.length;L++){this.ad[L].set_lineWidth(value);}}break;}}return this;};if(C.nK){C.getThickness=getThickness;C.setThickness=setThickness;if(Object.defineProperties){Object.defineProperties(C,{"thickness":{enumerable:true,get:function(){return this.getThickness();},set:function(value){return this.setThickness(value);}}});}}function getBorderThickness(){if(this.T){switch(this.bg){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.lp=this.T.get_lineWidth()||this.lp;break;}}return this.lp;};function setBorderThickness(value){IPCC.aI.kd(value,'borderThickness',1,50);this.lp=value;if(this.T){switch(this.bg){case Mark.Type.RectangleAnnotation:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.T.set_lineWidth(value);break;}}return this;};if(C.lp!==undefined){C.getBorderThickness=getBorderThickness;C.setBorderThickness=setBorderThickness;if(Object.defineProperties){Object.defineProperties(C,{"borderThickness":{enumerable:true,get:function(){return this.getBorderThickness();},set:function(value){return this.setBorderThickness(value);}}});}}function getVisible(){if(this.T){this.cI=this.T.get_visible();}return this.cI;};function setVisible(value){if(value!==true&&value!==false){throw new Error("The parameter value is invalid. The parameter must be boolean true or false.");}this.cI=value;if(this.T){this.T.set_visible(value);}var L;switch(this.bg){case Mark.Type.TextSelectionRedaction:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.HighlightAnnotation:case Mark.Type.StrikethroughAnnotation:if(this.ad&&this.ad.length){for(L=0;L<this.ad.length;L++){this.ad[L].set_visible(value);}}if(this.bg===PCCViewer.Mark.Type.TextSelectionRedaction){var fJ=this.T;for(L=0;L<this.T.ab.length;L++){fJ.ab[L].set_visible(value);}if(fJ.aX){IPCC.J.forEach(this.ad,function(T){for(L=0;L<T.ab.length;L++){T.ab[L].set_visible(value);}});}}break;}return this;};if(C.cI!==undefined){C.getVisible=getVisible;C.setVisible=setVisible;if(Object.defineProperties){Object.defineProperties(C,{"visible":{enumerable:true,get:function(){return this.getVisible();},set:function(value){return this.setVisible(value);}}});}}function getStartPoint(){if(this.T&&this.T!==null){var aJ=this.T.get_points();if(aJ.get_length()>0){switch(this.bg){case Mark.Type.LineAnnotation:var bx=aJ.getPoint(0);if(bx){this.Mj={x:bx.x,y:bx.y};}break;}}}return this.Mj;};function setStartPoint(value){IPCC.aI.ih(value.x,'startPoint'+'.x');IPCC.aI.ih(value.y,'startPoint'+'.y');if(this.T&&this.T!==null){var aJ=this.T.get_points();switch(this.bg){case Mark.Type.LineAnnotation:aJ.setPoint(0,new IPCC.Web.UI.Point(value.x,value.y));break;}}this.Mj=value;return this;};if(C.Mj){C.getStartPoint=getStartPoint;C.setStartPoint=setStartPoint;if(Object.defineProperties){Object.defineProperties(C,{"startPoint":{enumerable:true,get:function(){return this.getStartPoint();},set:function(value){return this.setStartPoint(value);}}});}}function getEndPoint(){if(this.T&&this.T!==null){var aJ=this.T.get_points();if(aJ.get_length()>0){switch(this.bg){case Mark.Type.LineAnnotation:var bx=aJ.getPoint(1);if(bx){this.wb={x:bx.x,y:bx.y};}break;}}}return this.wb;};function setEndPoint(value){IPCC.aI.ih(value.x,'endPoint'+'.x');IPCC.aI.ih(value.y,'endPoint'+'.y');if(this.T&&this.T!==null){var aJ=this.T.get_points();switch(this.bg){case Mark.Type.LineAnnotation:aJ.setPoint(1,new IPCC.Web.UI.Point(value.x,value.y));break;}}this.wb=value;return this;};if(C.wb){C.getEndPoint=getEndPoint;C.setEndPoint=setEndPoint;if(Object.defineProperties){Object.defineProperties(C,{"endPoint":{enumerable:true,get:function(){return this.getEndPoint();},set:function(value){return this.setEndPoint(value);}}});}}function getEndHeadType(){if(this.T&&this.T!==null){var CL;switch(this.bg){case Mark.Type.LineAnnotation:CL=this.T.get_endHeadType();switch(CL){case IPCC.Web.UI.LineHeadType.None:this.nt=PCCViewer.Mark.LineHeadType.None;break;case IPCC.Web.UI.LineHeadType.Solid:this.nt=PCCViewer.Mark.LineHeadType.FilledTriangle;break;}break;}}return this.nt;};function setEndHeadType(value){var CL;switch(value){case Mark.LineHeadType.None:CL=IPCC.Web.UI.LineHeadType.None;break;case Mark.LineHeadType.FilledTriangle:CL=IPCC.Web.UI.LineHeadType.Solid;break;default:throw "The specified value is not a valid line head type.";}if(this.T&&this.T!==null){switch(this.bg){case Mark.Type.LineAnnotation:this.T.set_endHeadType(CL);break;}}this.nt=value;return this;};if(C.nt){C.getEndHeadType=getEndHeadType;C.setEndHeadType=setEndHeadType;if(Object.defineProperties){Object.defineProperties(C,{"endHeadType":{enumerable:true,get:function(){return this.getEndHeadType();},set:function(value){return this.setEndHeadType(value);}}});}}function getPoints(){if(this.T&&this.T!==null){var Fr=this.T.get_points();var cr=Fr.get_length();var ahS=[];var UE=function(ayh,aD){ahS.push(ayh.getPoint(aD));};if(cr>1){switch(this.bg){case Mark.Type.PolylineAnnotation:for(var L=0;L<cr;L++){UE(Fr,L);}this.aJ=ahS;break;}}}return this.aJ.slice();};function setPoints(value){if(!(value instanceof Array)){throw "invalid parameter. The parameter should be an array.";}if(value.length<=1){return;}for(var bj=0;bj<value.length;bj++){IPCC.aI.bx(value[bj],'PolylinePoint');}if(this.T&&this.T!==null){var Fr=this.T.get_points();var aob=function(aD){Fr.addPoint(new IPCC.Web.UI.Point(value[aD].x,value[aD].y));};switch(this.bg){case Mark.Type.PolylineAnnotation:Fr.removeAllPoints();for(var L=0;L<value.length;L++){aob(L);}}}this.aJ=value;return this;};if(C.aJ){C.getPoints=getPoints;C.setPoints=setPoints;if(Object.defineProperties){Object.defineProperties(C,{"points":{enumerable:true,get:function(){return this.getPoints();},set:function(value){return this.setPoints(value);}}});}}function getRectangle(){if(this.T){switch(this.bg){case Mark.Type.RectangleAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TransparentRectangleRedaction:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.StampAnnotation:case Mark.Type.StampRedaction:case Mark.Type.FreehandAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:case Mark.Type.ImageStampAnnotation:case Mark.Type.ImageStampRedaction:var ax=this.T.get_rectangle();if(ax instanceof IPCC.Web.UI.Rectangle){this.h={width:ax.width,height:ax.height,x:ax.x,y:ax.y};}break;}}return this.h;};function setRectangle(value){IPCC.aI.ih(value.x,'rectangle'+'.x');IPCC.aI.ih(value.y,'rectangle'+'.y');IPCC.aI.ih(value.width,'rectangle'+'.width');IPCC.aI.ih(value.height,'rectangle'+'.height');if(this.T&&this.T!==null){switch(this.bg){case Mark.Type.RectangleAnnotation:case Mark.Type.RectangleRedaction:case Mark.Type.TransparentRectangleRedaction:case Mark.Type.EllipseAnnotation:case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.StampAnnotation:case Mark.Type.StampRedaction:case Mark.Type.FreehandAnnotation:case Mark.Type.FreehandSignature:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:case Mark.Type.ImageStampAnnotation:case Mark.Type.ImageStampRedaction:var ax=new IPCC.Web.UI.Rectangle(value.x,value.y,value.width,value.height);this.T.set_rectangle(ax);break;}}this.h=value;return this;};if(C.h){C.getRectangle=getRectangle;C.setRectangle=setRectangle;if(Object.defineProperties){Object.defineProperties(C,{"rectangle":{enumerable:true,get:function(){return this.getRectangle();},set:function(value){return this.setRectangle(value);}}});}}function getPosition(){var cw=0;if(this.T&&this.T.cO){cw=this.T.cO.length;}else if(this.T){cw=IPCC.J.reduce([this.T].concat(this.ad||[]),function(cr,T){return cr+T.get_textLength();},0);}return this.T?{startIndex:this.T.bf,length:cw}:this.cs;};function setPosition(value){IPCC.aI.ih(value.startIndex,'position.startIndex');IPCC.aI.ih(value.length,'position.length');if(value.startIndex<0){throw new Error("The start index must be 0 or greater.");}if(value.length<0){throw new Error("The length must be 0 or greater.");}if(this.T===undefined||this.T===null){throw new Error("The mark must be on a page.");}var aN;var aY;var aO=this.bb-1;var uU= -value.startIndex;var pj=[];var cO="";var dj;while(true){if(aO>=this.dB.get_length()){throw new Error("The specified length is out of range.");}aN=this.dB.getPage(aO);if(aN.dr()&&aN.dr().Cr()&&aN.dr().oS()===true){var afl=uU;var US=aN.dr().Ew();uU+=US.length;if(uU<0||(uU===0&&value.length!==0)){throw new Error("The specified start index is out of range for the specified page.");}var SI=0;if(aO===this.bb-1){SI=value.startIndex;}if(uU>=value.length){dj=value.startIndex+value.length-1;if(afl>=0){dj=value.length-1-afl;}pj.push({pageIndex:aO,endIndex:dj});cO+=US.substring(SI,dj+1);break;}else{dj=aN.dr().Ew().length-1;pj.push({pageIndex:aO,endIndex:dj});cO+=US.substring(SI,dj+1);}}else{throw new Error("The text has not been retrieved for this page.");}aO++;}this.aX=IPCC.Bm();var L=0;if(this.ad){if(this.T){this.T.aX=this.aX;aY=this.bS.gO(this.dB.getPage(this.T.aO));if(this.T.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction){for(var abP=this.T.ab.length-1;abP>=0;abP--){aY.removeMark(this.T.ab[abP]);this.T.ab.pop();}}}for(L=this.ad.length-1;L>=0;L--){var mX=this.ad[L];aY=this.bS.gO(this.dB.getPage(mX.aO));aY.removeMark(mX);this.ad.splice(L,1);}}else{this.ad=[];}Ia.call(this,pj,dj,cO,value);this.cs=value;return this;};function Ia(pj,dj,cO,value,Wn){var L,aO,aN,aY;Wn=Wn||{};var ab;this.ad=this.ad||[];var afX=(this.T.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction)?auG:auS;for(L=0;L<pj.length;L++){aO=pj[L].pageIndex;aN=this.dB.getPage(aO);var asU=aN.dr().gs();aY=this.bS.gO(aN);var fJ;var bf=0;dj=pj[L].endIndex;if(L===0){bf=value.startIndex;}aO=pj[L].pageIndex;ab=Wn[aO]||IPCC.J.XV(asU,bf,dj);if(L===0){fJ=afX(this.T,bf,dj-bf+1,cO,ab,aO,this.aX,this.T.get_type(),aY);this.T.kJ=true;}else{fJ=afX(null,bf,dj-bf+1,cO,ab,aO,this.aX,this.T.get_type(),aY);this.ad.push(fJ);aY.addMark(fJ);fJ.set_selected(this.T.get_selected());if(this.getFillColor){fJ.set_fillColor(this.T.get_fillColor());}if(this.getColor){fJ.set_lineColor(this.T.get_lineColor());}if(this.getThickness){fJ.set_lineWidth(this.T.get_lineWidth());}if(this.getHref){fJ.set_href(this.T.get_href());}if(this.getReason){fJ.set_text(this.T.get_text());}}if(L===pj.length-1){fJ.kB=true;}}};if(C.cs){C.getPosition=getPosition;C.setPosition=setPosition;C.Ia=Ia;if(Object.defineProperties){Object.defineProperties(C,{"position":{enumerable:true,get:function(){return this.getPosition();},set:function(value){return this.setPosition(value);}}});}}function auS(C,bf,cw,cO,ab,aO,nP,bC,aY){if(!C){C=new IPCC.Web.UI.Mark(bC);}C.bf=bf;C.da=cw;C.ib='y';C.aX=nP;C.cO=cO;C.ab=ab||[];C.aO=aO;var SG=IPCC.J.reduce(C.ab,function(EY,ax){if(!EY){return ax.clone();}else{return EY.union(ax);}},null);C.set_rectangle(SG);return C;};function auG(C,bf,cw,cO,ab,aO,nP,bC,aY){if(!C){C=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextSelectionRedaction);}C.bf=bf;C.da=cw;C.aX=nP;C.cO=cO;C.aO=aO;C.ab=IPCC.J.map(ab,function(ax){var wg=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.RectangleRedaction);wg.set_rectangle(ax);wg.jL(true);wg.set_fillColor('#000000');wg.set_text(C.aS);wg.set_lineWidth(0);wg.aX=nP;aY.addMark(wg);return wg;});var SG=IPCC.J.reduce(ab,function(EY,ax){if(!EY){return ax.clone();}else{return EY.union(ax);}},null);C.set_rectangle(SG);return C;};function getText(){if(this.T){switch(this.bg){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.aS=(typeof this.T.get_text()==="string")?this.T.get_text():this.aS;break;case Mark.Type.HighlightAnnotation:case Mark.Type.TextSelectionRedaction:case Mark.Type.TextHyperlinkAnnotation:case Mark.Type.StrikethroughAnnotation:if(C.T.cO){this.aS=C.T.cO;}break;}}return this.aS;};function setText(value){IPCC.aI.ku(value,'text');this.aS=value;if(this.T){switch(this.bg){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.T.set_text(value);break;}}return this;};if(C.aS!==undefined){C.getText=getText;var bC=C.getType();if(bC!==Mark.Type.HighlightAnnotation&&bC!==Mark.Type.TextSelectionRedaction&&bC!==Mark.Type.TextHyperlinkAnnotation&&bC!==Mark.Type.StrikethroughAnnotation){C.setText=setText;}if(Object.defineProperties){var aku={enumerable:true,get:function(){return this.getText();}};if(C.setText!==undefined){aku.set=function(value){return this.setText(value);};}Object.defineProperties(C,{"text":aku});}}function getFontColor(){if(this.T){switch(this.bg){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextInputSignature:case Mark.Type.RectangleRedaction:case Mark.Type.TextAreaSignature:this.hF=this.T.get_textColor()||this.hF;break;}}return this.hF;};function setFontColor(value){IPCC.aI.dR(value,'fontColor');this.hF=value;if(this.T){switch(this.bg){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:case Mark.Type.RectangleRedaction:this.T.set_textColor(value);break;}}return this;};if(C.hF){C.getFontColor=getFontColor;C.setFontColor=setFontColor;if(Object.defineProperties){Object.defineProperties(C,{"fontColor":{enumerable:true,get:function(){return this.getFontColor();},set:function(value){return this.setFontColor(value);}}});}}function getFontName(){if(this.T){switch(this.bg){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.gb=this.T.get_fontName()||this.gb;break;}}return this.gb;};function setFontName(value){IPCC.aI.ku(value,'fontName');this.gb=value;if(this.T){switch(this.bg){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:case Mark.Type.TextSignature:case Mark.Type.TextInputSignature:case Mark.Type.TextAreaSignature:this.T.set_fontName(value);break;}}return this;};if(C.gb!==undefined){C.getFontName=getFontName;C.setFontName=setFontName;if(Object.defineProperties){Object.defineProperties(C,{"fontName":{enumerable:true,get:function(){return this.getFontName();},set:function(value){return this.setFontName(value);}}});}}function getFontSize(){if(this.T){switch(this.bg){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:this.ck=this.T.get_fontSize()||this.ck;break;}}return this.ck;};function setFontSize(value){IPCC.aI.kd(value,'fontSize',0.1,288);this.ck=value;if(this.T){switch(this.bg){case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:this.T.set_fontSize(value);break;}}return this;};if(C.ck){C.getFontSize=getFontSize;C.setFontSize=setFontSize;if(Object.defineProperties){Object.defineProperties(C,{"fontSize":{enumerable:true,get:function(){return this.getFontSize();},set:function(value){return this.setFontSize(value);}}});}}function getHorizontalAlignment(){if(this.T){var zA=this.T.get_textHorizontalAlignment();switch(zA){case IPCC.Web.UI.HorizontalAlignment.Center:this.lQ="Center";break;case IPCC.Web.UI.HorizontalAlignment.Left:this.lQ="Left";break;case IPCC.Web.UI.HorizontalAlignment.Right:this.lQ="Right";break;}}return this.lQ;};function setHorizontalAlignment(value){IPCC.aI.ku(value,'horizontalAlignment');var qx=QR(value,PCCViewer.Mark.HorizontalAlignment);var zA;switch(qx){case 'Center':zA=IPCC.Web.UI.HorizontalAlignment.Center;break;case 'Left':zA=IPCC.Web.UI.HorizontalAlignment.Left;break;case 'Right':zA=IPCC.Web.UI.HorizontalAlignment.Right;break;default:throw "Invalid value found for the Text horizontalAlignment.";}C.lQ=qx;if(this.T&&zA!==undefined){this.T.set_textHorizontalAlignment(zA);this.lQ=qx;}return this;};if(C.lQ){C.getHorizontalAlignment=getHorizontalAlignment;C.setHorizontalAlignment=setHorizontalAlignment;if(Object.defineProperties){Object.defineProperties(C,{"horizontalAlignment":{enumerable:true,get:function(){return this.getHorizontalAlignment();},set:function(value){return this.setHorizontalAlignment(value);}}});}}function apQ(Vj){var zm=[];for(var L=0;L<Vj.length;L++){switch(Vj[L]){case "Bold":zm.push(IPCC.Web.UI.FontStyle.Bold);break;case "Italic":zm.push(IPCC.Web.UI.FontStyle.Italic);break;case "Strikeout":zm.push(IPCC.Web.UI.FontStyle.Strikeout);break;case "Underline":zm.push(IPCC.Web.UI.FontStyle.Underline);break;default:throw Error("An unknown font style was encountered: "+Vj[L]);}}if(zm.length===0){zm.push(IPCC.Web.UI.FontStyle.Regular);}return zm;};function getFontStyle(){if(this.T){var qu=[];switch(this.bg){case Mark.Type.TextAreaSignature:case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:var vI=this.T.get_fontStyle();if(vI&IPCC.Web.UI.FontStyle.Bold){qu.push("Bold");}if(vI&IPCC.Web.UI.FontStyle.Italic){qu.push("Italic");}if(vI&IPCC.Web.UI.FontStyle.Strikeout){qu.push("Strikeout");}if(vI&IPCC.Web.UI.FontStyle.Underline){qu.push("Underline");}if(qu.length>0){this.cV=qu;}break;}}return this.cV;};function setFontStyle(value){if(!(value instanceof Array)){throw "invalid parameter. The parameter should be an array.";}var Le,L,adc=[];for(L=0;L<value.length;L++){Le=QR(value[L],PCCViewer.Mark.FontStyles);if(Le===null){throw new RangeError("The value of font styles "+value[L]+" is invalid.");}else{IPCC.aI.ku(Le,'fontStyle');adc.push(Le);}}this.cV=adc;var vI=[];vI=apQ(this.cV);var aj=this;function awF(ai){setTimeout(function(){aj.T.set_fontStyle(ai);},2);};if(this.T){switch(this.bg){case Mark.Type.TextAreaSignature:case Mark.Type.TextAnnotation:case Mark.Type.TextRedaction:var aje=vI[0];for(L=1;L<vI.length;L++){aje|=vI[L];}awF(aje);break;}}return this;};if(C.cV){C.getFontStyle=getFontStyle;C.setFontStyle=setFontStyle;if(Object.defineProperties){Object.defineProperties(C,{"fontStyle":{enumerable:true,get:function(){return this.getFontStyle();},set:function(value){return this.setFontStyle(value);}}});}}function getLabel(){if(this.T){switch(this.bg){case Mark.Type.StampAnnotation:case Mark.Type.StampRedaction:this.vf=this.T.get_text()||this.vf;break;}}return this.vf;};function setLabel(value){IPCC.aI.ku(value,'label');this.vf=value;if(this.T){switch(this.bg){case Mark.Type.StampAnnotation:case Mark.Type.StampRedaction:this.T.set_text(value);break;}}return this;};if(typeof C.vf!=='undefined'){C.getLabel=getLabel;C.setLabel=setLabel;if(Object.defineProperties){Object.defineProperties(C,{"label":{enumerable:true,get:function(){return this.getLabel();},set:function(value){return this.setLabel(value);}}});}}function getReason(){if(this.oR===true){throw new Error("This method is not supported when ViewerControlOptions.enableMultipleRedactionReasons is set to false");}if(this.T){switch(this.bg){case Mark.Type.RectangleRedaction:case Mark.Type.TextSelectionRedaction:this.ef=this.T.get_text()||this.ef;break;}}return this.ef;};function setReason(value){if(this.oR===true){throw new Error("This method is not supported when ViewerControlOptions.enableMultipleRedactionReasons is set to false");}IPCC.aI.ku(value,'text');this.ef=value;if(this.T){switch(this.bg){case Mark.Type.RectangleRedaction:this.T.set_text(value);break;case Mark.Type.TextSelectionRedaction:this.T.set_text(value);if(this.ad&&this.ad.length){for(var L=0;L<this.ad.length;L++){this.ad[L].set_text(value);}}break;}}return this;};if(typeof C.ef!=='undefined'){C.getReason=getReason;C.setReason=setReason;if(Object.defineProperties){Object.defineProperties(C,{"reason":{enumerable:true,get:function(){return this.getReason();},set:function(value){return this.setReason(value);}}});}}function getReasons(){if(this.oR===false){throw Error('Using multiple redaction reasons is not supported when enableMultipleRedactionReasons is set to false');}return this.hb.slice();};function setReasons(value){if(this.oR===false){throw Error('Using multiple redaction reasons is not supported when enableMultipleRedactionReasons is set to false');}IPCC.aI.xb(value);IPCC.J.forEach(value,function(reason){IPCC.aI.ku(reason);});this.hb=value.slice();if(this.T){var YR=this.hb.join("; ");switch(this.bg){case Mark.Type.RectangleRedaction:this.T.set_text(YR);break;case Mark.Type.TextSelectionRedaction:this.T.set_text(YR);if(this.ad&&this.ad.length){for(var L=0;L<this.ad.length;L++){this.ad[L].set_text(YR);}}break;}}return this;};if(typeof C.hb!=='undefined'){C.getReasons=getReasons;C.setReasons=setReasons;if(Object.defineProperties){Object.defineProperties(C,{"reasons":{enumerable:true,get:function(){return this.getReasons();},set:function(value){return this.setReasons(value);}}});}}function getPath(){if(this.T){return this.T.get_pathString();}else{return this.gu;}};function setPath(path){if(path.match(/[^MLC0-9.,\s]/)){throw new Error("The path string contains illegal characters.");}var uM=IPCC.J.abf(path);this.gu=path;if(this.T){this.T.set_pathString(path);this.T.set_pathWidth(uM.width);this.T.set_pathHeight(uM.height);}return this;};if(C.gu){C.setPath=setPath;C.getPath=getPath;if(Object.defineProperties){Object.defineProperties(C,{"path":{enumerable:true,get:getPath,set:setPath}});}}function getHref(){if(this.T){return this.T.get_href();}else{return this.mu;}};function setHref(href){if(href!==null){var bg=typeof href;if(bg!=="undefined"&&bg!=="number"&&bg!=="string"){throw new Error("`href` can only be set to a value that is a Number, String, null, or undefined.");}}this.mu=href;if(this.T){this.T.set_href(href);}if(this.ad){IPCC.J.forEach(this.ad,function(T){T.set_href(href);});}return this;};if(typeof C.mu!=='undefined'){C.setHref=setHref;C.getHref=getHref;if(Object.defineProperties){Object.defineProperties(C,{"href":{enumerable:true,get:getHref,set:setHref}});}}function setMaxLength(maxLength){if(typeof maxLength!=='number'||maxLength<0||maxLength>Number.MAX_VALUE||Math.round(maxLength)!==maxLength){throw new Error('`maxLength` can only be set to a value that is a positive integer.');}this.hD=maxLength;if(this.T){this.T.set_maxLength(this.hD);}return this;};function getMaxLength(){if(this.T){this.hD=this.T.get_maxLength();}return this.hD;};if(typeof C.hD!=='undefined'){C.getMaxLength=getMaxLength;C.setMaxLength=setMaxLength;if(Object.defineProperties){Object.defineProperties(C,{"maxLength":{enumerable:true,get:getMaxLength,set:setMaxLength}});}}function setMaxFontSize(maxFontSize){if(typeof maxFontSize!=='number'||maxFontSize<0||maxFontSize>Number.MAX_VALUE||Math.round(maxFontSize)!==maxFontSize){throw new Error('`maxFontSize` can only be set to a value that is a positive integer.');}this.fg=maxFontSize;if(this.T){this.T.set_maxFontSize(this.fg);}return this;};function getMaxFontSize(){if(this.T){this.fg=this.T.get_maxFontSize();}return this.fg;};if(typeof C.fg!=='undefined'){C.getMaxFontSize=getMaxFontSize;C.setMaxFontSize=setMaxFontSize;if(Object.defineProperties){Object.defineProperties(C,{"maxFontSize":{enumerable:true,get:getMaxFontSize,set:setMaxFontSize}});}}function getMask(){return this.hT;};function setMask(mask){if(mask===null||typeof mask==='undefined'){this.hT=null;if(this.T){this.T.set_mask(this.hT);}return this;}if(typeof mask!=='object'||Array.isArray(mask)){throw new Error('`mask` can only be set to a value that is an Object, null or undefined.');}if(typeof mask.value!=='string'){throw new Error('`mask.value` can only be set to a value that is a string.');}if(typeof mask.translations!=='object'||mask.translations===null||Array.isArray(mask.translations)){throw new Error('`mask.translations` can only be set to a value that is an Object.');}var ajd=false;IPCC.J.forEach(mask.translations,function(val,key){ajd=true;if(key.length!==1){throw new Error('`'+key+'` does not have a string length of 1.');}if(!(val instanceof RegExp)|| !(/\/$/).exec(val.toString())){throw new Error('`mask.translations['+key+']` must be a regular expression without flags.');}});if(!ajd){throw new Error('`mask.translations` must have at least one translation.');}this.hT=mask;if(this.T){this.T.set_mask(this.hT);}return this;};if(typeof C.hT!=='undefined'){C.getMask=getMask;C.setMask=setMask;if(Object.defineProperties){Object.defineProperties(C,{"mask":{enumerable:true,get:getMask,set:setMask}});}}};module.exports=Mark;},{"./../IPCC/IPCC":29,"./PCCViewer.Data":135}],152:[function(require,module,exports){var EventEmitter=require('./PCCViewer.EventEmitter');var it=function(viewerControl,markReferences){var V=this;if(!viewerControl){throw new Error('`viewerControl` param is missing.');}this.ds=function(){var d=new Date().getTime();var uuid='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c==='x'?r:(r&0x3|0x8)).toString(16);});return uuid;}();this.cF=viewerControl;this.bz=undefined;this.YL=undefined;this.alN=undefined;this.an=[];this.gM={};this.lk=PCCViewer.Mark.InteractionMode.Full;if(viewerControl.aw){this.aw=viewerControl.aw;}else{var MN=function(){viewerControl.off('ViewerReady',MN);viewerControl.off('ViewingSessionChanged',MN);V.aw=viewerControl.aw;};viewerControl.on('ViewerReady',MN);viewerControl.on('ViewingSessionChanged',MN);}if(markReferences!==undefined){switch(Object.prototype.toString.call(markReferences)){case "[object Object]":markReferences=[markReferences];break;case "[object Array]":break;default:throw new Error('`markReferences` param is not an object or an array.');}IPCC.J.forEach(markReferences,function(rf){var KO=rf.markUid;rf.markupLayer=V;if(V.gM[KO]){V.gM[KO]=V.gM[KO].concat(rf);}else{V.gM[KO]=[rf];}});}var qG={};EventEmitter.extend(qG);qG.Pu=function(Da,di){var V=this;return setTimeout(function(){V.trigger(Da,di);},0);};EventEmitter.extend(this);this.cX=new IPCC.Web.UI.Data();PCCViewer.Data.extend(this);this.Fe=new IPCC.Web.UI.Data();PCCViewer.SessionData.extend(this);setTimeout(function(){V.trigger(PCCViewer.MarkupLayer.EventType.MarkupLayerCreated,{});},0);};it.EventType={MarkupLayerCreated:"MarkupLayerCreated",MarkupLayerDestroyed:"MarkupLayerDestroyed",MarksAddedToLayer:"MarksAddedToLayer",MarksRemovedFromLayer:"MarksRemovedFromLayer",MarkupLayerInteractionModeChanged:"MarkupLayerInteractionModeChanged",MarkupLayerHidden:"MarkupLayerHidden",MarkupLayerShown:"MarkupLayerShown"};it.prototype.getViewerControl=function(){return this.cF;};it.prototype.addMarks=function(marks){var V=this,aze=function(cC){cC.jy=V;};switch(Object.prototype.toString.call(marks)){case "[object Object]":marks=[marks];break;case "[object Array]":break;default:throw new Error('`marks` param is not an object or an array.');}for(var L=0;L<marks.length;L++){if(!(marks[L]instanceof PCCViewer.Mark)){throw new Error('`marks` param contains an item that is not an instanceof `PCCViewer.Mark`');}if(this.hasMark(marks[L].getId())){marks.splice(L,1);continue;}IPCC.J.forEach(marks[L].getConversation().getComments(),aze);}if(marks.length){this.an=this.an.concat(marks);this.trigger(PCCViewer.MarkupLayer.EventType.MarksAddedToLayer,{marks:marks});}return this;};it.prototype.removeMarks=function(marks){switch(Object.prototype.toString.call(marks)){case "[object Object]":marks=[marks];break;case "[object Array]":break;default:throw new Error('`marks` param is not an object or an array.');}for(var L=0;L<this.an.length;L++){for(var bj=0;bj<marks.length;bj++){if(this.an[L].getUid()===marks[bj].getUid()){this.an.splice(L,1);this.trigger(PCCViewer.MarkupLayer.EventType.MarksRemovedFromLayer,{marks:[marks[bj]]});break;}}}};it.prototype.getMarks=function(){var agq=[];IPCC.J.forEach(this.an,function(C){agq.push(C);});return agq;};it.prototype.hasMark=function(markId){if(typeof markId!=='string'){throw new Error('`markId` param is not a string.');}var L=0,afD=false,C;for(L;L<this.an.length;L++){C=this.an[L];if(C.getId()===markId){afD=true;break;}}return afD;};it.prototype.getMarkReferences=function(){var gM=[];for(var ma in this.gM){if(this.gM.hasOwnProperty(ma)){gM=gM.concat(this.gM[ma]);}}return gM;};it.prototype.hide=function(){var cF=this.aw;cF.hideMarks(this.getMarks());this.trigger(PCCViewer.MarkupLayer.EventType.MarkupLayerHidden,{});return this;};it.prototype.show=function(){var cF=this.aw;cF.showMarks(this.getMarks());this.trigger(PCCViewer.MarkupLayer.EventType.MarkupLayerShown,{});return this;};it.prototype.copyLayers=function(markupLayers){var cF=this.aw,V=this;if(markupLayers instanceof PCCViewer.MarkupLayer){markupLayers=[markupLayers];}if(markupLayers instanceof Array===false){throw new PCCViewer.Error("InvalidArgument","The parameter, markupLayers, is not an Array of MarkupLayers or a single MarkupLayer.");}var an=[];IPCC.J.forEach(markupLayers,function(jy){cF.getMarkupLayerCollection().getItem(jy.getId());an=an.concat(jy.getMarks());});var copiedMarks=cF.copyMarks(an);this.addMarks(copiedMarks);IPCC.J.forEach(this.an,function(C){IPCC.J.forEach(C.getConversation().getComments(),function(cC){cC.jy=V;});});return this;};it.prototype.getId=function(){return this.ds;};it.prototype.getName=function(){return this.bz;};it.prototype.setName=function(name){if(typeof name!=='string'){throw new Error('`name` param is not a string.');}this.bz=name;return this;};it.prototype.getRecordId=function(){return this.YL;};it.prototype.destroy=function(){this.aw.getMarkupLayerCollection().removeItem(this.ds);this.trigger(PCCViewer.MarkupLayer.EventType.MarkupLayerDestroyed,{});};it.prototype.setInteractionMode=function(interactionMode){if(typeof interactionMode!=='string'){throw new Error('`interactionMode` param is not a string.');}this.lk=interactionMode;IPCC.J.forEach(this.an,function(C){C.setInteractionMode(interactionMode);});this.trigger(PCCViewer.MarkupLayer.EventType.MarkupLayerInteractionModeChanged,{interactionMode:interactionMode});return this;};it.prototype.getOriginalXmlName=function(){return this.alN;};it.prototype.setOriginalXmlName=function(name){if(typeof name!=='string'){throw new Error('`name` param is not a string.');}this.alN=name;return this;};if(Object.defineProperties){Object.defineProperties(it.prototype,{"id":{enumerable:true,get:function(){return this.getId();}},"recordId":{enumerable:true,get:function(){return this.getRecordId();}},"name":{enumerable:true,get:function(){return this.getName();},set:function(name){return this.setName(name);}},"viewerControl":{enumerable:true,get:function(){return this.getViewerControl();}},"originalXmlName":{enumerable:true,get:function(){return this.getOriginalXmlName();},set:function(name){return this.setOriginalXmlName(name);}},});}module.exports=it;},{"./PCCViewer.EventEmitter":140}],153:[function(require,module,exports){var EventEmitter=require('./PCCViewer.EventEmitter');var MarkupLayerCollection=function(viewerControl){if(!viewerControl){throw new Error('`viewerControl` param is missing.');}this.cF=viewerControl;this.st={};this.an={};this.jn={};this.pS=0;EventEmitter.extend(this);};MarkupLayerCollection.EventType={MarkupLayerAdded:"MarkupLayerAdded",MarkupLayerRemoved:"MarkupLayerRemoved"};MarkupLayerCollection.prototype.getViewerControl=function(){return this.cF;};MarkupLayerCollection.prototype.forEach=function(iterator,thisArg){if(typeof iterator!=='function'){throw new TypeError('The iterator parameter is not a function');}IPCC.J.forEach(this.st,iterator,thisArg);return this;};MarkupLayerCollection.prototype.getItem=function(layerId){if(typeof layerId!=='string'){throw new Error('`layerId` param is not a string.');}return this.st[layerId];};MarkupLayerCollection.prototype.getCount=function(){return this.pS;};MarkupLayerCollection.prototype.getAll=function(){var agX=[],XP;for(XP in this.st){if(this.st.hasOwnProperty(XP)){agX.push(this.st[XP]);}}return agX;};MarkupLayerCollection.prototype.addItem=function(layer){var V=this,gM,XY=layer.gM,Fm=function(C,rf){var cC=C.getConversation().addComment(rf.text);cC.creationTime=new Date(rf.creationDateTime);cC.jy=rf.markupLayer;for(var tY in rf.data){if(rf.data.hasOwnProperty(tY)){cC.setData(tY,rf.data[tY]);}}},aFy=function(ayE){Fm(V.an[wz],ayE);},ajO=function(C){var ma=C.getUid();V.an[C.getUid()]=C;if(V.jn[ma]){IPCC.J.forEach(V.jn[ma],function(qa){Fm(C,qa);});delete V.jn[ma];}};if(!(layer instanceof PCCViewer.MarkupLayer)){throw new Error('`layer` param is not an instance of PCCViewer.MarkupLayer.');}this.st[layer.getId()]=layer;for(var wz in XY){if(XY.hasOwnProperty(wz)){gM=XY[wz];if(V.an[wz]){IPCC.J.forEach(gM,aFy);}else if(V.jn[wz]){V.jn[wz]=V.jn[wz].concat(gM);}else{V.jn[wz]=gM;}}}IPCC.J.forEach(layer.getMarks(),function(C){ajO(C);});this.pS++;this.trigger(PCCViewer.MarkupLayerCollection.EventType.MarkupLayerAdded,{layerId:layer.getId()});layer.on(PCCViewer.MarkupLayer.EventType.MarksAddedToLayer,function(ev){IPCC.J.forEach(ev.marks,function(C){ajO(C);});});layer.on(PCCViewer.MarkupLayer.EventType.MarksRemovedFromLayer,function(ev){var aEX=ev.cq;IPCC.J.forEach(ev.marks,function(C){var ma=C.getUid();IPCC.J.forEach(V.an[ma].getConversation().getComments(),function(HX){if(aEX.id!==HX.jy.id){var qa={creationDateTime:IPCC.J.wT(HX.creationTime),data:HX.cX.vn(),markUid:C.getUid(),markupLayer:HX.jy,text:HX.text};if(V.jn[ma]){V.jn[ma]=V.jn[ma].concat([qa]);}else{V.jn[ma]=[qa];}}});V.vD(C);});});return this;};MarkupLayerCollection.prototype.vD=function(C){var Ml;IPCC.J.forEach(this.st,function(dS){var ahG=dS.hasMark(C.getId());Ml=(typeof Ml!=='undefined')? +ahG^Ml: +ahG;});if(Ml===0){delete this.an[C.getUid()];}};MarkupLayerCollection.prototype.removeItem=function(layerId){var dS=this.st[layerId],V=this,aCN=function(qa,aD){if(qa.markupLayer.getId()===layerId){V.jn[ds].splice(aD);}};if(typeof layerId!=='string'){throw new Error('`layerId` param is not a string.');}IPCC.J.forEach(this.an,function(C){var gX=C.getConversation().getComments();var MB=dS.hasMark(C.getId());IPCC.J.forEach(gX,function(cC){if(MB&&cC.jy.getId()!==layerId){var adi={"markUid":C.getUid(),"markupLayer":cC.jy,"text":cC.getText(),"data":cC.cX.cX,"creationDateTime":IPCC.J.wT(cC.getCreationTime())};if(V.jn[C.getUid()]){V.jn[C.getUid()].push(adi);}else{V.jn[C.getUid()]=[adi];}C.getConversation().deleteComments(cC);}else if(MB&&cC.jy.getId()===layerId){C.getConversation().deleteComments(cC);}else if(!MB&&cC.jy.getId()===layerId){C.getConversation().deleteComments(cC);}});if(MB&&V.an[C.getUid()]){V.vD(C);}});for(var ds in this.jn){if(this.jn.hasOwnProperty(ds)){IPCC.J.forEach(this.jn[ds],aCN);}}delete this.st[layerId];this.pS--;this.trigger(PCCViewer.MarkupLayerCollection.EventType.MarkupLayerRemoved,{layerId:layerId});return this;};MarkupLayerCollection.prototype.removeAll=function(){this.st={};this.pS=0;return this;};if(Object.defineProperties){Object.defineProperties(MarkupLayerCollection.prototype,{"viewerControl":{enumerable:true,get:function(){return this.getViewerControl();}},"count":{enumerable:true,get:function(){return this.getCount();}}});}module.exports=MarkupLayerCollection;},{"./PCCViewer.EventEmitter":140}],154:[function(require,module,exports){'use strict';var Mark=require('./PCCViewer.Marks');function MouseTool(name,type){this.bz=name;var HN=aBv(type);if(HN===null){throw new RangeError("The value of type was invalid.");}this.bg=HN;addPropertiesToMouseTool(this);};MouseTool.prototype.getName=function(){return this.bz;};MouseTool.prototype.getType=function(){return this.bg;};if(Object.defineProperties){Object.defineProperties(MouseTool.prototype,{"name":{enumerable:true,get:function(){return this.getName();}},"type":{enumerable:true,get:function(){return this.getType();}}});}function aBv(YJ){var aaT=YJ.toLowerCase();for(var standardType in MouseTool.Type){if(MouseTool.Type.hasOwnProperty(standardType)&&standardType.toLowerCase&&standardType.toLowerCase()===aaT){return standardType;}}return null;};function addPropertiesToMouseTool(mouseTool){var bg=mouseTool.getType();switch(bg){case MouseTool.Type.Magnifier:break;case MouseTool.Type.SelectToZoom:break;case MouseTool.Type.Pan:mouseTool.zF=false;break;case MouseTool.Type.PanAndEdit:mouseTool.zF=true;break;case MouseTool.Type.SelectText:break;case MouseTool.Type.EditMarks:break;case MouseTool.Type.LineAnnotation:mouseTool.ak=new Mark({type:Mark.Type.LineAnnotation});break;case MouseTool.Type.RectangleAnnotation:mouseTool.ak=new Mark({type:Mark.Type.RectangleAnnotation});break;case MouseTool.Type.EllipseAnnotation:mouseTool.ak=new Mark({type:Mark.Type.EllipseAnnotation});break;case MouseTool.Type.TextAnnotation:mouseTool.ak=new Mark({type:Mark.Type.TextAnnotation});break;case MouseTool.Type.StampAnnotation:mouseTool.ak=new Mark({type:Mark.Type.StampAnnotation});break;case MouseTool.Type.HighlightAnnotation:mouseTool.ak=new Mark({type:Mark.Type.HighlightAnnotation});break;case MouseTool.Type.TextHyperlinkAnnotation:mouseTool.ak=new Mark({type:Mark.Type.TextHyperlinkAnnotation});break;case MouseTool.Type.FreehandAnnotation:mouseTool.ak=new Mark({type:Mark.Type.FreehandAnnotation});break;case MouseTool.Type.RectangleRedaction:mouseTool.ak=new Mark({type:Mark.Type.RectangleRedaction});break;case MouseTool.Type.TransparentRectangleRedaction:mouseTool.ak=new Mark({type:Mark.Type.TransparentRectangleRedaction});break;case MouseTool.Type.TextRedaction:mouseTool.ak=new Mark({type:Mark.Type.TextRedaction});break;case MouseTool.Type.TextInputSignature:mouseTool.ak=new Mark({type:Mark.Type.TextInputSignature});break;case MouseTool.Type.TextAreaSignature:mouseTool.ak=new Mark({type:Mark.Type.TextAreaSignature});break;case MouseTool.Type.StampRedaction:mouseTool.ak=new Mark({type:Mark.Type.StampRedaction});break;case MouseTool.Type.PlaceSignature:mouseTool.ak=new Mark({type:'PlaceSignature',xZ:true});break;case MouseTool.Type.TextSelectionRedaction:mouseTool.ak=new Mark({type:Mark.Type.TextSelectionRedaction});break;case MouseTool.Type.ImageStampAnnotation:mouseTool.ak=new Mark({type:Mark.Type.ImageStampAnnotation});break;case MouseTool.Type.ImageStampRedaction:mouseTool.ak=new Mark({type:Mark.Type.ImageStampRedaction});break;case MouseTool.Type.PolylineAnnotation:mouseTool.ak=new Mark({type:Mark.Type.PolylineAnnotation});break;case MouseTool.Type.StrikethroughAnnotation:mouseTool.ak=new Mark({type:Mark.Type.StrikethroughAnnotation});break;}if(mouseTool.ak){mouseTool.getTemplateMark=function(){return this.ak;};if(Object.defineProperties){Object.defineProperties(mouseTool,{"templateMark":{enumerable:true,get:mouseTool.getTemplateMark}});}}};MouseTool.prototype.reset=function(){if(this.ak){this.ak.reset();}};var MouseTools={rq:{},createMouseTool:function(name,type){if(!this.rq){this.rq={};createDefaultMouseTools();}var xT=name.toLowerCase();var existingTool=this.rq[xT];if(existingTool){if(existingTool.getType().toLowerCase()!==type.toLowerCase()){throw new Error("If calling createMouseTool and providing the name of a mouse tool that already exists, then the type must be the same type as the existing mouse tool.");}existingTool.reset();}else{this.rq[xT]=new MouseTool(name,type);}return this.rq[xT];},getMouseTool:function(name){if(name&&name.toLowerCase){if(!this.rq){this.rq={};createDefaultMouseTools();}var xT=name.toLowerCase();return this.rq[xT];}return undefined;}};MouseTool.Type={Magnifier:"Magnifier",SelectToZoom:"SelectToZoom",Pan:"Pan",PanAndEdit:"PanAndEdit",SelectText:"SelectText",EditMarks:"EditMarks",LineAnnotation:"LineAnnotation",RectangleAnnotation:"RectangleAnnotation",EllipseAnnotation:"EllipseAnnotation",TextAnnotation:"TextAnnotation",StampAnnotation:"StampAnnotation",HighlightAnnotation:"HighlightAnnotation",TextHyperlinkAnnotation:"TextHyperlinkAnnotation",FreehandAnnotation:"FreehandAnnotation",RectangleRedaction:"RectangleRedaction",TransparentRectangleRedaction:"TransparentRectangleRedaction",TextRedaction:"TextRedaction",TextInputSignature:"TextInputSignature",TextAreaSignature:"TextAreaSignature",StampRedaction:"StampRedaction",PlaceSignature:"PlaceSignature",TextSelectionRedaction:"TextSelectionRedaction",ImageStampAnnotation:"ImageStampAnnotation",ImageStampRedaction:"ImageStampRedaction",PolylineAnnotation:"PolylineAnnotation",StrikethroughAnnotation:"StrikethroughAnnotation"};function createDefaultMouseTools(){MouseTools.createMouseTool("AccusoftMagnifier",MouseTool.Type.Magnifier);MouseTools.createMouseTool("AccusoftSelectToZoom",MouseTool.Type.SelectToZoom);MouseTools.createMouseTool("AccusoftPan",MouseTool.Type.Pan);MouseTools.createMouseTool("AccusoftPanAndEdit",MouseTool.Type.PanAndEdit);MouseTools.createMouseTool("AccusoftSelectText",MouseTool.Type.SelectText);MouseTools.createMouseTool("AccusoftEditMarks",MouseTool.Type.EditMarks);MouseTools.createMouseTool("AccusoftLineAnnotation",MouseTool.Type.LineAnnotation);MouseTools.createMouseTool("AccusoftArrowAnnotation",MouseTool.Type.LineAnnotation).getTemplateMark().setEndHeadType("FilledTriangle");MouseTools.createMouseTool("AccusoftRectangleAnnotation",MouseTool.Type.RectangleAnnotation);MouseTools.createMouseTool("AccusoftEllipseAnnotation",MouseTool.Type.EllipseAnnotation);MouseTools.createMouseTool("AccusoftTextAnnotation",MouseTool.Type.TextAnnotation);MouseTools.createMouseTool("AccusoftStampAnnotation",MouseTool.Type.StampAnnotation);MouseTools.createMouseTool("AccusoftHighlightAnnotation",MouseTool.Type.HighlightAnnotation);MouseTools.createMouseTool("AccusoftTextHyperlinkAnnotation",MouseTool.Type.TextHyperlinkAnnotation);MouseTools.createMouseTool("AccusoftFreehandAnnotation",MouseTool.Type.FreehandAnnotation);MouseTools.createMouseTool("AccusoftPlaceSignature",MouseTool.Type.PlaceSignature);MouseTools.createMouseTool("AccusoftTextSelectionRedaction",MouseTool.Type.TextSelectionRedaction);MouseTools.createMouseTool("AccusoftRectangleRedaction",MouseTool.Type.RectangleRedaction);MouseTools.createMouseTool("AccusoftTransparentRectangleRedaction",MouseTool.Type.TransparentRectangleRedaction);MouseTools.createMouseTool("AccusoftTextRedaction",MouseTool.Type.TextRedaction);MouseTools.createMouseTool("AccusoftTextInputSignature",MouseTool.Type.TextInputSignature);MouseTools.createMouseTool("AccusoftTextAreaSignature",MouseTool.Type.TextAreaSignature);MouseTools.createMouseTool("AccusoftStampRedaction",MouseTool.Type.StampRedaction);MouseTools.createMouseTool("AccusoftImageStampAnnotation",MouseTool.Type.ImageStampAnnotation);MouseTools.createMouseTool("AccusoftImageStampRedaction",MouseTool.Type.ImageStampRedaction);MouseTools.createMouseTool("AccusoftPolylineAnnotation",MouseTool.Type.PolylineAnnotation);MouseTools.createMouseTool("AccusoftStrikethroughAnnotation",MouseTool.Type.StrikethroughAnnotation);return MouseTools.rq;};createDefaultMouseTools();module.exports={MouseTool:MouseTool,MouseTools:MouseTools};},{"./PCCViewer.Marks":151}],155:[function(require,module,exports){var EventEmitter=require('./PCCViewer.EventEmitter');var ObservableCollection=function(){var AA=[];var qG={};EventEmitter.extend(qG);qG.Pu=function(Da,di){var V=this;return setTimeout(function(){V.trigger(Da,di);},0);};this.add=function(item){AA.push(item);qG.Pu(this.EventType.ItemAdded,{item:item,count:AA.length});return this;};this.remove=function(item){var V=this;this.forEach(function(e,idx){if(e===item){AA.splice(idx,1);qG.Pu(V.EventType.ItemRemoved,{item:item,count:AA.length});}});return this;};this.removeAll=function(){AA=[];qG.Pu(this.EventType.ItemRemoved,{count:AA.length});return this;};this.forEach=function(iterator,thisArg){if(typeof iterator!=='function'){throw new TypeError('The iterator parameter is not a function');}IPCC.J.forEach(this.toArray(),iterator,thisArg);return this;};this.toArray=function(){return[].concat(AA);};this.on=function(eventType,handler){qG.on.apply(qG,arguments);return this;};this.off=function(eventType,handler){qG.off.apply(qG,arguments);return this;};};ObservableCollection.prototype.EventType={ItemAdded:"ItemAdded",ItemRemoved:"ItemRemoved"};module.exports=ObservableCollection;},{"./PCCViewer.EventEmitter":140}],156:[function(require,module,exports){var CT={Horizontal:"Horizontal",Vertical:"Vertical"};module.exports=CT;},{}],157:[function(require,module,exports){var PasswordProtectedDocumentLoader=function PasswordProtectedDocumentLoader(ZY){this.ZY=ZY;};PasswordProtectedDocumentLoader.prototype.load=function(password){return this.ZY(password);};module.exports=PasswordProtectedDocumentLoader;},{}],158:[function(require,module,exports){var printAlgorithm={standard:1,contentWindowContents:2};var Xn=function Xn(bQ,dQ,R){if(bQ.addEventListener){bQ.addEventListener(dQ,R,false);}else if(bQ.attachEvent){bQ.attachEvent('on'+dQ,R);}};var Wr=function Wr(bQ,dQ,R){if(bQ.removeEventListener){bQ.removeEventListener(dQ,R,false);}else if(bQ.detachEvent){bQ.detachEvent('on'+dQ,R);}};function aDv(eY){var acx={};eY=eY.split('&');for(var i=eY.length;i--;){var q=eY[i].split('=');acx[q.shift()]=q.join('=');}return acx;};function aFv(){var AD=document.getElementById('pccPrintFrame');if(AD){if(AD.contentWindow&&AD.contentWindow.destroy){AD.contentWindow.destroy();}if(AD.parentElement){AD.parentElement.removeChild(AD);}}};function aCe(bP){bP.afU();aFv();bP.ahd();if(!bP.algorithm){bP.algorithm=printAlgorithm.standard;}var hH;var fW=document.createElement('iframe');fW.id='pccPrintFrame';fW.className='pccPrintFrame';fW.style.position='absolute';fW.style.bottom=fW.style.right='0px';fW.style.width=fW.style.height='1px';fW.style.zIndex='0';fW.style.border='none';if(bP.algorithm!==printAlgorithm.contentWindowContents){fW.style.visibility='0';}function NL(){Wr(window,'message',alo);};function aer(){Wr(fW,'load',aer);if(fW.contentDocument){hH=fW.contentDocument;}else if(fW.contentWindow){hH=fW.contentWindow.document;}else{hH=fW.document;}if(bP.algorithm===printAlgorithm.contentWindowContents){fW.contentWindow.contents=bP.template;fW.src='javascript:window["contents"]';}else{hH.open();hH.write(bP.template);hH.close();}};var alo=function(message){message.source.PCCViewer.Ajax.setHeaders(PCCViewer.Ajax.getHeaders()).setOverrideMethod(PCCViewer.Ajax.getOverrideMethod());if(message.data.match(/loadArt/)){var anb=JSON.parse(message.data);var aY=bP.aep(anb.pageIndex);bP.afU();fW.contentWindow[anb.callbackName](aY);bP.ahd();}else if(message.data==='extra'){var Hy=bP.adT(bP);fW.contentWindow['extra'](bP.encryption,Hy);}else if(message.data==='done'){if(bP.algorithm===printAlgorithm.contentWindowContents){setTimeout(function(){fW.contentWindow.focus();fW.contentWindow.document.execCommand('print',false,null);window.focus();NL();bP.uh.trigger(PCCViewer.PrintRequest.EventType.PrintCompleted);},2000);}else{setTimeout(function(){fW.contentWindow.focus();fW.contentWindow.print();window.focus();NL();bP.uh.trigger(PCCViewer.PrintRequest.EventType.PrintCompleted);},2000);}}else if(message.data==='fail'){NL();bP.uh.trigger(PCCViewer.PrintRequest.EventType.PrintFailed);}else{var tf=aDv(message.data);tf.index= +tf.index;tf.pageNumber= +tf.pageNumber;tf.totalPages= +tf.totalPages;bP.uh.aeR= +tf.index+1;bP.uh.trigger(PCCViewer.PrintRequest.EventType.PrintPagePrepared,tf);}};Xn(window,'message',alo);Xn(fW,'load',aer);document.body.appendChild(fW);return NL;};function asq(cF){return function aep(aO){return cF.bS.gO(cF.dB.getPage(aO));};};function arQ(cF){return function adT(options){var an,C,wF=[],Ar=[],GC={},Ix={},yU={},ef={},EG='',aaa,dq,aD,Gt,ax,FH,bb,aaR={},EN={},L=0,cg=0,bj=0,asX=function(a,b){return a-b;};if(options.includeComments!=='none'||options.includeReasons!=='none'){an=cF.getAllMarks();for(L=0;L<options.pages.length;L++){aaR[options.pages[L]]=true;}for(cg=0;cg<an.length;cg++){C=an[cg];bb=C.bb;if(options.includeReasons!=='none'&&(C.getReason||C.getReasons)){EG=C.T.get_text();if(EG){if(!yU[bb]){ef[EG]=1;yU[bb]=ef;ef={};}else{if(yU[bb][EG]){yU[bb][EG]+=1;}else{yU[bb][EG]=1;}}}}if(C.oj||C.bg.search("Redaction")!== -1){if(EN[bb]){EN[bb]+=1;}else{EN[bb]=1;}}if(options.range.length&&aaR[bb]!==true|| !options.includeRedactions&&C.oj|| !options.includeAnnotations&& !C.oj){continue;}dq=C.getConversation();if(dq&&dq.getComments().length){if(!Gt){Gt=bb;}else if(bb!==Gt){wF.sort(asX);for(bj=0;bj<wF.length;bj++){Ar=Ar.concat(GC[wF[bj]]);}Ix[Gt]=Ar;Gt=bb;wF=[];GC={};Ar=[];}aD=cF.getCharacterIndex(C);aaa=bb;ax=C.T.get_boundingRectangle();FH=(aD>0)?aD*10000+ax.y:ax.y;wF.push(FH);if(!GC[FH]){GC[FH]=[dq];}else{GC[FH].push(dq);}}}if(wF.length){wF.sort(function(a,b){return a-b;});for(L=0;L<wF.length;L++){Ar=Ar.concat(GC[wF[L]]);}Ix[aaa]=Ar;}}return{Ix:Ix,yU:yU,EN:EN};};};function aGv(cF){return function(){if(cF&&cF.bS){cF.bS.remove_markChanged(cF.np);}};};function Zt(cF){return function(){if(cF&&cF.bS){cF.bS.add_markChanged(cF.np);}};};function print(options){options=options||{};options.range=options.range||'all';options.orientation=(options.orientation&&options.orientation.toLowerCase()==='landscape')?'landscape':'portrait';options.paperSize=options.paperSize||'letter';options.margins=(options.margins&&options.margins.toLowerCase()==='none')?'none':'default';options.includeMarks=options.includeMarks!==undefined?(! !options.includeMarks&&this.canPrintMarks()):undefined;options.includeAnnotations=options.includeAnnotations!==undefined?(! !options.includeAnnotations&&this.canPrintMarks()):undefined;options.includeRedactions=options.includeRedactions!==undefined?(! !options.includeRedactions&&this.canPrintMarks()):undefined;options.includeComments=(options.includeComments)?options.includeComments:'none';options.includeReasons=(options.includeReasons)?options.includeReasons:'none';options.redactionViewMode=(options.redactionViewMode)?options.redactionViewMode:'Normal';if(options.includeAnnotations===undefined){options.includeAnnotations=options.includeMarks;}if(options.includeRedactions===undefined){options.includeRedactions=options.includeMarks;}var cz=PCCViewer.Util.convertPageRangeToArray(options.range.toString().toLowerCase(),{upperLimit:this.getPageCount()});var nG=this.bP.imageHandlerUrl;var apM=this.bP.documentID;var aru=this.aGi;options.vsID=apM;options.handler=nG;options.pages=cz;var isOldIE= ! !navigator.appName.match('Microsoft');var isIE= ! !navigator.userAgent.match('Trident');var isSafari= ! !(navigator.userAgent.search('Safari')>=0&&navigator.userAgent.search('Chrome')<0);options.template=aru.replace(/{{viewingSessionId}}/g,options.vsID).replace(/{{handler}}/g,options.handler).replace(/{{pages}}/g,options.pages.join(',')).replace(/{{orientation}}/g,options.orientation).replace(/{{paperSize}}/g,options.paperSize).replace(/{{isIE}}/g,isIE.toString()).replace(/{{isSafari}}/g,isSafari.toString()).replace(/{{includeAnnotations}}/g,options.includeAnnotations).replace(/{{includeRedactions}}/g,options.includeRedactions).replace(/{{includeComments}}/g,options.includeComments).replace(/{{includeReasons}}/g,options.includeReasons).replace(/{{margins}}/g,options.margins).replace(/{{redactionViewMode}}/g,options.redactionViewMode).replace(/{{viewerAssetsPath}}/g,this.bP.viewerAssetsPath);options.encryption= ! !this.bP.encryption;if(isOldIE){options.algorithm=printAlgorithm.contentWindowContents;}var abU;function af(){if(! !abU){abU();}};var uh=new PCCViewer.PrintRequest(options,cz.length,af,this);this.ac.trigger(PCCViewer.EventType.PrintRequested,{printRequest:uh});options.uh=uh;options.aep=asq(this);options.adT=arQ(this);options.afU=aGv(this);options.ahd=Zt(this);abU=aCe(options);return uh;};function validatePrintRange(range){return PCCViewer.Util.validatePageRange(range.toString().toLowerCase(),{upperLimit:this.getPageCount()});};function canPrintMarks(){return(document.documentMode!==8);};var PrintRequest=function(options,totalPages,cancelFunc,that){this.bP=options;this.af=cancelFunc;this.aeR=0;PCCViewer.EventEmitter.extend(this);};PrintRequest.EventType={PrintPagePrepared:"PrintPagePrepared",PrintCompleted:"PrintCompleted",PrintCancelled:"PrintCancelled",PrintFailed:"PrintFailed"};PrintRequest.prototype.cancel=function(){this.af();this.trigger(PCCViewer.PrintRequest.EventType.PrintCancelled);};PrintRequest.prototype.getOptions=function(){return{range:this.bP.pages.toString(),orientation:this.bP.orientation,paperSize:this.bP.paperSize,margins:this.bP.margins,includeMarks:this.bP.includeMarks,includeAnnotations:this.bP.includeAnnotations,includeRedactions:this.bP.includeRedactions,includeComments:this.bP.includeComments,includeReasons:this.bP.includeReasons,redactionViewMode:this.bP.redactionViewMode};};PrintRequest.prototype.getPageCount=function(){return this.bP.pages.length;};PrintRequest.prototype.getPreparedCount=function(){return this.aeR;};if(Object.defineProperties){Object.defineProperties(PrintRequest.prototype,{"options":{enumerable:true,get:function(){return this.getOptions();}},"pageCount":{enumerable:true,get:function(){return this.getPageCount();}},"preparedCount":{enumerable:true,get:function(){return this.getPreparedCount();}}});}var PrintControl=function(domElement,options){var acZ=[];IPCC.J.Ye=true;options.includeAnnotations=options.includeAnnotations!=='false';options.includeRedactions=options.includeRedactions!=='false';domElement.className=domElement.className+' '+options.orientation;function xo(n){(window.parent)?window.parent.postMessage(n,'*'):window.opener.postMessage(n,'*');};function aFD(bb,HO){var kr=[];kr.push("pageNumber="+(1+bb));kr.push("index="+HO);kr.push("totalPages="+options.pages.length);return kr.join('&');};function iY(bb,HO,next){var ag={documentIdentifier:options.vsID,pageNumber:bb,viewFitType:IPCC.Web.UI.FitType.FullImage,imageHandlerUrl:options.handler,encryption:options.encryption};var jo=document.createElement('div');jo.className=options.paperSize+" ";jo.className+=options.isIE?'pageIE':options.isSafari?'pageSafari':'page';jo.id='printpage'+bb;if(options.margins==='none'){jo.className+=' nomargins';}domElement.appendChild(jo);var pv=IPCC.initializePageViewPlugin(jo,ag);pv.set_debug(false);pv.set_requireRequestsOptimize(true);acZ.push(pv);var wm=false;function GQ(){xo(aFD(bb,HO));next();};pv.add_pageOpened(function(){var bO=pv.kY(),bo=pv.jp();var vm=(options.orientation==='portrait'&&bO>bo)||(options.orientation==='landscape'&&bo>bO);if(vm){pv.vm(90);}});pv.add_pageDisplayed(function(){if(!wm){GQ();}});pv.add_textPageReady(function(){if(wm){pv.dh();GQ();}});pv.add_pageOpenFailed(function(){xo('fail');});pv.add_textExtractionFailed(function(){if(wm){xo('fail');}});if(options.redactionViewMode){if(options.redactionViewMode.toLowerCase()==="draft"){pv.om(true);}else if(options.redactionViewMode.toLowerCase()==="normal"){pv.om(false);}}if(canPrintMarks()&&(options.includeAnnotations||options.includeRedactions)){var agN='loadArt'+bb;var tf={pageIndex:bb,callbackName:agN};window[agN]=function(aY){var mP,QW,L,dq={},PJ={},yG='',mB,hb,ef,Dw='';var LC=[];aY.Cu(function(C){if(C.get_type()===IPCC.Web.UI.MarkType.HighlightText){wm=true;}if(options.includeRedactions&&C.hL()){LC.push(C);}if(options.includeAnnotations&& !C.hL()){LC.push(C);}});var adQ=new IPCC.Web.UI.ArtPage();IPCC.J.forEach(LC,function(C){C.mg(undefined);adQ.addMark(C);});ag.artPage=adQ;PJ=options.pagedConversations[bb+1];if(options.pagedConversations&&PJ&&options.includeComments==='followingPage'){mP=document.createElement('div');mP.className+='commentPage';mP.id='printcommentpage'+bb;if(options.margins==='none'){mP.className+=' nomargins';}QW='<h1>Comments for Page {{pageNumber}}</h1><hr><div class="pageConversations">{{conversationList}}</div>';for(L=0;L<PJ.length;L++){dq=PJ[L];yG+=abi(dq,bb+1);}mP.innerHTML=QW.replace('{{pageNumber}}',bb+1).replace('{{conversationList}}',yG);domElement.appendChild(mP);}hb=options.pagedReasons[bb+1];if(options.pagedReasons&&hb&&options.includeReasons==='followingPage'){mB=document.createElement('div');mB.className+='reasonPage';mB.id='printreasonpage'+bb;if(options.margins==='none'){mB.className+=' nomargins';}QW='<h1>Redaction Reasons for Page {{pageNumber}}</h1>'+'<div class="redactionReasonPageHeader"><ul><li>Date: {{date}}</li><li>Number of Redactions on this Page: {{count}}</li></div><hr>'+'<div class="pageReasons">{{reasonList}}</div>';for(ef in hb){if(hb.hasOwnProperty(ef)){Dw+=acy(ef,hb[ef]);}}mB.innerHTML=QW.replace('{{pageNumber}}',bb+1).replace('{{reasonList}}',Dw).replace('{{date}}',ahh()).replace('{{count}}',options.pagedRedactionCount[bb+1]);domElement.appendChild(mB);}pv.openPage(ag);IPCC.J.forEach(LC,function(C){C.mg(aY);});};xo(JSON.stringify(tf));}else{pv.openPage(ag);}};function abi(dq,bb){var aol='',iv='',C=dq.getMark(),gX,cC,L;switch(C.T.iJ()){case IPCC.Web.UI.MarkType.Rectangle:iv=(C.T.hL())?'Highlight Redaction ':'Rectangle Annotation';break;case IPCC.Web.UI.MarkType.Ellipse:iv='Ellipse Annotation';break;case IPCC.Web.UI.MarkType.RectangleRedaction:iv='Rectangle Redaction';break;case IPCC.Web.UI.MarkType.Line:iv=(C.nt==='None')?'Line Annotation':'Arrow Annotation';break;case IPCC.Web.UI.MarkType.Polyline:iv='Polyline Annotation';break;case IPCC.Web.UI.MarkType.Polygon:iv='Polygon Annotation';break;case IPCC.Web.UI.MarkType.Text:iv='Text Annotation';break;case IPCC.Web.UI.MarkType.Highlight:iv='Highlight Annotation';break;case IPCC.Web.UI.MarkType.Stamp:iv='Stamp Annotation';break;case IPCC.Web.UI.MarkType.HighlightText:iv='Highlight Text Annotation';break;case IPCC.Web.UI.MarkType.SignaturePath:iv='Signature Path';break;case IPCC.Web.UI.MarkType.Freehand:iv='Freehand Annotation';break;case IPCC.Web.UI.MarkType.SignatureText:iv='Signature Text';break;case IPCC.Web.UI.MarkType.TextLine:iv='Text Input Signature';break;case IPCC.Web.UI.MarkType.TextAreaSignature:iv='Text Area Signature';break;case IPCC.Web.UI.MarkType.SignatureImage:iv='Signature Image';break;case IPCC.Web.UI.MarkType.TextSelectionRedaction:iv='Text Selection Redaction';break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:iv='Image Stamp Annotation';break;case IPCC.Web.UI.MarkType.ImageStampRedaction:iv='Image Stamp Redaction';break;case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:iv='Text Hyperlink Annotation';break;case IPCC.Web.UI.MarkType.Strikethrough:iv='Strikethrough Annotation';break;default:break;}gX=dq.getComments();for(L=0;L<gX.length;L++){cC=gX[L];aol+='<li>'+aBS({text:cC.getText(),createDate:cC.oh.YM,pageNumber:bb+1})+'</li>';}return '<h3>'+iv+'</h3><ul>'+aol+'</ul>';};function aBS(cC){var iA=new Date(cC.createDate),Wv='{{month}}/{{day}}/{{year}} {{hour}}:{{minutes}}{{period}}'.replace('{{month}}',iA.getMonth()+1).replace('{{day}}',iA.getDate()).replace('{{year}}',iA.getFullYear()).replace('{{hour}}',(iA.getHours()<10?'0':'')+iA.getHours()).replace('{{minutes}}',(iA.getMinutes()<10?'0':'')+iA.getMinutes()).replace('{{period}}',iA.getHours()<12?'am':'pm');var aS=cC.text.replace(/</g,'&#60;').replace(/>/g,'&#62;').replace(/\n/g,'<br/>');return "{{comment}} - {{date}}".replace('{{comment}}',aS).replace('{{date}}',Wv);};function ahh(){var iA=new Date();return '{{month}}/{{day}}/{{year}}'.replace('{{month}}',iA.getMonth()+1).replace('{{day}}',iA.getDate()).replace('{{year}}',iA.getFullYear());};function acy(ef,pS){ef=ef.replace(/</g,'&#60;').replace(/>/g,'&#62;').replace(/\n/g,'<br/>');var aqQ=(pS>1)?'times':'time';return '<li>"{{reason}}" occurs {{count}} {{times}}</li>'.replace('{{reason}}',ef).replace('{{count}}',pS).replace('{{times}}',aqQ);};function aDl(){window.onerror=function(ev){xo('fail');};function sync(funcs,done){var counter=funcs.length;var idx=0;var next=function(){if(--counter===0)done();else funcs[idx++](next);};funcs[idx++](next);};function aEF(bb,HO){return function(next){iY(bb,HO,next);};};var funcs=[];for(var i=0;i<options.pages.length;i++){var aN= +options.pages[i]-1;funcs.push(aEF(aN,i));}sync(funcs,function(){var mP,OK='',aN,Ed='',yG='',dq,C,aoY='<h1>Comments</h1><hr>{{pageSections}}',mB,Dw='',aCl='<h1>Redaction Reasons</h1><hr>{{pageSections}}';if(options.includeComments==='documentEnd'){for(aN in options.pagedConversations){if(options.pagedConversations.hasOwnProperty(aN)){if(!mP){mP=document.createElement('div');mP.className+=' commentPage';mP.id='printpage_comments';if(options.margins==='none'){mP.className+=' nomargins';}}OK='<div class="pageConversations"><h2>Page #{{pageNumber}}</h2><hr><ol>{{conversationList}}</ol></div>';yG='';for(var L=0;L<options.pagedConversations[aN].length;L++){dq=options.pagedConversations[aN][L];C=dq.getMark();yG+=abi(dq,C.pageNumber);}Ed+=OK.replace('{{pageNumber}}',C.pageNumber).replace('{{conversationList}}',yG);if(yG.length){mP.innerHTML=aoY.replace('{{pageSections}}',Ed);domElement.appendChild(mP);}}}}if(options.includeReasons==='documentEnd'){Ed='';aoY='';OK='<div class="pageReasons"><h2>Page #{{pageNumber}}</h2><div class="redactionReasonPageHeader"><ul><li>Date: {{date}}</li><li>Number of Redactions on this Page: {{count}}</li></div><hr><ul>{{reasonList}}</ul></div>';for(aN in options.pagedReasons){if(options.pagedReasons.hasOwnProperty(aN)){if(!mB){mB=document.createElement('div');mB.className+='reasonPage';mB.id='printpage_reason';if(options.margins==='none'){mB.className+=' nomargins';}}Dw='';for(var ef in options.pagedReasons[aN]){if(options.pagedReasons[aN].hasOwnProperty(ef)){Dw+=acy(ef,options.pagedReasons[aN][ef]);}}Ed+=OK.replace('{{pageNumber}}',aN).replace('{{reasonList}}',Dw).replace('{{date}}',ahh()).replace('{{count}}',options.pagedRedactionCount[aN]);}}if(Ed.length){mB.innerHTML=aCl.replace('{{pageSections}}',Ed);domElement.appendChild(mB);}}xo('done');});};function asa(){window['extra']=function(bool,Hy){options.encryption= ! !bool;options.pagedConversations=Hy.Ix;options.pagedReasons=Hy.yU;options.pagedRedactionCount=Hy.EN;aDl();window['extra']=function(){};};xo('extra');};function asu(){var aY;IPCC.J.forEach(acZ,function(bI){aY=bI.get_artPage();if(aY){aY.removeAllMarks();}bI.dispose();aY=undefined;});};window['destroy']=asu;asa();};module.exports={PrintRequest:PrintRequest,PrintControl:PrintControl,print:print,validatePrintRange:validatePrintRange,canPrintMarks:canPrintMarks};},{}],159:[function(require,module,exports){var aBT={Draft:"Draft",Normal:"Normal"};module.exports=aBT;},{}],160:[function(require,module,exports){var Revision=function(){this.ds=0;this.vx=0;this.bg='';};Revision.prototype.getId=function(){return this.ds;};Revision.prototype.getEndPageNumber=function(){return this.vx;};Revision.prototype.getType=function(){return this.bg;};if(Object.defineProperties){Object.defineProperties(Revision.prototype,{"endPageNumber":{enumerable:true,get:function(){return this.vx;}},"id":{enumerable:true,get:function(){return this.ds;}},"type":{enumerable:true,get:function(){return this.bg;}}});}Revision.Type={ContentInserted:"ContentInserted",ContentDeleted:"ContentDeleted",PropertyChanged:"PropertyChanged",ParagraphNumberChanged:"ParagraphNumberChanged",FieldDisplayChanged:"FieldDisplayChanged",RevisionMarkedAsReconciledConflict:"RevisionMarkedAsReconciledConflict",RevisionMarkedAsConflict:"RevisionMarkedAsConflict",StyleChanged:"StyleChanged",ContentReplaced:"ContentReplaced",ParagraphPropertyChanged:"ParagraphPropertyChanged",TablePropertyChanged:"TablePropertyChanged",SectionPropertyChanged:"SectionPropertyChanged",StyleDefinitionChanged:"StyleDefinitionChanged",ContentMovedFrom:"ContentMovedFrom",ContentMovedTo:"ContentMovedTo",TableCellInserted:"TableCellInserted",TableCellDeleted:"TableCellDeleted",TableCellsMerged:"TableCellsMerged",Unknown:"Unknown"};module.exports=Revision;},{}],161:[function(require,module,exports){var Gr=function(bP){var jz=new PCCViewer.RevisionsRequest(true);function awl(bg){for(var Xe in PCCViewer.Revision.Type){if(PCCViewer.Revision.Type.hasOwnProperty(Xe)){if(Xe.toLowerCase()===bg.toLowerCase()){return PCCViewer.Revision.Type[Xe];}}}return PCCViewer.Revision.Type.Unknown;};function aCY(gJ,bf){var vp=[];if(gJ.changes&&gJ.changes.length){vp=gJ.changes.map(function(YC){var PW=new PCCViewer.Revision();PW.ds=YC.id;PW.vx=YC.endPageIndex+1;PW.bg=awl(YC.type);return PW;});}return vp;};function aDD(OG){var SB=OG?'&continueToken='+OG:'';var aoT=bP.imageHandlerUrl+'/v2/viewingSessions/'+bP.documentID;return aoT+'/revisionData?limit=100'+SB;};function aic(OG){var bp=PCCViewer.Deferred();var bA=aDD(OG);PCCViewer.Ajax.fE({url:bA,method:'GET'}).then(function eZ(aC){var cX=JSON.parse(aC.responseText);var CG=cX.continueToken;var vp=aCY(cX,jz.FZ.length);jz.FZ=jz.FZ.concat(vp);if(CG){if(vp.length){jz.trigger(PCCViewer.EventType.PartialRevisionsAvailable,{partialRevisions:vp});}setTimeout(function(){aic(CG);},cX.continueAfter||0);}else{if(vp.length){jz.trigger(PCCViewer.EventType.PartialRevisionsAvailable,{partialRevisions:vp});}jz.trigger(PCCViewer.EventType.RevisionsAvailable,{completedRevisions:jz.getRevisions()});jz.trigger(PCCViewer.EventType.RevisionsRetrievalCompleted,{completedRevisions:jz.getRevisions()});}bp.resolve();},function fM(av){var fc='RequestFailed';var dC='The request to get revisions failed.';var lM=av.response.responseText?JSON.parse(av.response.responseText):'';var iq=av.response.status;if(lM&&(iq===580||(iq===480&&lM.errorCode==='DocumentNotProvidedYet'))){fc=lM.errorCode;}jz.fc=fc;jz.dC=dC;jz.trigger(PCCViewer.EventType.RevisionsRetrievalFailed,{errorMessage:jz.getErrorMessage()});jz.trigger(PCCViewer.EventType.RevisionsRetrievalCompleted,{completedRevisions:jz.getRevisions()});bp.reject(av.error);});};this.aCv=function(){setTimeout(function(){aic();},0);return jz;};};var RevisionsRequest=function(uc){this.FZ=[];this.fc=null;this.dC=null;if(Object.defineProperties){Object.defineProperties(this,{"revisions":{configurable: ! !uc,enumerable:true,get:function(){return this.FZ;}},"errorCode":{configurable: ! !uc,enumerable:true,get:function(){return this.fc;}},"errorMessage":{configurable: ! !uc,enumerable:true,get:function(){return this.dC;}}});}PCCViewer.EventEmitter.extend(this);};RevisionsRequest.prototype.getRevisions=function(){return this.FZ;};RevisionsRequest.prototype.getErrorCode=function(){return this.fc;};RevisionsRequest.prototype.getErrorMessage=function(){return this.dC;};module.exports={RevisionsRequest:RevisionsRequest,Gr:Gr};},{}],162:[function(require,module,exports){var Fu={Pinch:"Pinch",Zoom:"Zoom",Fit:"Fit",ViewMode:"ViewMode"};module.exports=Fu;},{}],163:[function(require,module,exports){var _Search=function(){this.bv='';this.GV={};this.dI={};this.Oh=0;this.bh=new PCCViewer.SearchRequest();var V=this;this.abl=function(){var PZ=[];for(var L=0;L<V.GV.searchTerms.length;L++){var bv=V.GV.searchTerms[L];var ps=IPCC.J.PE(bv.type);var Pv;switch(ps){case 'proximity':var wj={uo:bv,dI:[],type:bv.type,highlightColor:this.Uf(bv.highlightColor),distance:bv.distance,contextPadding:bv.contextPadding};for(var x=0;x<bv.terms.length;x++){var aaf=bv.terms[x];Pv=this.akg(aaf);wj.dI=wj.dI.concat(Pv);}PZ.push(wj);break;default:Pv=this.akg(bv);PZ=PZ.concat(Pv);break;}}return PZ;};this.akg=function(bv){var eb=[];var dI={};if(bv.matchingOptions.exactPhrase===false&&bv.searchTermIsRegex===false){var zB=bv.searchTerm.split(' ');for(var bj=0;bj<zB.length;bj++){dI={};if(zB[bj].length<0){continue;}dI.searchText=zB[bj];dI.uo=bv;if(bv.matchingOptions.matchWholeWord){dI.searchTerm=this.anx(this.Cb(zB[bj]),bv.matchingOptions);}else{if(bv.matchingOptions.wildcard===true){dI.searchTerm=this.akb(this.Cb(zB[bj]),bv.matchingOptions);}else if(bv.matchingOptions.beginsWith===true||bv.matchingOptions.endsWith===true){dI.searchTerm=this.akw(this.Cb(zB[bj]),bv.matchingOptions);}else{dI.searchTerm=this.acT(zB[bj],bv.matchingOptions,false);}}dI.highlightColor=this.Uf(bv.highlightColor);eb.push(dI);}}else{dI={};dI.searchText=bv.searchTerm;dI.uo=bv;if(bv.matchingOptions.matchWholeWord){dI.searchTerm=this.anx(this.Cb(bv.searchTerm),bv.matchingOptions);}else{if(bv.matchingOptions.wildcard===true){dI.searchTerm=this.akb(this.Cb(bv.searchTerm),bv.matchingOptions);}else if(bv.matchingOptions.beginsWith===true||bv.matchingOptions.endsWith===true){dI.searchTerm=this.akw(this.Cb(bv.searchTerm),bv.matchingOptions);}else{dI.searchTerm=this.acT(bv.searchTerm,bv.matchingOptions,bv.searchTermIsRegex);}}dI.highlightColor=this.Uf(bv.highlightColor);eb.push(dI);}return eb;};this.anx=function(pN,wr){var Fq=new RegExp('\\b'+pN+'\\b',this.FF(wr.matchCase));return Fq;};this.akw=function(pN,wr){if(wr.beginsWith){return new RegExp("\\b"+pN+'(\\w*)',this.FF(wr.matchCase));}if(wr.endsWith){pN=pN.replace("*","");return new RegExp('(\\w*)'+pN+"\\b",this.FF(wr.matchCase));}};this.Cb=function(pN){return pN.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");};this.akb=function(te,wr){te=te.replace(/[*]{2,}/g,'*').replace(/(\\\*){2,}/g,'\\*');if(te==='\\*'){var db=new Error('The search term must contain one or more non-wildcard characters.');db.azV=true;throw db;}var regexFlags='gim';if(wr.matchCase){regexFlags='gm';}te=te.replace(/\*/g,'\S*');te=te.replace(/\?/g,'\S');var Fq=new RegExp('(\\s|^)'+te+'(?=\\s|$)',regexFlags);return Fq;};this.afd=function(pN){return pN.replace(/\ /g,'\\s+');};this.Ta=function(pN){return pN.replace(/'/g,'[\']').replace(/"/g,'["]');};this.acT=function(PA,matchingOptions,isRegex){var mv='';if(isRegex===true){mv=PA;}else if(matchingOptions.wildcard===true){mv=PA.replace(/[-[\]{}()+,^$|#]/g,"\\$&");mv=this.afd(mv);mv=this.Ta(mv);}else if(matchingOptions.exactPhrase){mv=PA.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");mv=this.afd(mv);mv=this.Ta(mv);}else{mv=PA.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");mv=this.Ta(mv);}return new RegExp(mv,this.FF(matchingOptions.matchCase));};this.FF=function(matchCase){if(matchCase){return 'gm';}else{return 'igm';}};this.aFm=function(te){var Fq=new RegExp('\\b'+te+'\\b',V.FF());return Fq;};var ajw=["#1c86ee","#ff8c00","#9932cc","#FFBA00","#00c5cd","#ee3a8c","#4169e1","#00cd00","#6959cd","#ff4500"];this.Uf=function(dR){if(!dR){return ajw[V.Oh++ %ajw.length];}else{return dR;}};this.Wj=function(cn){if(typeof cn==='string'){cn={searchTerms:[{searchTerm:cn,highlightColor:undefined,contextPadding:25,searchTermIsRegex:false,matchingOptions:{exactPhrase:true,matchCase:false,matchWholeWord:false,beginsWith:false,endsWith:false,wildcard:false}}]};return cn;}IPCC.J.forEach(cn.searchTerms,function(bv){if(!bv.matchingOptions){bv.matchingOptions={};}var ps=IPCC.J.PE(bv.type);switch(ps){case 'proximity':IPCC.J.forEach(bv.terms,function(aaf){V.ajG(aaf);});break;default:V.ajG(bv);break;}});return cn;};this.ajG=function(bv){if(typeof bv.contextPadding==="undefined"){bv.contextPadding=25;}if(typeof bv.searchTermIsRegex==="undefined"){bv.searchTermIsRegex=false;}if(typeof bv.matchingOptions==="undefined"){bv.matchingOptions={};}if(!bv.matchingOptions.hasOwnProperty('matchCase')){bv.matchingOptions.matchCase=false;}if(!bv.matchingOptions.hasOwnProperty('exactPhrase')){bv.matchingOptions.exactPhrase=true;}if(!bv.matchingOptions.hasOwnProperty('matchWholeWord')){bv.matchingOptions.matchWholeWord=false;}if(!bv.matchingOptions.hasOwnProperty('beginsWith')){bv.matchingOptions.beginsWith=false;}if(!bv.matchingOptions.hasOwnProperty('endsWith')){bv.matchingOptions.endsWith=false;}if(!bv.matchingOptions.hasOwnProperty('wildcard')){bv.matchingOptions.wildcard=false;}if(typeof bv.highlightColor!=='undefined'){try{IPCC.aI.dR(bv.highlightColor,"selectText");}catch(e){bv.highlightColor=undefined;}}};this.ays=function(){return V.dI;};this.ahZ=function(e){V.bh.dC=e.message;V.bh.fc="1010";V.bh.wt=true;setTimeout(function(){V.bh.trigger("SearchFailed",{errorMessage:(e.message)});},10);setTimeout(function(){V.bh.trigger("SearchCompleted",{completedSearchResults:(V.sH)});},10);return V.bh;};this.wE=function(cn,ba){this.dI={};this.GV=cn;this.bv=cn;this.Oh=0;var wE=new PCCViewer.Rr();try{V.dI=this.abl();return wE.Yz(ba,V.dI,cn,V.bh);}catch(e){return V.ahZ(e);}};this.EL=function(cn,ba){this.dI={};this.GV=cn;this.bv=cn;this.Oh=0;var EL=new PCCViewer.WS();try{V.dI=this.abl();return EL.Yz(ba,V.dI,cn,V.bh);}catch(e){return V.ahZ(e);}};};_Search.prototype.zn=function(searchQuery){this.dI={};this.bh=new PCCViewer.SearchRequest();this.GV=searchQuery;this.bh.cn=searchQuery;this.bv=searchQuery;this.Oh=0;return this.bh;};var SearchTask=function(searchQuery){this.aej(searchQuery);var _search=new PCCViewer._Search();searchQuery=_search.Wj(searchQuery);this.bh=_search.zn(searchQuery);try{_search.dI=_search.abl();}catch(e){if(e.azV){throw new Error(e.message);}else{throw new Error(e.message);}}var wE=new PCCViewer.Rr();this.search=function(text){wE.sH=[];wE.ao=0;wE.dI=_search.dI;wE.aDP(text);return wE.sH;};};SearchTask.prototype.aej=function(searchQuery){if(typeof searchQuery==='string'){return;}var zi;if(searchQuery&&searchQuery.searchTerms&&Object.prototype.toString.call(searchQuery.searchTerms)==='[object Array]'){zi=searchQuery.searchTerms;}else{throw new Error('The `searchQuery` parameter is not a string, or a search terms array was not present in the search query.');}IPCC.J.forEach(zi,function(uC,L){var ps=uC.type?IPCC.J.trim(uC.type).toLowerCase():undefined;switch(ps){case 'proximity':IPCC.J.forEach(uC.terms,function(aEU,bm){if(!amg(aEU)){throw new Error("Search term index "+bm+" under Proximity search term index "+L+" does not have a valid `searchTerm` string property.");}});break;default:if(!amg(uC)){throw new Error("Search term index "+L+" does not have a valid `searchTerm` string property.");}break;}});function amg(uC){return(typeof uC.searchTerm==='string');}};module.exports={_Search:_Search,SearchTask:SearchTask};},{}],164:[function(require,module,exports){function aDk(cn){var zi=cn.map(function(bv,akj){if(bv.type==='proximity'){return{type:'proximity',distance:bv.distance,subTerms:bv.dI.map(function(aeQ){return{pattern:aeQ.searchTerm.source,caseSensitive:aeQ.uo.matchingOptions.matchCase};}),termId:akj.toString(),contextPadding:bv.contextPadding};}return{type:'simple',pattern:bv.searchTerm.source,caseSensitive:bv.uo.matchingOptions.matchCase,termId:akj.toString(),contextPadding:bv.contextPadding};});return{input:{searchTerms:zi}};};var WS=function(){var V=this;var zn,CG,akK;var Mz=[];this.zc=false;this.Am={};this.xr=[];function aEl(){var SB=CG?'&continueToken='+CG:'';return V.ba.sv+'/v2/searchTasks/'+zn.processId+'/results?limit=100'+SB;};function asv(eb){var Nz=V.Am.input.searchTerms.reduce(function(op,uC){op[uC.termId]=V.dI[uC.termId];return op;},{});return eb.map(function(av){var gm=new PCCViewer.SearchResult();if(V.dI[0].uo.matchingOptions.wildcard&&(av.text[0]===" "||av.text[0]==="\n")){av.text=av.text.substring(1);av.startIndex+=1;av.startIndexInContext+=1;}gm.lH=av.boundingRectangle;gm.ci=av.context;gm.zM=av.startIndexInContext;gm.mh=av.id;gm.dI=V.dI;gm.ab=av.lineRectangles;gm.gy=av.pageData;gm.rn=av.startIndex;gm.aS=av.text;gm.bb=av.pageIndex+1;gm.ds=av.id;gm.Ve=V.ba.get_documentIdentifier();gm.bv=Nz[av.searchTerm.termId].uo;gm.rw=Nz[av.searchTerm.termId].highlightColor;return gm;});};function qB(GZ,UG){switch(GZ){case 'failed':setTimeout(function(){V.bh.trigger(PCCViewer.EventType.SearchFailed,UG);},10);break;case 'complete':V.bh.Ty=V.xr;V.bh.wt=true;setTimeout(function(){V.bh.trigger(PCCViewer.EventType.SearchResultsAvailable,{completedSearchResults:(V.bh.getResults())});},10);break;case 'cancelled':break;}setTimeout(function(){V.bh.trigger(PCCViewer.EventType.SearchCompleted,{completedSearchResults:(V.bh.getResults())});},10);};function arW(lP){var bA=V.ba.sv+'/v2/viewingSessions/'+encodeURIComponent(V.ba.get_documentIdentifier())+'/searchTasks';function eZ(aC){var av=JSON.parse(aC.responseText);zn=av;if(Mz.length){Mz.forEach(function(wf){wf();});}Mz=[];lP();};function fM(ar){V.bh.off('SearchCancelled',V.alY);V.bh.dC='The request to create a search task failed.';var aFM=ar&&ar.response&&ar.response.status===501;var aFO=ar&&ar.response&&ar.response.status===480&&(function(aFw){try{return JSON.parse(aFw).errorCode==='FeatureDisabled';}catch(e){return false;}}(ar.response.responseText));if(aFM||aFO){V.bh.fc='ServerSearchUnavailable';V.bh.dC='Server-side search is not available.';qB('failed',{errorMessage:V.bh.dC});return;}qB('failed',{errorMessage:V.bh.dC});};PCCViewer.Ajax.fE({url:bA,method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(V.Am)}).then(eZ,fM);};function RK(lP){var bA=aEl();var jk={};if(zn.affinityToken){jk['Accusoft-Affinity-Token']=zn.affinityToken;}if(!V.zc){return;}function eZ(aC){if(!V.zc){return;}var av=JSON.parse(aC.responseText);var Vx=asv(av.results);V.xr=av.pagesWithoutText;V.bh.eb.push.apply(V.bh.eb,Vx);if(Vx.length){setTimeout(function(){IPCC.J.forEach(Vx.reduce(function(op,av){var cA=av.bb;if(!op[cA]){op[cA]=[];}op[cA].push(av);return op;},{}),function(eb,cA){V.bh.trigger('PartialSearchResultsAvailable',{partialSearchResults:eb,pagesWithoutText:V.xr});});},10);}if(av.continueToken){CG=av.continueToken;akK=av.continueAfter;lP();}else if(V.zc){qB('complete');}};function fM(av){if(!V.zc){return;}V.zc=false;V.bh.dC='The request to poll the search task failed.';V.bh.wt=true;qB('failed',{errorMessage:V.bh.dC});};PCCViewer.Ajax.fE({method:'GET',url:bA,headers:jk}).then(eZ,fM);};function aFN(){(function aFc(){setTimeout(function(){RK(aFc);},akK||0);}());};function alY(){qB('cancelled');V.zc=false;function abC(){};if(!zn){Mz.push(abC);return;}abC();};this.Yz=function(ba,dI,cn,bh){V.ba=ba;V.dI=dI;V.bh=bh;V.bh.cn=cn;V.Am=aDk(V.dI);V.zc=true;V.bh.on('SearchCancelled',alY);arW(function(){aFN();});return V.bh;};};module.exports=WS;},{}],165:[function(require,module,exports){var ObservableCollection=require('./PCCViewer.ObservableCollection');function aem(clientBB){this.top=clientBB.top;this.bottom=clientBB.bottom;this.left=clientBB.left;this.right=clientBB.right;this.width=clientBB.width||clientBB.right-clientBB.left;this.height=clientBB.height||clientBB.bottom-clientBB.top;};function vQ(x,y){this.x=x;this.y=y;this.getDistance=function(point){var x=point.x-this.x,y=point.y-this.y,d=x*x+y*y,squared=false;return squared?d:Math.sqrt(d);};this.equals=function(point){return this===point||point&&(this.x===point.x&&this.y===point.y)||false;};this.close=function(point){return this.getDistance(point)<4;};this.clone=function(){return new vQ(this.x,this.y);};};function Xd(au){return(au&&au.nodeType===1);};function OS(zG,Fc){var RG=(Fc&&IPCC.J.DY)?'m':'M';var XO=(Fc&&IPCC.J.DY)?'l':'L';return IPCC.J.map(zG,function(el,i){if(i===0){return RG+el.x+','+el.y;}else{return XO+el.x+','+el.y;}}).join('');};function alV(ci,oD,ep){return function(ar){if(IPCC.J.De&&ar.type.match('mouse')){ar.preventDefault();ar.stopPropagation();return false;}if(ar.preventDefault){ar.preventDefault();}else{ar.returnValue=false;}var x,y;if(ar.changedTouches){var gv=ar.changedTouches[0];if(ar.type==='touchstart'){oD=ar.target.getBoundingClientRect();}else if(ar.type==='touchend'){ep&&ep();return;}x=gv.clientX-oD.left;y=gv.clientY-oD.top;}else{x=ar.clientX-oD.left;y=ar.clientY-oD.top;}var bx=new vQ(x,y);ci.zG.push(bx);var ww=OS(ci.zG);if(IPCC.J.DY){ci.gu.path=ww.toLowerCase();}else{ci.gu.setAttribute('d',ww);}ep&&ep();};};function ash(points){var zY=3,dJ='',sl;var sz=(points.length<zY)?points:IPCC.J.filter(points,function(el){if(sl&&sl.close(el)){return false;}else{sl=el;return true;}});if(sz.length<zY){sz=[points[0],points[points.length-1]];}sl=undefined;if(sz.length<zY){dJ+=OS(sz);}else{dJ='M'+IPCC.J.bspline(sz);dJ=dJ.replace(/\d*\.?\d*/g,function(ai){var JR=ai.indexOf('.');if(ai.length&&JR>0){return ai.substr(0,JR+3);}else if(ai!==""){return ai;}else{return ai;}});}return dJ;};function SignatureControl(dom){var V=this;if(typeof dom==='string'){this.de=document.querySelector(dom);if(!(Xd(this.de))){throw new Error('The query selector "'+dom+'" did not match any DOM element.');}}else if(Xd(dom)){this.de=dom;}else{throw new Error('The SignatureControl target is not a valid DOM element.');}this.JT=[];this.oD=new aem(this.de.getBoundingClientRect());this.dV=IPCC.J.zs.SVG([0,0,this.oD.width,this.oD.height].join(' '));this.de.appendChild(this.dV);function CZ(ev){var gu=IPCC.J.zs.Path(undefined,{width:2000,height:2000,color:'black',thickness:4});V.dV.appendChild(gu);var ci={zG:[],gu:gu,ep:function(){V.JT.push(ci.zG);IPCC.J.removeEvent(V.de,'mousemove',Aj);IPCC.J.removeEvent(V.de,'mouseup',CB);if(IPCC.J.De){IPCC.J.removeEvent(V.de,IPCC.J.ow['move'],Aj);IPCC.J.removeEvent(V.de,IPCC.J.ow['up'],CB);}if(IPCC.J.It){IPCC.J.removeEvent(V.de,'touchmove',Aj);IPCC.J.removeEvent(V.de,'touchend',CB);}}};var Aj=alV(ci,V.oD);var CB=alV(ci,V.oD,ci.ep);Aj(ev);IPCC.J.addEvent(V.de,'mousemove',Aj);IPCC.J.addEvent(V.de,'mouseup',CB);if(IPCC.J.De){IPCC.J.addEvent(V.de,IPCC.J.ow['move'],Aj);IPCC.J.addEvent(V.de,IPCC.J.ow['up'],CB);}if(IPCC.J.It){IPCC.J.addEvent(V.de,'touchmove',Aj);IPCC.J.addEvent(V.de,'touchend',CB);}};IPCC.J.addEvent(V.de,'mousedown',CZ);if(IPCC.J.De){this.de.style['-ms-touch-action']='none';this.de.style['touch-action']='none';IPCC.J.addEvent(V.de,IPCC.J.ow['down'],CZ);}if(IPCC.J.It){IPCC.J.addEvent(V.de,'touchstart',CZ);}this.UB=function(){V.oD=new aem(V.de.getBoundingClientRect());V.dV.setAttribute('viewBox',[0,0,V.oD.width,V.oD.height].join(' '));};IPCC.J.addEvent(window,'resize',this.UB);this.aiu=function(){IPCC.J.removeEvent(window,'resize',V.UB);IPCC.J.removeEvent(V.de,'mousedown',CZ);if(IPCC.J.De){IPCC.J.removeEvent(V.de,IPCC.J.ow['down'],CZ);}if(IPCC.J.It){IPCC.J.removeEvent(V.de,'touchstart',CZ);}while(V.de.firstChild){V.de.removeChild(V.de.firstChild);}};};SignatureControl.prototype.done=function(){var lJ,mL,oW,mI,ww='M0,0',aaz=this;IPCC.J.forEach(aaz.JT,function(ox){IPCC.J.forEach(ox,function(p){if(lJ===undefined||lJ>p.x){lJ=p.x;}if(mL===undefined||mL>p.y){mL=p.y;}if(oW===undefined||oW<p.x){oW=p.x;}if(mI===undefined||mI<p.y){mI=p.y;}});});IPCC.J.forEach(aaz.JT,function(ox){var awV=IPCC.J.map(ox,function(p){return new vQ(p.x-lJ,p.y-mL);});ww+=ash(awV);});this.aiu();return{type:'path',path:ww,width:(oW-lJ)||0,height:(mI-mL)||0};};SignatureControl.prototype.resize=function(){this.UB();return this;};SignatureControl.prototype.clear=function(){var svg=this.dV;while(svg&&svg.firstChild){svg.removeChild(svg.firstChild);}this.JT=[];return this;};SignatureControl.prototype.undo=function(){if(this.dV.lastChild){this.dV.removeChild(this.dV.lastChild);}this.JT.pop();return this;};SignatureControl.prototype.cancel=function(){this.aiu();return this;};var Signatures=new ObservableCollection();var SignatureDisplay=function(domElement,signature){function handleSignatureAsPath(){if(!signature.path||signature.path.match(/[^MLC0-9.,\s]/)){throw new Error('A valid path is required in the signature object.');}var ro=IPCC.J.abf(signature.path);var dV=IPCC.J.zs.SVG([0,0,ro.width,ro.height].join(' '));var gu=IPCC.J.zs.Path(signature.path,{width:ro.width,height:ro.height,color:'black',thickness:4});if(IPCC.J.DY){var axE=(ro.height/ro.width)*100;dV.style.width=gu.style.width='100%';dV.style.height=gu.style.height='0px';dV.style.paddingBottom=gu.style.paddingBottom=axE+'%';}else{dV.style.width='100%';dV.style.maxHeight='100%';dV.setAttribute('preserveAspectRatio','xMinYMin meet');}dV.appendChild(gu);domElement.appendChild(dV);return{width:ro.width,height:ro.height,clear:function(){domElement.removeChild(dV);}};};function handleSignatureAsText(){if(!signature.text||typeof signature.text!=='string'){throw new Error('The signature text is not a valid string.');}var jo=document.createElement('div');var nm=document.createTextNode(signature.text);var jB=(typeof signature.fontName==='string')?signature.fontName:'serif';jo.appendChild(nm);jo.style.textAlign='center';jo.style.fontFamily='"'+jB+'", cursive';jo.style.fontSize='2.5em';jo.style.overflow='hidden';domElement.appendChild(jo);var ro=IPCC.J.tS(signature.text,jB);return{width:ro.width,height:ro.height,clear:function(){domElement.removeChild(jo);}};};if(!Xd(domElement)){throw new Error('The `domElement` parameter is not a valid HTMLElement.');}else if(!signature){throw new Error('The `signature` parameter is required.');}else if(signature.path){return handleSignatureAsPath();}else if(signature.text){return handleSignatureAsText();}else{throw new Error('The signature provided does not have a known type.');}};module.exports={SignatureControl:function(dom){return new SignatureControl(dom);},SignatureDisplay:SignatureDisplay,Signatures:Signatures};},{"./PCCViewer.ObservableCollection":155}],166:[function(require,module,exports){"use strict";var IPCC=require('../IPCC/IPCC');var rz=require('./PCCViewer.Helper');var Print=require('./PCCViewer.Print');var cU=require('./PCCViewer.MarkDeserializer');var eF=require('./PCCViewer.MarkSerializer');function SingleSessionViewerControl(element,viewerControlFacade,options){if(!(this instanceof SingleSessionViewerControl)){return new SingleSessionViewerControl(element,viewerControlFacade,options);}if(!IPCC.J.uj(element)){throw new Error("The 'element' argument is required.");}if(!options.documentID){throw new Error("A valid value for 'options.documentID' is required");}if(!options.imageHandlerUrl){throw new Error("A valid value for 'options.imageHandlerUrl' is required");}var V=this;this.YU=viewerControlFacade;this.ac=new PCCViewer.tq(viewerControlFacade);IPCC.J.Cz(element);var jJ=document.createElement('div');jJ.className='pccViewerControl';jJ.id='pccViewerControl-'+IPCC.Bm();element.appendChild(jJ);this.cB=jJ;this.eD=element;var ve=document.createElement('div');ve.className='pccPageListLoading';jJ.appendChild(ve);this.ve=ve;this.qE=false;this.bP=rz.sq({},SingleSessionViewerControl.Cl,options);this.bP.language=rz.sq({},SingleSessionViewerControl.aBC,(options.language?options.language:{}));if(options.language){PCCViewer.Language.initializeData(options.language);}if(this.bP.pageLayout.toLowerCase()==="vertical"){this.bP.pageLayout=IPCC.PageLayout.VerticalScrollDirection;}else if(this.bP.pageLayout.toLowerCase()==="horizontal"){this.bP.pageLayout=IPCC.PageLayout.HorizontalScrollDirection;}else{throw new Error("The value of 'options.pageLayout' is invalid.");}if(this.bP.viewMode.toLowerCase()==="document"){this.bP.viewMode=IPCC.ViewMode.Document;}else if(this.bP.viewMode.toLowerCase()==="equalwidthpages"){this.bP.viewMode=IPCC.ViewMode.EqualWidthPages;}else if(this.bP.viewMode.toLowerCase()==="equalfitpages"){this.bP.viewMode=IPCC.ViewMode.EqualFitPages;}else if(this.bP.viewMode.toLowerCase()==="singlepage"){this.bP.viewMode=IPCC.ViewMode.SinglePage;}else{throw new Error("The value of 'options.viewMode' is invalid.");}function isValidSearchMethodType(){return-1<['auto','server','client'].indexOf(V.bP.searchMethodType.toLowerCase());};if(!isValidSearchMethodType()){throw new Error("The value of 'options.searchMethodType' should be 'auto', 'server', or 'client'.");}if(isNaN(this.bP.searchMethodPageCountThreshold)&&(typeof this.bP.searchMethodPageCountThreshold!=='number')&&this.bP.searchMethodPageCountThreshold<=1){throw new Error("The value of 'options.searchMethodPageCountThreshold' must be a number greater than 1.");}if(this.bP.redactionViewMode){if(this.bP.redactionViewMode.toLowerCase()==="draft"){this.bP.redactionViewMode=PCCViewer.RedactionViewMode.Draft;}else if(this.bP.redactionViewMode.toLowerCase()==="normal"){this.bP.redactionViewMode=PCCViewer.RedactionViewMode.Normal;}}else{this.bP.redactionViewMode=PCCViewer.RedactionViewMode.Normal;}var iS=this.bP.pageRotation%360;if(iS!==0){var yf=[90,180,270,-90,-180,-270];if(Array.prototype.indexOf){if(!iS||yf.indexOf(iS)=== -1){throw new Error("The value of 'options.pageRotation' is invalid.");}}else{if(!iS||IPCC.Web.lw(yf,iS)=== -1){throw new Error("The value of 'options.pageRotation' is invalid.");}}}this.bP.pageRotation=iS;if(this.bP.markHandleMode.toLowerCase()==="hidesidehandleswhenclose"){this.bP.markHandleMode=IPCC.Web.UI.MarkHandleMode.HideSideHandlesWhenClose;}else if(this.bP.markHandleMode.toLowerCase()==="hidecornerhandleswhenclose"){this.bP.markHandleMode=IPCC.Web.UI.MarkHandleMode.HideCornerHandlesWhenClose;}else{throw new Error("The value of 'options.markHandleMode' is invalid.");}if(isNaN(this.bP.serviceResponseTimeout)||typeof this.bP.serviceResponseTimeout!=='number'||this.bP.serviceResponseTimeout<0){throw new Error("The value of 'options.serviceResponseTimeout' is invalid.");}if(typeof this.bP.debug!=='boolean'){throw new Error("The value of 'options.debug' is invalid.");}if(typeof this.bP.viewerAssetsPath!=='string'){throw new Error("The value of 'options.viewerAssetsPath' is invalid.");}if(typeof this.bP.enableMultipleRedactionReasons!=='boolean'){throw new Error("The value of 'options.enableMultipleRedactionReasons' is invalid.");}this.iV={};this.bA="";this.eP=1;this.anh=1;this.abW=0;this.mj=1;this.bS=undefined;this.Wm=new PCCViewer.Deferred();this.ta=this.Wm.getPromise();this.fF=false;this.ba=undefined;this.Pr=0;this.dB=undefined;this.bK=PCCViewer.MouseTools.getMouseTool("AccusoftPanAndEdit");this.mi=false;this.yX=false;this.EE=false;this.Dg=[];this.Qs=new PCCViewer.Deferred();this.azZ=this.Qs.getPromise();this.vT=[];this.cf={};this.Fl=[];this.Fb=[];this.aE=null;this.Ku={};this.gE=null;this.mp=new PCCViewer.MarkupLayerCollection(this.YU);this.An=new PCCViewer.MarkupLayer(this.YU);this.mp.addItem(this.An);this.wl=true;setTimeout(function(){V.ais(jJ,V.bP);},0);this.xm=null;this.bh=null;this.Ab=false;this.Jv= -1;this.FX={};this.adG=false;this.aGi=this.bP.printTemplate||(this.bP.template?this.bP.template.print:"");this.kh=null;this.xQ=null;this.na=function(dq,fN,alf){var cE=document.createElement('div'),fB=cE.style;fB.position='absolute';if(fN.isSelected){fB.backgroundColor='white';}else{fB.backgroundColor='lightgray';}fB.left='10px';fB.right='0';fB.textAlign='left';IPCC.J.forEach(dq.getComments(),function(nA,L){var Tj=document.createElement('div'),Qq=Tj.style;Qq.position='relative';Qq.padding='5px';Qq.border='1px solid gray';if(L>0){Qq.borderTop='none';}Tj.appendChild(document.createTextNode(nA.getText()));cE.appendChild(Tj);});return cE;};return V;};SingleSessionViewerControl.Cl={encryption:false,viewMode:"Document",debug:false,pageLayout:"Vertical",resourcePath:"img",serviceResponseTimeout:60*1000,printTemplate:"",pageRotation:0,markHandleMode:"HideSideHandlesWhenClose",enableMultipleRedactionReasons:false,debugErrorLevel:IPCC.Web.UI.DebugErrorLevel.Detailed,maxPrefetch:3,displayPagesWhenScrolling:true,maxOutOfViewDisplay:0,scrollDisplayThreshold:0.5,requireRequestsOptimize:true,loadingContent:"",redactionViewMode:"Normal",searchMethodType:'auto',searchMethodPageCountThreshold:80,viewerAssetsPath:'viewer-assets'};SingleSessionViewerControl.aBC={pageLoadFailed:"Page Load Failed",pageLoadFailedPassword:"Page Load Failed - Password Required",pageLoadFailedRetry:"Retry"};SingleSessionViewerControl.prototype.ais=function(element,options){if(this.qE){return;}var V=this;var ZV=function(){if(V.bP.viewMode===IPCC.ViewMode.SinglePage||V.qE){return;}var api=V.bS.get_pageNodeId(V.getPageNumber()-1);var bB=document.getElementById(api);var So=V.cB.childNodes[0].childNodes[0].childNodes[0].childNodes;if(!bB){return;}IPCC.J.forEach(So,function(jm){if(bB!==jm){if(document.documentMode===8&&jm.style.outline){jm.style.outline='';}else if(jm.style.boxShadow){jm.style.boxShadow='';}}});if(document.documentMode===8){bB.style.outline='2px solid #aaa';}else{bB.style.boxShadow='0 0 4px 1px rgba(0,0,0,.4)';}};function arp(){var bp=new PCCViewer.Deferred();function showNagDialog(delaySecondsRemaining){var mA=document.createElement('div'),Cw=document.createElement('div'),UH=function(){mA.classList.add('open');},NS=function(){if(mA.parentNode!==null){mA.parentNode.removeChild(mA);}};Cw.innerHTML='<h3>Evaluation Mode</h3>'+'<p>Please note that PrizmDoc Viewer is running in evaluation mode with a fixed feature set. <b>Viewing is artificially delayed by about 10 seconds</b> and all pages will be watermarked.</p>'+'<p>To test all features without restriction, <a target="_blank" rel="noopener noreferrer" href="https://www.accusoft.com/contact-us/?product=prizmdoc-viewer">contact us</a> to discuss our 30-day full-featured trial.</p>';var agm=document.createElement('p');Cw.appendChild(agm);function updateRemainingSeconds(){agm.innerText='Please wait '+delaySecondsRemaining+' seconds...';};updateRemainingSeconds();mA.className='pccPageListNagModal';mA.appendChild(Cw);V.cB.appendChild(mA);UH();var intervalId=setInterval(function(){delaySecondsRemaining--;if(delaySecondsRemaining>0){updateRemainingSeconds();}else{NS();clearInterval(intervalId);}},1000);};function eZ(aC){if(aC.status===200){var av=JSON.parse(aC.responseText);if(av.delayEnabled){showNagDialog(av.delaySecondsRemaining);}}};function fM(aC){bp.reject(new PCCViewer.Error("AjaxError","The call to get viewing session restrictions failed."));};PCCViewer.Ajax.fE({method:'GET',url:V.bP.imageHandlerUrl+'/v2/ViewingSessions/'+V.bP.documentID+'/restrictions',headers:{'Content-Type':'application/json'}}).then(eZ,fM);};var akY=function(){if(V.ve.parentNode){V.ve.parentNode.removeChild(V.ve);}V.bS.remove_pageOpenFailed(abj);V.bS.remove_pageDisplayed(akY);var aO=arguments[1].pageIndex;setTimeout(function(){V.ac.trigger("PageDisplayed",{pageNumber:(aO+1)});ZV();},10);if(aO!==0){return;}function eZ(aC){if(V.qE){return;}var av;if(aC.status===200){av=JSON.parse(aC.responseText);if(av.pageCountConfidence<100){var bA;if(!(/^[\x00-\x7F]*$/.test(qf))){bA=V.bP.imageHandlerUrl+'/Document/q/Attributes?DocumentID=e'+qf+'&DesiredPageCountConfidence=100';}else{bA=V.bP.imageHandlerUrl+'/Document/q/Attributes?DocumentID=u'+encodeURIComponent(V.bP.documentID)+'&DesiredPageCountConfidence=100';}PCCViewer.Ajax.fE({method:'GET',url:bA,headers:{'Content-Type':'application/json'}}).then(eZ,fM);V.eP=av.pageCount;V.ba.eP=av.pageCount;V.EE=true;setTimeout(function(){V.ac.trigger("EstimatedPageCountReady",{pageCount:av.pageCount});},10);acm();}else{if(V.eP>1){V.ba.eP=av.pageCount;setTimeout(function(){var L;if(av.pageCount<V.eP){for(L=V.eP-1;L>=av.pageCount;L--){V.dB.removePage(L);}}else if(av.pageCount>V.eP){for(L=V.eP;L<av.pageCount;L++){var VJ=new IPCC.Web.UI.ImGearPage({pageNumber:L});V.dB.addPage(VJ);}}V.eP=av.pageCount;if(V.fF===true){V.mi=true;V.yX=true;setTimeout(function(){V.ac.trigger("PageCountReady",{pageCount:av.pageCount});},30);}},30);}else{V.eP=av.pageCount;V.ba.eP=av.pageCount;if(V.fF===true){acm(function(){V.mi=true;V.yX=true;setTimeout(function(){V.ac.trigger("PageCountReady",{pageCount:av.pageCount});},0);});}}}}};function fM(av){if(V.qE){return;}var XE="None",ach,XU;var afk=av.response.getResponseHeader('Accusoft-Status-Message');if(afk){XE=afk;XU=av.response.getResponseHeader('Accusoft-Status-Number');if(IPCC.Web.yE(XU)){ach=parseInt(XU,10);}}else if(av.response.statusText){XE=av.response.statusText;}setTimeout(function(){V.ac.trigger("PageLoadFailed",{statusCode:av.response.status,errorMessage:XE,accusoftErrorNumber:ach});},1);throw("Unable to obtain document information from the server");};var qf=IPCC.hE.sf(V.bP.documentID);if(!qf||qf===""){throw("Invalid encoded Identifier");}if(!(/^[\x00-\x7F]*$/.test(qf))){V.bA=V.bP.imageHandlerUrl+'/Document/q/Attributes?DocumentID=e'+qf+'&DesiredPageCountConfidence=50';}else{V.bA=V.bP.imageHandlerUrl+'/Document/q/Attributes?DocumentID=u'+encodeURIComponent(V.bP.documentID)+'&DesiredPageCountConfidence=50';}PCCViewer.Ajax.fE({method:'GET',url:V.bA,headers:{'Content-Type':'application/json'}}).then(eZ,fM);};function acm(qO){qO=qO||function(){};var akH=V.eP;function afA(){V.bS.remove_allPagesAdded(afA);qO();};if(akH>1){V.bS.add_allPagesAdded(afA);if(!V.aar){V.bS.add_currentPageChanged(function(){if(arguments.length<2){throw("Controls currentPageChanged event did not provide any expected information");}var di=arguments[1];setTimeout(function(){V.ac.trigger('PageChanged',{pageNumber:di.pageIndex+1});ZV();},0);});V.bS.add_pageDisplayed(function(){if(arguments.length<2){throw("Controls pageDisplayed event did not provide any expected information");}var di=arguments[1];if(V.kh){V.kh();V.kh=null;if(V.gE){V.gE.resolve();}V.gE=null;}setTimeout(function(){V.ac.trigger('PageDisplayed',{pageNumber:di.pageIndex+1});ZV();},0);setTimeout(function(){V.requestPageText(di.pageIndex+1).then(function Eg(){V.WO(di.pageIndex+1,V.Jv);});},10);});V.bS.add_pageOpenFailed(function(){agD(arguments);});V.aar=true;}for(var L=V.Pr;L<akH;L++){V.dB.addPage(new IPCC.Web.UI.ImGearPage({pageNumber:L}));V.Pr++;}}else{qO();}};var aDF=function(di){var bB=document.getElementById(di.pageNodeID),au=document.createElement('div'),zX=document.createElement('button'),aea='pccPageLoadFailRetry'+di.pageIndex,abx=function(){V.bS.NT(di.pageIndex);},arZ=PCCViewer.Language.data.pageLoadFailed,arv=PCCViewer.Language.getValue("pageLoadFailedPassword"),asz=PCCViewer.Language.data.pageLoadFailedRetry,aEO=di.exception.statusCode===480&&di.exception.customErrorCode===4001;if(bB===null){return;}zX.id=aea;zX.innerHTML=asz;au.className='pccPageLoadFail';if(aEO){au.innerHTML=arv+'<br>';bB.appendChild(au);}else{au.innerHTML=arZ+'<br>';au.appendChild(zX);bB.appendChild(au);zX=document.getElementById(aea);if(!zX.addEventListener){zX.attachEvent('onclick',abx);}else{zX.addEventListener('click',abx,false);}}};function agD(BW){if(BW.length<2){throw("controls PageOpenFailed event did not provide any expected information");}var aeb,afu,di=BW[1];if(BW[1].exception.customErrorCode!==undefined){afu=BW[1].exception.customErrorCode;}if(BW[1].exception.message!==undefined){aeb=BW[1].exception.message;}setTimeout(function(){V.ac.trigger('PageLoadFailed',{statusCode:di.exception.statusCode,pageNumber:di.pageIndex+1,errorMessage:aeb,accusoftErrorNumber:afu});aDF(di);},0);};function apx(){if(V.bS&&typeof V.bS.dispose==="function"){V.bS.dispose();}V.bA="";V.bS=undefined;while(V.cB.firstChild){V.cB.removeChild(V.cB.firstChild);}};function aHd(afe){var bp=new PCCViewer.Deferred();if(typeof afe==="string"){PCCViewer.Ajax.fE({url:V.bP.imageHandlerUrl+'/ViewingSession/u'+V.bP.documentID+'/Replacement',body:JSON.stringify({password:afe}),method:'POST',headers:{'Content-Type':'application/json;charset=utf-8'}}).then(function aGN(aC){var result=JSON.parse(aC.responseText);var akc=result.viewingSessionId;V.bP.documentID=akc;apx();V.ais(V.cB,V.bP);bp.resolve(akc);},function aHZ(err){bp.reject(new PCCViewer.Error("AjaxError","The call to replace the viewing session failed."));});}else{bp.reject(new PCCViewer.Error("InvalidArgument","The value of the 'password' parameter must be a string."));}return bp.getPromise();};function abj(){V.bS.remove_pageOpenFailed(abj);agD(arguments);};var aGI=function(aH,F){V.tu=true;var Xi={width:F.width,height:F.height,pageNumber:F.pageNumber};V.ac.trigger("PageOpening",Xi);};function aco(){V.Wm.resolve(V.bS);V.bS.remove_pageOpened(aco);V.fF=true;var aj=V;setTimeout(function(){V.ac.trigger("ViewerReady",{});if(aj.mi===true&&aj.yX===false){aj.yX=true;setTimeout(function(){V.ac.trigger("PageCountReady",{pageCount:aj.getPageCount()});},10);}},10);V.setCurrentMouseTool("AccusoftPanAndEdit");};var arF=function(aH,F){if(F.containsText===true){V.Qs.resolve(true);}var Ax= -1;if(Array.prototype.indexOf){Ax=(V.vT.indexOf(F.pageIndex)>=0);}else{Ax=(IPCC.Web.lw(V.vT,F.pageIndex)>=0);}if(Ax===false){V.vT.push(F.pageIndex);if(V.vT.length===V.eP){V.Qs.resolve(false);}}setTimeout(function(){V.ac.trigger("PageTextReady",{pageNumber:F.pageIndex+1});},0);};var ask=function(aH,F){var Ax= -1;if(Array.prototype.indexOf){Ax=(V.vT.indexOf(F.pageIndex)>=0);}else{Ax=(IPCC.Web.lw(V.vT,F.pageIndex)>=0);}if(Ax===false){V.vT.push(F.pageIndex);if(V.vT.length===V.eP){V.Qs.resolve(false);}}};function aFP(sender,eventArgs){if(!eventArgs.text||(eventArgs.text.length===0)){return;}var ki=[];for(var i=0;i<eventArgs.pageNumbers.length;i++){ki.push(eventArgs.pageNumbers[i]+1);}var fV=[],uU= -eventArgs.startIndex,bf,dj,ji,ab,j,k;for(j=0;j<ki.length;j++){ji=V.dB.iY(ki[j]-1).dr().gs();uU+=ji.ej();bf=0;if(j===0){bf=eventArgs.startIndex;}if(uU>=eventArgs.text.length){dj=uU-eventArgs.text.length-1;}else{dj=ji.ej()-1;}ab=IPCC.J.XV(ji,bf,dj);for(k=0;k<ab.length;k++){fV.push({x:ab[k].x,y:ab[k].y,width:ab[k].width,height:ab[k].height,pageNumber:ki[j]});}}V.aE={pageNumber:ki[0],length:eventArgs.text.length,text:eventArgs.text,startIndex:eventArgs.startIndex,rectangles:fV};var C,akC={selectedText:eventArgs.text,pageNumbers:ki,clientX:eventArgs.clientX,clientY:eventArgs.clientY,handleClientX:eventArgs.handleClientX,handleClientY:eventArgs.handleClientY,textSelection:V.aE};function aDr(){var Hf=V.lU;V.afY=true;V.lU=function(sender,args){V.lU=Hf;setTimeout(function(){V.ac.trigger(PCCViewer.EventType.MarkCreated,{mark:C,pageNumber:ki[0],clientX:eventArgs.clientX,clientY:eventArgs.clientY});},0);};};if(eventArgs.previousFirstMark){C=V.cf[eventArgs.previousFirstMark.get_markID()];V.bS.remove_markRemoved(V.Dh);V.bS.remove_markSelectionChanged(V.DO);if(eventArgs.pageNumbers[0]!==eventArgs.previousFirstMark.aO){var aGj=C.T.abA;var SK;if(C.getReason){SK=C.T.get_text();}var SU;if(C.getFillColor){SU=C.T.get_fillColor();}var Sr;if(C.getColor){Sr=C.T.get_lineColor();}var TZ;if(C.getThickness){TZ=C.T.get_lineWidth();}var Sz;if(C.getHref){Sz=C.T.get_href();}var aGB=new PCCViewer.Conversation(C);var aY=V.bS.gO(V.dB.getPage(C.T.aO));aY.removeMark(C.T);for(var L=C.ad.length-1;L>=0;L--){var mX=C.ad[L];aY=V.bS.gO(V.dB.getPage(mX.aO));aY.removeMark(mX);C.ad.splice(L,1);}C.T=new IPCC.Web.UI.Mark(eventArgs.previousFirstMark.get_type());C.T.aO=eventArgs.pageNumbers[0];C.bb=eventArgs.pageNumbers[0]+1;C.T.kJ=true;C.T.abA=aGj;var Hf=V.lU;V.lU=null;V.bS.remove_markChanged(V.np);aY=V.bS.gO(V.dB.getPage(C.T.aO));aY.addMark(C.T);if(SK){C.T.set_text(SK);}if(SU){C.T.set_fillColor(SU);}if(Sr){C.T.set_lineColor(Sr);}if(TZ){C.T.set_lineWidth(TZ);}if(Sz){C.T.set_href(Sz);}C.dq=new PCCViewer.Conversation(C);PCCViewer.Conversation.qs(aGB,C.dq);V.bS.add_markChanged(V.np);V.lU=Hf;}C.T.set_selected(true);C.T.set_visible(true);C.setPosition({startIndex:eventArgs.startIndex,length:eventArgs.text.length});V.bS.add_markRemoved(V.Dh);V.bS.add_markSelectionChanged(V.DO);V.ph(C,eventArgs.pageNumbers[0]);return;}var zN=null;switch(eventArgs.mouseTool){case IPCC.Web.UI.MouseTool.CreateHighlightTextMark:zN='HighlightAnnotation';break;case IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction:zN='TextSelectionRedaction';break;case IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark:zN='TextHyperlinkAnnotation';break;case IPCC.Web.UI.MouseTool.CreateStrikethroughMark:zN='StrikethroughAnnotation';break;case IPCC.Web.UI.MouseTool.SelectText:ats(eventArgs.text);V.Ku[ki[0]]='selectText';break;}var bK=PCCViewer.MouseTools.getMouseTool(V.getCurrentMouseTool());var ak=(bK&&bK.getTemplateMark)?bK.getTemplateMark():undefined;var auA=ak?ak.getType():"";if(zN){aDr();V.ac.trigger(PCCViewer.EventType.TextSelected,akC);C=V.addMark(ki[0],zN);if(V.wl){V.An.addMarks(C);}C.T.kJ=true;C.setPosition({startIndex:eventArgs.startIndex,length:eventArgs.text.length});if(auA===zN){if(ak.getFillColor){C.setFillColor(ak.getFillColor());}if(ak.getReason&& !C.oR){C.setReason(ak.getReason());}if(ak.getReasons&&C.oR){C.setReasons(ak.getReasons());}if(ak.getHref){C.setHref(ak.getHref());}if(ak.getColor){C.setColor(ak.getColor());}if(ak.getThickness){C.setThickness(ak.getThickness());}PCCViewer.Data.oX(ak,C);}return;}setTimeout(function(){V.ac.trigger(PCCViewer.EventType.TextSelected,akC);},0);};function aqO(){var bB=V.cB,au=document.createElement('div');au.className='pccCopyText';bB.appendChild(au);V.Ju=au;};function ats(aS){var nm,aFu=aS.split('\n'),IR=document.createDocumentFragment(),DS,ir;nm=document.createTextNode(aS);IR.appendChild(nm);IPCC.J.Cz(V.Ju);V.Ju.appendChild(IR);if(document.body.createTextRange){DS=document.body.createTextRange();DS.moveToElementText(V.Ju);DS.select();}else if(window.getSelection){ir=window.getSelection();DS=document.createRange();DS.selectNodeContents(V.Ju);ir.removeAllRanges();ir.addRange(DS);}};this.ba=new IPCC.Web.UI.ImGearDocument({documentIdentifier:this.bP.documentID,imageServicePath:this.bP.imageHandlerUrl});this.ba.set_encryption(this.bP.encryption||false);var VJ=new IPCC.Web.UI.ImGearPage({pageNumber:0});this.ba.get_pages().addPage(VJ);this.dB=this.ba.get_pages();this.bS=IPCC.initializePageListPlugin(element,options);arp();this.bS.get_documents().addDocument(this.ba);this.Pr=1;this.bS.add_pageDisplayed(akY);this.bS.add_pageOpenFailed(abj);this.bS.add_pageOpening(aGI);this.bS.add_pageOpened(aco);this.bS.add_textPageReady(arF);this.bS.add_textExtractionFailed(ask);this.bS.set_conversationDOMFactory(function(T,fN,alf){var C=V.cf[T.get_markID()];if(C){return V.na(C.getConversation(),fN,alf);}});IPCC.J.are(element,function(FC){if(!FC&&IPCC.J.Af!=='svg'){console.warn('PrizmDoc cannot use inline font. Enable remote fonts in your browser for faster document rendering.');if(!V.fF){IPCC.J.Af='svg';return;}else if(V.mi){IPCC.J.Af='svg';V.bS.disposeDisplayedPages();V.bS.displayAll();}else{var nd=function(){V.ac.off(PCCViewer.EventType.PageCountReady,nd);IPCC.J.Af='svg';V.bS.disposeDisplayedPages();V.bS.displayAll();};V.ac.on(PCCViewer.EventType.PageCountReady,nd);}}});aqO();this.bS.add_selectTextMouseToolCompleted(aFP);this.bS.add_propertyChanged(function(rA,dQ){var proprtyName=dQ.aAu();if(proprtyName==="mouseTool"){setTimeout(function(){V.ac.trigger(PCCViewer.EventType.MouseToolChanged,{mouseToolName:V.bK.getName()});},0);}});this.bS.add_markAdded(function(sender,eventArgs){if((eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.HighlightText||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.Strikethrough||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation)&&V.cf[eventArgs.mark.get_markID()]===undefined&&eventArgs.mark.aX!==undefined){V.ph(eventArgs.mark,eventArgs.pageIndex);}if(V.lU){var bC=eventArgs.mark.get_type();if(bC!==IPCC.Web.UI.MarkType.Highlight&& !(bC===IPCC.Web.UI.MarkType.RectangleRedaction&&eventArgs.mark.aX!==undefined)){V.lU(sender,eventArgs);}}});this.bS.add_markCreating(function(sender,eventArgs){if(V.Fp){V.Fp(sender,eventArgs);}});this.bS.MR(function(sender,eventArgs){var FW=0;var xq=0;var adl=0;var uu=0;var uI=0;var NQ=0;var arK=V.bK.getName().toLowerCase(),ast=V.bK.getType();if(ast===PCCViewer.MouseTool.Type.PlaceSignature){var bK=V.bK;var ak=bK.getTemplateMark(),ld=ak.getSignature(),abg=ak.getRectangle(),C,h={};if(!ld){return;}V.requestPageAttributes(eventArgs.pageIndex+1).then(function(attributes){var uM;if(attributes.width>0){xq=abg.width||(attributes.width/5);}if(ld.path&&ld.path.length>0){uM=IPCC.J.abf(ld.path);h={x:0,y:0,width:uM.width,height:uM.height};C=V.addMark(eventArgs.pageIndex+1,PCCViewer.Mark.Type.FreehandSignature);C.setPath(ld.path);C.setThickness(ld.thickness||4);}if(ld.text&&ld.text.length){uM=IPCC.J.tS(ld.text,ld.fontName);C=V.addMark(eventArgs.pageIndex+1,PCCViewer.Mark.Type.TextSignature);h={x:0,y:0,width:uM.width,height:uM.height};C.setText(ld.text);C.setFontName(ld.fontName);}adl=(h.width/xq);FW=abg.height||(h.height/adl);uu=(eventArgs.imagePoint.x-(xq/2));uI=(eventArgs.imagePoint.y-(FW/2));if(uu<=0){uu=0;}if(uI<=0){uI=0;}if((uu+xq)>=attributes.width){NQ=(uu+xq)-attributes.width;uu=uu-NQ;}if((uI+FW)>=attributes.height){NQ=(uI+FW)-attributes.height;uI=uI-NQ;}h={x:uu,y:uI,width:xq,height:FW};C.setRectangle({x:uu,y:uI,width:xq,height:FW});PCCViewer.Data.oX(ak,C);PCCViewer.Conversation.qs(ak.getConversation(),C.getConversation());});V.setCurrentMouseTool(arK);}});function MouseEvent(ar){var V=this;for(var i in ar){if(i){V[i]=ar[i];}}};this.bS.NC(function(sender,eventArgs){var aE=null,gm=null,C=null,gd=null,wC=false,Nk=eventArgs.upTarget.type,Mk=false;if(eventArgs.domEvent.ctrlKey===true||eventArgs.domEvent.shiftKey===true){Mk=true;}if(eventArgs.upTarget.type==='page'&&eventArgs.downTarget.type==='page'&&eventArgs.upTarget.pageIndex===eventArgs.downTarget.pageIndex||eventArgs.upTarget.type==='comments'&&eventArgs.downTarget.element===eventArgs.upTarget.element){wC=true;if(eventArgs.upTarget.type==='page'&&eventArgs.downTarget.type==='page'&&Mk===false){V.deselectAllMarks();}}else if(eventArgs.upMark&&typeof eventArgs.downMark!=='undefined'){if((eventArgs.upMark.get_type()===IPCC.Web.UI.MarkType.DocumentHyperlink)&&(eventArgs.upMark===eventArgs.downMark)){gd=V.avB(eventArgs.upMark);wC=gd!==null;Nk="documentHyperlink";}else{C=V.cf[eventArgs.upMark.get_markID()];if(C===undefined){for(var iw in V.cf){if(V.cf.hasOwnProperty(iw)){if(V.cf[iw].T.aX===eventArgs.upMark.aX&&V.cf[iw].T.aX===eventArgs.downMark.aX){C=V.cf[iw];eventArgs.pageIndex=C.bb-1;wC=true;var atA=V.getCurrentMouseTool();var auJ=PCCViewer.MouseTools.getMouseTool(atA);var act=auJ.getType();if(Mk===false&&eventArgs.domEvent.button===0){if(act===PCCViewer.MouseTool.Type.PanAndEdit||act===PCCViewer.MouseTool.Type.EditMarks){V.deselectAllMarks();C.T.set_selected(true);}}break;}}}}else if(typeof eventArgs.downMark!=='undefined'&&typeof eventArgs.upMark!=='undefined'&&eventArgs.downMark.kL()===eventArgs.upMark.kL()){wC=true;if(Mk===false&&eventArgs.downTarget.alreadySelected===false){V.deselectAllMarks();C.T.set_selected(true);}}if(C===undefined){if(V.bh&&V.Ku[eventArgs.upTarget.pageIndex+1]==='search'){var eb=V.bh.getResults();for(var L=0;L<eb.length;L++){if(eb[L].bb===eventArgs.upTarget.pageIndex+1&&typeof eventArgs.downMark.bf!=='undefined'&&typeof eventArgs.upMark.bf!=='undefined'&&typeof eventArgs.downMark.da!=='undefined'&&typeof eventArgs.upMark.da!=='undefined'&&eventArgs.downMark.bf>=eb[L].getStartIndexInPage()&&eventArgs.downMark.bf+eventArgs.downMark.da<=eb[L].getStartIndexInPage()+eb[L].getText().length&&eventArgs.upMark.bf>=eb[L].getStartIndexInPage()&&eventArgs.upMark.bf+eventArgs.upMark.da<=eb[L].getStartIndexInPage()+eb[L].getText().length){Nk='searchResult';gm=eb[L];eventArgs.upTarget.pageIndex=gm.bb-1;wC=true;break;}}}}if(wC===false&&C===undefined&&V.Ku[eventArgs.upTarget.pageIndex+1]==='selectText'&&typeof eventArgs.downMark.bf!=='undefined'&&typeof eventArgs.upMark.bf!=='undefined'&&eventArgs.downMark.bf>=V.aE.startIndex&&eventArgs.downMark.bf+eventArgs.downMark.da<=V.aE.startIndex+V.aE.length&&eventArgs.upMark.bf>=V.aE.startIndex&&eventArgs.upMark.bf+eventArgs.upMark.da<=V.aE.startIndex+V.aE.length){Nk='textSelection';aE=V.aE;wC=true;}}}var YP=new MouseEvent(eventArgs.originalEvent);setTimeout(function(){var aFQ=(isNaN(eventArgs.upTarget.pageIndex))?null:eventArgs.upTarget.pageIndex+1;var F={pageNumber:aFQ,targetType:Nk,textSelection:aE,searchResult:gm,mark:C,originalEvent:YP,hyperlink:gd,clientX:eventArgs.clientX,clientY:eventArgs.clientY};if(wC===true){V.ac.trigger('Click',F);}},0);});(function(){var zh=null;V.bS.NP(function(sender,eventArgs){var YP=new MouseEvent(eventArgs.domEvent);var F={originalEvent:YP,clientX:eventArgs.windowPoint.x,clientY:eventArgs.windowPoint.y};if(!(eventArgs.mark instanceof IPCC.Web.UI.Mark)){if(zh!==null){F.mark=V.cf[zh];zh=null;setTimeout(function(){V.ac.trigger('MarkMouseLeave',F);},0);}}else{F.mark=V.cf[eventArgs.mark.get_markID()];if(F.mark===undefined){for(var iw in V.cf){if(V.cf.hasOwnProperty(iw)){if(V.cf[iw].T.aX===eventArgs.mark.aX){F.mark=V.cf[iw];break;}}}}if(!F.mark){return;}setTimeout(function(){if(zh!==F.mark.getId()){if(zh!==null){V.ac.trigger('MarkMouseLeave',IPCC.J.extend({},F,{mark:V.cf[zh]}));}zh=F.mark.getId();V.ac.trigger('MarkMouseEnter',F);}V.ac.trigger('MarkMouseOver',F);},0);}});})();this.bS.add_hyperlinkPageReady(function(sender,eventArgs){if(V.Fl[eventArgs.pageIndex]!==undefined){return;}var aO=eventArgs.pageIndex,aN=V.dB.getPage(aO),IA=aN.get_hyperlinkPage().IT(),yY=V.Fl[aO]=[];IA.lf(function(Ct){yY.push(new PCCViewer.DocumentHyperlink({bb:aO+1,Ct:Ct}));});if(!V.Fb[aO]){V.Fb[aO]=new PCCViewer.Deferred();}V.Fb[aO].resolve(yY);});this.ph=function(C,hZ){var abh=false;function TN(){var kz=false;var dF=V.bS.get_displayedPages();for(var L=0;L<dF.get_length();L++){var aN=dF.getPage(L);if(aN.get_pageNumber()===hZ){kz=true;break;}}return kz;};function OI(hz){if(V.bS){V.bS.dh(hz);}};if(TN()){if(Array.prototype.indexOf){if(IPCC.Web.lw(V.Dg,hZ)>=0){abh=true;}}else{if(IPCC.Web.lw(V.Dg,hZ)>=0){abh=true;}}if(!abh){V.Dg.push(hZ);setTimeout(function(){var cr=V.Dg.length;if(cr>0){for(var L=0;L<cr;L++){OI(V.Dg[L]);}V.Dg.splice(0,cr);}},10);}}};var JN={FreehandSignature:{lineColor:'color',lineWidth:'thickness',pathWidth:false,pathHeight:false},FreehandAnnotation:{lineColor:'color',lineWidth:'thickness',pathWidth:false,pathHeight:false},LineAnnotation:{lineColor:'color',lineWidth:'thickness'},PolylineAnnotation:{lineColor:'color',lineWidth:'thickness'},TextSignature:{textColor:false,fillColor:'color'},TextInputSignature:{lineVisible:false},StampAnnotation:{text:'label',fillColor:'color'},StampRedaction:{text:'label'},StrikethroughAnnotation:{lineColor:'color',lineWidth:'thickness',rectangle:'position'},RectangleRedaction:{text:this.bP.enableMultipleRedactionReasons?'reasons':'reason'},TextRedaction:{opacity:false},HighlightAnnotation:{rectangle:'position'},TextSelectionRedaction:{rectangle:'position',text:this.bP.enableMultipleRedactionReasons?'reasons':'reason'},TextHyperlinkAnnotation:{rectangle:'position'}};var Qu={lineColor:"borderColor",lineWidth:"borderThickness",pathString:"path",textColor:"fontColor",textHorizontalAlignment:"horizontalAlignment"};this.np=function(aH,F){var C=V.cf[F.mark.get_markID()];var bg;if(C){bg=C.bg;}if(bg&&JN[bg]&&JN[bg][F.propertyName]===false){return;}var cG;if(bg){cG=JN[bg]&&JN[bg][F.propertyName]?JN[bg][F.propertyName]:Qu[F.propertyName]?Qu[F.propertyName]:F.propertyName;}else{cG=Qu[F.propertyName]?Qu[F.propertyName]:F.propertyName;}if(F.mark.get_type()===IPCC.Web.UI.MarkType.HighlightText||F.mark.get_type()===IPCC.Web.UI.MarkType.Highlight||F.mark.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction||F.mark.get_type()===IPCC.Web.UI.MarkType.TextHighlightAnnotation||F.mark.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||F.mark.get_type()===IPCC.Web.UI.MarkType.Strikethrough||(F.mark.get_type()===IPCC.Web.UI.MarkType.RectangleRedaction&&F.mark.aX!==undefined)){if(C){setTimeout(function(){V.ac.trigger('MarkChanged',{mark:C,pageNumber:F.pageIndex+1,propertyName:cG});},0);}else{for(var iw in V.cf){if(V.cf.hasOwnProperty(iw)){C=V.cf[iw];if(C.aX===F.mark.aX){break;}}}}V.ph(C,F.pageIndex);}else if(C&&F.mark.get_type()===IPCC.Web.UI.MarkType.Polyline&&cG==='points'){if(C.ZR){clearTimeout(C.ZR);}C.ZR=setTimeout(function(){C.ZR=undefined;V.ph(C,F.pageIndex);V.ac.trigger('MarkChanged',{mark:C,pageNumber:F.pageIndex+1,propertyName:cG});},1);}else if(C){V.ph(C,F.pageIndex);setTimeout(function(){V.ac.trigger('MarkChanged',{mark:C,pageNumber:F.pageIndex+1,propertyName:cG});},0);}if(C&&C.type===PCCViewer.Mark.Type.TextRedaction){C.T.set_opacity(0);}if(C&&(C.bg===PCCViewer.Mark.Type.TextInputSignature||C.bg===PCCViewer.Mark.Type.TextAreaSignature)){C.T.set_lineVisible(false);}};this.bS.add_markChanged(V.np);this.bS.add_markReordered(function(sender,eventArgs){var C=V.cf[eventArgs.mark.get_markID()];setTimeout(function(){V.ac.trigger('MarkReordered',{mark:C,pageNumber:eventArgs.pageIndex+1,index:eventArgs.zIndex,oldIndex:eventArgs.oldZIndex});},0);});this.DO=function(sender,eventArgs){if(eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.Strikethrough||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.HighlightText){var C;for(var LQ in V.cf){if(V.cf.hasOwnProperty(LQ)){C=V.cf[LQ];if(C.T.aX===eventArgs.mark.aX){C.T.set_selected(eventArgs.mark.get_selected());V.ph(C.T,C.T.aO);for(var L=0;L<C.ad.length;L++){C.ad[L].set_selected(eventArgs.mark.get_selected());V.ph(C.ad[L],C.ad[L].aO);}}}}}setTimeout(function(){V.ac.trigger('MarkSelectionChanged',{pageNumber:eventArgs.pageIndex+1});},0);};this.bS.add_markSelectionChanged(V.DO);this.bS.add_markTextSelectionChanged(function(sender,eventArgs){V.ph(eventArgs.mark,eventArgs.pageIndex);});this.Dh=function(sender,eventArgs){var C;if(eventArgs.mark){C=V.cf[eventArgs.mark.get_markID()];if((eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.HighlightText||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextSelectionRedaction||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.Strikethrough||eventArgs.mark.get_type()===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation)&&C===undefined&&eventArgs.mark.aX!==undefined){V.ph(eventArgs.mark,eventArgs.pageIndex);}else if(C){setTimeout(function(){V.ac.trigger(PCCViewer.EventType.MarkRemoved,{mark:C,pageNumber:eventArgs.pageIndex});},0);}}};this.bS.add_markRemoved(V.Dh);this.bS.add_commentAdding(function(sender,eventArgs){var C=V.cf[eventArgs.mark.get_markID()];if(eventArgs.comment.Ih.jy===undefined){eventArgs.comment.Ih.jy=V.getActiveMarkupLayer();}});this.bS.add_commentAdded(function(sender,eventArgs){var C=V.cf[eventArgs.mark.get_markID()];V.ac.trigger(PCCViewer.EventType.CommentCreated,{conversation:C.getConversation(),comment:eventArgs.comment.Ih});});this.bS.add_commentRemoved(function(sender,eventArgs){var C=V.cf[eventArgs.mark.get_markID()];V.ac.trigger(PCCViewer.EventType.CommentRemoved,{conversation:C.getConversation(),comment:eventArgs.comment.Ih});});this.bS.add_commentChanged(function(sender,eventArgs){var C=V.cf[eventArgs.mark.get_markID()];V.ac.trigger(PCCViewer.EventType.CommentChanged,{conversation:C.getConversation(),comment:eventArgs.comment.Ih});});this.bS.add_scaleChanged(function(sender,eventArgs){var fp;switch(eventArgs.fitType){case 0:fp=PCCViewer.FitType.FullWidth;break;case 1:fp=PCCViewer.FitType.ShrinkToWidth;break;case 2:fp=PCCViewer.FitType.ActualSize;break;case 3:fp=PCCViewer.FitType.FullHeight;break;case 4:fp=PCCViewer.FitType.FullPage;break;default:break;}V.ac.trigger(PCCViewer.EventType.ScaleChanged,{scaleType:eventArgs.scaleType,trigger:eventArgs.scaleTrigger,fitType:fp,scaleFactor:eventArgs.scaleFactor});});};SingleSessionViewerControl.prototype.getPageCount=function(){return this.eP;};SingleSessionViewerControl.prototype.getPageNumber=function(){return(this.bS)?(this.bS.ane().get_pageNumber()+1):1;};SingleSessionViewerControl.prototype.setPageNumber=function(pageNumber){var bb;if(typeof(pageNumber)==='number'){bb=pageNumber;}else{if(isNaN(+pageNumber)){throw "The parameter pageNumber is not a number.";}else{bb=Number(pageNumber);}}if(parseInt(bb,10)!==bb){throw new Error("The 'pageNumber' value "+bb+" is not an integer page number.");}if(bb<1||bb>this.getPageCount()|| !isFinite(bb)){throw "The parameter pageNumber is out of range.";}if(this.getPageNumber()===bb){return this;}if(this.bS){this.bS.scrollToPage(bb-1);}return this;};SingleSessionViewerControl.prototype.changeToFirstPage=function(){if(this.bS){if(this.EE||this.mi){this.bS.scrollToFirstPage();}}return this;};SingleSessionViewerControl.prototype.changeToLastPage=function(){if(this.bS){if(this.EE||this.mi){this.bS.scrollToLastPage();}}return this;};SingleSessionViewerControl.prototype.changeToNextPage=function(){if(this.bS){if(this.EE||this.mi){this.bS.scrollToNextPage();}}return this;};SingleSessionViewerControl.prototype.changeToPrevPage=function(){if(this.bS){if(this.EE||this.mi){this.bS.scrollToPreviousPage();}}return this;};SingleSessionViewerControl.prototype.scrollBy=function(offsetX,offsetY){if(!this.fF){throw new Error("The method scrollTo requires the viewer to be in a 'ViewerReady' state.");}var V=this;if(typeof offsetX==='number'&&typeof offsetY==='number'){V.bS.scrollBy(offsetX,offsetY);}else{if(isNaN(+offsetX)||isNaN(+offsetY)){throw new PCCViewer.Error('InvalidArgument','Please provide integer values for offsetX and offsetY properties.');}else{V.bS.scrollBy(Number(+offsetX),Number(+offsetY));}}return this;};SingleSessionViewerControl.prototype.scrollTo=function(target){if(!this.fF){throw new Error("The method scrollTo requires the viewer to be in a 'ViewerReady' state.");}if(this.gE){this.gE.reject(new PCCViewer.Error("Error","The scrollTo method was called before this scrollToAsync method completed scrolling, so scrolling for this scrollToAsync method has been cancelled."));this.gE=null;this.kh=null;}var V=this;var HT=function(){V.bS.scrollConversationIntoView(target.getMark().T.get_conversation());if(V.gE){V.gE.resolve();}V.gE=null;V.kh=null;};var us=function(ev){if(ev.target.xQ===target){V.ac.off(PCCViewer.EventType.CommentCreated,us);V.xQ=null;V.scrollTo(target);}else if(ev.target.xQ===null){V.ac.off(PCCViewer.EventType.CommentCreated,us);}if(V.gE){V.gE.resolve();}V.gE=null;V.kh=null;};var IJ=function(bb,gw){V.bS.prefetchPages();V.bS.scrollRegionIntoView(bb-1,gw);if(V.gE){V.gE.resolve();}V.gE=null;V.kh=null;};ajI(V,target,us,HT,IJ);return this;};SingleSessionViewerControl.prototype.scrollToAsync=function(target){if(this.gE){this.gE.reject(new PCCViewer.Error("Error","The scrollToAsync method was called before this scrollToAsync method completed scrolling, so scrolling for this scrollToAsync method has been cancelled."));this.gE=null;this.kh=null;}var bp=PCCViewer.Deferred();var cK=bp.getPromise();var V=this;V.gE=bp;try{var HT=function(){V.bS.scrollConversationIntoView(target.getMark().T.get_conversation());if(V.gE){V.gE.resolve();}V.gE=null;V.kh=null;};var us=function(ev){if(ev.target.xQ===target){V.ac.off(PCCViewer.EventType.CommentCreated,us);V.xQ=null;V.scrollTo(target);}else if(ev.target.xQ===null){V.ac.off(PCCViewer.EventType.CommentCreated,us);}if(V.gE){V.gE.resolve();}V.gE=null;V.kh=null;};var IJ=function(bb,gw){V.bS.prefetchPages();V.bS.scrollRegionIntoView(bb-1,gw);if(V.gE){V.gE.resolve();}V.gE=null;V.kh=null;};if(ajI(V,target,us,HT,IJ)===true){bp.resolve();}}catch(e){V.gE=null;V.kh=null;bp.reject(new PCCViewer.Error("Error",e));}return cK;};function ajI(cF,cq,us,HT,IJ){var gw,bb,ax;cF.xQ=null;if(cq instanceof PCCViewer.Conversation){if(cF.cf[cq.getMark().getId()]===undefined){throw new Error("The parameter target is a conversation of a mark unknown to the viewer control.");}var akh=cF.bS.scrollConversationIntoView(cq.getMark().T.get_conversation());if(akh==="PageOutOfView"){cF.kh=HT;cF.setPageNumber(cq.getMark().getPageNumber());return false;}else if(akh==="ConversationDivDoesNotExist"&&cq.getMark().T.get_conversation().get_length()>0){cF.xQ=cq;cF.ac.on(PCCViewer.EventType.CommentCreated,us);return false;}else{cF.kh=null;return true;}}else if(cq instanceof PCCViewer.SearchResult){if(cq.Ve!==cF.ba.get_documentIdentifier()){throw new Error("The parameter target is a SearchResult that was not created using the current document viewing session.");}ax=cq.getBoundingRectangle();gw=new IPCC.Web.UI.Rectangle(ax.x,ax.y,ax.width,ax.height);bb=cq.getPageNumber();}else if(cq instanceof PCCViewer.Mark){if(cF.cf[cq.getId()]===undefined){throw new Error("The parameter target is a mark unknown to the viewer control.");}ax=cq.getBoundingRectangle();gw=new IPCC.Web.UI.Rectangle(ax.x,ax.y,ax.width,ax.height);bb=cq.getPageNumber();}else if(cq!==undefined&&cq!==null){if(typeof cq.x==='number'&&typeof cq.y==='number'){gw=new IPCC.Web.UI.Rectangle(+cq.x,+cq.y,0,0);}else{if(isNaN(+cq.x)||isNaN(+cq.y)){throw new Error('The parameter target does not contain a valid x and y values.');}else{gw=new IPCC.Web.UI.Rectangle(Number(+cq.x),Number(+cq.y),0,0);}}if(cq.width){if(typeof cq.width==='number'){gw.width=cq.width;}else{if(isNaN(+cq.width)){throw new Error('The parameter target does not contain a valid width value.');}else{gw.width=Number(+cq.width);}}}if(cq.height){if(typeof cq.height==='number'){gw.height=cq.height;}else{if(isNaN(+cq.height)){throw new Error('The parameter target does not contain a valid height value.');}else{gw.height=Number(+cq.height);}}}if(typeof cq.pageNumber==='number'){bb= +cq.pageNumber;}else{if(isNaN(+cq.pageNumber)){throw new Error('The parameter target does not contain a valid pageNumber value.');}else{bb=Number(+cq.pageNumber);}}}else{throw new Error('The target parameter must be a Mark, SearchResult, or Point.');}if(bb<1||bb>cF.getPageCount()|| !isFinite(bb)){throw new RangeError("The parameter pageNumber is out of range.");}if(cF.bS.scrollRegionIntoView(bb-1,gw)===false){cF.kh=function(){IJ(bb,gw);};cF.setPageNumber(bb);return false;}else{cF.kh=null;return true;}};SingleSessionViewerControl.prototype.rotatePage=function(degreesClockwise){if(!this.fF){throw "The method rotatePage requires the viewer to be in a 'ViewerReady' state.";}if(xt(this.getPageNumber()-1,this)===false){this.bS.dh(this.getPageNumber()-1);}var iS=degreesClockwise%360,V=this;if(iS!==0){var yf=[90,180,270,-90,-180,-270];if(Array.prototype.indexOf){if(!iS||yf.indexOf(iS)=== -1){throw new RangeError("The value of degreesClockwise ("+degreesClockwise+") is not valid.");}}else{if(!iS||IPCC.Web.lw(yf,iS)=== -1){throw new RangeError("The value of degreesClockwise ("+degreesClockwise+") is not valid.");}}this.bS.rotate(iS);}setTimeout(function(){V.ac.trigger("PageRotated",{degreesClockwise:iS,pageNumber:(V.getPageNumber())});},0);return this;};SingleSessionViewerControl.prototype.rotateDocument=function(degreesClockwise){if(!this.fF){throw "The method rotateDocument requires the viewer to be in a 'ViewerReady' state.";}if(xt(this.getPageNumber()-1,this)===false){this.bS.dh(this.getPageNumber()-1);}var iS=degreesClockwise%360,V=this;if(iS!==0){var yf=[90,180,270,-90,-180,-270];if(Array.prototype.indexOf){if(!iS||yf.indexOf(iS)=== -1){throw new RangeError("The value of degreesClockwise ("+degreesClockwise+") is not valid.");}}else{if(!iS||IPCC.Web.lw(yf,iS)=== -1){throw new RangeError("The value of degreesClockwise ("+degreesClockwise+") is not valid.");}}this.bS.acp(iS);}setTimeout(function(){V.ac.trigger("DocumentRotated",{degreesClockwise:iS});},0);return this;};SingleSessionViewerControl.prototype.getScaleFactor=function(){if(!this.tu){throw "The getScaleFactor method cannot be called before the initial PageOpening event.";}return this.bS.get_scaleFactor();};SingleSessionViewerControl.prototype.setScaleFactor=function(scaleFactor){if(!this.tu){throw "The setScaleFactor method cannot be called before the initial PageOpening event.";}if(isNaN(+scaleFactor)||(+scaleFactor<this.getMinScaleFactor())||(+scaleFactor>this.getMaxScaleFactor())){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('scaleFactor',scaleFactor,'The value must be a number between the values returned by the getMinScaleFactor and getMaxScaleFactor methods.');}this.bS.set_scaleFactor(+scaleFactor);return this;};SingleSessionViewerControl.prototype.getMinScaleFactor=function(){if(!this.tu){throw "The getMinScaleFactor method cannot be called before the initial PageOpening event.";}return this.bS.getMinMaxZoom().minFactor;};SingleSessionViewerControl.prototype.getMaxScaleFactor=function(){if(!this.tu){throw "The getMaxScaleFactor method cannot be called before the initial PageOpening event.";}return this.bS.getMinMaxZoom().maxFactor;};SingleSessionViewerControl.prototype.zoomIn=function(zoomFactor){if(!this.tu){throw "The zoomIn method cannot be called before the initial PageOpening event.";}if(isNaN(+zoomFactor)||(+zoomFactor<1.01)||(+zoomFactor>20)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('zoomFactor',zoomFactor,'The value must be a number between 1.01 and 20 inclusive.');}if(this.bS){this.bS.zoomIn(+zoomFactor);}return this;};SingleSessionViewerControl.prototype.zoomOut=function(zoomFactor){if(!this.tu){throw "The zoomOut method cannot be called before the initial PageOpening event.";}if(isNaN(+zoomFactor)||(+zoomFactor<1.01)||(+zoomFactor>20)){throw new IPCC.Web.UI.ImGearArgumentOutOfRangeException('zoomFactor',zoomFactor,'The value must be a number between 1.01 and 20 inclusive.');}if(this.bS){this.bS.zoomOut(+zoomFactor);}return this;};SingleSessionViewerControl.prototype.getViewMode=function(){var oB;if(this.bS&&this.bS.get_viewMode){oB=this.bS.get_viewMode();}else{oB=this.bP.viewMode;}if(oB===IPCC.ViewMode.EqualWidthPages){return PCCViewer.ViewMode.EqualWidthPages;}else if(oB===IPCC.ViewMode.EqualFitPages){return PCCViewer.ViewMode.EqualFitPages;}else if(oB===IPCC.ViewMode.SinglePage){return PCCViewer.ViewMode.SinglePage;}else{return PCCViewer.ViewMode.Document;}};SingleSessionViewerControl.prototype.setViewMode=function(viewMode){var oB;switch(viewMode){case PCCViewer.ViewMode.Document:oB=IPCC.ViewMode.Document;break;case PCCViewer.ViewMode.EqualWidthPages:oB=IPCC.ViewMode.EqualWidthPages;break;case PCCViewer.ViewMode.EqualFitPages:oB=IPCC.ViewMode.EqualFitPages;break;case PCCViewer.ViewMode.SinglePage:oB=IPCC.ViewMode.SinglePage;break;default:throw new RangeError("The value of viewMode is not a supported value.");}if(this.bS&&this.bS.set_viewMode){var Jb=this.bS.get_viewMode();if(Jb!==oB){if(Jb===IPCC.ViewMode.SinglePage){throw new Error("The view mode may not be changed from SinglePage to another view mode after initializing the viewer.");}else if(oB===IPCC.ViewMode.SinglePage){throw new Error("The view mode may not be changed to SinglePage after initializing the viewer. Please use the viewMode viewer parameter instead.");}this.bS.set_viewMode(oB);}}else{this.bP.viewMode=oB;}return this;};SingleSessionViewerControl.prototype.getPageLayout=function(){var yM;if(this.bS&&this.bS.get_pageLayout){yM=this.bS.get_pageLayout();}else{yM=this.bP.pageLayout;}if(yM===IPCC.PageLayout.HorizontalScrollDirection){return PCCViewer.PageLayout.Horizontal;}else{return PCCViewer.PageLayout.Vertical;}};SingleSessionViewerControl.prototype.setPageLayout=function(pageLayout){var yM;if(this.bP.viewMode!==IPCC.ViewMode.SinglePage){switch(pageLayout){case PCCViewer.PageLayout.Vertical:yM=IPCC.PageLayout.VerticalScrollDirection;break;case PCCViewer.PageLayout.Horizontal:if(this.bS&&this.bS.closeCommentsPanel){this.bS.closeCommentsPanel();var V=this;setTimeout(function(){V.ac.trigger("CommentsPanelToggled",{isOpen:false});},10);}yM=IPCC.PageLayout.HorizontalScrollDirection;break;default:throw new RangeError("The value of pageLayout is not a supported value.");}}if(this.bS&&this.bS.set_pageLayout){this.bS.set_pageLayout(yM);}else{this.bP.pageLayout=yM;}return this;};SingleSessionViewerControl.prototype.getAtMaxScale=function(){if(!this.tu){throw "The getAtMaxScale method cannot be called before the initial PageOpening event.";}return this.bS.getMinMaxZoom().atMax;};SingleSessionViewerControl.prototype.getAtMinScale=function(){if(!this.tu){throw "The getAtMinScale method cannot be called before the initial PageOpening event.";}return this.bS.getMinMaxZoom().atMin;};SingleSessionViewerControl.prototype.fitContent=function(fitType){if(!this.tu){throw "The fitContent method cannot be called before the initial PageOpening event.";}var EC;switch(fitType){case PCCViewer.FitType.FullWidth:EC=IPCC.FitType.FitToWidth;break;case PCCViewer.FitType.ShrinkToWidth:EC=IPCC.FitType.ShrinkToWidth;break;case PCCViewer.FitType.ActualSize:if(this.getViewMode()===PCCViewer.ViewMode.EqualWidthPages||this.getViewMode()===PCCViewer.ViewMode.EqualFitPages){throw new Error("Fitting content actual size is not supported when in EqualFitPages view mode.");}EC=IPCC.FitType.ActualSize;break;case PCCViewer.FitType.FullHeight:EC=IPCC.FitType.FitToHeight;break;case PCCViewer.FitType.FullPage:EC=IPCC.FitType.BestFit;break;default:throw new RangeError("The value of fitType is not a supported value.");}this.ta.then(function(rA){rA.fitPages(EC);});return this;};SingleSessionViewerControl.prototype.getPageRotation=function(pageNumber){if(!this.fF){throw new Error("The method getPageRotation requires the viewer to be in a 'ViewerReady' state.");}var bb;if(arguments.length>0){if(typeof(pageNumber)==='number'){bb=pageNumber;}else{if(isNaN(+pageNumber)){throw new Error("The parameter pageNumber is not a number.");}else{bb=Number(pageNumber);}}if(parseInt(bb,10)!==bb){throw new Error("The 'pageNumber' value "+bb+" is not an integer page number.");}if(bb<1||bb>this.getPageCount()|| !isFinite(bb)){throw new Error("The parameter pageNumber is out of range.");}return this.bS.Uv(bb-1);}else{return this.bS.Uv();}};SingleSessionViewerControl.prototype.search=function(cn){var bP=this.bP;var aDt=bP.searchMethodType.toLowerCase();var aqz=bP.searchMethodPageCountThreshold;var V=this;var WH;var iR;var Fd=new PCCViewer.SearchRequest(true);if(Object.defineProperties){Object.defineProperties(Fd,{"searchQuery":{enumerable:true,get:function(){return iR.getSearchQuery();}},"results":{enumerable:true,get:function(){return iR.getResults();}},"isComplete":{enumerable:true,get:function(){return iR.getIsComplete();}},"errorCode":{enumerable:true,get:function(){return iR.getErrorCode();}},"errorMessage":{enumerable:true,get:function(){return iR.getErrorMessage();}}});}function Ko(bz){return function(){Fd.trigger.apply(Fd,[bz].concat([].slice.call(arguments)));};};var aca=Ko(PCCViewer.EventType.SearchCompleted);var adw=Ko(PCCViewer.EventType.SearchCancelled);var ado=Ko(PCCViewer.EventType.SearchResultsAvailable);var acW=Ko(PCCViewer.EventType.PartialSearchResultsAvailable);var ace=function(ar){var fc=WH.getErrorCode();if(fc==='ServerSearchUnavailable'){V.adG=true;V.Ab=false;aBw();iR=V.clientSearch(cn);ahr();}else{Ko(PCCViewer.EventType.SearchFailed).apply(null,arguments);}};var ahr=function(){iR.on(PCCViewer.EventType.SearchCompleted,aca);iR.on(PCCViewer.EventType.SearchFailed,ace);iR.on(PCCViewer.EventType.SearchCancelled,adw);iR.on(PCCViewer.EventType.SearchResultsAvailable,ado);iR.on(PCCViewer.EventType.PartialSearchResultsAvailable,acW);};var aBw=function(){iR.off(PCCViewer.EventType.SearchCompleted,aca);iR.off(PCCViewer.EventType.SearchFailed,ace);iR.off(PCCViewer.EventType.SearchCancelled,adw);iR.off(PCCViewer.EventType.SearchResultsAvailable,ado);iR.off(PCCViewer.EventType.PartialSearchResultsAvailable,acW);};var EL=function(){if(V.adG===false){WH=V.serverSearch(cn);iR=WH;ahr();IPCC.J.forEach(['getSearchQuery','getResults','getIsComplete','getErrorCode','getErrorMessage','cancel','getPagesWithoutText'],function(bz){Fd[bz]=function(){return iR[bz].apply(iR,arguments);};});return Fd;}else{return V.clientSearch(cn);}};switch(aDt){case('auto'):if(aqz>=this.eP){return this.clientSearch(cn);}else{return EL();}break;case('client'):return this.clientSearch(cn);case('server'):return EL();default:throw new Error("The value of 'options.searchMethodType' should be 'auto', 'server', or 'client'.");}};SingleSessionViewerControl.prototype.adI=function(cn,aBD){var V=this;var dI=new PCCViewer._Search();this.bh=dI.ays();PCCViewer.SearchTask.prototype.aej(cn);if(aBD===true){if(V.yX!==true){V.ta.then(function(rA){var Io=function(){V.ac.off('PageCountReady',Io);V.clientSearch(cn);};V.ac.on('PageCountReady',Io);return V.bh;});}if(!this.ba.axj()){this.ba.QK(0,this.ba.eP-1,this.ba.eP);}}this.xm=null;this.FX={};this.bS.clearAllSelectedText();return dI;};SingleSessionViewerControl.prototype.ahW=function(){var aj=this;this.bh.on('PartialSearchResultsAvailable',function(dQ){if(aj.qE){return;}var Hs=[];var Lo={};Hs=dQ.partialSearchResults;var av=Hs[0];if(aj.FX[av.getPageNumber()]!==undefined){Lo=aj.FX[av.getPageNumber()];}else{Lo.bf=av.getId();}av=Hs[Hs.length-1];Lo.dj=av.getId();aj.FX[av.getPageNumber()]=Lo;function Eg(aN){if(aj.qE){return;}aj.adq(aN.get_pageNumber(),Hs);};var dF=aj.bS.get_displayedPages();for(var L=0;L<dF.get_length();L++){var aN=dF.getPage(L);if(aN.get_pageNumber()+1===av.getPageNumber()){aj.requestPageText(aN.get_pageNumber()+1).then(Eg.bind(null,aN));}}});this.bh.on('SearchCompleted',function(dQ){aj.Ab=false;});this.bh.on('SearchCancelled',function(dQ){aj.Ab=false;});this.ac.trigger('SearchPerformed',{searchRequest:this.bh});};SingleSessionViewerControl.prototype.clientSearch=function(searchQuery){var aj=this;var dI=aj.adI(searchQuery,true);searchQuery=dI.Wj(searchQuery);if(this.Ab===false){aj.bS.set_retainPageText(true);this.bh=dI.wE(searchQuery,this.ba);this.Ab=true;}else{throw new Error("You cannot run multiple searches concurrently. Retry after the current search is completed.");}aj.ahW();return this.bh;};SingleSessionViewerControl.prototype.serverSearch=function(searchQuery){var aj=this;var dI=aj.adI(searchQuery,false);searchQuery=dI.Wj(searchQuery);if(this.Ab===false){this.bh=dI.EL(searchQuery,this.ba);this.Ab=true;}else{throw new Error("You cannot run multiple searches concurrently. Retry after the current search is completed.");}aj.ahW();return this.bh;};SingleSessionViewerControl.prototype.getSearchRequest=function(){return this.bh;};SingleSessionViewerControl.prototype.clearSearch=function(){if(!this.fF){throw "The clearSearch method requires the viewer to be in a 'ViewerReady' state.";}var V=this;if(this.getSelectedSearchResult()){this.xm=null;setTimeout(function(){V.ac.trigger(PCCViewer.EventType.SearchResultSelectionChanged,{});},0);}this.bS.clearAllSelectedText();this.bh=null;setTimeout(function(){V.ac.trigger(PCCViewer.EventType.SearchCleared,{});},0);return this;};SingleSessionViewerControl.prototype.validateSearch=function(cn){var dZ={errorsExist:false};var searchTermObj,akD,L,bj,abu,Lj,Nq;if(typeof cn!=='object'&&typeof cn!=='string'){dZ.errorsExist=true;dZ.summaryMsg="Search query must be either an object or string.";return dZ;}if(typeof cn==='string'&&cn.length<0){dZ.errorsExist=true;dZ.summaryMsg="Search term must contain at least 3 characters.";return dZ;}else if(typeof cn==='string'){return dZ;}if(!cn.hasOwnProperty('searchTerms')){dZ.errorsExist=true;dZ.summaryMsg="Search options must have a 'searchTerms' key.";return dZ;}if(Object.prototype.toString.call(cn.searchTerms)!=='[object Array]'){dZ.errorsExist=true;dZ.summaryMsg="Search terms value must be an array.";return dZ;}if(!cn.searchTerms.length){dZ.errorsExist=true;dZ.summaryMsg="Search terms array must contain at least one value.";return dZ;}dZ.searchTerms=[];IPCC.J.forEach(cn.searchTerms,function(searchTermObj){var HZ=amv(searchTermObj);if(HZ.errorsExist){dZ.errorsExist=true;}dZ.searchTerms=dZ.searchTerms.concat(HZ.searchTerms);});return dZ;};function amv(lo){var dZ={errorsExist:false,searchTerms:[]};var aBy=lo.type?IPCC.J.trim(lo.type).toLowerCase():undefined;if(aBy==='proximity'){if(Object.prototype.toString.call(lo.terms)!=='[object Array]'){dZ.searchTerms.push({isValid:false,message:"Proximity search terms property must be an array"});dZ.errorsExist=true;return dZ;}if(lo.terms.length<2){dZ.searchTerms.push({isValid:false,message:"Proximity search terms array must contain at least two values"});dZ.errorsExist=true;return dZ;}if(!lo.distance){dZ.searchTerms.push({isValid:false,message:"Proximity search term must have a distance specified"});dZ.errorsExist=true;return dZ;}IPCC.J.forEach(lo.terms,function(aGG){var HZ=amv(aGG);if(HZ.errorsExist){dZ.errorsExist=true;}dZ.searchTerms=dZ.searchTerms.concat(HZ.searchTerms);});return dZ;}var abu,Nq;var Lj=(typeof lo.matchingOptions!=='undefined'&&lo.matchingOptions.hasOwnProperty('matchCase'))?lo.matchingOptions.matchCase:false;if(typeof lo.searchTerm==='undefined'||typeof lo.searchTerm!=='string'||(lo.searchTermIsRegex===true&& !aAI(lo.searchTerm,Lj))){dZ.errorsExist=true;dZ.searchTerms.push({isValid:false,message:"Search term must be a string containing either plain text or a valid regular expression."});return dZ;}abu=(typeof lo.matchingOptions!=='undefined'&&lo.matchingOptions.hasOwnProperty('exactPhrase'))?lo.matchingOptions.exactPhrase:false;if(abu){if(lo.searchTerm.length<0){dZ.errorsExist=true;dZ.searchTerms.push({isValid:false,message:"Search term must contain at least 3 characters."});return dZ;}}else{var akD=lo.searchTerm.split(' ');IPCC.J.forEach(akD,function(Nq){if(Nq.length>0&&Nq.length<0){dZ.errorsExist=true;dZ.searchTerms.push({isValid:false,message:"Search term must contain at least 3 characters."});}});}if(!dZ.searchTerms.length){dZ.searchTerms.push({isValid:true,message:null});}return dZ;};var aAI=function(abm,Lj){var auv,Tn,Mf;if(Lj){Tn='gm';}else{Tn='igm';}if(!abm&&abm!==null){Mf=false;}else{try{auv=new RegExp(abm,Tn);Mf=true;}catch(err){Mf=false;}}return Mf;};SingleSessionViewerControl.prototype.requestRevisions=function(){this.jz=new PCCViewer.Gr({imageHandlerUrl:this.bP.imageHandlerUrl,documentID:this.bP.documentID});return this.jz.aCv();};SingleSessionViewerControl.prototype.hJ=function(VL){var zQ=false,dF=this.bS.get_displayedPages();for(var L=0;L<dF.get_length();L++){var aN=dF.getPage(L);if(aN.get_pageNumber()===VL){zQ=true;}}return zQ;};SingleSessionViewerControl.prototype.getDownloadDocumentURL=function(){var bA;if(!(/^[\x00-\x7F]*$/.test(this.ba))){bA=this.bP.imageHandlerUrl+'/SaveDocument/q?DocumentID=e'+this.bP.documentID+'/SourceFile';}else{bA=this.bP.imageHandlerUrl+'/SaveDocument/q?DocumentID=u'+encodeURIComponent(this.bP.documentID);}return bA;};SingleSessionViewerControl.prototype.requestDocumentHyperlinks=function(pageNumber){var bb;var bp=PCCViewer.Deferred();var cK=bp.getPromise();var cF=this;try{if(typeof(pageNumber)==='number'){bb=pageNumber;}else{if(isNaN(+pageNumber)){throw "The parameter pageNumber is not a number.";}else{bb=parseInt(pageNumber,10);}}if(bb<1||bb>this.getPageCount()|| !isFinite(pageNumber)){throw "The specified page is out of range.";}var WA=this.Fb[bb-1];if(!WA){WA=this.Fb[bb-1]=new PCCViewer.Deferred();this.ta.then(function(){var aN=cF.dB.getPage(bb-1);aN.zS();});}bp.resolve(WA.getPromise());}catch(e){bp.reject(new PCCViewer.Error('Error',e));}return cK;};SingleSessionViewerControl.prototype.avB=function(azW){var i,j,yY;for(j=0;j<this.Fl.length;j++){yY=this.Fl[j];if(yY){for(i=0;i<yY.length;i++){if(yY[i].Ct.KC()===azW){return yY[i];}}}}return null;};SingleSessionViewerControl.prototype.print=Print.print;SingleSessionViewerControl.prototype.validatePrintRange=Print.validatePrintRange;SingleSessionViewerControl.prototype.canPrintMarks=Print.canPrintMarks;SingleSessionViewerControl.prototype.deserializeMarks=function deserializeMarks(values){if(this.fF===false){throw new Error("The method addMark is not available until 'ViewerReady' state is reached.");}var V=this;var eP=V.getPageCount();var eB;if(typeof values==='string'){try{eB=JSON.parse(values);}catch(e){throw new Error('JSON parse error: '+e.message);}}else{eB=values;}if(eB.constructor!==Array){eB=[eB];}function OX(ef,ao){throw new Error('Cannot serialize mark (at index '+ao+') because of '+ef);};var ZT=IPCC.J.map(V.getAllMarks(),function(C){return C.getUid();});IPCC.J.forEach(eB,function validateObject(bQ,ao){if(!bQ.pageNumber||isNaN(+bQ.pageNumber)||bQ.pageNumber<1||bQ.pageNumber>eP){OX('unknown page number '+bQ.pageNumber,ao);}if(!PCCViewer.Mark.Type[bQ.type]){OX('unknown type '+bQ.type,ao);}if(bQ.type==='RectangleRedaction'||bQ.type==='TextSelectionRedaction'){if(!V.bP.enableMultipleRedactionReasons&&bQ.hasOwnProperty('reasons')){OX('Loading markup with multiple redaction reasons is not supported when enableMultipleRedactionReasons is set to false',ao);}}if(IPCC.J.contains(ZT,bQ.uid)){OX('uid '+bQ.uid+' is being duplicated or already exists',ao);}else if(bQ.uid!==undefined){ZT.push(bQ.uid);}});if(eB.length===0){return[];}var cz=V.ba.get_pages();var auM=[];cz.lf(function(aN){auM.push(V.bS.gO(aN));});var an=IPCC.J.reduce(eB,function(av,bQ){var aN=cz.iY(bQ.pageNumber-1);var Wy=aN.get_pageWidth();var aex=aN.get_pageHeight();var gy=bQ.pageData;if(!gy&&(!Wy|| !aex)){var aAn=IPCC.J.find(bQ.lineGroups,function(acX){return(acX.pageNumber&&acX.pageNumber===bQ.pageNumber);});gy=aAn.pageData;}var bO=Wy||gy.width;var bo=aex||gy.height;var C=cU[bQ.type].call(V,bQ,{bO:bO,bo:bo});if(bQ.uid===undefined){ZT.push(C.getUid());}if(!Wy&&bQ.maintainMarkScaling!==true){aN.BV=true;aN.agH(bO);aN.afb(bo);}if(!C.T.has_unsafe_href()){av.push(C);}else{V.deleteMarks(C);}return av;},[]);return an;};SingleSessionViewerControl.prototype.serializeMarks=function serializeMarks(marks){var bp=PCCViewer.Deferred();var cK=bp.getPromise();var V=this,an,azk=false;function alB(ef){setTimeout(function(){bp.reject(ef);},0);};if(Object.prototype.toString.call(marks)==='[object Array]'){an=marks;}else if(marks){an=[marks];azk=true;}else{alB(new PCCViewer.Error('InvalidArgument','`marks` is not defined or falsy.'));return cK;}var RR;an=IPCC.J.filter(an,function(kv,ao){var Ht=kv instanceof PCCViewer.Mark&&kv===V.getMarkById(kv.getId())&& ! !eF[kv.getType()];if(!Ht&& !RR){RR=ao;}return Ht;});if(RR){alB(new PCCViewer.Error('InvalidArgument','Cannot serialize object at index '+RR+' because it is not a valid mark or a mark known to ViewerControl'));return cK;}var YF=V.ba.get_pages();var cz=IPCC.J.reduce(an,function(fa,kv){var bb=kv.getPageNumber();if(fa[bb]){return fa;}fa[bb]=YF.getPage(bb-1);return fa;},{});function aso(C,aN,avu){return function(lP){eF[C.getType()]({mark:C,page:aN,vc:V},function(db,cX){if(!db){avu(cX);lP();}else{bp.reject(db);}});};};var sx=[];var atJ=IPCC.J.map(an,function(kv,ao){return aso(kv,cz[kv.getPageNumber()],function(cX){sx[ao]=cX;});});IPCC.J.UY(atJ,function(){bp.resolve(sx);});return cK;};SingleSessionViewerControl.prototype.setRedactionViewMode=function(redactionViewMode){var NX,Yu;switch(redactionViewMode){case PCCViewer.RedactionViewMode.Draft:NX=true;Yu=PCCViewer.RedactionViewMode.Draft;break;case PCCViewer.RedactionViewMode.Normal:NX=false;Yu=PCCViewer.RedactionViewMode.Normal;break;default:throw new RangeError("The value of RedactionViewMode is not a supported value.");}if(this.bS&&this.bS.set_redactionDraftMode){var ary=this.bS.get_redactionDraftMode();if(ary!==NX){this.bS.set_redactionDraftMode(NX);}}else{this.bP.redactionViewMode=Yu;}return this;};SingleSessionViewerControl.prototype.getRedactionViewMode=function(){var akl;if(this.bS&&this.bS.get_redactionDraftMode){akl=this.bS.get_redactionDraftMode();if(akl===true){return PCCViewer.RedactionViewMode.Draft;}else{return PCCViewer.RedactionViewMode.Normal;}}else{return this.bP.redactionViewMode;}};SingleSessionViewerControl.prototype.convertToRedaction=function(searchResult){var V=this;var gm=searchResult;if(this.fF===false){throw "The convertToRedaction method can not be used until 'ViewerReady' state is reached.";}return this.addMarkFromSearchResult(searchResult,PCCViewer.Mark.Type.TextSelectionRedaction);};var aIt=function(aY,gP,mY,ep,nP,akN){var fJ=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.TextSelectionRedaction);fJ.aX=nP;fJ.aO=akN;var C=null;var ka={hf:Number.MAX_VALUE,iW:0,_top:Number.MAX_VALUE,iO:0};for(var bj=mY;bj<ep;bj++){var eU=gP.kI(bj);if(C){var wP=C.get_rectangle();if(Math.abs(eU.aL.y-wP.y)<1&&Math.abs(eU.aL.height-wP.height)<1&&eU.aL.x+eU.aL.width>=wP.x+wP.width){C.set_rectangle(new IPCC.Web.UI.Rectangle(wP.x,wP.y,eU.aL.x+eU.aL.width-wP.x,wP.height));}else{acP(aY,fJ,C,ka);C=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.RectangleRedaction);C.set_rectangle(eU.aL);C.jL(true);C.set_fillColor('#000000');C.set_text(fJ.aS);C.set_lineWidth(0);C.aX=nP;}}else{C=new IPCC.Web.UI.Mark(IPCC.Web.UI.MarkType.RectangleRedaction);C.set_rectangle(eU.aL);C.jL(true);C.set_fillColor('#000000');C.set_text(fJ.aS);C.set_lineWidth(0);C.aX=nP;}C.aO=akN;}if(C!==null){acP(aY,fJ,C,ka);}fJ.set_rectangle(new IPCC.Web.UI.Rectangle(ka.hf,ka._top,ka.iW-ka.hf,ka.iO-ka._top));return fJ;};var acP=function(aY,fJ,C,ka){var h=C.get_rectangle();if(h.x<ka.hf){ka.hf=h.x;}if(h.y<ka._top){ka._top=h.y;}if(h.x+h.width>ka.iW){ka.iW=h.x+h.width;}if(h.y+h.height>ka.iO){ka.iO=h.y+h.height;}aY.addMark(C);fJ.ab.push(C);};SingleSessionViewerControl.prototype.convertToHighlight=function(searchResult){var gm=searchResult;if(this.fF===false){throw "The convertToHighlight method can not be used until 'ViewerReady' state is reached.";}return this.addMarkFromSearchResult(searchResult,PCCViewer.Mark.Type.HighlightAnnotation);};var aJk=function(bC,av,axz,nP){var C=new IPCC.Web.UI.Mark(bC);if(bC===IPCC.Web.UI.MarkType.HighlightText){C.cO=av.getText();}C.bf=axz;C.set_rectangle({x:0,y:0,width:0,height:0});C.da=av.getText().length;C.aFH=av.getStartIndexInPage()+av.getText().length;C.dg=127;C.cP=av.getHighlightColor();C.ib='y';C.aX=nP;return C;};SingleSessionViewerControl.prototype.adq=function(aO,eb){var av={};for(var bj=0;bj<eb.length;bj++){av=eb[bj];this.bS.selectText(av.getPageNumber()-1,av.getStartIndexInPage(),av.getText().length,av.getHighlightColor());}this.bS.display(av.getPageNumber()-1);this.Ku[av.getPageNumber()]='search';};SingleSessionViewerControl.prototype.WO=function(aO,searchResult){var av={};if(this.bh===null||typeof this.bh.getResults!=='function'){return;}var eb=this.bh.getResults();this.bS.clearSelectedText(aO-1);var Wu=this.FX[aO];if(!Wu){return;}for(var bj=Wu.bf;bj<Wu.dj+1;bj++){av=eb[bj];if(av.getPageNumber()===aO){this.bS.selectText(av.getPageNumber()-1,av.getStartIndexInPage(),av.getText().length,av.getHighlightColor());if(searchResult===av.getId()){this.bS.selectText(av.getPageNumber()-1,av.getStartIndexInPage(),av.getText().length,av.getHighlightColor());}}}this.bS.display(av.getPageNumber()-1);this.Ku[av.getPageNumber()]='search';};SingleSessionViewerControl.prototype.setSelectedSearchResult=function(searchResult,scrollTo){if(!this.fF){throw "The setSelectedSearchResult method requires the viewer to be in a 'ViewerReady' state.";}if(searchResult===null){this.Jv= -1;}else{if(!(searchResult instanceof PCCViewer.SearchResult)){throw "The parameter searchResult is not an instance of PCCViewer.SearchResult.";}if(!this.bh){throw "There is no current SearchRequest object available.";}var abc=this.bh.getResults();if(abc[searchResult.getId()].mh!==searchResult.mh){throw "The parameter searchResult is not current. There is a newer version of search result available.";}abc=null;this.Jv=searchResult.getId();if(scrollTo){var ax=searchResult.getBoundingRectangle();var gw=new IPCC.Web.UI.Rectangle(ax.x,ax.y,ax.width,ax.height);if(this.bS.scrollRegionIntoView(searchResult.getPageNumber()-1,gw)===false){this.kh=function(){V.bS.scrollRegionIntoView(searchResult.getPageNumber()-1,gw);};this.setPageNumber(searchResult.getPageNumber());}else{this.kh=null;}}}var V=this;var aDe=searchResult!==null?searchResult.getPageNumber(): -1;if(this.xm&&this.xm.getPageNumber()!==aDe){V.requestPageText(V.xm.getPageNumber()).then(function Eg(){V.WO(V.xm.getPageNumber(),V.Jv);});}if(searchResult){V.requestPageText(searchResult.getPageNumber()).then(function Eg(){V.WO(searchResult.getPageNumber(),V.Jv);});}this.xm=searchResult;setTimeout(function(){V.ac.trigger(PCCViewer.EventType.SearchResultSelectionChanged,{});},0);return this;};SingleSessionViewerControl.prototype.clearSelectedSearchResult=function(){if(!this.fF){throw "The clearSelectedSearchResult method requires the viewer to be in a 'ViewerReady' state.";}this.setSelectedSearchResult(null);return this;};SingleSessionViewerControl.prototype.getSelectedSearchResult=function(){return this.xm;};SingleSessionViewerControl.prototype.requestPageText=function(pageNumber){var bb;var bp=PCCViewer.Deferred();var cK=bp.getPromise();var V=this;try{if(typeof(pageNumber)==='number'){bb=pageNumber;}else{if(isNaN(+pageNumber)){throw "The parameter pageNumber is not a number.";}else{bb=parseInt(pageNumber,10);}}if(bb<1||bb>this.getPageCount()|| !isFinite(pageNumber)){throw "The specified page is out of range.";}this.ta.then(function(rA){var aN=V.dB.getPage(bb-1);var ff=aN.dr();ff.ajs(true);if(ff&&ff.Cr()){if(ff.oS()===true){var aS=aN.dr().Ew();bp.resolve(aS);}else{bp.resolve("");}}else{var GG=function(aH,di){if(di.containsText===true){var aS=ff.Ew();bp.resolve(aS);}else{bp.resolve("");}aN.FL(GG);aN.FP(Fj);};var Fj=function(aH,di){if(di.exception&&di.exception.message){bp.reject(new PCCViewer.Error("TextExtractionFailed",di.exception.message));}else{bp.reject(new PCCViewer.Error("TextExtractionFailed","Text extraction failed."));}aN.FL(GG);aN.FP(Fj);};aN.yW(GG);aN.yI(Fj);aN.zS();}});}catch(e){bp.reject(new PCCViewer.Error("Error",e));}return cK;};SingleSessionViewerControl.prototype.disposePageText=function(pageNumber){var bb;var V=this;if(!this.fF){throw new Error("The disposePageText method requires the viewer to be in a 'ViewerReady' state.");}if(V.bS.get_retainPageText()===true){return this;}if(typeof(pageNumber)==='number'){bb=pageNumber;}else{if(isNaN(+pageNumber)){throw new Error("The parameter pageNumber is not a number.");}else{bb=parseInt(pageNumber,10);}}if(bb<1||bb>this.getPageCount()|| !isFinite(pageNumber)){throw new Error("The specified page is out of range.");}var dF=V.bS.get_displayedPages();for(var L=0;L<dF.get_length();L++){var acB=dF.getPage(L);if(acB.get_pageNumber()===bb-1){acB.dr().ajs(false);return this;}}var aN=V.dB.getPage(bb-1);aN.aeG();return this;};SingleSessionViewerControl.prototype.isPageTextReady=function(pageNumber){IPCC.aI.nq(pageNumber,"pageNumber",1,this.getPageCount());var aN;return(this.bS&&this.dB&&(aN=this.dB.getPage(pageNumber-1))&&aN.dr()&&aN.dr().Cr())===true;};SingleSessionViewerControl.prototype.documentHasText=function(){return this.azZ;};SingleSessionViewerControl.prototype.requestPageAttributes=function(pageNumber){var bb;var bp=PCCViewer.Deferred();var cK=bp.getPromise();var V=this;try{if(typeof(pageNumber)==='number'){bb=pageNumber;}else{if(isNaN(+pageNumber)){throw "The parameter pageNumber is not a number.";}else{bb=parseInt(pageNumber,10);}}if(bb<1||bb>this.getPageCount()|| !isFinite(pageNumber)){throw "The specified page is out of range.";}this.ta.then(function(rA){var aN=V.dB.getPage(bb-1);if(aN.kY()>0||aN.jp()>0){bp.resolve({'width':aN.kY(),'height':aN.jp()});}else{var As=function(ap,aM){bp.resolve({'width':ap,'height':aM});};var Au=function(errorMessage){bp.reject(new PCCViewer.Error("RequestPageAttributesFailed",errorMessage));};rA.requestPageAttributes(aN,As,Au);}});}catch(e){bp.reject(new PCCViewer.Error("Error",e));}return cK;};SingleSessionViewerControl.prototype.destroy=function(){if(!this.qE){this.Fl=undefined;this.Fb=undefined;this.An=undefined;this.mp=undefined;this.jz=undefined;this.hM=undefined;if(this.bS&&typeof this.bS.dispose==="function"){this.bS.dispose();}this.bA="";this.eP=0;delete this.bS;this.ba=undefined;this.Pr=0;this.dB=undefined;this.aar=false;if(this.eD){IPCC.J.Cz(this.eD);this.eD=this.cB=undefined;}this.mi=false;this.yX=false;this.EE=false;this.bS=undefined;this.PY=undefined;this.Wm=undefined;this.ta=undefined;PCCViewer.MouseTools.rq=undefined;this.na=undefined;this.Fl=undefined;this.Ju=undefined;for(var Hw in this.cf){if(this.cf.hasOwnProperty(Hw)){this.cf[Hw].cX=undefined;this.cf[Hw].dq=undefined;this.cf[Hw].T=undefined;this.cf[Hw]=undefined;}}this.cf=undefined;this.fF=false;this.qE=true;this.ac={on:function FK(){},off:function FK(){},trigger:function FK(){}};this.iV=undefined;this.iV={};}};SingleSessionViewerControl.prototype.aDL=function(){if(this.eD){this.bS.preserveScrollPosition();this.PY=this.eD.childNodes[0];IPCC.J.Cz(this.eD);}};SingleSessionViewerControl.prototype.aCC=function(){if(this.PY){IPCC.J.Cz(this.eD);this.eD.appendChild(this.PY);this.PY=undefined;this.bS.restoreScrollPosition();}};SingleSessionViewerControl.prototype.asb=function(){this.ac.stop();};SingleSessionViewerControl.prototype.aCg=function(){this.ac.resume();};SingleSessionViewerControl.prototype.axw=function(interceptor){this.ac.intercept("ViewerReady",interceptor);};SingleSessionViewerControl.prototype.getMarkById=function(markId){var V=this;if(!isNaN(markId)){markId=parseInt(markId,10);}else{throw "The parameter, markId, contains a value that is not a number.";}if(V.cf[markId]){return V.cf[markId];}else{return null;}};SingleSessionViewerControl.prototype.getMarksByType=function(markType){var Zs=[];if(typeof markType!=="string"){throw "The parameter, markType, is not a String.";}amV(markType);if(!this.bS){return Zs;}var L=0;var cw=this.dB.get_length();var V=this;function aqx(T){var C=V.cf[T.get_markID()];if(C&&C.getType().toLowerCase()===markType.toLowerCase()){Zs.push(C);}};for(L=0;L<cw;L++){var aY=this.bS.gO(this.dB.getPage(L));if(aY){aY.forEachMark(aqx);}}return Zs;};SingleSessionViewerControl.prototype.getAllMarks=function(){var Cf=[];if(!this.bS){return Cf;}var cw=this.dB.get_length();var V=this;var L=0;var C;function Qf(T){var C=V.cf[T.get_markID()];if(typeof C!=='undefined'){Cf.push(C);}};for(L=0;L<cw;L++){var aY=this.bS.gO(this.dB.getPage(L));if(aY){aY.forEachMark(Qf);}}return Cf;};function amV(markType){var ea;switch(markType.toLowerCase()){case "lineannotation":ea=IPCC.Web.UI.MarkType.Line;break;case "rectangleannotation":ea=IPCC.Web.UI.MarkType.Rectangle;break;case "ellipseannotation":ea=IPCC.Web.UI.MarkType.Ellipse;break;case "textannotation":ea=IPCC.Web.UI.MarkType.Text;break;case "stampannotation":ea=IPCC.Web.UI.MarkType.Stamp;break;case "highlightannotation":ea=IPCC.Web.UI.MarkType.HighlightText;break;case "texthyperlinkannotation":ea=IPCC.Web.UI.MarkType.TextHyperlinkAnnotation;break;case "freehandannotation":ea=IPCC.Web.UI.MarkType.Freehand;break;case "rectangleredaction":ea=IPCC.Web.UI.MarkType.RectangleRedaction;break;case "transparentrectangleredaction":ea=IPCC.Web.UI.MarkType.Rectangle;break;case "textredaction":ea=IPCC.Web.UI.MarkType.Text;break;case "stampredaction":ea=IPCC.Web.UI.MarkType.Stamp;break;case "freehandsignature":ea=IPCC.Web.UI.MarkType.SignaturePath;break;case "textsignature":ea=IPCC.Web.UI.MarkType.SignatureText;break;case "textinputsignature":ea=IPCC.Web.UI.MarkType.TextLine;break;case "textareasignature":ea=IPCC.Web.UI.MarkType.TextAreaSignature;break;case "textselectionredaction":ea=IPCC.Web.UI.MarkType.TextSelectionRedaction;break;case "imagestampannotation":ea=IPCC.Web.UI.MarkType.ImageStampAnnotation;break;case "imagestampredaction":ea=IPCC.Web.UI.MarkType.ImageStampRedaction;break;case "polylineannotation":ea=IPCC.Web.UI.MarkType.Polyline;break;case "strikethroughannotation":ea=IPCC.Web.UI.MarkType.Strikethrough;break;default:throw "The parameter, markType, does not specify a valid mark type.";}return ea;};SingleSessionViewerControl.prototype.addMarkFromSearchResult=function(searchResult,markType){var V=this,gy;if(V.fF===false){throw "The method addMarkFromSearchResult is not available until 'ViewerReady' state is reached.";}if(!(searchResult instanceof PCCViewer.SearchResult)){throw new PCCViewer.Error("InvalidArgument","searchResult is not a valid instance of PCCViewer.SearchResult");}if([PCCViewer.Mark.Type.TextSelectionRedaction,PCCViewer.Mark.Type.HighlightAnnotation,PCCViewer.Mark.Type.TextHyperlinkAnnotation,PCCViewer.Mark.Type.StrikethroughAnnotation].indexOf(markType)=== -1){throw new PCCViewer.Error("InvalidArgument","The mark type must be: 'TextSelectionRedaction', 'HighlightAnnotation', 'TextHyperlinkAnnotation' or 'StrikethroughAnnotation'.");}if(searchResult.gy.width===0){var Jd=V.ba.cz.iY(0);gy={width:Jd.kY(),height:Jd.jp()};}else{gy=searchResult.gy;}var acF=IPCC.J.wT(new Date());var markInfo=[{conversation:{comments:[],data:{}},creationDateTime:acF,data:{},interactionMode:'Full',lineGroups:[{lines:searchResult.ab,pageData:gy,pageNumber:searchResult.pageNumber,startIndex:searchResult.startIndexInPage,textLength:searchResult.text.length}],maintainMarkScaling:true,modificationDateTime:acF,pageNumber:searchResult.pageNumber,pageData:gy,reason:"",selectedText:searchResult.text,startIndex:searchResult.startIndexInPage,textLength:searchResult.text.length,type:markType}];var OQ=V.deserializeMarks(markInfo);return OQ[0];};SingleSessionViewerControl.prototype.addMark=function(pageNumber,markType){if(this.fF===false){throw "The method addMark is not available until 'ViewerReady' state is reached.";}var bb;if(typeof(pageNumber)==='number'){bb=pageNumber;}else{if(isNaN(+pageNumber)){throw "The parameter, pageNumber, contains a value that is not a number.";}else{bb=parseInt(pageNumber,10);}}if(bb<1||bb>this.dB.get_length()|| !isFinite(bb)){throw "The specified page is out of range.";}if(typeof markType!=="string"){throw "The parameter, markType, is not a String.";}var C=this.adH(bb,markType);return this.ahY(C);};SingleSessionViewerControl.prototype.adH=function(bb,bC,bP){var V=this;bP=bP||{};var ea=amV(bC);var T=new IPCC.Web.UI.Mark(ea);T.aO=bb-1;var Nu={type:bC,igMark:T,pageNumber:bb,uid:bP.uid,viewerControl:this};if(bC.toLowerCase()==="highlightannotation"||bC.toLowerCase()==="textselectionredaction"||bC.toLowerCase()==="strikethroughannotation"||bC.toLowerCase()==="texthyperlinkannotation"){Nu.dB=V.dB;Nu.bS=V.bS;}if(bC.toLowerCase()==="rectangleredaction"||bC.toLowerCase()==="textselectionredaction"){Nu.enableMultipleRedactionReasons=this.bP.enableMultipleRedactionReasons;}var C=new PCCViewer.Mark(Nu);return C;};SingleSessionViewerControl.prototype.ahY=function(C){var V=this;if(V.afY===true){V.afY=false;}else{var Hf=V.lU;V.lU=function(sender,eventArgs){V.lU=Hf;if(V.wl){V.An.addMarks(C);}setTimeout(function(){V.ac.trigger('MarkCreated',{mark:C,pageNumber:eventArgs.pageIndex+1,clientX:eventArgs.clientX,clientY:eventArgs.clientY});},0);};}var aY=this.bS.gO(this.dB.getPage(C.bb-1));aY.addMark(C.T);V.cf[C.T.get_markID()]=C;V.ph(C,C.bb-1);return C;};SingleSessionViewerControl.prototype.deleteMarks=function(marks){var V=this;var L=0;var C;if(!this.fF){throw "The method deleteMarks can not be used until 'ViewerReady' state is reached.";}function MK(rd){var aO=rd.getPageNumber()-1;var aX='';var bg='';var Fo=aO;var aY=V.bS.gO(V.dB.getPage(aO));aY.removeMark(rd.T);if(V.cf[rd.getId()]){aX=rd.T.aX;bg=rd.getType();delete V.cf[rd.getId()];}var OD=bg.toLowerCase();if((OD==='highlightannotation'||OD==='textselectionredaction'||OD==='strikethroughannotation'||OD==='texthyperlinkannotation')&&(rd.ad&&rd.ad.length)){for(var L=0;L<rd.ad.length;L++){var mX=rd.ad[L];aY=V.bS.gO(V.dB.getPage(mX.aO));aY.removeMark(mX);V.ph(mX,mX.aO);}}V.mp.forEach(function(dS){if(dS.hasMark(rd.getId())){dS.removeMarks(rd);}});};if(marks instanceof Array){for(L=0;L<marks.length;L++){C=marks[L];if(!(C instanceof PCCViewer.Mark)){throw "The parameter, marks, contains an item that is not a Mark.";}if(!(V.cf[C.getId()])){throw "The parameter, marks, contains a Mark that is not on the document.";}}for(L=0;L<marks.length;L++){MK(marks[L]);V.ph(marks[L],marks[L].getPageNumber()-1);}}else{if(marks instanceof PCCViewer.Mark){if(!(V.cf[marks.getId()])){throw "The parameter, marks, contains a Mark that is not on the document.";}MK(marks);V.ph(marks,marks.getPageNumber()-1);}else{throw "The parameter, marks, is not an Array of Marks or a single Mark.";}}return this;};SingleSessionViewerControl.prototype.deleteAllMarks=function(){var Cf=this.getAllMarks();if(Cf.length>0){return this.deleteMarks(Cf);}return this;};SingleSessionViewerControl.prototype.hideMarks=function(marks){amD(this,marks,false,'hideMarks');return this;};SingleSessionViewerControl.prototype.showMarks=function(marks){amD(this,marks,true,'showMarks');return this;};function amD(cF,an,yN,avJ){var L=0;var C;if(!cF.fF){throw new PCCViewer.Error("InvalidArgument","The method "+avJ+" can not be used until 'ViewerReady' state is reached.");}if(an instanceof Array){for(L=0;L<an.length;L++){C=an[L];if(!(C instanceof PCCViewer.Mark)){throw new PCCViewer.Error("InvalidArgument","The parameter, marks, contains an item that is not a Mark.");}if(!(cF.cf[C.getId()])){throw new PCCViewer.Error("InvalidArgument","The parameter, marks, contains a Mark that is not on the document.");}}for(L=0;L<an.length;L++){an[L].setVisible(yN);}}else{if(an instanceof PCCViewer.Mark){if(!(cF.cf[an.getId()])){throw new PCCViewer.Error("InvalidArgument","The parameter, marks, contains a Mark that is not on the document.");}an.setVisible(yN);}else{throw new PCCViewer.Error("InvalidArgument","The parameter, marks, is not an Array of Marks or a single Mark.");}}};function xt(axu,nr){var kz=false;var dF=nr.bS.get_displayedPages();for(var L=0;L<dF.get_length();L++){var aN=dF.getPage(L);if(aN.get_pageNumber()===axu){kz=true;break;}}return kz;};SingleSessionViewerControl.prototype.moveMarkToFront=function(mark){var aY;var hZ;if(!this.fF){throw "The method moveMarkToFront is not available until ViewerReady state is reached.";}if(mark instanceof PCCViewer.Mark){hZ=mark.getPageNumber();if(mark.getPageNumber()>0){aY=this.bS.gO(this.dB.getPage(hZ-1));}else{throw "The mark object has not been added to any page yet";}}else{throw "The parameter, mark object is not a PCCViewer.Mark object";}if(!mark.T){throw "The parameter, mark object is probably a templateMark or has not been initialized";}if(aY){if(mark.T instanceof IPCC.Web.UI.Mark){mark.T.moveToFront();if(xt(hZ-1,this)===true){var nr=this;setTimeout(function(){nr.bS.dh(hZ-1);},1);}}else{throw "The mark object has not been initialized yet";}}return this;};SingleSessionViewerControl.prototype.moveMarkToBack=function(mark){var aY;var hZ;if(!this.fF){throw "The method moveMarkToBack is not available until ViewerReady state is reached.";}if(!(mark instanceof PCCViewer.Mark)){throw "The parameter, mark object is not a PCCViewer.Mark object";}hZ=mark.getPageNumber();if(hZ>=1){aY=this.bS.gO(this.dB.getPage(mark.getPageNumber()-1));}else{throw "The mark object has not been added to any page yet";}if(!mark.T){throw "The parameter, mark may be a templateMark or has not been initialized";}if(aY){if(mark.T instanceof IPCC.Web.UI.Mark){mark.T.moveToBack();if(xt(hZ-1,this)===true){var nr=this;setTimeout(function(){nr.bS.dh(hZ-1);},1);}}else{throw "The mark object has not been initialized yet";}}return this;};SingleSessionViewerControl.prototype.moveMarkForward=function(mark){var aY,hZ;if(!this.fF){throw "The method moveMarkForward is not available until 'ViewerReady' state is reached.";}if(!(mark instanceof PCCViewer.Mark)){throw "The parameter, mark object is not a PCCViewer.Mark object";}hZ=mark.getPageNumber();if(hZ>=1){aY=this.bS.gO(this.dB.getPage(mark.getPageNumber()-1));}else{throw "The mark object has not been added to any page yet";}if(!mark.T){throw "The parameter, mark object is probably a templateMark or has not been initialized";}if(aY){if(mark.T instanceof IPCC.Web.UI.Mark){mark.T.moveForward();if(xt(hZ-1,this)===true){var nr=this;setTimeout(function(){nr.bS.dh(hZ-1);},1);}}else{throw "The mark object has not been initialized yet";}}return this;};SingleSessionViewerControl.prototype.moveMarkBackward=function(mark){var aY,hZ;if(!this.fF){throw "The method moveMarkBackward is not available until ViewerReady state is reached.";}if(!(mark instanceof PCCViewer.Mark)){throw "The parameter, mark object is not a PCCViewer.Mark object";}hZ=mark.getPageNumber();if(hZ>=1){aY=this.bS.gO(this.dB.getPage(mark.getPageNumber()-1));}else{throw "The mark object has not been added to any page yet";}if(!mark.T){throw "The parameter, mark object is probably a templateMark or has not been initialized";}if(aY){if(mark.T instanceof IPCC.Web.UI.Mark){mark.T.moveBackward();if(xt(hZ-1,this)===true){var nr=this;setTimeout(function(){nr.bS.dh(hZ-1);},1);}}else{throw "The mark object has not been initialized yet";}}return this;};SingleSessionViewerControl.prototype.getSelectedMarks=function(){var an=[];var TE=[];if(this.fF===false){return an;}var cw=this.dB.get_length(),aY,ft;var V=this;function aoc(Sa){if(Sa){var Rd=Sa.get_type();if(Rd===IPCC.Web.UI.MarkType.HighlightText||Rd===IPCC.Web.UI.MarkType.TextSelectionRedaction||Rd===IPCC.Web.UI.MarkType.Strikethrough||Rd===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation){for(var iw in V.cf){if(V.cf.hasOwnProperty(iw)){ft=V.cf[iw];if(Sa.aX===ft.T.aX){for(var L=0;L<TE.length;L++){if(ft.T.aX===TE[L]){return;}}TE.push(ft.T.aX);break;}}}}else{ft=V.cf[Sa.get_markID()];}if(ft&&ft instanceof PCCViewer.Mark){an.push(ft);}else{return an;}}};for(var L=0;L<cw;L++){aY=this.bS.gO(this.dB.getPage(L));if(aY){aY.get_selectedMarks().forEach(aoc,{});}}return an;};function acv(an,apE,nr){var ft,L;function TN(hz){var kz=false;var dF=nr.bS.get_displayedPages();for(var L=0;L<dF.get_length();L++){var aN=dF.getPage(L);if(aN.get_pageNumber()===hz){kz=true;break;}}return kz;};if(!an.length){return;}for(L=0;L<an.length;L++){if(an[L]instanceof PCCViewer.Mark){ft=nr.cf[parseInt(an[L].getId(),10)];if(ft&&ft instanceof PCCViewer.Mark){if(ft.T&&ft.T instanceof IPCC.Web.UI.Mark){if(ft.getId()!==ft.T.get_markID().toString()){throw "The mark ID does not match the ID of the mark loaded in the viewer";}}else{throw "The mark provided may not have been added to the document pages in the viewer";}}else{throw "The parameter, marks, contains a Mark that is not on the document.";}}else{throw "The mark provided in the position : "+(L+1)+" is invalid";}}var oT=[];var tn=false;for(L=0;L<an.length;L++){ft=nr.cf[parseInt(an[L].getId(),10)];tn=false;if(ft){if(ft.getId()===ft.T.get_markID().toString()){ft.T.set_selected(apE);if(Array.prototype.IndexOf){tn=(oT.IndexOf(ft.getPageNumber())>=0);}else{tn=(IPCC.Web.lw(oT,ft.getPageNumber())>=0);}}if(!tn){var cA=ft.getPageNumber();if(TN(cA-1)){oT.push(cA);}}}}if(oT.length>0){setTimeout(function(){for(L=0;L<oT.length;L++){nr.bS.dh(oT[L]-1);}},1);}};SingleSessionViewerControl.prototype.selectMarks=function(marks){if(this.fF===false){throw "The method selectMarks is not available until 'ViewerReady' state is reached.";}var an=[];if(marks===undefined){return this;}if(marks&& !(marks instanceof Array)){if(marks instanceof PCCViewer.Mark){an.push(marks);}}else{an=marks;}if(an.length===0){return this;}acv(an,true,this);return this;};SingleSessionViewerControl.prototype.deselectMarks=function(marks){if(this.fF===false){throw "The method deselectMarks is not available until 'ViewerReady' state is reached.";}var an=[];if(marks===undefined){return this;}if(marks&& !(marks instanceof Array)){if(marks instanceof PCCViewer.Mark){an.push(marks);}}else{an=marks;}if(an.length===0){return this;}acv(an,false,this);return this;};SingleSessionViewerControl.prototype.deselectAllMarks=function(){var oT=[];var an=this.getSelectedMarks();var tn=false,L,ft;for(L=0;L<an.length;L++){ft=this.cf[parseInt(an[L].getId(),10)];tn=false;if(ft){if(ft.getId()===ft.T.get_markID().toString()){ft.T.set_selected(false);if(Array.prototype.IndexOf){tn=(oT.IndexOf(ft.getPageNumber())>=0);}else{tn=(IPCC.Web.lw(oT,ft.getPageNumber())>=0);}}if(!tn){var cA=ft.getPageNumber();if(xt(cA-1,this)===true){oT.push(cA);}}}}if(oT.length>0){var nr=this;setTimeout(function(){for(L=0;L<oT.length;L++){nr.bS.dh(oT[L]-1);}},1);}return this;};SingleSessionViewerControl.prototype.copyMarks=function(marks){var cF=this,OQ;if(marks instanceof PCCViewer.Mark){marks=[marks];}if(marks instanceof Array===false){throw new PCCViewer.Error("InvalidArgument","The parameter, marks, is not an Array of Marks or a single Mark.");}var an=[];IPCC.J.forEach(marks,function(C){if(C instanceof PCCViewer.Mark){if(cF.cf[C.getId()]===undefined){throw new PCCViewer.Error("InvalidArgument","The parameter, marks, contains a Mark that is not on the document.");}an.push(C);}else{throw new PCCViewer.Error("InvalidArgument","The parameter, marks, contains an item that is not a Mark.");}});var sx=[];IPCC.J.forEach(an,function(C,aD){eF[C.getType()]({mark:C},function(db,cX){cX.uid=undefined;sx[aD]=cX;});});this.wl=false;OQ=cF.deserializeMarks(sx);this.wl=true;return OQ;};SingleSessionViewerControl.prototype.enterTextMarkEditingMode=function(C){var cF=this,bS=this.bS;var acn=function(VL){var zQ=false,dF=bS.get_displayedPages();for(var L=0;L<dF.get_length();L++){var aN=dF.getPage(L);if(aN.get_pageNumber()===VL){zQ=true;}bS.pY(aN.get_pageNumber());}return zQ;};if(typeof C==="undefined"||C===null){acn(-1);}else{if(this.fF===false){throw PCCViewer.Error("ViewerNotReady","The method selectMarks is not available until 'ViewerReady' state is reached.");}if(!(C instanceof PCCViewer.Mark)){throw new PCCViewer.Error("InvalidArgument","The argument 'mark' must be an instance of PCCViewer.Mark.");}var abq=this.cf[parseInt(C.getId(),10)];if(!(abq&&abq instanceof PCCViewer.Mark)){throw new PCCViewer.Error("InvalidArgument","The provided mark is not on the document.");}if(!(C.T&&C.T instanceof IPCC.Web.UI.Mark)){throw new PCCViewer.Error("InvalidArgument","The provided mark may not have been added to the document pages in the viewer");}if(C.getId()!==C.T.get_markID().toString()){throw new PCCViewer.Error("InvalidArgument","The mark ID does not match the ID of the mark loaded in the viewer");}var bC=C.getType();if(bC!==PCCViewer.Mark.Type.TextAnnotation&&bC!==PCCViewer.Mark.Type.TextRedaction&&bC!==PCCViewer.Mark.Type.TextInputSignature&&bC!==PCCViewer.Mark.Type.TextAreaSignature){throw new PCCViewer.Error("InvalidArgument","The mark type must be: 'TextAnnotation', 'TextRedaction', 'TextInputSignature', or 'TextAreaSignature'.");}var zQ=acn(C.getPageNumber()-1);if(zQ){cF.bS.wI(C.getPageNumber()-1,C.T);}}return this;};SingleSessionViewerControl.prototype.getCharacterIndex=function(sortableObject){if(this.fF===false){throw new Error("The getCharacterIndex method can not be used until 'ViewerReady' state is reached.");}var Hj= -1;var bW;var ax;var bb=0;if(sortableObject instanceof PCCViewer.Mark){if(sortableObject.getStartPoint){bW=sortableObject.getStartPoint();}else{ax=(sortableObject.T)?sortableObject.T.get_boundingRectangle():sortableObject.getRectangle();bW={x:ax.x,y:ax.y};}bb=sortableObject.getPageNumber();}else if(sortableObject instanceof PCCViewer.SearchResult){return sortableObject.startIndexInPage;}else if(sortableObject!==undefined&&sortableObject!==null){if(typeof sortableObject.x==='number'&&typeof sortableObject.y==='number'){bW={x: +sortableObject.x,y: +sortableObject.y};}else{if(isNaN(+sortableObject.x)||isNaN(+sortableObject.y)){throw new Error('The parameter sortableObject does not contain valid x and y values.');}else{bW={x:Number(+sortableObject.x),y:Number(+sortableObject.y)};}}if(typeof sortableObject.pageNumber==='number'){bb= +sortableObject.pageNumber;}else{if(isNaN(+sortableObject.pageNumber)){throw new Error('The parameter sortableObject does not contain a valid pageNumber value.');}else{bb=Number(+sortableObject.pageNumber);}}}else{throw new Error('The sortableObject parameter must be a Mark, SearchResult, or Point.');}if(bb<1||bb>this.getPageCount()|| !isFinite(bb)){throw new RangeError("The parameter pageNumber is out of range.");}if(!this.isPageTextReady(bb)){return-2;}var aN=this.dB.getPage(bb-1);var vH=aN.dr().YD();var gP=aN.dr().gs();function ajJ(bbox,point){if(point.x>bbox.x&&point.x<bbox.x+bbox.width&&point.y>bbox.y&&point.y<bbox.y+bbox.height){return true;}return false;};function akZ(dz,eJ){var bm=Math.max(Math.min(eJ.x,dz.x+dz.width),dz.x);var cu=Math.max(Math.min(eJ.y,dz.y+dz.height),dz.y);return(eJ.x-bm)*(eJ.x-bm)+(eJ.y-cu)*(eJ.y-cu);};var GJ;var Sl=Number.MAX_VALUE;for(var L=0;L<vH.ej();L++){var gL=vH.axD(L);if(ajJ(gL.eT(),bW)){for(var bj=gL.aiC();bj<gL.agZ();bj++){var RA=gP.kI(bj);var sF=RA.rR();if(ajJ(sF,bW)){return bj;}GJ=akZ(sF,bW);if(GJ<Sl){Hj=bj;Sl=GJ;}}return Hj;}GJ=akZ(gL.eT(),bW);if(GJ<Sl){if(gL.eT().y>bW.y){Hj=gL.aiC()-1;}else{Hj=gL.agZ();}Sl=GJ;}}return Hj;};SingleSessionViewerControl.prototype.getCurrentMouseTool=function(){return this.bK.getName();};SingleSessionViewerControl.prototype.setCurrentMouseTool=function(name){var V=this;if(this.fF===false){throw "The method setCurrentMouseTool is not available until 'ViewerReady' state is reached.";}var xT=name.toLowerCase();var bK=PCCViewer.MouseTools.getMouseTool(xT);if(!bK){throw new Error("The name argument for setCurrentMouseTool(name) must be the name of a known mouse tool.");}var hg,hq;switch(bK.getType()){case PCCViewer.MouseTool.Type.Magnifier:hg=IPCC.Web.UI.MouseTool.Magnifier;break;case PCCViewer.MouseTool.Type.SelectToZoom:hg=IPCC.Web.UI.MouseTool.RectangleZoom;break;case PCCViewer.MouseTool.Type.PanAndEdit:case PCCViewer.MouseTool.Type.Pan:hg=IPCC.Web.UI.MouseTool.HandPan;break;case PCCViewer.MouseTool.Type.SelectText:hg=IPCC.Web.UI.MouseTool.SelectText;break;case PCCViewer.MouseTool.Type.EditMarks:hg=IPCC.Web.UI.MouseTool.EditMarks;break;case PCCViewer.MouseTool.Type.LineAnnotation:hg=IPCC.Web.UI.MouseTool.CreateLineMark;hq=aDq(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.RectangleAnnotation:hg=IPCC.Web.UI.MouseTool.CreateRectangleMark;hq=alh(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.RectangleRedaction:hg=IPCC.Web.UI.MouseTool.CreateRectangleRedactionMark;hq=aEh(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.TransparentRectangleRedaction:hg=IPCC.Web.UI.MouseTool.CreateRectangleMark;hq=auC(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.EllipseAnnotation:hg=IPCC.Web.UI.MouseTool.CreateEllipseMark;hq=alh(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextAnnotation:hg=IPCC.Web.UI.MouseTool.CreateTextMark;hq=avw(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextRedaction:hg=IPCC.Web.UI.MouseTool.CreateTextMark;hq=Xs(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextInputSignature:hg=IPCC.Web.UI.MouseTool.CreateTextInputSignatureMark;hq=Xs(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextAreaSignature:hg=IPCC.Web.UI.MouseTool.CreateTextAreaSignatureMark;hq=Xs(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.StampAnnotation:case PCCViewer.MouseTool.Type.StampRedaction:hg=IPCC.Web.UI.MouseTool.CreateStampMark;hq=avU(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.HighlightAnnotation:hg=IPCC.Web.UI.MouseTool.CreateHighlightTextMark;hq=Ow(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextHyperlinkAnnotation:hg=IPCC.Web.UI.MouseTool.CreateTextHyperlinkMark;hq=Ow(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.FreehandAnnotation:hg=IPCC.Web.UI.MouseTool.CreateFreehandMark;hq=asK(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.TextSelectionRedaction:hg=IPCC.Web.UI.MouseTool.CreateTextSelectionRedaction;hq=Ow(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.PlaceSignature:var asf=this.bP.resourcePath+'/placeSignatureCursor.cur';this.bS.set_mouseTool(IPCC.Web.UI.MouseTool.None);this.bS.set_allowMarkEdits(false);this.bS.set_mouseCursor('url('+asf+'), pointer');this.bK=bK;return this;case PCCViewer.MouseTool.Type.ImageStampAnnotation:hg=IPCC.Web.UI.MouseTool.CreateImageStampAnnotationMark;hq=anu(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.ImageStampRedaction:hg=IPCC.Web.UI.MouseTool.CreateImageStampRedactionMark;hq=anu(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.PolylineAnnotation:hg=IPCC.Web.UI.MouseTool.CreatePolylineMark;hq=aDz(bK.getTemplateMark());break;case PCCViewer.MouseTool.Type.StrikethroughAnnotation:hg=IPCC.Web.UI.MouseTool.CreateStrikethroughMark;hq=Ow(bK.getTemplateMark());break;default:throw new Error("An unexpected error occurred. The MouseTool type is not known.");}var atl=this.bS.get_mouseTool();if(this.bK!==bK&&atl===hg){setTimeout(function(){V.ac.trigger(PCCViewer.EventType.MouseToolChanged,{mouseToolName:V.bK.getName()});},0);}this.bK=bK;if(hq){this.Fp=hq.onCreating;this.lU=hq.onAdded;}else{this.Fp=undefined;this.lU=undefined;}this.bS.set_mouseTool(hg);this.bS.set_allowMarkEdits((bK.getType()===PCCViewer.MouseTool.Type.PanAndEdit));return this;};function XD(cF,Un,ky){if(cF.yX!==true){var Io=function(){cF.ac.off('PageCountReady',Io);XD(cF,Un,ky);};cF.ac.on('PageCountReady',Io);return;}var aj=cF;var yr;var kg={},uE={},re=[];var gf=aj.eP;var le;var bP;if(Un){bP=Un;}var acS=[];var YF=aj.ba.get_pages();var axx=function(aN,done){var aHW=false;var iY=aN;var bb=aN.get_pageNumber();var fm=iY.get_pageWidth();var ew=iY.get_pageHeight();try{if(iY){var gO=aj.bS.gO(iY),Bq=0,Cv=0,ef="",aFb=false;var getArt=function getArt(){var MY;if(bP&&bP.Ft&&bP.Ft[bb]){MY=IPCC.J.extend({},bP);MY.Ft=bP.Ft[bb];}else{MY=bP;}var bj,XT;var Jo=gO.aDN(bb,Bq,Cv,MY);if(Jo.kg){kg[bb]=Jo.kg;}else{var auf=ayi(bb,le,Cv,Bq);kg[bb]=auf;}if(Jo.re){for(bj=0;bj<Jo.re.length;bj++){XT=Jo.re[bj];uE[XT.ah.imageStampId]=XT;}}done();};if(gO){if(!fm|| !ew){if(gO.get_markCount()>0){aj.bS.KR(aN,function(ap,aM){Bq=ap;if(Bq){iY.Os(Bq);}Cv=aM;if(Cv){iY.NG(Cv);}getArt();},function(mw){done(mw);});}else{getArt();}}else{Bq=fm;Cv=ew;getArt();}}else{done(new Error("No art page was found"));}}}catch(ex){done(new Error("Error while saving annotation, error:"+ex.message));}};YF.forEach(function(aN,ao,hM){acS.push(function(done){axx(aN,done);});});var Sh=function(bB,aN){var xl="";var L;if(!bB.hG){if(bB.toString()){return bB.toString();}else{return '<![CDATA[]]>';}}if((gf===1||aN===0||(aN>0&&bB.hG!=="documentAnnotations"&&bB.hG!=="pages"))&&bB.hG!=="highlights"){xl='<'+bB.hG;for(var AH in bB.ah){if(bB.ah.hasOwnProperty(AH)){var Vo=bB.ah[AH];if(Vo===undefined||Vo===null){continue;}var ah=Vo.toString();ah=ah.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');xl=xl+' '+AH+'="'+ah+'"';}}xl+='>';}for(L=0;L<bB.dK.length;L++){xl+=Sh(bB.dK[L],aN);}if(gf===1||(aN===gf-1)||(aN!==gf-1&&bB.hG!=="documentAnnotations"&&bB.hG!=="pages"&&bB.hG!=="highlights")){if(bB.hG!=="highlights"){xl+='</'+bB.hG+'>';}else{xl+='<'+bB.hG+' />';}}return xl;};IPCC.J.UY(acS,function(db){if(db){ky(db);return;}yr='<?xml version="1.0"?>';for(var L=0;L<(aj.eP);L++){yr=yr+Sh(kg[L],L);}var stampImageXml='';for(var GY in uE){if(uE.hasOwnProperty(GY)){stampImageXml+=Sh(uE[GY],1);}}if(stampImageXml.length){var stampImagesXml='<stampImages>'+stampImageXml+'</stampImages></documentAnnotations>';yr=yr.replace('</documentAnnotations>',stampImagesXml);}ky(undefined,yr);});};SingleSessionViewerControl.prototype.saveMarkup=function(recordName,options){if(this.bP.enableMultipleRedactionReasons){throw new Error('Saving markup as XML is not supported when enableMultipleRedactionReasons is set to true');}var bp=PCCViewer.Deferred();var cK=bp.getPromise();var bP;if(options){bP=options;}else{bP={includeAnnotations:true,includeRedactions:true,includeSignatures:false};}try{if(typeof recordName!=="string"){bp.reject(new PCCViewer.Error("InvalidArgument","The parameter, recordName, is not a String."));return cK;}if(!aoI(recordName)){bp.reject(new PCCViewer.Error("InvalidCharactersFilename",'Invalid characters in the annotations filename.'));return cK;}var aj=this;this.ta.then(function(rA){var zU=recordName;XD(aj,bP,function(err,yr){if(err){bp.reject(new PCCViewer.Error("Error",err));return cK;}var KD=IPCC.hE.sf(zU);var bA;if(!(/^[\x00-\x7F]*$/.test(aj.ba.get_documentIdentifier()))){bA=aj.bP.imageHandlerUrl+'/Document/q/Art/q?DocumentID=e'+aj.bP.documentID+'&AnnotationID=e'+KD;}else{bA=aj.bP.imageHandlerUrl+'/Document/q/Art/q?DocumentID=u'+encodeURIComponent(aj.bP.documentID)+'&AnnotationID=u'+encodeURIComponent(zU);}function eZ(aC){bp.resolve(zU);setTimeout(function(){aj.ac.trigger('MarkupSaved',{name:zU});},0);};function fM(av){bp.reject(new PCCViewer.Error("AjaxError","Status Code "+av.response.status+" "+av.response.statusText));};PCCViewer.Ajax.fE({method:'POST',url:bA,headers:{'Content-Type':'application/xml;charset=utf-8'},body:yr}).then(eZ,fM);});});}catch(e){bp.reject(new PCCViewer.Error("Error",e.message));}return cK;};var aoI=function(recordName){return!/[\\\/:*?"<>|\x00-\x1f]/.test(recordName);};var Sx=function(la){var bm=la.firstChild;while(bm.nodeType!==1){bm=bm.nextSibling;}return bm;};var ayi=function(cA,le,ew,fm){var kg={hG:'documentAnnotations',dK:[],ah:{}};var aaZ={hG:'pages',dK:[],ah:{}};kg.dK.push(aaZ);var mE={hG:'highlights',dK:[],ah:{}};var aN={hG:'page',dK:[],ah:{id:(cA+1).toString(),pageWidth:fm,pageHeight:ew}};kg.dK.push(mE);try{if(le){var bm=le.getElementsByTagName("documentAnnotations");if(bm.length>1){throw 'ERROR: Invalid PCC annotations XML';}var QB;var Eq;if(document.documentMode<9){var Vs=le.firstChild.nodeName;if(Vs.toLowerCase()==='xml'){QB=le.firstChild.nextSibling;}else{QB=le.firstChild;}}else{QB=le.firstChild;}var cz=Sx(QB);if(cz.nodeName!=='pages'){throw 'ERROR: Problem with pages node in the PCC annotations XML';}if(cz.hasChildNodes()){var L;var nb=false;for(L=0;L<cz.childNodes.length;L++){Eq=cz.childNodes[L];if(Eq.nodeName!=='page'){continue;}var Ad=Eq.getAttribute('id');nb=false;if(Ad&&parseFloat(Ad)===cA+1){nb=true;for(var bj=0;bj<Eq.childNodes.length;bj++){var bk=Eq.childNodes[bj];var aZ={hG:'annotation',dK:[],ah:{}};if(bk.nodeName!=='annotation'){continue;}var Oz=Eq.childNodes[bj].attributes;if(Oz.length>0){for(var cg=0;cg<Oz.length;cg++){aZ.ah[Oz[cg].name]=Oz[cg].value;}}if(bk.childNodes[0].data){aZ.dK.push('<![CDATA['+bk.childNodes[0].data+']]>');}else{aZ.dK.push('');}aN.dK.push(aZ);}break;}}}}aaZ.dK.push(aN);return kg;}catch(e){throw(e.message);}};SingleSessionViewerControl.prototype.loadMarkup=function(recordName,options){var Gz=recordName;var bp=PCCViewer.Deferred(),cK=bp.getPromise(),aj=this;var bP=options||{};var vA=bP.retainExistingMarks;var jy=bP.markupLayer;var ug=bP.loadAsHidden;this.ta.then(function(rA){var bA,KD,bS=aj.bS,dB=aj.dB;if(typeof Gz!=="string"){bp.reject(new PCCViewer.Error("InvalidArgument","The parameter, recordName, is not a String."));}if(vA!==undefined){if(typeof vA!=='boolean'){bp.reject(new PCCViewer.Error('InvalidArgument','The parameter `retainExistingMarks` must be a boolean value if it is specified.'));}}if(jy!==undefined){if(!(jy instanceof PCCViewer.MarkupLayer)){bp.reject(new PCCViewer.Error('InvalidArgument','The parameter `markupLayer` must be an instance of PCCViewer.MarkupLayer if it is specified.'));}if(aj.mp.getItem(jy.getId())===undefined){bp.reject(new PCCViewer.Error('InvalidArgument','The parameter `markupLayer` is a markup layer unknown to the viewer.'));}}function eZ(aC){var Wl,KY=aC.responseText,PD;if(KY.indexOf('xml')=== -1){bp.reject(new PCCViewer.Error("InvalidAnnotationRecord","Did not receive valid annotation record from web server."));return;}KY=KY.replace(/(comment\s+text=")((?:.|[\r\n])*?)("\s+created=")/g,function(match,p1,p2,p3){return p1+IPCC.J.pu(p2)+p3;});if(window.DOMParser){PD=function(xmlStr){return(new window.DOMParser()).parseFromString(xmlStr,"text/xml");};}else if(typeof window.ActiveXObject!=="undefined"&&new window.ActiveXObject("Microsoft.XMLDOM")){PD=function(xmlStr){var xmlDoc=new window.ActiveXObject("Microsoft.XMLDOM");xmlDoc.async="false";xmlDoc.loadXML(xmlStr);return xmlDoc;};}else{PD=function(){return null;};}Wl=PD(KY);var ale=Wl.getElementsByTagName('stampImage');var re={};var UE=function(aD){C.aJ.push(aiz.getPoint(aD));};for(var L=0;L<ale.length;L++){var VH=ale[L];re[VH.getAttribute('imageStampId')]={imageStampId:VH.getAttribute('imageStampId'),base64format:VH.getAttribute('base64format')};}bS.set_annotationXmlDom(Wl,re,vA===true,ug===true);if(vA!==true){aj.cf={};}var cw=aj.dB.get_length();var C;var bC,ea;var wh={};var Ka=[];for(L=0;L<cw;L++){var aY=aj.bS.gO(aj.dB.getPage(L));if(aY){var BG={};var bj=0;for(bj=0;bj<aY.get_markCount();bj++){var T=aY.getMark(bj);if(aj.cf[T.get_markID()]!==undefined){continue;}ea=T.get_type();switch(ea){case IPCC.Web.UI.MarkType.Rectangle:if(T.hL()===true){if(T.get_opacity()===255){bC=PCCViewer.Mark.Type.RectangleRedaction;}else{bC=PCCViewer.Mark.Type.TransparentRectangleRedaction;}C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,uid:T.ah.kS});}else{bC=PCCViewer.Mark.Type.RectangleAnnotation;C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,uid:T.ah.kS});C.lp=T.get_lineWidth();C.cP=T.get_fillColor();C.jK=T.get_lineColor();C.dg=T.get_opacity();}break;case IPCC.Web.UI.MarkType.Ellipse:bC=PCCViewer.Mark.Type.EllipseAnnotation;C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,uid:T.ah.kS});C.lp=T.get_lineWidth();C.cP=T.get_fillColor();C.jK=T.get_lineColor();C.dg=T.get_opacity();break;case IPCC.Web.UI.MarkType.Line:bC=PCCViewer.Mark.Type.LineAnnotation;C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,uid:T.ah.kS});C.nK=T.get_lineWidth();C.dR=T.get_lineColor();C.dg=T.get_opacity();if(T.get_endHeadType()===IPCC.Web.UI.LineHeadType.Solid){C.nt="FilledTriangle";}else{C.nt="None";}break;case IPCC.Web.UI.MarkType.Stamp:if(T.hL()===true){bC=PCCViewer.Mark.Type.StampRedaction;C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,uid:T.ah.kS});}else{bC=PCCViewer.Mark.Type.StampAnnotation;C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,uid:T.ah.kS});C.dR=T.get_fillColor();}C.vf=T.get_text();break;case IPCC.Web.UI.MarkType.Text:if(T.hL()===true){bC=PCCViewer.Mark.Type.TextRedaction;C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,uid:T.ah.kS});}else{bC=PCCViewer.Mark.Type.TextAnnotation;C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,uid:T.ah.kS});C.lp=T.get_lineWidth();C.cP=T.get_fillColor();C.jK=T.get_lineColor();C.dg=T.get_opacity();}C.hD=T.get_maxLength();C.gb=T.get_fontName();C.hF=T.get_textColor();C.ck=T.get_fontSize();var cV=T.get_fontStyle();var sX=[];if((cV&IPCC.Web.UI.FontStyle.Bold)===IPCC.Web.UI.FontStyle.Bold){sX.push("Bold");}if((cV&IPCC.Web.UI.FontStyle.Italic)===IPCC.Web.UI.FontStyle.Italic){sX.push("Italic");}if((cV&IPCC.Web.UI.FontStyle.Strikeout)===IPCC.Web.UI.FontStyle.Strikeout){sX.push("Strikeout");}if((cV&IPCC.Web.UI.FontStyle.Underline)===IPCC.Web.UI.FontStyle.Underline){sX.push("Underline");}C.cV=sX;var qx;switch(T.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:qx="center";break;case IPCC.Web.UI.HorizontalAlignment.Left:qx="left";break;case IPCC.Web.UI.HorizontalAlignment.Right:qx="right";break;}C.lQ=qx;break;case IPCC.Web.UI.MarkType.TextAreaSignature:bC=PCCViewer.Mark.Type.TextAreaSignature;C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,uid:T.ah.kS});C.lp=T.get_lineWidth();C.hD=T.get_maxLength();C.gb=T.get_fontName();C.hF=T.get_textColor();C.fg=T.get_maxFontSize();cV=T.get_fontStyle();sX=[];if((cV&IPCC.Web.UI.FontStyle.Bold)===IPCC.Web.UI.FontStyle.Bold){sX.push("Bold");}if((cV&IPCC.Web.UI.FontStyle.Italic)===IPCC.Web.UI.FontStyle.Italic){sX.push("Italic");}if((cV&IPCC.Web.UI.FontStyle.Strikeout)===IPCC.Web.UI.FontStyle.Strikeout){sX.push("Strikeout");}if((cV&IPCC.Web.UI.FontStyle.Underline)===IPCC.Web.UI.FontStyle.Underline){sX.push("Underline");}C.cV=sX;switch(T.get_textHorizontalAlignment()){case IPCC.Web.UI.HorizontalAlignment.Center:qx="center";break;case IPCC.Web.UI.HorizontalAlignment.Left:qx="left";break;case IPCC.Web.UI.HorizontalAlignment.Right:qx="right";break;}C.lQ=qx;break;case IPCC.Web.UI.MarkType.HighlightText:case IPCC.Web.UI.MarkType.TextHyperlinkAnnotation:case IPCC.Web.UI.MarkType.TextSelectionRedaction:case IPCC.Web.UI.MarkType.Strikethrough:bC=(ea===IPCC.Web.UI.MarkType.HighlightText)?PCCViewer.Mark.Type.HighlightAnnotation:(ea===IPCC.Web.UI.MarkType.TextHyperlinkAnnotation)?PCCViewer.Mark.Type.TextHyperlinkAnnotation:(ea===IPCC.Web.UI.MarkType.Strikethrough)?PCCViewer.Mark.Type.StrikethroughAnnotation:PCCViewer.Mark.Type.TextSelectionRedaction;var ZJ=T.aX;if(typeof wh[ZJ]==='undefined'){C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,dB:dB,bS:bS,uid:T.ah.kS});C.ad=[];if(bC===PCCViewer.Mark.Type.HighlightAnnotation){C.cP=T.get_fillColor();}wh[ZJ]=C;T.aO=L;T.kJ=true;}else{T.aO=L;wh[ZJ].ad.push(T);}break;case IPCC.Web.UI.MarkType.Freehand:bC=PCCViewer.Mark.Type.FreehandAnnotation;C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,uid:T.ah.kS});C.nK=T.get_lineWidth();C.dR=T.get_lineColor();C.dg=T.get_opacity();break;case IPCC.Web.UI.MarkType.SignaturePath:bC=PCCViewer.Mark.Type.FreehandSignature;C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,uid:T.ah.kS});C.nK=T.get_lineWidth();C.dR=T.get_lineColor();break;case IPCC.Web.UI.MarkType.SignatureText:bC=PCCViewer.Mark.Type.TextSignature;C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,uid:T.ah.kS});C.gb=T.get_fontName();C.dR=T.get_fillColor();C.aS=T.get_text();break;case IPCC.Web.UI.MarkType.TextLine:bC=PCCViewer.Mark.Type.TextInputSignature;C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,uid:T.ah.kS});C.gb=T.get_fontName();C.hF=T.get_textColor();C.aS=T.get_text();C.hD=T.get_maxLength();C.hT=T.get_mask();break;case IPCC.Web.UI.MarkType.RectangleRedaction:if(!T.aX){bC=PCCViewer.Mark.Type.RectangleRedaction;C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,dB:dB,bS:bS,uid:T.ah.kS});C.lp=T.get_lineWidth();C.cP=T.get_fillColor();C.jK=T.get_lineColor();C.dg=T.get_opacity();}else{if(BG[T.aX]===undefined){BG[T.aX]=[];}BG[T.aX].push(T);}break;case IPCC.Web.UI.MarkType.ImageStampAnnotation:case IPCC.Web.UI.MarkType.ImageStampRedaction:bC=(ea===IPCC.Web.UI.MarkType.ImageStampAnnotation)?PCCViewer.Mark.Type.ImageStampAnnotation:PCCViewer.Mark.Type.ImageStampRedaction;C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,uid:T.ah.kS});C.setImage({dataUrl:T.get_image(),id:T.pF});break;case IPCC.Web.UI.MarkType.Polyline:bC=PCCViewer.Mark.Type.PolylineAnnotation;C=new PCCViewer.Mark({type:bC,igMark:T,pageNumber:L+1,uid:T.ah.kS});C.nK=T.get_lineWidth();C.dR=T.get_lineColor();C.dg=T.get_opacity();var aiz=T.get_points();C.aJ=[];for(var aU=0;aU<aiz.get_length();aU++){UE(aU);}break;default:C=undefined;continue;}if(typeof C!=='undefined'&&ea!==IPCC.Web.UI.MarkType.HighlightText&& !(ea===IPCC.Web.UI.MarkType.RectangleRedaction&&T.aX!==undefined)&&ea!==IPCC.Web.UI.MarkType.TextSelectionRedaction&&ea!==IPCC.Web.UI.MarkType.TextHyperlinkAnnotation&&ea!==IPCC.Web.UI.MarkType.Strikethrough){aj.cf[T.get_markID()]=C;Ka.push(C);}}for(var RC in BG){if(BG.hasOwnProperty(RC)&&wh[RC]){var Ds=wh[RC];var aeO=Ds.T;if(Ds.ad&&Ds.ad.length>0){for(var Mg=0;Mg<Ds.ad.length;Mg++){if(Ds.ad[Mg].aO===L){aeO=Ds.ad[Mg];}}}var ab=BG[RC];for(var Xm=0;Xm<ab.length;Xm++){aeO.ab.push(ab[Xm]);}}}}}for(var ox in wh){if(wh.hasOwnProperty(ox)){var xh=wh[ox];aj.cf[xh.T.get_markID()]=xh;Ka.push(xh);if(xh.ad&&xh.ad.length>0){xh.ad[xh.ad.length-1].kB=true;}else{xh.T.kB=true;}}}bp.resolve(Gz);if(jy!==undefined){jy.addMarks(Ka);}else{aj.getActiveMarkupLayer().addMarks(Ka);}aj.ac.trigger('MarkupLoaded',{name:Gz,loadedMarks:Ka});};function fM(av){bp.reject(new PCCViewer.Error("Error","Status Code "+av.response.status+" "+av.response.statusText));};KD=IPCC.hE.sf(Gz);if(!(/^[\x00-\x7F]*$/.test(aj.ba.get_documentIdentifier()))){bA=aj.bP.imageHandlerUrl+'/Document/q/Art/q?DocumentID=e'+aj.bP.documentID+'&AnnotationID=e'+KD;}else{bA=aj.bP.imageHandlerUrl+'/Document/q/Art/q?DocumentID=u'+encodeURIComponent(aj.bP.documentID)+'&AnnotationID=u'+encodeURIComponent(Gz);}PCCViewer.Ajax.fE({method:'GET',url:bA,headers:{'Content-Type':'application/x-www-form-urlencoded'}}).then(eZ,fM);});return cK;};function akS(context,message){var mA=document.createElement('div'),Cw=document.createElement('div'),mf=document.createElement('button'),UH=function(){mA.classList.add('open');},NS=function(){if(mA.parentNode!==null){mA.parentNode.removeChild(mA);}};mf.innerHTML='&#215;';mf.setAttribute('type','button');Cw.innerHTML='<p>PrizmDoc Viewer is running in evaluation mode with a fixed feature set. <b>'+message+'</b>';mA.className='pccPageListNagModal';mA.appendChild(mf);mA.appendChild(Cw);context.cB.appendChild(mA);UH();if(!mf.addEventListener){mf.attachEvent('onclick',NS);}else{mf.addEventListener('click',NS,false);}};SingleSessionViewerControl.prototype.getSavedMarkupNames=function(){var bp=PCCViewer.Deferred();var cK=bp.getPromise();var V=this;try{var L=0,Kt=0;var zU='';var bA=this.bP.imageHandlerUrl+'/AnnotationList/q/Art/q?DocumentID=u'+encodeURIComponent(this.bP.documentID)+'&AnnotationID=u'+encodeURIComponent(zU);var eZ=function(aC){var uf;if(typeof aC.responseText!=='unknown'&&aC.responseText.length>0){try{uf=JSON.parse(aC.responseText);}catch(e){}}var Zy=[],Kt=0;for(var L=0,cr=uf.annotationFiles.length;L<cr;L++){if(uf.annotationFiles[L].annotationLabel){Zy[Kt]={};Zy[Kt].name=uf.annotationFiles[L].annotationLabel;Kt++;}}bp.resolve(Zy);};var fM=function(av){var error=new PCCViewer.Error("MarkupListFail","Unable to retrieve markup list from server.");if(av&&av.response){var iq=av.response.status;var lC;try{lC=JSON.parse(av.response.responseText);}catch(e){}if(iq===480&&lC&&lC.errorCode==='LicenseCouldNotBeVerified'){akS(V,'Loading annotations is disabled in evaluation mode.');error=new PCCViewer.Error(lC.errorCode,"License error.");}}bp.reject(error);};PCCViewer.Ajax.fE({method:'GET',url:bA}).then(eZ,fM);}catch(e){bp.reject(new PCCViewer.Error("Error",e.message));}return cK;};SingleSessionViewerControl.prototype.getMarkupLayerCollection=function(){if(!this.mp){this.mp=new PCCViewer.MarkupLayerCollection(this);}return this.mp;};SingleSessionViewerControl.prototype.requestMarkupLayerNames=function(metadata){var bp=PCCViewer.Deferred(),cK=bp.getPromise(),bA,avx=function(obj){var parts=[];for(var key in obj){if(obj.hasOwnProperty(key)&&(typeof obj[key]==='string'||typeof obj[key]==='boolean'||typeof obj[key]==='number')){parts.push(encodeURIComponent(key)+'='+encodeURIComponent(obj[key]));}}return "?"+parts.join('&');};if(!(/^[\x00-\x7F]*$/.test(this.ba.get_documentIdentifier()))){bA=this.bP.imageHandlerUrl+'/MarkupLayers/e'+this.bP.documentID+'/';}else{bA=this.bP.imageHandlerUrl+'/MarkupLayers/u'+encodeURIComponent(this.bP.documentID)+'/';}if(metadata){var aBg=avx(metadata);bA+=aBg;}bA+='?nocache='+new Date().getTime();PCCViewer.Ajax.fE({url:bA,method:'GET'}).then(function eZ(aC){var aAO=JSON.parse(aC.responseText);bp.resolve(aAO);},function fM(av){bp.reject(av.error);});return cK;};SingleSessionViewerControl.prototype.getActiveMarkupLayer=function(){return this.An;};SingleSessionViewerControl.prototype.setActiveMarkupLayer=function(markupLayer){if(!(markupLayer instanceof PCCViewer.MarkupLayer)){throw new PCCViewer.Error('InvalidArgument','The parameter `markupLayer` must be an instance of PCCViewer.MarkupLayer.');}if(this.mp.getItem(markupLayer.getId())===undefined){throw new PCCViewer.Error('InvalidArgument','The parameter `markupLayer` is a markup layer unknown to the viewer.');}this.An=markupLayer;};SingleSessionViewerControl.prototype.loadMarkupLayers=function(layerRecordIds,options){var aaN,V=this;aaN=new PCCViewer.LoadMarkupLayersRequest(layerRecordIds,this.YU,options||{});function xG(){setTimeout(function(){aaN.Gu();},20);};function nd(){V.ac.off(PCCViewer.EventType.PageCountReady,nd);xG();};if(this.mi===false){V.ac.on(PCCViewer.EventType.PageCountReady,nd);}else{xG();}return aaN;};SingleSessionViewerControl.prototype.saveMarkupLayer=function(id){var bp=PCCViewer.Deferred();var cK=bp.getPromise();var V=this;if(typeof id!=='string'|| !id){bp.reject(new PCCViewer.Error('InvalidArgument','The parameter `id` is not a string.'));return cK;}var dS=this.mp?this.mp.getItem(id):undefined;if(!dS){bp.reject(new PCCViewer.Error('UnknownLayerRecord','The layer record '+id+' is not known to ViewerControl'));return cK;}function avR(qO){var PN=dS.getMarks();if(!PN.length){qO(undefined,[]);}else{V.serializeMarks(PN).then(function iy(an){qO(undefined,IPCC.J.map(an,function(C){if(C.conversation&&C.conversation.comments){delete C.conversation.comments;}return C;}));},function _f(ef){qO(ef);});}};function azm(qO){var PN=dS.getMarks();var Xv=function(fa,gX,jG){var aaX=IPCC.J.filter(gX,function(nA){return!nA.jy||nA.jy===dS;});IPCC.J.forEach(aaX,function(cC){var bQ=eF.Comment(cC);bQ.markUid=jG;fa.push(bQ);});return fa;};var ZG=IPCC.J.reduce(PN,function(fa,C){var dq=C.getConversation();var gX=dq.getComments();return gX.length?Xv(fa,gX,C.getUid()):fa;},[]);qO(undefined,ZG);};function aGx(qO){var avc=IPCC.J.reduce(V.mp.getAll(),function(fa,ahb){return fa.concat(dS===ahb?[]:ahb.getMarks());},[]);var Xv=function(fa,gX,jG){var aaX=IPCC.J.filter(gX,function(nA){return nA.jy===dS;});IPCC.J.forEach(aaX,function(nA){var bQ=eF.Comment(nA);bQ.markUid=jG;fa.push(bQ);});return fa;};var ZG=IPCC.J.reduce(avc,function(fa,C){var dq=C.getConversation();var gX=dq.getComments();return gX.length?Xv(fa,gX,C.getUid()):fa;},[]);qO(undefined,ZG);};var acz=[],aCr=function(qa){if(qa.markupLayer===dS){acz.push({text:qa.text,data:qa.data,creationDateTime:qa.creationDateTime,markUid:qa.markUid});}};for(var afR in this.mp.jn){if(this.mp.jn.hasOwnProperty(afR)){IPCC.J.forEach(this.mp.jn[afR],aCr);}}var yO={layerRecordId:dS.getRecordId(),name:dS.getName(),originalXmlName:dS.getOriginalXmlName(),comments:acz,data:eF.Data(dS)};var xv;IPCC.J.UY([function(lP){avR(function(db,cX){if(db&& !xv){xv=db;}else{yO.marks=cX;}lP();});},function(lP){azm(function(db,cX){if(db&& !xv){xv=db;}else{yO.comments=yO.comments.concat(cX);}lP();});},function(lP){aGx(function(db,cX){if(db&& !xv){xv=db;}else{yO.comments=yO.comments.concat(cX);}lP();});}],function(){if(!xv){aEV(yO);}else{bp.reject(new PCCViewer.Error('SerializationError',xv.message));}});function aEV(aGr){var wy,gT={method:'POST',body:JSON.stringify(yO),headers:{'Content-Type':'application/json;charset=utf-8'}};if(!(/^[\x00-\x7F]*$/.test(V.ba.get_documentIdentifier()))){wy=V.bP.imageHandlerUrl+'/MarkupLayers/e'+V.bP.documentID+'/';}else{wy=V.bP.imageHandlerUrl+'/MarkupLayers/u'+encodeURIComponent(V.bP.documentID)+'/';}if(dS.getRecordId()){gT.url=wy+dS.getRecordId();gT.headers['X-HTTP-Method-Override']='PUT';}else{gT.url=wy;}PCCViewer.Ajax.fE(gT).then(eZ,fM);};function eZ(aC){if(aC.responseText&&typeof aC.responseText==='string'){var lC;try{lC=JSON.parse(aC.responseText);}catch(e){}if(lC&&lC.layerRecordId){dS.YL=lC.layerRecordId;}}bp.resolve({layerRecordId:dS.getRecordId()});};function fM(av){var error=new PCCViewer.Error("AjaxError",av.error.message||'An unknown server error occurred.');if(av&&av.response){var iq=av.response.status;var lC;try{lC=JSON.parse(av.response.responseText);}catch(e){}if(iq===480&&lC&&lC.errorCode==='LicenseCouldNotBeVerified'){akS(V,'Saving annotations is disabled in evaluation mode.');error=new PCCViewer.Error(lC.errorCode,'License error.');}}bp.reject(error);};return cK;};SingleSessionViewerControl.prototype.burnMarkup=function(burnOptions){var ja={burnSignatures:true,burnRedactions:true,burnAnnotations:false,redactionOptions:{mode:PCCViewer.RedactionViewMode.Normal,draftOptions:{opacity:0.2}}};var Lx;var aip;var UT;var aKB=false;if(burnOptions){if(typeof burnOptions.marks==='object'){if(burnOptions.marks instanceof PCCViewer.Mark){Lx=[burnOptions.marks];}else if(burnOptions.marks instanceof Array){Lx=burnOptions.marks;}ja={marks:Lx};}else{ja.burnSignatures=(burnOptions.burnSignatures!==undefined)? ! !burnOptions.burnSignatures:ja.burnSignatures;ja.burnRedactions=(burnOptions.burnRedactions!==undefined)? ! !burnOptions.burnRedactions:ja.burnRedactions;ja.burnAnnotations=(burnOptions.burnAnnotations!==undefined)? ! !burnOptions.burnAnnotations:ja.burnAnnotations;}if(typeof burnOptions.filename==='string'){ja.filename=burnOptions.filename;}if(burnOptions.removeFormFields!==undefined){if(burnOptions.removeFormFields instanceof Array){if(burnOptions.removeFormFields.length>0){var Po,Ht=true;for(Po=0;Po<burnOptions.removeFormFields.length;Po++){if(burnOptions.removeFormFields[Po]!=='acroform'){Ht=false;}}if(Ht){ja.removeFormFields=['acroform'];}else{ja.mw={code:'InvalidArgument',message:'The burnOptions.removeFormFields parameter contains an invalid form type.'};}}else{ja.mw={code:'InvalidArgument',message:'The burnOptions.removeFormFields parameter must specify a valid form type.'};}}else{ja.mw={code:'InvalidArgument',message:'The burnOptions.removeFormFields parameter must be an Array if defined.'};}}if(burnOptions.redactionOptions!==undefined&&typeof burnOptions.redactionOptions==='object'){if(typeof burnOptions.redactionOptions.mode==="string"){if(burnOptions.redactionOptions.mode.toLowerCase()==="draft"){ja.redactionOptions={mode:PCCViewer.RedactionViewMode.Draft.toLowerCase()};}else{ja.redactionOptions={mode:PCCViewer.RedactionViewMode.Normal.toLowerCase()};}}else{ja.mw={code:'InvalidArgument',message:'The burnOptions.redactionOptions.mode parameter must be a string if defined.'};}if(typeof burnOptions.redactionOptions.draftOptions==='object'){if(typeof burnOptions.redactionOptions.draftOptions.opacity==='number'){ja.redactionOptions.draftOptions={opacity:burnOptions.redactionOptions.draftOptions.opacity};}else{ja.mw={code:'InvalidArgument',message:'The burnOptions.redactionOptions.draftOptions.opacity parameter must be a number value.'};}}}}var zb=new PCCViewer.BurnRequest(ja),V=this;if(Lx){var eW=[];for(var L=0,cr=this.getPageCount();L<cr;L++){eW[L]=[];}eW=IPCC.J.reduce(Lx,function(an,au){var bb=au.getPageNumber()-1;if(!(typeof au==='object'&&au instanceof PCCViewer.Mark&&au.T)){zb.aab(new Error('The burnOptions.marks parameter is an invalid object.'));return an;}if(!V.getMarkById(au.ds)){zb.aab(new Error('The burnOptions.marks parameter contains a mark not known to Viewer Control.'));return an;}an[bb].push(au.T);if(au.T.ab){for(var L=0,cr=au.T.ab.length;L<cr;L++){if(au.T.ab[L]instanceof IPCC.Web.UI.Mark){an[bb].push(au.T.ab[L]);}}}if(au.ad){for(var bj=0,aAB=au.ad.length;bj<aAB;bj++){an[bb+1+bj].push(au.ad[bj]);if(au.ad[bj].ab){for(var cg=0,azH=au.ad[bj].ab.length;cg<azH;cg++){if(au.ad[bj].ab[cg]instanceof IPCC.Web.UI.Mark){an[bb+1+bj].push(au.ad[bj].ab[cg]);}}}}}return an;},eW);UT={Ft:eW,uQ:true};}else{UT={includeAnnotations:ja.burnAnnotations,includeRedactions:ja.burnRedactions,includeSignatures:ja.burnSignatures,uQ:true};}function abK(){XD(V,UT,function(db,aip){if(db){setTimeout(function(){zb.aab(db);},20);}else{zb.La({ba:V.ba,bP:V.bP});zb.anC(aip);setTimeout(function(){zb.Gu();},20);}});};function nd(){V.ac.off(PCCViewer.EventType.PageCountReady,nd);abK();};if(this.mi===false){V.ac.on(PCCViewer.EventType.PageCountReady,nd);}else{abK();}return zb;};SingleSessionViewerControl.prototype.convertDocument=function(AJ){var vS,V=this,Cl={targetExtension:'pdf',filename:'document'},bP={};rz.sq(bP,Cl,AJ);bP.zj=1;vS=new PCCViewer.ConversionRequest(bP);function xG(){vS.La({ba:V.ba,bP:V.bP});setTimeout(function(){vS.Gu(bP);},20);};function nd(){V.ac.off(PCCViewer.EventType.PageCountReady,nd);xG();};if(this.mi===false){V.ac.on(PCCViewer.EventType.PageCountReady,nd);}else{xG();}return vS;};SingleSessionViewerControl.prototype.requestDocumentConversion=function(AJ){var vS,V=this,Cl={targetExtension:'pdf',filename:'document'},bP={};rz.sq(bP,Cl,AJ);bP.zj=2;vS=new PCCViewer.ConversionRequest(bP);function xG(){vS.La({ba:V.ba,bP:V.bP});setTimeout(function(){vS.Gu(bP);},20);};function nd(){V.ac.off(PCCViewer.EventType.PageCountReady,nd);xG();};if(this.mi===false){V.ac.on(PCCViewer.EventType.PageCountReady,nd);}else{xG();}return vS;};SingleSessionViewerControl.prototype.loadAttachments=function(){var bp=PCCViewer.Deferred();var cK=bp.getPromise();try{var L=0,Kt=0;var zU='';var bA=this.bP.imageHandlerUrl+'/ViewingSession/u'+encodeURIComponent(this.bP.documentID)+'/Attachments';var aBo=function(aC){var Fh=JSON.parse(aC.responseText);if(Fh===null||Fh.status!=='complete'){setTimeout(ajz,500);return;}bp.resolve(Fh.attachments||[]);};var fM=function(av){bp.reject(new PCCViewer.Error("AttachmentListFail","Unable to retrieve attachment list from server."));};var ajz=function(){PCCViewer.Ajax.fE({method:'GET',url:bA}).then(aBo,fM);};ajz();}catch(e){bp.reject(new PCCViewer.Error("Error",e.message));}return cK;};function ti(){return function(sender,eventArgs){var V=this;var C=V.cf[eventArgs.mark.get_markID()];if(V.wl){V.An.addMarks(C);}setTimeout(function(){if(C){V.ac.trigger('MarkCreated',{mark:C,pageNumber:eventArgs.pageIndex+1,clientX:eventArgs.clientX,clientY:eventArgs.clientY});}},0);};};function aDq(ak){return{onCreating:function(aH,F){var C=new PCCViewer.Mark({type:ak.getType(),igMark:F.mark,pageNumber:F.pageIndex+1,enableMultipleRedactionReasons:this.bP.enableMultipleRedactionReasons});this.cf[F.mark.get_markID()]=C;C.setThickness(ak.getThickness());C.setColor(ak.getColor());C.setOpacity(ak.getOpacity());C.setEndHeadType(ak.getEndHeadType());PCCViewer.Data.oX(ak,C);PCCViewer.Conversation.qs(ak.getConversation(),C.getConversation());},onAdded:ti()};};function alh(ak){return{onCreating:function(aH,F){var C=new PCCViewer.Mark({type:ak.getType(),igMark:F.mark,pageNumber:F.pageIndex+1,enableMultipleRedactionReasons:this.bP.enableMultipleRedactionReasons});this.cf[F.mark.get_markID()]=C;C.setBorderThickness(ak.getBorderThickness());C.setFillColor(ak.getFillColor());C.setBorderColor(ak.getBorderColor());C.setOpacity(ak.getOpacity());PCCViewer.Data.oX(ak,C);PCCViewer.Conversation.qs(ak.getConversation(),C.getConversation());},onAdded:ti()};};function auC(ak){return{onCreating:function(aH,F){var C=new PCCViewer.Mark({type:ak.getType(),igMark:F.mark,pageNumber:F.pageIndex+1,enableMultipleRedactionReasons:this.bP.enableMultipleRedactionReasons});this.cf[F.mark.get_markID()]=C;},onAdded:ti()};};function aEh(ak){return{onCreating:function(aH,F){var C=new PCCViewer.Mark({type:ak.getType(),igMark:F.mark,pageNumber:F.pageIndex+1,enableMultipleRedactionReasons:this.bP.enableMultipleRedactionReasons});this.cf[F.mark.get_markID()]=C;if(C.oR){C.setReasons(ak.getReasons());}else{C.setReason(ak.getReason());}C.setBorderThickness(ak.getBorderThickness());C.setFillColor(ak.getFillColor());C.setBorderColor(ak.getBorderColor());C.setFontColor(ak.getFontColor());PCCViewer.Data.oX(ak,C);PCCViewer.Conversation.qs(ak.getConversation(),C.getConversation());},onAdded:ti()};};function avw(ak){return{onCreating:function(aH,F){var C=new PCCViewer.Mark({type:ak.getType(),igMark:F.mark,pageNumber:F.pageIndex+1,enableMultipleRedactionReasons:this.bP.enableMultipleRedactionReasons});this.cf[F.mark.get_markID()]=C;C.setBorderThickness(ak.getBorderThickness());C.setFillColor(ak.getFillColor());C.setBorderColor(ak.getBorderColor());C.setOpacity(ak.getOpacity());C.setFontName(ak.getFontName());C.setFontColor(ak.getFontColor());C.setFontSize(ak.getFontSize());C.setFontStyle(ak.getFontStyle());C.setHorizontalAlignment(ak.getHorizontalAlignment());PCCViewer.Data.oX(ak,C);PCCViewer.Conversation.qs(ak.getConversation(),C.getConversation());},onAdded:ti()};};function Xs(ak){return{onCreating:function(aH,F){var C=new PCCViewer.Mark({type:ak.getType(),igMark:F.mark,pageNumber:F.pageIndex+1,enableMultipleRedactionReasons:this.bP.enableMultipleRedactionReasons});this.cf[F.mark.get_markID()]=C;C.setFontName(ak.getFontName());C.setFontColor(ak.getFontColor());C.setText(ak.getText());if(C.cP&&ak.cP!=='transparent'){C.setFillColor(ak.getFillColor());}if(C.setFontSize){C.setFontSize(ak.getFontSize());}if(C.setOpacity){C.setOpacity(ak.getOpacity());}if(C.setBorderColor&&ak.jK!=='transparent'){C.setBorderColor(ak.getBorderColor());C.setBorderThickness(ak.getBorderThickness());}PCCViewer.Data.oX(ak,C);PCCViewer.Conversation.qs(ak.getConversation(),C.getConversation());},onAdded:ti()};};function avU(ak){return{onCreating:function(aH,F){var C=new PCCViewer.Mark({type:ak.getType(),igMark:F.mark,pageNumber:F.pageIndex+1,enableMultipleRedactionReasons:this.bP.enableMultipleRedactionReasons});this.cf[F.mark.get_markID()]=C;if(ak.getType()===PCCViewer.MouseTool.Type.StampAnnotation){C.setColor(ak.getColor());}C.setLabel(ak.getLabel());PCCViewer.Data.oX(ak,C);PCCViewer.Conversation.qs(ak.getConversation(),C.getConversation());},onAdded:ti()};};var aIs;function Ow(ak){return{onCreating:function(aH,F){},onAdded:ti()};};function asK(ak){return{onCreating:function(aH,F){var C=new PCCViewer.Mark({type:ak.getType(),igMark:F.mark,pageNumber:F.pageIndex+1,enableMultipleRedactionReasons:this.bP.enableMultipleRedactionReasons});this.cf[F.mark.get_markID()]=C;C.setThickness(ak.getThickness());C.setColor(ak.getColor());C.setOpacity(ak.getOpacity());PCCViewer.Data.oX(ak,C);PCCViewer.Conversation.qs(ak.getConversation(),C.getConversation());},onAdded:ti()};};function anu(ak){return{onCreating:function(aH,F){var C=new PCCViewer.Mark({type:ak.getType(),igMark:F.mark,pageNumber:F.pageIndex+1,enableMultipleRedactionReasons:this.bP.enableMultipleRedactionReasons});this.cf[F.mark.get_markID()]=C;C.setImage(ak.getImage());PCCViewer.Data.oX(ak,C);PCCViewer.Conversation.qs(ak.getConversation(),C.getConversation());},onAdded:ti()};};function aDz(ak){return{onCreating:function(aH,F){var C=new PCCViewer.Mark({type:ak.getType(),igMark:F.mark,pageNumber:F.pageIndex+1,enableMultipleRedactionReasons:this.bP.enableMultipleRedactionReasons});this.cf[F.mark.get_markID()]=C;C.setThickness(ak.getThickness());C.setColor(ak.getColor());C.setOpacity(ak.getOpacity());PCCViewer.Data.oX(ak,C);PCCViewer.Conversation.qs(ak.getConversation(),C.getConversation());},onAdded:ti()};};SingleSessionViewerControl.prototype.setMarkHandleMode=function(markHandleMode){var yb;switch(markHandleMode){case PCCViewer.MarkHandleMode.HideCornerHandlesWhenClose:yb=IPCC.Web.UI.MarkHandleMode.HideCornerHandlesWhenClose;break;case PCCViewer.MarkHandleMode.HideSideHandlesWhenClose:yb=IPCC.Web.UI.MarkHandleMode.HideSideHandlesWhenClose;break;default:throw new RangeError("The value of markHandleMode is not a supported value.");}if(this.bS&&this.bS.set_markHandleMode){this.bS.set_markHandleMode(yb);}else{this.bP.markHandleMode=yb;}return this;};SingleSessionViewerControl.prototype.getMarkHandleMode=function(){var yb;if(this.bS&&this.bS.get_markHandleMode){yb=this.bS.get_markHandleMode();}else{yb=this.bP.markHandleMode;}if(yb===IPCC.Web.UI.MarkHandleMode.HideCornerHandlesWhenClose){return PCCViewer.MarkHandleMode.HideCornerHandlesWhenClose;}else{return PCCViewer.MarkHandleMode.HideSideHandlesWhenClose;}};SingleSessionViewerControl.prototype.setConversationDOMFactory=function(factoryFunction){if(typeof(factoryFunction)!=='function'){throw new Error("The parameter factoryFunction is not a function.");}this.na=factoryFunction;return this;};SingleSessionViewerControl.prototype.getConversationDOMFactory=function(){return this.na;};SingleSessionViewerControl.prototype.refreshConversations=function(conversations){var aba,acg=(conversations===undefined);function anI(dq,ao){throw new Error(dq+((ao!==undefined)?' (Array index '+ao+')':'')+' is not a valid PCCViewer.Conversation object.');};function awj(dq,ao){throw new Error(dq+((ao!==undefined)?' (Array index '+ao+')':'')+' is not a known conversation in this ViewerControl.');};if(conversations instanceof PCCViewer.Conversation){aba=[conversations];}else if(conversations instanceof Array){aba=conversations;}else if(!acg){anI(conversations);}var ahm=IPCC.J.map(this.getAllMarks(),function(au){return au.getConversation();});var aaj=IPCC.J.map(aba||ahm,function(au,L){if(!(au instanceof PCCViewer.Conversation)){anI(au,L);}if(!acg&& !IPCC.J.inArray(ahm,au)){awj(au,L);}return au.getMark().ds;});this.bS.refreshConversations(aaj);return this;};SingleSessionViewerControl.prototype.openCommentsPanel=function(){if(this.fF===false){throw new Error("The method openCommentsPanel is not available until 'ViewerReady' state is reached.");}if(this.getPageLayout()===PCCViewer.PageLayout.Horizontal){throw new Error("The page layout must be set to vertical to use the comments panel.");}this.bS.openCommentsPanel();var V=this;setTimeout(function(){V.ac.trigger("CommentsPanelToggled",{isOpen:true});},10);return this;};SingleSessionViewerControl.prototype.closeCommentsPanel=function(){if(this.fF===false){throw new Error("The method closeCommentsPanel is not available until 'ViewerReady' state is reached.");}this.bS.closeCommentsPanel();var V=this;setTimeout(function(){V.ac.trigger("CommentsPanelToggled",{isOpen:false});},10);return this;};SingleSessionViewerControl.prototype.getIsCommentsPanelOpen=function(){if(this.fF===false){throw new Error("The method getIsCommentsPanelOpen is not available until 'ViewerReady' state is reached.");}if(this.getPageLayout()===PCCViewer.PageLayout.Horizontal){return false;}return this.bS.get_isCommentsPanelOpen();};SingleSessionViewerControl.prototype.setSelectedConversation=function(conversation){if(this.fF===false){throw new Error("The method setSelectedConversation is not available until 'ViewerReady' state is reached.");}if(conversation===null||conversation===undefined){this.bS.set_selectedConversation(undefined);return this;}if(!(conversation instanceof PCCViewer.Conversation)){throw new Error("The parameter conversation is not an instance of PCCViewer.Conversation.");}var mX=conversation.getMark();if(mX){var vC=mX.T.get_conversation();this.bS.set_selectedConversation(vC);}else{throw new Error("The conversation is unknown to the viewer control.");}return this;};SingleSessionViewerControl.prototype.getSelectedConversation=function(){if(this.fF===false){return null;}var io=this.bS.get_selectedConversation();if(io){var mX=this.cf[io.get_mark().get_markID()];if(mX){return mX.getConversation();}}return null;};SingleSessionViewerControl.prototype.clearMouseSelectedText=function(textSelection){if(!textSelection){throw new Error('textSelection is a required parameter');}else if(typeof textSelection.startIndex!=='number'||textSelection.startIndex<0){throw new Error('Start index value '+textSelection.startIndex+' is not a valid value.');}else if(typeof textSelection.pageNumber!=='number'||textSelection.pageNumber<1||textSelection.pageNumber>this.getPageCount()){throw new Error('Page number value '+textSelection.pageNumber+' is not a valid value.');}else if(typeof textSelection.length!=='number'||textSelection.length<1){throw new Error('Length value '+textSelection.pageNumber+' is not a valid value.');}var V=this,Am=V.bh;function aeu(aO,mY,cw){var aav=[aO+1];var aN=V.dB.getPage(aO),ff=aN.dr();if(ff.oS()){var aS=ff.Ew(),aeg=aS.substr(mY);if(aeg.length>cw){return aav;}else{return aav.concat(aeu(aO+1,0,cw-aeg.length));}}else{return aav;}};this.bS.va();function Eg(UJ,bb){V.adq(bb,UJ);};if(Am&&Am.getResults().length){var cz=aeu(textSelection.pageNumber-1,textSelection.startIndex,textSelection.length),eb=Am.getResults(),amI=false,PP={};if(eb.length){IPCC.J.forEach(eb,function(au){var arr=IPCC.J.contains(cz,au.bb);if(arr){amI=true;PP[au.bb]=PP[au.bb]||[];PP[au.bb].push(au);}});}if(amI){IPCC.J.forEach(PP,function(UJ,bb){V.requestPageText(bb).then(Eg.bind(null,UJ,bb));});}}return this;};SingleSessionViewerControl.prototype.convertPageToWindowCoordinates=function(pageNumber,points){if(this.fF===false){throw new Error("The method setSelectedConversation is not available until 'ViewerReady' state is reached.");}if(!pageNumber||typeof pageNumber!=='number'||pageNumber<1||pageNumber>this.getPageCount()){throw new PCCViewer.Error('InvalidArgument','pageNumber is not a known page number in the document');}var yE=function(n){return typeof n==='number'&& !isNaN(n);};var wk,acM=true;if(points&&points.constructor===Array){wk=points;}else{wk=[points];acM=false;}var akM=function(bx,ao,ai){throw new PCCViewer.Error('InvalidArgument',bx+' (Array index '+ao+') does not have a valid '+ai+' property');};if(wk.length===0|| !points){throw new PCCViewer.Error('InvalidArgument','At least one point is required');}IPCC.J.forEach(wk,function(bx,ao){if(!yE(bx.x)){akM(bx,ao,'x');}if(!yE(bx.y)){akM(bx,ao,'y');}});var Ce=this.bS.axK(pageNumber,wk);if(Ce===null){return null;}else if(acM){return Ce;}else{return Ce[0];}};SingleSessionViewerControl.prototype.selectEditorText=function(){if(this.fF===false){throw new Error("The method selectEditorText is not available until 'ViewerReady' state is reached.");}var V=this;var bS=V.bS;var ZL=bS.CP();if(!ZL){throw new Error("The method selectEditorText is not available unless there is an active editor on the page.");}if(ZL==='singleline'){bS.EO();}else if(ZL==='multiline'){throw new PCCViewer.Error('InvalidArgument','Only TextInputSignature Marks are supported at this time');}return V;};SingleSessionViewerControl.prototype.setSharpening=function(amount){if(amount!==Math.floor(amount)||typeof amount!=='number'||amount<0||amount>100){throw new PCCViewer.Error('InvalidArgument','Amount must be an integer between 0 and 100 inclusive');}var V=this;V.abW=amount;if(this.fF===false){this.ta.then(function(rA){var bS=V.bS;bS.DZ(amount);});}else{var bS=V.bS;bS.DZ(amount);}return V;};SingleSessionViewerControl.prototype.getSharpening=function(){var V=this;if(this.fF===false){return V.abW;}else{var bS=V.bS;return bS.axv();}};SingleSessionViewerControl.prototype.setGamma=function(amount){if(typeof amount!=='number'||amount<0||amount>10){throw new PCCViewer.Error('InvalidArgument','Amount must be a number between 0 and 10 inclusive');}var V=this;V.anh=amount;if(this.fF===false){this.ta.then(function(rA){var bS=V.bS;bS.Gi(amount);});}else{var bS=V.bS;bS.Gi(amount);}return V;};SingleSessionViewerControl.prototype.getGamma=function(){var V=this;if(this.fF===false){return V.anh;}else{var bS=V.bS;return bS.ayH();}};SingleSessionViewerControl.prototype.setSvgLineWidthMultiplier=function(amount){if(typeof amount!=='number'||amount<=0||amount>100){throw new PCCViewer.Error('InvalidArgument','Amount must be greater than 0 and not greater than 100.');}var V=this;V.mj=amount;if(this.fF===false){this.ta.then(function(rA){V.bS.DF(amount);});}else{V.bS.DF(amount);}return V;};SingleSessionViewerControl.prototype.getSvgLineWidthMultiplier=function(){var V=this;if(this.fF===false){return V.mj;}else{var bS=V.bS;return bS.axV();}};if(Object.defineProperties){Object.defineProperties(SingleSessionViewerControl.prototype,{"pageCount":{enumerable:true,get:function(){return this.getPageCount();}},"pageNumber":{enumerable:true,get:function(){return this.getPageNumber();},set:function(value){return this.setPageNumber(value);}},"searchRequest":{enumerable:true,get:function(){return this.bh;}},"selectedSearchResult":{enumerable:true,get:function(){return this.getSelectedSearchResult();},set:function(val){return this.setSelectedSearchResult(val,true);}},"currentMouseTool":{enumerable:true,get:function(){return this.getCurrentMouseTool();},set:function(value){return this.setCurrentMouseTool(value);}},"atMaxScale":{enumerable:true,get:SingleSessionViewerControl.prototype.getAtMaxScale},"atMinScale":{enumerable:true,get:SingleSessionViewerControl.prototype.getAtMinScale},"scaleFactor":{enumerable:true,get:function(){return this.getScaleFactor();},set:function(value){return this.setScaleFactor(value);}},"selectedMarks":{enumerable:true,get:SingleSessionViewerControl.prototype.getSelectedMarks},"viewMode":{enumerable:true,get:function(){return this.getViewMode();},set:function(value){return this.setViewMode(value);}},"isCommentsPanelOpen":{enumerable:true,get:function(){return this.getIsCommentsPanelOpen();}},"selectedConversation":{enumerable:true,get:function(){return this.getSelectedConversation();},set:function(conversation){return this.setSelectedConversation(conversation);}},"redactionViewMode":{enumerable:true,get:function(){return this.getRedactionViewMode();},set:function(value){return this.setRedactionViewMode(value);}},"markHandleMode":{enumerable:true,get:function(){return this.getMarkHandleMode();},set:function(value){return this.setMarkHandleMode(value);}}});}module.exports=SingleSessionViewerControl;},{"../IPCC/IPCC":29,"./PCCViewer.Helper":144,"./PCCViewer.MarkDeserializer":148,"./PCCViewer.MarkSerializer":150,"./PCCViewer.Print":158}],167:[function(require,module,exports){var FK=function(){},iq={ahV:0,aDA:1,Hz:2};var ThumbnailControl=function(domElement,viewerControl){if(!domElement|| !IPCC.J.uj(domElement)){throw new Error('The "domElement" parameter is not a valid HTML Element');}if(!viewerControl|| !(viewerControl instanceof PCCViewer.ViewerControl)){throw new Error('The "viewerControl" parameter is not a valid PCCViewer.ViewerControl object');}var V=this;this.iq=iq.ahV;this.bP=viewerControl.aw.bP;this._debug= ! !this.bP.debug;this.aGd="Single";this.Jl=[];this.pw={};if(!this.cF){this.cF=viewerControl;}else{throw new Error("This instance of thumbnail already is attached to a ViewerControl.");}PCCViewer.EventEmitter.extend(this);this.bG=domElement;if(viewerControl.aw.mi){V.iq=iq.Hz;V.FO(viewerControl.getPageCount());V.Vf(V.bG);}else{V.iq=iq.aDA;V.FO(1,0);var HS=function(){viewerControl.off('PageCountReady',HS);V.FO(viewerControl.getPageCount(),1);V.Vf(V.bG);};viewerControl.on('PageCountReady',HS);}viewerControl.on('PageRotated',function(ar){IPCC.J.forEach(V.pw,function(az){if(az.aO===(ar.pageNumber-1)){if(az.vw===true){V.Vd(az);}}});});viewerControl.on('DocumentRotated',function(ar){IPCC.J.forEach(V.pw,function(az){if(az.vw===true){V.Vd(az);}});});viewerControl.on('ViewingSessionChanging',function(ar){V.ahX();V.aan([]);});viewerControl.on('ViewingSessionChanged',function(ar){V.bP=viewerControl.aw.bP;if(viewerControl.aw.mi){V.FO(viewerControl.getPageCount());}else{V.FO(1,0);var HS=function(){viewerControl.off('PageCountReady',HS);V.FO(viewerControl.getPageCount(),1);};viewerControl.on('PageCountReady',HS);}});};ThumbnailControl.prototype.getViewerControl=function(){return this.cF;};ThumbnailControl.prototype.FO=function(eP,hu){hu=hu||0;var V=this,IR=document.createDocumentFragment();for(var i=hu;i<eP;i++){var _parent=document.createElement('div');_parent.className='pccThumbnailWrapper';var fr=document.createElement('div');fr.className='pccThumbnail';var sn=document.createElement('div');sn.className='pccThumbnailView';sn.id='pcc-thumbnailPage-'+i+'-'+IPCC.Bm();fr.appendChild(sn);_parent.appendChild(fr);IR.appendChild(_parent);V.pw[i]={SA:_parent,de:fr,sn:sn,aO:i,bI:{},vw:false,jY:0,kE:0,gU:0};}IPCC.J.forEach(V.pw,function(az){var Ym=document.createElement('div'),vf=document.createElement('span'),azU=document.createTextNode(az.aO+1);Ym.className='pccThumbnailLabel';vf.appendChild(azU);Ym.appendChild(vf);az.de.appendChild(Ym);az.de.onclick=function(){V.aan([az.aO+1]);};});V.bG.appendChild(IR);this.TY();return this;};ThumbnailControl.EventType={PageSelectionChanged:"PageSelectionChanged"};ThumbnailControl.prototype.getSelectedPages=function getSelectedPages(){if(!this.iq){return[];}return[].concat(this.Jl);};ThumbnailControl.prototype.setSelectedPages=function setSelectedPages(pageNumbers){if(!this.iq){return this;}var eP=this.cF.getPageCount();if(typeof pageNumbers==='number'){pageNumbers=[pageNumbers];}else if(Object.prototype.toString.call(pageNumbers)!=='[object Array]'){throw new Error(pageNumbers+' is not a number or an array of numbers');}IPCC.J.forEach(pageNumbers,function(hz,L){if(isNaN(hz)){throw new Error(hz+' (array index '+L+') is not a number');}if(hz<1||hz>eP){throw new Error(hz+' (array index '+L+') is out of range');}});this.aan([].concat(pageNumbers).sort());return this;};if(Object.defineProperties){Object.defineProperties(ThumbnailControl.prototype,{"selectedPages":{enumerable:true,get:function(){return this.getSelectedPages();},set:function(pageNumbers){return this.setSelectedPages(pageNumbers);}},"viewerControl":{enumerable:true,get:function(){return this.getViewerControl();}},"visiblePages":{emunerable:true,get:function(){return this.getVisiblePages();}}});}ThumbnailControl.prototype.scrollTo=function(pageNumber,options){var hz=Number(pageNumber);if(hz!==(hz|0)||hz<1||hz>this.cF.getPageCount()){throw new Error(pageNumber+' is not a valid page number');}var nb=false,V=this,bP=options||{};IPCC.J.forEach(this.pw,function(az){if(nb){return;}if(az.aO+1===hz){nb=true;V.VB(az,undefined,! !bP.forceAlignTop);}});return this;};ThumbnailControl.prototype.VB=function(az,md,ayS){md=md||IPCC.J.ZI(this.bG.getBoundingClientRect());var vh=IPCC.J.ZI(az.SA.getBoundingClientRect());if(vh.top>md.top&&vh.bottom<md.bottom){return;}var aiZ=window.getComputedStyle?getComputedStyle(az.SA):az.SA.currentStyle,gA;if(vh.top<md.top||ayS){gA=vh.top-md.top+this.bG.scrollTop-parseInt(aiZ.marginTop,10);}else if(vh.bottom>md.bottom){gA=vh.bottom-md.top-md.height+this.bG.scrollTop+parseInt(aiZ.marginBottom,10);}if(gA!==undefined){this.bG.scrollTop=gA;}return this;};ThumbnailControl.prototype.aan=function(ki){if(IPCC.J.aAS(this.Jl,ki)){return this;}var Yw='pcc-thumbnail-selected',Hi=new RegExp(Yw),XQ=false,aaI=[].concat(ki),aaA=aaI.shift(),ank=false,md=IPCC.J.ZI(this.bG.getBoundingClientRect()),V=this;IPCC.J.forEach(this.pw,function(az){if(az.aO===aaA-1){IPCC.J.agv(az.de,Yw);XQ=true;aaA=aaI.shift()||0;if(!ank){ank=true;V.VB(az,md);}return;}if(Hi.test(az.de.className)){IPCC.J.aky(az.de,Yw);XQ=true;}});this.Jl=ki;if(XQ){this.trigger(PCCViewer.ThumbnailControl.EventType.PageSelectionChanged,{pageNumbers:[].concat(this.Jl)});}return this;};ThumbnailControl.prototype.ayF=function(){var cI=this.LD(),V=this,yR;IPCC.J.forEach(cI,function(az){if(!yR&&IPCC.J.inArray(V.Jl,az.aO+1)){yR=az;}});if(!yR){yR=cI[0];}return yR;};ThumbnailControl.prototype.reflow=function(){if(!this.iq){return this;}var Cn,Eh,bO,bo,Pq,PO,gU,yR=this.ayF();IPCC.J.forEach(this.pw,function(az){if(az.vw){az.de.style.height=az.sn.style.height='';az.de.style.width=az.sn.style.width='';}});IPCC.J.forEach(this.pw,function(az){if(az.vw&&az.bI.fK()){Cn=az.de.offsetWidth;Eh=az.de.offsetHeight;gU=az.bI.azY();if(Math.abs(gU)===90||Math.abs(gU)===270){bo=az.bI.kY();bO=az.bI.jp();}else{bO=az.bI.kY();bo=az.bI.jp();}Pq=bO/bo;PO=Cn/Eh;var jY,kE;if(Pq<PO){kE=Eh;jY=Math.floor(kE*bO/bo);}else{jY=Cn;kE=Math.floor(jY*bo/bO);}az.jY=jY;az.kE=kE;}});IPCC.J.forEach(this.pw,function(az){if(az.vw&&az.bI&&az.bI.fK()){az.sn.style.height=az.kE+'px';az.sn.style.width=az.jY+'px';az.bI.Vr(IPCC.Web.UI.FitType.FullImage);az.bI.dh();}});if(yR){this.VB(yR);}this.TY();return this;};ThumbnailControl.prototype.destroy=function(){if(!this.iq){return this;}this.iq=iq.ahV;this.ahX();this.on=this.off=this.trigger=FK;this.iV={};};ThumbnailControl.prototype.ahX=function(){IPCC.J.forEach(this.pw,function(az){if(az.bI&&az.bI.dispose){az.bI.dispose();}});while(this.bG.firstChild){this.bG.removeChild(this.bG.firstChild);}};ThumbnailControl.prototype.getVisiblePages=function(){if(!this.iq){return[];}var cI=this.LD();return IPCC.J.map(cI,function(az){return az.aO+1;});};ThumbnailControl.prototype.LD=function LD(){var aGf=this.bG.getBoundingClientRect(),vh;function Ww(md,NN){return(!(NN.top>=md.bottom||NN.left>=md.right||NN.bottom<=md.top||NN.right<=md.left));};return IPCC.J.filter(this.pw,function(az){vh=az.de.getBoundingClientRect();return Ww(aGf,vh);});};ThumbnailControl.prototype.TY=function(){var V=this,cI=V.LD();IPCC.J.forEach(cI,function(az){if(!az.vw){az.bI=V.iY(az);az.vw=true;}});return this;};ThumbnailControl.prototype.Vf=function Vf(de){var Mn={},V=this;function awc(bz,wf,oJ){if(Mn[bz]){clearTimeout(Mn[bz]);Mn[bz]=undefined;}Mn[bz]=setTimeout(wf,oJ||0);};IPCC.Web.UI.by.addHandler(de,'scroll',function(ev){awc('scroll',function(){V.TY();},300);});};ThumbnailControl.prototype.iY=function(az,lP){var V=this;lP=lP||FK;var ag={documentIdentifier:V.bP.documentID,pageNumber:az.aO,viewFitType:IPCC.Web.UI.FitType.FullImage,imageHandlerUrl:V.bP.imageHandlerUrl,encryption:V.bP.encryption,handleTouchEvents:false};var bI=IPCC.initializePageViewPlugin(az.sn,ag);bI.set_debug(V._debug);bI.set_mouseTool(IPCC.Web.UI.MouseTool.None);var wm=false;function GQ(){lP();};bI.add_pageOpened(function(){V.Vd(az);});bI.add_pageDisplayed(function(){if(!wm){GQ();}});bI.add_textPageReady(function(){if(wm){bI.dh();GQ();}});bI.add_pageOpenFailed(function(){});bI.add_textExtractionFailed(function(){});var aw=V.cF.aw;ag.artPage=aw.bS.gO(aw.dB.getPage(az.aO));ag.artPage.Cu(function(C){if(C.get_type()===608){wm=true;}});bI.awH(ag);bI.set_mouseTool(IPCC.Web.UI.MouseTool.None);return bI;};ThumbnailControl.prototype.Vd=function(az){var V=this;var aw=V.cF.aw;var DQ=aw.bS.Uv(az.aO);var gU=az.gU;var acN=gU;if(DQ!==az.gU){acN=DQ-gU;}var bI=az.bI,jo=az.sn,bo,bO;if(!az.vw|| !bI.fK()){return;}jo.style.height='';jo.style.width='';if(Math.abs(DQ)===90||Math.abs(DQ)===270){bo=bI.kY();bO=bI.jp();}else{bo=bI.jp();bO=bI.kY();}var Cn=jo.offsetWidth,Eh=jo.offsetHeight;if(az.gU!==DQ){bI.rotate(acN);az.gU=DQ;}var Pq=bO/bo,PO=Cn/Eh;var jY,kE;if(Pq<PO){kE=Eh;jY=Math.floor(kE*bO/bo);}else{jY=Cn;kE=Math.floor(jY*bo/bO);}jo.style.height=kE+'px';jo.style.width=jY+'px';};module.exports=ThumbnailControl;},{}],168:[function(require,module,exports){function aad(message,value){var err=new Error('PCC Range Error: '+message);err.value=value;return err;};function aDy(aGC){var bM=[];var aeI=function(n){return!(isNaN(+n));};var afB=aGC.split(',');var KQ,ZH;var Mq=0;var vx=0;for(var L=0;L<afB.length;L++){var Hl=afB[L].split('-');var AZ=Hl[0].replace(/\s+/g,'');if(AZ.length===0){continue;}var HC=AZ;if(Hl[1]!==undefined&&Hl[1]!==""){HC=Hl[1].replace(/\s+/g,'');}AZ= +(AZ);HC= +(HC);if(aeI(AZ)===true){Mq=parseInt(AZ);}if(aeI(HC)===true){vx=parseInt(HC);}if(Mq<vx){KQ=Mq;ZH=vx;}else{KQ=vx;ZH=Mq;}if(Hl.length>1){for(var aD=KQ;aD<=ZH;aD++){bM.push(aD);}}else{bM.push(KQ);}}bM.sort(function(a,b){return a-b;});for(L=bM.length-1;L>0;L--){if(bM[L-1]===bM[L]){bM.splice(L,1);}}return bM;};var Util={save:function(filename,stringValue){if('Blob'in window){var blob=new Blob([stringValue],{'type':'text/plain;charset=utf-8'});if(window.navigator.msSaveBlob){window.navigator.msSaveBlob(blob,filename);}else if(window.saveAs){window.saveAs(blob,filename);}else{var a=document.createElement('a');a.href=URL.createObjectURL(blob);a.target='_blank';a.download=filename;a.style.display='none';document.body.appendChild(a);a.click();document.body.removeChild(a);}}else{if(document.execCommand){var oWin=window.open('about:blank','_blank');oWin.document.write(stringValue);oWin.document.close();oWin.document.execCommand('SaveAs',true,filename+'.txt');oWin.close();}}},calculateNonOverlappingSelections:function(selections,backgroundColor){var gV;if(!(selections instanceof Array)){gV=[selections];}else{gV=selections;}IPCC.J.forEach(gV,function(cD){IPCC.aI.nq(cD.startIndex,'selection.startIndex',0,Number.MAX_VALUE);IPCC.aI.nq(cD.length,'selection.length',1,Number.MAX_VALUE);IPCC.aI.dR(cD.color,'selection.color');IPCC.aI.nq(cD.opacity,'selection.opacity',0,255);});IPCC.aI.dR(backgroundColor,'backgroundColor');var asM=IPCC.J.acu(gV);return IPCC.J.map(asM,function(au){au.length=au.endIndex-au.startIndex+1;return au;});},layerColors:function(colors,backgroundColor){var ME;if(!(colors instanceof Array)){ME=[colors];}else{ME=colors;}IPCC.J.forEach(ME,function(cD){IPCC.aI.dR(cD.color,'selection.color');IPCC.aI.nq(cD.opacity,'selection.opacity',0,255);});IPCC.aI.dR(backgroundColor,'backgroundColor');return IPCC.J.agj(ME,backgroundColor);},validatePageRange:function(pageRange,options){if(pageRange&&typeof pageRange!=='string'){return false;}else{try{PCCViewer.Util.convertPageRangeToArray(pageRange,options);}catch(e){return false;}return true;}},convertPageRangeToArray:function(pageRange,options){options=options||{};var lowerLimit=options.lowerLimit||1,upperLimit=options.upperLimit||Number.MAX_VALUE,allowEmpty=options.allowEmpty||false;if(pageRange!=='all'&&pageRange.match(/[^0-9\-\,\s]/g)){throw aad('Illegal page range value',pageRange);}var cz=[];if(pageRange==='all'){while(upperLimit>=lowerLimit){cz.unshift(upperLimit--);}}else{cz=aDy(pageRange);if((cz.length===0&& !allowEmpty)||cz[0]<lowerLimit||cz[cz.length-1]>upperLimit){throw aad('Pages are out of range',cz.join(', '));}}return cz;}};module.exports=Util;},{}],169:[function(require,module,exports){var Df={Document:"Document",EqualWidthPages:"EqualWidthPages",SinglePage:"SinglePage",EqualFitPages:"EqualFitPages"};module.exports=Df;},{}],170:[function(require,module,exports){"use strict";var IPCC=require('./../IPCC/IPCC');var EventEmitter=require('./PCCViewer.EventEmitter');var aaU=require('./PCCViewer.SingleSessionViewerControl');function ViewerControl(element,options){if(!(this instanceof ViewerControl)){return new ViewerControl(element,options);}EventEmitter.extend(this);this.AB=IPCC.J.extend({},options);this.aw=new aaU(element,this,options);this.KL={};return this;};ViewerControl.prototype.getPageCount=function(){return this.aw.getPageCount();};ViewerControl.prototype.getPageNumber=function(){return this.aw.getPageNumber();};ViewerControl.prototype.setPageNumber=function(pageNumber){this.aw.setPageNumber(pageNumber);return this;};ViewerControl.prototype.changeToFirstPage=function(){this.aw.changeToFirstPage();return this;};ViewerControl.prototype.changeToLastPage=function(){this.aw.changeToLastPage();return this;};ViewerControl.prototype.changeToNextPage=function(){this.aw.changeToNextPage();return this;};ViewerControl.prototype.changeToPrevPage=function(){this.aw.changeToPrevPage();return this;};ViewerControl.prototype.scrollBy=function(offsetX,offsetY){this.aw.scrollBy(offsetX,offsetY);return this;};ViewerControl.prototype.scrollTo=function(target){this.aw.scrollTo(target);return this;};ViewerControl.prototype.scrollToAsync=function(target){return this.aw.scrollToAsync(target);};ViewerControl.prototype.rotatePage=function(degreesClockwise){this.aw.rotatePage(degreesClockwise);return this;};ViewerControl.prototype.rotateDocument=function(degreesClockwise){this.aw.rotateDocument(degreesClockwise);return this;};ViewerControl.prototype.getScaleFactor=function(){return this.aw.getScaleFactor();};ViewerControl.prototype.setScaleFactor=function(scaleFactor){this.aw.setScaleFactor(scaleFactor);return this;};ViewerControl.prototype.getMinScaleFactor=function(){return this.aw.getMinScaleFactor();};ViewerControl.prototype.getMaxScaleFactor=function(){return this.aw.getMaxScaleFactor();};ViewerControl.prototype.zoomIn=function(zoomFactor){this.aw.zoomIn(zoomFactor);return this;};ViewerControl.prototype.zoomOut=function(zoomFactor){this.aw.zoomOut(zoomFactor);return this;};ViewerControl.prototype.getViewMode=function(){return this.aw.getViewMode();};ViewerControl.prototype.setViewMode=function(viewMode){this.aw.setViewMode(viewMode);return this;};ViewerControl.prototype.getPageLayout=function(){return this.aw.getPageLayout();};ViewerControl.prototype.setPageLayout=function(pageLayout){this.aw.setPageLayout(pageLayout);return this;};ViewerControl.prototype.getAtMaxScale=function(){return this.aw.getAtMaxScale();};ViewerControl.prototype.getAtMinScale=function(){return this.aw.getAtMinScale();};ViewerControl.prototype.fitContent=function(fitType){this.aw.fitContent(fitType);return this;};ViewerControl.prototype.getPageRotation=function(pageNumber){if(arguments.length>0){return this.aw.getPageRotation(pageNumber);}else{return this.aw.getPageRotation();}};ViewerControl.prototype.search=function(cn){return this.aw.search(cn);};ViewerControl.prototype.clientSearch=function(searchQuery){return this.aw.clientSearch(searchQuery);};ViewerControl.prototype.serverSearch=function(searchQuery){return this.aw.serverSearch(searchQuery);};ViewerControl.prototype.getSearchRequest=function(){return this.aw.getSearchRequest();};ViewerControl.prototype.clearSearch=function(){this.aw.clearSearch();return this;};ViewerControl.prototype.validateSearch=function(cn){return this.aw.validateSearch(cn);};ViewerControl.prototype.requestRevisions=function(){return this.aw.requestRevisions();};ViewerControl.prototype.getDownloadDocumentURL=function(){return this.aw.getDownloadDocumentURL();};ViewerControl.prototype.requestDocumentHyperlinks=function(pageNumber){return this.aw.requestDocumentHyperlinks(pageNumber);};ViewerControl.prototype.print=function(options){return this.aw.print(options);};ViewerControl.prototype.validatePrintRange=function(range){return this.aw.validatePrintRange(range);};ViewerControl.prototype.canPrintMarks=function(){return this.aw.canPrintMarks();};ViewerControl.prototype.deserializeMarks=function deserializeMarks(values){return this.aw.deserializeMarks(values);};ViewerControl.prototype.serializeMarks=function serializeMarks(marks){return this.aw.serializeMarks(marks);};ViewerControl.prototype.setRedactionViewMode=function(redactionViewMode){this.aw.setRedactionViewMode(redactionViewMode);return this;};ViewerControl.prototype.getRedactionViewMode=function(){return this.aw.getRedactionViewMode();};ViewerControl.prototype.convertToRedaction=function(searchResult){return this.aw.convertToRedaction(searchResult);};ViewerControl.prototype.convertToHighlight=function(searchResult){return this.aw.convertToHighlight(searchResult);};ViewerControl.prototype.setSelectedSearchResult=function(searchResult,scrollTo){this.aw.setSelectedSearchResult(searchResult,scrollTo);return this;};ViewerControl.prototype.clearSelectedSearchResult=function(){this.aw.clearSelectedSearchResult();return this;};ViewerControl.prototype.getSelectedSearchResult=function(){return this.aw.getSelectedSearchResult();};ViewerControl.prototype.requestPageText=function(pageNumber){return this.aw.requestPageText(pageNumber);};ViewerControl.prototype.disposePageText=function(pageNumber){this.aw.disposePageText(pageNumber);return this;};ViewerControl.prototype.isPageTextReady=function(pageNumber){return this.aw.isPageTextReady(pageNumber);};ViewerControl.prototype.documentHasText=function(){return this.aw.documentHasText();};ViewerControl.prototype.requestPageAttributes=function(pageNumber){return this.aw.requestPageAttributes(pageNumber);};ViewerControl.prototype.destroy=function(){if(this.aw){this.aw.destroy();}this.aw=null;this.qE=true;};ViewerControl.prototype.getMarkById=function(markId){return this.aw.getMarkById(markId);};ViewerControl.prototype.getMarksByType=function(markType){return this.aw.getMarksByType(markType);};ViewerControl.prototype.getAllMarks=function(){return this.aw.getAllMarks();};ViewerControl.prototype.addMarkFromSearchResult=function(searchResult,markType){return this.aw.addMarkFromSearchResult(searchResult,markType);};ViewerControl.prototype.addMark=function(pageNumber,markType){return this.aw.addMark(pageNumber,markType);};ViewerControl.prototype.deleteMarks=function(marks){this.aw.deleteMarks(marks);return this;};ViewerControl.prototype.deleteAllMarks=function(){this.aw.deleteAllMarks();return this;};ViewerControl.prototype.hideMarks=function(marks){this.aw.hideMarks(marks);return this;};ViewerControl.prototype.showMarks=function(marks){this.aw.showMarks(marks);return this;};ViewerControl.prototype.moveMarkToFront=function(mark){this.aw.moveMarkToFront(mark);return this;};ViewerControl.prototype.moveMarkToBack=function(mark){this.aw.moveMarkToBack(mark);return this;};ViewerControl.prototype.moveMarkForward=function(mark){this.aw.moveMarkForward(mark);return this;};ViewerControl.prototype.moveMarkBackward=function(mark){this.aw.moveMarkBackward(mark);return this;};ViewerControl.prototype.getSelectedMarks=function(){return this.aw.getSelectedMarks();};ViewerControl.prototype.selectMarks=function(marks){this.aw.selectMarks(marks);return this;};ViewerControl.prototype.deselectMarks=function(marks){this.aw.deselectMarks(marks);return this;};ViewerControl.prototype.deselectAllMarks=function(){this.aw.deselectAllMarks();return this;};ViewerControl.prototype.copyMarks=function(marks){return this.aw.copyMarks(marks);};ViewerControl.prototype.enterTextMarkEditingMode=function(C){this.aw.enterTextMarkEditingMode(C);return this;};ViewerControl.prototype.getCharacterIndex=function(sortableObject){return this.aw.getCharacterIndex(sortableObject);};ViewerControl.prototype.getCurrentMouseTool=function(){return this.aw.getCurrentMouseTool();};ViewerControl.prototype.setCurrentMouseTool=function(name){this.aw.setCurrentMouseTool(name);return this;};ViewerControl.prototype.saveMarkup=function(recordName,options){return this.aw.saveMarkup(recordName,options);};ViewerControl.prototype.loadMarkup=function(recordName,options){return this.aw.loadMarkup(recordName,options);};ViewerControl.prototype.getSavedMarkupNames=function(){return this.aw.getSavedMarkupNames();};ViewerControl.prototype.getMarkupLayerCollection=function(){return this.aw.getMarkupLayerCollection();};ViewerControl.prototype.requestMarkupLayerNames=function(metadata){return this.aw.requestMarkupLayerNames(metadata);};ViewerControl.prototype.getActiveMarkupLayer=function(){return this.aw.getActiveMarkupLayer();};ViewerControl.prototype.setActiveMarkupLayer=function(markupLayer){return this.aw.setActiveMarkupLayer(markupLayer);};ViewerControl.prototype.loadMarkupLayers=function(layerRecordIds,options){return this.aw.loadMarkupLayers(layerRecordIds,options);};ViewerControl.prototype.saveMarkupLayer=function(id){return this.aw.saveMarkupLayer(id);};ViewerControl.prototype.burnMarkup=function(burnOptions){return this.aw.burnMarkup(burnOptions);};ViewerControl.prototype.convertDocument=function(AJ){return this.aw.convertDocument(AJ);};ViewerControl.prototype.requestDocumentConversion=function(AJ){return this.aw.requestDocumentConversion(AJ);};ViewerControl.prototype.loadAttachments=function(){return this.aw.loadAttachments();};ViewerControl.prototype.setMarkHandleMode=function(markHandleMode){this.aw.setMarkHandleMode(markHandleMode);return this;};ViewerControl.prototype.getMarkHandleMode=function(){return this.aw.getMarkHandleMode();};ViewerControl.prototype.setConversationDOMFactory=function(factoryFunction){this.aw.setConversationDOMFactory(factoryFunction);return this;};ViewerControl.prototype.getConversationDOMFactory=function(){return this.aw.getConversationDOMFactory();};ViewerControl.prototype.refreshConversations=function(conversations){this.aw.refreshConversations(conversations);return this;};ViewerControl.prototype.openCommentsPanel=function(){this.aw.openCommentsPanel();return this;};ViewerControl.prototype.closeCommentsPanel=function(){this.aw.closeCommentsPanel();return this;};ViewerControl.prototype.getIsCommentsPanelOpen=function(){return this.aw.getIsCommentsPanelOpen();};ViewerControl.prototype.setSelectedConversation=function(conversation){this.aw.setSelectedConversation(conversation);return this;};ViewerControl.prototype.getSelectedConversation=function(){return this.aw.getSelectedConversation();};ViewerControl.prototype.clearMouseSelectedText=function(textSelection){this.aw.clearMouseSelectedText(textSelection);return this;};ViewerControl.prototype.convertPageToWindowCoordinates=function(pageNumber,points){return this.aw.convertPageToWindowCoordinates(pageNumber,points);};ViewerControl.prototype.selectEditorText=function(){this.aw.selectEditorText();return this;};ViewerControl.prototype.setSharpening=function(amount){this.aw.setSharpening(amount);return this;};ViewerControl.prototype.getSharpening=function(){return this.aw.getSharpening();};ViewerControl.prototype.setGamma=function(amount){this.aw.setGamma(amount);return this;};ViewerControl.prototype.getGamma=function(){return this.aw.getGamma();};ViewerControl.prototype.setSvgLineWidthMultiplier=function(amount){this.aw.setSvgLineWidthMultiplier(amount);return this;};ViewerControl.prototype.getSvgLineWidthMultiplier=function(){return this.aw.getSvgLineWidthMultiplier();};ViewerControl.prototype.changeViewingSession=function(viewingSessionId,isRestorable){var V=this;var GH=V.aw;var cB=GH.eD;var afn=V.AB.documentID;if(V.Wh){throw "The changeViewingSession method cannot be used again before the 'ViewingSessionChanged' event has fired.";}if(V.aw.fF===false){throw "The changeViewingSession method can not be used until 'ViewerReady' state is reached.";}if(afn===viewingSessionId){return V;}V.Wh=true;V.trigger(PCCViewer.EventType.ViewingSessionChanging,{viewingSessionId:viewingSessionId});if(isRestorable){V.KL[afn]={control:GH,options:V.AB};GH.asb();GH.aDL();}else{GH.destroy();}if(V.KL[viewingSessionId]){var afx=V.KL[viewingSessionId];V.AB=afx.options;V.aw=afx.control;V.aw.aCg();V.aw.aCC();V.Wh=false;V.trigger(PCCViewer.EventType.ViewingSessionChanged,{viewingSessionId:viewingSessionId});if(V.aw.yX){V.trigger("PageCountReady",{pageCount:V.aw.eP});}delete V.KL[viewingSessionId];}else{V.AB=IPCC.J.extend({},V.AB);V.AB.documentID=viewingSessionId;V.aw=null;V.aw=new aaU(cB,V,V.AB);V.aw.axw(function(){V.Wh=false;V.trigger(PCCViewer.EventType.ViewingSessionChanged,{viewingSessionId:viewingSessionId});});}return V;};if(Object.defineProperties){Object.defineProperties(ViewerControl.prototype,{"pageCount":{enumerable:true,get:function(){return this.aw.getPageCount();}},"pageNumber":{enumerable:true,get:function(){return this.aw.getPageNumber();},set:function(value){return this.aw.setPageNumber(value);}},"searchRequest":{enumerable:true,get:function(){return this.aw.bh;}},"selectedSearchResult":{enumerable:true,get:function(){return this.aw.getSelectedSearchResult();},set:function(val){return this.aw.setSelectedSearchResult(val,true);}},"currentMouseTool":{enumerable:true,get:function(){return this.aw.getCurrentMouseTool();},set:function(value){return this.aw.setCurrentMouseTool(value);}},"atMaxScale":{enumerable:true,get:function(){return this.aw.getAtMaxScale();}},"atMinScale":{enumerable:true,get:function(){return this.aw.getAtMinScale();}},"scaleFactor":{enumerable:true,get:function(){return this.aw.getScaleFactor();},set:function(value){return this.aw.setScaleFactor(value);}},"selectedMarks":{enumerable:true,get:function(){return this.aw.getSelectedMarks();}},"viewMode":{enumerable:true,get:function(){return this.aw.getViewMode();},set:function(value){return this.aw.setViewMode(value);}},"isCommentsPanelOpen":{enumerable:true,get:function(){return this.aw.getIsCommentsPanelOpen();}},"selectedConversation":{enumerable:true,get:function(){return this.aw.getSelectedConversation();},set:function(conversation){return this.aw.setSelectedConversation(conversation);}},"redactionViewMode":{enumerable:true,get:function(){return this.aw.getRedactionViewMode();},set:function(value){return this.aw.setRedactionViewMode(value);}},"markHandleMode":{enumerable:true,get:function(){return this.aw.getMarkHandleMode();},set:function(value){return this.aw.setMarkHandleMode(value);}}});}module.exports=ViewerControl;},{"./../IPCC/IPCC":29,"./PCCViewer.EventEmitter":140,"./PCCViewer.SingleSessionViewerControl":166}],171:[function(require,module,exports){var PCCViewer={ViewMode:require('./PCCViewer.ViewMode'),MarkHandleMode:require('./PCCViewer.MarkHandleMode'),RedactionViewMode:require('./PCCViewer.RedactionViewMode'),PageLayout:require('./PCCViewer.PageLayout'),EventType:require('./PCCViewer.EventType'),Event:require('./PCCViewer.Event'),ScaleTrigger:require('./PCCViewer.ScaleTrigger'),FitType:require('./PCCViewer.FitType'),Promise:require('./PCCViewer.Deferred').Promise,Deferred:require('./PCCViewer.Deferred').Deferred,EventEmitter:require('./PCCViewer.EventEmitter'),tq:require('./PCCViewer.EventEmitterProxy'),Util:require('./PCCViewer.Util'),ObservableCollection:require('./PCCViewer.ObservableCollection'),ayl:require('prizmdoc-input-mask'),Data:require('./PCCViewer.Data').Data,SessionData:require('./PCCViewer.Data').SessionData,Ajax:require('./PCCViewer.Ajax').Ajax,AjaxResponse:require('./PCCViewer.Ajax').AjaxResponse,Language:require('./PCCViewer.Language'),Error:require('./PCCViewer.Error'),ViewerControl:require('./PCCViewer.ViewerControl'),rz:require('./PCCViewer.Helper'),MouseTool:require('./PCCViewer.MouseTool').MouseTool,MouseTools:require('./PCCViewer.MouseTool').MouseTools,Conversation:require('./PCCViewer.Comments').Conversation,Comment:require('./PCCViewer.Comments').Comment,ImageStamps:require('./PCCViewer.ImageStamps'),DocumentHyperlink:require('./PCCViewer.DocumentHyperlink'),_Search:require('./PCCViewer.Search')._Search,SearchTask:require('./PCCViewer.Search').SearchTask,SearchRequest:require('./searchRequest'),SearchResult:require('./searchResult').SearchResult,WS:require('./PCCViewer.ServerSearch'),SearchTaskResult:require('./searchResult').SearchTaskResult,Rr:require('./PCCViewer.ClientSearch'),FM:require('prizmdoc-search'),Signatures:require('./PCCViewer.Signature').Signatures,SignatureControl:require('./PCCViewer.Signature').SignatureControl,SignatureDisplay:require('./PCCViewer.Signature').SignatureDisplay,ThumbnailControl:require('./PCCViewer.ThumbnailControl'),Revision:require('./PCCViewer.Revision'),Gr:require('./PCCViewer.RevisionsRequest').Gr,RevisionsRequest:require('./PCCViewer.RevisionsRequest').RevisionsRequest,ConversionRequest:require('./PCCViewer.ConversionRequest'),BurnRequest:require('./PCCViewer.BurnRequest'),PrintRequest:require('./PCCViewer.Print').PrintRequest,PrintControl:require('./PCCViewer.Print').PrintControl,Mark:require('./PCCViewer.Marks'),MarkupLayer:require('./PCCViewer.MarkupLayer'),LoadMarkupLayersRequest:require('./PCCViewer.LoadMarkupLayersRequest'),MarkupLayerCollection:require('./PCCViewer.MarkupLayerCollection'),PasswordProtectedDocumentLoader:require('./PCCViewer.PasswordProtectedDocumentLoader'),};module.exports=PCCViewer;},{"./PCCViewer.Ajax":130,"./PCCViewer.BurnRequest":131,"./PCCViewer.ClientSearch":132,"./PCCViewer.Comments":133,"./PCCViewer.ConversionRequest":134,"./PCCViewer.Data":135,"./PCCViewer.Deferred":136,"./PCCViewer.DocumentHyperlink":137,"./PCCViewer.Error":138,"./PCCViewer.Event":139,"./PCCViewer.EventEmitter":140,"./PCCViewer.EventEmitterProxy":141,"./PCCViewer.EventType":142,"./PCCViewer.FitType":143,"./PCCViewer.Helper":144,"./PCCViewer.ImageStamps":145,"./PCCViewer.Language":146,"./PCCViewer.LoadMarkupLayersRequest":147,"./PCCViewer.MarkHandleMode":149,"./PCCViewer.Marks":151,"./PCCViewer.MarkupLayer":152,"./PCCViewer.MarkupLayerCollection":153,"./PCCViewer.MouseTool":154,"./PCCViewer.ObservableCollection":155,"./PCCViewer.PageLayout":156,"./PCCViewer.PasswordProtectedDocumentLoader":157,"./PCCViewer.Print":158,"./PCCViewer.RedactionViewMode":159,"./PCCViewer.Revision":160,"./PCCViewer.RevisionsRequest":161,"./PCCViewer.ScaleTrigger":162,"./PCCViewer.Search":163,"./PCCViewer.ServerSearch":164,"./PCCViewer.Signature":165,"./PCCViewer.ThumbnailControl":167,"./PCCViewer.Util":168,"./PCCViewer.ViewMode":169,"./PCCViewer.ViewerControl":170,"./searchRequest":172,"./searchResult":173,"prizmdoc-input-mask":2,"prizmdoc-search":7}],172:[function(require,module,exports){var SearchRequest=function(uc){this.iV={};this.cn={};this.eb=[];this.wt=false;this.fc=null;this.dC=null;this.Ty=[];if(Object.defineProperties){Object.defineProperties(this,{"searchQuery":{configurable: ! !uc,enumerable:true,get:function(){return this.cn;}},"results":{configurable: ! !uc,enumerable:true,get:function(){return this.eb;}},"isComplete":{configurable: ! !uc,enumerable:true,get:function(){return this.wt;}},"errorCode":{configurable: ! !uc,enumerable:true,get:function(){return this.fc;}},"errorMessage":{configurable: ! !uc,enumerable:true,get:function(){return this.dC;}}});}PCCViewer.EventEmitter.extend(this);};SearchRequest.prototype.getSearchQuery=function(){return this.cn;};SearchRequest.prototype.getResults=function(){return this.eb;};SearchRequest.prototype.getIsComplete=function(){return this.wt;};SearchRequest.prototype.getErrorCode=function(){return this.fc;};SearchRequest.prototype.getErrorMessage=function(){return this.dC;};SearchRequest.prototype.getPagesWithoutText=function(){return this.Ty;};SearchRequest.prototype.cancel=function(){this.qj=true;this.trigger('SearchCancelled');};module.exports=SearchRequest;},{}],173:[function(require,module,exports){var SearchResult=function(){this.ds=0;this.bb=0;this.bf=0;this.aS='';this.rw='';this.rn=0;this.ci='';this.zM=0;this.bv='';this.Ve='';this.lH=null;};SearchResult.prototype.getId=function(){return this.ds;};SearchResult.prototype.getPageNumber=function(){return this.bb;};SearchResult.prototype.getText=function(){return this.aS;};SearchResult.prototype.getHighlightColor=function(){return this.rw;};SearchResult.prototype.getStartIndexInPage=function(){return this.rn;};SearchResult.prototype.getContext=function(){return this.ci;};SearchResult.prototype.getStartIndexInContext=function(){return this.zM;};SearchResult.prototype.getSearchTerm=function(){return this.bv;};SearchResult.prototype.getBoundingRectangle=function(){return this.lH;};if(Object.defineProperties){Object.defineProperties(SearchResult.prototype,{"pageNumber":{enumerable:true,get:function(){return this.bb;}},"id":{enumerable:true,get:function(){return this.ds;}},"text":{enumerable:true,get:function(){return this.aS;}},"highlightColor":{enumerable:true,get:function(){return this.rw;}},"startIndexInPage":{enumerable:true,get:function(){return this.rn;}},"context":{enumerable:true,get:function(){return this.ci;}},"startIndexInContext":{enumerable:true,get:function(){return this.zM;}},"searchTerm":{enumerable:true,get:function(){return this.bv;}},"boundingRectangle":{enumerable:true,get:function(){return this.getBoundingRectangle();}}});}var SearchTaskResult=function(){this.ds=0;this.bf=0;this.aS='';this.rw='';this.rn=0;this.ci='';this.zM=0;this.bv='';};SearchTaskResult.prototype.getId=function(){return this.ds;};SearchTaskResult.prototype.getText=function(){return this.aS;};SearchTaskResult.prototype.getHighlightColor=function(){return this.rw;};SearchTaskResult.prototype.getStartIndexInInput=function(){return this.rn;};SearchTaskResult.prototype.getContext=function(){return this.ci;};SearchTaskResult.prototype.getStartIndexInContext=function(){return this.zM;};SearchTaskResult.prototype.getSearchTerm=function(){return this.bv;};if(Object.defineProperties){Object.defineProperties(SearchTaskResult.prototype,{"id":{enumerable:true,get:function(){return this.ds;}},"text":{enumerable:true,get:function(){return this.aS;}},"highlightColor":{enumerable:true,get:function(){return this.rw;}},"startIndexInInput":{enumerable:true,get:function(){return this.rn;}},"context":{enumerable:true,get:function(){return this.ci;}},"startIndexInContext":{enumerable:true,get:function(){return this.zM;}},"searchTerm":{enumerable:true,get:function(){return this.bv;}}});}module.exports={SearchTaskResult:SearchTaskResult,SearchResult:SearchResult};},{}],174:[function(require,module,exports){if(typeof window==='undefined'){throw new Error('The viewer-core module can only be used in a browser environment (where a window object exists).');}require('./../css/viewercontrol.css');var IPCC=require('./IPCC/IPCC');var PCCViewer=require('./PCCViewer/PCCViewer');window.IPCC=IPCC;window.PCCViewer=PCCViewer;module.exports=PCCViewer;},{"./../css/viewercontrol.css":11,"./IPCC/IPCC":29,"./PCCViewer/PCCViewer":171}]},{},[174])(174)}); 